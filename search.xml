<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[ÁÅ´‰πãÊÑèÂøó]]></title>
      <url>https://stanxia.github.io/2022/10/27/%E7%81%AB%E4%B9%8B%E6%84%8F%E5%BF%97/</url>
      <content type="html"><![CDATA[<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><img src="http://oliji9s3j.bkt.clouddn.com/15120957305825.jpg" alt></div><div class="group-picture-column" style="width: 50%;"><img src="http://oliji9s3j.bkt.clouddn.com/15120957546525.jpg" alt></div></div><div class="group-picture-row"></div></div></div>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> photo </category>
            
        </categories>
        
        
        <tags>
            
            <tag> photo </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title></title>
      <url>https://stanxia.github.io/2020/02/05/Have%20Arthur%20Miller%E2%80%99s%20plays%20lost%20their%20edge/</url>
      <content type="html"><![CDATA[<hr>
<p>title: Have Arthur Miller‚Äôs plays lost their edge</p>
<p>date: 2019-04-16 23:16:48 </p>
<p>tags: economist </p>
<p>categories: economist </p>
<hr>
<h5 id="The-problem-often-lies-in-the-staging-not-the-works-themselves"><a href="#The-problem-often-lies-in-the-staging-not-the-works-themselves" class="headerlink" title="The problem often lies in the staging, not the works themselves"></a>The problem often lies in the staging, not the works themselves</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_BKP502.jpg" alt="image"></p>
<blockquote>
<p>Prospero | Apr 15th 2019</p>
</blockquote>
<p>ARTHUR MILLER did not aim to please his audiences. He reckoned that new ideas were a ‚Äúhumiliation‚Äù and an ‚Äúaffront‚Äù not only to people‚Äôs sensibilities but to their convictions, too. Like the ancient Greeks, Miller thought of drama as a ‚Äúcivic art‚Äù, a discipline that could contribute towards a state‚Äôs social and political progress. Unlike his contemporaries, he was not commercially minded. He said what no one else had the courage to, and his audiences would weep, or sit with their heads bowed. Irate patriots picketed theatres, and producers shied away from his work. Actors who appeared in his plays were shunned by their friends. </p>
<p>Miller‚Äôs observations hold true in the 21st century, particularly about the fallacy of the American Dream. Many still think of material wealth and status as essential to happiness, as Willy Loman does in ‚ÄúDeath of a Salesman‚Äù. ‚ÄúThe American Clock‚Äù, which reflects on the Wall Street Crash and the Great Depression, is a reminder of the perils of short-termism. ‚ÄúThe Price‚Äù, set 30 years later, focuses on the longer-term repercussions. In ‚ÄúAll My Sons‚Äù Miller questions individualist thinking. ‚ÄúThe Crucible‚Äù examines the destructive allure of ideologies.</p>
<p>Those insights, far from alienating today‚Äôs audiences, are now Miller‚Äôs selling points. Productions of his work have increased since his death in 2005, according to Susan Abbotson, the president of the Arthur Miller Society. He has been among the ten most-performed playwrights in American theatres for the past four years. Six productions of his work are currently being staged in London, an unusually high number for any playwright other than William Shakespeare. Tickets in the West End sell for as much as ¬£142 ($186), a sum Miller would no doubt have been uncomfortable with given his belief that theatre should be affordable. Does this popularity suggest that his plays have lost their subversive edge?</p>
<p>Perhaps‚Äîtime can dull even radical ideas. It is no longer shocking to hear that humans are doomed to repeat their mistakes. But Miller‚Äôs fashionableness also suggests that directors have stopped confronting their audiences, and have started pandering to them. A recent production at the Union Theatre of ‚ÄúAn Enemy of the People‚Äù, Miller‚Äôs adaptation of Henrik Ibsen‚Äôs play, had an image of President Donald Trump on its poster. The action was set in a contemporary ‚Äúsmall-town Republican‚Äù community. Mayor Stockmann, a manipulative politician, dresses in a red suit, grinning and waving to chants of ‚ÄúUSA! USA!‚Äù Miller never assigned a political persuasion to the play‚Äôs characters‚Äîhe saw himself as a mediator, showing disparate groups what they have in common‚Äîbut the suggestion here was that only Republicans can succumb to populist rhetoric and misinformation. This version of ‚ÄúAn Enemy of the People‚Äù reinforced divisions, and allowed its audience to leave feeling smug.</p>
<p>Productions can also be too reverent of the source material. ‚ÄúThe Price‚Äù (at Wyndham‚Äôs Theatre) strives for a historically accurate depiction of New York in the 1960s. The audience sees Gregory Solomon, a Russian-Jewish √©migr√©, blessing his meagre lunch‚Äîa hard-boiled egg‚Äîin Hebrew. When the play was first performed in 1968, such details invited audiences to reflect on their city‚Äôs recent past, particularly the emotional fall-out from the boom and busts of the ‚Äò20s and ‚Äò30s. Now heightened for comic effect, they seem alien and strange. Miller wanted his plays to be relatable, not preserved in aspic‚Äî‚Äúthere are museums for such activities,‚Äù he said‚Äîand so the setting must be familiar. In 2012 a production in Mumbai turned Solomon into a Muslim nonagenarian to great effect.</p>
<p>Miller‚Äôs plays provoked because they were about the audience as much as for them. ‚ÄúThe Crucible‚Äù (pictured, at the Yard Theatre) opens with the townspeople of Salem dressed in the same style of clothing‚Äîbeanie hats, baggy t-shirts, cargo trousers‚Äîas the audience of this edgy North London theatre. They are invited to confront an uncomfortable truth: any society, no matter how educated or tolerant it believes itself to be, can submit to hysteria. Reactions ranged from brow-furrowed confusion to wide-eyed fascination.</p>
<p>It is difficult for Miller‚Äôs plays to have the same effect today as when their themes were still unfamiliar, even taboo. Perhaps contemporary playwrights are better placed to touch modern nerves. But thoughtful stagings can continue to make audiences reflect on their own prejudices and shortcomings.</p>
]]></content>
      
        
    </entry>
    
    <entry>
      <title><![CDATA[Why British wage growth is picking up at last]]></title>
      <url>https://stanxia.github.io/2020/02/05/new%20page/</url>
      <content type="html"><![CDATA[<h2 id="Ê¨¢Ëøéüëè"><a href="#Ê¨¢Ëøéüëè" class="headerlink" title="Ê¨¢Ëøéüëè"></a>Ê¨¢Ëøéüëè</h2><p>ÈòîÂà´</p>
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[A big week for American banks]]></title>
      <url>https://stanxia.github.io/2019/04/17/A-big-week-for-American-banks/</url>
      <content type="html"><![CDATA[<h5 id="Our-weekly-podcast-on-the-markets-the-economy-and-the-world-of-business"><a href="#Our-weekly-podcast-on-the-markets-the-economy-and-the-world-of-business" class="headerlink" title="Our weekly podcast on the markets, the economy and the world of business"></a>Our weekly podcast on the markets, the economy and the world of business</h5><p><img src="https://cdn.static-economist.com/sites/default/files/money_talks_11.jpg" alt="image"></p>
<blockquote>
<p>Podcasts | Apr 16th 2019</p>
</blockquote>
<p>AMERICA‚ÄôS LARGEST banks reported earnings this week. Bank of America‚Äôs chief executive, Brian Moynihan, tells Anne McElvoy why he is bullish about the American economy and justifies his pay package. Also, can Goldman Sachs reinvent itself in the shadow of a scandal? And Tiger Woods‚Äôs stroke of genius‚Äîfor the business of golf. Simon Long hosts.</p>
<p>Listen on: Apple Podcasts | Spotify | Google | Stitcher | TuneIn</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[India‚Äôs enormous election, and more from our daily podcast]]></title>
      <url>https://stanxia.github.io/2019/04/17/India%E2%80%99s-enormous-election,-and-more-from-our-daily-podcast-/</url>
      <content type="html"><![CDATA[<h5 id="Also-moderating-social-media-and-pole-dancing‚Äôs-sporting-ambitions"><a href="#Also-moderating-social-media-and-pole-dancing‚Äôs-sporting-ambitions" class="headerlink" title="Also, moderating social media and pole-dancing‚Äôs sporting ambitions"></a>Also, moderating social media and pole-dancing‚Äôs sporting ambitions</h5><p><img src="https://cdn.static-economist.com/sites/default/files/the_intelligence_53.jpg" alt="image"></p>
<blockquote>
<p>Podcasts | Apr 15th 2019</p>
</blockquote>
<p>THE WORLD‚ÄôS largest democratic exercise is under way in India. The prime minister, Narendra Modi, looks likely to win on a divisive platform of Hindu nationalism and aggression towards Pakistan, even if those are not voters‚Äô biggest concerns. Social-media companies are increasingly under the microscope of regulators; we take a look at the seemingly intractable problem of policing online content. And pole-dancing is trying to shed its seedy image. But can it develop into a global sport? Runtime: 21 min. </p>
<p>Listen on: Apple Podcasts | Spotify | Google | Stitcher | TuneIn</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Lessons of the Mueller report]]></title>
      <url>https://stanxia.github.io/2019/04/17/Lessons%20of%20the%20Mueller%20report/</url>
      <content type="html"><![CDATA[<h5 id="Every-political-scandal-sets-a-precedent-for-the-next"><a href="#Every-political-scandal-sets-a-precedent-for-the-next" class="headerlink" title="Every political scandal sets a precedent for the next"></a>Every political scandal sets a precedent for the next</h5><p><img src="https://cdn.static-economist.com/sites/default/files/images/2019/03/articles/main/20190330_ldp001.jpg" alt="image"></p>
<blockquote>
<p>Mar 28th 2019</p>
</blockquote>
<p>ROBERT MUELLER toiled over his report for two years, slightly longer than it took Herman Melville to write ‚ÄúMoby Dick‚Äù. Going by a summary provided by the attorney-general, though, the endings are the same: the whale gets away. The special counsel did not find that members of the Trump campaign conspired with the Russian government when it interfered in the 2016 election. The president is crowing. Democrats in Congress point out that Mr Mueller did not exonerate the president over obstruction of justice, which is also true. But make no mistake: this is as good an outcome as Donald Trump could have wished for.</p>
<p>For the rest of his first term, and perhaps long into his second, he will be able to point to an exhaustive investigation and say he was right all along. The president thrives on grievance‚Äîagainst the media, the federal bureaucracy, or anyone he suspects of feeling superior. The outcome of the Mueller report will feed that. As a result, the silver harpoon that some Americans hoped would finish off Mr Trump may in fact strengthen him.</p>
<p>A few lessons can be drawn from this episode. The first is not to confuse a legal process with a political one. Ever since Mr Trump won power, those Americans who could not bear the idea of him as president have dreamed of some non-political way to erase the result‚Äîof a jurist who could simply declare it all over. Mr Mueller seemed the likeliest candidate for this role, just as Kenneth Starr did in the campaign to remove Bill Clinton.</p>
<p>In fact the fate of Mr Trump‚Äôs presidency will depend on politics, probably through the ballot box in 2020. Even those Democrats who cling to the fantasy of using Congress to impeach and remove him need to understand just how political this process would be. The fevered speculation during the two years of the Mueller investigation has often masked that.</p>
<p>The other lesson Democrats should heed is to keep quiet about a legal process until it is over. That is worth bearing in mind as House committees under Democratic control pursue their own investigations, and courts and prosecutors look into allegations about Mr Trump and his family. Some of his opponents have prejudged these investigations. If it turns out that he did not commit the crimes they expect, they risk not just having distracted voters from the real agenda, but also giving him a boost. They should not make the same mistake twice.</p>
<p>The Mueller investigation also holds lessons for those Republicans emboldened to seek vengeance for what they say was treason against their president. Thanks to Mr Mueller, the president‚Äôs campaign manager and personal lawyer are both heading to prison. His national security adviser pleaded guilty to lying to the FBI about his conversations with the Russian ambassador. Since Watergate, nothing like this has happened in American politics. By revealing duplicitous and corrupt behaviour among Mr Trump‚Äôs team, and by bringing prosecutions, Mr Mueller has helped cleanse political campaigning.</p>
<p>The investigation also revealed that the president misled voters about his business interests in Russia. While the candidate was rewriting orthodox Republican Party policy towards Vladimir Putin, his company was trying to build a skyscraper in Moscow. His retrospective justification was that he might have lost the election, in which case it would have been a shame to give up on a deal. This conflict of interest did not amount to criminal collusion or conspiracy, in the special counsel‚Äôs view. It is nevertheless the sort of transgression that America‚Äôs political system would not have tolerated before Mr Trump came along.</p>
<p>There is a last reason to be thankful to Mr Mueller. Each time America‚Äôs political system goes through an upheaval, it sets a precedent for how its institutions will handle the next one. Mr Mueller‚Äôs conduct was exemplary. If widespread misconduct once again occurs in an American presidential election, the expectation will be that a special counsel will investigate. Though Mr Trump repeatedly denounced the investigation as a witch-hunt, he did not fire the witch-finder. Mr Mueller was able to finish his work. For that, at least, Mr Trump deserves credit.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Binyamin Netanyahu a parable of modern populism]]></title>
      <url>https://stanxia.github.io/2019/04/17/Binyamin%20Netanyahu%20a%20parable%20of%20modern%20populism/</url>
      <content type="html"><![CDATA[<h5 id="In-Israel-as-elsewhere-politics-is-a-perplexing-mix-of-sound-policy-and-the-cynical-erosion-of-institutions"><a href="#In-Israel-as-elsewhere-politics-is-a-perplexing-mix-of-sound-policy-and-the-cynical-erosion-of-institutions" class="headerlink" title="In Israel, as elsewhere, politics is a perplexing mix of sound policy and the cynical erosion of institutions"></a>In Israel, as elsewhere, politics is a perplexing mix of sound policy and the cynical erosion of institutions</h5><p><img src="https://cdn.static-economist.com/sites/default/files/images/2019/03/articles/main/20190330_LDD002.jpg" alt="image"></p>
<blockquote>
<p>Mar 30th 2019</p>
</blockquote>
<p>HIS DEVOTEES call him ‚ÄúThe Magician‚Äù, ‚ÄúThe Winner‚Äù and‚Äîthe ultimate accolade‚Äîmelekh yisrael, ‚ÄúKing of Israel‚Äù. Binyamin Netanyahu is Israel‚Äôs most gifted politician in a generation. He is his country‚Äôs second-longest-serving prime minister and, if he wins his fifth election on April 9th, may beat the record of the country‚Äôs founding father, David Ben Gurion.</p>
<p>‚ÄúBibi‚Äù, as he is known by all, is important beyond Israel, too, and not only because he speaks in perfect soundbites in both Hebrew and English and stands tall in today‚Äôs chaotic Middle East. He matters because he embodied the politics of muscular nationalism, chauvinism and the resentment of elites long before such populism became a global force. Mr Netanyahu counts among his friends and allies such nationalists as Donald Trump and Narendra Modi, not to mention European ones from Viktor Orban in Hungary to Matteo Salvini in Italy.</p>
<p>The reign of King Bibi is thus a parable of modern politics: the rise of a talented politician and a long success based on a perplexing mixture of carrying out sound policy and cynically sowing division. As his power is threatened, he has turned to railing more loudly against the free press, the judiciary and shadowy forces. Now Bibi faces his greatest danger, in the form of criminal charges for corruption. In a different age he would have had to resign, and would now be defending himself as an ordinary citizen. But he is intent on remaining in office, and hopes that voters will yet save him from the policemen, prosecutors and judges. Israeli politics is turning into a contest between genuine achievement and demagoguery on one side and the rule of law on the other. All who care about democracy should watch closely.</p>
<p>Little Israel commands attention because it has a big history: biblical romance and technological talent; the slaughter of the Holocaust and military prowess; energetic democracy and the long occupation of land claimed and inhabited by Palestinians. That said, Mr Netanyahu is a big figure in his own right (see article). He is more intelligent and capable than many populists, and can claim plenty of successes. By shrinking the bloated state he has helped Israel‚Äôs economy flourish, particularly its tech startups. With deft use of diplomacy and the mostly cautious use of military force, he has boosted security without being sucked into disastrous wars. Thanks to that and a shared hostility to Iran, relations with many Arab rulers are better than at any time in Israel‚Äôs history.</p>
<p>Yet Mr Netanyahu is also worryingly dogmatic. He has paid lip service to peace with Palestinians but has taken no meaningful steps towards it. He has denounced any Western co-operation with Iran, even if it served to limit Iran‚Äôs nuclear programme. In Bibi‚Äôs pessimistic view, Israel is surrounded by wolves in sheep‚Äôs clothing and wolves in wolves‚Äô clothing. Israel can only manage conflicts, not solve them, he believes, so it must rely on an iron wall and the passage of time.</p>
<p>Such ‚Äúanti-solutionism‚Äù risks storing trouble for the future. It increases the danger of war with Iran, or of its hardliners making a dash for nukes. The more Israel entrenches itself in the West Bank, the more its ‚Äútemporary‚Äù military occupation looks like the permanent subjugation of Palestinians under a separate law, even apartheid. This is made worse by the absence of America‚Äôs restraining influence. Mr Netanyahu has warmly embraced Mr Trump, who in turn has showered him with gifts, most recently his endorsement of Israel‚Äôs annexation of the Golan Heights. Might Mr Trump also back Israel‚Äôs annexation of bits of the West Bank, so denying Palestinians the hope of statehood? In the long run Bibi‚Äôs overt alignment with America‚Äôs Republicans and the evangelical right endangers the bipartisan pro-Israeli consensus in Washington that is the foundation of Israel‚Äôs security.</p>
<p>But the greatest threat from Bibi‚Äôs reign has been at home. He has kept power not just on the strength of his record but also by seeking political advantage at the cost of eroding Israel‚Äôs democratic norms. In claiming that no peace with Palestinians is possible (or desirable), members of his right-wing coalition outbid each other to pass measures asserting Jewish supremacy. Mr Netanyahu pushed for an electoral pact with the hitherto untouchable far-right Jewish Power group, which wants to annex all the occupied territories and ‚Äúencourage‚Äù Arabs, including Israeli citizens, to leave. He has played us-and-them politics for so long that he has exacerbated the country‚Äôs many schisms‚Äîbetween Jews and Arabs, diaspora Jews and Israelis, western Ashkenazi and eastern Mizrahi Jews, and secular and religious ones. By casting himself as uniquely able to protect Israel against its enemies, he often treats those who say otherwise as wimps or traitors.</p>
<p>Mr Netanyahu and his friends denounce as backstabbers any Jews who stand in their way. The free press peddles fake news. Political opponents, even the generals who pack the new Blue and White opposition party, are in cahoots with the Arabs. Bibi has flirted with the conspiracy theory beloved of anti-Semites that George Soros, a Jewish billionaire, is plotting to undermine nationalist governments around the world.</p>
<p>The corruption charges against him, says Mr Netanyahu, amount to a ‚Äúblood libel‚Äù‚Äîa vile medieval canard that accused Jews of mixing the blood of murdered Christian children in their Passover bread. Yet the police chief who investigated the charges, and the attorney-general who ordered his indictment, were both hand-picked by Mr Netanyahu. His allies want a law that would grant a prime minister immunity from prosecution.</p>
<p>Israel is an outlier among Western democracies. It was born as the state of the Jews; Zionism and Palestinian nationalism claim the same land. Israel must contend with a genuine ‚Äúother‚Äù and existential threats, not the bogeymen invented by populists elsewhere. The left, in disarray in many countries, suffered a body-blow in Israel because its attempt to negotiate a land-for-peace deal with Palestinians collapsed into bloodshed.</p>
<p>Yet precisely because of these pressures, Israel offers an important test of the resilience of democracy. On April 9th Israeli voters face a fateful choice. Re-elect Mr Netanyahu and reward him for subverting the independence of Israel‚Äôs institutions. Or turf him out in the hope of rebuilding trust in democracy‚Äîand aspiring to be ‚Äúa light unto the nations‚Äù.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[America must stop Binyamin Netanyahu from annexing Palestinian land]]></title>
      <url>https://stanxia.github.io/2019/04/17/America%20must%20stop%20Binyamin%20Netanyahu%20from%20annexing%20Palestinian%20land/</url>
      <content type="html"><![CDATA[<h5 id="Some-of-his-election-pledges-would-kill-the-chance-of-a-two-state-solution"><a href="#Some-of-his-election-pledges-would-kill-the-chance-of-a-two-state-solution" class="headerlink" title="Some of his election pledges would kill the chance of a two-state solution"></a>Some of his election pledges would kill the chance of a two-state solution</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190413_LDP001.jpg" alt="image"></p>
<blockquote>
<p>Apr 11th 2019</p>
</blockquote>
<p>MAKE IT OFFICIAL: henceforth, the Hebrew word for magician is Bibi. This is not just because Binyamin Netanyahu, Israel‚Äôs prime minister, appears to have won a record fifth term in office on April 9th. It is also because he pulled off the trick with corruption charges hanging over him, and in the face of a tough challenge from a new party packed with generals. Bibi, as he is known, made some parties vanish by taking their supporters, and conjured more seats for his own Likud party. He may soon surpass David Ben-Gurion, the country‚Äôs founding father, as Israel‚Äôs longest-serving leader (see article).</p>
<p>His victory has come at a cost. His potion‚Äîmixing muscular nationalism with Jewish chauvinism and anti-elitism‚Äîhas helped poison Israel‚Äôs politics. He claims he is innocent, blaming the charges against him on shadowy plots and sowing distrust of institutions: the police, the judiciary and the media. Mr Netanyahu may do yet more lasting damage. In the final days of the campaign he vowed to annex parts of the West Bank beyond Jerusalem, something no previous leader has thought prudent. This risks killing any chance of peace based on a two-state solution‚Äîwhich involves the creation of a Palestinian state‚Äîand of thus turning Israel into a rogue nation.</p>
<p>Fear not, say the optimists: Mr Netanyahu was just throwing out sweets to win over right-wing voters; he knows full well that annexation of the occupied territories would breach international law, cause an outcry in Europe and alienate Arab states that have been moving closer to Israel.</p>
<p>The problem with this view is that it ignores the changing political and strategic landscape. Mr Netanyahu must still form a government, which means making concessions to his likely allies on the right, who feel more strongly about annexation than he does. The prime minister‚Äôs legal troubles‚Äîhe faces indictment on three cases of alleged corruption‚Äîleave him vulnerable. What will be the price when the Knesset considers a bill that would shield him from prosecution? If it is annexation, the process may begin with Maale Adumim, a large settlement on the outskirts of Jerusalem which the prime minister specifically promised to bring under Israeli sovereignty. But as Mr Netanyahu himself has said, it is unlikely to end there.</p>
<p>America‚Äôs role has changed, too. For decades its presidents acted as a counterweight to Israeli annexationists (and gave cover to prime ministers fearful of standing up to them). President Donald Trump, though, has taken America‚Äôs finger off the scales. He has emboldened the right by recognising Israel‚Äôs annexation of the Golan Heights, which it captured from Syria in 1967, and moving the embassy to Jerusalem, a contested city. Mr Netanyahu made good use of these moves in his campaign. Even if he does not feel the need to go further by formally annexing territory, there is nothing to stop the creeping sort: the expansion of Jewish settlements and their infrastructure. That is happening with barely a peep from the world, let alone the divided Palestinians.</p>
<p>The Trump administration says it is about to release a plan for the ‚Äúultimate deal‚Äù between Israelis and Palestinians. If this is to have any hope of success, or even of starting a process, the president must rule out unilateral annexation‚Äîwhether or not the Palestinians participate. If Israelis can grab land at a whim, they will have little incentive to negotiate. If Palestinians see parts of their future state taken away willy-nilly, neither will they.</p>
<p>In the end, Israel faces a stark choice. Jews and Arabs count roughly equal numbers between the Mediterranean and the Jordan river. So Israel cannot permanently hold on to all the land without sacrificing either its Jewish majority or the ideal of a proper democracy that does not discriminate against Arabs. The more Mr Netanyahu abandons land-for-peace, the more the choice will be annexation-for-apartheid. That dilemma is something even Bibi cannot conjure away.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[‚ÄúFosse/Verdon‚Äù is a compelling examination of a creative partnership]]></title>
      <url>https://stanxia.github.io/2019/04/16/%E2%80%9CFosse-Verdon%E2%80%9D%20is%20a%20compelling%20examination%20of%20a%20creative%20partnership/</url>
      <content type="html"><![CDATA[<h5 id="Bob-Fosse-and-Gwen-Verdon-were-integral-to-some-of-the-20th-century‚Äôs-biggest-musicals"><a href="#Bob-Fosse-and-Gwen-Verdon-were-integral-to-some-of-the-20th-century‚Äôs-biggest-musicals" class="headerlink" title="Bob Fosse and Gwen Verdon were integral to some of the 20th century‚Äôs biggest musicals"></a>Bob Fosse and Gwen Verdon were integral to some of the 20th century‚Äôs biggest musicals</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_BKP503.jpg" alt="image"></p>
<blockquote>
<p>Prospero | Apr 16th 2019</p>
</blockquote>
<p>‚ÄúFOSSE/VERDON‚Äù, a new mini-series about two Broadway legends, could have been a simple paean to the magic of the stage. Bob Fosse (Sam Rockwell), a director, and his wife Gwen Verdon (Michelle Williams), a dancer, helped to create hits such as ‚ÄúDamn Yankees!‚Äù, ‚ÄúChicago‚Äù and ‚ÄúCabaret‚Äù. There is plenty of exquisite choreography, as legs kick in perfect time and dazzling costumes shimmer on twisting bodies, plus a sparkling rendition of ‚ÄúBig Spender‚Äù. Elsewhere, in a fantasy scene, Fosse twirls effortlessly down a corridor, surrounded by colourful dancers.</p>
<p>But the show turns out to be a surprisingly moving examination of the characters of Fosse and Verdon, as well as their extraordinary careers. It opens with the build-up to ‚ÄúCabaret‚Äù, Fosse‚Äôs best-known film, which he directed and choreographed in 1971. The viewer is transported from Hollywood to damp, dark Munich, where it was shot, and the pressure is palpable. The film cannot afford to be ‚Äúanother $20m fiasco‚Äù, a producer warns, referring to one of Fosse‚Äôs previous misses. Fosse, in turn, takes it out on his crew. ‚ÄúI wanna see every muscle, every tendon,‚Äù he barks during exhausting rehearsals for ‚ÄúMein Herr‚Äù, one of the nightclub songs. After seeing the first cut, he moans to his assistant that ‚Äúit‚Äôs unwatchable‚Äù. On the night of the premiere, he paces in the auditorium rather than watching the film (it was a box-office triumph and would go on to win eight Oscars). His personal torment, and abject terror of failure, is clear. </p>
<p>The programme dances back and forth in time. Title cards, such as ‚ÄúHollywood: 19 years left‚Äù and ‚ÄúGwen Verdon: 14 years after her last Tony award‚Äù, contextualise the scenes, which range across five decades. It allows the viewer to see patterns emerge. A flashback to Fosse‚Äôs childhood dance classes, for example‚Äî‚Äúdon‚Äôt show me the effort, Bobby, don‚Äôt show me the sweat. All they wanna see is that smile‚Äù‚Äîhelps to explain Fosse‚Äôs treatment of his own dancers. Depictions of his career highs jar with his descent into depression and alcoholism, as well as scenes of childhood abuse. His wild lifestyle of pills, sex, parties and more pills, is juxtaposed with images of Verdon feeding their daughter dinner and arranging child care. The effect is troubling, and powerful. </p>
<p>Mr Rockwell‚Äôs thoughtful and pained performance elicits a surprising amount of sympathy for Fosse, even as he behaves appallingly. One excruciating scene shows a lead dancer refusing his sexual advances; she is subsequently fired. But the decision to give Verdon equal billing in the production was a wise one (the series was originally adapted from ‚ÄúFosse‚Äù, a biography written in 2013, but the producers realised that this would result in a narrow, uneven story). She emerges as a quiet kind of hero, helped by an elegant performance by Ms Williams. </p>
<p>Verdon, as well as being Fosse‚Äôs long-suffering wife, was his creative collaborator. Her career peaked in the 1950s, when she won a string of Tony awards, but she gradually lost her hold over Hollywood and was eventually eclipsed by her husband. Yet when ‚ÄúCabaret‚Äù hits a crisis‚Äîthe endless rehearsals are ruining the shooting schedule, and the budget‚Äîit is Verdon that Fosse needs, begging her to come and join him in Germany. She sweeps in, taking charge of hair and make-up and fine-tuning the dancing. Where Fosse had used the dancers as moving props, Verdon makes them into fleshed-out characters with backstories. As such, ‚ÄúFosse/Verdon‚Äù reminds viewers that great feats are rarely accomplished alone (a theme that Lin-Manuel Miranda, an executive producer of the series, touched upon in ‚ÄúHamilton‚Äù, his own musical hit). </p>
<p>Tributes to Tinseltown and Broadway, such as ‚ÄúLa La Land‚Äù, often focus on the glamour and romanticism of it all. ‚ÄúFosse/Verdon‚Äù is all the better for lifting the stage curtain to look at the people behind it. The series understands that while show business projects an image of human perfection, its masters are as flawed as they are brilliant.</p>
<p>‚ÄúFosse/Verdon‚Äù is showing on FX in America now. It will be released in Britain on BBC Two later this year</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Chevron is buying Anadarko for $33bn]]></title>
      <url>https://stanxia.github.io/2019/04/16/Chevron%20is%20buying%20Anadarko%20for%20$33bn/</url>
      <content type="html"><![CDATA[<h5 id="The-deal-signals-greater-consolidation-in-the-shale-business"><a href="#The-deal-signals-greater-consolidation-in-the-shale-business" class="headerlink" title="The deal signals greater consolidation in the shale business"></a>The deal signals greater consolidation in the shale business</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_blp901.jpg" alt="image"></p>
<blockquote>
<p>Apr 13th 2019</p>
</blockquote>
<p>IN RECENT MONTHS a question has been hanging over the plains of Texas: what would be the next big shale deal? The logic for consolidation seemed clear. Texas‚Äôs Permian basin is America‚Äôs most productive oilfield, despite a patchwork of plots with hundreds of owners. Shale companies looked cheap, with investors sceptical about firms‚Äô ability to produce both oil and profits. On April 12th the curious got their answer.</p>
<p>Chevron, a giant oil company, will pay $33bn in cash and shares to buy Anadarko, an independent producer with rich holdings in the Permian. It will also assume Anadarko‚Äôs $16bn debt. The deal transforms Chevron into the world‚Äôs second-biggest publicly traded oil-producer, behind only ExxonMobil. It is the latest sign of shale‚Äôs growing importance to the world‚Äôs biggest energy firms.</p>
<p>Oil majors have arrived relatively late to fracking. Small, independent companies were first to set about coaxing oil from shale. They developed ways to drill not just down but horizontally, then assault shale with water and sand until the rock gave up its hydrocarbon riches. But the industry titans have warmed to the idea. Unlike, say, a complex deepwater project in a distant jurisdiction, shale offers quick drilling times, predictable cashflow and favourable American regulation. Smaller companies have often fracked frenetically, eager to reinvest proceeds and chase growth. Too frenetically at times; some took on more debt than they could handle. Giant companies have less experience with the technique. But their diversified revenue and larger balance-sheets allow them to accumulate acreage even as they drill at a more measured pace. </p>
<p>Last year BP, a British firm, paid $10.5bn to acquire the shale assets of BHP, a giant miner. ExxonMobil and Chevron have placed the biggest bets. Chevron‚Äôs shale holdings were vast even before the Anadarko deal. The company controlled 1.7m acres (690,000 hectares) in two of the Permian‚Äôs most productive regions. In March ExxonMobil said it expects production in the Permian to exceed 1m barrels a day within five years. </p>
<p>With Anadarko, Chevron‚Äôs Permian production may be 60% higher than ExxonMobil‚Äôs, according to Rystad Energy, a research firm. Anadarko gives Chevron more than just shale. Its assets include a liquefied-natural-gas project in Mozambique and holdings in the Gulf of Mexico. Still, Anadarko‚Äôs Permian plots would have been the main lure. With them, Chevron can drill more wells, more efficiently. Adjacent plots will let the company move farther sideways through the rock and simplify the transport of equipment and other inputs, such as the millions of gallons of water required to wrest oil from each well. Chevron reckons that the deal will bring $2bn in savings, all told. </p>
<p>Some investors hope that, as shale companies consolidate, they will mature and their performance will improve. Independent producers may now bulk up, following the lead of Concho Resources. Last year it bought RSP Permian, a rival, for $9.5bn. </p>
<p>Meanwhile, the supermajors‚Äô holdings look poised to expand. ExxonMobil has said it would consider additional shale acquisitions. Royal Dutch Shell is rumoured to be weighing the purchase of Endeavor Energy, whose headquarters sit in the heart of the Permian. </p>
<p>Not all investors are sold on the attractions of shale. Follow This, a group of them concerned about climate change, expressed disappointment that Chevron would spend $33bn on Anadarko, rather than on renewable energy. At its annual meeting next month, Chevron‚Äôs shareholders will vote on a resolution that would compel the company to disclose how it can reduce its carbon footprint in line with the Paris climate agreement. Chevron insists that it is ‚Äúpositioned to win in any environment‚Äù. An environmentally friendlier one may be an exception. </p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Tiger Woods wins his fifth Masters in a comeback for the ages]]></title>
      <url>https://stanxia.github.io/2019/04/16/Tiger%20Woods%20wins%20his%20fifth%20Masters%20in%20a%20comeback%20for%20the%20ages/</url>
      <content type="html"><![CDATA[<h5 id="But-if-history-is-any-guide-he-is-running-out-of-time-to-beat-Jack-Nicklaus‚Äôs-18-major-victories"><a href="#But-if-history-is-any-guide-he-is-running-out-of-time-to-beat-Jack-Nicklaus‚Äôs-18-major-victories" class="headerlink" title="But if history is any guide, he is running out of time to beat Jack Nicklaus‚Äôs 18 major victories"></a>But if history is any guide, he is running out of time to beat Jack Nicklaus‚Äôs 18 major victories</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_blp501.jpg" alt="image"></p>
<blockquote>
<p>Game theory | Apr 15th 2019</p>
</blockquote>
<p>JUST A YEAR and a half ago, the most common question about Tiger Woods‚Äôs future was not whether he would win another major tournament, but whether he would ever play competitively again. After an unprecedented run of glory in which he won 14 majors in just over 12 years, Mr Woods saw his career derailed by an infidelity scandal, injuries and over-use of prescription drugs. Already on the wrong side of 40 years old, Mr Woods‚Äôs legacy appeared to be fixed: a star that burned brighter than any other but was extinguished far too soon, a victim of the hubris caused by too much success at too young an age.</p>
<p>That was then. On April 14th Tiger unleashed his roar once again‚Äîliterally. After winning the Masters Tournament for the fifth time and a major championship for the 15th, he screamed at the top of his lungs while lofting his arms and putter high into the air, before embracing his caddy, family members and vanquished rivals as he seemed to fight back tears of joy. Much like the broader narrative of his career, it was also the first time he had come from behind to secure a major: in all of his previous victories, he had led at the start of the final round. Mr Woods‚Äôs title is not only a personal triumph, but also a welcome boon to golf as a game. Only the presence of its biggest star atop the leaderboards enables it to compete with the most popular team sports for viewership and cultural relevance.</p>
<p>No one would confuse the play of the grizzled, 43-year old Mr Woods with that of the 21-year-old phenom who won the Masters by a record 12 strokes in 1997. Whereas the young Mr Woods was so dominant that he barely seemed to be playing the same sport as his competitors were, this version seemed all too human. He frequently sprayed drives into the trees and misfired on straightforward putts, turning birdies into pars and pars into bogeys. He trailed by four strokes after the first round, by one at the cut and by two on Sunday morning.</p>
<p>But just as Mr Woods has learned how to deal with adversity in his personal life, so too has he mastered how to limit the cost of mistakes on the golf course. Time and again, Mr Woods found a window through trees or a path around hazards, recovering from an errant tee shot with a pinpoint approach. (His driving accuracy of 62.5% was among the worst in the tournament, while his 81% rate of reaching greens in regulation was the best.) On the par-four ninth hole on the final day, his second shot landed at the far end of a long, downward-sloping green‚Äîa predicament in which the younger Mr Woods rarely found himself, where escaping with a par would feel like an eagle. Now a wily veteran, Mr Woods uncorked a lag putt for the ages. He aimed the ball on a line far above the straight path to the hole, and barely tapped it despite the vast distance. It almost stopped short as it approached the ridge‚Äîand then veered hard towards the hole, gaining speed as it plunged downhill, before coming to rest just inches from its target. The stroke he saved after tapping in for par wound up constituting his entire margin of victory, encapsulating the story of the tournament: unlike his rivals, Mr Woods refused to beat himself.</p>
<p>Even after that par save, Mr Woods trailed Francesco Molinari by a stroke‚Äîa deficit that doubled after he bogeyed the tenth hole. EAGLE, The Economist‚Äôs statistical win-probability model for golf tournaments, gave Mr Molinari a 65% chance of victory heading into the 12th hole, while Mr Woods languished at 16% (see chart). Just last July, Mr Molinari got the better of Mr Woods, when they were in the same playing group on the final day of the Open Championship in Scotland and Mr Molinari went on to win.</p>
<p>This time, however, Mr Molinari succumbed to the demons that have undone so many a contender on the back nine on Sunday at Augusta National Golf Club. He left his tee shot short on the par-three 12th, seeing it disappear into the waters of Rae‚Äôs Creek, and then failed to make his putt for bogey. Mr Woods, in contrast, played it safe and made par. Three holes later, Mr Molinari saw his hopes of trying on his first Masters victor‚Äôs green jacket dashed for good. A poor drive on the par-five 15th forced Mr Molinari into an awkward approach shot, which bounced off a tree and wound up in the water as well.</p>
<p>Mr Woods, meanwhile, displayed the steely resolve that made him an icon a decade ago. On the same hole that finished Mr Molinari, Mr Woods secured a birdie with a dead-centre drive, a meticulous approach to the green, and a clean two-putt. And on the next hole, the par-three 16th, he delighted the fans with a taste of his magic of yesteryear. His high-arcing tee shot first hit the green beyond one-putt range. But it then rolled sideways towards the hole like a heat-seeking missile, until he was assured of a tap-in birdie and a two-stroke lead.</p>
<p>Even then, Mr Woods wound up needing stumbles from his rivals to compensate for his own. Both Dustin Johnson, who by most statistical measures is currently the best player in the world, and Brooks Koepka, who had won three of the past six majors he had entered, reached the 18th green at 12 under par with achievable, if challenging, birdie putts. Both missed‚Äîbarely, in Mr Johnson‚Äôs case. That wound up making the difference in the tournament, as Mr Woods muffed both his approach shot on the 18th and his putt for par. No one dreams about winning the Masters with a bogey, but it was a fitting end to a gritty triumph.</p>
<p>Must it be St Nicklaus?</p>
<p>Mr Woods‚Äôs victory gives him a long-overdue 15th major title, leaving him three behind Jack Nicklaus‚Äôs all-time record of 18. Mr Nicklaus won his last at the age of 46, suggesting that Mr Woods has at least three more years to bridge the gap. Now that Mr Woods has rediscovered his form, might golf‚Äôs most treasured record now be within reach?</p>
<p>The afterglow of Mr Woods‚Äôs win is probably not the best time to preach faith in statistical golf models. EAGLE gave him just a 2.2% chance of winning the Masters, less than half the probability implied by pricing in betting markets. Although such odds might appear uncommonly long, they were no knock on Mr Woods‚Äôs game: most major victors start the tournament with less than a one-in-20 chance. In EAGLE‚Äôs estimation, Mr Woods was playing sufficiently well before the Masters began that he was already one of the top ten players in the world. Instead, the daunting odds were merely a reflection of how much good fortune is required, in addition to elite skill, to beat a field containing all of the world‚Äôs best players over just 72 holes. Even Mr Johnson, whom the model anointed as the favourite and finished tied for second, had less than a 10% shot to win.</p>
<p>The brutal arithmetic of large golf tournaments suggests that if Mr Woods is now a top-five player, he would be expected to win another major roughly once every 3.5 years. As a ‚Äúmere‚Äù top-ten competitor, that frequency would fall to around one every six years. From this perspective, Mr Nicklaus should only feel threatened if Mr Woods manages to regain his former status as the unquestioned world number one despite his advanced age. That would mean following up this Masters victory with a steady drumbeat of scores in the 60s and finishes in the top 5 and 10 of PGA Tour events. (Mr Woods‚Äôs Masters performance alone has improved EAGLE‚Äôs estimate of his expected score on a typical course by over a tenth of a stroke per round).</p>
<p>Otherwise, the smart money will probably remain on Mr Woods‚Äôs major-championship tally remaining at 15. However, statistical models rely on extrapolating historical patterns into the future. And since no one has ever played golf as well as Mr Woods did at his best, there is no precedent on which to train a model for the second act of such a career. As the crowds roared following his every birdie and his rivals‚Äô every misstep, distracting players two or three holes away, a victory that was still statistically improbable already felt inevitable in the heart of every fan who had seen Mr Woods in his heyday. Much to the delight of the lords of golf, even the most casual of observers will make sure to tune in the next time Mr Woods strides to the tee box with a major on the line.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[A new era at Goldman Sachs starts in the shadow of a scandal]]></title>
      <url>https://stanxia.github.io/2019/04/16/A%20new%20era%20at%20Goldman%20Sachs%20starts%20in%20the%20shadow%20of%20a%20scandal/</url>
      <content type="html"><![CDATA[<h5 id="Can-the-bank-reinvent-itself"><a href="#Can-the-bank-reinvent-itself" class="headerlink" title="Can the bank reinvent itself?"></a>Can the bank reinvent itself?</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_FNP501.jpg" alt="image"></p>
<blockquote>
<p>Apr 15th 2019</p>
</blockquote>
<p>NO ONE IS more aware of the value of a brand than Goldman Sachs. The investment bank, founded in 1869, has advised the biggest and best American companies on the value of theirs for the past 150 years. It helped F.W. Woolworth, a pioneering department store, with its initial public offering in 1912. It took Ford and Disney public in the 1950s, helped Amazon buy Whole Foods in 2017 and will take Uber public later this year. Yet these are troubling times for its own brand, tarnished by association with a fraud-ridden Malaysian state-run fund, 1MDB, and hurt by the bank‚Äôs failure to adapt after the global financial crisis.</p>
<p>These issues were echoed in the firm‚Äôs first-quarter results, released on April 15th. Revenues came in below expectations‚Äî13% lower than for the first quarter of 2018‚Äîlargely as the result of lower trading revenues. The share price fell more than 3% and the earnings call was peppered with analysts asking questions about 1MDB.</p>
<p>The first task for David Solomon, who took over as chief executive last October, is to clean up Goldman‚Äôs reputation. In 2012 and 2013 it helped 1MDB raise $6.5bn across three bond offerings, earning $600m in fees‚Äîway above the norm for such work. American and Malaysian authorities have alleged that much of the money raised was stolen in a scheme masterminded by Jho Low, a Malaysian financier. He has denied wrongdoing (and vanished).</p>
<p>Last November America‚Äôs Department of Justice (DoJ) announced that a former senior partner at Goldman, Tim Leissner, had pleaded guilty to conspiracy to launder money and to violate foreign bribery laws. And they indicted Mr Low and another former Goldman banker, Roger Ng, who has also denied wrongdoing. Goldman claims that Mr Ng and Mr Leissner, who transferred embezzled funds into his personal bank account, kept the bank in the dark about their actions.</p>
<p>But criminal charges have been filed against the firm in Malaysia. Though Goldman is contesting the case, it is spooking shareholders, who worry about both onerous fines and what it implies about oversight at the bank. Since November its share price has under-performed an index of other bank stocks by 10.3 percentage points, suggesting that the scandal may have wiped as much as $9.1bn off its value.</p>
<p>It is against these headwinds that Mr Solomon must try to convince investors that Goldman can reinvent itself. Its peers have already digested the fact that Wall Street‚Äôs traditional model, in which banks advise on huge corporate deals and make bold trades on their own behalf, has become less profitable. According to Michael Spellacy of Accenture, a consultancy, 90% of the economic profit made in the capital-markets industry is now earned on the buy side‚Äîthat is, by those who manage assets or investments‚Äîand just 10% from sell-side investment-banking activities. A decade ago, he says, that split was closer to 50-50.</p>
<p>Goldman‚Äôs slowness in reacting to these structural changes has allowed its competitors to catch up. In 2010 its return on equity (ROE) was 11%, easily beating the 8% average for ‚Äúbulge-bracket‚Äù American investment banks, a group including JP Morgan and Morgan Stanley. But last year that group averaged an ROE of 11.2%, placing Goldman, at 12%, near the middle of the pack. And investors are becoming concerned about the way it earns its returns. Volatile profits, like those from trading businesses, mergers and acquisitions, are considered less valuable than steady fee-based income, for example from wealth management.</p>
<p>In 2016 Mr Solomon‚Äôs predecessor, Lloyd Blankfein, took the first steps towards a new strategy by launching a consumer bank, Marcus. In 2017 Goldman announced a target of increasing yearly revenues by $5bn by 2020. But the focus on expanding consumer lending, which offers a relatively low return on investment, did not impress shareholders.</p>
<p>They have had a rough ride. Holding shares in the firm since 2010 would have earned just 13% (without adjusting for inflation), compared with an average of 71% for its bulge-bracket peers and 152% for the S&amp;P 500. Goldman continues to trade at just 0.9 times its tangible book value, a measure of the money that might be returned to shareholders if it were liquidated. The average ratio of price to tangible book value for a bulge-bracket bank is 1.15.</p>
<p>As far as 1MDB is concerned, the big worry for shareholders is the size and scope of the penalties. A large fine is all but inevitable. It could be based on the $600m Goldman earned from the bond issuance‚Äîor the $2.7bn American authorities say was stolen from the proceeds. That will be multiplied by anything up to four, depending on the degree to which the firm is found culpable. That Goldman is co-operating with the DoJ will bring the multiplier down; if the DoJ decides the firm‚Äôs oversight of compliance procedures was inadequate, it will be towards the higher end. Steven Chubak of Wolfe Research, an equity-research firm, thinks the total will be somewhere between $1bn and $4bn.</p>
<p>When it comes to the required shift in strategy, however, Goldman‚Äôs efforts may soon start to bear fruit. Its expansion into consumer businesses is continuing apace. In 2018 it acquired Clarity Money, a personal-finance app. Last month Tim Cook, Apple‚Äôs chief executive, announced that it will launch a credit card with Goldman this summer. When Marcus launched it was as a consumer lender; since then it has added deposit-taking. Though it offers market-leading rates, deposits are still a cheap source of funding. In 2012 just 8% of Goldman‚Äôs funding came from deposits. Last year that share had risen to 19%. If it can keep replacing wholesale funding with deposits at the pace of the past five years, says Mr Chubak, it will have reduced funding costs by $500m by 2022.</p>
<p>The consumer space is not the only place Goldman is rolling out new technology. More than a quarter of Goldman‚Äôs employees are now engineers, says Heather Kennedy Miner, the bank‚Äôs head of investor relations. The firm has deployed a new platform, called Marquee, for institutional investors and will expand into corporate cash management in 2020, which will further increase low-cost deposits. </p>
<p>The firm also seems to be planning an overdue restructuring of its fixed-income, currency and commodities (FICC) business. Revenues earned from FICC have fallen from $13.6bn in 2010, accounting for more than a third of Goldman‚Äôs revenues, to $5.9bn now, or just a sixth. Last October Stephen Scherr, Goldman‚Äôs newly appointed chief financial officer, announced a review of all its business lines, which will be published early next year. In February the Wall Street Journal reported that the commodities business would be scaled back. (Mr Scherr emphasises that Goldman has no plans to abandon commodities entirely, as some of its competitors, including JP Morgan and Morgan Stanley, have.) In March Mr Solomon announced plans to cut the number of staff in sales and trading by 5% this year.</p>
<p>Its new strategy will mean Goldman is competing on less familiar territory. Consumer deposits and corporate cash management are competitive markets that JP Morgan and Bank of America have dominated for decades. But they are also huge markets. Even a small slice could have a big impact on Goldman‚Äôs profits, says Mr Scherr. Compared with established banks, Goldman is able to develop and deploy new technology easily; but unlike startup digital competitors, its innovations are backed by a $925bn balance-sheet. America‚Äôs financial-services industry has been slow to adapt to technological change. An old bank with a new direction might be well-placed to disrupt it.  </p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[A terrible blaze devastates Notre Dame cathedral]]></title>
      <url>https://stanxia.github.io/2019/04/16/A%20terrible%20blaze%20devastates%20Notre%20Dame%20cathedral/</url>
      <content type="html"><![CDATA[<h5 id="Stunned-Parisians-watch-centuries-of-history-dissolve-in-flames"><a href="#Stunned-Parisians-watch-centuries-of-history-dissolve-in-flames" class="headerlink" title="Stunned Parisians watch centuries of history dissolve in flames"></a>Stunned Parisians watch centuries of history dissolve in flames</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_blp903.jpg" alt="image"></p>
<blockquote>
<p>Apr 15th 2019</p>
</blockquote>
<p>THEY GATHERED on the bridges over the Seine to watch in disbelief. Some Parisians were in tears; most watched in eerie silence. The devastating fire that broke out in the wood-timbered roof of the gothic cathedral of Notre Dame in the early evening of April 15th rapidly spread before their eyes, consuming the central spire and defeating the efforts of fire-fighters to bring the flames under control. President Emmanuel Macron, spoke for many across France when he tweeted that he was witnessing ‚Äúpart of us burn.‚Äù  </p>
<p>By midnight in Paris the worst seemed to be over. The main stone structure appeared to have been saved, and the prompt action of hundreds of fire-fighters had rescued many works of art and relics from the burning building. But as well as the medieval oak-beamed roof and the later-built spire, the damage to the interior has been immense.</p>
<p>The 850-year-old edifice had survived war, revolution and Nazi occupation, an emblem of resistance in the face of a constantly disrupted history. It was the site of Napoleon‚Äôs coronation in 1804 and the inspiration for literary works, most famously Victor Hugo‚Äôs ‚ÄúThe Hunchback of Notre-Dame‚Äù, and one of the city‚Äôs most iconic landmarks, visited by 13m tourists each year. Notre Dame was at once a living place of worship for the French Catholic church and the property of the French secular state: a symbol in itself of the country‚Äôs history and its present, in all its glorious contradictions.</p>
<p>The heartbreak felt by many as they watched nine centuries of history dissolve in flames was profound. Bertrand Delano√´, the former mayor of Paris, called the cathedral a ‚Äújewel of the heritage of humanity‚Äù. Mr Macron, who had been preparing to give a televised address to the nation at the end of his ‚Äúgreat national debate‚Äù, cancelled the speech and went straight to the site of the disaster.</p>
<p>It will take time and a full investigation before the exact cause of the fire is established. Early reports from the Paris fire service suggested that it was not a work of arson but an accident that broke out in the central roof, where building works were underway to renovate the 19th-century spire. But already questions are being asked about disaster-planning for a monument of this scale and national importance, situated amid narrow streets on an inaccessible island in the centre of the city.</p>
<p>The search for somebody to blame will absorb France for weeks and months to come. The public prosecutor has opened an inquiry. When shock and disbelief turns to anger, many will want to know exactly what precautions were taken by those working on the renovation, and why it was so difficult for fire-fighters to stop the blaze spreading. Five hundred were deployed, but it took them ages to get there. Some will look to Anne Hidalgo, the mayor of Paris, who tweeted that she had ‚Äúno words for the pain‚Äù she felt.</p>
<p>Others still will look to Mr Macron. The unpopular president already had his hands full dealing with the gilets jaunes (yellow jackets) protests, which have dragged on since last November. This evening was supposed to mark the moment that he reconnected with the French people, and put his reputation for haughty rule behind him. Now he has a different challenge. Paris, and all of France, is hurting. The tragic devastation of Notre Dame will touch the country for a long time‚Äîand put the head of state‚Äôs capacity to touch the French with the right words of consolation to a severe test. He made a good start last night, visiting the scene and pledging that ‚Äúwe will rebuild‚Äù the cathedral. It is a task that will take many, many years.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Right-wing populist parties are polling well in Britain]]></title>
      <url>https://stanxia.github.io/2019/04/16/Right-wing%20populist%20parties%20are%20polling%20well%20in%20Britain/</url>
      <content type="html"><![CDATA[<h5 id="Recent-opinion-surveys-show-the-new-Brexit-Party-is-gathering-support"><a href="#Recent-opinion-surveys-show-the-new-Brexit-Party-is-gathering-support" class="headerlink" title="Recent opinion surveys show the new Brexit Party is gathering support"></a>Recent opinion surveys show the new Brexit Party is gathering support</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_WOC717_0.png" alt="image"></p>
<blockquote>
<p>Apr 15th 2019</p>
</blockquote>
<p>BRITAIN‚ÄôS NEW Brexit party has gathered support with remarkable speed. Formed in January 2019, it is already registering double-digit support in opinion polls and has nearly caught up with the UK Independence Party (UKIP), from which it split.</p>
<p>The new party is headed by Nigel Farage, the former leader of UKIP, who successfully pushed the Conservative party to call a referendum on Britain‚Äôs membership of the European Union in 2016‚Äîand helped the Leave campaign to victory. It was a stunning achievement for what had been regarded as a fringe party, and Mr Farage announced his retirement from politics. Now he is back.</p>
<p>Without Mr Farage, UKIP has drifted ever farther to the xenophobic far right under successive leaders. The Brexit Party, for its part, says it aims to draw support from across the political spectrum, from both Conservatives and Labour Brexiteers, to ensure that Britain leaves the EU.</p>
<p>The referendum marked UKIP‚Äôs high point. In the general election held in 2017 it received just 1.8% of the votes, down from 12.6% in 2015. Even as it became clear that Brexit‚Äîat least as hardline Brexiteers had imagined it‚Äîwas running into trouble, UKIP still polled only about 4% on average in 2018.</p>
<p>But populist parties have regained momentum since the beginning of this year. The government lost one vote after another on its deal with the EU, and Brexit has been repeatedly delayed. The original deadline of March 29th has been pushed back to October 31st. Unless an agreement is reached soon, Britain will have to hold elections to the European Parliament next month, which will be another humiliation for Theresa May, the prime minister.</p>
<p>Populists and hard Brexiteers accuse members of Parliament of betraying Brexit. The latest survey gives populist parties a combined vote of 21%. The Brexit Party, which Mr Farage recently described as ‚Äúa virtual‚Äù party, consisting of little more than a website, is just behind UKIP on 10%. Both are ahead of the pro-Remain Liberal Democrats on 8% and not far behind the Conservatives on 14%.</p>
<p>The contrast between the Brexit party and its mirror-image, Change UK, a new party made up of Remainers drawn from Labour and the Conservatives, is striking. Change UK barely figures in the polls despite having lots of favourable press coverage and several prominent MPs. It suffers from a serious branding problem: it faffed around with its name, does not have a leader and failed to present itself as a full-throated anti-Brexit Party. It could learn a lesson or two from the astute Mr Farage.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Sudan‚Äôs protesters stand firm for civilian rule]]></title>
      <url>https://stanxia.github.io/2019/04/16/Sudan%E2%80%99s%20protesters%20stand%20firm%20for%20civilian%20rule/</url>
      <content type="html"><![CDATA[<h5 id="The-generals-have-blinked-and-replaced-one-of-their-own"><a href="#The-generals-have-blinked-and-replaced-one-of-their-own" class="headerlink" title="The generals have blinked and replaced one of their own"></a>The generals have blinked and replaced one of their own</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_MAP502.jpg" alt="image"></p>
<blockquote>
<p>Apr 15th 2019</p>
</blockquote>
<p>AWAD IBN AUF was leader of Sudan for just over a day. In his brief spell as head of state the former vice-president and defence chief declared a three-month state of emergency, suspended the constitution, arrested a few senior officials and announced a curfew. ‚ÄúThe people asked us to take over‚Ä¶and we did,‚Äù he said in a stony-faced televised address on April 11th, shortly after placing his boss, Omar al-Bashir, under house arrest. It looked as if four months of nationwide protests against Mr Bashir and his 30-year-old autocracy had culminated in a coup.</p>
<p>Sudan‚Äôs demonstrators, who have been camped outside the headquarters of the armed forces in central Khartoum since April 6th, were having none of it. Though they had called on the army to side with them in order to topple Mr Bashir, who has ruled since 1989, his bloodstained deputy was far from the replacement they had in mind. Mr Auf has had sanctions placed on him by America for his role in war crimes (his former boss has been indicted by the International Criminal Court for genocide in Sudan‚Äôs Darfur region). Faced with a storm of popular outrage, the short-lived autocrat stepped down on April 12th. He was replaced by another general, Abdel-Fattah Burhan, then head of the army. Mr Burhan is said to be more popular with rank-and-file soldiers, many of whom are sympathetic to the demonstrators. </p>
<p>Mr Burhan has so far made a better fist of the job. His speech on April 13th was less tone-deaf than that of his predecessor. He commended the revolution, particularly noting the prominent role played by women in the protests that began in December in response to rising food prices. He paid tribute to the civilians who have been killed by security forces in the past four months. More concretely, he promised to hand over power to civilians after a transition period of no more than two years. </p>
<p>On April 13th the opposition nominated delegates to begin negotiating with a military council headed by Mr Burhan. In the first meeting the council promised to repeal all repressive laws and to oversee a predominantly civilian administration, according to the Sudanese Professionals‚Äô Association (SPA), which organised many of the protests. Alongside this, the military council moved to weaken the power of the former tyrant. It replaced Salah Abdallah Gosh, the intelligence chief widely regarded as the second most powerful man in the country after Mr Bashir. On April 14th the military council said it had arrested members of Mr Bashir‚Äôs National Congress Party (NCP) and would begin seizing the party‚Äôs assets. It also promised to restructure Mr Gosh‚Äôs notorious intelligence agency and to allow the opposition to choose a new prime minister.</p>
<p>But the protesters remain dissatisfied. ‚ÄúWe can‚Äôt live on promises,‚Äù says Hamid Murtada, an activist. The SPA has called for the sit-in outside the defence ministry to continue until the ‚Äúdeep state‚Äù is fully dismantled. Many people are particularly worried by the appointment of Mohamed Hamdan Dagalo (known as Hemeti) as the military council‚Äôs deputy leader. A paramilitary unit he was in charge of, the Rapid Support Forces, with links to the notorious Janjaweed militia, was involved in the mass rape and butchery of civilians while battling rebels in Darfur. He and others in the junta‚Äôs top ranks are close to Saudi Arabia and the United Arab Emirates, both of which welcomed developments over the weekend. Saudi Arabia has promised aid to help ease the country‚Äôs economic woes.</p>
<p>Whether the junta will actually relinquish power remains to be seen. ‚ÄúIt‚Äôs very possible the military said all that just to end the sit-in,‚Äù says Mohammed Osman, an analyst in Khartoum. Indeed, on the morning of April 15th it tried again to disband the protest, this time asking demonstrators to help clear roadblocks. After a brief stand-off the soldiers retreated. ‚ÄúClean up the regime and we‚Äôll clean up the square,‚Äù shouted protesters as they departed. The generals had better put their aprons on.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Why British wage growth is picking up at last]]></title>
      <url>https://stanxia.github.io/2019/04/16/Why%20British%20wage%20growth%20is%20picking%20up%20at%20last/</url>
      <content type="html"><![CDATA[<h5 id="A-tight-labour-market-better-jobs-and-higher-productivity-are-rewarding-workers-at-last"><a href="#A-tight-labour-market-better-jobs-and-higher-productivity-are-rewarding-workers-at-last" class="headerlink" title="A tight labour market, better jobs and higher productivity are rewarding workers at last"></a>A tight labour market, better jobs and higher productivity are rewarding workers at last</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_BRP501.jpg" alt="image"></p>
<blockquote>
<p>Apr 16th 2019</p>
</blockquote>
<p>The obvious cause of strengthening pay is the tight labour market. When unemployment hit its post-crisis high of 8.5% in 2011, employers knew that they could get away with offering meagre or no pay rises. Workers‚Äô bargaining power has since grown, as joblessness has fallen. Unemployment is just 3.9%, the lowest in four decades. Britain has about three vacancies for each 100 employee jobs, the highest ratio since the data began in 2001, meaning bosses have to try harder to fill posts. Nominal pay in the hospitality sector, which has a particularly high number of job postings, is growing at 5% a year.</p>
<p>A hot jobs market is not the only cause of rising average pay. Another relates to the mix of jobs in the economy. Following the financial crisis, posts in low-productivity, low-paying sectors such as agriculture proliferated. Having more poorly paid positions dragged down the average. Yet lately Britain has created relatively more high-paying jobs‚Äîstrawberry-pickers have made way for stock-pickers. In the year to September 2018 the changing composition of the workforce boosted average nominal wage growth by 0.5 percentage points.</p>
<p>Stronger pay may also owe something to rising productivity. How much workers produce ultimately determines how much they earn. After stagnating in 2007-14, more recently output per hour has grown by about 1% a year in real terms. Silvana Tenreyro of the Bank of England has floated the idea that some of these gains might not have yet shown up in the statistics.</p>
<p>The question is whether wage growth will accelerate further. Workers will hope that it does: at its current rate real pay will not return to its pre-crisis peak until 2022. Yet few economists believe Britain will soon resume the healthy productivity growth of the post-war period, which was consistent with real-terms pay rises of some 3% a year. Most economic forecasts have productivity growing at an annual rate of about 1% this year and next.</p>
<p>Already there are signs that firms are struggling to afford the modest pay settlements that their workers are demanding. The cost of staffing per unit of output, a measure of domestically generated inflation, grew by 1.7% in 2017 but by 2.7% last year. To absorb these extra costs some firms are accepting lower profits. Other firms are passing them on to customers, stoking consumer-price inflation, which hovers around the Bank of England‚Äôs 2% target.</p>
<p>For now there is little need for the bank to raise interest rates, which would bring down inflation. Uncertainty over Brexit, which is likely to continue until October and perhaps beyond, argues in favour of holding fire. Yet the difficult truth is that Britain‚Äôs current rate of wage growth, modest by historical standards, is about as high as it can go without pushing inflation above target. It will be some time before Britons‚Äô pay squeeze is truly over. </p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Big carmakers are placing vast bets on battery power]]></title>
      <url>https://stanxia.github.io/2019/04/16/Big%20carmakers%20are%20placing%20vast%20bets%20on%20battery%20power/</url>
      <content type="html"><![CDATA[<h5 id="From-GM-and-Geely-to-Mitsubishi-and-Mercedes-giants-of-the-industry-are-revving-up-their-electric-plans"><a href="#From-GM-and-Geely-to-Mitsubishi-and-Mercedes-giants-of-the-industry-are-revving-up-their-electric-plans" class="headerlink" title="From GM and Geely to Mitsubishi and Mercedes, giants of the industry are revving up their electric plans"></a>From GM and Geely to Mitsubishi and Mercedes, giants of the industry are revving up their electric plans</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_WBP001.jpg" alt="image"></p>
<blockquote>
<p>Apr 16th 2019</p>
</blockquote>
<p>IN 1900 ONE in three cars on American roads ran on volts. Then oil began gushing out of Texas. Cheaper than batteries, and easier to top up, petrol fuelled the rise of mass-produced automobiles. Cost and worries about limited range have kept electric vehices (EVs) in a niche ever since. Tesla, which has made battery power sexy again in the past decade, produced just 250,000 units last year, a fraction of what Volkswagen or Toyota churn out each year. For every one of the 2m or so pure EVs and plug-in hybrids, which combine batteries and internal-combustion engines (ICEs), sold in 2018, the world‚Äôs carmakers shifted 50 petrol or diesel cars.</p>
<p>EV sales are, however, accelerating as quickly as electric motors. Some industry-watchers reckon that they will account for nearly 15% of the global total by 2025. One in five new cars in China will run on batteries then, according to Bloomberg New Energy Finance, a consultancy. The chief reason such optimistic forecasts no longer look outlandish is the entry into the electric race of the car industry‚Äôs juggernauts. A survey by Reuters in January put the industry‚Äôs total planned EV-related spending worldwide (including on batteries) at around $300bn over the next five to ten years. From GM and Geely to Mercedes and Nissan, big carmakers all want to turn out millions of such cars‚Äîand turn a profit doing so. Their strategies range from cautious to aggressive.</p>
<p>Making a profitable, mass-produced EV has proved elusive. A battery powertrain can be three times the price of an ICE. But a combination of better technology and greater scale may soon allow EVs to compete on price with petrol vehicles, and enable motorists to drive long distances without the fear of running out of juice.</p>
<p>They had better, carmakers are hoping. Worries about climate change and air pollution are prompting authorities around the world to consider phasing out new petrol and diesel engines in the coming decade. In the absence of federal regulations under America‚Äôs climate-sceptical president, Donald Trump, some progressive cities and states are tightening local rules. Fiat Chrysler (whose chairman, John Elkann, sits on the board of The Economist‚Äôs parent company) has just agreed to pay Tesla hundreds of millions of euros to count the Californian marque as part of its fleet, and thus avoid steep fines for exceeding average CO2-emissions standards for carmakers due to come into force in the European Union next year. In China, where half the world‚Äôs EVs are already sold, the government sees electrification of transport as a way to combat choking urban smog‚Äîand to lap the West technologically.</p>
<p>Western premium brands appear best positioned to take an early lead. While batteries remain pricey, fancy marques can offset the cost with the higher prices that their vehicles command. Jaguar and Audi have already broken Tesla‚Äôs monopoly at the lucrative top end of the market. Daimler, which owns Mercedes, has committed ‚Ç¨10bn ($11.3bn) to its EQ range and wants 20% of its cars to be fully electric by 2025.</p>
<p>Daimler and BMW, which has been bruised by losses on its poorly selling i3 electric hatchback, are hedging their bets by backing platforms (as the basic architecture of a car is known in the business) that are able to accommodate petrol and diesel engines as well as electric motors. This should help them contain costs, but at the expense of compromises over battery size and layout. Sacrificing range and interior space in this way may dent brands built on luxury and technological prowess, says Patrick Hummel of UBS, a bank.</p>
<p>Many mass-market firms are likewise proceeding cautiously. Their thinner margins leave less room to absorb the cost of batteries. Renault of France and South Korea‚Äôs Hyundai are nevertheless toying with the idea of a dedicated electric-only platform. PSA Group has said it plans to electrify more Peugeots, Citro√´ns and Opels. Fiat Chrysler has made similar noises, though the Tesla tie-up suggests its near-term plans are less ambitious. Toyota‚Äôs early bet on hydrogen fuel cells, which lag behind batteries on the road to widespread adoption, had long been a distraction. The Japanese giant has now acknowledged that buyers want battery-power. It is planning ten models by the early 2020s.</p>
<p>The most daring by a long way is VW. The German group‚Äôs heft‚Äîit produces 10m cars a year‚Äîaffords it economies of scale only Toyota could hope to match. The ‚Ç¨30bn VW plans to spend on developing EVs over the next five years, plus ‚Ç¨50bn to fit them with batteries, leaves all other carmakers in the dust. In March Herbert Diess, its chief executive, promised 70 new electric models by 2028, rather than 50 as previously pledged, and 22m EVS delivered over the next ten years. The company is contemplating a huge investment in a ‚Äúgigafactory‚Äù to supply its own batteries rather than depending on outside suppliers.</p>
<p>VW is already developing a dedicated platform and converting entire factories to EV production. The first, at Zwickau in Germany, will eventually turn out 330,000 cars a year for the VW brand as well as Audi and SEAT. Its medium-sized ID hatchback, to be shipped next year, will cost around ‚Ç¨30,000, similar to an equivalent diesel-powered Golf, and travel 400-600km (250-370 miles) on a single charge. On April 14th in Shanghai Mr Diess unveiled a sport-utility vehicle to compete with Tesla‚Äôs snazzy Model X in China from 2021. Once the range of EVs reaches full production in 2022, VW believes, such models will start breaking even. By 2025, when it hopes one-quarter of its output will be electric, they should be as profitable as petrol cars.</p>
<p>As Mike Manley, boss of Fiat Chrysler, observers, it is no longer a question of whether carmakers can deliver a fleet of EVs but whether people will pay for them. If governments withdraw generous subsidies which EV-owners have enjoyed, charging infrastructure fails to materialise or electric cars‚Äô pitiful resale value does not increase, motorists may be reluctant to abandon their tried and tested petrol wheels. Poor sales, combined with the large upfront investments, would hit carmakers‚Äô margins, which for mass-market brands are already about as exciting as a Soviet-era Trabant in mud brown. The financial consequences could be ‚Äúugly‚Äù, warns Bernstein, an equity-research firm.</p>
<p>Electric fieldAt the same time, the big carmakers can expect more competition from rivals unburdened by complex ICE supply chains and large workforces. VW has 40,000 suppliers worldwide and directly employs 660,000 people. Lower capital intensity, and the relative simplicity of EVs, which use many fewer parts than petrol vehicles and are easier to assemble, is drawing in upstarts. They include Dyson, a British maker of vacuum cleaners, and a raft of Chinese Tesla-wannabes, such as NIO and Byton. Bigger Chinese carmakers, such as Geely and JAC, have also developed expertise in EVs. With domestic sales stalling, they are beginning to eye export markets.</p>
<p>Other technological bumps are meanwhile beginning to test the industry‚Äôs chassis. Self-driving cars and ride-sharing are forcing car companies to rethink their established business model. If carmakers miss the electric turn now, they will find it harder to find their way in these futuristic areas. The electric race may prove to be a practice lap for wider disruption.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[The fire in Notre Dame cathedral, and more from our daily podcast]]></title>
      <url>https://stanxia.github.io/2019/04/16/The%20fire%20in%20Notre%20Dame%20cathedral,%20and%20more%20from%20our%20daily%20podcast/</url>
      <content type="html"><![CDATA[<h5 id="Also-counting-civilian-casualties-and-Cuba‚Äôs-sporting-export"><a href="#Also-counting-civilian-casualties-and-Cuba‚Äôs-sporting-export" class="headerlink" title="Also, counting civilian casualties and Cuba‚Äôs sporting export"></a>Also, counting civilian casualties and Cuba‚Äôs sporting export</h5><p><img src="https://cdn.static-economist.com/sites/default/files/the_intelligence_54.jpg" alt="image"></p>
<blockquote>
<p>Podcasts | Apr 16th 2019</p>
</blockquote>
<p>EMMANUEL MACRON, the president of France, was already dealing with national protests when a massive fire broke out at the Notre Dame cathedral, an 850-year old Parisian landmark. Can the tragedy, and Mr Macron‚Äôs leadership, bring the country together? America‚Äôs armed forces often don‚Äôt know how many civilians are killed in its air-strike campaigns‚Äîbut that‚Äôs changing, thanks to pressure from the Pentagon‚Äôs loudest critics. And, though the Trump administration has cancelled a deal for Cuban baseball players, that won‚Äôt stop them making their way to the big leagues. Runtime: TK min.</p>
<p>Listen on: Apple Podcasts | Spotify | Google | Stitcher | TuneIn</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Cathedrals are neglected in much of Europe]]></title>
      <url>https://stanxia.github.io/2019/04/16/Cathedrals%20are%20neglected%20in%20much%20of%20Europe/</url>
      <content type="html"><![CDATA[<h5 id="Ancient-churches-are-the-greatest-glory-of-Europe‚Äôs-cities-and-a-headache-for-those-trying-to-look-after-them"><a href="#Ancient-churches-are-the-greatest-glory-of-Europe‚Äôs-cities-and-a-headache-for-those-trying-to-look-after-them" class="headerlink" title="Ancient churches are the greatest glory of Europe‚Äôs cities, and a headache for those trying to look after them"></a>Ancient churches are the greatest glory of Europe‚Äôs cities, and a headache for those trying to look after them</h5><p><img src="https://cdn.static-economist.com/sites/default/files/20190420_BLP507.jpg" alt="image"></p>
<blockquote>
<p>Erasmus | Apr 16th 2019</p>
</blockquote>
<p>THE CATHEDRAL of Notre Dame in Paris, and the vast outpouring of sorrow over its semi-destruction by fire on April 15th, epitomises the power of great houses of prayer to touch and inspire people. More palpably than any other kind of monument, they connect visitors with another world: one in which the finest composers, singers, sculptors, glass-makers, embroiderers and craft-workers of a given era joyfully mixed their energies in a vast, disinterested enterprise. </p>
<p>To some degree, that enterprise continues as long as the building stands. That alone makes great historic churches a source of fascination, even for those with little interest in Christian worship. People want them to be there, even if they don‚Äôt wish to share the cost or join the prayers.  </p>
<p>In almost every country in Europe, that creates an acute problem. The cost of maintaining the delicate stone fabric of a cathedral seems to rise geometrically, far out-stripping the ability of small congregations to sustain them. Governments and other secular bodies are minded to help but they also feel compelled, in most places, to respect the independence of the buildings‚Äô historic stewards, in other words the churches.  </p>
<p>In England, the established church boasts 42 cathedrals (technically defined as the seat of a bishop), of which 39 are listed as historic buildings whose preservation is both mandated by law and entitled to some public help. (About 12,000 of the 16,000 other places of worship controlled by the Church of England are also listed.) </p>
<p>The Church of England likes to call the cathedrals one of its ‚Äúsuccess stories‚Äù with rising numbers of worshippers and visitors, and growing revenue. But as a recent report led by a bishop delicately put it, ‚Äúrecent failures of governance and management within a small number of cathedrals have highlighted vulnerabilities across the sector‚Ä¶‚Äù In plain language, at least two cathedrals have run into severe financial difficulties, which better stewardship might have avoided.</p>
<p>English cathedrals are relatively independent bodies, run by a cleric known as a dean who relies on a group of advisers known as a chapter. They are free to raise money in many ways, from concerts to exhibitions to simply charging an admission fee, as about a quarter of them do. In recent weeks Derby Cathedral raised eyebrows by hosting films that included graphic sex scenes and depictions of paganism.</p>
<p>Churches in Germany have an advantage. The system of religious taxes (under which people of Catholic or Lutheran heritage pay a levy to their respective denominations) has ensured an ample income stream. Germany‚Äôs religious masters have done better at hauling in revenue than at retaining worshippers, the figures would suggest.</p>
<p>But a massive fund-raising effort, drawing in generous private-sector donors and ordinary well-wishers in Germany and Britain, was needed for one of the biggest church reconstruction projects of modern times: the rebuilding of the Frauenkirche in Dresden.</p>
<p>This showpiece of German Baroque was destroyed, along with much of the city, in a British bombing raid in February 1945. The project, completed in 2005, was a complement to the erection in 1962 of a new cathedral in Coventry, replacing the one wrecked by a German air raid on the English Midlands.</p>
<p>Most European states subsidise their historically dominant Christian denominations, directly or indirectly, while also leaving the sects‚Äô religious masters relatively autonomous. In Italy, despite the notional separation of Catholic church and state, the two are deeply intertwined, through tax breaks and state help for maintaining the artistic heritage which is one of Italy‚Äôs greatest tourist draws. Belgium offers generous help to all its main religions, but Catholic cathedrals still charge stiff admission fees as though they were museums.</p>
<p>In church-state relations, France is an outlier. Under the regime of la√Øcit√©, or strict secularism, municipalities took over formal responsibility for Catholic churches; clerics and their congregations are merely users. And clerics, in particular, are thin on the ground. In rural France, it is common for a priest to look after 30 old churches.</p>
<p>That paucity of active users prompts municipal authorities to assign a low priority to conserving church buildings. In 2013 a huge neo-Gothic church in the northern French town of Abbeville was dramatically demolished by municipal leaders, who said the place was a safety hazard and too expensive to repair. Hundreds of other French churches may soon have a similar fate. Nor have France‚Äôs state authorities done very well at protecting houses of prayer from a wave of vandalism, including arson and desecration, that has afflicted them this year.</p>
<p>Indeed, all over western Europe, churches are closing for lack of worshippers. In the Netherlands, a cardinal predicted in 2013 that two-thirds of the Roman Catholic churches in the country would shut by 2025.</p>
<p>But a diametrically opposing trend is at work further east in Europe. Perhaps the most spectacular act of church reconstruction of recent times was the re-erection of Moscow‚Äôs Cathedral of Christ the Saviour, which was dynamited by Stalin in 1931 and thrown back up over five years starting in 1995. It was rebuilt in about a tenth of the time needed for the original construction.</p>
<p>Elsewhere in Russia, under a crash building programme decreed by the Russian Orthodox church, at least three new churches are said to be opening per day. And in other parts of central and eastern Europe, from Serbia to Georgia, vast new Orthodox churches now adorn capital cities which were already endowed with many places of prayer.</p>
<p>Indeed, the Russian church building spree extends far beyond the borders of the motherland. Anyone who takes a short walk along the banks of the Seine from the wreckage of Notre Dame will soon see a boldly modernistic structure, topped with onion domes: this ‚Äúspiritual and cultural‚Äù centre, opened in 2016, was a pet project of President Vladimir Putin‚Äôs. It competes hard with an older Russian-style cathedral in Paris which the Muscovite authorities, to their frustration, do not control. </p>
<p>As the Russian state media were eager to point out, western Europe is gaining some new Christian places of worship even as many others are destroyed, accidentally or otherwise.</p>
<p>See alsoA terrible blaze devastates Notre Dame cathedral (April 15th 2019)</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Fire in the heart of Paris]]></title>
      <url>https://stanxia.github.io/2019/04/16/Politics%20this%20week/</url>
      <content type="html"><![CDATA[<h6 id="Fire-in-the-heart-of-Paris"><a href="#Fire-in-the-heart-of-Paris" class="headerlink" title="Fire in the heart of Paris"></a>Fire in the heart of Paris</h6><h1 id="Politics-this-week"><a href="#Politics-this-week" class="headerlink" title="Politics this week"></a>Politics this week</h1><p><img src="https://cdn.static-economist.com/sites/default/files/images/print-edition/20190413_WWP004_0.jpg" alt="image"></p>
<blockquote>
<p>Apr 11th 2019</p>
</blockquote>
<p>Following months of mass protests in Sudan, it appeared that Omar al-Bashir had been ousted as president by the army. Mr al-Bashir had misruled since taking power in a coup in 1989. His civil war against non-Muslim black Africans ended with the secession of South Sudan. Separately, the International Criminal Court charged him with overseeing genocide in Darfur. See article. </p>
<p>Binyamin Netanyahu won a record fifth term as prime minister of Israel. His Likud party tied with Blue and White, a centrist rival. But the right-wing and religious bloc, of which Likud is a part, won a majority of seats in the Knesset. In the final days of the campaign Mr Netanyahu vowed to begin annexing parts of the West Bank, further dimming the prospect of any peace with the Palestinians based on a two-state solution. See here and here. </p>
<p>Khalifa Haftar, Libya‚Äôs most powerful warlord, attacked Tripoli, which is controlled by the UN-backed government. Dozens of people were killed in the fighting, as militias allied to the government rallied to defend the capital. A UN peace conference, scheduled for this month, was postponed. See article. </p>
<p>Protests continued in Algeria, where crowds called for the resignation of Abdelkader Bensalah, the interim president. Mr Bensalah succeeded Abdelaziz Bouteflika, who resigned amid widespread anger at his regime after 20 years in charge. For the first time police used tear-gas to disperse the demonstrators. Mr Bensalah said the country would hold a presidential election on July 4th.</p>
<p>Theresa May, Britain‚Äôs prime minister, attended a summit in Brussels to discuss another delay to Brexit. The European Union offered Britain six more months, pushing the deadline to October 31st, Halloween. That means Britain faces having to vote in elections to the European Parliament next month, though British MEPs will have to step down if Brexit actually happens. The president of the European Commission, Jean-Claude Juncker, joked that if there was another late-night meeting on the last day of the talks he might have to leave at midnight; his term ends on November 1st. See article. </p>
<p>Julian Assange, a founder of WikiLeaks, was arrested by British police in the Ecuadorean embassy in London. Ecuador had granted Mr Assange refuge in 2012 after he had jumped bail while facing rape allegations. His relationship with his hosts soured after a change of government in Ecuador, where a leftist president was replaced by a more moderate one. Mr Assange has said he fears extradition to the United States, where WikiLeaks is not popular, having published reams of leaked American military secrets.</p>
<p>Turkey‚Äôs ruling party demanded a fresh vote in Istanbul, where it narrowly lost the mayoralty in elections on March 31st.</p>
<p>Italy‚Äôs deputy prime minister, Matteo Salvini, announced the formation of a new nationalist group within the European Parliament, to be called the European Alliance for People and Nations. However, none of the party leaders he hoped would attend from other countries turned up.</p>
<p>The Trump administration cancelled a four-month-old agreement under which Cuban baseball players could join Major League teams in America without defecting from their country. The administration said the agreement would encourage human trafficking and help enrich Cuba‚Äôs communist government. See article. </p>
<p>Jair Bolsonaro, Brazil‚Äôs president, sacked the education minister, Ricardo V√©lez, who shared his socially conservative views. Mr V√©lez had courted controversy by instructing schools to film classes singing the national anthem and repeating Mr Bolsonaro‚Äôs campaign slogan. His replacement, Abraham Weintraub, an economist, has said that crack cocaine was introduced to Brazil deliberately by the left. See here. </p>
<p>Thanathorn Juangroongruangkit, the leader of the Future Forward party, was charged with sedition in relation to a protest against Thailand‚Äôs military junta in 2015. It is one of several repressive steps that has marred the country‚Äôs supposed return to democracy after an election last month. See article. </p>
<p>Kassym Jomart Tokayev, Kazakhstan‚Äôs interim president following the sudden resignation of Nursultan Nazarbayev after three decades in power, called a snap election for June 9th. See article. </p>
<p>South Korea‚Äôs constitutional court ruled that the government must end the country‚Äôs ban on abortion, in place since 1953, before the end of 2020. Doctors can currently be imprisoned if they perform the procedure. However, tens of thousands of abortions are carried out each year.</p>
<p>Voting began in India‚Äôs seven-stage election. The final phase will take place on May 19th and the results for all seven stages will be announced on May 23rd. Polls suggest the ruling Bharatiya Janata Party will remain the biggest party. See article. </p>
<p>A court in Hong Kong found nine people guilty of ‚Äúpublic nuisance‚Äù charges relating to their leading roles in the Umbrella Movement of 2014, which involved weeks of sit-ins and demonstrations in busy commercial districts in support of democratic reform. Among the defendants were three founders of a group involved in the unrest. </p>
<p>Kirstjen Nielsen resigned as the secretary of America‚Äôs Department of Homeland Security. Donald Trump is trying to replace the department‚Äôs top officials with people who will try harder to keep Mexicans out of the United States. Mr Trump has threatened to close the border entirely, despite advice that this would cause economic chaos. See article. </p>
<p>Randolph Alles, the head of America‚Äôs Secret Service, is quitting. He had reportedly been asked to go before the recent security breach at Mr Trump‚Äôs private club, involving a Chinese woman with several thumb drives.</p>
<p>Amnesty International‚Äôs annual report on the death penalty recorded a drop of nearly a third in known executions worldwide last year. There were 690 in 2018, down from 1,061 in 2015. The number of death sentences passed by courts also declined slightly, though in the Middle East and north Africa death sentences nearly doubled to 1,170. The region is responsible for two-thirds of the world‚Äôs known executions. (China is also thought to execute thousands of people every year, but keeps its figures secret.) Of the countries that release figures, Iran is by far the most avid executioner, putting 409 people to death each year on average for the past decade.</p>
]]></content>
      
        <categories>
            
            <category> economist </category>
            
        </categories>
        
        
        <tags>
            
            <tag> economist </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[IDEA ‰ΩøÁî®ÊäÄÂ∑ß]]></title>
      <url>https://stanxia.github.io/2017/12/28/IDEA%20%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2></div>
<p>Âú®Áîü‰∫ß‰∏≠‰∏ªÂäõÊòØ‰ΩøÁî® <code>IDEA</code> ÔºåÂ∑•Ê¨≤ÂñÑÂÖ∂‰∫ãÔºåÂøÖÂÖàÂà©ÂÖ∂Âô®„ÄÇÂõ†ËÄåÊÄªÁªì‰∏Ä‰∏ãÂú®‰ΩøÁî®ËøáÁ®ã‰∏≠ÁöÑÁªèÈ™åÔºå‰∏∫Êñπ‰æøÂàùÂ≠¶ËÄÖÊõ¥Âø´ÁöÑÊéåÊè°Ëøô‰∏™Á•ûÂô®„ÄÇ<br> <div class="note info"><h2 id="ÈÖçÁΩÆÈòøÈáå‰∫ë"><a href="#ÈÖçÁΩÆÈòøÈáå‰∫ë" class="headerlink" title="ÈÖçÁΩÆÈòøÈáå‰∫ë"></a>ÈÖçÁΩÆÈòøÈáå‰∫ë</h2></div><br>ÈÖçÁΩÆ <code>ÈòøÈáå‰∫ë</code> ‰Ωú‰∏∫ <code>maven</code> ÁöÑ‰ªìÂ∫ìÊù•Ê∫êÔºåÂéüÂõ†Â§ßÂÆ∂ÈÉΩÊáÇÂæóÔºåÂõΩÂ§ñÁöÑ‰ªìÂ∫ìÈÄüÂ∫¶ÊúâÊó∂ÂÄôÂæàÂëµÂëµÔºåÂõΩÂÜÖÁöÑËøôÊñπÈù¢ËøòÊòØÈù†Ë∞±ÁÇπ„ÄÇ</p>
<p>Á¨¨‰∏ÄÊ≠•ÔºöÊâìÂºÄ IDEA Â∑¶‰∏äËßíÁöÑÂÅèÂ•ΩËÆæÁΩÆ <code>Preferences</code>ÔºåÊé•ËøûÁÇπÂáª <code>Build</code> &gt;&gt; <code>Build Tools</code> &gt;&gt; <code>Maven</code> ÔºåÂú® <code>Maven home directory</code> Â§ÑÈÄâÊã© IDEA Ëá™Â∏¶ÁöÑ <code>maven</code> ÁâàÊú¨ÔºåÂú®Êú¨Âú∞Êñá‰ª∂Á≥ªÁªü‰∏≠ÊâæÂà∞ËØ•Ë∑ØÂæÑÔºåÊâæÂà∞Âπ∂ËøõÂÖ• <code>conf</code> ÁõÆÂΩïÔºåÊâìÂºÄÁºñËæë <code>settings.xml</code> „ÄÇ</p>
<p>Á¨¨‰∫åÊ≠•ÔºöÂú® <code>settings.xml</code> ‰∏≠ÊêúÁ¥¢ <code>mirrors</code> ,Â∞Ü‰ª•‰∏ãÈÖçÁΩÆÂÜôÂÖ•ËØ•Â§ÑÔºö<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ÈòøÈáåamvenÂ∫ì --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<font color="red">NOTE:Ê≥®ÊÑèÂ∞Ü‰∏äËø∞‰ª£Á†ÅÊîæÂÖ• <code>&lt;mirrors&gt;ËøôÈáåÈù¢&lt;/mirrors&gt;</code> „ÄÇ</font>

<p>Á¨¨‰∏âÊ≠•ÔºöÂõûÂà∞ <code>Maven</code> ÁöÑÈÖçÁΩÆÁïåÈù¢Ôºå<code>User settings file</code> Â§ÑÁÇπÂáª <code>Override</code> ,ÈÄâÊã©ÂàöÊâçÁºñËæëÁöÑ <code>settings.xml</code> Êñá‰ª∂ÂÖ®Ë∑ØÂæÑ„ÄÇ</p>
<p>Á¨¨ÂõõÊ≠•Ôºö<code>Apply</code> ,<code>OK</code>,ÂÆåÊ¥ª„ÄÇÁé∞Âú®ÂèØ‰ª•È™åËØÅÊòØÂê¶ÊàêÂäü„ÄÇ</p>
]]></content>
      
        <categories>
            
            <category> idea </category>
            
        </categories>
        
        
        <tags>
            
            <tag> idea </tag>
            
            <tag> mac </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Phoenix Secondary Indexing]]></title>
      <url>https://stanxia.github.io/2017/12/27/Phoenix-Secondary-Indexing/</url>
      <content type="html"><![CDATA[<p>‰∫åÁ∫ßÁ¥¢ÂºïÊòØ‰ªé‰∏ªËÆøÈóÆË∑ØÂæÑËÆøÈóÆÊï∞ÊçÆÁöÑÊ≠£‰∫§ÊñπÂºè„ÄÇÂú® HBase ‰∏≠ÔºåÊÇ®Êúâ‰∏Ä‰∏™Á¥¢ÂºïÊåâÂ≠óÂÖ∏È°∫Â∫èÊéíÂ∫èÂú®‰∏ªÈîÆË°å‰∏ä„ÄÇ‰ª•‰∏çÂêå‰∫é‰∏ªË¶ÅË°åÁöÑÊñπÂºèËÆøÈóÆËÆ∞ÂΩïÈúÄË¶ÅÊâ´ÊèèË°®‰∏≠ÁöÑÊâÄÊúâË°åÔºå‰ª•ÈíàÂØπÊÇ®ÁöÑËøáÊª§Âô®ÂØπÂÖ∂ËøõË°åÊµãËØï„ÄÇÈÄöËøá‰∫åÁ∫ßÁ¥¢ÂºïÔºåÊÇ®Á¥¢ÂºïÁöÑÂàóÊàñË°®ËææÂºèÂΩ¢Êàê‰∏Ä‰∏™Â§áÁî®Ë°åÈîÆÔºå‰ª•ÂÖÅËÆ∏Ê≤øÁùÄËøô‰∏™Êñ∞ËΩ¥ËøõË°åÁÇπÊü•ÊâæÂíåËåÉÂõ¥Êâ´Êèè„ÄÇ</p>
<div class="note info"><h2 id="Covered-Indexes-Ë¶ÜÁõñÁ¥¢Âºï"><a href="#Covered-Indexes-Ë¶ÜÁõñÁ¥¢Âºï" class="headerlink" title="Covered Indexes Ë¶ÜÁõñÁ¥¢Âºï"></a>Covered Indexes Ë¶ÜÁõñÁ¥¢Âºï</h2></div>
<p>Phoenix ÊòØÁâπÂà´Âº∫Â§ßÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Êèê‰æõË¶ÜÁõñÁ¥¢Âºï - ‰∏ÄÊó¶ÊâæÂà∞Á¥¢ÂºïÊù°ÁõÆÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅËøîÂõû‰∏ªË°®„ÄÇÁõ∏ÂèçÔºåÊàë‰ª¨Â∞ÜÊàë‰ª¨ÂÖ≥ÂøÉÁöÑÊï∞ÊçÆÁªëÂÆöÂà∞Á¥¢ÂºïË°åÔºåËäÇÁúÅ‰∫ÜËØªÂèñÊó∂Èó¥ÁöÑÂºÄÈîÄ„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå‰ª•‰∏ãÂÜÖÂÆπÂ∞ÜÂú®v1Âíåv2Âàó‰∏äÂàõÂª∫Á¥¢ÂºïÔºåÂπ∂Âú®Á¥¢Âºï‰∏≠ÂåÖÂê´v3Âàó‰ª•Èò≤Ê≠¢‰ªéÊï∞ÊçÆË°®‰∏≠Ëé∑ÂèñËØ•ÂàóÔºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> my_index <span class="keyword">ON</span> my_table (v1,v2) <span class="keyword">INCLUDE</span>(v3)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<div class="note info"><h2 id="Functional-Indexes-ÂáΩÊï∞Á¥¢Âºï"><a href="#Functional-Indexes-ÂáΩÊï∞Á¥¢Âºï" class="headerlink" title="Functional Indexes ÂáΩÊï∞Á¥¢Âºï"></a>Functional Indexes ÂáΩÊï∞Á¥¢Âºï</h2></div>
<p>ÂáΩÊï∞Á¥¢ÂºïÔºàÂú®4.3ÂíåÊõ¥È´òÁâàÊú¨‰∏≠ÂèØÁî®ÔºâÂÖÅËÆ∏ÊÇ®‰∏ç‰ªÖÂú®Âàó‰∏äËÄå‰∏îÂú®‰ªªÊÑèË°®ËææÂºè‰∏äÂàõÂª∫Á¥¢Âºï„ÄÇÁÑ∂ÂêéÔºåÂΩì‰∏Ä‰∏™Êü•ËØ¢‰ΩøÁî®ËØ•Ë°®ËææÂºèÊó∂ÔºåÁ¥¢ÂºïÂèØ‰ª•Áî®Êù•Ê£ÄÁ¥¢ÁªìÊûúËÄå‰∏çÊòØÊï∞ÊçÆË°®„ÄÇ‰æãÂ¶ÇÔºåÊÇ®ÂèØ‰ª•Âú® UPPERÔºàFIRST_NAME ||‚Äô‚Äô|| LAST_NAMEÔºâ‰∏äÂàõÂª∫‰∏Ä‰∏™Á¥¢ÂºïÔºå‰ª•ÂÖÅËÆ∏ÊÇ®ÂØπÁªÑÂêàÁöÑÂêçÂ≠óÂíåÂßìÊ∞èËøõË°å‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÁöÑÊêúÁ¥¢„ÄÇ</p>
<p>‰æãÂ¶ÇÔºå‰∏ãÈù¢Â∞ÜÂàõÂª∫Ëøô‰∏™ÂäüËÉΩÁ¥¢ÂºïÔºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> UPPER_NAME_IDX <span class="keyword">ON</span> EMP (<span class="keyword">UPPER</span>(FIRST_NAME||<span class="string">' '</span>||LAST_NAME))</span><br></pre></td></tr></table></figure>
<p>Êúâ‰∫ÜËøô‰∏™Á¥¢ÂºïÔºåÂèëÂá∫‰∏ãÈù¢ÁöÑÊü•ËØ¢Êó∂ÔºåÂ∞Ü‰ΩøÁî®Á¥¢ÂºïËÄå‰∏çÊòØÊï∞ÊçÆË°®Êù•Ê£ÄÁ¥¢ÁªìÊûúÔºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> EMP_ID <span class="keyword">FROM</span> EMP <span class="keyword">WHERE</span> <span class="keyword">UPPER</span>(FIRST_NAME||<span class="string">' '</span>||LAST_NAME)=<span class="string">'JOHN DOE'</span></span><br></pre></td></tr></table></figure></p>
<p>Phoenix ÊîØÊåÅ‰∏§ÁßçÁ¥¢ÂºïÊäÄÊúØÔºöÂÖ®Â±ÄÁ¥¢ÂºïÂíåÊú¨Âú∞Á¥¢Âºï„ÄÇÊØè‰∏™Âú®‰∏çÂêåÁöÑÊÉÖÂÜµ‰∏ãÈÉΩÂæàÊúâÁî®ÔºåÂπ∂‰∏îÊúâËá™Â∑±ÁöÑÊïÖÈöúÊ¶ÇÂÜµÂíåÊÄßËÉΩÁâπÁÇπ„ÄÇ</p>
<div class="note info"><h2 id="Global-Indexes-ÂÖ®Â±ÄÁ¥¢Âºï"><a href="#Global-Indexes-ÂÖ®Â±ÄÁ¥¢Âºï" class="headerlink" title="Global Indexes ÂÖ®Â±ÄÁ¥¢Âºï"></a>Global Indexes ÂÖ®Â±ÄÁ¥¢Âºï</h2></div>
<p>ÂÖ®Â±ÄÁ¥¢ÂºïÁõÆÊ†áÊòØÈáçÂ∫¶ËØªÊìç‰ΩúÁî®‰æã„ÄÇ‰ΩøÁî®ÂÖ®Â±ÄÁ¥¢ÂºïÔºåÁ¥¢ÂºïÁöÑÊâÄÊúâÊÄßËÉΩÊçüÂ§±ÈÉΩÊòØÂú®ÂÜôÂÖ•Êó∂ÂèëÁîüÁöÑ„ÄÇÊàë‰ª¨Êã¶Êà™Êï∞ÊçÆË°®Êõ¥Êñ∞ÂÜôÔºàDELETEÔºåUPSERT VALUESÂíåUPSERT SELECTÔºâÔºåÂª∫Á´ãÁ¥¢ÂºïÊõ¥Êñ∞ÔºåÁÑ∂ÂêéÂèëÈÄÅ‰ªª‰ΩïÂøÖË¶ÅÁöÑÊõ¥Êñ∞Âà∞ÊâÄÊúâÊÑüÂÖ¥Ë∂£ÁöÑÁ¥¢ÂºïË°®„ÄÇÂú®ËØªÁöÑÊó∂ÂÄôÔºåPhoenix ‰ºöÈÄâÊã©‰ΩøÁî®ÁöÑÁ¥¢ÂºïË°®ÔºåËøôÂ∞Ü‰∫ßÁîüÊúÄÂø´ÁöÑÊü•ËØ¢Êó∂Èó¥ÔºåÂπ∂Áõ¥Êé•Êâ´ÊèèÂÆÉÔºåÂ∞±ÂÉè‰ªª‰ΩïÂÖ∂‰ªñÁöÑ HBase Ë°®‰∏ÄÊ†∑„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÈô§ÈùûÊöóÁ§∫ÔºåÂê¶ÂàôÁ¥¢Âºï‰∏ç‰ºöÁî®‰∫éÂºïÁî®‰∏çÂ±û‰∫éÁ¥¢ÂºïÁöÑÂàóÁöÑÊü•ËØ¢„ÄÇ</p>
<div class="note info"><h2 id="Local-Indexes-Êú¨Âú∞Á¥¢Âºï"><a href="#Local-Indexes-Êú¨Âú∞Á¥¢Âºï" class="headerlink" title="Local Indexes Êú¨Âú∞Á¥¢Âºï"></a>Local Indexes Êú¨Âú∞Á¥¢Âºï</h2></div>
<p>Êú¨Âú∞Á¥¢ÂºïÁõÆÊ†áÈíàÂØπÈáçÂ∫¶ÂÜôÊìç‰ΩúÔºåÁ©∫Èó¥ÂèóÈôêÁöÑÁî®‰æã„ÄÇÂ∞±ÂÉèÂÖ®Â±ÄÁ¥¢Âºï‰∏ÄÊ†∑ÔºåPhoenix ‰ºöÂú®Êü•ËØ¢Êó∂Ëá™Âä®ÈÄâÊã©ÊòØÂê¶‰ΩøÁî®Êú¨Âú∞Á¥¢Âºï„ÄÇ‰ΩøÁî®Êú¨Âú∞Á¥¢ÂºïÔºåÁ¥¢ÂºïÊï∞ÊçÆÂíåË°®Êï∞ÊçÆÂÖ±ÂêåÈ©ªÁïôÂú®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÔºåÈò≤Ê≠¢ÂÜôÂÖ•ÊúüÈó¥ÁöÑ‰ªª‰ΩïÁΩëÁªúÂºÄÈîÄ„ÄÇÂç≥‰ΩøÊü•ËØ¢Ê≤°ÊúâÂÆåÂÖ®Ë¶ÜÁõñÔºå‰πüÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Á¥¢ÂºïÔºàÂç≥ÔºåPhoenix Ëá™Âä®Ê£ÄÁ¥¢‰∏çÂú®Á¥¢Âºï‰∏≠ÁöÑÂàóÔºåÈÄöËøá‰∏éÊï∞ÊçÆË°®Áõ∏ÂØπÂ∫îÁöÑÁ¥¢ÂºïÔºâ„ÄÇ‰∏éÂÖ®Â±ÄÁ¥¢Âºï‰∏çÂêåÔºåË°®‰∏≠ÁöÑÊâÄÊúâÊú¨Âú∞Á¥¢ÂºïÈÉΩÂ≠òÂÇ®Âú®4.8.0Áâà‰πãÂâçÁöÑÂçïÁã¨ÁöÑÂÖ±‰∫´Ë°®‰∏≠„ÄÇ‰ªé4.8.0ÂºÄÂßãÔºåÊàë‰ª¨Â∞ÜÊâÄÊúâÊú¨Âú∞Á¥¢ÂºïÊï∞ÊçÆÂ≠òÂÇ®Âú®Áõ∏ÂêåÊï∞ÊçÆË°®‰∏≠ÁöÑÂçïÁã¨ÁöÑÂΩ±Â≠êÂàóÊóè‰∏≠„ÄÇÂú®ËØªÂèñÊú¨Âú∞Á¥¢ÂºïÊó∂ÔºåÁî±‰∫é‰∏çËÉΩÁ°ÆÂÆöÁ¥¢ÂºïÊï∞ÊçÆÁöÑÁ°ÆÂàáÂå∫Âüü‰ΩçÁΩÆÔºåÊâÄ‰ª•ÂøÖÈ°ªÊ£ÄÊü•ÊØè‰∏™Âå∫ÂüüÁöÑÊï∞ÊçÆ„ÄÇÂõ†Ê≠§Âú®ËØªÂèñÊó∂‰ºöÂèëÁîü‰∏Ä‰∫õÂºÄÈîÄ„ÄÇ</p>
<div class="note info"><h2 id="Index-Population"><a href="#Index-Population" class="headerlink" title="Index Population"></a>Index Population</h2></div>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂàõÂª∫Á¥¢ÂºïÊó∂Ôºå‰ºöÂú® CREATE INDEX Ë∞ÉÁî®ÊúüÈó¥ÂêåÊ≠•Â°´ÂÖÖËØ•Á¥¢Âºï„ÄÇÊ†πÊçÆÊï∞ÊçÆË°®ÁöÑÂΩìÂâçÂ§ßÂ∞èÔºåËøôÂèØËÉΩÊòØ‰∏çÂèØË°åÁöÑ„ÄÇ‰ªé4.5ÂºÄÂßãÔºåÂèØ‰ª•ÈÄöËøáÂú®Á¥¢ÂºïÂàõÂª∫ DDL ËØ≠Âè•‰∏≠ÂåÖÂê´ ASYNC ÂÖ≥ÈîÆÂ≠óÊù•ÂºÇÊ≠•ÂÆåÊàêÁ¥¢ÂºïÁöÑÂ°´ÂÖÖÔºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> async_index <span class="keyword">ON</span> my_schema.my_table (v) ASYNC</span><br></pre></td></tr></table></figure></p>
<p>ÂøÖÈ°ªÈÄöËøá HBase ÂëΩ‰ª§Ë°åÂçïÁã¨ÂêØÂä®Â°´ÂÖÖÁ¥¢ÂºïË°®ÁöÑ map-reduce ‰Ωú‰∏öÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span>&#123;HBASE_HOME&#125;/bin/hbase org.apache.phoenix.mapreduce.index.IndexTool</span><br><span class="line">  --schema MY_SCHEMA --data-table MY_TABLE --index-table ASYNC_IDX</span><br><span class="line">  --output-path ASYNC_IDX_HFILES</span><br></pre></td></tr></table></figure></p>
<p>Âè™Êúâ map-reduce ‰Ωú‰∏öÂÆåÊàêÂêéÔºåÁ¥¢ÂºïÊâç‰ºöË¢´ÊøÄÊ¥ªÂπ∂ÂºÄÂßãÂú®Êü•ËØ¢‰∏≠‰ΩøÁî®„ÄÇËøôÈ°πÂ∑•‰ΩúÂØπ‰∫éÈÄÄÂá∫ÁöÑÂÆ¢Êà∑Á´ØÊòØÊúâÂºπÊÄßÁöÑ„ÄÇËæìÂá∫Ë∑ØÂæÑÈÄâÈ°πÁî®‰∫éÊåáÂÆöÁî®‰∫éÂÜôÂÖ• HFile ÁöÑ HDFS ÁõÆÂΩï„ÄÇ</p>
<div class="note info"><h2 id="Index-Usage-Á¥¢Âºï‰ΩøÁî®"><a href="#Index-Usage-Á¥¢Âºï‰ΩøÁî®" class="headerlink" title="Index Usage Á¥¢Âºï‰ΩøÁî®"></a>Index Usage Á¥¢Âºï‰ΩøÁî®</h2></div>
<p>Phoenix Ëá™Âä®‰ΩøÁî®Á¥¢ÂºïÊù•ÊúçÂä°‰∏Ä‰∏™Êü•ËØ¢ÔºåÂΩìÂÆÉÁ°ÆÂÆöÊõ¥ÊúâÊïàÁöÑÊó∂ÂÄô„ÄÇ‰ΩÜÊòØÔºåÈô§ÈùûÊü•ËØ¢‰∏≠ÂºïÁî®ÁöÑÊâÄÊúâÂàóÈÉΩÂåÖÂê´Âú®Á¥¢Âºï‰∏≠ÔºåÂê¶Âàô‰∏ç‰ºö‰ΩøÁî®ÂÖ®Â±ÄÁ¥¢Âºï„ÄÇ‰æãÂ¶ÇÔºå‰ª•‰∏ãÊü•ËØ¢‰∏ç‰ºö‰ΩøÁî®Á¥¢ÂºïÔºåÂõ†‰∏∫Âú®Êü•ËØ¢‰∏≠ÂºïÁî®‰∫Üv2Ôºå‰ΩÜÊú™ÂåÖÂê´Âú®Á¥¢Âºï‰∏≠Ôºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> v2 <span class="keyword">FROM</span> my_table <span class="keyword">WHERE</span> v1 = <span class="string">'foo'</span></span><br></pre></td></tr></table></figure></p>
<p>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊúâ‰∏âÁßçËé∑ÂèñÁ¥¢ÂºïÁöÑÊñπÊ≥ïÔºö</p>
<p>1.ÈÄöËøáÂú®Á¥¢Âºï‰∏≠ÂåÖÂê´v2Êù•ÂàõÂª∫‰∏Ä‰∏™Ë¶ÜÁõñÁ¥¢ÂºïÔºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> my_index <span class="keyword">ON</span> my_table (v1) <span class="keyword">INCLUDE</span> (v2)</span><br></pre></td></tr></table></figure></p>
<p>ËøôÂ∞ÜÂØºËá¥v2ÂàóÂÄºË¢´Â§çÂà∂Âà∞Á¥¢Âºï‰∏≠ÔºåÂπ∂ÈöèÁùÄÊõ¥ÊîπËÄå‰øùÊåÅÂêåÊ≠•„ÄÇËøôÊòæÁÑ∂‰ºöÂ¢ûÂä†Á¥¢ÂºïÁöÑÂ§ßÂ∞è„ÄÇ</p>
<p>2.ÊèêÁ§∫Êü•ËØ¢Âº∫Âà∂ÂÆÉ‰ΩøÁî®Á¥¢ÂºïÔºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="comment">/*+ INDEX(my_table my_index) */</span> v2 <span class="keyword">FROM</span> my_table <span class="keyword">WHERE</span> v1 = <span class="string">'foo'</span></span><br></pre></td></tr></table></figure></p>
<p>ËøôÂ∞ÜÂØºËá¥Âú®ÈÅçÂéÜÁ¥¢ÂºïÊó∂ÊâæÂà∞ÊØè‰∏™Êï∞ÊçÆË°å‰ª•ÊâæÂà∞Áº∫Â∞ëÁöÑv2ÂàóÂÄº„ÄÇËøô‰∏™ÊèêÁ§∫Âè™ÊúâÂú®‰Ω†Áü•ÈÅìÁ¥¢ÂºïÊúâÂæàÂ•ΩÁöÑÈÄâÊã©ÊÄßÁöÑÊó∂ÂÄôÊâçÂèØ‰ª•‰ΩøÁî®Ôºà‰æãÂ¶ÇÔºåÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÊúâÂ∞ëÈáèÁöÑË°®Ê†ºË°åÁöÑÂÄºÊòØ‚Äôfoo‚ÄôÔºâÔºåÂê¶Âàô‰Ω†ÂèØ‰ª•ÈÄöËøáÈªòËÆ§ÁöÑË°å‰∏∫Êù•Ëé∑ÂæóÊõ¥Â•ΩÁöÑÊÄßËÉΩÂÖ®Ë°®Êâ´Êèè„ÄÇ</p>
<p>3.ÂàõÂª∫‰∏Ä‰∏™Êú¨Âú∞Á¥¢ÂºïÔºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">LOCAL</span> <span class="keyword">INDEX</span> my_index <span class="keyword">ON</span> my_table (v1)</span><br></pre></td></tr></table></figure></p>
<p>‰∏éÂÖ®Â±ÄÁ¥¢Âºï‰∏çÂêåÔºåÂç≥‰ΩøÊü•ËØ¢‰∏≠ÂºïÁî®ÁöÑÊâÄÊúâÂàóÈÉΩ‰∏çÂåÖÂê´Âú®Á¥¢Âºï‰∏≠ÔºåÊú¨Âú∞Á¥¢Âºï‰πüÂ∞Ü‰ΩøÁî®Á¥¢Âºï„ÄÇËøôÊòØÈªòËÆ§‰∏∫Êú¨Âú∞Á¥¢ÂºïÂÆåÊàêÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Áü•ÈÅìÂú®Âêå‰∏Ä‰∏™Âå∫ÂüüÊúçÂä°Âô®‰∏äÁöÑË°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆcoresideÁ°Æ‰øùÊü•ÊâæÊòØÊú¨Âú∞ÁöÑ„ÄÇ</p>
<div class="note info"><h2 id="Index-Removal-Á¥¢ÂºïÁßªÈô§"><a href="#Index-Removal-Á¥¢ÂºïÁßªÈô§" class="headerlink" title="Index Removal Á¥¢ÂºïÁßªÈô§"></a>Index Removal Á¥¢ÂºïÁßªÈô§</h2></div>
<p>Ë¶ÅÂà†Èô§Á¥¢ÂºïÔºå‰ΩøÁî®‰ª•‰∏ãËØ≠Âè•Ôºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">INDEX</span> my_index <span class="keyword">ON</span> my_table</span><br></pre></td></tr></table></figure></p>
<p>Â¶ÇÊûúÁ¥¢ÂºïÂàóÂú®Êï∞ÊçÆË°®‰∏≠Ë¢´Âà†Èô§ÔºåÁ¥¢ÂºïÂ∞ÜËá™Âä®Ë¢´Âà†Èô§„ÄÇÂè¶Â§ñÔºåÂ¶ÇÊûúÂú®Êï∞ÊçÆË°®‰∏≠Âà†Èô§‰∏Ä‰∏™Ë¢´Ë¶ÜÁõñÁöÑÂàóÔºåÂÆÉ‰πü‰ºöËá™Âä®‰ªéÁ¥¢Âºï‰∏≠Âà†Èô§„ÄÇ</p>
<div class="note info"><h2 id="Index-Properties-Á¥¢ÂºïÂ±ûÊÄß"><a href="#Index-Properties-Á¥¢ÂºïÂ±ûÊÄß" class="headerlink" title="Index Properties Á¥¢ÂºïÂ±ûÊÄß"></a>Index Properties Á¥¢ÂºïÂ±ûÊÄß</h2></div>
<p>Â∞±ÂÉè‰ΩøÁî®CREATE TABLEËØ≠Âè•‰∏ÄÊ†∑ÔºåCREATE INDEXËØ≠Âè•ÂèØ‰ª•ÈÄöËøáÂ±ûÊÄßÂ∫îÁî®Âà∞Â∫ïÂ±ÇÁöÑHBaseË°®ÔºåÂåÖÊã¨ÂØπÂÖ∂ËøõË°åÈôêÂà∂ÁöÑËÉΩÂäõ:<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> my_index <span class="keyword">ON</span> my_table (v2 <span class="keyword">DESC</span>, v1) <span class="keyword">INCLUDE</span> (v3)</span><br><span class="line">    SALT_BUCKETS=<span class="number">10</span>, DATA_BLOCK_ENCODING=<span class="string">'NONE'</span></span><br></pre></td></tr></table></figure></p>
<p>ËØ∑Ê≥®ÊÑèÔºåÂ¶ÇÊûú‰∏ªË°®ÊòØÂä†ÁõêÁöÑÔºåÂàôÂØπ‰∫éÂÖ®Â±ÄÁ¥¢ÂºïÔºåËØ•Á¥¢ÂºïÂ∞Ü‰ª•Áõ∏ÂêåÁöÑÊñπÂºèËá™Âä®Ë¢´Âä†Áõê„ÄÇÂè¶Â§ñÔºåÁõ∏ÂØπ‰∫é‰∏ªÁ¥¢ÂºïË°®‰∏éÁ¥¢ÂºïË°®ÁöÑÂ§ßÂ∞èÔºåÁ¥¢ÂºïÁöÑMAX_FILESIZEÂêë‰∏ãË∞ÉÊï¥„ÄÇÊ¨≤‰∫ÜËß£Êõ¥Â§ö‰ø°ÊÅØÔºåËØ∑ÂèÇÈòÖ<a href="http://phoenix.apache.org/salted.html" target="_blank" rel="noopener">ËøôÈáå</a>„ÄÇÂè¶‰∏ÄÊñπÈù¢Ôºå‰ΩøÁî®Êú¨Âú∞Á¥¢ÂºïÊó∂Ôºå‰∏çÂÖÅËÆ∏ÊåáÂÆöSALT_BUCKETS„ÄÇ</p>
<div class="note info"><h2 id="Consistency-Guarantees-‰∏ÄËá¥ÊÄß‰øùËØÅ"><a href="#Consistency-Guarantees-‰∏ÄËá¥ÊÄß‰øùËØÅ" class="headerlink" title="Consistency Guarantees ‰∏ÄËá¥ÊÄß‰øùËØÅ"></a>Consistency Guarantees ‰∏ÄËá¥ÊÄß‰øùËØÅ</h2></div>
<p>Âú®Êèê‰∫§ÂêéÊàêÂäüËøîÂõûÂà∞ÂÆ¢Êà∑Á´ØÔºåÊâÄÊúâÊï∞ÊçÆ‰øùËØÅÂÜôÂÖ•ÊâÄÊúâÁõ∏ÂÖ≥ÁöÑÁ¥¢ÂºïÂíå‰∏ªË°®„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÁ¥¢ÂºïÊõ¥Êñ∞‰∏éHBaseÊèê‰æõÁöÑÁõ∏ÂêåÂº∫‰∏ÄËá¥ÊÄß‰øùËØÅÊòØÂêåÊ≠•ÁöÑ„ÄÇ</p>
<p>‰ΩÜÊòØÔºåÁî±‰∫éÁ¥¢ÂºïÂ≠òÂÇ®Âú®‰∏éÊï∞ÊçÆË°®‰∏çÂêåÁöÑË°®‰∏≠ÔºåÂõ†Ê≠§Ê†πÊçÆË°®ÁöÑÂ±ûÊÄßÂíåÁ¥¢ÂºïÁöÑÁ±ªÂûãÔºåË°®ÂíåÁ¥¢Âºï‰πãÈó¥ÁöÑ‰∏ÄËá¥ÊÄß‰ºöÂõ†ÊúçÂä°Âô®Á´ØÂ¥©Ê∫ÉËÄåÂ§±Ë¥•„ÄÇËøôÊòØÊÇ®ÁöÑÈúÄÊ±ÇÂíå‰ΩøÁî®Ê°à‰æãÈ©±Âä®ÁöÑÈáçË¶ÅËÆæËÆ°ËÄÉËôëÂõ†Á¥†„ÄÇ</p>
<p>‰∏ãÈù¢Ê¶ÇËø∞‰∫ÜÂêÑÁßç‰∏ÄËá¥ÊÄß‰øùËØÅÁöÑ‰∏çÂêåÈÄâÈ°π„ÄÇ</p>
<h3 id="Transactional-Tables-‰∫ãÂä°Ë°®"><a href="#Transactional-Tables-‰∫ãÂä°Ë°®" class="headerlink" title="Transactional Tables ‰∫ãÂä°Ë°®"></a>Transactional Tables ‰∫ãÂä°Ë°®</h3><p>ÈÄöËøáÂ∞ÜÊÇ®ÁöÑË°®Â£∞Êòé‰∏∫‰∫ãÂä°ÊÄßÁöÑÔºåÊÇ®ÂèØ‰ª•ÂÆûÁé∞Ë°®ÂíåÁ¥¢Âºï‰πãÈó¥ÊúÄÈ´òÁ∫ßÂà´ÁöÑ‰∏ÄËá¥ÊÄß‰øùËØÅ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊÇ®ÁöÑË°®Á™ÅÂèòÂíåÁõ∏ÂÖ≥Á¥¢ÂºïÊõ¥Êñ∞ÁöÑÊèê‰∫§ÊòØÂÖ∑ÊúâÂº∫ ACID ‰øùËØÅÁöÑÂéüÂ≠ê„ÄÇÂ¶ÇÊûúÊèê‰∫§Â§±Ë¥•ÔºåÈÇ£‰πàÊÇ®ÁöÑÊï∞ÊçÆÔºàË°®ÊàñÁ¥¢ÂºïÔºâÈÉΩ‰∏ç‰ºöÊõ¥Êñ∞Ôºå‰ªéËÄåÁ°Æ‰øùÊÇ®ÁöÑË°®ÂíåÁ¥¢ÂºïÂßãÁªà‰øùÊåÅÂêåÊ≠•„ÄÇ</p>
<p>‰∏∫‰ªÄ‰πà‰∏çÊÄªÊòØÊää‰Ω†ÁöÑË°®Â£∞Êòé‰∏∫‰∫ãÂä°ÊÄßÁöÑÔºüËøôÂèØËÉΩÂæàÂ•ΩÔºåÁâπÂà´ÊòØÂ¶ÇÊûú‰Ω†ÁöÑË°®Ë¢´Â£∞Êòé‰∏∫‰∏çÂèØÂèòÁöÑÔºåÂõ†‰∏∫Âú®ËøôÁßçÊÉÖÂÜµ‰∏ã‰∫ãÂä°ÂºÄÈîÄÈùûÂ∏∏Â∞è„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊÇ®ÁöÑÊï∞ÊçÆÊòØÂèØÂèòÁöÑÔºåËØ∑Á°Æ‰øù‰∏é‰∫ãÂä°ÊÄßË°®ÂèëÁîüÂÜ≤Á™ÅÊ£ÄÊµãÁõ∏ÂÖ≥ÁöÑÂºÄÈîÄÂíåËøêË°å‰∫ãÂä°ÁÆ°ÁêÜÂô®ÁöÑËøêË°åÂºÄÈîÄÊòØÂèØ‰ª•Êé•ÂèóÁöÑ„ÄÇÊ≠§Â§ñÔºåÂÖ∑Êúâ‰∫åÁ∫ßÁ¥¢ÂºïÁöÑ‰∫ãÂä°Ë°®ÂèØËÉΩ‰ºöÈôç‰ΩéÂÜôÂÖ•Êï∞ÊçÆË°®ÁöÑÂèØÁî®ÊÄßÔºåÂõ†‰∏∫Êï∞ÊçÆË°®ÂèäÂÖ∂ËæÖÂä©Á¥¢ÂºïË°®ÂøÖÈ°ªÂèØÁî®ÔºåÂê¶ÂàôÂÜôÂÖ•Â∞ÜÂ§±Ë¥•„ÄÇ</p>
<h3 id="Immutable-Tables-‰∏çÂèØÂèòË°®"><a href="#Immutable-Tables-‰∏çÂèØÂèòË°®" class="headerlink" title="Immutable Tables ‰∏çÂèØÂèòË°®"></a>Immutable Tables ‰∏çÂèØÂèòË°®</h3><p>ÂØπ‰∫éÂÖ∂‰∏≠Êï∞ÊçÆÂè™ÂÜôÂÖ•‰∏ÄÊ¨°ËÄå‰ªé‰∏çÊõ¥Êñ∞ÁöÑË°®ÔºåÂèØ‰ª•ËøõË°åÊüê‰∫õ‰ºòÂåñ‰ª•ÂáèÂ∞ëÂ¢ûÈáèÁª¥Êä§ÁöÑÂÜôÂÖ•Êó∂Èó¥ÂºÄÈîÄ„ÄÇËøôÊòØÂ∏∏ËßÅÁöÑÊó∂Èó¥Â∫èÂàóÊï∞ÊçÆÔºåÂ¶ÇÊó•ÂøóÊàñ‰∫ã‰ª∂Êï∞ÊçÆÔºå‰∏ÄÊó¶ÂÜôÂÖ•Ë°åÔºåÂÆÉÂ∞ÜÊ∞∏Ëøú‰∏ç‰ºöË¢´Êõ¥Êñ∞„ÄÇË¶ÅÂà©Áî®Ëøô‰∫õ‰ºòÂåñÔºåÈÄöËøáÂ∞Ü IMMUTABLE_ROWS = true Â±ûÊÄßÊ∑ªÂä†Âà∞ÊÇ®ÁöÑ DDL ËØ≠Âè•‰∏≠ÔºåÂ∞ÜÊÇ®ÁöÑË°®Â£∞Êòé‰∏∫‰∏çÂèØÂèòÔºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> my_table (k <span class="built_in">VARCHAR</span> PRIMARY <span class="keyword">KEY</span>, v <span class="built_in">VARCHAR</span>) IMMUTABLE_ROWS=<span class="literal">true</span></span><br></pre></td></tr></table></figure></p>
<p>‰ΩøÁî® IMMUTABLE_ROWS = true Â£∞ÊòéÁöÑË°®‰∏äÁöÑÊâÄÊúâÁ¥¢ÂºïÈÉΩË¢´ËÆ§‰∏∫ÊòØ‰∏çÂèØÂèòÁöÑÔºàËØ∑Ê≥®ÊÑèÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãË°®Ë¢´ËÆ§‰∏∫ÊòØÂèØÂèòÁöÑÔºâ„ÄÇÂØπ‰∫éÂÖ®Â±Ä‰∏çÂèØÂèòÁ¥¢ÂºïÔºåÁ¥¢ÂºïÂÆåÂÖ®Âú®ÂÆ¢Êà∑Á´ØÁª¥Êä§ÔºåÁ¥¢ÂºïË°®ÊòØÂú®Êï∞ÊçÆË°®ÂèëÁîüÊõ¥ÊîπÊó∂ÁîüÊàêÁöÑ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÊú¨Âú∞‰∏çÂèØÂèòÁ¥¢ÂºïÂú®ÊúçÂä°Âô®Á´Ø‰øùÊåÅ‰∏çÂèò„ÄÇËØ∑Ê≥®ÊÑèÔºåÊ≤°Êúâ‰ªª‰Ωï‰øùÊä§Êé™ÊñΩÂèØ‰ª•Âº∫Âà∂ÊâßË°åÔºåÂ£∞Êòé‰∏∫‰∏çÂèØÂèòÁöÑË°®ÂÆûÈôÖ‰∏ä‰∏ç‰ºöÊîπÂèòÊï∞ÊçÆÔºàÂõ†‰∏∫Ëøô‰ºöÂê¶ÂÆöÊâÄËææÂà∞ÁöÑÊÄßËÉΩÂ¢ûÁõäÔºâ„ÄÇÂ¶ÇÊûúÂèëÁîüËøôÁßçÊÉÖÂÜµÔºåÁ¥¢ÂºïÂ∞Ü‰∏çÂÜç‰∏éË°®ÂêåÊ≠•„ÄÇ</p>
<p>Â¶ÇÊûúÊÇ®Êúâ‰∏Ä‰∏™Áé∞ÊúâÁöÑË°®ÔºåÊÇ®ÊÉ≥‰ªé‰∏çÂèØÂèòÁ¥¢ÂºïÂàáÊç¢Âà∞ÂèØÂèòÁ¥¢ÂºïÔºåËØ∑‰ΩøÁî®ALTER TABLEÂëΩ‰ª§ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> my_table <span class="keyword">SET</span> IMMUTABLE_ROWS=<span class="literal">false</span></span><br></pre></td></tr></table></figure></p>
<p>Èùû‰∫ãÂä°ÊÄßÔºå‰∏çÂèØÂèòË°®ÁöÑÁ¥¢ÂºïÊ≤°ÊúâËá™Âä®Â§ÑÁêÜÊèê‰∫§Â§±Ë¥•ÁöÑÊú∫Âà∂„ÄÇ‰øùÊåÅË°®ÂíåÁ¥¢Âºï‰πãÈó¥ÁöÑ‰∏ÄËá¥ÊÄßÁïôÁªôÂÆ¢Êà∑Á´ØÂ§ÑÁêÜ„ÄÇÂõ†‰∏∫Êõ¥Êñ∞ÊòØÂπÇÁ≠âÁöÑÔºåÊâÄ‰ª•ÊúÄÁÆÄÂçïÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØÂÆ¢Êà∑Á´ØÁªßÁª≠ÈáçËØï‰∏ÄÊâπÁ™ÅÂèòÔºåÁõ¥Âà∞ÂÆÉ‰ª¨ÊàêÂäü„ÄÇ</p>
<h3 id="Mutable-Tables-ÂèØÂèòË°®"><a href="#Mutable-Tables-ÂèØÂèòË°®" class="headerlink" title="Mutable Tables ÂèØÂèòË°®"></a>Mutable Tables ÂèØÂèòË°®</h3><p>ÂØπ‰∫éÈùû‰∫ãÂä°ÊÄßÂèØÂèòË°®ÔºåÊàë‰ª¨ÈÄöËøáÂ∞ÜÁ¥¢ÂºïÊõ¥Êñ∞Ê∑ªÂä†Âà∞‰∏ªË°®Ë°åÁöÑÈ¢ÑÂÜôÊó•ÂøóÔºàWALÔºâÊù°ÁõÆÊù•Áª¥Êä§Á¥¢ÂºïÊõ¥Êñ∞ÊåÅ‰πÖÊÄß„ÄÇÂè™ÊúâÂú®WALÊù°ÁõÆÊàêÂäüÂêåÊ≠•Âà∞Á£ÅÁõòÂêéÔºåÊàë‰ª¨Êâç‰ºöÂ∞ùËØïÊõ¥Êñ∞Á¥¢Âºï/‰∏ªË°®„ÄÇÊàë‰ª¨ÈªòËÆ§Âπ∂Ë°åÁºñÂÜôÁ¥¢ÂºïÊõ¥Êñ∞Ôºå‰ªéËÄåÂØºËá¥ÈùûÂ∏∏È´òÁöÑÂêûÂêêÈáè„ÄÇÂ¶ÇÊûúÊúçÂä°Âô®Âú®Êàë‰ª¨ÂÜôÁ¥¢ÂºïÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÂ¥©Ê∫É‰∫ÜÔºåÊàë‰ª¨‰ºöÈáçÊí≠ÊâÄÊúâÁ¥¢ÂºïÊõ¥Êñ∞Âà∞WALÊÅ¢Â§çËøáÁ®ã‰∏≠ÁöÑÁ¥¢ÂºïË°®ÔºåÂπ∂‰æùËµñÊõ¥Êñ∞ÁöÑÂπÇÁ≠âÊÄßÊù•Á°Æ‰øùÊ≠£Á°ÆÊÄß„ÄÇÂõ†Ê≠§ÔºåÈùû‰∫ãÂä°ÊÄßÂèØÂèòË°®‰∏äÁöÑÁ¥¢ÂºïÂè™ÊòØ‰∏ªË°®ËÉåÂêéÁöÑ‰∏ÄÊâπÁºñËæë„ÄÇ</p>
<p>ÈáçË¶ÅÁöÑÊòØË¶ÅÊ≥®ÊÑèÂá†ÁÇπÔºö</p>
<ul>
<li>ÂØπ‰∫éÈùû‰∫ãÂä°ÊÄßË°®ÔºåÊÇ®ÂèØ‰ª•ÁúãÂà∞Á¥¢ÂºïË°®‰∏é‰∏ªË°®‰∏çÂêåÊ≠•„ÄÇ</li>
<li>Â¶Ç‰∏äÊâÄËø∞ÔºåËøôÊòØÂèØ‰ª•ÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Âú®ÂæàÁü≠ÁöÑÊó∂Èó¥ÂÜÖÂè™ÊúâÂæàÂ∞èÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂπ∂‰∏î‰∏çÂêåÊ≠•</li>
<li>ÊØè‰∏™Êï∞ÊçÆË°åÂèäÂÖ∂Á¥¢ÂºïË°åÈÉΩ‰øùËØÅË¢´ÂÜôÂÖ•Êàñ‰∏¢Â§± - Êàë‰ª¨‰ªéÊù•Ê≤°ÊúâÁúãÂà∞ÈÉ®ÂàÜÊõ¥Êñ∞ÔºåÂõ†‰∏∫ËøôÊòØHBaseÂéüÂ≠êÊÄß‰øùËØÅÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ</li>
<li>È¶ñÂÖàÂ∞ÜÊï∞ÊçÆÂÜôÂÖ•Ë°®‰∏≠ÔºåÁÑ∂ÂêéÂÜôÂÖ•Á¥¢ÂºïË°®ÔºàÂ¶ÇÊûúÁ¶ÅÁî®WALÔºåÂàôÂèç‰πã‰∫¶ÁÑ∂Ôºâ„ÄÇ</li>
</ul>
<h4 id="Singular-Write-Path"><a href="#Singular-Write-Path" class="headerlink" title="Singular Write Path"></a>Singular Write Path</h4><p>Êúâ‰∏Ä‰∏™‰øùËØÅÂ§±Ë¥•Â±ûÊÄßÁöÑÂÜôÂÖ•Ë∑ØÂæÑ„ÄÇÊâÄÊúâÂÜôÂÖ•HRegionÁöÑÂÜÖÂÆπÈÉΩË¢´Êàë‰ª¨ÁöÑÂçèÂ§ÑÁêÜÂô®Êã¶Êà™„ÄÇÁÑ∂ÂêéÔºåÊàë‰ª¨Ê†πÊçÆÊåÇËµ∑Êõ¥Êñ∞ÔºàÊàñÊõ¥Êñ∞ÔºåÂ¶ÇÊûúÊòØÊâπÂ§ÑÁêÜÔºâÊûÑÂª∫Á¥¢ÂºïÊõ¥Êñ∞„ÄÇÁÑ∂ÂêéËøô‰∫õÊõ¥Êñ∞Ë¢´ÈôÑÂä†Âà∞ÂéüÂßãÊõ¥Êñ∞ÁöÑWALÊù°ÁõÆ„ÄÇ</p>
<p>Â¶ÇÊûúÂú®Ê≠§‰πãÂâçÊàë‰ª¨ÈÅáÂà∞‰ªª‰ΩïÈóÆÈ¢òÔºåÊàë‰ª¨‰ºöÂ∞ÜÂ§±Ë¥•ËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåÂπ∂‰∏îÊ≤°Êúâ‰ªª‰ΩïÊï∞ÊçÆË¢´ÊåÅ‰πÖÂåñÊàñËÄÖ‰∏çÂèØËßÅ„ÄÇ</p>
<p>‰∏ÄÊó¶WALË¢´ÂÜôÂÖ•ÔºåÊàë‰ª¨Á°Æ‰øùÂç≥‰ΩøÂú®Â§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ¥¢ÂºïÂíå‰∏ªË°®Êï∞ÊçÆ‰πüÂ∞ÜÂèòÂæóÂèØËßÅ„ÄÇ</p>
<ul>
<li>Â¶ÇÊûúÊúçÂä°Âô®ÂèëÁîüÂ¥©Ê∫ÉÔºåÊàë‰ª¨‰ºö‰ΩøÁî®ÈÄöÂ∏∏ÁöÑWALÈáçÊí≠Êú∫Âà∂ÈáçÊí≠Á¥¢ÂºïÊõ¥Êñ∞„ÄÇ</li>
<li>Â¶ÇÊûúÊúçÂä°Âô®Ê≤°ÊúâÂ¥©Ê∫ÉÔºåÊàë‰ª¨Âè™ÊòØÂ∞ÜÁ¥¢ÂºïÊõ¥Êñ∞ÊèíÂÖ•Âà∞ÂÆÉ‰ª¨ÂêÑËá™ÁöÑË°®‰∏≠„ÄÇ<ul>
<li>Â¶ÇÊûúÁ¥¢ÂºïÊõ¥Êñ∞Â§±Ë¥•Ôºå‰∏ãÈù¢Ê¶ÇËø∞‰∫Ü‰øùÊåÅ‰∏ÄËá¥ÊÄßÁöÑÂêÑÁßçÊñπÊ≥ï„ÄÇ</li>
<li>Â¶ÇÊûúPhoenixÁ≥ªÁªüÁõÆÂΩïË°®ÂèëÁîüÊïÖÈöúÊó∂Êó†Ê≥ïÂà∞ËææÔºåÊàë‰ª¨Âº∫Âà∂ÊúçÂä°Âô®Á´ãÂç≥‰∏≠Ê≠¢Âπ∂Â§±Ë¥•ÔºåËØ∑Âú®JVM‰∏äË∞ÉÁî®System.exitÔºåÂº∫Âà∂ÊúçÂä°Âô®Ê≠ªÊú∫„ÄÇÈÄöËøáÊùÄÊ≠ªÊúçÂä°Âô®ÔºåÊàë‰ª¨Á°Æ‰øùWALÂ∞ÜÂú®ÊÅ¢Â§çÊó∂ÈáçÊí≠ÔºåÂ∞ÜÁ¥¢ÂºïÊõ¥Êñ∞ÈáçÊí≠Âà∞Áõ∏Â∫îÁöÑË°®‰∏≠„ÄÇËøôÁ°Æ‰øù‰∫Ü‰∫åÁ∫ßÁ¥¢ÂºïÂú®Áü•ÈÅìÊó†ÊïàÁä∂ÊÄÅÊó∂‰∏ç‰ºöÁªßÁª≠‰ΩøÁî®„ÄÇ</li>
</ul>
</li>
</ul>
<h4 id="Á¶ÅÊ≠¢Ë°®ÂÜôÂÖ•ÔºåÁõ¥Âà∞ÂèØÂèòÁöÑÁ¥¢ÂºïÊòØ‰∏ÄËá¥ÁöÑ"><a href="#Á¶ÅÊ≠¢Ë°®ÂÜôÂÖ•ÔºåÁõ¥Âà∞ÂèØÂèòÁöÑÁ¥¢ÂºïÊòØ‰∏ÄËá¥ÁöÑ" class="headerlink" title="Á¶ÅÊ≠¢Ë°®ÂÜôÂÖ•ÔºåÁõ¥Âà∞ÂèØÂèòÁöÑÁ¥¢ÂºïÊòØ‰∏ÄËá¥ÁöÑ"></a>Á¶ÅÊ≠¢Ë°®ÂÜôÂÖ•ÔºåÁõ¥Âà∞ÂèØÂèòÁöÑÁ¥¢ÂºïÊòØ‰∏ÄËá¥ÁöÑ</h4><p>Âú®Èùû‰∫ãÂä°ÊÄßË°®ÂíåÁ¥¢Âºï‰πãÈó¥‰øùÊåÅ‰∏ÄËá¥ÊÄßÁöÑÊúÄÈ´òÁ∫ßÂà´ÊòØÂ£∞ÊòéÂú®Êõ¥Êñ∞Á¥¢ÂºïÂ§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÂ∫îÊöÇÊó∂Á¶ÅÊ≠¢ÂÜôÂÖ•Êï∞ÊçÆË°®„ÄÇÂú®Ê≠§‰∏ÄËá¥ÊÄßÊ®°Âºè‰∏ãÔºåË°®ÂíåÁ¥¢ÂºïÂ∞Ü‰øùÁïôÂú®ÂèëÁîüÊïÖÈöú‰πãÂâçÁöÑÊó∂Èó¥Êà≥ÔºåÂÜôÂÖ•Êï∞ÊçÆË°®Â∞ÜË¢´Á¶ÅÊ≠¢ÔºåÁõ¥Âà∞Á¥¢ÂºïÈáçÊñ∞ËÅîÊú∫Âπ∂‰∏éÊï∞ÊçÆË°®ÂêåÊ≠•„ÄÇËØ•Á¥¢ÂºïÂ∞Ü‰øùÊåÅÊ¥ªÂä®Áä∂ÊÄÅÔºåÂπ∂ÂÉèÂæÄÂ∏∏‰∏ÄÊ†∑ÁªßÁª≠‰ΩøÁî®Êü•ËØ¢„ÄÇ</p>
<p>‰ª•‰∏ãÊúçÂä°Âô®Á´ØÈÖçÁΩÆÊéßÂà∂Ê≠§Ë°å‰∏∫Ôºö</p>
<ul>
<li>phoenix.index.failure.block.writeÂøÖÈ°ª‰∏∫trueÔºå‰ª•‰æøÂú®ÂèëÁîüÊèê‰∫§Â§±Ë¥•Êó∂ÂÜôÂÖ•Êï∞ÊçÆË°®‰ª•Â§±Ë¥•ÔºåÁõ¥Âà∞ÂèØ‰ª•‰ΩøÁî®Êï∞ÊçÆË°®ËøΩ‰∏äÁ¥¢Âºï„ÄÇ</li>
<li>phoenix.index.failure.handling.rebuildÂøÖÈ°ª‰∏∫trueÔºàÈªòËÆ§ÂÄºÔºâÔºå‰ª•‰æøÂú®ÂèëÁîüÊèê‰∫§Â§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÂú®ÂêéÂè∞ÈáçÂª∫ÂèØÂèòÁ¥¢Âºï„ÄÇ</li>
</ul>
<h4 id="ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÁõ¥Âà∞‰∏ÄËá¥ÊÄßÊÅ¢Â§ç"><a href="#ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÁõ¥Âà∞‰∏ÄËá¥ÊÄßÊÅ¢Â§ç" class="headerlink" title="ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÁõ¥Âà∞‰∏ÄËá¥ÊÄßÊÅ¢Â§ç"></a>ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÁõ¥Âà∞‰∏ÄËá¥ÊÄßÊÅ¢Â§ç</h4><p>Â¶ÇÊûúÂú®Êèê‰∫§Êó∂ÂÜôÂÖ•Â§±Ë¥•ÔºåÂÖ∑ÊúâÂèØÂèòÁ¥¢ÂºïÁöÑÈªòËÆ§Ë°å‰∏∫ÊòØÂ∞ÜÁ¥¢ÂºïÊ†áËÆ∞‰∏∫Á¶ÅÁî®,Âú®ÂêéÂè∞ÈÉ®ÂàÜÈáçÂª∫ÂÆÉ‰ª¨ÔºåÁÑ∂ÂêéÂú®ÊÅ¢Â§ç‰∏ÄËá¥ÊÄßÊó∂ÂÜçÊ¨°Â∞ÜÂÖ∂Ê†áËÆ∞‰∏∫Ê¥ªÂä®Áä∂ÊÄÅ„ÄÇÂú®ËøôÁßç‰∏ÄËá¥ÊÄßÊ®°Âºè‰∏ãÔºåÂú®ÈáçÂª∫‰∫åÁ∫ßÁ¥¢ÂºïÊó∂ÔºåÂÜôÂÖ•Êï∞ÊçÆË°®‰∏ç‰ºöË¢´ÈòªÂ°û„ÄÇ‰ΩÜÊòØÔºåÂú®ÈáçÂª∫ËøáÁ®ã‰∏≠Ôºå‰∫åÁ∫ßÁ¥¢Âºï‰∏ç‰ºöË¢´Êü•ËØ¢‰ΩøÁî®„ÄÇ</p>
<p>‰ª•‰∏ãÊúçÂä°Âô®Á´ØÈÖçÁΩÆÊéßÂà∂Ê≠§Ë°å‰∏∫Ôºö</p>
<ul>
<li>phoenix.index.failure.handling.rebuildÂøÖÈ°ª‰∏∫trueÔºàÁº∫ÁúÅÂÄºÔºâÔºå‰ª•‰æøÂú®ÂèëÁîüÊèê‰∫§Â§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÂú®ÂêéÂè∞ÈáçÂª∫ÂèØÂèòÁ¥¢Âºï„ÄÇ</li>
<li>phoenix.index.failure.handling.rebuild.intervalÊéßÂà∂ÊúçÂä°Âô®Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÈÉ®ÂàÜÈáçÂª∫ÂèØÂèòÁ¥¢Âºï‰ª•Ëµ∂‰∏äÊï∞ÊçÆË°®Êõ¥Êñ∞ÁöÑÊØ´ÁßíÈ¢ëÁéá„ÄÇÈªòËÆ§ÂÄºÊòØ10000Êàñ10Áßí„ÄÇ</li>
<li>phoenix.index.failure.handling.rebuild.overlap.timeÊéßÂà∂ÊâßË°åÈÉ®ÂàÜÈáçÂª∫Êó∂‰ªéÂèëÁîüÊïÖÈöúÁöÑÊó∂Èó¥Êà≥ÂºÄÂßãËøîÂõûÁöÑÊØ´ÁßíÊï∞„ÄÇÈªòËÆ§ÂÄºÊòØ1„ÄÇ</li>
</ul>
<h4 id="ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÈúÄË¶ÅÊâãÂä®ÈáçÂª∫"><a href="#ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÈúÄË¶ÅÊâãÂä®ÈáçÂª∫" class="headerlink" title="ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÈúÄË¶ÅÊâãÂä®ÈáçÂª∫"></a>ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÈúÄË¶ÅÊâãÂä®ÈáçÂª∫</h4><p>ËøôÊòØÂèØÂèò‰∫åÁ∫ßÁ¥¢ÂºïÁöÑÊúÄ‰Ωé‰∏ÄËá¥ÊÄßÊ∞¥Âπ≥„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂΩìÂÜôÂÖ•‰∫åÁ∫ßÁ¥¢ÂºïÂ§±Ë¥•Êó∂ÔºåÁ¥¢ÂºïÂ∞ÜË¢´Ê†áËÆ∞‰∏∫Á¶ÅÁî®ÔºåÂπ∂‰∏îÊâãÂä®ÈáçÂª∫ÊâÄÈúÄÁöÑÁ¥¢Âºï‰ª•‰ΩøÂÖ∂ÂÜçÊ¨°Ë¢´Êü•ËØ¢‰ΩøÁî®„ÄÇ</p>
<p>‰ª•‰∏ãÊúçÂä°Âô®Á´ØÈÖçÁΩÆÊéßÂà∂Ê≠§Ë°å‰∏∫Ôºö</p>
<ul>
<li>Â¶ÇÊûúÊèê‰∫§Â§±Ë¥•Ôºåphoenix.index.failure.handling.rebuildÂøÖÈ°ªËÆæÁΩÆ‰∏∫falseÔºå‰ª•Á¶ÅÊ≠¢Âú®ÂêéÂè∞ÈáçÂª∫ÂèØÂèòÁ¥¢Âºï„ÄÇ</li>
</ul>
<div class="note info"><h2 id="Setup-ËÆæÁΩÆ"><a href="#Setup-ËÆæÁΩÆ" class="headerlink" title="Setup ËÆæÁΩÆ"></a>Setup ËÆæÁΩÆ</h2></div>
<p>Èùû‰∫ãÂä°ÊÄßÔºåÂèØÂèòÁ¥¢ÂºïÈúÄË¶ÅÂú®Âå∫ÂüüÊúçÂä°Âô®Âíå‰∏ªÊúçÂä°Âô®‰∏äËøêË°åÁâπÊÆäÁöÑÈÖçÁΩÆÈÄâÈ°π - PhoenixÁ°Æ‰øùÂú®Ë°®‰∏äÂêØÁî®ÂèØÂèòÁ¥¢ÂºïÊó∂ÔºåÂÆÉ‰ª¨Â∑≤Ê≠£Á°ÆËÆæÁΩÆ;Â¶ÇÊûúÊú™ËÆæÁΩÆÊ≠£Á°ÆÁöÑÂ±ûÊÄßÔºåÂàôÂ∞ÜÊó†Ê≥ï‰ΩøÁî®ËæÖÂä©Á¥¢Âºï„ÄÇÂ∞ÜËøô‰∫õËÆæÁΩÆÊ∑ªÂä†Âà∞ÊÇ®ÁöÑhbase-site.xmlÂêéÔºåÊÇ®ÈúÄË¶ÅÈáçÂêØÈõÜÁæ§„ÄÇ</p>
<p>ÊÇ®Â∞ÜÈúÄË¶ÅÂ∞Ü‰ª•‰∏ãÂèÇÊï∞Ê∑ªÂä†Âà∞ÊØè‰∏™Âå∫ÂüüÊúçÂä°Âô®‰∏äÁöÑhbase-site.xmlÔºö<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.regionserver.wal.codec<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hbase.regionserver.wal.IndexedWALEditCodec<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>‰∏äÈù¢ÁöÑÂ±ûÊÄß‰ΩøÂÆöÂà∂ÁöÑWALÁºñËæëËÉΩÂ§üË¢´ÂÜôÂÖ•ÔºåÁ°Æ‰øùÁ¥¢ÂºïÊõ¥Êñ∞ÁöÑÊ≠£Á°ÆÂÜôÂÖ•/ÈáçÊí≠„ÄÇËøô‰∏™ÁºñËß£Á†ÅÂô®ÊîØÊåÅÈÄöÂ∏∏ÁöÑ‰∏ªÊú∫WALEditÈÄâÈ°πÔºåÊúÄÊòæÁùÄÁöÑÊòØWALEditÂéãÁº©„ÄÇ<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.region.server.rpc.scheduler.factory.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hbase.ipc.PhoenixRpcSchedulerFactory<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Factory to create the Phoenix RPC Scheduler that uses separate queues for index and metadata updates<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rpc.controllerfactory.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hbase.ipc.controller.ServerRpcControllerFactory<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">description</span>&gt;</span>Factory to create the Phoenix RPC Scheduler that uses separate queues for index and metadata updates<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>ÈÄöËøáÁ°Æ‰øùÁ¥¢ÂºïÊõ¥Êñ∞ÁöÑ‰ºòÂÖàÁ∫ßÈ´ò‰∫éÊï∞ÊçÆÊõ¥Êñ∞Ôºå‰∏äËø∞Â±ûÊÄßÂèØÈò≤Ê≠¢Âú®ÂÖ®Â±ÄÁ¥¢ÂºïÔºàHBase 0.98.4+ÂíåPhoenix 4.3.1+ÔºâÁöÑÁ¥¢ÂºïÁª¥Êä§ËøáÁ®ã‰∏≠ÂèëÁîüÊ≠ªÈîÅ„ÄÇÂÆÉËøòÈÄöËøáÁ°Æ‰øùÂÖÉÊï∞ÊçÆrpcË∞ÉÁî®ÊØîÊï∞ÊçÆrpcË∞ÉÁî®ÂÖ∑ÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ßÊù•Èò≤Ê≠¢Ê≠ªÈîÅ„ÄÇ</p>
<p>‰ªéPhoenix 4.8.0ÂºÄÂßãÔºå‰∏çÈúÄË¶ÅÊõ¥ÊîπÈÖçÁΩÆÂ∞±ÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Á¥¢Âºï„ÄÇÂú®Phoenix 4.7ÂèäÊõ¥‰ΩéÁâàÊú¨‰∏≠Ôºå‰∏ªÊúçÂä°Âô®ËäÇÁÇπÂíåÂå∫ÂüüÊúçÂä°Âô®ËäÇÁÇπ‰∏äÁöÑÊúçÂä°Âô®Á´Øhbase-site.xmlÈúÄË¶ÅËøõË°å‰ª•‰∏ãÈÖçÁΩÆÊõ¥ÊîπÔºö<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.master.loadbalancer.class<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.phoenix.hbase.index.balancer.IndexLoadBalancer<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.coprocessor.master.classes<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.phoenix.hbase.index.master.IndexMasterObserver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.coprocessor.regionserver.classes<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hbase.regionserver.LocalIndexMerger<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="ÂçáÁ∫ß4-8-0‰πãÂâçÂàõÂª∫ÁöÑÊú¨Âú∞Á¥¢Âºï"><a href="#ÂçáÁ∫ß4-8-0‰πãÂâçÂàõÂª∫ÁöÑÊú¨Âú∞Á¥¢Âºï" class="headerlink" title="ÂçáÁ∫ß4.8.0‰πãÂâçÂàõÂª∫ÁöÑÊú¨Âú∞Á¥¢Âºï"></a>ÂçáÁ∫ß4.8.0‰πãÂâçÂàõÂª∫ÁöÑÊú¨Âú∞Á¥¢Âºï</h3><p>Âú®ÊúçÂä°Âô®‰∏äÂ∞ÜPhoenixÂçáÁ∫ßÂà∞4.8.0‰ª•‰∏äÁâàÊú¨Êó∂ÔºåÂ¶ÇÊûúÂ≠òÂú®ÔºåËØ∑‰ªéhbase-site.xml‰∏≠Èô§Âéª‰ª•‰∏ä‰∏â‰∏™‰∏éÊú¨Âú∞Á¥¢ÂºïÁõ∏ÂÖ≥ÁöÑÈÖçÁΩÆ„ÄÇ‰ªéÂÆ¢Êà∑Á´ØÔºåÊàë‰ª¨ÊîØÊåÅÂú®Á∫øÔºàÂú®ÂàùÂßãÂåñÊù•Ëá™4.8.0+ÁâàÊú¨ÁöÑphoenixÂÆ¢Êà∑Á´ØÁöÑËøûÊé•Êó∂ÔºâÂíåÁ¶ªÁ∫øÔºà‰ΩøÁî®psqlÂ∑•ÂÖ∑ÔºâÂú®4.8.0‰πãÂâçÂàõÂª∫ÁöÑÊú¨Âú∞Á¥¢ÂºïÁöÑÂçáÁ∫ß„ÄÇ‰Ωú‰∏∫ÂçáÁ∫ßÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÊàë‰ª¨‰ª•ASYNCÊ®°ÂºèÈáçÊñ∞ÂàõÂª∫Êú¨Âú∞Á¥¢Âºï„ÄÇÂçáÁ∫ßÂêéÁî®Êà∑ÈúÄË¶Å‰ΩøÁî®IndexToolÂª∫Á´ãÁ¥¢Âºï„ÄÇ</p>
<p>Âú®ÂçáÁ∫ß‰πãÂêé‰ΩøÁî®ÂÆ¢Êà∑Á´ØÈÖçÁΩÆ„ÄÇ</p>
<ol>
<li>phoenix.client.localIndexUpgrade<ul>
<li>ÂÄº‰∏∫ true ÂàôË°®Á§∫Âú®Á∫øÂçáÁ∫ß, false Ë°®Á§∫Á¶ªÁ∫øÂçáÁ∫ß„ÄÇ</li>
<li>ÈªòËÆ§‰∏∫ true „ÄÇ</li>
</ul>
</li>
</ol>
<p>ÂëΩ‰ª§‰ΩøÁî®psqlÂ∑•ÂÖ∑$ psql [zookeeper] -lËøêË°åÁ¶ªÁ∫øÂçáÁ∫ß„ÄÇ</p>
<div class="note info"><h2 id="Tuning"><a href="#Tuning" class="headerlink" title="Tuning"></a>Tuning</h2></div>
<p>Á¥¢ÂºïÊòØÁõ∏ÂΩìÂø´ÁöÑ„ÄÇ‰ΩÜÊòØÔºåË¶Å‰ºòÂåñÊÇ®ÁöÑÁâπÂÆöÁéØÂ¢ÉÂíåÂ∑•‰ΩúË¥üËΩΩÔºåÂèØ‰ª•Ë∞ÉÊï¥‰∏Ä‰∫õÂ±ûÊÄß„ÄÇ</p>
<p>‰ª•‰∏ãÊâÄÊúâÂèÇÊï∞ÂøÖÈ°ªÂú®hbase-site.xml‰∏≠ËÆæÁΩÆ - ÂØπ‰∫éÊï¥‰∏™ÈõÜÁæ§ÂíåÊâÄÊúâÁ¥¢ÂºïË°®Ôºå‰ª•ÂèäÂú®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÁöÑÊâÄÊúâÂå∫Âüü‰∏äÈÉΩÊòØÂ¶ÇÊ≠§Ôºà‰æãÂ¶ÇÔºå‰∏ÄÂè∞ÊúçÂä°Âô®‰πü‰∏ç‰ºö‰∏ÄÊ¨°ÂÜôÂÖ•ËÆ∏Â§ö‰∏çÂêåÁöÑÁ¥¢ÂºïË°®Ôºâ„ÄÇ</p>
<ol>
<li>index.builder.threads.max<ul>
<li>Áî®‰∫é‰ªé‰∏ªË°®Êõ¥Êñ∞ÊûÑÂª∫Á¥¢ÂºïÊõ¥Êñ∞ÁöÑÁ∫øÁ®ãÊï∞</li>
<li>Â¢ûÂä†Ê≠§ÂÄºÂÖãÊúç‰∫Ü‰ªéÂ∫ïÂ±ÇHRegionËØªÂèñÂΩìÂâçË°åÁä∂ÊÄÅÁöÑÁì∂È¢à„ÄÇË∞ÉÊï¥Ëøô‰∏™ÂÄºÂ§™È´òÔºåÂè™‰ºöÂ¢ûÂä†HRegionÁì∂È¢àÔºåÂõ†‰∏∫ÂÆÉÂ∞ÜÊó†Ê≥ïÂ§ÑÁêÜÂ§™Â§öÁöÑÂπ∂ÂèëÊâ´ÊèèËØ∑Ê±ÇÔºå‰ª•Âèä‰∏ÄËà¨ÁöÑÁ∫øÁ®ã‰∫§Êç¢ÈóÆÈ¢ò„ÄÇ</li>
<li>Default: 10</li>
</ul>
</li>
<li>index.builder.threads.keepalivetime<ul>
<li>Âú®ÊûÑÂª∫Âô®Á∫øÁ®ãÊ±†‰∏≠‰ΩøÁ∫øÁ®ãËøáÊúüÂêéÁöÑÊó∂Èó¥Ôºà‰ª•Áßí‰∏∫Âçï‰ΩçÔºâ„ÄÇ</li>
<li>Êú™‰ΩøÁî®ÁöÑÁ∫øÁ®ã‰ºöÂú®ËøôÊÆµÊó∂Èó¥ÂêéÁ´ãÂç≥ÈáäÊîæÔºåËÄå‰∏ç‰ºö‰øùÁïôÊ†∏ÂøÉÁ∫øÁ®ã</li>
<li>Default: 60</li>
</ul>
</li>
<li>index.writer.threads.max<ul>
<li>Number of threads to use when writing to the target index tables.</li>
<li>The first level of parallelization, on a per-table basis - it should roughly correspond to the number of index tables</li>
<li>Default: 10</li>
</ul>
</li>
<li>index.writer.threads.keepalivetime<ul>
<li>Amount of time in seconds after we expire threads in the writer thread pool.</li>
<li>Unused threads are immediately released after this amount of time and not core threads are retained (though this last is a small concern as tables are expected to sustain a fairly constant write load), but simultaneously allows us to drop threads if we are not seeing the expected load.</li>
<li>Default: 60</li>
</ul>
</li>
<li>hbase.htable.threads.max<ul>
<li>Number of threads each index HTable can use for writes.</li>
<li>Increasing this allows more concurrent index updates (for instance across batches), leading to high overall throughput.</li>
<li>Default: 2,147,483,647</li>
</ul>
</li>
<li>hbase.htable.threads.keepalivetime<ul>
<li>Amount of time in seconds after we expire threads in the HTable‚Äôs thread pool.</li>
<li>Using the ‚Äúdirect handoff‚Äù approach, new threads will only be created if it is necessary and will grow unbounded. This could be bad but HTables only create as many Runnables as there are region servers; therefore, it also scales when new region servers are added.</li>
<li>Default: 60</li>
</ul>
</li>
<li>index.tablefactory.cache.size<ul>
<li>Number of index HTables we should keep in cache.</li>
<li>Increasing this number ensures that we do not need to recreate an HTable for each attempt to write to an index table. Conversely, you could see memory pressure if this value is set too high.</li>
<li>Default: 10</li>
</ul>
</li>
<li>org.apache.phoenix.regionserver.index.priority.min<ul>
<li>Value to specify to bottom (inclusive) of the range in which index priority may lie.</li>
<li>Default: 1000</li>
</ul>
</li>
<li>org.apache.phoenix.regionserver.index.priority.max<ul>
<li>Value to specify to top (exclusive) of the range in which index priority may lie.</li>
<li>Higher priorites within the index min/max range do not means updates are processed sooner.</li>
<li>Default: 1050</li>
</ul>
</li>
<li>org.apache.phoenix.regionserver.index.handler.count<ul>
<li>Number of threads to use when serving index write requests for global index maintenance.</li>
<li>Though the actual number of threads is dictated by the Max(number of call queues, handler count), where the number of call queues is determined by standard HBase configuration. To further tune the queues, you can adjust the standard rpc queue length parameters (currently, there are no special knobs for the index queues), specifically ipc.server.max.callqueue.length and ipc.server.callqueue.handler.factor. See the HBase Reference Guide for more details.</li>
<li>Default: 30</li>
</ul>
</li>
</ol>
<div class="note info"><h2 id="Performance"><a href="#Performance" class="headerlink" title="Performance"></a>Performance</h2></div>   
<p>We track secondary index performance via our performance framework. This is a generic test of performance based on defaults - your results will vary based on hardware specs as well as you individual configuration.</p>
<p>That said, we have seen secondary indexing (both immutable and mutable) go as quickly as &lt; 2x the regular write path on a small, (3 node) desktop-based cluster. This is actually pretty reasonable as we have to write to multiple tables as well as build the index update.</p>
<div class="note info"><h2 id="Index-Scrutiny-Tool"><a href="#Index-Scrutiny-Tool" class="headerlink" title="Index Scrutiny Tool"></a>Index Scrutiny Tool</h2></div>
<p>With Phoenix 4.12, there is now a tool to run a MapReduce job to verify that an index table is valid against its data table. The only way to find orphaned rows in either table is to scan over all rows in the table and do a lookup in the other table for the corresponding row. For that reason, the tool can run with either the data or index table as the ‚Äúsource‚Äù table, and the other as the ‚Äútarget‚Äù table. The tool writes all invalid rows it finds either to file or to an output table PHOENIX_INDEX_SCRUTINY. An invalid row is a source row that either has no corresponding row in the target table, or has an incorrect value in the target table (i.e. covered column value).</p>
<p>The tool has job counters that track its status. VALID_ROW_COUNT, INVALID_ROW_COUNT, BAD_COVERED_COL_VAL_COUNT. Note that invalid rows - bad col val rows = number of orphaned rows. These counters are written to the table PHOENIX_INDEX_SCRUTINY_METADATA, along with other job metadata.</p>
<p>The Index Scrutiny Tool can be launched via the hbase command (in hbase/bin) as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hbase org.apache.phoenix.mapreduce.index.IndexScrutinyTool -dt my_table -it my_index -o</span><br></pre></td></tr></table></figure>
<p>It can also be run from Hadoop using either the phoenix-core or phoenix-server jar as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HADOOP_CLASSPATH=$(hbase mapredcp) hadoop jar phoenix-&lt;version&gt;-server.jar org.apache.phoenix.mapreduce.index.IndexScrutinyTool -dt my_table -it my_index -o</span><br></pre></td></tr></table></figure>
<p>By default two mapreduce jobs are launched, one with the data table as the source table and one with the index table as the source table.</p>
<p>The following parameters can be used with the Index Scrutiny Tool:</p>
<p>ÁøªËØëËá™:<a href="http://phoenix.apache.org/secondary_indexing.html" target="_blank" rel="noopener">secondary_indexing</a></p>
]]></content>
      
        <categories>
            
            <category> phoenix </category>
            
        </categories>
        
        
        <tags>
            
            <tag> phoenix </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Google Bigtable ‰∏≠ÊñáÁâà]]></title>
      <url>https://stanxia.github.io/2017/12/25/Google-Bigtable-%E4%B8%AD%E6%96%87%E7%89%88/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÊëòË¶Å"><a href="#ÊëòË¶Å" class="headerlink" title="ÊëòË¶Å"></a>ÊëòË¶Å</h2></div>
<p>Bigtable ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÁªìÊûÑÂåñÊï∞ÊçÆÂ≠òÂÇ®Á≥ªÁªüÔºåÂÆÉË¢´ËÆæËÆ°Áî®Êù•Â§ÑÁêÜÊµ∑ÈáèÊï∞ÊçÆ:ÈÄöÂ∏∏ÊòØÂàÜÂ∏ÉÂú®Êï∞ÂçÉÂè∞ÊôÆÈÄöÊúçÂä°Âô®‰∏äÁöÑ PB Á∫ßÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>Google ÁöÑÂæàÂ§öÈ°πÁõÆ‰ΩøÁî® Bigtable Â≠òÂÇ®Êï∞ÊçÆÔºåÂåÖÊã¨ Web Á¥¢Âºï„ÄÅGoogle Earth„ÄÅGoogle Finance„ÄÇËøô‰∫õÂ∫îÁî®ÂØπ Bigtable ÊèêÂá∫ÁöÑË¶ÅÊ±ÇÂ∑ÆÂºÇÈùûÂ∏∏Â§ßÔºåÊó†ËÆ∫ÊòØÂú®Êï∞ÊçÆÈáè‰∏ä(‰ªé URL Âà∞ÁΩëÈ°µÂà∞Âç´ÊòüÂõæÂÉè)ËøòÊòØÂú®ÂìçÂ∫îÈÄüÂ∫¶‰∏ä(‰ªéÂêéÁ´ØÁöÑÊâπÈáèÂ§ÑÁêÜÂà∞ÂÆûÊó∂Êï∞ÊçÆÊúçÂä°)„ÄÇÂ∞ΩÁÆ°Â∫îÁî®ÈúÄÊ±ÇÂ∑ÆÂºÇÂæàÂ§ßÔºå‰ΩÜÊòØÔºåÈíàÂØπ Google ÁöÑËøô‰∫õ‰∫ßÂìÅÔºåBigtable ËøòÊòØÊàêÂäüÁöÑÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÁÅµÊ¥ªÁöÑ„ÄÅÈ´òÊÄßËÉΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>Êú¨ËÆ∫ÊñáÊèèËø∞‰∫Ü Bigtable Êèê‰æõÁöÑÁÆÄÂçïÁöÑÊï∞ÊçÆÊ®°Âûã„ÄÇÂà©Áî®Ëøô‰∏™Ê®°ÂûãÔºåÁî®Êà∑ÂèØ‰ª•Âä®ÊÄÅÁöÑÊéßÂà∂Êï∞ÊçÆÁöÑÂàÜÂ∏ÉÂíåÊ†ºÂºè„ÄÇ Êàë‰ª¨ËøòÂ∞ÜÊèèËø∞ Bigtable ÁöÑËÆæËÆ°ÂíåÂÆûÁé∞„ÄÇ<br><a id="more"></a><br><div class="note info"><h2 id="‰ªãÁªç"><a href="#‰ªãÁªç" class="headerlink" title="‰ªãÁªç"></a>‰ªãÁªç</h2></div><br>Âú®ËøáÂéª‰∏§Âπ¥ÂçäÊó∂Èó¥ÈáåÔºåÊàë‰ª¨ËÆæËÆ°„ÄÅÂÆûÁé∞Âπ∂ÈÉ®ÁΩ≤‰∫Ü‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÁªìÊûÑÂåñÊï∞ÊçÆÂ≠òÂÇ®Á≥ªÁªü ‚Äî Âú® GoogleÔºåÊàë‰ª¨Áß∞‰πã‰∏∫ Bigtable„ÄÇBigtable ÁöÑËÆæËÆ°ÁõÆÁöÑÊòØÂèØÈù†ÁöÑÂ§ÑÁêÜ PB Á∫ßÂà´ÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏îËÉΩÂ§üÈÉ®ÁΩ≤Âà∞‰∏äÂçÉÂè∞Êú∫Âô®‰∏ä„ÄÇBigtable Â∑≤ÁªèÂÆûÁé∞‰∫Ü‰∏ãÈù¢ÁöÑÂá†‰∏™ÁõÆÊ†á:ÈÄÇÁî®ÊÄßÂπøÊ≥õ„ÄÅÂèØÊâ©Â±ï„ÄÅÈ´òÊÄßËÉΩÂíåÈ´òÂèØÁî®ÊÄß„ÄÇ</p>
<p>Bigtable Â∑≤ÁªèÂú®Ë∂ÖËøá 60 ‰∏™ Google ÁöÑ‰∫ßÂìÅÂíåÈ°πÁõÆ‰∏äÂæóÂà∞‰∫ÜÂ∫îÁî®ÔºåÂåÖÊã¨ Google Analytics„ÄÅGoogle Finance„ÄÅ Orkut„ÄÅPersonalized Search„ÄÅWritely Âíå Google Earth„ÄÇËøô‰∫õ‰∫ßÂìÅÂØπ Bigtable ÊèêÂá∫‰∫ÜËø•ÂºÇÁöÑÈúÄÊ±ÇÔºåÊúâÁöÑÈúÄË¶ÅÈ´òÂêûÂêêÈáèÁöÑÊâπÂ§ÑÁêÜÔºåÊúâÁöÑÂàôÈúÄË¶ÅÂèäÊó∂ÂìçÂ∫îÔºåÂø´ÈÄüËøîÂõûÊï∞ÊçÆÁªôÊúÄÁªàÁî®Êà∑„ÄÇÂÆÉ‰ª¨‰ΩøÁî®ÁöÑ Bigtable ÈõÜÁæ§ÁöÑÈÖçÁΩÆ‰πüÊúâÂæàÂ§ßÁöÑÂ∑ÆÂºÇÔºåÊúâÁöÑÈõÜÁæ§Âè™ÊúâÂá†Âè∞ÊúçÂä°Âô®ÔºåËÄåÊúâÁöÑÂàôÈúÄË¶Å‰∏äÂçÉÂè∞ÊúçÂä°Âô®„ÄÅÂ≠òÂÇ®Âá†Áôæ TB ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>Âú®ÂæàÂ§öÊñπÈù¢ÔºåBigtable ÂíåÊï∞ÊçÆÂ∫ìÂæàÁ±ª‰ºº:ÂÆÉ‰ΩøÁî®‰∫ÜÂæàÂ§öÊï∞ÊçÆÂ∫ìÁöÑÂÆûÁé∞Á≠ñÁï•„ÄÇÂπ∂Ë°åÊï∞ÊçÆÂ∫ìÂíåÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÂ∑≤ÁªèÂÖ∑Â§áÂèØÊâ©Â±ïÊÄßÂíåÈ´òÊÄßËÉΩÔºå‰ΩÜÊòØ Bigtable Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂíåËøô‰∫õÁ≥ªÁªüÂÆåÂÖ®‰∏çÂêåÁöÑÊé•Âè£„ÄÇBigtable ‰∏çÊîØÊåÅÂÆåÊï¥ÁöÑÂÖ≥Á≥ªÊï∞ÊçÆÊ®°Âûã;‰∏é‰πãÁõ∏ÂèçÔºåBigtable ‰∏∫ÂÆ¢Êà∑Êèê‰æõ‰∫ÜÁÆÄÂçïÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÂà©Áî®Ëøô‰∏™Ê®°ÂûãÔºåÂÆ¢Êà∑ÂèØ‰ª•Âä®ÊÄÅÊéßÂà∂Êï∞ÊçÆÁöÑÂàÜÂ∏ÉÂíåÊ†ºÂºèÔºåÁî®Êà∑‰πüÂèØ‰ª•Ëá™Â∑±Êé®ÊµãÂ∫ïÂ±ÇÂ≠òÂÇ®Êï∞ÊçÆÁöÑ‰ΩçÁΩÆÁõ∏ÂÖ≥ÊÄß„ÄÇÊï∞ÊçÆÁöÑ‰∏ãÊ†áÊòØË°åÂíåÂàóÁöÑÂêçÂ≠óÔºåÂêçÂ≠óÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇBigtable Â∞ÜÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÈÉΩËßÜ‰∏∫Â≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØ Bigtable Êú¨Ë∫´‰∏çÂéªËß£ÊûêËøô‰∫õÂ≠óÁ¨¶‰∏≤ÔºåÂÆ¢Êà∑Á®ãÂ∫èÈÄöÂ∏∏‰ºöÂú®ÊääÂêÑÁßçÁªìÊûÑÂåñÊàñËÄÖÂçäÁªìÊûÑÂåñÁöÑÊï∞ÊçÆ‰∏≤Ë°åÂåñÂà∞Ëøô‰∫õÂ≠óÁ¨¶‰∏≤Èáå„ÄÇÈÄöËøá‰ªîÁªÜÈÄâÊã©Êï∞ÊçÆÁöÑÊ®°ÂºèÔºåÂÆ¢Êà∑ÂèØ‰ª•ÊéßÂà∂Êï∞ÊçÆÁöÑ‰ΩçÁΩÆÁõ∏ÂÖ≥ÊÄß„ÄÇÊúÄÂêéÔºåÂèØ‰ª•ÈÄöËøá BigTable ÁöÑÊ®°ÂºèÂèÇÊï∞Êù•ÊéßÂà∂Êï∞ÊçÆÊòØÂ≠òÊîæÂú®ÂÜÖÂ≠ò‰∏≠ËøòÊòØÁ°¨Áõò‰∏ä„ÄÇ</p>
<p>Á¨¨ 3 ËäÇÊèèËø∞ÂÖ≥‰∫éÊï∞ÊçÆÊ®°ÂûãÊõ¥Â§öÁªÜËäÇÊñπÈù¢ÁöÑ‰∏úË•ø;</p>
<p>Á¨¨ 4 ËäÇÊ¶ÇË¶Å‰ªãÁªç‰∫ÜÂÆ¢Êà∑Á´Ø API;</p>
<p>Á¨¨ 5 ËäÇÁÆÄË¶Å‰ªãÁªç‰∫Ü BigTable Â∫ïÂ±Ç‰ΩøÁî®ÁöÑ Google ÁöÑÂü∫Á°ÄÊ°ÜÊû∂;</p>
<p>Á¨¨ 6 ËäÇÊèèËø∞‰∫Ü BigTable ÂÆûÁé∞ÁöÑÂÖ≥ÈîÆÈÉ®ÂàÜ;</p>
<p>Á¨¨ 7 ËäÇÊèèËø∞‰∫ÜÊàë‰ª¨‰∏∫‰∫ÜÊèêÈ´ò BigTable ÁöÑÊÄßËÉΩÈááÁî®ÁöÑ‰∏Ä‰∫õÁ≤æÁªÜÁöÑË∞É‰ºòÊñπÊ≥ï; </p>
<p>Á¨¨ 8 ËäÇÊèê‰æõ‰∫Ü BigTable ÁöÑÊÄßËÉΩÊï∞ÊçÆ;</p>
<p>Á¨¨ 9 ËäÇËÆ≤Ëø∞‰∫ÜÂá†‰∏™ Google ÂÜÖÈÉ®‰ΩøÁî® BigTable ÁöÑ‰æãÂ≠ê;</p>
<p>Á¨¨ 10 ËäÇÊòØÊàë‰ª¨Âú®ËÆæËÆ°ÂíåÂêéÊúüÊîØÊåÅËøáÁ®ã‰∏≠ÂæóÂà∞‰∏Ä‰∫õÁªèÈ™åÂíåÊïôËÆ≠; </p>
<p>ÊúÄÂêéÔºåÂú®Á¨¨ 11 ËäÇÂàóÂá∫Êàë‰ª¨ÁöÑÁõ∏ÂÖ≥Á†îÁ©∂Â∑•‰ΩúÔºåÁ¨¨ 12 ËäÇÊòØÊàë‰ª¨ÁöÑÁªìËÆ∫„ÄÇ<br><div class="note info"><h2 id="Êï∞ÊçÆÊ®°Âûã"><a href="#Êï∞ÊçÆÊ®°Âûã" class="headerlink" title="Êï∞ÊçÆÊ®°Âûã"></a>Êï∞ÊçÆÊ®°Âûã</h2></div><br>Bigtable ÊòØ‰∏Ä‰∏™Á®ÄÁñèÁöÑ„ÄÅÂàÜÂ∏ÉÂºèÁöÑ„ÄÅÊåÅ‰πÖÂåñÂ≠òÂÇ®ÁöÑÂ§öÁª¥Â∫¶ÊéíÂ∫è Map„ÄÇMap ÁöÑÁ¥¢ÂºïÊòØË°åÂÖ≥ÈîÆÂ≠ó„ÄÅÂàóÂÖ≥ÈîÆÂ≠ó‰ª•ÂèäÊó∂Èó¥Êà≥;Map ‰∏≠ÁöÑÊØè‰∏™ value ÈÉΩÊòØ‰∏Ä‰∏™Êú™ÁªèËß£ÊûêÁöÑ byte Êï∞ÁªÑ„ÄÇ<br><code>(row:string, column:string,time:int64)-&gt;string</code><br>Êàë‰ª¨Âú®‰ªîÁªÜÂàÜÊûê‰∫Ü‰∏Ä‰∏™Á±ª‰ºº Bigtable ÁöÑÁ≥ªÁªüÁöÑÁßçÁßçÊΩúÂú®Áî®ÈÄî‰πãÂêéÔºåÂÜ≥ÂÆö‰ΩøÁî®Ëøô‰∏™Êï∞ÊçÆÊ®°Âûã„ÄÇÊàë‰ª¨ÂÖà‰∏æ‰∏™ÂÖ∑‰ΩìÁöÑ‰æãÂ≠êÔºåËøô‰∏™‰æãÂ≠ê‰øÉ‰ΩøÊàë‰ª¨ÂÅö‰∫ÜÂæàÂ§öËÆæËÆ°ÂÜ≥Á≠ñ;ÂÅáËÆæÊàë‰ª¨ÊÉ≥Ë¶ÅÂ≠òÂÇ®Êµ∑ÈáèÁöÑÁΩëÈ°µÂèäÁõ∏ÂÖ≥‰ø°ÊÅØÔºåËøô‰∫õÊï∞ÊçÆÂèØ‰ª•Áî®‰∫éÂæàÂ§ö‰∏çÂêåÁöÑÈ°πÁõÆÔºåÊàë‰ª¨Âßë‰∏îÁß∞Ëøô‰∏™ÁâπÊÆäÁöÑË°®‰∏∫ Webtable„ÄÇÂú® Webtable ÈáåÔºåÊàë‰ª¨‰ΩøÁî® URL ‰Ωú‰∏∫Ë°åÂÖ≥ÈîÆÂ≠óÔºå‰ΩøÁî®ÁΩëÈ°µÁöÑÊüê‰∫õÂ±ûÊÄß‰Ωú‰∏∫ÂàóÂêçÔºåÁΩëÈ°µÁöÑÂÜÖÂÆπÂ≠òÂú®‚Äúcontents:‚ÄùÂàó‰∏≠ÔºåÂπ∂Áî®Ëé∑ÂèñËØ•ÁΩëÈ°µÁöÑÊó∂Èó¥Êà≥‰Ωú‰∏∫Ê†áËØÜ,Â¶ÇÂõæ‰∏ÄÊâÄÁ§∫„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15133933609014.jpg" alt><br>Ë°åÂêçÊòØ‰∏Ä‰∏™ÂèçÂêë URL„ÄÇcontents ÂàóÊóèÂ≠òÊîæÁöÑÊòØÁΩëÈ°µÁöÑÂÜÖÂÆπÔºåanchor ÂàóÊóèÂ≠òÊîæÂºïÁî®ËØ•ÁΩëÈ°µÁöÑÈîöÈìæÊé•ÊñáÊú¨„ÄÇ CNN ÁöÑ‰∏ªÈ°µË¢´ Sports Illustrator Âíå MY-look ÁöÑ‰∏ªÈ°µÂºïÁî®ÔºåÂõ†Ê≠§ËØ•Ë°åÂåÖÂê´‰∫ÜÂêç‰∏∫‚Äúanchor:cnnsi.com‚ÄùÂíå ‚Äúanchhor:my.look.ca‚ÄùÁöÑÂàó„ÄÇÊØè‰∏™ÈîöÈìæÊé•Âè™Êúâ‰∏Ä‰∏™ÁâàÊú¨;ËÄå contents ÂàóÂàôÊúâ‰∏â‰∏™ÁâàÊú¨ÔºåÂàÜÂà´Áî±Êó∂Èó¥Êà≥ t3Ôºåt5ÔºåÂíå t6 Ê†áËØÜ„ÄÇ </p>
<h3 id="Ë°å"><a href="#Ë°å" class="headerlink" title="Ë°å"></a>Ë°å</h3><p>Ë°®‰∏≠ÁöÑË°åÂÖ≥ÈîÆÂ≠óÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑÂ≠óÁ¨¶‰∏≤(ÁõÆÂâçÊîØÊåÅÊúÄÂ§ß 64KB ÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØÂØπÂ§ßÂ§öÊï∞Áî®Êà∑Ôºå10-100 ‰∏™Â≠ó ËäÇÂ∞±Ë∂≥Â§ü‰∫Ü)„ÄÇÂØπÂêå‰∏Ä‰∏™Ë°åÂÖ≥ÈîÆÂ≠óÁöÑËØªÊàñËÄÖÂÜôÊìç‰ΩúÈÉΩÊòØÂéüÂ≠êÁöÑ(‰∏çÁÆ°ËØªÊàñËÄÖÂÜôËøô‰∏ÄË°åÈáåÂ§öÂ∞ë‰∏™‰∏çÂêåÂàó)ÔºåËøô‰∏™ ËÆæËÆ°ÂÜ≥Á≠ñËÉΩÂ§ü‰ΩøÁî®Êà∑ÂæàÂÆπÊòìÁöÑÁêÜËß£Á®ãÂ∫èÂú®ÂØπÂêå‰∏Ä‰∏™Ë°åËøõË°åÂπ∂ÂèëÊõ¥Êñ∞Êìç‰ΩúÊó∂ÁöÑË°å‰∏∫„ÄÇ</p>
<p>Bigtable ÈÄöËøáË°åÂÖ≥ÈîÆÂ≠óÁöÑÂ≠óÂÖ∏È°∫Â∫èÊù•ÁªÑÁªáÊï∞ÊçÆ„ÄÇË°®‰∏≠ÁöÑÊØè‰∏™Ë°åÈÉΩÂèØ‰ª•Âä®ÊÄÅÂàÜÂå∫„ÄÇÊØè‰∏™ÂàÜÂå∫Âè´ÂÅö‰∏Ä‰∏™‚ÄùTablet‚ÄùÔºå Tablet ÊòØÊï∞ÊçÆÂàÜÂ∏ÉÂíåË¥üËΩΩÂùáË°°Ë∞ÉÊï¥ÁöÑÊúÄÂ∞èÂçï‰Ωç„ÄÇËøôÊ†∑ÂÅöÁöÑÁªìÊûúÊòØÔºåÂΩìÊìç‰ΩúÂè™ËØªÂèñË°å‰∏≠ÂæàÂ∞ëÂá†ÂàóÁöÑÊï∞ÊçÆÊó∂ÊïàÁéáÂæà È´òÔºåÈÄöÂ∏∏Âè™ÈúÄË¶ÅÂæàÂ∞ëÂá†Ê¨°Êú∫Âô®Èó¥ÁöÑÈÄö‰ø°Âç≥ÂèØÂÆåÊàê„ÄÇÁî®Êà∑ÂèØ‰ª•ÈÄöËøáÈÄâÊã©ÂêàÈÄÇÁöÑË°åÂÖ≥ÈîÆÂ≠óÔºåÂú®Êï∞ÊçÆËÆøÈóÆÊó∂ÊúâÊïàÂà© Áî®Êï∞ÊçÆÁöÑ‰ΩçÁΩÆÁõ∏ÂÖ≥ÊÄßÔºå‰ªéËÄåÊõ¥Â•ΩÁöÑÂà©Áî®Ëøô‰∏™ÁâπÊÄß„ÄÇ‰∏æ‰æãÊù•ËØ¥ÔºåÂú® Webtable ÈáåÔºåÈÄöËøáÂèçËΩ¨ URL ‰∏≠‰∏ªÊú∫ÂêçÁöÑÊñπ ÂºèÔºåÂèØ‰ª•ÊääÂêå‰∏Ä‰∏™ÂüüÂêç‰∏ãÁöÑÁΩëÈ°µËÅöÈõÜËµ∑Êù•ÁªÑÁªáÊàêËøûÁª≠ÁöÑË°å„ÄÇÂÖ∑‰ΩìÊù•ËØ¥ÔºåÊàë‰ª¨ÂèØ‰ª•Êää maps.google.com/index.html ÁöÑÊï∞ÊçÆÂ≠òÊîæÂú®ÂÖ≥ÈîÆÂ≠ó com.google.maps/index.html ‰∏ã„ÄÇÊääÁõ∏ÂêåÁöÑÂüü‰∏≠ÁöÑÁΩëÈ°µÂ≠òÂÇ®Âú®ËøûÁª≠ÁöÑÂå∫ÂüüÂèØ‰ª•ËÆ©Âü∫‰∫é‰∏ªÊú∫ ÂíåÂüüÂêçÁöÑÂàÜÊûêÊõ¥Âä†ÊúâÊïà„ÄÇ</p>
<h3 id="ÂàóÊóè"><a href="#ÂàóÊóè" class="headerlink" title="ÂàóÊóè"></a>ÂàóÊóè</h3><p>ÂàóÂÖ≥ÈîÆÂ≠óÁªÑÊàêÁöÑÈõÜÂêàÂè´ÂÅö‚ÄúÂàóÊóè‚ÄúÔºåÂàóÊóèÊòØËÆøÈóÆÊéßÂà∂ÁöÑÂü∫Êú¨Âçï‰Ωç„ÄÇÂ≠òÊîæÂú®Âêå‰∏ÄÂàóÊóè‰∏ãÁöÑÊâÄÊúâÊï∞ÊçÆÈÄöÂ∏∏ÈÉΩ Â±û‰∫éÂêå‰∏Ä‰∏™Á±ªÂûã(Êàë‰ª¨ÂèØ‰ª•ÊääÂêå‰∏Ä‰∏™ÂàóÊóè‰∏ãÁöÑÊï∞ÊçÆÂéãÁº©Âú®‰∏ÄËµ∑)„ÄÇÂàóÊóèÂú®‰ΩøÁî®‰πãÂâçÂøÖÈ°ªÂÖàÂàõÂª∫ÔºåÁÑ∂ÂêéÊâçËÉΩÂú®Âàó Êóè‰∏≠‰ªª‰ΩïÁöÑÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÂ≠òÊîæÊï∞ÊçÆ;ÂàóÊóèÂàõÂª∫ÂêéÔºåÂÖ∂‰∏≠ÁöÑ‰ªª‰Ωï‰∏Ä‰∏™ÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÈÉΩÂèØ‰ª•Â≠òÊîæÊï∞ÊçÆ„ÄÇÊ†πÊçÆÊàë‰ª¨ÁöÑËÆæ ËÆ°ÊÑèÂõæÔºå‰∏ÄÂº†Ë°®‰∏≠ÁöÑÂàóÊóè‰∏çËÉΩÂ§™Â§ö(ÊúÄÂ§öÂá†Áôæ‰∏™)ÔºåÂπ∂‰∏îÂàóÊóèÂú®ËøêË°åÊúüÈó¥ÂæàÂ∞ëÊîπÂèò„ÄÇ‰∏é‰πãÁõ∏ÂØπÂ∫îÁöÑÔºå‰∏ÄÂº†Ë°®ÂèØ ‰ª•ÊúâÊó†ÈôêÂ§ö‰∏™Âàó„ÄÇ</p>
<p>ÂàóÂÖ≥ÈîÆÂ≠óÁöÑÂëΩÂêçËØ≠Ê≥ïÂ¶Ç‰∏ã:ÂàóÊóè:ÈôêÂÆöËØç„ÄÇ ÂàóÊóèÁöÑÂêçÂ≠óÂøÖÈ°ªÊòØÂèØÊâìÂç∞ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËÄåÈôêÂÆöËØçÁöÑÂêçÂ≠óÂèØ‰ª•ÊòØ ‰ªªÊÑèÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÊØîÂ¶ÇÔºåWebtable Êúâ‰∏™ÂàóÊóè languageÔºålanguage ÂàóÊóèÁî®Êù•Â≠òÊîæÊí∞ÂÜôÁΩëÈ°µÁöÑËØ≠Ë®Ä„ÄÇÊàë‰ª¨Âú® language ÂàóÊóè‰∏≠Âè™‰ΩøÁî®‰∏Ä‰∏™ÂàóÂÖ≥ÈîÆÂ≠óÔºåÁî®Êù•Â≠òÊîæÊØè‰∏™ÁΩëÈ°µÁöÑËØ≠Ë®ÄÊ†áËØÜ ID„ÄÇWebtable ‰∏≠Âè¶‰∏Ä‰∏™ÊúâÁî®ÁöÑÂàóÊóèÊòØ anchor;Ëøô ‰∏™ÂàóÊóèÁöÑÊØè‰∏Ä‰∏™ÂàóÂÖ≥ÈîÆÂ≠ó‰ª£Ë°®‰∏Ä‰∏™ÈîöÈìæÊé•ÔºåÂ¶ÇÂõæ‰∏ÄÊâÄÁ§∫„ÄÇAnchor ÂàóÊóèÁöÑÈôêÂÆöËØçÊòØÂºïÁî®ËØ•ÁΩëÈ°µÁöÑÁ´ôÁÇπÂêç;Anchor ÂàóÊóèÊØèÂàóÁöÑÊï∞ÊçÆÈ°πÂ≠òÊîæÁöÑÊòØÈìæÊé•ÊñáÊú¨„ÄÇ</p>
<p>ËÆøÈóÆÊéßÂà∂„ÄÅÁ£ÅÁõòÂíåÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÁªüËÆ°ÈÉΩÊòØÂú®ÂàóÊóèÂ±ÇÈù¢ËøõË°åÁöÑ„ÄÇÂú®Êàë‰ª¨ÁöÑ Webtable ÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰∏äËø∞ÁöÑÊéßÂà∂ÊùÉ ÈôêËÉΩÂ∏ÆÂä©Êàë‰ª¨ÁÆ°ÁêÜ‰∏çÂêåÁ±ªÂûãÁöÑÂ∫îÁî®:Êàë‰ª¨ÂÖÅËÆ∏‰∏Ä‰∫õÂ∫îÁî®ÂèØ‰ª•Ê∑ªÂä†Êñ∞ÁöÑÂü∫Êú¨Êï∞ÊçÆ„ÄÅ‰∏Ä‰∫õÂ∫îÁî®ÂèØ‰ª•ËØªÂèñÂü∫Êú¨Êï∞ÊçÆ<br>Âπ∂ÂàõÂª∫ÁªßÊâøÁöÑÂàóÊóè„ÄÅ‰∏Ä‰∫õÂ∫îÁî®ÂàôÂè™ÂÖÅËÆ∏ÊµèËßàÊï∞ÊçÆ(ÁîöËá≥ÂèØËÉΩÂõ†‰∏∫ÈöêÁßÅÁöÑÂéüÂõ†‰∏çËÉΩÊµèËßàÊâÄÊúâÊï∞ÊçÆ)„ÄÇ</p>
<h3 id="Êó∂Èó¥Êà≥"><a href="#Êó∂Èó¥Êà≥" class="headerlink" title="Êó∂Èó¥Êà≥"></a>Êó∂Èó¥Êà≥</h3><p>Âú® Bigtable ‰∏≠ÔºåË°®ÁöÑÊØè‰∏Ä‰∏™Êï∞ÊçÆÈ°πÈÉΩÂèØ‰ª•ÂåÖÂê´Âêå‰∏Ä‰ªΩÊï∞ÊçÆÁöÑ‰∏çÂêåÁâàÊú¨;‰∏çÂêåÁâàÊú¨ÁöÑÊï∞ÊçÆÈÄöËøáÊó∂Èó¥Êà≥Êù•Á¥¢ Âºï„ÄÇBigtable Êó∂Èó¥Êà≥ÁöÑÁ±ªÂûãÊòØ 64 ‰ΩçÊï¥Âûã„ÄÇBigtable ÂèØ‰ª•ÁªôÊó∂Èó¥Êà≥ËµãÂÄºÔºåÁî®Êù•Ë°®Á§∫Á≤æÁ°ÆÂà∞ÊØ´ÁßíÁöÑ‚ÄúÂÆûÊó∂‚ÄùÊó∂Èó¥; Áî®Êà∑Á®ãÂ∫è‰πüÂèØ‰ª•ÁªôÊó∂Èó¥Êà≥ËµãÂÄº„ÄÇÂ¶ÇÊûúÂ∫îÁî®Á®ãÂ∫èÈúÄË¶ÅÈÅøÂÖçÊï∞ÊçÆÁâàÊú¨ÂÜ≤Á™ÅÔºåÈÇ£‰πàÂÆÉÂøÖÈ°ªËá™Â∑±ÁîüÊàêÂÖ∑ÊúâÂîØ‰∏ÄÊÄßÁöÑÊó∂ Èó¥Êà≥„ÄÇÊï∞ÊçÆÈ°π‰∏≠Ôºå‰∏çÂêåÁâàÊú¨ÁöÑÊï∞ÊçÆÊåâÁÖßÊó∂Èó¥Êà≥ÂÄíÂ∫èÊéíÂ∫èÔºåÂç≥ÊúÄÊñ∞ÁöÑÊï∞ÊçÆÊéíÂú®ÊúÄÂâçÈù¢„ÄÇ</p>
<p>‰∏∫‰∫ÜÂáèËΩªÂ§ö‰∏™ÁâàÊú¨Êï∞ÊçÆÁöÑÁÆ°ÁêÜË¥üÊãÖÔºåÊàë‰ª¨ÂØπÊØè‰∏Ä‰∏™ÂàóÊóèÈÖçÊúâ‰∏§‰∏™ËÆæÁΩÆÂèÇÊï∞ÔºåBigtable ÈÄöËøáËøô‰∏§‰∏™ÂèÇÊï∞ÂèØ‰ª• ÂØπÂ∫üÂºÉÁâàÊú¨ÁöÑÊï∞ÊçÆËá™Âä®ËøõË°åÂûÉÂúæÊî∂ÈõÜ„ÄÇÁî®Êà∑ÂèØ‰ª•ÊåáÂÆöÂè™‰øùÂ≠òÊúÄÂêé n ‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆÔºåÊàñËÄÖÂè™‰øùÂ≠ò‚ÄúË∂≥Â§üÊñ∞‚ÄùÁöÑ ÁâàÊú¨ÁöÑÊï∞ÊçÆ(ÊØîÂ¶ÇÔºåÂè™‰øùÂ≠òÊúÄËøë 7 Â§©ÁöÑÂÜÖÂÆπÂÜôÂÖ•ÁöÑÊï∞ÊçÆ)„ÄÇ</p>
<p>Âú® Webtable ÁöÑ‰∏æ‰æãÈáåÔºåcontents:ÂàóÂ≠òÂÇ®ÁöÑÊó∂Èó¥Êà≥‰ø°ÊÅØÊòØÁΩëÁªúÁà¨Ëô´ÊäìÂèñ‰∏Ä‰∏™È°µÈù¢ÁöÑÊó∂Èó¥„ÄÇ‰∏äÈù¢ÊèêÂèäÁöÑÂûÉÂúæ Êî∂ÈõÜÊú∫Âà∂ÂèØ‰ª•ËÆ©Êàë‰ª¨Âè™‰øùÁïôÊúÄËøë‰∏â‰∏™ÁâàÊú¨ÁöÑÁΩëÈ°µÊï∞ÊçÆ„ÄÇ<br><div class="note info"><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2></div><br>Bigtable Êèê‰æõ‰∫ÜÂª∫Á´ãÂíåÂà†Èô§Ë°®‰ª•ÂèäÂàóÊóèÁöÑ API ÂáΩÊï∞„ÄÇBigtable ËøòÊèê‰æõ‰∫Ü‰øÆÊîπÈõÜÁæ§„ÄÅË°®ÂíåÂàóÊóèÁöÑÂÖÉÊï∞ÊçÆÁöÑ API ÔºåÊØîÂ¶Ç‰øÆÊîπËÆøÈóÆÊùÉÈôê„ÄÇ</p>
<pre><code>// Open the table
Table *T = OpenOrDie(‚Äú/bigtable/web/webtable‚Äù); 
// Write a new anchor and delete an old anchor 
RowMutation r1(T, ‚Äúcom.cnn.www‚Äù); 
r1.Set(‚Äúanchor:www.c-span.org‚Äù, ‚ÄúCNN‚Äù); 
r1.Delete(‚Äúanchor:www.abc.com‚Äù);
Operation op;
Apply(&amp;op, &amp;r1);
</code></pre><p>ÂÆ¢Êà∑Á®ãÂ∫èÂèØ‰ª•ÂØπ Bigtable ËøõË°åÂ¶Ç‰∏ãÁöÑÊìç‰Ωú:ÂÜôÂÖ•ÊàñËÄÖÂà†Èô§ Bigtable ‰∏≠ÁöÑÂÄº„ÄÅ‰ªéÊØè‰∏™Ë°å‰∏≠Êü•ÊâæÂÄº„ÄÅÊàñËÄÖÈÅçÂéÜË°®‰∏≠ÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÂ≠êÈõÜ„ÄÇÂõæ 2 ‰∏≠ÁöÑC++‰ª£Á†Å‰ΩøÁî® RowMutation ÊäΩË±°ÂØπË±°ËøõË°å‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÊõ¥Êñ∞Êìç‰Ωú„ÄÇ(‰∏∫‰∫Ü‰øùÊåÅ Á§∫‰æã‰ª£Á†ÅÁöÑÁÆÄÊ¥ÅÔºåÊàë‰ª¨ÂøΩÁï•‰∫Ü‰∏Ä‰∫õÁªÜËäÇÁõ∏ÂÖ≥‰ª£Á†Å)„ÄÇË∞ÉÁî® Apply ÂáΩÊï∞ÂØπWebtable ËøõË°å‰∫Ü‰∏Ä‰∏™ÂéüÂ≠ê‰øÆÊîπÊìç‰Ωú:ÂÆÉ‰∏∫ <a href="http://www.cnn.com" target="_blank" rel="noopener">www.cnn.com</a> Â¢ûÂä†‰∫Ü‰∏Ä‰∏™ÈîöÁÇπÔºåÂêåÊó∂Âà†Èô§‰∫ÜÂè¶Â§ñ‰∏Ä‰∏™ÈîöÁÇπ„ÄÇ</p>
<pre><code class="python">Scanner scanner(T);
ScanStream *stream;
stream = scanner.FetchColumnFamily(‚Äúanchor‚Äù); 
stream-&gt;SetReturnAllVersions(); 
scanner.Lookup(‚Äúcom.cnn.www‚Äù);
for (; !stream-&gt;Done(); 
stream-&gt;Next()) {
printf(‚Äú%s %s %lld %s\n‚Äù, scanner.RowName(),
stream-&gt;ColumnName(), 
stream-&gt;MicroTimestamp(),
stream-&gt;Value());
}
</code></pre>
<p><center>ÂõæË°® 3 Reading from Bigtable.</center><br>Âõæ 3 ‰∏≠ÁöÑ C++‰ª£Á†Å‰ΩøÁî® Scanner ÊäΩË±°ÂØπË±°ÈÅçÂéÜ‰∏Ä‰∏™Ë°åÂÜÖÁöÑÊâÄÊúâÈîöÁÇπ„ÄÇÂÆ¢Êà∑Á®ãÂ∫èÂèØ‰ª•ÈÅçÂéÜÂ§ö‰∏™ÂàóÊóèÔºåÊúâÂá†<br>ÁßçÊñπÊ≥ïÂèØ‰ª•ÂØπÊâ´ÊèèËæìÂá∫ÁöÑË°å„ÄÅÂàóÂíåÊó∂Èó¥Êà≥ËøõË°åÈôêÂà∂„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÈôêÂà∂‰∏äÈù¢ÁöÑÊâ´ÊèèÔºåËÆ©ÂÆÉÂè™ËæìÂá∫ÈÇ£‰∫õÂåπÈÖç Ê≠£ÂàôË°®ËææÂºè*.cnn.com ÁöÑÈîöÁÇπÔºåÊàñËÄÖÈÇ£‰∫õÊó∂Èó¥Êà≥Âú®ÂΩìÂâçÊó∂Èó¥Ââç 10 Â§©ÁöÑÈîöÁÇπ„ÄÇ</p>
<p>Bigtable ËøòÊîØÊåÅ‰∏Ä‰∫õÂÖ∂ÂÆÉÁöÑÁâπÊÄßÔºåÂà©Áî®Ëøô‰∫õÁâπÊÄßÔºåÁî®Êà∑ÂèØ‰ª•ÂØπÊï∞ÊçÆËøõË°åÊõ¥Â§çÊùÇÁöÑÂ§ÑÁêÜ„ÄÇÈ¶ñÂÖàÔºåBigtable ÊîØ ÊåÅÂçïË°å‰∏äÁöÑ‰∫ãÂä°Â§ÑÁêÜÔºåÂà©Áî®Ëøô‰∏™ÂäüËÉΩÔºåÁî®Êà∑ÂèØ‰ª•ÂØπÂ≠òÂÇ®Âú®‰∏Ä‰∏™Ë°åÂÖ≥ÈîÆÂ≠ó‰∏ãÁöÑÊï∞ÊçÆËøõË°åÂéüÂ≠êÊÄßÁöÑËØª-Êõ¥Êñ∞-ÂÜôÊìç‰Ωú„ÄÇ ËôΩÁÑ∂ Bigtable Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÖÅËÆ∏Áî®Êà∑Ë∑®Ë°åÊâπÈáèÂÜôÂÖ•Êï∞ÊçÆÁöÑÊé•Âè£Ôºå‰ΩÜÊòØÔºåBigtable ÁõÆÂâçËøò‰∏çÊîØÊåÅÈÄöÁî®ÁöÑË∑®Ë°å‰∫ãÂä°Â§Ñ ÁêÜ„ÄÇÂÖ∂Ê¨°ÔºåBigtable ÂÖÅËÆ∏ÊääÊï∞ÊçÆÈ°πÁî®ÂÅöÊï¥Êï∞ËÆ°Êï∞Âô®„ÄÇÊúÄÂêéÔºåBigtable ÂÖÅËÆ∏Áî®Êà∑Âú®ÊúçÂä°Âô®ÁöÑÂú∞ÂùÄÁ©∫Èó¥ÂÜÖÊâßË°åËÑöÊú¨ Á®ãÂ∫è„ÄÇËÑöÊú¨Á®ãÂ∫è‰ΩøÁî® Google ÂºÄÂèëÁöÑ SawzallÊï∞ÊçÆÂ§ÑÁêÜËØ≠Ë®Ä„ÄÇËôΩÁÑ∂ÁõÆÂâçÊàë‰ª¨Âü∫‰∫éÁöÑ Sawzall ËØ≠Ë®ÄÁöÑ API ÂáΩÊï∞Ëøò‰∏çÂÖÅËÆ∏ÂÆ¢Êà∑ÁöÑËÑöÊú¨Á®ãÂ∫èÂÜôÂÖ•Êï∞ÊçÆÂà∞ BigtableÔºå‰ΩÜÊòØÂÆÉÂÖÅËÆ∏Â§öÁßçÂΩ¢ÂºèÁöÑÊï∞ÊçÆËΩ¨Êç¢„ÄÅÂü∫‰∫é‰ªªÊÑèË°®ËææÂºèÁöÑÊï∞ÊçÆ ËøáÊª§„ÄÅ‰ª•Âèä‰ΩøÁî®Â§öÁßçÊìç‰ΩúÁ¨¶ÁöÑËøõË°åÊï∞ÊçÆÊ±áÊÄª„ÄÇ</p>
<p>Bigtable ÂèØ‰ª•Âíå MapReduce ‰∏ÄËµ∑‰ΩøÁî®ÔºåMapReduce ÊòØ Google ÂºÄÂèëÁöÑÂ§ßËßÑÊ®°Âπ∂Ë°åËÆ°ÁÆóÊ°ÜÊû∂„ÄÇÊàë‰ª¨Â∑≤ ÁªèÂºÄÂèë‰∫Ü‰∏Ä‰∫õ Wrapper Á±ªÔºåÈÄöËøá‰ΩøÁî®Ëøô‰∫õ Wrapper Á±ªÔºåBigtable ÂèØ‰ª•‰Ωú‰∏∫ MapReduce Ê°ÜÊû∂ÁöÑËæìÂÖ•ÂíåËæìÂá∫„ÄÇ<br><div class="note info"><h2 id="BigTable-ÊûÑ‰ª∂"><a href="#BigTable-ÊûÑ‰ª∂" class="headerlink" title="BigTable ÊûÑ‰ª∂"></a>BigTable ÊûÑ‰ª∂</h2></div><br>BigtableÊòØÂª∫Á´ãÂú®ÂÖ∂ÂÆÉÁöÑÂá†‰∏™GoogleÂü∫Á°ÄÊûÑ‰ª∂‰∏äÁöÑ„ÄÇBigTable‰ΩøÁî®GoogleÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü(GFSÂ≠òÂÇ®Êó•ÂøóÊñá‰ª∂ÂíåÊï∞ÊçÆÊñá‰ª∂„ÄÇBigTable ÈõÜÁæ§ÈÄöÂ∏∏ËøêË°åÂú®‰∏Ä‰∏™ÂÖ±‰∫´ÁöÑÊú∫Âô®Ê±†‰∏≠ÔºåÊ±†‰∏≠ÁöÑÊú∫Âô®Ëøò‰ºöËøêË°åÂÖ∂ÂÆÉÁöÑÂêÑÁßçÂêÑÊ†∑ÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®Á®ãÂ∫èÔºåBigTable ÁöÑËøõÁ®ãÁªèÂ∏∏Ë¶ÅÂíåÂÖ∂ÂÆÉÂ∫îÁî®ÁöÑËøõÁ®ãÂÖ±‰∫´Êú∫Âô®„ÄÇBigTable ‰æùËµñÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüÊù•<br>Ë∞ÉÂ∫¶‰ªªÂä°„ÄÅÁÆ°ÁêÜÂÖ±‰∫´ÁöÑÊú∫Âô®‰∏äÁöÑËµÑÊ∫ê„ÄÅÂ§ÑÁêÜÊú∫Âô®ÁöÑÊïÖÈöú„ÄÅ‰ª•ÂèäÁõëËßÜÊú∫Âô®ÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<p>BigTable ÂÜÖÈÉ®Â≠òÂÇ®Êï∞ÊçÆÁöÑÊñá‰ª∂ÊòØ Google SSTable Ê†ºÂºèÁöÑ„ÄÇSSTable ÊòØ‰∏Ä‰∏™ÊåÅ‰πÖÂåñÁöÑ„ÄÅÊéíÂ∫èÁöÑ„ÄÅ‰∏çÂèØÊõ¥ÊîπÁöÑ Map ÁªìÊûÑÔºåËÄå Map ÊòØ‰∏Ä‰∏™ key-value Êò†Â∞ÑÁöÑÊï∞ÊçÆÁªìÊûÑÔºåkey Âíå value ÁöÑÂÄºÈÉΩÊòØ‰ªªÊÑèÁöÑ Byte ‰∏≤„ÄÇÂèØ‰ª•ÂØπ SSTable ËøõË°åÂ¶Ç‰∏ãÁöÑÊìç‰Ωú:Êü•ËØ¢‰∏é‰∏Ä‰∏™ key ÂÄºÁõ∏ÂÖ≥ÁöÑ valueÔºåÊàñËÄÖÈÅçÂéÜÊüê‰∏™ key ÂÄºËåÉÂõ¥ÂÜÖÁöÑÊâÄÊúâÁöÑ key-value ÂØπ„ÄÇ‰ªéÂÜÖ ÈÉ®ÁúãÔºåSSTable ÊòØ‰∏ÄÁ≥ªÂàóÁöÑÊï∞ÊçÆÂùó(ÈÄöÂ∏∏ÊØè‰∏™ÂùóÁöÑÂ§ßÂ∞èÊòØ 64KBÔºåËøô‰∏™Â§ßÂ∞èÊòØÂèØ‰ª•ÈÖçÁΩÆÁöÑ)„ÄÇSSTable ‰ΩøÁî®ÂùóÁ¥¢ Âºï(ÈÄöÂ∏∏Â≠òÂÇ®Âú® SSTable ÁöÑÊúÄÂêé)Êù•ÂÆö‰ΩçÊï∞ÊçÆÂùó;Âú®ÊâìÂºÄ SSTable ÁöÑÊó∂ÂÄôÔºåÁ¥¢ÂºïË¢´Âä†ËΩΩÂà∞ÂÜÖÂ≠ò„ÄÇÊØèÊ¨°Êü•ÊâæÈÉΩÂèØ ‰ª•ÈÄöËøá‰∏ÄÊ¨°Á£ÅÁõòÊêúÁ¥¢ÂÆåÊàê:È¶ñÂÖà‰ΩøÁî®‰∫åÂàÜÊü•ÊâæÊ≥ïÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÁ¥¢ÂºïÈáåÊâæÂà∞Êï∞ÊçÆÂùóÁöÑ‰ΩçÁΩÆÔºåÁÑ∂ÂêéÂÜç‰ªéÁ°¨ÁõòËØªÂèñÁõ∏ Â∫îÁöÑÊï∞ÊçÆÂùó„ÄÇ‰πüÂèØ‰ª•ÈÄâÊã©ÊääÊï¥‰∏™ SSTable ÈÉΩÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåËøôÊ†∑Â∞±‰∏çÂøÖËÆøÈóÆÁ°¨Áõò‰∫Ü„ÄÇ</p>
<p>BigTable Ëøò‰æùËµñ‰∏Ä‰∏™È´òÂèØÁî®ÁöÑ„ÄÅÂ∫èÂàóÂåñÁöÑÂàÜÂ∏ÉÂºèÈîÅÊúçÂä°ÁªÑ‰ª∂ÔºåÂè´ÂÅö Chubby„Äê8„Äë„ÄÇ‰∏Ä‰∏™ Chubby ÊúçÂä°ÂåÖÊã¨ ‰∫Ü 5 ‰∏™Ê¥ªÂä®ÁöÑÂâØÊú¨ÔºåÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÂâØÊú¨Ë¢´ÈÄâ‰∏∫ MasterÔºåÂπ∂‰∏îÂ§ÑÁêÜËØ∑Ê±Ç„ÄÇÂè™ÊúâÂú®Â§ßÂ§öÊï∞ÂâØÊú¨ÈÉΩÊòØÊ≠£Â∏∏ËøêË°åÁöÑÔºåÂπ∂ ‰∏îÂΩºÊ≠§‰πãÈó¥ËÉΩÂ§ü‰∫íÁõ∏ÈÄö‰ø°ÁöÑÊÉÖÂÜµ‰∏ãÔºåChubby ÊúçÂä°ÊâçÊòØÂèØÁî®ÁöÑ„ÄÇÂΩìÊúâÂâØÊú¨Â§±ÊïàÁöÑÊó∂ÂÄôÔºåChubby ‰ΩøÁî® Paxos ÁÆóÊ≥ï „Äê9,23„ÄëÊù•‰øùËØÅÂâØÊú¨ÁöÑ‰∏ÄËá¥ÊÄß„ÄÇChubby Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂêçÂ≠óÁ©∫Èó¥ÔºåÈáåÈù¢ÂåÖÊã¨‰∫ÜÁõÆÂΩïÂíåÂ∞èÊñá‰ª∂„ÄÇÊØè‰∏™ÁõÆÂΩïÊàñËÄÖÊñá‰ª∂ ÂèØ‰ª•ÂΩìÊàê‰∏Ä‰∏™ÈîÅÔºåËØªÂÜôÊñá‰ª∂ÁöÑÊìç‰ΩúÈÉΩÊòØÂéüÂ≠êÁöÑ„ÄÇChubby ÂÆ¢Êà∑Á®ãÂ∫èÂ∫ìÊèê‰æõÂØπ Chubby Êñá‰ª∂ÁöÑ‰∏ÄËá¥ÊÄßÁºìÂ≠ò„ÄÇÊØè‰∏™ Chubby ÂÆ¢Êà∑Á®ãÂ∫èÈÉΩÁª¥Êä§‰∏Ä‰∏™‰∏é Chubby ÊúçÂä°ÁöÑ‰ºöËØù„ÄÇÂ¶ÇÊûúÂÆ¢Êà∑Á®ãÂ∫è‰∏çËÉΩÂú®ÁßüÁ∫¶Âà∞ÊúüÁöÑÊó∂Èó¥ÂÜÖÈáçÊñ∞Á≠æËÆ¢‰ºöËØùÁöÑ ÁßüÁ∫¶ÔºåËøô‰∏™‰ºöËØùÂ∞±ËøáÊúüÂ§±Êïà‰∫Ü9„ÄÇÂΩì‰∏Ä‰∏™‰ºöËØùÂ§±ÊïàÊó∂ÔºåÂÆÉÊã•ÊúâÁöÑÈîÅÂíåÊâìÂºÄÁöÑÊñá‰ª∂Âè•ÊüÑÈÉΩÂ§±Êïà‰∫Ü„ÄÇChubby ÂÆ¢Êà∑ Á®ãÂ∫èÂèØ‰ª•Âú®Êñá‰ª∂ÂíåÁõÆÂΩï‰∏äÊ≥®ÂÜåÂõûË∞ÉÂáΩÊï∞ÔºåÂΩìÊñá‰ª∂ÊàñÁõÆÂΩïÊîπÂèò„ÄÅÊàñËÄÖ‰ºöËØùËøáÊúüÊó∂ÔºåÂõûË∞ÉÂáΩÊï∞‰ºöÈÄöÁü•ÂÆ¢Êà∑Á®ãÂ∫è„ÄÇ</p>
<p>Bigtable ‰ΩøÁî® Chubby ÂÆåÊàê‰ª•‰∏ãÁöÑÂá†‰∏™‰ªªÂä°:</p>
<ol>
<li>Á°Æ‰øùÂú®‰ªª‰ΩïÁªôÂÆöÁöÑÊó∂Èó¥ÂÜÖÊúÄÂ§öÂè™Êúâ‰∏Ä‰∏™Ê¥ªÂä®ÁöÑ Master ÂâØÊú¨;</li>
<li>Â≠òÂÇ® BigTable Êï∞ÊçÆÁöÑËá™ÂºïÂØºÊåá‰ª§ÁöÑ‰ΩçÁΩÆ(ÂèÇËÄÉ 5.1 ËäÇ);</li>
<li>Êü•Êâæ Tablet ÊúçÂä°Âô®Ôºå‰ª•ÂèäÂú® Tablet ÊúçÂä°Âô®Â§±ÊïàÊó∂ËøõË°åÂñÑÂêé(5.2 ËäÇ);</li>
<li>Â≠òÂÇ® BigTable ÁöÑÊ®°Âºè‰ø°ÊÅØ(ÊØèÂº†Ë°®ÁöÑÂàóÊóè‰ø°ÊÅØ);</li>
<li>‰ª•ÂèäÂ≠òÂÇ®ËÆøÈóÆÊéßÂà∂ÂàóË°®„ÄÇ</li>
</ol>
<p>Â¶ÇÊûú Chubby ÈïøÊó∂Èó¥Êó†Ê≥ïËÆøÈóÆÔºåBigTable Â∞±‰ºöÂ§±Êïà„ÄÇÊúÄËøëÊàë‰ª¨Âú®‰ΩøÁî® 11 ‰∏™ Chubby ÊúçÂä°ÂÆû‰æãÁöÑ 14 ‰∏™ BigTable<br>ÈõÜÁæ§‰∏äÊµãÈáè‰∫ÜËøô‰∏™ÂΩ±Âìç„ÄÇÁî±‰∫é Chubby ‰∏çÂèØÁî®ËÄåÂØºËá¥ BigTable ‰∏≠ÁöÑÈÉ®ÂàÜÊï∞ÊçÆ‰∏çËÉΩËÆøÈóÆÁöÑÂπ≥ÂùáÊØîÁéáÊòØ 0.0047% (Chubby ‰∏çËÉΩËÆøÈóÆÁöÑÂéüÂõ†ÂèØËÉΩÊòØ Chubby Êú¨Ë∫´Â§±ÊïàÊàñËÄÖÁΩëÁªúÈóÆÈ¢ò)„ÄÇÂçï‰∏™ÈõÜÁæ§ÈáåÔºåÂèó Chubby Â§±ÊïàÂΩ±ÂìçÊúÄÂ§ßÁöÑ ÁôæÂàÜÊØîÊòØ 0.0326%10„ÄÇ<br><div class="note info"><h2 id="‰ªãÁªç"><a href="#‰ªãÁªç" class="headerlink" title="‰ªãÁªç"></a>‰ªãÁªç</h2></div><br>Bigtable ÂåÖÊã¨‰∫Ü‰∏â‰∏™‰∏ªË¶ÅÁöÑÁªÑ‰ª∂:ÈìæÊé•Âà∞ÂÆ¢Êà∑Á®ãÂ∫è‰∏≠ÁöÑÂ∫ì„ÄÅ‰∏Ä‰∏™ Master ÊúçÂä°Âô®ÂíåÂ§ö‰∏™ Tablet ÊúçÂä°Âô®„ÄÇÈíà ÂØπÁ≥ªÁªüÂ∑•‰ΩúË¥üËΩΩÁöÑÂèòÂåñÊÉÖÂÜµÔºåBigTable ÂèØ‰ª•Âä®ÊÄÅÁöÑÂêëÈõÜÁæ§‰∏≠Ê∑ªÂä†(ÊàñËÄÖÂà†Èô§)Tablet ÊúçÂä°Âô®„ÄÇ</p>
<p>Master ÊúçÂä°Âô®‰∏ªË¶ÅË¥üË¥£‰ª•‰∏ãÂ∑•‰Ωú:‰∏∫ Tablet ÊúçÂä°Âô®ÂàÜÈÖç Tablets„ÄÅÊ£ÄÊµãÊñ∞Âä†ÂÖ•ÁöÑÊàñËÄÖËøáÊúüÂ§±ÊïàÁöÑ Table Êúç Âä°Âô®„ÄÅÂØπ Tablet ÊúçÂä°Âô®ËøõË°åË¥üËΩΩÂùáË°°„ÄÅ‰ª•ÂèäÂØπ‰øùÂ≠òÂú® GFS ‰∏äÁöÑÊñá‰ª∂ËøõË°åÂûÉÂúæÊî∂ÈõÜ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÂÆÉËøòÂ§ÑÁêÜÂØπÊ®° ÂºèÁöÑÁõ∏ÂÖ≥‰øÆÊîπÊìç‰ΩúÔºå‰æãÂ¶ÇÂª∫Á´ãË°®ÂíåÂàóÊóè„ÄÇ</p>
<p>ÊØè‰∏™ Tablet ÊúçÂä°Âô®ÈÉΩÁÆ°ÁêÜ‰∏Ä‰∏™ Tablet ÁöÑÈõÜÂêà(ÈÄöÂ∏∏ÊØè‰∏™ÊúçÂä°Âô®ÊúâÂ§ßÁ∫¶Êï∞ÂçÅ‰∏™Ëá≥‰∏äÂçÉ‰∏™ Tablet)„ÄÇÊØè‰∏™ Tablet ÊúçÂä°Âô®Ë¥üË¥£Â§ÑÁêÜÂÆÉÊâÄÂä†ËΩΩÁöÑ Tablet ÁöÑËØªÂÜôÊìç‰ΩúÔºå‰ª•ÂèäÂú® Tablets ËøáÂ§ßÊó∂ÔºåÂØπÂÖ∂ËøõË°åÂàÜÂâ≤„ÄÇ</p>
<p>ÂíåÂæàÂ§ö Single-Master Á±ªÂûãÁöÑÂàÜÂ∏ÉÂºèÂ≠òÂÇ®Á≥ªÁªü„Äê17.21„ÄëÁ±ª‰ººÔºåÂÆ¢Êà∑Á´ØËØªÂèñÁöÑÊï∞ÊçÆÈÉΩ‰∏çÁªèËøá Master ÊúçÂä°Âô®: ÂÆ¢Êà∑Á®ãÂ∫èÁõ¥Êé•Âíå Tablet ÊúçÂä°Âô®ÈÄö‰ø°ËøõË°åËØªÂÜôÊìç‰Ωú„ÄÇÁî±‰∫é BigTable ÁöÑÂÆ¢Êà∑Á®ãÂ∫è‰∏çÂøÖÈÄöËøá Master ÊúçÂä°Âô®Êù•Ëé∑Âèñ Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÔºåÂõ†Ê≠§ÔºåÂ§ßÂ§öÊï∞ÂÆ¢Êà∑Á®ãÂ∫èÁîöËá≥ÂÆåÂÖ®‰∏çÈúÄË¶ÅÂíå Master ÊúçÂä°Âô®ÈÄö‰ø°„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåMaster Êúç Âä°Âô®ÁöÑË¥üËΩΩÊòØÂæàËΩªÁöÑ„ÄÇ</p>
<p>‰∏Ä‰∏™ BigTable ÈõÜÁæ§Â≠òÂÇ®‰∫ÜÂæàÂ§öË°®ÔºåÊØè‰∏™Ë°®ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ Tablet ÁöÑÈõÜÂêàÔºåËÄåÊØè‰∏™ Tablet ÂåÖÂê´‰∫ÜÊüê‰∏™ËåÉÂõ¥ÂÜÖÁöÑ Ë°åÁöÑÊâÄÊúâÁõ∏ÂÖ≥Êï∞ÊçÆ„ÄÇÂàùÂßãÁä∂ÊÄÅ‰∏ãÔºå‰∏Ä‰∏™Ë°®Âè™Êúâ‰∏Ä‰∏™ Tablet„ÄÇÈöèÁùÄË°®‰∏≠Êï∞ÊçÆÁöÑÂ¢ûÈïøÔºåÂÆÉË¢´Ëá™Âä®ÂàÜÂâ≤ÊàêÂ§ö‰∏™ TabletÔºå Áº∫ÁúÅÊÉÖÂÜµ‰∏ãÔºåÊØè‰∏™ Tablet ÁöÑÂ∞∫ÂØ∏Â§ßÁ∫¶ÊòØ 100MB Âà∞ 200MB„ÄÇ</p>
<h3 id="Tablet-ÁöÑ‰ΩçÁΩÆ"><a href="#Tablet-ÁöÑ‰ΩçÁΩÆ" class="headerlink" title="Tablet ÁöÑ‰ΩçÁΩÆ"></a>Tablet ÁöÑ‰ΩçÁΩÆ</h3><p>Êàë‰ª¨‰ΩøÁî®‰∏Ä‰∏™‰∏âÂ±ÇÁöÑ„ÄÅÁ±ª‰ººB+Ê†ë[10]ÁöÑÁªìÊûÑÂ≠òÂÇ® Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ(Â¶ÇÂõæ 4)„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15133938470317.jpg" alt><br>Á¨¨‰∏ÄÂ±ÇÊòØ‰∏Ä‰∏™Â≠òÂÇ®Âú® Chubby ‰∏≠ÁöÑÊñá‰ª∂ÔºåÂÆÉÂåÖÂê´‰∫Ü Root Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇRoot Tablet ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÁâπÊÆä ÁöÑ METADATA Ë°®ÈáåÊâÄÊúâÁöÑ Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇMETADATA Ë°®ÁöÑÊØè‰∏™ Tablet ÂåÖÂê´‰∫Ü‰∏Ä‰∏™Áî®Êà∑ Tablet ÁöÑÈõÜÂêà„ÄÇ Root Tablet ÂÆûÈôÖ‰∏äÊòØ METADATA Ë°®ÁöÑÁ¨¨‰∏Ä‰∏™ TabletÔºåÂè™‰∏çËøáÂØπÂÆÉÁöÑÂ§ÑÁêÜÊØîËæÉÁâπÊÆä ‚Äî Root Tablet Ê∞∏Ëøú‰∏ç‰ºöË¢´ ÂàÜÂâ≤ ‚Äî ËøôÂ∞±‰øùËØÅ‰∫Ü Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÂ≠òÂÇ®ÁªìÊûÑ‰∏ç‰ºöË∂ÖËøá‰∏âÂ±Ç„ÄÇ</p>
<p>Âú® METADATA Ë°®ÈáåÈù¢ÔºåÊØè‰∏™ Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÈÉΩÂ≠òÊîæÂú®‰∏Ä‰∏™Ë°åÂÖ≥ÈîÆÂ≠ó‰∏ãÈù¢ÔºåËÄåËøô‰∏™Ë°åÂÖ≥ÈîÆÂ≠óÊòØÁî± Tablet ÊâÄÂú®ÁöÑË°®ÁöÑÊ†áËØÜÁ¨¶Âíå Tablet ÁöÑÊúÄÂêé‰∏ÄË°åÁºñÁ†ÅËÄåÊàêÁöÑ„ÄÇMETADATA ÁöÑÊØè‰∏ÄË°åÈÉΩÂ≠òÂÇ®‰∫ÜÂ§ßÁ∫¶ 1KB ÁöÑÂÜÖÂ≠òÊï∞ÊçÆ„ÄÇ Âú®‰∏Ä‰∏™Â§ßÂ∞èÈÄÇ‰∏≠ÁöÑ„ÄÅÂÆπÈáèÈôêÂà∂‰∏∫ 128MB ÁöÑ METADATA Tablet ‰∏≠ÔºåÈááÁî®ËøôÁßç‰∏âÂ±ÇÁªìÊûÑÁöÑÂ≠òÂÇ®Ê®°ÂºèÔºåÂèØ‰ª•Ê†áËØÜ 2^34 ‰∏™ Tablet ÁöÑÂú∞ÂùÄ(Â¶ÇÊûúÊØè‰∏™ Tablet Â≠òÂÇ® 128MB Êï∞ÊçÆÔºåÈÇ£‰πà‰∏ÄÂÖ±ÂèØ‰ª•Â≠òÂÇ® 2^61 Â≠óËäÇÊï∞ÊçÆ)„ÄÇ </p>
<p>ÂÆ¢Êà∑Á®ãÂ∫è‰ΩøÁî®ÁöÑÂ∫ì‰ºöÁºìÂ≠ò Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúÂÆ¢Êà∑Á®ãÂ∫èÊ≤°ÊúâÁºìÂ≠òÊüê‰∏™ Tablet ÁöÑÂú∞ÂùÄ‰ø°ÊÅØÔºåÊàñËÄÖÂèëÁé∞ ÂÆÉÁºìÂ≠òÁöÑÂú∞ÂùÄ‰ø°ÊÅØ‰∏çÊ≠£Á°ÆÔºåÂÆ¢Êà∑Á®ãÂ∫èÂ∞±Âú®Ê†ëÁä∂ÁöÑÂ≠òÂÇ®ÁªìÊûÑ‰∏≠ÈÄíÂΩíÁöÑÊü•ËØ¢ Tablet ‰ΩçÁΩÆ‰ø°ÊÅØ;Â¶ÇÊûúÂÆ¢Êà∑Á´ØÁºìÂ≠òÊòØ Á©∫ÁöÑÔºåÈÇ£‰πàÂØªÂùÄÁÆóÊ≥ïÈúÄË¶ÅÈÄöËøá‰∏âÊ¨°ÁΩëÁªúÊù•ÂõûÈÄö‰ø°ÂØªÂùÄÔºåËøôÂÖ∂‰∏≠ÂåÖÊã¨‰∫Ü‰∏ÄÊ¨° Chubby ËØªÊìç‰Ωú;Â¶ÇÊûúÂÆ¢Êà∑Á´ØÁºìÂ≠òÁöÑ Âú∞ÂùÄ‰ø°ÊÅØËøáÊúü‰∫ÜÔºåÈÇ£‰πàÂØªÂùÄÁÆóÊ≥ïÂèØËÉΩÈúÄË¶ÅÊúÄÂ§ö6Ê¨°ÁΩëÁªúÊù•ÂõûÈÄö‰ø°ÊâçËÉΩÊõ¥Êñ∞Êï∞ÊçÆÔºåÂõ†‰∏∫Âè™ÊúâÂú®ÁºìÂ≠ò‰∏≠Ê≤°ÊúâÊü•Âà∞ Êï∞ÊçÆÁöÑÊó∂ÂÄôÊâçËÉΩÂèëÁé∞Êï∞ÊçÆËøáÊúü11„ÄÇÂ∞ΩÁÆ° Tablet ÁöÑÂú∞ÂùÄ‰ø°ÊÅØÊòØÂ≠òÊîæÂú®ÂÜÖÂ≠òÈáåÁöÑÔºåÂØπÂÆÉÁöÑÊìç‰Ωú‰∏çÂøÖËÆøÈóÆ GFS Êñá‰ª∂ Á≥ªÁªüÔºå‰ΩÜÊòØÔºåÈÄöÂ∏∏Êàë‰ª¨‰ºöÈÄöËøáÈ¢ÑÂèñ Tablet Âú∞ÂùÄÊù•Ëøõ‰∏ÄÊ≠•ÁöÑÂáèÂ∞ëËÆøÈóÆÁöÑÂºÄÈîÄ:ÊØèÊ¨°ÈúÄË¶Å‰ªé METADATA Ë°®‰∏≠ËØªÂèñ‰∏Ä‰∏™ Tablet ÁöÑÂÖÉÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂÆÉÈÉΩ‰ºöÂ§öËØªÂèñÂá†‰∏™ Tablet ÁöÑÂÖÉÊï∞ÊçÆ„ÄÇ</p>
<p>Âú® METADATA Ë°®‰∏≠ËøòÂ≠òÂÇ®‰∫ÜÊ¨°Á∫ß‰ø°ÊÅØ12ÔºåÂåÖÊã¨ÊØè‰∏™ Tablet ÁöÑ‰∫ã‰ª∂Êó•Âøó(‰æãÂ¶ÇÔºå‰ªÄ‰πàÊó∂ÂÄô‰∏Ä‰∏™ÊúçÂä°Âô®ÂºÄÂßã<br>‰∏∫ËØ• Tablet Êèê‰æõÊúçÂä°)„ÄÇËøô‰∫õ‰ø°ÊÅØÊúâÂä©‰∫éÊéíÊü•ÈîôËØØÂíåÊÄßËÉΩÂàÜÊûê„ÄÇ </p>
<h3 id="Tablet-ÂàÜÈÖç"><a href="#Tablet-ÂàÜÈÖç" class="headerlink" title="Tablet ÂàÜÈÖç"></a>Tablet ÂàÜÈÖç</h3><p>Âú®‰ªª‰Ωï‰∏Ä‰∏™Êó∂ÂàªÔºå‰∏Ä‰∏™ Tablet Âè™ËÉΩÂàÜÈÖçÁªô‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®„ÄÇMaster ÊúçÂä°Âô®ËÆ∞ÂΩï‰∫ÜÂΩìÂâçÊúâÂì™‰∫õÊ¥ªË∑ÉÁöÑ Tablet ÊúçÂä°Âô®„ÄÅÂì™‰∫õ Tablet ÂàÜÈÖçÁªô‰∫ÜÂì™‰∫õ Tablet ÊúçÂä°Âô®„ÄÅÂì™‰∫õ Tablet ËøòÊ≤°ÊúâË¢´ÂàÜÈÖç„ÄÇÂΩì‰∏Ä‰∏™ Tablet ËøòÊ≤°ÊúâË¢´ÂàÜÈÖç„ÄÅ Âπ∂‰∏îÂàöÂ•ΩÊúâ‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÊúâË∂≥Â§üÁöÑÁ©∫Èó≤Á©∫Èó¥Ë£ÖËΩΩËØ• Tablet Êó∂ÔºåMaster ÊúçÂä°Âô®‰ºöÁªôËøô‰∏™ Tablet ÊúçÂä°Âô®ÂèëÈÄÅ ‰∏Ä‰∏™Ë£ÖËΩΩËØ∑Ê±ÇÔºåÊää Tablet ÂàÜÈÖçÁªôËøô‰∏™ÊúçÂä°Âô®„ÄÇ</p>
<p>BigTable ‰ΩøÁî® Chubby Ë∑üË∏™ËÆ∞ÂΩï Tablet ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅ„ÄÇÂΩì‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÂêØÂä®Êó∂ÔºåÂÆÉÂú® Chubby ÁöÑ‰∏Ä‰∏™ ÊåáÂÆöÁõÆÂΩï‰∏ãÂª∫Á´ã‰∏Ä‰∏™ÊúâÂîØ‰∏ÄÊÄßÂêçÂ≠óÁöÑÊñá‰ª∂ÔºåÂπ∂‰∏îËé∑ÂèñËØ•Êñá‰ª∂ÁöÑÁã¨Âç†ÈîÅ„ÄÇMaster ÊúçÂä°Âô®ÂÆûÊó∂ÁõëÊéßÁùÄËøô‰∏™ÁõÆÂΩï(Êúç Âä°Âô®ÁõÆÂΩï)ÔºåÂõ†Ê≠§ Master ÊúçÂä°Âô®ËÉΩÂ§üÁü•ÈÅìÊúâÊñ∞ÁöÑ Tablet ÊúçÂä°Âô®Âä†ÂÖ•‰∫Ü„ÄÇÂ¶ÇÊûú Tablet ÊúçÂä°Âô®‰∏¢Â§±‰∫Ü Chubby ‰∏äÁöÑ Áã¨Âç†ÈîÅ ‚Äî ÊØîÂ¶ÇÁî±‰∫éÁΩëÁªúÊñ≠ÂºÄÂØºËá¥ Tablet ÊúçÂä°Âô®Âíå Chubby ÁöÑ‰ºöËØù‰∏¢Â§± ‚Äî ÂÆÉÂ∞±ÂÅúÊ≠¢ÂØπ Tablet Êèê‰æõÊúçÂä°„ÄÇ (Chubby Êèê‰æõ‰∫Ü‰∏ÄÁßçÈ´òÊïàÁöÑÊú∫Âà∂ÔºåÂà©Áî®ËøôÁßçÊú∫Âà∂ÔºåTablet ÊúçÂä°Âô®ËÉΩÂ§üÂú®‰∏çÂ¢ûÂä†ÁΩëÁªúË¥üÊãÖÁöÑÊÉÖÂÜµ‰∏ãÁü•ÈÅìÂÆÉÊòØÂê¶ ËøòÊåÅÊúâÈîÅ)„ÄÇÂè™Ë¶ÅÊñá‰ª∂ËøòÂ≠òÂú®ÔºåTablet ÊúçÂä°Âô®Â∞±‰ºöËØïÂõæÈáçÊñ∞Ëé∑ÂæóÂØπËØ•Êñá‰ª∂ÁöÑÁã¨Âç†ÈîÅ;Â¶ÇÊûúÊñá‰ª∂‰∏çÂ≠òÂú®‰∫ÜÔºåÈÇ£‰πà Tablet ÊúçÂä°Âô®Â∞±‰∏çËÉΩÂÜçÊèê‰æõÊúçÂä°‰∫ÜÔºåÂÆÉ‰ºöËá™Ë°åÈÄÄÂá∫13„ÄÇÂΩì Tablet ÊúçÂä°Âô®ÁªàÊ≠¢Êó∂(ÊØîÂ¶ÇÔºåÈõÜÁæ§ÁöÑÁÆ°ÁêÜÁ≥ªÁªüÂ∞ÜËøêË°å ËØ• Tablet ÊúçÂä°Âô®ÁöÑ‰∏ªÊú∫‰ªéÈõÜÁæ§‰∏≠ÁßªÈô§)ÔºåÂÆÉ‰ºöÂ∞ùËØïÈáäÊîæÂÆÉÊåÅÊúâÁöÑÊñá‰ª∂ÈîÅÔºåËøôÊ†∑‰∏ÄÊù•ÔºåMaster ÊúçÂä°Âô®Â∞±ËÉΩÂ∞ΩÂø´Êää Tablet ÂàÜÈÖçÂà∞ÂÖ∂ÂÆÉÁöÑ Tablet ÊúçÂä°Âô®„ÄÇ</p>
<p>Master ÊúçÂä°Âô®Ë¥üË¥£Ê£ÄÊü•‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÊòØÂê¶Â∑≤Áªè‰∏çÂÜç‰∏∫ÂÆÉÁöÑ Tablet Êèê‰æõÊúçÂä°‰∫ÜÔºåÂπ∂‰∏îË¶ÅÂ∞ΩÂø´ÈáçÊñ∞ÂàÜÈÖç ÂÆÉÂä†ËΩΩÁöÑ Tablet„ÄÇMaster ÊúçÂä°Âô®ÈÄöËøáËΩÆËØ¢ Tablet ÊúçÂä°Âô®Êñá‰ª∂ÈîÅÁöÑÁä∂ÊÄÅÊù•Ê£ÄÊµã‰ΩïÊó∂ Tablet ÊúçÂä°Âô®‰∏çÂÜç‰∏∫ Tablet Êèê‰æõÊúçÂä°„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®Êä•ÂëäÂÆÉ‰∏¢Â§±‰∫ÜÊñá‰ª∂ÈîÅÔºåÊàñËÄÖ Master ÊúçÂä°Âô®ÊúÄËøëÂá†Ê¨°Â∞ùËØïÂíåÂÆÉÈÄö‰ø°ÈÉΩÊ≤°ÊúâÂæó<br>Âà∞ÂìçÂ∫îÔºåMaster ÊúçÂä°Âô®Â∞±‰ºöÂ∞ùËØïËé∑ÂèñËØ• Tablet ÊúçÂä°Âô®Êñá‰ª∂ÁöÑÁã¨Âç†ÈîÅ;Â¶ÇÊûú Master ÊúçÂä°Âô®ÊàêÂäüËé∑Âèñ‰∫ÜÁã¨Âç†ÈîÅÔºå ÈÇ£‰πàÂ∞±ËØ¥Êòé Chubby ÊòØÊ≠£Â∏∏ËøêË°åÁöÑÔºåËÄå Tablet ÊúçÂä°Âô®Ë¶Å‰πàÊòØÂÆïÊú∫‰∫Ü„ÄÅË¶Å‰πàÊòØ‰∏çËÉΩÂíå Chubby ÈÄö‰ø°‰∫ÜÔºåÂõ†Ê≠§ÔºåMaster ÊúçÂä°Âô®Â∞±Âà†Èô§ËØ• Tablet ÊúçÂä°Âô®Âú® Chubby ‰∏äÁöÑÊúçÂä°Âô®Êñá‰ª∂‰ª•Á°Æ‰øùÂÆÉ‰∏çÂÜçÁªô Tablet Êèê‰æõÊúçÂä°„ÄÇ‰∏ÄÊó¶ Tablet ÊúçÂä°Âô® Âú® Chubby ‰∏äÁöÑÊúçÂä°Âô®Êñá‰ª∂Ë¢´Âà†Èô§‰∫ÜÔºåMaster ÊúçÂä°Âô®Â∞±Êää‰πãÂâçÂàÜÈÖçÁªôÂÆÉÁöÑÊâÄÊúâÁöÑ Tablet ÊîæÂÖ•Êú™ÂàÜÈÖçÁöÑ Tablet ÈõÜÂêà‰∏≠„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øù Bigtable ÈõÜÁæ§Âú® Master ÊúçÂä°Âô®Âíå Chubby ‰πãÈó¥ÁΩëÁªúÂá∫Áé∞ÊïÖÈöúÁöÑÊó∂ÂÄô‰ªçÁÑ∂ÂèØ‰ª•‰ΩøÁî®ÔºåMaster ÊúçÂä°Âô®Âú®ÂÆÉÁöÑ Chubby ‰ºöËØùËøáÊúüÂêé‰∏ªÂä®ÈÄÄÂá∫„ÄÇ‰ΩÜÊòØ‰∏çÁÆ°ÊÄéÊ†∑ÔºåÂ¶ÇÂêåÊàë‰ª¨ÂâçÈù¢ÊâÄÊèèËø∞ÁöÑÔºåMaster ÊúçÂä°Âô®ÁöÑÊïÖÈöú‰∏ç ‰ºöÊîπÂèòÁé∞Êúâ Tablet Âú® Tablet ÊúçÂä°Âô®‰∏äÁöÑÂàÜÈÖçÁä∂ÊÄÅ„ÄÇ</p>
<p>ÂΩìÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüÂêØÂä®‰∫Ü‰∏Ä‰∏™ Master ÊúçÂä°Âô®‰πãÂêéÔºåMaster ÊúçÂä°Âô®È¶ñÂÖàË¶Å‰∫ÜËß£ÂΩìÂâç Tablet ÁöÑÂàÜÈÖçÁä∂ÊÄÅÔºå‰πãÂêé ÊâçËÉΩÂ§ü‰øÆÊîπÂàÜÈÖçÁä∂ÊÄÅ„ÄÇMaster ÊúçÂä°Âô®Âú®ÂêØÂä®ÁöÑÊó∂ÂÄôÊâßË°å‰ª•‰∏ãÊ≠•È™§:</p>
<ol>
<li>Master ÊúçÂä°Âô®‰ªé Chubby Ëé∑Âèñ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ Master ÈîÅÔºåÁî®Êù•ÈòªÊ≠¢ÂàõÂª∫ÂÖ∂ÂÆÉÁöÑ Master ÊúçÂä°Âô®ÂÆû‰æã;</li>
<li>Master ÊúçÂä°Âô®Êâ´Êèè Chubby ÁöÑÊúçÂä°Âô®Êñá‰ª∂ÈîÅÂ≠òÂÇ®ÁõÆÂΩïÔºåËé∑ÂèñÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑÊúçÂä°Âô®ÂàóË°®;</li>
<li>Master ÊúçÂä°Âô®ÂíåÊâÄÊúâÁöÑÊ≠£Âú®ËøêË°åÁöÑ Tablet Ë°®ÊúçÂä°Âô®ÈÄö‰ø°ÔºåËé∑ÂèñÊØè‰∏™ Tablet ÊúçÂä°Âô®‰∏ä Tablet ÁöÑÂàÜÈÖç‰ø°ÊÅØ;</li>
<li>Master ÊúçÂä°Âô®Êâ´Êèè METADATA Ë°®Ëé∑ÂèñÊâÄÊúâÁöÑ Tablet ÁöÑÈõÜÂêà„ÄÇ</li>
</ol>
<p>Âú®Êâ´ÊèèÁöÑËøáÁ®ã‰∏≠ÔºåÂΩì Master ÊúçÂä°Âô®ÂèëÁé∞‰∫Ü‰∏Ä‰∏™ËøòÊ≤°ÊúâÂàÜÈÖçÁöÑ TabletÔºåMaster ÊúçÂä°Âô®Â∞±Â∞ÜËøô‰∏™ Tablet Âä†ÂÖ•Êú™ÂàÜÈÖçÁöÑ Tablet ÈõÜÂêàÁ≠âÂæÖÂêàÈÄÇÁöÑÊó∂Êú∫ÂàÜÈÖç„ÄÇ</p>
<p>ÂèØËÉΩ‰ºöÈÅáÂà∞‰∏ÄÁßçÂ§çÊùÇÁöÑÊÉÖÂÜµ:Âú® METADATA Ë°®ÁöÑ Tablet ËøòÊ≤°ÊúâË¢´ÂàÜÈÖç‰πãÂâçÊòØ‰∏çËÉΩÂ§üÊâ´ÊèèÂÆÉÁöÑ„ÄÇÂõ†Ê≠§Ôºå<br>Âú®ÂºÄÂßãÊâ´Êèè‰πãÂâç(Ê≠•È™§ 4)ÔºåÂ¶ÇÊûúÂú®Á¨¨‰∏âÊ≠•ÁöÑÊâ´ÊèèËøáÁ®ã‰∏≠ÂèëÁé∞ Root Tablet ËøòÊ≤°ÊúâÂàÜÈÖçÔºåMaster ÊúçÂä°Âô®Â∞±Êää Root Tablet Âä†ÂÖ•Âà∞Êú™ÂàÜÈÖçÁöÑ Tablet ÈõÜÂêà„ÄÇËøô‰∏™ÈôÑÂä†Êìç‰ΩúÁ°Æ‰øù‰∫Ü Root Tablet ‰ºöË¢´ÂàÜÈÖç„ÄÇÁî±‰∫é Root Tablet ÂåÖÊã¨‰∫ÜÊâÄÊúâ METADATA ÁöÑ Tablet ÁöÑÂêçÂ≠óÔºåÂõ†Ê≠§ Master ÊúçÂä°Âô®Êâ´ÊèèÂÆå Root Tablet ‰ª•ÂêéÔºåÂ∞±ÂæóÂà∞‰∫ÜÊâÄÊúâÁöÑ METADATA Ë°® ÁöÑ Tablet ÁöÑÂêçÂ≠ó‰∫Ü„ÄÇ</p>
<p>‰øùÂ≠òÁé∞Êúâ Tablet ÁöÑÈõÜÂêàÂè™ÊúâÂú®‰ª•‰∏ã‰∫ã‰ª∂ÂèëÁîüÊó∂Êâç‰ºöÊîπÂèò:Âª∫Á´ã‰∫Ü‰∏Ä‰∏™Êñ∞Ë°®ÊàñËÄÖÂà†Èô§‰∫Ü‰∏Ä‰∏™ÊóßË°®„ÄÅ‰∏§‰∏™ Tablet Ë¢´ÂêàÂπ∂‰∫Ü„ÄÅÊàñËÄÖ‰∏Ä‰∏™ Tablet Ë¢´ÂàÜÂâ≤Êàê‰∏§‰∏™Â∞èÁöÑ Tablet„ÄÇMaster ÊúçÂä°Âô®ÂèØ‰ª•Ë∑üË∏™ËÆ∞ÂΩïÊâÄÊúâËøô‰∫õ‰∫ã‰ª∂ÔºåÂõ†‰∏∫ Èô§‰∫ÜÊúÄÂêé‰∏Ä‰∏™‰∫ã‰ª∂Â§ñÁöÑ‰∏§‰∏™‰∫ã‰ª∂ÈÉΩÊòØÁî±ÂÆÉÂêØÂä®ÁöÑ„ÄÇTablet ÂàÜÂâ≤‰∫ã‰ª∂ÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜÔºåÂõ†‰∏∫ÂÆÉÊòØÁî± Tablet ÊúçÂä°Âô®ÂêØ Âä®„ÄÇÂú®ÂàÜÂâ≤Êìç‰ΩúÂÆåÊàê‰πãÂêéÔºåTablet ÊúçÂä°Âô®ÈÄöËøáÂú® METADATA Ë°®‰∏≠ËÆ∞ÂΩïÊñ∞ÁöÑ Tablet ÁöÑ‰ø°ÊÅØÊù•Êèê‰∫§Ëøô‰∏™Êìç‰Ωú;ÂΩì ÂàÜÂâ≤Êìç‰ΩúÊèê‰∫§‰πãÂêéÔºåTablet ÊúçÂä°Âô®‰ºöÈÄöÁü• Master ÊúçÂä°Âô®„ÄÇÂ¶ÇÊûúÂàÜÂâ≤Êìç‰ΩúÂ∑≤Êèê‰∫§ÁöÑ‰ø°ÊÅØÊ≤°ÊúâÈÄöÁü•Âà∞ Master ÊúçÂä° Âô®(ÂèØËÉΩ‰∏§‰∏™ÊúçÂä°Âô®‰∏≠Êúâ‰∏Ä‰∏™ÂÆïÊú∫‰∫Ü)ÔºåMaster ÊúçÂä°Âô®Âú®Ë¶ÅÊ±Ç Tablet ÊúçÂä°Âô®Ë£ÖËΩΩÂ∑≤ÁªèË¢´ÂàÜÂâ≤ÁöÑÂ≠êË°®ÁöÑÊó∂ÂÄô‰ºöÂèëÁé∞‰∏Ä‰∏™Êñ∞ÁöÑ Tablet„ÄÇÈÄöËøáÂØπÊØî METADATA Ë°®‰∏≠ Tablet ÁöÑ‰ø°ÊÅØÔºåTablet ÊúçÂä°Âô®‰ºöÂèëÁé∞ Master ÊúçÂä°Âô®Ë¶ÅÊ±ÇÂÖ∂Ë£ÖËΩΩÁöÑ Tablet Âπ∂‰∏çÂÆåÊï¥ÔºåÂõ†Ê≠§ÔºåTablet ÊúçÂä°Âô®‰ºöÈáçÊñ∞Âêë Master ÊúçÂä°Âô®ÂèëÈÄÅÈÄöÁü•‰ø°ÊÅØ„ÄÇ </p>
<h3 id="Tablet-ÊúçÂä°"><a href="#Tablet-ÊúçÂä°" class="headerlink" title="Tablet ÊúçÂä°"></a>Tablet ÊúçÂä°</h3><p><img src="http://oliji9s3j.bkt.clouddn.com/15133939829985.jpg" alt><br>Â¶ÇÂõæ 5 ÊâÄÁ§∫ÔºåTablet ÁöÑÊåÅ‰πÖÂåñÁä∂ÊÄÅ‰ø°ÊÅØ‰øùÂ≠òÂú® GFS ‰∏ä„ÄÇÊõ¥Êñ∞Êìç‰ΩúÊèê‰∫§Âà∞ REDO Êó•Âøó‰∏≠14„ÄÇÂú®Ëøô‰∫õÊõ¥Êñ∞Êìç ‰Ωú‰∏≠ÔºåÊúÄËøëÊèê‰∫§ÁöÑÈÇ£‰∫õÂ≠òÊîæÂú®‰∏Ä‰∏™ÊéíÂ∫èÁöÑÁºìÂ≠ò‰∏≠ÔºåÊàë‰ª¨Áß∞Ëøô‰∏™ÁºìÂ≠ò‰∏∫ memtable;ËæÉÊó©ÁöÑÊõ¥Êñ∞Â≠òÊîæÂú®‰∏ÄÁ≥ªÂàó SSTable ‰∏≠„ÄÇ‰∏∫‰∫ÜÊÅ¢Â§ç‰∏Ä‰∏™ TabletÔºåTablet ÊúçÂä°Âô®È¶ñÂÖà‰ªé METADATA Ë°®‰∏≠ËØªÂèñÂÆÉÁöÑÂÖÉÊï∞ÊçÆ„ÄÇTablet ÁöÑÂÖÉÊï∞ÊçÆÂåÖ Âê´‰∫ÜÁªÑÊàêËøô‰∏™ Tablet ÁöÑ SSTable ÁöÑÂàóË°®Ôºå‰ª•Âèä‰∏ÄÁ≥ªÂàóÁöÑ Redo Point15ÔºåËøô‰∫õ Redo Point ÊåáÂêëÂèØËÉΩÂê´ÊúâËØ• Tablet Êï∞ÊçÆÁöÑÂ∑≤Êèê‰∫§ÁöÑÊó•ÂøóËÆ∞ÂΩï„ÄÇTablet ÊúçÂä°Âô®Êää SSTable ÁöÑÁ¥¢ÂºïËØªËøõÂÜÖÂ≠òÔºå‰πãÂêéÈÄöËøáÈáçÂ§ç Redo Point ‰πãÂêéÊèê‰∫§ÁöÑÊõ¥ Êñ∞Êù•ÈáçÂª∫ memtable„ÄÇ</p>
<p>ÂΩìÂØπ Tablet ÊúçÂä°Âô®ËøõË°åÂÜôÊìç‰ΩúÊó∂ÔºåTablet ÊúçÂä°Âô®È¶ñÂÖàË¶ÅÊ£ÄÊü•Ëøô‰∏™Êìç‰ΩúÊ†ºÂºèÊòØÂê¶Ê≠£Á°Æ„ÄÅÊìç‰ΩúÂèëËµ∑ËÄÖÊòØÂê¶ÊúâÊâß Ë°åËøô‰∏™Êìç‰ΩúÁöÑÊùÉÈôê„ÄÇÊùÉÈôêÈ™åËØÅÁöÑÊñπÊ≥ïÊòØÈÄöËøá‰ªé‰∏Ä‰∏™ Chubby Êñá‰ª∂ÈáåËØªÂèñÂá∫Êù•ÁöÑÂÖ∑ÊúâÂÜôÊùÉÈôêÁöÑÊìç‰ΩúËÄÖÂàóË°®Êù•ËøõË°å È™åËØÅ(Ëøô‰∏™Êñá‰ª∂Âá†‰πé‰∏ÄÂÆö‰ºöÂ≠òÊîæÂú® Chubby ÂÆ¢Êà∑ÁºìÂ≠òÈáå)„ÄÇÊàêÂäüÁöÑ‰øÆÊîπÊìç‰Ωú‰ºöËÆ∞ÂΩïÂú®Êèê‰∫§Êó•ÂøóÈáå„ÄÇÂèØ‰ª•ÈááÁî®Êâπ ÈáèÊèê‰∫§ÊñπÂºè16Êù•ÊèêÈ´òÂåÖÂê´Â§ßÈáèÂ∞èÁöÑ‰øÆÊîπÊìç‰ΩúÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÂêûÂêêÈáè„Äê13Ôºå16„Äë„ÄÇÂΩì‰∏Ä‰∏™ÂÜôÊìç‰ΩúÊèê‰∫§ÂêéÔºåÂÜôÁöÑÂÜÖÂÆπ ÊèíÂÖ•Âà∞ memtable ÈáåÈù¢„ÄÇ</p>
<p>ÂΩìÂØπ Tablet ÊúçÂä°Âô®ËøõË°åËØªÊìç‰ΩúÊó∂ÔºåTablet ÊúçÂä°Âô®‰ºö‰ΩúÁ±ª‰ººÁöÑÂÆåÊï¥ÊÄßÂíåÊùÉÈôêÊ£ÄÊü•„ÄÇ‰∏Ä‰∏™ÊúâÊïàÁöÑËØªÊìç‰ΩúÂú®‰∏Ä‰∏™ Áî±‰∏ÄÁ≥ªÂàó SSTable Âíå memtable ÂêàÂπ∂ÁöÑËßÜÂõæÈáåÊâßË°å„ÄÇÁî±‰∫é SSTable Âíå memtable ÊòØÊåâÂ≠óÂÖ∏ÊéíÂ∫èÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂõ†Ê≠§ ÂèØ‰ª•È´òÊïàÁîüÊàêÂêàÂπ∂ËßÜÂõæ„ÄÇ</p>
<p>ÂΩìËøõË°å Tablet ÁöÑÂêàÂπ∂ÂíåÂàÜÂâ≤Êó∂ÔºåÊ≠£Âú®ËøõË°åÁöÑËØªÂÜôÊìç‰ΩúËÉΩÂ§üÁªßÁª≠ËøõË°å„ÄÇ </p>
<h3 id="Á©∫Èó¥Êî∂Áº©"><a href="#Á©∫Èó¥Êî∂Áº©" class="headerlink" title="Á©∫Èó¥Êî∂Áº©"></a>Á©∫Èó¥Êî∂Áº©</h3><p>ÈöèÁùÄÂÜôÊìç‰ΩúÁöÑÊâßË°åÔºåmemtable ÁöÑÂ§ßÂ∞è‰∏çÊñ≠Â¢ûÂä†„ÄÇÂΩì memtable ÁöÑÂ∞∫ÂØ∏Âà∞Ëææ‰∏Ä‰∏™Èó®ÈôêÂÄºÁöÑÊó∂ÂÄôÔºåËøô‰∏™ memtable Â∞±‰ºöË¢´ÂÜªÁªìÔºåÁÑ∂ÂêéÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ memtable;Ë¢´ÂÜªÁªì‰Ωè memtable ‰ºöË¢´ËΩ¨Êç¢Êàê SSTableÔºåÁÑ∂ÂêéÂÜôÂÖ• GFS18„ÄÇMinor Compaction ËøáÁ®ãÊúâ‰∏§‰∏™ÁõÆÁöÑ:shrink 19Tablet ÊúçÂä°Âô®‰ΩøÁî®ÁöÑÂÜÖÂ≠òÔºå‰ª•ÂèäÂú®ÊúçÂä°Âô®ÁÅæÈöæÊÅ¢Â§çËøáÁ®ã‰∏≠ÔºåÂáèÂ∞ëÂøÖÈ°ª‰ªé Êèê‰∫§Êó•ÂøóÈáåËØªÂèñÁöÑÊï∞ÊçÆÈáè„ÄÇÂú® Compaction ËøáÁ®ã‰∏≠ÔºåÊ≠£Âú®ËøõË°åÁöÑËØªÂÜôÊìç‰Ωú‰ªçËÉΩÁªßÁª≠„ÄÇ</p>
<p>ÊØè‰∏ÄÊ¨° Minor Compaction ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ SSTable„ÄÇÂ¶ÇÊûú Minor Compaction ËøáÁ®ã‰∏çÂÅúÊªûÁöÑÊåÅÁª≠ËøõË°å‰∏ã ÂéªÔºåËØªÊìç‰ΩúÂèØËÉΩÈúÄË¶ÅÂêàÂπ∂Êù•Ëá™Â§ö‰∏™ SSTable ÁöÑÊõ¥Êñ∞;Âê¶ÂàôÔºåÊàë‰ª¨ÈÄöËøáÂÆöÊúüÂú®ÂêéÂè∞ÊâßË°å Merging Compaction Ëøá Á®ãÂêàÂπ∂Êñá‰ª∂ÔºåÈôêÂà∂ËøôÁ±ªÊñá‰ª∂ÁöÑÊï∞Èáè„ÄÇMerging Compaction ËøáÁ®ãËØªÂèñ‰∏Ä‰∫õ SSTable Âíå memtable ÁöÑÂÜÖÂÆπÔºåÂêàÂπ∂Êàê ‰∏Ä‰∏™Êñ∞ÁöÑ SSTable„ÄÇÂè™Ë¶Å Merging Compaction ËøáÁ®ãÂÆåÊàê‰∫ÜÔºåËæìÂÖ•ÁöÑËøô‰∫õ SSTable Âíå memtable Â∞±ÂèØ‰ª•Âà†Èô§‰∫Ü„ÄÇ</p>
<p>ÂêàÂπ∂ÊâÄÊúâÁöÑ SSTable Âπ∂ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ SSTable ÁöÑ Merging Compaction ËøáÁ®ãÂè´‰Ωú Major Compaction„ÄÇÁî±Èùû Major Compaction ‰∫ßÁîüÁöÑ SSTable ÂèØËÉΩÂê´ÊúâÁâπÊÆäÁöÑÂà†Èô§Êù°ÁõÆÔºåËøô‰∫õÂà†Èô§Êù°ÁõÆËÉΩÂ§üÈöêËóèÂú®ÊóßÁöÑ„ÄÅ‰ΩÜÊòØ‰æùÁÑ∂ÊúâÊïàÁöÑ SSTable ‰∏≠Â∑≤ÁªèÂà†Èô§ÁöÑÊï∞ÊçÆ20„ÄÇËÄå Major Compaction ËøáÁ®ãÁîüÊàêÁöÑ SSTable ‰∏çÂåÖÂê´Â∑≤ÁªèÂà†Èô§ÁöÑ‰ø°ÊÅØÊàñÊï∞ÊçÆ„ÄÇBigtable Âæ™ÁéØÊâ´ÊèèÂÆÉÊâÄÊúâÁöÑ TabletÔºåÂπ∂‰∏îÂÆöÊúüÂØπÂÆÉ‰ª¨ÊâßË°å Major Compaction„ÄÇMajor Compaction Êú∫Âà∂ÂÖÅËÆ∏ Bigtable ÂõûÊî∂ Â∑≤ÁªèÂà†Èô§ÁöÑÊï∞ÊçÆÂç†ÊúâÁöÑËµÑÊ∫êÔºåÂπ∂‰∏îÁ°Æ‰øù BigTable ËÉΩÂèäÊó∂Ê∏ÖÈô§Â∑≤ÁªèÂà†Èô§ÁöÑÊï∞ÊçÆ21ÔºåËøôÂØπÂ≠òÊîæÊïèÊÑüÊï∞ÊçÆÁöÑÊúçÂä°ÊòØ ÈùûÂ∏∏ÈáçË¶Å„ÄÇ<br><div class="note info"><h2 id="‰ºòÂåñ"><a href="#‰ºòÂåñ" class="headerlink" title="‰ºòÂåñ"></a>‰ºòÂåñ</h2></div><br>‰∏ä‰∏ÄÁ´†Êàë‰ª¨ÊèèËø∞‰∫Ü Bigtable ÁöÑÂÆûÁé∞ÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÂæàÂ§ö‰ºòÂåñÂ∑•‰ΩúÊâçËÉΩ‰Ωø Bigtable Âà∞ËææÁî®Êà∑Ë¶ÅÊ±ÇÁöÑÈ´òÊÄßËÉΩ„ÄÅ È´òÂèØÁî®ÊÄßÂíåÈ´òÂèØÈù†ÊÄß„ÄÇÊú¨Á´†ÊèèËø∞‰∫Ü Bigtable ÂÆûÁé∞ÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜÔºå‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÂº∫Ë∞ÉËøô‰∫õ‰ºòÂåñÂ∑•‰ΩúÔºåÊàë‰ª¨Â∞ÜÊ∑±ÂÖ•ÁªÜ ËäÇ„ÄÇ</p>
<h3 id="Â±ÄÈÉ®ÊÄßÁæ§ÁªÑ"><a href="#Â±ÄÈÉ®ÊÄßÁæ§ÁªÑ" class="headerlink" title="Â±ÄÈÉ®ÊÄßÁæ§ÁªÑ"></a>Â±ÄÈÉ®ÊÄßÁæ§ÁªÑ</h3><p>ÂÆ¢Êà∑Á®ãÂ∫èÂèØ‰ª•Â∞ÜÂ§ö‰∏™ÂàóÊóèÁªÑÂêàÊàê‰∏Ä‰∏™Â±ÄÈÉ®ÊÄßÁæ§Êóè„ÄÇÂØπ Tablet ‰∏≠ÁöÑÊØè‰∏™Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™ÂçïÁã¨ÁöÑ<br>SSTable„ÄÇÂ∞ÜÈÄöÂ∏∏‰∏ç‰ºö‰∏ÄËµ∑ËÆøÈóÆÁöÑÂàóÊóèÂàÜÂâ≤Êàê‰∏çÂêåÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑÂèØ‰ª•ÊèêÈ´òËØªÂèñÊìç‰ΩúÁöÑÊïàÁéá„ÄÇ‰æãÂ¶ÇÔºåÂú® Webtable<br>Ë°®‰∏≠ÔºåÁΩëÈ°µÁöÑÂÖÉÊï∞ÊçÆ(ÊØîÂ¶ÇËØ≠Ë®ÄÂíå Checksum)ÂèØ‰ª•Âú®‰∏Ä‰∏™Â±ÄÈÉ®ÊÄßÁæ§ÁªÑ‰∏≠ÔºåÁΩëÈ°µÁöÑÂÜÖÂÆπÂèØ‰ª•Âú®Âè¶Â§ñ‰∏Ä‰∏™Áæ§ÁªÑ: ÂΩì‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èË¶ÅËØªÂèñÁΩëÈ°µÁöÑÂÖÉÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂÆÉÊ≤°ÊúâÂøÖË¶ÅÂéªËØªÂèñÊâÄÊúâÁöÑÈ°µÈù¢ÂÜÖÂÆπ„ÄÇ</p>
<p>Ê≠§Â§ñÔºåÂèØ‰ª•‰ª•Â±ÄÈÉ®ÊÄßÁæ§ÁªÑ‰∏∫Âçï‰ΩçËÆæÂÆö‰∏Ä‰∫õÊúâÁî®ÁöÑË∞ÉËØïÂèÇÊï∞„ÄÇÊØîÂ¶ÇÔºåÂèØ‰ª•Êää‰∏Ä‰∏™Â±ÄÈÉ®ÊÄßÁæ§ÁªÑËÆæÂÆö‰∏∫ÂÖ®ÈÉ®Â≠ò ÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠„ÄÇTablet ÊúçÂä°Âô®‰æùÁÖßÊÉ∞ÊÄßÂä†ËΩΩÁöÑÁ≠ñÁï•Â∞ÜËÆæÂÆö‰∏∫ÊîæÂÖ•ÂÜÖÂ≠òÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑ SSTable Ë£ÖËΩΩËøõÂÜÖÂ≠ò„ÄÇÂä†ËΩΩ ÂÆåÊàê‰πãÂêéÔºåËÆøÈóÆÂ±û‰∫éËØ•Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑÂàóÊóèÁöÑÊó∂ÂÄôÂ∞±‰∏çÂøÖËØªÂèñÁ°¨Áõò‰∫Ü„ÄÇËøô‰∏™ÁâπÊÄßÂØπ‰∫éÈúÄË¶ÅÈ¢ëÁπÅËÆøÈóÆÁöÑÂ∞èÂùóÊï∞ÊçÆ ÁâπÂà´ÊúâÁî®:Âú® Bigtable ÂÜÖÈÉ®ÔºåÊàë‰ª¨Âà©Áî®Ëøô‰∏™ÁâπÊÄßÊèêÈ´ò METADATA Ë°®‰∏≠ÂÖ∑Êúâ‰ΩçÁΩÆÁõ∏ÂÖ≥ÊÄßÁöÑÂàóÊóèÁöÑËÆøÈóÆÈÄüÂ∫¶„ÄÇ</p>
<h3 id="ÂéãÁº©"><a href="#ÂéãÁº©" class="headerlink" title="ÂéãÁº©"></a>ÂéãÁº©</h3><p>ÂÆ¢Êà∑Á®ãÂ∫èÂèØ‰ª•ÊéßÂà∂‰∏Ä‰∏™Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑ SSTable ÊòØÂê¶ÈúÄË¶ÅÂéãÁº©;Â¶ÇÊûúÈúÄË¶ÅÂéãÁº©ÔºåÈÇ£‰πà‰ª•‰ªÄ‰πàÊ†ºÂºèÊù•ÂéãÁº©„ÄÇ ÊØè‰∏™ SSTable ÁöÑÂùó(ÂùóÁöÑÂ§ßÂ∞èÁî±Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑ‰ºòÂåñÂèÇÊï∞ÊåáÂÆö)ÈÉΩ‰ΩøÁî®Áî®Êà∑ÊåáÂÆöÁöÑÂéãÁº©Ê†ºÂºèÊù•ÂéãÁº©„ÄÇËôΩÁÑ∂ÂàÜÂùó ÂéãÁº©Êµ™Ë¥π‰∫ÜÂ∞ëÈáèÁ©∫Èó¥22Ôºå‰ΩÜÊòØÔºåÊàë‰ª¨Âú®Âè™ËØªÂèñ SSTable ÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ∞±‰∏çÂøÖËß£ÂéãÊï¥‰∏™Êñá‰ª∂‰∫Ü„ÄÇÂæàÂ§öÂÆ¢ Êà∑Á®ãÂ∫è‰ΩøÁî®‰∫Ü‚Äú‰∏§ÈÅç‚ÄùÁöÑ„ÄÅÂèØÂÆöÂà∂ÁöÑÂéãÁº©ÊñπÂºè„ÄÇÁ¨¨‰∏ÄÈÅçÈááÁî® Bentley and McIlroy‚Äôs ÊñπÂºè[6]ÔºåËøôÁßçÊñπÂºèÂú®‰∏Ä‰∏™ ÂæàÂ§ßÁöÑÊâ´ÊèèÁ™óÂè£ÈáåÂØπÂ∏∏ËßÅÁöÑÈïøÂ≠óÁ¨¶‰∏≤ËøõË°åÂéãÁº©;Á¨¨‰∫åÈÅçÊòØÈááÁî®Âø´ÈÄüÂéãÁº©ÁÆóÊ≥ïÔºåÂç≥Âú®‰∏Ä‰∏™ 16KB ÁöÑÂ∞èÊâ´ÊèèÁ™óÂè£ ‰∏≠ÂØªÊâæÈáçÂ§çÊï∞ÊçÆ„ÄÇ‰∏§‰∏™ÂéãÁº©ÁöÑÁÆóÊ≥ïÈÉΩÂæàÂø´ÔºåÂú®Áé∞Âú®ÁöÑÊú∫Âô®‰∏äÔºåÂéãÁº©ÁöÑÈÄüÁéáËææÂà∞ 100-200MB/sÔºåËß£ÂéãÁöÑÈÄüÁéáËææ Âà∞ 400-1000MB/s„ÄÇ</p>
<p>ËôΩÁÑ∂Êàë‰ª¨Âú®ÈÄâÊã©ÂéãÁº©ÁÆóÊ≥ïÁöÑÊó∂ÂÄôÈáçÁÇπËÄÉËôëÁöÑÊòØÈÄüÂ∫¶ËÄå‰∏çÊòØÂéãÁº©ÁöÑÁ©∫Èó¥Ôºå‰ΩÜÊòØËøôÁßç‰∏§ÈÅçÁöÑÂéãÁº©ÊñπÂºèÂú®Á©∫Èó¥ ÂéãÁº©Áéá‰∏äÁöÑË°®Áé∞‰πüÊòØ‰ª§‰∫∫ÊÉäÂèπ„ÄÇÊØîÂ¶ÇÔºåÂú® Webtable ÁöÑ‰æãÂ≠êÈáåÔºåÊàë‰ª¨‰ΩøÁî®ËøôÁßçÂéãÁº©ÊñπÂºèÊù•Â≠òÂÇ®ÁΩëÈ°µÂÜÖÂÆπ„ÄÇÂú®‰∏Ä Ê¨°ÊµãËØï‰∏≠ÔºåÊàë‰ª¨Âú®‰∏Ä‰∏™ÂéãÁº©ÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑ‰∏≠Â≠òÂÇ®‰∫ÜÂ§ßÈáèÁöÑÁΩëÈ°µ„ÄÇÈíàÂØπÂÆûÈ™åÁöÑÁõÆÁöÑÔºåÊàë‰ª¨Ê≤°ÊúâÂ≠òÂÇ®ÊØè‰∏™ÊñáÊ°£ÊâÄ ÊúâÁâàÊú¨ÁöÑÊï∞ÊçÆÔºåÊàë‰ª¨‰ªÖ‰ªÖÂ≠òÂÇ®‰∫Ü‰∏Ä‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆ„ÄÇËØ•Ê®°ÂºèÁöÑÁ©∫Èó¥ÂéãÁº©ÊØîËææÂà∞‰∫Ü 10:1„ÄÇËøôÊØî‰º†ÁªüÁöÑ Gzip Âú®ÂéãÁº© HTML È°µÈù¢Êó∂ 3:1 ÊàñËÄÖ 4:1 ÁöÑÁ©∫Èó¥ÂéãÁº©ÊØîÂ•ΩÁöÑÂ§ö;‚Äú‰∏§ÈÅç‚ÄùÁöÑÂéãÁº©Ê®°ÂºèÂ¶ÇÊ≠§È´òÊïàÁöÑÂéüÂõ†ÊòØÁî±‰∫é Webtable ÁöÑË°åÁöÑ Â≠òÊîæÊñπÂºè:‰ªéÂêå‰∏Ä‰∏™‰∏ªÊú∫Ëé∑ÂèñÁöÑÈ°µÈù¢ÈÉΩÂ≠òÂú®‰∏¥ËøëÁöÑÂú∞Êñπ„ÄÇÂà©Áî®Ëøô‰∏™ÁâπÊÄßÔºåBentley-McIlroy ÁÆóÊ≥ïÂèØ‰ª•‰ªéÊù•Ëá™Âêå ‰∏Ä‰∏™‰∏ªÊú∫ÁöÑÈ°µÈù¢ÈáåÊâæÂà∞Â§ßÈáèÁöÑÈáçÂ§çÂÜÖÂÆπ„ÄÇ‰∏ç‰ªÖ‰ªÖÊòØ WebtableÔºåÂÖ∂ÂÆÉÁöÑÂæàÂ§öÂ∫îÁî®Á®ãÂ∫è‰πüÈÄöËøáÈÄâÊã©ÂêàÈÄÇÁöÑË°åÂêçÊù• Â∞ÜÁõ∏‰ººÁöÑÊï∞ÊçÆËÅöÁ∞áÂú®‰∏ÄËµ∑Ôºå‰ª•Ëé∑ÂèñËæÉÈ´òÁöÑÂéãÁº©Áéá„ÄÇÂΩìÊàë‰ª¨Âú® Bigtable ‰∏≠Â≠òÂÇ®Âêå‰∏Ä‰ªΩÊï∞ÊçÆÁöÑÂ§ö‰∏™ÁâàÊú¨ÁöÑÊó∂ÂÄôÔºå ÂéãÁº©ÊïàÁéá‰ºöÊõ¥È´ò„ÄÇ</p>
<h3 id="ÈÄöËøáÁºìÂ≠òÊèêÈ´òËØªÊìç‰ΩúÁöÑÊÄßËÉΩ"><a href="#ÈÄöËøáÁºìÂ≠òÊèêÈ´òËØªÊìç‰ΩúÁöÑÊÄßËÉΩ" class="headerlink" title="ÈÄöËøáÁºìÂ≠òÊèêÈ´òËØªÊìç‰ΩúÁöÑÊÄßËÉΩ"></a>ÈÄöËøáÁºìÂ≠òÊèêÈ´òËØªÊìç‰ΩúÁöÑÊÄßËÉΩ</h3><p>‰∏∫‰∫ÜÊèêÈ´òËØªÊìç‰ΩúÁöÑÊÄßËÉΩÔºåTablet ÊúçÂä°Âô®‰ΩøÁî®‰∫åÁ∫ßÁºìÂ≠òÁöÑÁ≠ñÁï•„ÄÇÊâ´ÊèèÁºìÂ≠òÊòØÁ¨¨‰∏ÄÁ∫ßÁºìÂ≠òÔºå‰∏ªË¶ÅÁºìÂ≠ò Tablet<br>ÊúçÂä°Âô®ÈÄöËøá SSTable Êé•Âè£Ëé∑ÂèñÁöÑ Key-Value ÂØπ;Block ÁºìÂ≠òÊòØ‰∫åÁ∫ßÁºìÂ≠òÔºåÁºìÂ≠òÁöÑÊòØ‰ªé GFS ËØªÂèñÁöÑ SSTable ÁöÑ Block„ÄÇÂØπ‰∫éÁªèÂ∏∏Ë¶ÅÈáçÂ§çËØªÂèñÁõ∏ÂêåÊï∞ÊçÆÁöÑÂ∫îÁî®Á®ãÂ∫èÊù•ËØ¥ÔºåÊâ´ÊèèÁºìÂ≠òÈùûÂ∏∏ÊúâÊïà;ÂØπ‰∫éÁªèÂ∏∏Ë¶ÅËØªÂèñÂàöÂàöËØªËøáÁöÑÊï∞ÊçÆ ÈôÑËøëÁöÑÊï∞ÊçÆÁöÑÂ∫îÁî®Á®ãÂ∫èÊù•ËØ¥ÔºåBlock ÁºìÂ≠òÊõ¥ÊúâÁî®(‰æãÂ¶ÇÔºåÈ°∫Â∫èËØªÔºåÊàñËÄÖÂú®‰∏Ä‰∏™ÁÉ≠ÁÇπÁöÑË°åÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑ‰∏≠ÈöèÊú∫ËØªÂèñ‰∏çÂêåÁöÑÂàó)„ÄÇ</p>
<h4 id="Bloom-ËøáÊª§Âô®"><a href="#Bloom-ËøáÊª§Âô®" class="headerlink" title="Bloom ËøáÊª§Âô®"></a>Bloom ËøáÊª§Âô®</h4><p>Â¶Ç 6.3 ËäÇÊâÄËø∞Ôºå‰∏Ä‰∏™ËØªÊìç‰ΩúÂøÖÈ°ªËØªÂèñÊûÑÊàê Tablet Áä∂ÊÄÅÁöÑÊâÄÊúâ SSTable ÁöÑÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúËøô‰∫õ SSTable ‰∏çÂú®ÂÜÖÂ≠ò ‰∏≠ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÂ§öÊ¨°ËÆøÈóÆÁ°¨Áõò„ÄÇÊàë‰ª¨ÈÄöËøáÂÖÅËÆ∏ÂÆ¢Êà∑Á®ãÂ∫èÂØπÁâπÂÆöÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑ SSTable ÊåáÂÆö Bloom ËøáÊª§Âô®„Äê7„ÄëÔºå Êù•ÂáèÂ∞ëÁ°¨ÁõòËÆøÈóÆÁöÑÊ¨°Êï∞„ÄÇÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® Bloom ËøáÊª§Âô®Êü•ËØ¢‰∏Ä‰∏™ SSTable ÊòØÂê¶ÂåÖÂê´‰∫ÜÁâπÂÆöË°åÂíåÂàóÁöÑÊï∞ÊçÆ„ÄÇÂØπ‰∫é Êüê‰∫õÁâπÂÆöÂ∫îÁî®Á®ãÂ∫èÔºåÊàë‰ª¨Âè™‰ªòÂá∫‰∫ÜÂ∞ëÈáèÁöÑ„ÄÅÁî®‰∫éÂ≠òÂÇ® Bloom ËøáÊª§Âô®ÁöÑÂÜÖÂ≠òÁöÑ‰ª£‰ª∑ÔºåÂ∞±Êç¢Êù•‰∫ÜËØªÊìç‰ΩúÊòæËëóÂáèÂ∞ë ÁöÑÁ£ÅÁõòËÆøÈóÆÁöÑÊ¨°Êï∞„ÄÇ‰ΩøÁî® Bloom ËøáÊª§Âô®‰πüÈöêÂºèÁöÑËææÂà∞‰∫ÜÂΩìÂ∫îÁî®Á®ãÂ∫èËÆøÈóÆ‰∏çÂ≠òÂú®ÁöÑË°åÊàñÂàóÊó∂ÔºåÂ§ßÂ§öÊï∞Êó∂ÂÄôÊàë‰ª¨ ÈÉΩ‰∏çÈúÄË¶ÅËÆøÈóÆÁ°¨ÁõòÁöÑÁõÆÁöÑ„ÄÇ</p>
<h4 id="Commit-Êó•ÂøóÁöÑÂÆûÁé∞"><a href="#Commit-Êó•ÂøóÁöÑÂÆûÁé∞" class="headerlink" title="Commit Êó•ÂøóÁöÑÂÆûÁé∞"></a>Commit Êó•ÂøóÁöÑÂÆûÁé∞</h4><p>Â¶ÇÊûúÊàë‰ª¨ÊääÂØπÊØè‰∏™ Tablet ÁöÑÊìç‰ΩúÁöÑ Commit Êó•ÂøóÈÉΩÂ≠òÂú®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂ÁöÑËØùÔºåÈÇ£‰πàÂ∞±‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑÊñá‰ª∂Ôºå Âπ∂‰∏îËøô‰∫õÊñá‰ª∂‰ºöÂπ∂Ë°åÁöÑÂÜôÂÖ• GFS„ÄÇÊ†πÊçÆ GFS ÊúçÂä°Âô®Â∫ïÂ±ÇÊñá‰ª∂Á≥ªÁªüÂÆûÁé∞ÁöÑÊñπÊ°àÔºåË¶ÅÊääËøô‰∫õÊñá‰ª∂ÂÜôÂÖ•‰∏çÂêåÁöÑÁ£ÅÁõò Êó•ÂøóÊñá‰ª∂Êó∂24Ôºå‰ºöÊúâÂ§ßÈáèÁöÑÁ£ÅÁõò Seek Êìç‰Ωú„ÄÇÂè¶Â§ñÔºåÁî±‰∫éÊâπÈáèÊèê‰∫§25‰∏≠Êìç‰ΩúÁöÑÊï∞ÁõÆ‰∏ÄËà¨ÊØîËæÉÂ∞ëÔºåÂõ†Ê≠§ÔºåÂØπÊØè‰∏™ Tablet ËÆæÁΩÆÂçïÁã¨ÁöÑÊó•ÂøóÊñá‰ª∂‰πü‰ºöÁªôÊâπÈáèÊèê‰∫§Êú¨Â∫îÂÖ∑ÊúâÁöÑ‰ºòÂåñÊïàÊûúÂ∏¶Êù•ÂæàÂ§ßÁöÑË¥üÈù¢ÂΩ±Âìç„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçËøô‰∫õÈóÆÈ¢òÔºåÊàë ‰ª¨ËÆæÁΩÆÊØè‰∏™ Tablet ÊúçÂä°Âô®‰∏Ä‰∏™ Commit Êó•ÂøóÊñá‰ª∂ÔºåÊää‰øÆÊîπÊìç‰ΩúÁöÑÊó•Âøó‰ª•ËøΩÂä†ÊñπÂºèÂÜôÂÖ•Âêå‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂ÔºåÂõ†Ê≠§ ‰∏Ä‰∏™ÂÆûÈôÖÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠Ê∑∑Âêà‰∫ÜÂØπÂ§ö‰∏™ Tablet ‰øÆÊîπÁöÑÊó•ÂøóËÆ∞ÂΩï„ÄÇ</p>
<p>‰ΩøÁî®Âçï‰∏™Êó•ÂøóÊòæËëóÊèêÈ´ò‰∫ÜÊôÆÈÄöÊìç‰ΩúÁöÑÊÄßËÉΩÔºå‰ΩÜÊòØÂ∞ÜÊÅ¢Â§çÁöÑÂ∑•‰ΩúÂ§çÊùÇÂåñ‰∫Ü„ÄÇÂΩì‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÂÆïÊú∫Êó∂Ôºå ÂÆÉÂä†ËΩΩÁöÑ Tablet Â∞Ü‰ºöË¢´ÁßªÂà∞ÂæàÂ§öÂÖ∂ÂÆÉÁöÑ Tablet ÊúçÂä°Âô®‰∏ä:ÊØè‰∏™ Tablet ÊúçÂä°Âô®ÈÉΩË£ÖËΩΩÂæàÂ∞ëÁöÑÂá†‰∏™ÂéüÊù•ÁöÑÊúçÂä°Âô® ÁöÑ Tablet„ÄÇÂΩìÊÅ¢Â§ç‰∏Ä‰∏™ Tablet ÁöÑÁä∂ÊÄÅÁöÑÊó∂ÂÄôÔºåÊñ∞ÁöÑ Tablet ÊúçÂä°Âô®Ë¶Å‰ªéÂéüÊù•ÁöÑ Tablet ÊúçÂä°Âô®ÂÜôÁöÑÊó•Âøó‰∏≠ÊèêÂèñ‰øÆÊîπ Êìç‰ΩúÁöÑ‰ø°ÊÅØÔºåÂπ∂ÈáçÊñ∞ÊâßË°å„ÄÇÁÑ∂ËÄåÔºåËøô‰∫õ Tablet ‰øÆÊîπÊìç‰ΩúÁöÑÊó•ÂøóËÆ∞ÂΩïÈÉΩÊ∑∑ÂêàÂú®Âêå‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂‰∏≠ÁöÑ„ÄÇ‰∏ÄÁßçÊñπÊ≥ï Êñ∞ÁöÑ Tablet ÊúçÂä°Âô®ËØªÂèñÂÆåÊï¥ÁöÑ Commit Êó•ÂøóÊñá‰ª∂ÔºåÁÑ∂ÂêéÂè™ÈáçÂ§çÊâßË°åÂÆÉÈúÄË¶ÅÊÅ¢Â§çÁöÑ Tablet ÁöÑÁõ∏ÂÖ≥‰øÆÊîπÊìç‰Ωú„ÄÇ‰Ωø Áî®ËøôÁßçÊñπÊ≥ïÔºåÂÅáÂ¶ÇÊúâ 100 Âè∞ Tablet ÊúçÂä°Âô®ÔºåÊØèÂè∞ÈÉΩÂä†ËΩΩ‰∫ÜÂ§±ÊïàÁöÑ Tablet ÊúçÂä°Âô®‰∏äÁöÑ‰∏Ä‰∏™ TabletÔºåÈÇ£‰πàÔºåËøô‰∏™Êó• ÂøóÊñá‰ª∂Â∞±Ë¶ÅË¢´ËØªÂèñ 100 Ê¨°(ÊØè‰∏™ÊúçÂä°Âô®ËØªÂèñ‰∏ÄÊ¨°)„ÄÇ</p>
<p>‰∏∫‰∫ÜÈÅøÂÖçÂ§öÊ¨°ËØªÂèñÊó•ÂøóÊñá‰ª∂ÔºåÊàë‰ª¨È¶ñÂÖàÊääÊó•ÂøóÊåâÁÖßÂÖ≥ÈîÆÂ≠ó(tableÔºårow nameÔºålog sequence number)ÊéíÂ∫è„ÄÇ ÊéíÂ∫è‰πãÂêéÔºåÂØπÂêå‰∏Ä‰∏™ Tablet ÁöÑ‰øÆÊîπÊìç‰ΩúÁöÑÊó•ÂøóËÆ∞ÂΩïÂ∞±ËøûÁª≠Â≠òÊîæÂú®‰∫Ü‰∏ÄËµ∑ÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨Âè™Ë¶Å‰∏ÄÊ¨°Á£ÅÁõò Seek Êìç‰Ωú„ÄÅ‰πãÂêéÈ°∫Â∫èËØªÂèñÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ‰∏∫‰∫ÜÂπ∂Ë°åÊéíÂ∫èÔºåÊàë‰ª¨ÂÖàÂ∞ÜÊó•ÂøóÂàÜÂâ≤Êàê 64MB ÁöÑÊÆµÔºå‰πãÂêéÂú®‰∏çÂêåÁöÑ Tablet ÊúçÂä°Âô®ÂØπÊÆµ ËøõË°åÂπ∂Ë°åÊéíÂ∫è„ÄÇËøô‰∏™ÊéíÂ∫èÂ∑•‰ΩúÁî± Master ÊúçÂä°Âô®Êù•ÂçèÂêåÂ§ÑÁêÜÔºåÂπ∂‰∏îÂú®‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®Ë°®ÊòéËá™Â∑±ÈúÄË¶Å‰ªé Commit Êó•ÂøóÊñá‰ª∂ÊÅ¢Â§ç Tablet Êó∂ÂºÄÂßãÊâßË°å„ÄÇ</p>
<p>Âú®Âêë GFS ‰∏≠ÂÜô Commit Êó•ÂøóÁöÑÊó∂ÂÄôÂèØËÉΩ‰ºöÂºïËµ∑Á≥ªÁªüÈ¢†Á∞∏ÔºåÂéüÂõ†ÊòØÂ§öÁßçÂ§öÊ†∑ÁöÑ(ÊØîÂ¶ÇÔºåÂÜôÊìç‰ΩúÊ≠£Âú®ËøõË°åÁöÑ<br>Êó∂ÂÄôÔºå‰∏Ä‰∏™ GFS ÊúçÂä°Âô®ÂÆïÊú∫‰∫Ü;ÊàñËÄÖËøûÊé•‰∏â‰∏™ GFS ÂâØÊú¨ÊâÄÂú®ÁöÑÊúçÂä°Âô®ÁöÑÁΩëÁªúÊã•Â°ûÊàñËÄÖËøáËΩΩ‰∫Ü)„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øùÂú® GFS Ë¥üËΩΩÈ´òÂ≥∞Êó∂‰øÆÊîπÊìç‰ΩúËøòËÉΩÈ°∫Âà©ËøõË°åÔºåÊØè‰∏™ Tablet ÊúçÂä°Âô®ÂÆûÈôÖ‰∏äÊúâ‰∏§‰∏™Êó•ÂøóÂÜôÂÖ•Á∫øÁ®ãÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩÂÜôËá™Â∑± ÁöÑÊó•ÂøóÊñá‰ª∂ÔºåÂπ∂‰∏îÂú®‰ªª‰ΩïÊó∂ÂàªÔºåÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊòØÂ∑•‰ΩúÁöÑ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãÁöÑÂú®ÂÜôÂÖ•ÁöÑÊó∂ÂÄôÊïàÁéáÂæà‰ΩéÔºåTablet ÊúçÂä° Âô®Â∞±ÂàáÊç¢Âà∞Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÔºå‰øÆÊîπÊìç‰ΩúÁöÑÊó•ÂøóËÆ∞ÂΩïÂ∞±ÂÜôÂÖ•Âà∞Ëøô‰∏™Á∫øÁ®ãÂØπÂ∫îÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠„ÄÇÊØè‰∏™Êó•ÂøóËÆ∞ÂΩïÈÉΩÊúâ‰∏Ä ‰∏™Â∫èÂàóÂè∑ÔºåÂõ†Ê≠§ÔºåÂú®ÊÅ¢Â§çÁöÑÊó∂ÂÄôÔºåTablet ÊúçÂä°Âô®ËÉΩÂ§üÊ£ÄÊµãÂá∫Âπ∂ÂøΩÁï•ÊéâÈÇ£‰∫õÁî±‰∫éÁ∫øÁ®ãÂàáÊç¢ËÄåÂØºËá¥ÁöÑÈáçÂ§çÁöÑËÆ∞ÂΩï„ÄÇ</p>
<h4 id="Tablet-ÊÅ¢Â§çÊèêÈÄü"><a href="#Tablet-ÊÅ¢Â§çÊèêÈÄü" class="headerlink" title="Tablet ÊÅ¢Â§çÊèêÈÄü"></a>Tablet ÊÅ¢Â§çÊèêÈÄü</h4><p>ÂΩì Master ÊúçÂä°Âô®Â∞Ü‰∏Ä‰∏™ Tablet ‰ªé‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÁßªÂà∞Âè¶Â§ñ‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®Êó∂ÔºåÊ∫ê Tablet ÊúçÂä°Âô®‰ºöÂØπ Ëøô‰∏™ Tablet ÂÅö‰∏ÄÊ¨° Minor Compaction„ÄÇËøô‰∏™ Compaction Êìç‰ΩúÂáèÂ∞ë‰∫Ü Tablet ÊúçÂä°Âô®ÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠Ê≤°ÊúâÂΩíÂπ∂ÁöÑËÆ∞ ÂΩïÔºå‰ªéËÄåÂáèÂ∞ë‰∫ÜÊÅ¢Â§çÁöÑÊó∂Èó¥„ÄÇCompaction ÂÆåÊàê‰πãÂêéÔºåËØ•ÊúçÂä°Âô®Â∞±ÂÅúÊ≠¢‰∏∫ËØ• Tablet Êèê‰æõÊúçÂä°„ÄÇÂú®Âç∏ËΩΩ Tablet ‰πã ÂâçÔºåÊ∫ê Tablet ÊúçÂä°Âô®Ëøò‰ºöÂÜçÂÅö‰∏ÄÊ¨°(ÈÄöÂ∏∏‰ºöÂæàÂø´)Minor CompactionÔºå‰ª•Ê∂àÈô§ÂâçÈù¢Âú®‰∏ÄÊ¨°ÂéãÁº©ËøáÁ®ã‰∏≠Âèà‰∫ßÁîüÁöÑ Êú™ÂΩíÂπ∂ÁöÑËÆ∞ÂΩï„ÄÇÁ¨¨‰∫åÊ¨° Minor Compaction ÂÆåÊàê‰ª•ÂêéÔºåTablet Â∞±ÂèØ‰ª•Ë¢´Ë£ÖËΩΩÂà∞Êñ∞ÁöÑ Tablet ÊúçÂä°Âô®‰∏ä‰∫ÜÔºåÂπ∂‰∏î‰∏ç ÈúÄË¶Å‰ªéÊó•Âøó‰∏≠ËøõË°åÊÅ¢Â§ç„ÄÇ</p>
<h4 id="Âà©Áî®‰∏çÂèòÊÄß"><a href="#Âà©Áî®‰∏çÂèòÊÄß" class="headerlink" title="Âà©Áî®‰∏çÂèòÊÄß"></a>Âà©Áî®‰∏çÂèòÊÄß</h4><p>Êàë‰ª¨Âú®‰ΩøÁî® Bigtable Êó∂ÔºåÈô§‰∫Ü SSTable ÁºìÂ≠ò‰πãÂ§ñÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜ‰∫ßÁîüÁöÑ SSTable ÈÉΩÊòØ‰∏çÂèòÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•Âà©Áî®Ëøô ‰∏ÄÁÇπÂØπÁ≥ªÁªüËøõË°åÁÆÄÂåñ„ÄÇ‰æãÂ¶ÇÔºåÂΩì‰ªé SSTable ËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰∏çÂøÖÂØπÊñá‰ª∂Á≥ªÁªüËÆøÈóÆÊìç‰ΩúËøõË°åÂêåÊ≠•„ÄÇËøôÊ†∑ ‰∏ÄÊù•ÔºåÂ∞±ÂèØ‰ª•ÈùûÂ∏∏È´òÊïàÁöÑÂÆûÁé∞ÂØπË°åÁöÑÂπ∂Ë°åÊìç‰Ωú„ÄÇmemtable ÊòØÂîØ‰∏Ä‰∏Ä‰∏™ËÉΩË¢´ËØªÂíåÂÜôÊìç‰ΩúÂêåÊó∂ËÆøÈóÆÁöÑÂèØÂèòÊï∞ÊçÆÁªì ÊûÑ„ÄÇ‰∏∫‰∫ÜÂáèÂ∞ëÂú®ËØªÊìç‰ΩúÊó∂ÁöÑÁ´û‰∫âÔºåÊàë‰ª¨ÂØπÂÜÖÂ≠òË°®ÈááÁî® COW(Copy-on-write)Êú∫Âà∂ÔºåËøôÊ†∑Â∞±ÂÖÅËÆ∏ËØªÂÜôÊìç‰ΩúÂπ∂Ë°åÊâß Ë°å„ÄÇ</p>
<p>Âõ†‰∏∫ SSTable ÊòØ‰∏çÂèòÁöÑÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÊ∞∏‰πÖÂà†Èô§Ë¢´Ê†áËÆ∞‰∏∫‚ÄúÂà†Èô§‚ÄùÁöÑÊï∞ÊçÆÁöÑÈóÆÈ¢òÔºåËΩ¨Êç¢ÊàêÂØπÂ∫üÂºÉÁöÑ SSTable ËøõË°åÂûÉÂúæÊî∂ÈõÜÁöÑÈóÆÈ¢ò‰∫Ü„ÄÇÊØè‰∏™ Tablet ÁöÑ SSTable ÈÉΩÂú® METADATA Ë°®‰∏≠Ê≥®ÂÜå‰∫Ü„ÄÇMaster ÊúçÂä°Âô®ÈááÁî®‚ÄúÊ†á ËÆ∞-Âà†Èô§‚ÄùÁöÑÂûÉÂúæÂõûÊî∂ÊñπÂºèÂà†Èô§ SSTable ÈõÜÂêà‰∏≠Â∫üÂºÉÁöÑ SSTable„Äê25„ÄëÔºåMETADATA Ë°®Âàô‰øùÂ≠ò‰∫Ü Root SSTable ÁöÑÈõÜÂêà„ÄÇ</p>
<p>ÊúÄÂêéÔºåSSTable ÁöÑ‰∏çÂèòÊÄß‰ΩøÂæóÂàÜÂâ≤ Tablet ÁöÑÊìç‰ΩúÈùûÂ∏∏Âø´Êç∑„ÄÇÊàë‰ª¨‰∏çÂøÖ‰∏∫ÊØè‰∏™ÂàÜÂâ≤Âá∫Êù•ÁöÑ Tablet Âª∫Á´ãÊñ∞ÁöÑ SSTable ÈõÜÂêàÔºåËÄåÊòØÂÖ±‰∫´ÂéüÊù•ÁöÑ Tablet ÁöÑ SSTable ÈõÜÂêà„ÄÇ<br><div class="note info"><h2 id="ÊÄßËÉΩËØÑ‰º∞"><a href="#ÊÄßËÉΩËØÑ‰º∞" class="headerlink" title="ÊÄßËÉΩËØÑ‰º∞"></a>ÊÄßËÉΩËØÑ‰º∞</h2></div><br>‰∏∫‰∫ÜÊµãËØï Bigtable ÁöÑÊÄßËÉΩÂíåÂèØÊâ©Â±ïÊÄßÔºåÊàë‰ª¨Âª∫Á´ã‰∫Ü‰∏Ä‰∏™ÂåÖÊã¨ N Âè∞ Tablet ÊúçÂä°Âô®ÁöÑ Bigtable ÈõÜÁæ§ÔºåËøôÈáå N ÊòØÂèØÂèòÁöÑ„ÄÇÊØèÂè∞ Tablet ÊúçÂä°Âô®ÈÖçÁΩÆ‰∫Ü 1GB ÁöÑÂÜÖÂ≠òÔºåÊï∞ÊçÆÂÜôÂÖ•Âà∞‰∏Ä‰∏™ÂåÖÊã¨ 1786 Âè∞Êú∫Âô®„ÄÅÊØèÂè∞Êú∫Âô®Êúâ 2 ‰∏™ IDE Á°¨ÁõòÁöÑ GFS ÈõÜÁæ§‰∏ä„ÄÇÊàë‰ª¨‰ΩøÁî® N Âè∞ÂÆ¢Êà∑Êú∫ÁîüÊàêÂ∑•‰ΩúË¥üËΩΩÊµãËØï Bigtable„ÄÇ(Êàë‰ª¨‰ΩøÁî®Âíå Tablet ÊúçÂä°Âô®Áõ∏ÂêåÊï∞ÁõÆÁöÑ ÂÆ¢Êà∑Êú∫‰ª•Á°Æ‰øùÂÆ¢Êà∑Êú∫‰∏ç‰ºöÊàê‰∏∫Áì∂È¢à„ÄÇ) ÊØèÂè∞ÂÆ¢Êà∑Êú∫ÈÖçÁΩÆ 2GZ ÂèåÊ†∏ Opteron Â§ÑÁêÜÂô®ÔºåÈÖçÁΩÆ‰∫ÜË∂≥‰ª•ÂÆπÁ∫≥ÊâÄÊúâËøõÁ®ã Â∑•‰ΩúÊï∞ÊçÆÈõÜÁöÑÁâ©ÁêÜÂÜÖÂ≠òÔºå‰ª•Âèä‰∏ÄÂº† Gigabit ÁöÑ‰ª•Â§™ÁΩëÂç°„ÄÇËøô‰∫õÊú∫Âô®ÈÉΩËøûÂÖ•‰∏Ä‰∏™‰∏§Â±ÇÁöÑ„ÄÅÊ†ëÁä∂ÁöÑ‰∫§Êç¢ÁΩëÁªúÈáåÔºåÂú® Ê†πËäÇÁÇπ‰∏äÁöÑÂ∏¶ÂÆΩÂä†Ëµ∑Êù•ÊúâÂ§ßÁ∫¶ 100-200Gbps„ÄÇÊâÄÊúâÁöÑÊú∫Âô®ÈááÁî®Áõ∏ÂêåÁöÑËÆæÂ§áÔºåÂõ†Ê≠§Ôºå‰ªª‰Ωï‰∏§Âè∞Êú∫Âô®Èó¥ÁΩëÁªúÊù•Âõû‰∏Ä Ê¨°ÁöÑÊó∂Èó¥ÈÉΩÂ∞è‰∫é 1ms„ÄÇ</p>
<p>Tablet ÊúçÂä°Âô®„ÄÅMaster ÊúçÂä°Âô®„ÄÅÊµãËØïÊú∫„ÄÅ‰ª•Âèä GFS ÊúçÂä°Âô®ÈÉΩËøêË°åÂú®Âêå‰∏ÄÁªÑÊú∫Âô®‰∏ä„ÄÇÊØèÂè∞Êú∫Âô®ÈÉΩËøêË°å‰∏Ä‰∏™ GFS ÁöÑÊúçÂä°Âô®„ÄÇÂÖ∂ÂÆÉÁöÑÊú∫Âô®Ë¶Å‰πàËøêË°å Tablet ÊúçÂä°Âô®„ÄÅË¶Å‰πàËøêË°åÂÆ¢Êà∑Á®ãÂ∫è„ÄÅË¶Å‰πàËøêË°åÂú®ÊµãËØïËøáÁ®ã‰∏≠Ôºå‰ΩøÁî®ËøôÁªÑ Êú∫Âô®ÁöÑÂÖ∂ÂÆÉÁöÑ‰ªªÂä°ÂêØÂä®ÁöÑËøõÁ®ã„ÄÇ</p>
<p>R ÊòØÊµãËØïËøáÁ®ã‰∏≠ÔºåBigtable ÂåÖÂê´ÁöÑ‰∏çÂêåÁöÑÂàóÂÖ≥ÈîÆÂ≠óÁöÑÊï∞Èáè„ÄÇÊàë‰ª¨Á≤æÂøÉÈÄâÊã© R ÁöÑÂÄºÔºå‰øùËØÅÊØèÊ¨°Âü∫ÂáÜÊµãËØïÂØπÊØè Âè∞ Tablet ÊúçÂä°Âô®ËØª/ÂÜôÁöÑÊï∞ÊçÆÈáèÈÉΩÂú® 1GB Â∑¶Âè≥„ÄÇ</p>
<p>Âú®Â∫èÂàóÂÜôÁöÑÂü∫ÂáÜÊµãËØï‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑÂàóÂÖ≥ÈîÆÂ≠óÁöÑËåÉÂõ¥ÊòØ 0 Âà∞ R-1„ÄÇËøô‰∏™ËåÉÂõ¥ÂèàË¢´ÂàíÂàÜ‰∏∫ 10N ‰∏™Â§ßÂ∞èÁõ∏Âêå ÁöÑÂå∫Èó¥„ÄÇÊ†∏ÂøÉË∞ÉÂ∫¶Á®ãÂ∫èÊääËøô‰∫õÂå∫Èó¥ÂàÜÈÖçÁªô N ‰∏™ÂÆ¢Êà∑Á´ØÔºåÂàÜÈÖçÊñπÂºèÊòØ:Âè™Ë¶ÅÂÆ¢Êà∑Á®ãÂ∫èÂ§ÑÁêÜÂÆå‰∏ä‰∏Ä‰∏™Âå∫Èó¥ÁöÑÊï∞ÊçÆÔºå Ë∞ÉÂ∫¶Á®ãÂ∫èÂ∞±ÊääÂêéÁª≠ÁöÑ„ÄÅÂ∞öÊú™Â§ÑÁêÜÁöÑÂå∫Èó¥ÂàÜÈÖçÁªôÂÆÉ„ÄÇËøôÁßçÂä®ÊÄÅÂàÜÈÖçÁöÑÊñπÂºèÊúâÂä©‰∫éÂáèÂ∞ëÂÆ¢Êà∑Êú∫‰∏äÂêåÊó∂ËøêË°åÁöÑÂÖ∂ÂÆÉ ËøõÁ®ãÂØπÊÄßËÉΩÁöÑÂΩ±Âìç„ÄÇÊàë‰ª¨Âú®ÊØè‰∏™ÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÂÜôÂÖ•‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÊØè‰∏™Â≠óÁ¨¶‰∏≤ÈÉΩÊòØÈöèÊú∫ÁîüÊàêÁöÑ„ÄÅÂõ†Ê≠§‰πüÊ≤° ÊúâË¢´ÂéãÁº©26„ÄÇÂè¶Â§ñÔºå‰∏çÂêåÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÁöÑÂ≠óÁ¨¶‰∏≤‰πüÊòØ‰∏çÂêåÁöÑÔºåÂõ†Ê≠§‰πüÂ∞±‰∏çÂ≠òÂú®Ë∑®Ë°åÁöÑÂéãÁº©„ÄÇÈöèÊú∫ÂÜôÂÖ•Âü∫ÂáÜÊµãËØïÈáá Áî®Á±ª‰ººÁöÑÊñπÊ≥ïÔºåÈô§‰∫ÜË°åÂÖ≥ÈîÆÂ≠óÂú®ÂÜôÂÖ•ÂâçÂÖàÂÅö HashÔºåHash ÈááÁî®Êåâ R ÂèñÊ®°ÁöÑÊñπÂºèÔºåËøôÊ†∑Â∞±‰øùËØÅ‰∫ÜÂú®Êï¥‰∏™Âü∫ÂáÜÊµã ËØïÊåÅÁª≠ÁöÑÊó∂Èó¥ÂÜÖÔºåÂÜôÂÖ•ÁöÑÂ∑•‰ΩúË¥üËΩΩÂùáÂåÄÁöÑÂàÜÂ∏ÉÂú®ÂàóÂ≠òÂÇ®Á©∫Èó¥ÂÜÖ„ÄÇ</p>
<p>Â∫èÂàóËØªÁöÑÂü∫ÂáÜÊµãËØïÁîüÊàêÂàóÂÖ≥ÈîÆÂ≠óÁöÑÊñπÂºè‰∏éÂ∫èÂàóÂÜôÁõ∏ÂêåÔºå‰∏çÂêå‰∫éÂ∫èÂàóÂÜôÂú®ÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÂÜôÂÖ•Â≠óÁ¨¶‰∏≤ÁöÑÊòØÔºåÂ∫è ÂàóËØªÊòØËØªÂèñÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÁöÑÂ≠óÁ¨¶‰∏≤(Ëøô‰∫õÂ≠óÁ¨¶‰∏≤Áî±‰πãÂâçÂ∫èÂàóÂÜôÂü∫ÂáÜÊµãËØïÁ®ãÂ∫èÂÜôÂÖ•)„ÄÇÂêåÊ†∑ÁöÑÔºåÈöèÊú∫ËØªÁöÑÂü∫ÂáÜÊµãËØï ÂíåÈöèÊú∫ÂÜôÊòØÁ±ª‰ººÁöÑ„ÄÇ</p>
<p>Êâ´ÊèèÂü∫ÂáÜÊµãËØïÂíåÂ∫èÂàóËØªÁ±ª‰ººÔºå‰ΩÜÊòØ‰ΩøÁî®ÁöÑÊòØ BigTable Êèê‰æõÁöÑ„ÄÅ‰ªé‰∏Ä‰∏™ÂàóËåÉÂõ¥ÂÜÖÊâ´ÊèèÊâÄÊúâÁöÑ value ÂÄºÁöÑ API„ÄÇ Áî±‰∫é‰∏ÄÊ¨° RPC Ë∞ÉÁî®Â∞±‰ªé‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÂèñÂõû‰∫ÜÂ§ßÈáèÁöÑ Value ÂÄºÔºåÂõ†Ê≠§Ôºå‰ΩøÁî®Êâ´ÊèèÊñπÂºèÁöÑÂü∫ÂáÜÊµãËØïÁ®ãÂ∫èÂèØ‰ª• ÂáèÂ∞ë RPC Ë∞ÉÁî®ÁöÑÊ¨°Êï∞„ÄÇ</p>
<p>ÈöèÊú∫ËØª(ÂÜÖÂ≠ò)Âü∫ÂáÜÊµãËØïÂíåÈöèÊú∫ËØªÁ±ª‰ººÔºåÈô§‰∫ÜÂåÖÂê´Âü∫ÂáÜÊµãËØïÊï∞ÊçÆÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑË¢´ËÆæÁΩÆ‰∏∫‚Äúin-memory‚ÄùÔºå Âõ†Ê≠§ÔºåËØªÊìç‰ΩúÁõ¥Êé•‰ªé Tablet ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠ò‰∏≠ËØªÂèñÊï∞ÊçÆÔºå‰∏çÈúÄË¶Å‰ªé GFS ËØªÂèñÊï∞ÊçÆ„ÄÇÈíàÂØπËøô‰∏™ÊµãËØïÔºåÊàë‰ª¨ÊääÊØèÂè∞<br>Tablet ÊúçÂä°Âô®Â≠òÂÇ®ÁöÑÊï∞ÊçÆ‰ªé 1GB ÂáèÂ∞ëÂà∞ 100MBÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊääÊï∞ÊçÆÂÖ®ÈÉ®Âä†ËΩΩÂà∞ Tablet ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠ò‰∏≠‰∫Ü„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15133942643148.jpg" alt><br>Âõæ 6 ‰∏≠Êúâ‰∏§‰∏™ËßÜÂõæÔºåÊòæÁ§∫‰∫ÜÊàë‰ª¨ÁöÑÂü∫ÂáÜÊµãËØïÁöÑÊÄßËÉΩ;Âõæ‰∏≠ÁöÑÊï∞ÊçÆÂíåÊõ≤Á∫øÊòØËØª/ÂÜô 1000-byte value ÂÄºÊó∂ÂèñÂæó ÁöÑ„ÄÇÂõæ‰∏≠ÁöÑË°®Ê†ºÊòæÁ§∫‰∫ÜÊØè‰∏™ Tablet ÊúçÂä°Âô®ÊØèÁßíÈíüËøõË°åÁöÑÊìç‰ΩúÁöÑÊ¨°Êï∞;Âõæ‰∏≠ÁöÑÊõ≤Á∫øÊòæÁ§∫‰∫ÜÊØèÁßíÁßçÊâÄÊúâÁöÑ Tablet ÊúçÂä°Âô®‰∏äÊìç‰ΩúÊ¨°Êï∞ÁöÑÊÄªÂíå„ÄÇ</p>
<h3 id="Âçï‰∏™-Tablet-ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ"><a href="#Âçï‰∏™-Tablet-ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ" class="headerlink" title="Âçï‰∏™ Tablet ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ"></a>Âçï‰∏™ Tablet ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ</h3><p>Êàë‰ª¨È¶ñÂÖàÂàÜÊûê‰∏ãÂçï‰∏™ Tablet ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ„ÄÇÈöèÊú∫ËØªÁöÑÊÄßËÉΩÊØîÂÖ∂ÂÆÉÊìç‰ΩúÊÖ¢‰∏Ä‰∏™Êï∞ÈáèÁ∫ßÊàñ‰ª•‰∏ä27„ÄÇ ÊØè‰∏™ÈöèÊú∫ ËØªÊìç‰ΩúÈÉΩË¶ÅÈÄöËøáÁΩëÁªú‰ªé GFS ‰º†Ëæì 64KB ÁöÑ SSTable Âà∞ Tablet ÊúçÂä°Âô®ÔºåËÄåÊàë‰ª¨Âè™‰ΩøÁî®ÂÖ∂‰∏≠Â§ßÂ∞èÊòØ 1000 byte ÁöÑ‰∏Ä ‰∏™ value ÂÄº„ÄÇTablet ÊúçÂä°Âô®ÊØèÁßíÂ§ßÁ∫¶ÊâßË°å 1200 Ê¨°ËØªÊìç‰ΩúÔºå‰πüÂ∞±ÊòØÊØèÁßíÂ§ßÁ∫¶‰ªé GFS ËØªÂèñ 75MB ÁöÑÊï∞ÊçÆ„ÄÇËøô‰∏™‰º† ËæìÂ∏¶ÂÆΩË∂≥‰ª•Âç†Êª° Tablet ÊúçÂä°Âô®ÁöÑ CPU Êó∂Èó¥ÔºåÂõ†‰∏∫ÂÖ∂‰∏≠ÂåÖÊã¨‰∫ÜÁΩëÁªúÂçèËÆÆÊ†àÁöÑÊ∂àËÄó„ÄÅSSTable Ëß£Êûê„ÄÅ‰ª•Âèä BigTable ‰ª£Á†ÅÊâßË°å;Ëøô‰∏™Â∏¶ÂÆΩ‰πüË∂≥‰ª•Âç†Êª°Êàë‰ª¨Á≥ªÁªü‰∏≠ÁΩëÁªúÁöÑÈìæÊé•Â∏¶ÂÆΩ„ÄÇÂ§ßÂ§öÊï∞ÈááÁî®ËøôÁßçËÆøÈóÆÊ®°Âºè BigTable Â∫îÁî®Á®ãÂ∫è‰ºö ÂáèÂ∞è Block ÁöÑÂ§ßÂ∞èÔºåÈÄöÂ∏∏‰ºöÂáèÂà∞ 8KB„ÄÇ</p>
<p>ÂÜÖÂ≠ò‰∏≠ÁöÑÈöèÊú∫ËØªÊìç‰ΩúÈÄüÂ∫¶Âø´ÂæàÂ§öÔºåÂéüÂõ†ÊòØÔºåÊâÄÊúâ 1000-byte ÁöÑËØªÊìç‰ΩúÈÉΩÊòØ‰ªé Tablet ÊúçÂä°Âô®ÁöÑÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠ËØª ÂèñÊï∞ÊçÆÔºå‰∏çÈúÄË¶Å‰ªé GFS ËØªÂèñ 64KB ÁöÑ Block„ÄÇ</p>
<p>ÈöèÊú∫ÂíåÂ∫èÂàóÂÜôÊìç‰ΩúÁöÑÊÄßËÉΩÊØîÈöèÊú∫ËØªË¶ÅÂ•Ω‰∫õÔºåÂéüÂõ†ÊòØÊØè‰∏™ Tablet ÊúçÂä°Âô®Áõ¥Êé•ÊääÂÜôÂÖ•Êìç‰ΩúÁöÑÂÜÖÂÆπËøΩÂä†Âà∞‰∏Ä‰∏™ Commit Êó•ÂøóÊñá‰ª∂ÁöÑÂ∞æÈÉ®ÔºåÂπ∂‰∏îÈááÁî®ÊâπÈáèÊèê‰∫§ÁöÑÊñπÂºèÔºåÈÄöËøáÊääÊï∞ÊçÆ‰ª•ÊµÅÁöÑÊñπÂºèÂÜôÂÖ•Âà∞ GFS Êù•ÊèêÈ´òÊÄßËÉΩ„ÄÇÈöèÊú∫ ÂÜôÂíåÂ∫èÂàóÂÜôÂú®ÊÄßËÉΩ‰∏äÊ≤°ÊúâÂ§™Â§ßÁöÑÂ∑ÆÂºÇÔºåËøô‰∏§ÁßçÊñπÂºèÁöÑÂÜôÊìç‰ΩúÂÆûÈôÖ‰∏äÈÉΩÊòØÊääÊìç‰ΩúÂÜÖÂÆπËÆ∞ÂΩïÂà∞Âêå‰∏Ä‰∏™ Tablet ÊúçÂä° Âô®ÁöÑ Commit Êó•ÂøóÊñá‰ª∂‰∏≠„ÄÇ</p>
<p>Â∫èÂàóËØªÁöÑÊÄßËÉΩÂ•Ω‰∫éÈöèÊú∫ËØªÔºåÂõ†‰∏∫ÊØèÂèñÂá∫ 64KB ÁöÑ SSTable ÁöÑ Block ÂêéÔºåËøô‰∫õÊï∞ÊçÆ‰ºöÁºìÂ≠òÂà∞ Block ÁºìÂ≠ò‰∏≠Ôºå ÂêéÁª≠ÁöÑ 64 Ê¨°ËØªÊìç‰ΩúÁõ¥Êé•‰ªéÁºìÂ≠òËØªÂèñÊï∞ÊçÆ„ÄÇ</p>
<p>Êâ´ÊèèÁöÑÊÄßËÉΩÊõ¥È´òÔºåËøôÊòØÁî±‰∫éÂÆ¢Êà∑Á®ãÂ∫èÊØè‰∏ÄÊ¨° RPC Ë∞ÉÁî®ÈÉΩ‰ºöËøîÂõûÂ§ßÈáèÁöÑ value ÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•ÔºåRPC Ë∞ÉÁî®ÁöÑ Ê∂àËÄóÂü∫Êú¨ÊäµÊ∂à‰∫Ü„ÄÇ</p>
<h3 id="ÊÄßËÉΩÊèêÂçá"><a href="#ÊÄßËÉΩÊèêÂçá" class="headerlink" title="ÊÄßËÉΩÊèêÂçá"></a>ÊÄßËÉΩÊèêÂçá</h3><p>ÈöèÁùÄÊàë‰ª¨Â∞ÜÁ≥ªÁªü‰∏≠ÁöÑ Tablet ÊúçÂä°Âô®‰ªé 1 Âè∞Â¢ûÂä†Âà∞ 500 Âè∞ÔºåÁ≥ªÁªüÁöÑÊï¥‰ΩìÂêûÂêêÈáèÊúâ‰∫ÜÊ¢¶ÂπªËà¨ÁöÑÂ¢ûÈïøÔºåÂ¢ûÈïøÁöÑ ÂÄçÁéáË∂ÖËøá‰∫Ü 100„ÄÇÊØîÂ¶ÇÔºåÈöèÁùÄ Tablet ÊúçÂä°Âô®ÁöÑÊï∞ÈáèÂ¢ûÂä†‰∫Ü 500 ÂÄçÔºåÂÜÖÂ≠ò‰∏≠ÁöÑÈöèÊú∫ËØªÊìç‰ΩúÁöÑÊÄßËÉΩÂ¢ûÂä†‰∫Ü 300 ÂÄç„ÄÇ ‰πãÊâÄ‰ª•‰ºöÊúâËøôÊ†∑ÁöÑÊÄßËÉΩÊèêÂçáÔºå‰∏ªË¶ÅÊòØÂõ†‰∏∫Ëøô‰∏™Âü∫ÂáÜÊµãËØïÁöÑÁì∂È¢àÊòØÂçïÂè∞ Tablet ÊúçÂä°Âô®ÁöÑ CPU„ÄÇ</p>
<p>Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÊÄßËÉΩÁöÑÊèêÂçáËøò‰∏çÊòØÁ∫øÊÄßÁöÑ„ÄÇÂú®Â§ßÂ§öÊï∞ÁöÑÂü∫ÂáÜÊµãËØï‰∏≠Êàë‰ª¨ÁúãÂà∞ÔºåÂΩì Tablet ÊúçÂä°Âô®ÁöÑÊï∞Èáè‰ªé 1 Âè∞ Â¢ûÂä†Âà∞ 50 Âè∞Êó∂ÔºåÊØèÂè∞ÊúçÂä°Âô®ÁöÑÂêûÂêêÈáè‰ºöÊúâ‰∏Ä‰∏™ÊòéÊòæÁöÑ‰∏ãÈôç„ÄÇËøôÊòØÁî±‰∫éÂ§öÂè∞ÊúçÂä°Âô®Èó¥ÁöÑË¥üËΩΩ‰∏çÂùáË°°ÈÄ†ÊàêÁöÑÔºåÂ§ß Â§öÊï∞ÊÉÖÂÜµ‰∏ãÊòØÁî±‰∫éÂÖ∂ÂÆÉÁöÑÁ®ãÂ∫èÊä¢Âç†‰∫Ü CPU„ÄÇ Êàë‰ª¨Ë¥üËΩΩÂùáË°°ÁöÑÁÆóÊ≥ï‰ºöÂ∞ΩÈáèÈÅøÂÖçËøôÁßç‰∏çÂùáË°°Ôºå‰ΩÜÊòØÂü∫‰∫é‰∏§‰∏™‰∏ªË¶Å ÂéüÂõ†ÔºåËøô‰∏™ÁÆóÊ≥ïÂπ∂‰∏çËÉΩÂÆåÁæéÁöÑÂ∑•‰Ωú:‰∏Ä‰∏™ÊòØÂ∞ΩÈáèÂáèÂ∞ë Tablet ÁöÑÁßªÂä®ÂØºËá¥ÈáçÊñ∞Ë¥üËΩΩÂùáË°°ËÉΩÂäõÂèóÈôê(Â¶ÇÊûú Tablet Ë¢´ÁßªÂä®‰∫ÜÔºåÈÇ£‰πàÂú®Áü≠Êó∂Èó¥ÂÜÖ ‚Äî ‰∏ÄËà¨ÊòØ 1 ÁßíÂÜÖ ‚Äî Ëøô‰∏™ Tablet ÊòØ‰∏çÂèØÁî®ÁöÑ)ÔºåÂè¶‰∏Ä‰∏™ÊòØÊàë‰ª¨ÁöÑÂü∫ÂáÜÊµãËØïÁ®ãÂ∫è‰∫ß ÁîüÁöÑË¥üËΩΩ‰ºöÊúâÊ≥¢Âä®28„ÄÇ</p>
<p>ÈöèÊú∫ËØªÂü∫ÂáÜÊµãËØïÁöÑÊµãËØïÁªìÊûúÊòæÁ§∫ÔºåÈöèÊú∫ËØªÁöÑÊÄßËÉΩÈöè Tablet ÊúçÂä°Âô®Êï∞ÈáèÂ¢ûÂä†ÁöÑÊèêÂçáÂπÖÂ∫¶ÊúÄÂ∞è(Êï¥‰ΩìÂêûÂêêÈáè Âè™ÊèêÂçá‰∫Ü 100 ÂÄçÔºåËÄåÊúçÂä°Âô®ÁöÑÊï∞ÈáèÂç¥Â¢ûÂä†‰∫Ü 500 ÂÄç)„ÄÇËøôÊòØÂõ†‰∏∫ÊØè‰∏™ 1000-byte ÁöÑËØªÊìç‰ΩúÈÉΩ‰ºöÂØºËá¥‰∏Ä‰∏™ 64KB Â§ßÁöÑ Block Âú®ÁΩëÁªú‰∏ä‰º†Ëæì„ÄÇËøôÊ†∑ÁöÑÁΩëÁªú‰º†ËæìÈáèÊ∂àËÄó‰∫ÜÊàë‰ª¨ÁΩëÁªú‰∏≠ÂêÑÁßçÂÖ±‰∫´ÁöÑ 1GB ÁöÑÈìæË∑ØÔºåÁªìÊûúÂØºËá¥ÈöèÁùÄÊàë‰ª¨ Â¢ûÂä†ÊúçÂä°Âô®ÁöÑÊï∞ÈáèÔºåÊØèÂè∞ÊúçÂä°Âô®‰∏äÁöÑÂêûÂêêÈáèÊÄ•Ââß‰∏ãÈôç„ÄÇ<br><div class="note info"><h2 id="ÂÆûÈôÖÂ∫îÁî®"><a href="#ÂÆûÈôÖÂ∫îÁî®" class="headerlink" title="ÂÆûÈôÖÂ∫îÁî®"></a>ÂÆûÈôÖÂ∫îÁî®</h2></div><br><img src="http://oliji9s3j.bkt.clouddn.com/15133943363496.jpg" alt><br>Êà™Ê≠¢Âà∞ 2006 Âπ¥ 8 ÊúàÔºåGoogle ÂÜÖÈÉ®‰∏ÄÂÖ±Êúâ 388 ‰∏™ÈùûÊµãËØïÁî®ÁöÑ Bigtable ÈõÜÁæ§ËøêË°åÂú®ÂêÑÁßçÂêÑÊ†∑ÁöÑÊúçÂä°Âô®ÈõÜÁæ§‰∏äÔºå ÂêàËÆ°Â§ßÁ∫¶Êúâ 24500 ‰∏™ Tablet ÊúçÂä°Âô®„ÄÇË°® 1 ÊòæÁ§∫‰∫ÜÊØè‰∏™ÈõÜÁæ§‰∏ä Tablet ÊúçÂä°Âô®ÁöÑÂ§ßËá¥ÂàÜÂ∏ÉÊÉÖÂÜµ„ÄÇËøô‰∫õÈõÜÁæ§‰∏≠ÔºåËÆ∏ Â§öÁî®‰∫éÂºÄÂèëÁõÆÁöÑÔºåÂõ†Ê≠§‰ºöÊúâ‰∏ÄÊÆµÊó∂ÊúüÊØîËæÉÁ©∫Èó≤„ÄÇÈÄöËøáËßÇÂØü‰∏Ä‰∏™Áî± 14 ‰∏™ÈõÜÁæ§„ÄÅ8069 ‰∏™ Tablet ÊúçÂä°Âô®ÁªÑÊàêÁöÑÈõÜÁæ§ ÁªÑÔºåÊàë‰ª¨ÁúãÂà∞Êï¥‰ΩìÁöÑÂêûÂêêÈáèË∂ÖËøá‰∫ÜÊØèÁßí 1200000 Ê¨°ËØ∑Ê±ÇÔºåÂèëÈÄÅÂà∞Á≥ªÁªüÁöÑ RPC ËØ∑Ê±ÇÂØºËá¥ÁöÑÁΩëÁªúË¥üËΩΩËææÂà∞‰∫Ü 741MB/sÔºåÁ≥ªÁªüÂèëÂá∫ÁöÑ RPC ËØ∑Ê±ÇÁΩëÁªúË¥üËΩΩÂ§ßÁ∫¶ÊòØ 16GB/s„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15133944195571.jpg" alt><br>Ë°® 2 Êèê‰æõ‰∫Ü‰∏Ä‰∫õÁõÆÂâçÊ≠£Âú®‰ΩøÁî®ÁöÑË°®ÁöÑÁõ∏ÂÖ≥Êï∞ÊçÆ„ÄÇ‰∏Ä‰∫õË°®Â≠òÂÇ®ÁöÑÊòØÁî®Êà∑Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÔºåÂè¶Â§ñ‰∏Ä‰∫õÂ≠òÂÇ®ÁöÑÂàôÊòØ Áî®‰∫éÊâπÂ§ÑÁêÜÁöÑÊï∞ÊçÆ;Ëøô‰∫õË°®Âú®ÊÄªÁöÑÂ§ßÂ∞è„ÄÅ ÊØè‰∏™Êï∞ÊçÆÈ°πÁöÑÂπ≥ÂùáÂ§ßÂ∞è„ÄÅ‰ªéÂÜÖÂ≠ò‰∏≠ËØªÂèñÁöÑÊï∞ÊçÆÁöÑÊØî‰æã„ÄÅË°®ÁöÑ Schema ÁöÑÂ§çÊùÇÁ®ãÂ∫¶‰∏äÈÉΩÊúâÂæàÂ§ßÁöÑÂ∑ÆÂà´„ÄÇÊú¨ËäÇÁöÑÂÖ∂‰ΩôÈÉ®ÂàÜÔºåÊàë‰ª¨Â∞Ü‰∏ªË¶ÅÊèèËø∞‰∏â‰∏™‰∫ßÂìÅÁ†îÂèëÂõ¢ÈòüÂ¶Ç‰Ωï‰ΩøÁî® Bigtable ÁöÑ„ÄÇ</p>
<h3 id="Google-Analytics"><a href="#Google-Analytics" class="headerlink" title="Google Analytics"></a>Google Analytics</h3><p>Google Analytics ÊòØÁî®Êù•Â∏ÆÂä© Web Á´ôÁÇπÁöÑÁÆ°ÁêÜÂëòÂàÜÊûê‰ªñ‰ª¨ÁΩëÁ´ôÁöÑÊµÅÈáèÊ®°ÂºèÁöÑÊúçÂä°„ÄÇÂÆÉÊèê‰æõ‰∫ÜÊï¥‰ΩìÁä∂ÂÜµÁöÑÁªü ËÆ°Êï∞ÊçÆÔºåÊØîÂ¶ÇÊØèÂ§©ÁöÑÁã¨Á´ãËÆøÈóÆÁöÑÁî®Êà∑Êï∞Èáè„ÄÅÊØèÂ§©ÊØè‰∏™ URL ÁöÑÊµèËßàÊ¨°Êï∞;ÂÆÉËøòÊèê‰æõ‰∫ÜÁî®Êà∑‰ΩøÁî®ÁΩëÁ´ôÁöÑË°å‰∏∫Êä•ÂëäÔºå ÊØîÂ¶ÇÊ†πÊçÆÁî®Êà∑‰πãÂâçËÆøÈóÆÁöÑÊüê‰∫õÈ°µÈù¢ÔºåÁªüËÆ°Âá∫Âá†ÊàêÁöÑÁî®Êà∑Ë¥≠‰π∞‰∫ÜÂïÜÂìÅ„ÄÇ</p>
<p>‰∏∫‰∫Ü‰ΩøÁî®Ëøô‰∏™ÊúçÂä°ÔºåWeb Á´ôÁÇπÁöÑÁÆ°ÁêÜÂëòÂè™ÈúÄË¶ÅÂú®‰ªñ‰ª¨ÁöÑ Web È°µÈù¢‰∏≠ÂµåÂÖ•‰∏ÄÂ∞èÊÆµ JavaScript ËÑöÊú¨Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ Ëøô‰∏™ Javascript Á®ãÂ∫èÂú®È°µÈù¢Ë¢´ËÆøÈóÆÁöÑÊó∂ÂÄôË∞ÉÁî®„ÄÇÂÆÉËÆ∞ÂΩï‰∫ÜÂêÑÁßç Google Analytics ÈúÄË¶Å‰ΩøÁî®ÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶ÇÁî®Êà∑ÁöÑ Ê†áËØÜ„ÄÅËé∑ÂèñÁöÑÁΩëÈ°µÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇGoogle Analytics Ê±áÊÄªËøô‰∫õÊï∞ÊçÆÔºå‰πãÂêéÊèê‰æõÁªô Web Á´ôÁÇπÁöÑÁÆ°ÁêÜÂëò„ÄÇ</p>
<p>Êàë‰ª¨Á≤óÁï•ÁöÑÊèèËø∞‰∏Ä‰∏ã Google Analytics ‰ΩøÁî®ÁöÑ‰∏§‰∏™Ë°®„ÄÇRow Click Ë°®(Â§ßÁ∫¶Êúâ 200TB Êï∞ÊçÆ)ÁöÑÊØè‰∏ÄË°åÂ≠òÊîæ ‰∫Ü‰∏Ä‰∏™ÊúÄÁªàÁî®Êà∑ÁöÑ‰ºöËØù„ÄÇË°åÁöÑÂêçÂ≠óÊòØ‰∏Ä‰∏™ÂåÖÂê´ Web Á´ôÁÇπÂêçÂ≠ó‰ª•ÂèäÁî®Êà∑‰ºöËØùÂàõÂª∫Êó∂Èó¥ÁöÑÂÖÉÁªÑ„ÄÇËøôÁßçÊ®°Âºè‰øùËØÅ‰∫Ü ÂØπÂêå‰∏Ä‰∏™ Web Á´ôÁÇπÁöÑËÆøÈóÆ‰ºöËØùÊòØÈ°∫Â∫èÁöÑÔºå‰ºöËØùÊåâÊó∂Èó¥È°∫Â∫èÂ≠òÂÇ®„ÄÇËøô‰∏™Ë°®ÂèØ‰ª•ÂéãÁº©Âà∞ÂéüÊù•Â∞∫ÂØ∏ÁöÑ 14%„ÄÇ</p>
<p>Summary Ë°®(Â§ßÁ∫¶Êúâ 20TB ÁöÑÊï∞ÊçÆ)ÂåÖÂê´‰∫ÜÂÖ≥‰∫éÊØè‰∏™ Web Á´ôÁÇπÁöÑ„ÄÅÂêÑÁßçÁ±ªÂûãÁöÑÈ¢ÑÂÆö‰πâÊ±áÊÄª‰ø°ÊÅØ„ÄÇ‰∏Ä‰∏™Âë® ÊúüÊÄßËøêË°åÁöÑ MapReduce ‰ªªÂä°Ê†πÊçÆ Raw Click Ë°®ÁöÑÊï∞ÊçÆÁîüÊàê Summary Ë°®ÁöÑÊï∞ÊçÆ„ÄÇÊØè‰∏™ MapReduce Â∑•‰ΩúËøõÁ®ãÈÉΩ ‰ªé Raw Click Ë°®‰∏≠ÊèêÂèñÊúÄÊñ∞ÁöÑ‰ºöËØùÊï∞ÊçÆ„ÄÇÁ≥ªÁªüÁöÑÊï¥‰ΩìÂêûÂêêÈáèÂèóÈôê‰∫é GFS ÁöÑÂêûÂêêÈáè„ÄÇËøô‰∏™Ë°®ÁöÑËÉΩÂ§üÂéãÁº©Âà∞ÂéüÊúâ Â∞∫ÂØ∏ÁöÑ 29%„ÄÇ</p>
<h3 id="Google-Earth"><a href="#Google-Earth" class="headerlink" title="Google Earth"></a>Google Earth</h3><p>Google ÈÄöËøá‰∏ÄÁªÑÊúçÂä°‰∏∫Áî®Êà∑Êèê‰æõ‰∫ÜÈ´òÂàÜËæ®ÁéáÁöÑÂú∞ÁêÉË°®Èù¢Âç´ÊòüÂõæÂÉèÔºåËÆøÈóÆÁöÑÊñπÂºèÂèØ‰ª•‰ΩøÈÄöËøáÂü∫‰∫é Web ÁöÑ Google Maps ËÆøÈóÆÊé•Âè£(maps.google.com)Ôºå‰πüÂèØ‰ª•ÈÄöËøá Google Earth ÂÆöÂà∂ÁöÑÂÆ¢Êà∑Á´ØËΩØ‰ª∂ËÆøÈóÆ„ÄÇËøô‰∫õËΩØ‰ª∂‰∫ßÂìÅ ÂÖÅËÆ∏Áî®Êà∑ÊµèËßàÂú∞ÁêÉË°®Èù¢ÁöÑÂõæÂÉè:Áî®Êà∑ÂèØ‰ª•Âú®‰∏çÂêåÁöÑÂàÜËæ®Áéá‰∏ãÂπ≥Áßª„ÄÅÊü•ÁúãÂíåÊ≥®ÈáäËøô‰∫õÂç´ÊòüÂõæÂÉè„ÄÇËøô‰∏™Á≥ªÁªü‰ΩøÁî®‰∏Ä‰∏™Ë°®Â≠òÂÇ®È¢ÑÂ§ÑÁêÜÊï∞ÊçÆÔºå‰ΩøÁî®Âè¶Â§ñ‰∏ÄÁªÑË°®Â≠òÂÇ®Áî®Êà∑Êï∞ÊçÆ„ÄÇ</p>
<p>Êï∞ÊçÆÈ¢ÑÂ§ÑÁêÜÊµÅÊ∞¥Á∫ø‰ΩøÁî®‰∏Ä‰∏™Ë°®Â≠òÂÇ®ÂéüÂßãÂõæÂÉè„ÄÇÂú®È¢ÑÂ§ÑÁêÜËøáÁ®ã‰∏≠ÔºåÂõæÂÉèË¢´Ê∏ÖÈô§ÔºåÂõæÂÉèÊï∞ÊçÆÂêàÂπ∂Âà∞ÊúÄÁªàÁöÑÊúç<br>Âä°Êï∞ÊçÆ‰∏≠„ÄÇËøô‰∏™Ë°®ÂåÖÂê´‰∫ÜÂ§ßÁ∫¶ 70TB ÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•ÈúÄË¶Å‰ªéÁ£ÅÁõòËØªÂèñÊï∞ÊçÆ„ÄÇÂõæÂÉèÂ∑≤ÁªèË¢´È´òÊïàÂéãÁº©Ëøá‰∫ÜÔºåÂõ†Ê≠§Â≠ò ÂÇ®Âú® Bigtable Âêé‰∏çÈúÄË¶ÅÂÜçÂéãÁº©‰∫Ü„ÄÇ</p>
<p>Imagery Ë°®ÁöÑÊØè‰∏ÄË°åÈÉΩ‰ª£Ë°®‰∫Ü‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂú∞ÁêÜÂå∫Âüü„ÄÇË°åÈÉΩÊúâÂêçÁß∞Ôºå‰ª•Á°Æ‰øùÊØóÈÇªÁöÑÂå∫ÂüüÂ≠òÂÇ®Âú®‰∫Ü‰∏ÄËµ∑„ÄÇ Imagery Ë°®‰∏≠Êúâ‰∏Ä‰∏™ÂàóÊóèÁî®Êù•ËÆ∞ÂΩïÊØè‰∏™Âå∫ÂüüÁöÑÊï∞ÊçÆÊ∫ê„ÄÇËøô‰∏™ÂàóÊóèÂåÖÂê´‰∫ÜÂ§ßÈáèÁöÑÂàó:Âü∫Êú¨‰∏äÂ∏ÇÊØè‰∏™ÂàóÂØπÂ∫î‰∏Ä‰∏™Âéü ÂßãÂõæÁâáÁöÑÊï∞ÊçÆ„ÄÇÁî±‰∫éÊØè‰∏™Âú∞ÁêÜÂå∫ÂüüÈÉΩÊòØÁî±ÂæàÂ∞ëÁöÑÂá†Âº†ÂõæÁâáÊûÑÊàêÁöÑÔºåÂõ†Ê≠§Ëøô‰∏™ÂàóÊóèÊòØÈùûÂ∏∏Á®ÄÁñèÁöÑ„ÄÇ</p>
<p>Êï∞ÊçÆÈ¢ÑÂ§ÑÁêÜÊµÅÊ∞¥Á∫øÈ´òÂ∫¶‰æùËµñËøêË°åÂú® Bigtable ‰∏äÁöÑ MapReduce ‰ªªÂä°‰º†ËæìÊï∞ÊçÆ„ÄÇÂú®ËøêË°åÊüê‰∫õ MapReduce ‰ªªÂä° ÁöÑÊó∂ÂÄôÔºåÊï¥‰∏™Á≥ªÁªü‰∏≠ÊØèÂè∞ Tablet ÊúçÂä°Âô®ÁöÑÊï∞ÊçÆÂ§ÑÁêÜÈÄüÂ∫¶ÊòØ 1MB/s„ÄÇ</p>
<p>Ëøô‰∏™ÊúçÂä°Á≥ªÁªü‰ΩøÁî®‰∏Ä‰∏™Ë°®Êù•Á¥¢Âºï GFS ‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇËøô‰∏™Ë°®Áõ∏ÂØπËæÉÂ∞è(Â§ßÁ∫¶ÊòØ 500GB)Ôºå‰ΩÜÊòØËøô‰∏™Ë°®ÂøÖÈ°ªÂú® ‰øùËØÅËæÉ‰ΩéÁöÑÂìçÂ∫îÂª∂Êó∂ÁöÑÂâçÊèê‰∏ãÔºåÈíàÂØπÊØè‰∏™Êï∞ÊçÆ‰∏≠ÂøÉÔºåÊØèÁßíÂ§ÑÁêÜÂá†‰∏á‰∏™Êü•ËØ¢ËØ∑Ê±Ç„ÄÇ Âõ†Ê≠§ÔºåËøô‰∏™Ë°®ÂøÖÈ°ªÂú®‰∏äÁôæ‰∏™ Tablet ÊúçÂä°Âô®‰∏äÂ≠òÂÇ®Êï∞ÊçÆÔºåÂπ∂‰∏î‰ΩøÁî® in-memory ÁöÑÂàóÊóè„ÄÇ</p>
<h3 id="‰∏™ÊÄßÂåñÊü•ËØ¢"><a href="#‰∏™ÊÄßÂåñÊü•ËØ¢" class="headerlink" title="‰∏™ÊÄßÂåñÊü•ËØ¢"></a>‰∏™ÊÄßÂåñÊü•ËØ¢</h3><p>‰∏™ÊÄßÂåñÊü•ËØ¢(<a href="http://www.google.com/psearch)ÊòØ‰∏Ä‰∏™ÂèåÂêëÊúçÂä°;Ëøô‰∏™ÊúçÂä°ËÆ∞ÂΩïÁî®Êà∑ÁöÑÊü•ËØ¢ÂíåÁÇπÂáªÔºåÊ∂âÂèäÂà∞ÂêÑÁßç" target="_blank" rel="noopener">www.google.com/psearch)ÊòØ‰∏Ä‰∏™ÂèåÂêëÊúçÂä°;Ëøô‰∏™ÊúçÂä°ËÆ∞ÂΩïÁî®Êà∑ÁöÑÊü•ËØ¢ÂíåÁÇπÂáªÔºåÊ∂âÂèäÂà∞ÂêÑÁßç</a> Google ÁöÑÊúçÂä°ÔºåÊØîÂ¶Ç Web Êü•ËØ¢„ÄÅÂõæÂÉèÂíåÊñ∞Èóª„ÄÇÁî®Êà∑ÂèØ‰ª•ÊµèËßà‰ªñ‰ª¨Êü•ËØ¢ÁöÑÂéÜÂè≤ÔºåÈáçÂ§ç‰ªñ‰ª¨‰πãÂâçÁöÑÊü•ËØ¢ÂíåÁÇπÂáª; Áî®Êà∑‰πüÂèØ‰ª•ÂÆöÂà∂Âü∫‰∫é Google ÂéÜÂè≤‰ΩøÁî®‰π†ÊÉØÊ®°ÂºèÁöÑ‰∏™ÊÄßÂåñÊü•ËØ¢ÁªìÊûú„ÄÇ</p>
<p>‰∏™ÊÄßÂåñÊü•ËØ¢‰ΩøÁî® Bigtable Â≠òÂÇ®ÊØè‰∏™Áî®Êà∑ÁöÑÊï∞ÊçÆ„ÄÇÊØè‰∏™Áî®Êà∑ÈÉΩÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÁî®Êà∑ idÔºåÊØè‰∏™Áî®Êà∑ id Âíå‰∏Ä‰∏™Âàó ÂêçÁªëÂÆö„ÄÇ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂàóÊóèË¢´Áî®Êù•Â≠òÂÇ®ÂêÑÁßçÁ±ªÂûãÁöÑË°å‰∏∫(ÊØîÂ¶ÇÔºåÊúâ‰∏™ÂàóÊóèÂèØËÉΩÊòØÁî®Êù•Â≠òÂÇ®ÊâÄÊúâÁöÑ Web Êü•ËØ¢ÁöÑ)„ÄÇ ÊØè‰∏™Êï∞ÊçÆÈ°πÈÉΩË¢´Áî®‰Ωú Bigtable ÁöÑÊó∂Èó¥Êà≥ÔºåËÆ∞ÂΩï‰∫ÜÁõ∏Â∫îÁöÑÁî®Êà∑Ë°å‰∏∫ÂèëÁîüÁöÑÊó∂Èó¥„ÄÇ‰∏™ÊÄßÂåñÊü•ËØ¢‰ΩøÁî®‰ª• Bigtable ‰∏∫ Â≠òÂÇ®ÁöÑ MapReduce ‰ªªÂä°ÁîüÊàêÁî®Êà∑ÁöÑÊï∞ÊçÆÂõæË°®„ÄÇËøô‰∫õÁî®Êà∑Êï∞ÊçÆÂõæË°®Áî®Êù•‰∏™ÊÄßÂåñÂΩìÂâçÁöÑÊü•ËØ¢ÁªìÊûú„ÄÇ</p>
<p>‰∏™ÊÄßÂåñÊü•ËØ¢ÁöÑÊï∞ÊçÆ‰ºöÂ§çÂà∂Âà∞Âá†‰∏™ Bigtable ÁöÑÈõÜÁæ§‰∏äÔºåËøôÊ†∑Â∞±Â¢ûÂº∫‰∫ÜÊï∞ÊçÆÂèØÁî®ÊÄßÔºåÂêåÊó∂ÂáèÂ∞ë‰∫ÜÁî±ÂÆ¢Êà∑Á´ØÂíå Bigtable ÈõÜÁæ§Èó¥ÁöÑ‚ÄúË∑ùÁ¶ª‚ÄùÈÄ†ÊàêÁöÑÂª∂Êó∂„ÄÇ‰∏™ÊÄßÂåñÊü•ËØ¢ÁöÑÂºÄÂèëÂõ¢ÈòüÊúÄÂàùÂª∫Á´ã‰∫Ü‰∏Ä‰∏™Âü∫‰∫é Bigtable ÁöÑ„ÄÅ‚ÄúÂÆ¢Êà∑‰æß‚Äù ÁöÑÂ§çÂà∂Êú∫Âà∂‰∏∫ÊâÄÊúâÁöÑÂ§çÂà∂ËäÇÁÇπÊèê‰æõ‰∏ÄËá¥ÊÄß‰øùÈöú„ÄÇÁé∞Âú®ÁöÑÁ≥ªÁªüÂàô‰ΩøÁî®‰∫ÜÂÜÖÂª∫ÁöÑÂ§çÂà∂Â≠êÁ≥ªÁªü„ÄÇ</p>
<p>‰∏™ÊÄßÂåñÊü•ËØ¢Â≠òÂÇ®Á≥ªÁªüÁöÑËÆæËÆ°ÂÖÅËÆ∏ÂÖ∂ÂÆÉÁöÑÂõ¢ÈòüÂú®ÂÆÉ‰ª¨Ëá™Â∑±ÁöÑÂàó‰∏≠Âä†ÂÖ•Êñ∞ÁöÑÁî®Êà∑Êï∞ÊçÆÔºåÂõ†Ê≠§ÔºåÂæàÂ§ö Google Êúç Âä°‰ΩøÁî®‰∏™ÊÄßÂåñÊü•ËØ¢Â≠òÂÇ®Á≥ªÁªü‰øùÂ≠òÁî®Êà∑Á∫ßÁöÑÈÖçÁΩÆÂèÇÊï∞ÂíåËÆæÁΩÆ„ÄÇÂú®Â§ö‰∏™Âõ¢Èòü‰πãÈó¥ÂàÜ‰∫´Êï∞ÊçÆÁöÑÁªìÊûúÊòØ‰∫ßÁîü‰∫ÜÂ§ßÈáèÁöÑ ÂàóÊóè„ÄÇ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÊîØÊåÅÊï∞ÊçÆÂÖ±‰∫´ÔºåÊàë‰ª¨Âä†ÂÖ•‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑÈÖçÈ¢ùÊú∫Âà∂29ÈôêÂà∂Áî®Êà∑Âú®ÂÖ±‰∫´Ë°®‰∏≠‰ΩøÁî®ÁöÑÁ©∫Èó¥;ÈÖçÈ¢ù‰πü ‰∏∫‰ΩøÁî®‰∏™ÊÄßÂåñÊü•ËØ¢Á≥ªÁªüÂ≠òÂÇ®Áî®Êà∑Á∫ß‰ø°ÊÅØÁöÑ‰∫ßÂìÅÂõ¢‰ΩìÊèê‰æõ‰∫ÜÈöîÁ¶ªÊú∫Âà∂„ÄÇ</p>
<div class="note info"><h2 id="ÁªèÈ™åÊïôËÆ≠"><a href="#ÁªèÈ™åÊïôËÆ≠" class="headerlink" title="ÁªèÈ™åÊïôËÆ≠"></a>ÁªèÈ™åÊïôËÆ≠</h2></div>
<p>Âú®ËÆæËÆ°„ÄÅÂÆûÁé∞„ÄÅÁª¥Êä§ÂíåÊîØÊåÅ Bigtable ÁöÑËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÂæóÂà∞‰∫ÜÂæàÂ§öÊúâÁî®ÁöÑÁªèÈ™åÂíå‰∏Ä‰∫õÊúâË∂£ÁöÑÊïôËÆ≠„ÄÇ<br>‰∏Ä‰∏™ÊïôËÆ≠ÊòØÔºåÊàë‰ª¨ÂèëÁé∞ÔºåÂæàÂ§öÁ±ªÂûãÁöÑÈîôËØØÈÉΩ‰ºöÂØºËá¥Â§ßÂûãÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂèóÊçüÔºåËøô‰∫õÈîôËØØ‰∏ç‰ªÖ‰ªÖÊòØÈÄöÂ∏∏ÁöÑÁΩëÁªú ‰∏≠Êñ≠„ÄÅÊàñËÄÖÂæàÂ§öÂàÜÂ∏ÉÂºèÂçèËÆÆ‰∏≠ËÆæÊÉ≥ÁöÑ fail-stop Á±ªÂûãÁöÑÈîôËØØ30„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÈÅáÂà∞Ëøá‰∏ãÈù¢Ëøô‰∫õÁ±ªÂûãÁöÑÈîôËØØÂØºËá¥ÁöÑÈóÆ È¢ò:ÂÜÖÂ≠òÊï∞ÊçÆÊçüÂùè„ÄÅÁΩëÁªú‰∏≠Êñ≠„ÄÅÊó∂ÈíüÂÅèÂ∑Æ„ÄÅÊú∫Âô®ÊåÇËµ∑„ÄÅÊâ©Â±ïÁöÑÂíåÈùûÂØπÁß∞ÁöÑÁΩëÁªúÂàÜÂå∫31„ÄÅÊàë‰ª¨‰ΩøÁî®ÁöÑÂÖ∂ÂÆÉÁ≥ªÁªüÁöÑ Bug(ÊØîÂ¶Ç Chubby)„ÄÅGFS ÈÖçÈ¢ùÊ∫¢Âá∫„ÄÅËÆ°ÂàíÂÜÖÂíåËÆ°ÂàíÂ§ñÁöÑÁ°¨‰ª∂Áª¥Êä§„ÄÇÊàë‰ª¨Âú®Ëß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢òÁöÑËøáÁ®ã‰∏≠Â≠¶Âà∞‰∫ÜÂæàÂ§ö ÁªèÈ™åÔºåÊàë‰ª¨ÈÄöËøá‰øÆÊîπÂçèËÆÆÊù•Ëß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢ò„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨Âú®Êàë‰ª¨ÁöÑ RPC Êú∫Âà∂‰∏≠Âä†ÂÖ•‰∫Ü Checksum„ÄÇÊàë‰ª¨Âú®ËÆæËÆ° Á≥ªÁªüÁöÑÈÉ®ÂàÜÂäüËÉΩÊó∂Ôºå‰∏çÂØπÂÖ∂ÂÆÉÈÉ®ÂàÜÂäüËÉΩÂÅö‰ªª‰ΩïÁöÑÂÅáËÆæÔºåËøôÊ†∑ÁöÑÂÅöÊ≥ïËß£ÂÜ≥‰∫ÜÂÖ∂ÂÆÉÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨‰∏çÂÜç ÂÅáËÆæ‰∏Ä‰∏™ÁâπÂÆöÁöÑ Chubby Êìç‰ΩúÂè™ËøîÂõûÈîôËØØÁ†ÅÈõÜÂêà‰∏≠ÁöÑ‰∏Ä‰∏™ÂÄº„ÄÇ</p>
<p>Âè¶Â§ñ‰∏Ä‰∏™ÊïôËÆ≠ÊòØÔºåÊàë‰ª¨ÊòéÁôΩ‰∫ÜÂú®ÂΩªÂ∫ï‰∫ÜËß£‰∏Ä‰∏™Êñ∞ÁâπÊÄß‰ºöË¢´Â¶Ç‰Ωï‰ΩøÁî®‰πãÂêéÔºåÂÜçÂÜ≥ÂÆöÊòØÂê¶Ê∑ªÂä†Ëøô‰∏™Êñ∞ÁâπÊÄßÊòØ ÈùûÂ∏∏ÈáçË¶ÅÁöÑ„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÂºÄÂßãËÆ°ÂàíÂú®Êàë‰ª¨ÁöÑ API ‰∏≠ÊîØÊåÅÈÄöÂ∏∏ÊñπÂºèÁöÑ‰∫ãÂä°Â§ÑÁêÜ„ÄÇ‰ΩÜÊòØÁî±‰∫éÊàë‰ª¨Ëøò‰∏ç‰ºöÈ©¨‰∏äÁî®Âà∞ Ëøô‰∏™ÂäüËÉΩÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨Âπ∂Ê≤°ÊúâÂéªÂÆûÁé∞ÂÆÉ„ÄÇÁé∞Âú®ÔºåBigtable ‰∏äÂ∑≤ÁªèÊúâ‰∫ÜÂæàÂ§öÁöÑÂÆûÈôÖÂ∫îÁî®ÔºåÊàë‰ª¨ÂèØ‰ª•Ê£ÄÊü•ÂÆÉ‰ª¨ÁúüÂÆû ÁöÑÈúÄÊ±Ç;Êàë‰ª¨ÂèëÁé∞ÔºåÂ§ßÂ§öÊòØÂ∫îÁî®Á®ãÂ∫èÈÉΩÂè™ÊòØÈúÄË¶ÅÂçï‰∏™Ë°å‰∏äÁöÑ‰∫ãÂä°ÂäüËÉΩ„ÄÇÊúâ‰∫õÂ∫îÁî®ÈúÄË¶ÅÂàÜÂ∏ÉÂºèÁöÑ‰∫ãÂä°ÂäüËÉΩÔºåÂàÜ Â∏ÉÂºè‰∫ãÂä°Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÁî®‰∫éÁª¥Êä§‰∫åÁ∫ßÁ¥¢ÂºïÔºåÂõ†Ê≠§Êàë‰ª¨Â¢ûÂä†‰∫Ü‰∏Ä‰∏™ÁâπÊÆäÁöÑÊú∫Âà∂ÂéªÊª°Ë∂≥Ëøô‰∏™ÈúÄÊ±Ç„ÄÇÊñ∞ÁöÑÊú∫Âà∂Âú®ÈÄö Áî®ÊÄß‰∏äÊØîÂàÜÂ∏ÉÂºè‰∫ãÂä°Â∑ÆÂæàÂ§öÔºå‰ΩÜÊòØÂÆÉÊõ¥ÊúâÊïà(ÁâπÂà´ÊòØÂú®Êõ¥Êñ∞Êìç‰ΩúÁöÑÊ∂âÂèä‰∏äÁôæË°åÊï∞ÊçÆÁöÑÊó∂ÂÄô)ÔºåËÄå‰∏îÈùûÂ∏∏Á¨¶ÂêàÊàë ‰ª¨ÁöÑ‚ÄúË∑®Êï∞ÊçÆ‰∏≠ÂøÉ‚ÄùÂ§çÂà∂ÊñπÊ°àÁöÑ‰ºòÂåñÁ≠ñÁï•„ÄÇ</p>
<p>ËøòÊúâ‰∏Ä‰∏™ÂÖ∑ÊúâÂÆûË∑µÊÑè‰πâÁöÑÁªèÈ™å:Êàë‰ª¨ÂèëÁé∞Á≥ªÁªüÁ∫ßÁöÑÁõëÊéßÂØπ Bigtable ÈùûÂ∏∏ÈáçË¶Å(ÊØîÂ¶ÇÔºåÁõëÊéß Bigtable Ëá™Ë∫´ ‰ª•Âèä‰ΩøÁî® Bigtable ÁöÑÂÆ¢Êà∑Á®ãÂ∫è)„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨Êâ©Â±ï‰∫ÜÊàë‰ª¨ÁöÑ RPC Á≥ªÁªüÔºåÂõ†Ê≠§ÂØπ‰∫é‰∏Ä‰∏™ RPC Ë∞ÉÁî®ÁöÑ‰æãÂ≠êÔºåÂÆÉÂèØ ‰ª•ËØ¶ÁªÜËÆ∞ÂΩï‰ª£Ë°®‰∫Ü RPC Ë∞ÉÁî®ÁöÑÂæàÂ§öÈáçË¶ÅÊìç‰Ωú„ÄÇËøô‰∏™ÁâπÊÄßÂÖÅËÆ∏Êàë‰ª¨Ê£ÄÊµãÂíå‰øÆÊ≠£ÂæàÂ§öÁöÑÈóÆÈ¢òÔºåÊØîÂ¶Ç Tablet Êï∞ÊçÆÁªì ÊûÑ‰∏äÁöÑÈîÅÁöÑÂÜÖÂÆπ„ÄÅÂú®‰øÆÊîπÊìç‰ΩúÊèê‰∫§Êó∂ÂØπ GFS ÁöÑÂÜôÂÖ•ÈùûÂ∏∏ÊÖ¢ÁöÑÈóÆÈ¢ò„ÄÅ‰ª•ÂèäÂú® METADATA Ë°®ÁöÑ Tablet ‰∏çÂèØÁî®Êó∂Ôºå ÂØπ METADATA Ë°®ÁöÑËÆøÈóÆÊåÇËµ∑ÁöÑÈóÆÈ¢ò„ÄÇÂÖ≥‰∫éÁõëÊéßÁöÑÁî®ÈÄîÁöÑÂè¶Â§ñ‰∏Ä‰∏™‰æãÂ≠êÊòØÔºåÊØè‰∏™ Bigtable ÈõÜÁæ§ÈÉΩÂú® Chubby ‰∏≠ Ê≥®ÂÜå‰∫Ü„ÄÇËøôÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Ë∑üË∏™ÊâÄÊúâÁöÑÈõÜÁæ§Áä∂ÊÄÅ„ÄÅÁõëÊéßÂÆÉ‰ª¨ÁöÑÂ§ßÂ∞è„ÄÅÊ£ÄÊü•ÈõÜÁæ§ËøêË°åÁöÑÊàë‰ª¨ËΩØ‰ª∂ÁöÑÁâàÊú¨„ÄÅÁõëÊéßÈõÜ Áæ§ÊµÅÂÖ•Êï∞ÊçÆÁöÑÊµÅÈáèÔºå‰ª•ÂèäÊ£ÄÊü•ÊòØÂê¶ÊúâÂºïÂèëÈõÜÁæ§È´òÂª∂Êó∂ÁöÑÊΩúÂú®Âõ†Á¥†„ÄÇ</p>
<p>ÂØπÊàë‰ª¨Êù•ËØ¥ÔºåÊúÄÂÆùË¥µÁöÑÁªèÈ™åÊòØÁÆÄÂçïËÆæËÆ°ÁöÑ‰ª∑ÂÄº„ÄÇËÄÉËôëÂà∞Êàë‰ª¨Á≥ªÁªüÁöÑ‰ª£Á†ÅÈáè(Â§ßÁ∫¶ 100000 Ë°åÁîü‰∫ß‰ª£Á†Å32)Ôºå ‰ª•ÂèäÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºåÊñ∞ÁöÑ‰ª£Á†Å‰ª•ÂêÑÁßçÈöæ‰ª•È¢ÑÊñôÁöÑÊñπÂºèÂä†ÂÖ•Á≥ªÁªüÔºåÊàë‰ª¨ÂèëÁé∞ÁÆÄÊ¥ÅÁöÑËÆæËÆ°ÂíåÁºñÁ†ÅÁªôÁª¥Êä§ÂíåË∞ÉËØï Â∏¶Êù•ÁöÑÂ∑®Â§ßÂ•ΩÂ§Ñ„ÄÇËøôÊñπÈù¢ÁöÑ‰∏Ä‰∏™‰æãÂ≠êÊòØÊàë‰ª¨ÁöÑ Tablet ÊúçÂä°Âô®ÊàêÂëòÂçèËÆÆ„ÄÇÊàë‰ª¨Á¨¨‰∏ÄÁâàÁöÑÂçèËÆÆÂæàÁÆÄÂçï:Master ÊúçÂä°Âô®Âë®ÊúüÊÄßÁöÑÂíå Tablet ÊúçÂä°Âô®Á≠æËÆ¢ÁßüÁ∫¶ÔºåTablet ÊúçÂä°Âô®Âú®ÁßüÁ∫¶ËøáÊúüÁöÑÊó∂ÂÄô Kill ÊéâËá™Â∑±ÁöÑËøõÁ®ã„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåËøô ‰∏™ÂçèËÆÆÂú®ÈÅáÂà∞ÁΩëÁªúÈóÆÈ¢òÊó∂‰ºöÂ§ßÂ§ßÈôç‰ΩéÁ≥ªÁªüÁöÑÂèØÁî®ÊÄßÔºå‰πü‰ºöÂ§ßÂ§ßÂ¢ûÂä† Master ÊúçÂä°Âô®ÊÅ¢Â§çÁöÑÊó∂Èó¥„ÄÇÊàë‰ª¨Â§öÊ¨°ÈáçÊñ∞ ËÆæËÆ°Ëøô‰∏™ÂçèËÆÆÔºåÁõ¥Âà∞ÂÆÉËÉΩÂ§üÂæàÂ•ΩÁöÑÂ§ÑÁêÜ‰∏äËø∞ÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÔºåÊõ¥‰∏çÂπ∏ÁöÑÊòØÔºåÊúÄÁªàÁöÑÂçèËÆÆËøá‰∫éÂ§çÊùÇ‰∫ÜÔºåÂπ∂‰∏î‰æùËµñ‰∏Ä ‰∫õ Chubby ÂæàÂ∞ëË¢´Áî®Âà∞ÁöÑÁâπÊÄß„ÄÇÊàë‰ª¨ÂèëÁé∞Êàë‰ª¨Êµ™Ë¥π‰∫ÜÂ§ßÈáèÁöÑÊó∂Èó¥Âú®Ë∞ÉËØï‰∏Ä‰∫õÂè§ÊÄ™ÁöÑÈóÆÈ¢ò33ÔºåÊúâ‰∫õÊòØ Bigtable ‰ª£ Á†ÅÁöÑÈóÆÈ¢òÔºåÊúâ‰∫õÊòØ Chubby ‰ª£Á†ÅÁöÑÈóÆÈ¢ò„ÄÇÊúÄÂêéÔºåÊàë‰ª¨Âè™Â•ΩÂ∫üÂºÉ‰∫ÜËøô‰∏™ÂçèËÆÆÔºåÈáçÊñ∞Âà∂ËÆ¢‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑ„ÄÅÊõ¥ÁÆÄÂçï„ÄÅÂè™‰ΩøÁî® Chubby ÊúÄÂπøÊ≥õ‰ΩøÁî®ÁöÑÁâπÊÄßÁöÑÂçèËÆÆ„ÄÇ<br><div class="note info"><h2 id="Áõ∏ÂÖ≥Â∑•‰Ωú"><a href="#Áõ∏ÂÖ≥Â∑•‰Ωú" class="headerlink" title="Áõ∏ÂÖ≥Â∑•‰Ωú"></a>Áõ∏ÂÖ≥Â∑•‰Ωú</h2></div><br>Boxwood È°πÁõÆÁöÑÊúâ‰∫õÁªÑ‰ª∂Âú®Êüê‰∫õÊñπÈù¢Âíå Chubby„ÄÅGFS ‰ª•Âèä Bigtable Á±ª‰ººÔºåÂõ†‰∏∫ÂÆÉ‰πüÊèê‰æõ‰∫ÜËØ∏Â¶ÇÂàÜ Â∏ÉÂºèÂçèËÆÆ„ÄÅÈîÅ„ÄÅÂàÜÂ∏ÉÂºè Chunk Â≠òÂÇ®‰ª•ÂèäÂàÜÂ∏ÉÂºè B-tree Â≠òÂÇ®„ÄÇBoxwood ‰∏é Google ÁöÑÊüê‰∫õÁªÑ‰ª∂Â∞ΩÁÆ°ÂäüËÉΩÁ±ª‰ººÔºå ‰ΩÜÊòØ Boxwood ÁöÑÁªÑ‰ª∂Êèê‰æõÊõ¥Â∫ïÂ±ÇÁöÑÊúçÂä°„ÄÇBoxwood È°πÁõÆÁöÑÁõÆÁöÑÊòØÊèê‰æõÂàõÂª∫Á±ª‰ººÊñá‰ª∂Á≥ªÁªü„ÄÅÊï∞ÊçÆÂ∫ìÁ≠âÈ´òÁ∫ßÊúçÂä° ÁöÑÂü∫Á°ÄÊûÑ‰ª∂ÔºåËÄå Bigtable ÁöÑÁõÆÁöÑÊòØÁõ¥Êé•‰∏∫ÂÆ¢Êà∑Á®ãÂ∫èÁöÑÊï∞ÊçÆÂ≠òÂÇ®ÈúÄÊ±ÇÊèê‰æõÊîØÊåÅ„ÄÇ</p>
<p>Áé∞Âú®Êúâ‰∏çÂ∞ëÈ°πÁõÆÂ∑≤ÁªèÊîªÂÖã‰∫ÜÂæàÂ§öÈöæÈ¢òÔºåÂÆûÁé∞‰∫ÜÂú®ÂπøÂüüÁΩë‰∏äÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ≠òÂÇ®ÊàñËÄÖÈ´òÁ∫ßÊúçÂä°ÔºåÈÄöÂ∏∏ÊòØ ‚ÄúInternet ËßÑÊ®°‚ÄùÁöÑ„ÄÇËøôÂÖ∂‰∏≠ÂåÖÊã¨‰∫ÜÂàÜÂ∏ÉÂºèÁöÑ Hash Ë°®ÔºåËøôÈ°πÂ∑•‰ΩúÁî±‰∏Ä‰∫õÁ±ª‰ºº CAN„Äê29„Äë„ÄÅChord„Äê32„Äë„ÄÅTapestry „Äê37„ÄëÂíå Pastry„Äê30„ÄëÁöÑÈ°πÁõÆÁéáÂÖàÂèëËµ∑„ÄÇËøô‰∫õÁ≥ªÁªüÁöÑ‰∏ªË¶ÅÂÖ≥Ê≥®ÁÇπÂíå Bigtable ‰∏çÂêåÔºåÊØîÂ¶ÇÂ∫îÂØπÂêÑÁßç‰∏çÂêåÁöÑ‰º†ËæìÂ∏¶ ÂÆΩ„ÄÅ‰∏çÂèØ‰ø°ÁöÑÂçè‰ΩúËÄÖ„ÄÅÈ¢ëÁπÅÁöÑÊõ¥ÊîπÈÖçÁΩÆÁ≠â;Âè¶Â§ñÔºåÂéª‰∏≠ÂøÉÂåñÂíå Byzantine ÁÅæÈöæÂÜó‰Ωô‰πü‰∏çÊòØ Bigtable ÁöÑÁõÆÁöÑ„ÄÇ</p>
<p>Â∞±Êèê‰æõÁªôÂ∫îÁî®Á®ãÂ∫èÂºÄÂèëËÄÖÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ≠òÂÇ®Ê®°ÂûãËÄåË®ÄÔºåÊàë‰ª¨Áõ∏‰ø°ÔºåÂàÜÂ∏ÉÂºè B-Tree ÊàñËÄÖÂàÜÂ∏ÉÂºè Hash Ë°®Êèê ‰æõÁöÑ Key-value pair ÊñπÂºèÁöÑÊ®°ÂûãÊúâÂæàÂ§ßÁöÑÂ±ÄÈôêÊÄß„ÄÇKey-value pair Ê®°ÂûãÊòØÂæàÊúâÁî®ÁöÑÁªÑ‰ª∂Ôºå‰ΩÜÊòØÂÆÉ‰ª¨‰∏çÂ∫îËØ•ÊòØÊèê‰æõÁªôÂºÄÂèëËÄÖÂîØ‰∏ÄÁöÑÁªÑ‰ª∂„ÄÇÊàë‰ª¨ÈÄâÊã©ÁöÑÊ®°ÂûãÊèê‰æõÁöÑÁªÑ‰ª∂ÊØîÁÆÄÂçïÁöÑ Key-value pair ‰∏∞ÂØåÁöÑÂ§öÔºåÂÆÉÊîØÊåÅÁ®ÄÁñèÁöÑ„ÄÅÂçäÁªìÊûÑ ÂåñÁöÑÊï∞ÊçÆ„ÄÇÂè¶Â§ñÔºåÂÆÉ‰πüË∂≥Â§üÁÆÄÂçïÔºåËÉΩÂ§üÈ´òÊïàÁöÑÂ§ÑÁêÜÂπ≥Èù¢Êñá‰ª∂;ÂÆÉ‰πüÊòØÈÄèÊòéÁöÑ(ÈÄöËøáÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑ)ÔºåÂÖÅËÆ∏Êàë‰ª¨ÁöÑ ‰ΩøÁî®ËÄÖÂØπÁ≥ªÁªüÁöÑÈáçË¶ÅË°å‰∏∫ËøõË°åË∞ÉÊï¥„ÄÇ</p>
<p>Êúâ‰∫õÊï∞ÊçÆÂ∫ìÂéÇÂïÜÂ∑≤ÁªèÂºÄÂèëÂá∫‰∫ÜÂπ∂Ë°åÁöÑÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÔºåËÉΩÂ§üÂ≠òÂÇ®Êµ∑ÈáèÁöÑÊï∞ÊçÆ„ÄÇOracle ÁöÑ RAC„Äê27„Äë‰ΩøÁî®ÂÖ±‰∫´ Á£ÅÁõòÂ≠òÂÇ®Êï∞ÊçÆ(Bigtable ‰ΩøÁî® GFS)ÔºåÂπ∂‰∏îÊúâ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÈîÅÁÆ°ÁêÜÁ≥ªÁªü(Bigtable ‰ΩøÁî® Chubby)„ÄÇIBM Âπ∂Ë°åÁâà Êú¨ÁöÑ DB2„Äê4„ÄëÂü∫‰∫é‰∏ÄÁßçÁ±ª‰ºº‰∫é Bigtable ÁöÑ„ÄÅ‰∏çÂÖ±‰∫´‰ªª‰Ωï‰∏úË•øÁöÑÊû∂ÊûÑ35„Äê33„Äë„ÄÇÊØè‰∏™ DB2 ÁöÑÊúçÂä°Âô®ÈÉΩË¥üË¥£Â§ÑÁêÜ Â≠òÂÇ®Âú®‰∏Ä‰∏™ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®‰∏≠ÁöÑË°åÁöÑ‰∏Ä‰∏™Â≠êÈõÜ„ÄÇËøô‰∫õ‰∫ßÂìÅÈÉΩÊèê‰æõ‰∫Ü‰∏Ä‰∏™Â∏¶Êúâ‰∫ãÂä°ÂäüËÉΩÁöÑÂÆåÊï¥ÁöÑÂÖ≥Á≥ªÊ®°Âûã„ÄÇ</p>
<p>Bigtable ÈááÁî® memtable Âíå SSTable Â≠òÂÇ®ÂØπË°®ÁöÑÊõ¥Êñ∞ÁöÑÊñπÊ≥ï‰∏é Log-Structured Merge Tree„Äê26„ÄëÂ≠òÂÇ®Á¥¢ÂºïÊï∞ÊçÆÊõ¥Êñ∞ÁöÑÊñπÊ≥ïÁ±ª‰ºº„ÄÇËøô‰∏§‰∏™Á≥ªÁªü‰∏≠ÔºåÊéíÂ∫èÁöÑÊï∞ÊçÆÂú®ÂÜôÂÖ•Âà∞Á£ÅÁõòÂâçÈÉΩÂÖàÂ≠òÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåËØªÂèñÊìç‰ΩúÂøÖÈ°ª‰ªéÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏≠ÂêàÂπ∂Êï∞ÊçÆ‰∫ßÁîüÊúÄÁªàÁöÑÁªìÊûúÈõÜ„ÄÇ</p>
<p>C-Store Âíå Bigtable ÊúâÂæàÂ§öÁõ∏‰ººÁÇπ:‰∏§‰∏™Á≥ªÁªüÈÉΩÈááÁî® Shared-nothing Êû∂ÊûÑÔºåÈÉΩÊúâ‰∏§Áßç‰∏çÂêåÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰∏Ä ÁßçÁî®‰∫éÂΩìÂâçÁöÑÂÜôÊìç‰ΩúÔºåÂè¶Â§ñ‰∏ÄÁßçÂ≠òÊîæ‚ÄúÈïøÊó∂Èó¥‰ΩøÁî®‚ÄùÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏îÊèê‰æõ‰∏ÄÁßçÊú∫Âà∂Âú®‰∏§‰∏™Â≠òÂÇ®ÁªìÊûÑÈó¥Êê¨ËøêÊï∞ÊçÆ„ÄÇ ‰∏§‰∏™Á≥ªÁªüÂú® API Êé•Âè£ÂáΩÊï∞‰∏äÊúâÂæàÂ§ßÁöÑ‰∏çÂêå:C-Store Êìç‰ΩúÊõ¥ÂÉèÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºåËÄå Bigtable Êèê‰æõ‰∫Ü‰ΩéÂ±ÇÊ¨°ÁöÑËØªÂÜô Êìç‰ΩúÊé•Âè£ÔºåÂπ∂‰∏îËÆæËÆ°ÁöÑÁõÆÊ†áÊòØËÉΩÂ§üÊîØÊåÅÊØèÂè∞ÊúçÂä°Âô®ÊØèÁßíÊï∞ÂçÉÊ¨°Êìç‰Ωú„ÄÇC-Store ÂêåÊó∂‰πüÊòØ‰∏™‚ÄúËØªÊÄßËÉΩ‰ºòÂåñÁöÑÂÖ≥Á≥ª ÂûãÊï∞ÊçÆÂ∫ì‚ÄùÔºåËÄå Bigtable ÂØπËØªÂíåÂÜôÂØÜÈõÜÂûãÂ∫îÁî®ÈÉΩÊèê‰æõ‰∫ÜÂæàÂ•ΩÁöÑÊÄßËÉΩ„ÄÇ</p>
<p>Bigtable ‰πüÂøÖÈ°ªËß£ÂÜ≥ÊâÄÊúâÁöÑ Shared-nothing Êï∞ÊçÆÂ∫ìÈúÄË¶ÅÈù¢ÂØπÁöÑ„ÄÅÁ±ªÂûãÁõ∏‰ººÁöÑ‰∏Ä‰∫õË¥üËΩΩÂíåÂÜÖÂ≠òÂùáË°°ÊñπÈù¢ÁöÑÈöæ È¢ò(ÊØîÂ¶ÇÔºå„Äê11Ôºå35„Äë)„ÄÇÊàë‰ª¨ÁöÑÈóÆÈ¢òÂú®ÊüêÁßçÁ®ãÂ∫¶‰∏äÁÆÄÂçï‰∏Ä‰∫õ:</p>
<ol>
<li>Êàë‰ª¨‰∏çÈúÄË¶ÅËÄÉËôëÂêå‰∏Ä‰ªΩÊï∞ÊçÆÂèØËÉΩÊúâÂ§ö‰∏™Êã∑Ë¥ùÁöÑÈóÆÈ¢òÔºåÂêå‰∏Ä‰ªΩÊï∞ÊçÆÂèØËÉΩÁî±‰∫éËßÜÂõæÊàñÁ¥¢ÂºïÁöÑÂéüÂõ†‰ª•‰∏çÂêå ÁöÑÂΩ¢ÂºèË°®Áé∞Âá∫Êù•;</li>
<li>Êàë‰ª¨ËÆ©Áî®Êà∑ÂÜ≥ÂÆöÂì™‰∫õÊï∞ÊçÆÂ∫îËØ•ÊîæÂú®ÂÜÖÂ≠òÈáå„ÄÅÂì™‰∫õÊîæÂú®Á£ÅÁõò‰∏äÔºåËÄå‰∏çÊòØÁî±Á≥ªÁªüÂä®ÊÄÅÁöÑÂà§Êñ≠; 3. Êàë‰ª¨ÁöÑÁ≥ªÁªü‰∏≠Ê≤°ÊúâÂ§çÊùÇÁöÑÊü•ËØ¢ÊâßË°åÊàñ‰ºòÂåñÂ∑•‰Ωú„ÄÇ</li>
</ol>
<div class="note info"><h2 id="ÁªìËÆ∫"><a href="#ÁªìËÆ∫" class="headerlink" title="ÁªìËÆ∫"></a>ÁªìËÆ∫</h2></div>
<p>Êàë‰ª¨Â∑≤ÁªèËÆ≤Ëø∞ÂÆå‰∫Ü BigtableÔºåGoogle ÁöÑ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÁªìÊûÑÂåñÊï∞ÊçÆÂ≠òÂÇ®Á≥ªÁªü„ÄÇBigtable ÁöÑÈõÜÁæ§‰ªé 2005 Âπ¥ 4 ÊúàÂºÄÂßãÂ∑≤ÁªèÊäïÂÖ•‰ΩøÁî®‰∫ÜÔºåÂú®Ê≠§‰πãÂâçÔºåÊàë‰ª¨Ëä±‰∫ÜÂ§ßÁ∫¶ 7 ‰∫∫Âπ¥ËÆæËÆ°ÂíåÂÆûÁé∞Ëøô‰∏™Á≥ªÁªü„ÄÇÊà™Ê≠¢Âà∞ 2006 Âπ¥ 4 ÊúàÔºåÂ∑≤ÁªèÊúâ Ë∂ÖËøá 60 ‰∏™È°πÁõÆ‰ΩøÁî® Bigtable ‰∫Ü„ÄÇÊàë‰ª¨ÁöÑÁî®Êà∑ÂØπ Bigtable Êèê‰æõÁöÑÈ´òÊÄßËÉΩÂíåÈ´òÂèØÁî®ÊÄßÂæàÊª°ÊÑèÔºåÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºå ‰ªñ‰ª¨ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÁ≥ªÁªüÂØπËµÑÊ∫êÁöÑÈúÄÊ±ÇÂ¢ûÂä†ÊÉÖÂÜµÔºåÈÄöËøáÁÆÄÂçïÁöÑÂ¢ûÂä†Êú∫Âô®ÔºåÊâ©Â±ïÁ≥ªÁªüÁöÑÊâøËΩΩËÉΩÂäõ„ÄÇ</p>
<p>Áî±‰∫é Bigtable Êèê‰æõÁöÑÁºñÁ®ãÊé•Âè£Âπ∂‰∏çÂ∏∏ËßÅÔºå‰∏Ä‰∏™ÊúâË∂£ÁöÑÈóÆÈ¢òÊòØ:Êàë‰ª¨ÁöÑÁî®Êà∑ÈÄÇÂ∫îÊñ∞ÁöÑÊé•Âè£ÊúâÂ§öÈöæ?Êñ∞ÁöÑ‰Ωø Áî®ËÄÖÊúâÊó∂‰∏çÂ§™Á°ÆÂÆö‰ΩøÁî® Bigtable Êé•Âè£ÁöÑÊúÄ‰Ω≥ÊñπÊ≥ïÔºåÁâπÂà´ÊòØÂú®‰ªñ‰ª¨Â∑≤Áªè‰π†ÊÉØ‰∫é‰ΩøÁî®ÊîØÊåÅÈÄöÁî®‰∫ãÂä°ÁöÑÂÖ≥Á≥ªÂûãÊï∞ÊçÆ Â∫ìÁöÑÊé•Âè£ÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ‰ΩÜÊòØÔºåGoogle ÂÜÖÈÉ®ÂæàÂ§ö‰∫ßÂìÅÈÉΩÊàêÂäüÁöÑ‰ΩøÁî®‰∫Ü Bigtable ÁöÑ‰∫ãÂÆûËØÅÊòé‰∫ÜÔºåÊàë‰ª¨ÁöÑËÆæËÆ°Âú®ÂÆûË∑µ ‰∏≠Ë°å‰πãÊúâÊïà„ÄÇ</p>
<p>Êàë‰ª¨Áé∞Âú®Ê≠£Âú®ÂØπ Bigtable Âä†ÂÖ•‰∏Ä‰∫õÊñ∞ÁöÑÁâπÊÄßÔºåÊØîÂ¶ÇÊîØÊåÅ‰∫åÁ∫ßÁ¥¢ÂºïÔºå‰ª•ÂèäÊîØÊåÅÂ§ö Master ËäÇÁÇπÁöÑ„ÄÅË∑®Êï∞ÊçÆ‰∏≠ÂøÉÂ§çÂà∂ÁöÑ Bigtable ÁöÑÂü∫Á°ÄÊûÑ‰ª∂„ÄÇÊàë‰ª¨Áé∞Âú®Â∑≤ÁªèÂºÄÂßãÂ∞Ü Bigtable ÈÉ®ÁΩ≤‰∏∫ÊúçÂä°‰æõÂÖ∂ÂÆÉÁöÑ‰∫ßÂìÅÂõ¢Èòü‰ΩøÁî®ÔºåËøôÊ†∑‰∏çÂêå ÁöÑ‰∫ßÂìÅÂõ¢ÈòüÂ∞±‰∏çÈúÄË¶ÅÁª¥Êä§‰ªñ‰ª¨Ëá™Â∑±ÁöÑ Bigtable ÈõÜÁæ§‰∫Ü„ÄÇÈöèÁùÄÊúçÂä°ÈõÜÁæ§ÁöÑÊâ©Â±ïÔºåÊàë‰ª¨ÈúÄË¶ÅÂú® Bigtable Á≥ªÁªüÂÜÖÈÉ®Â§ÑÁêÜÊõ¥Â§öÁöÑÂÖ≥‰∫éËµÑÊ∫êÂÖ±‰∫´ÁöÑÈóÆÈ¢ò‰∫Ü„Äê3Ôºå5„Äë„ÄÇ</p>
<p>ÊúÄÂêéÔºåÊàë‰ª¨ÂèëÁé∞ÔºåÂª∫ËÆæ Google Ëá™Â∑±ÁöÑÂ≠òÂÇ®Ëß£ÂÜ≥ÊñπÊ°àÂ∏¶Êù•‰∫ÜÂæàÂ§ö‰ºòÂäø„ÄÇÈÄöËøá‰∏∫ Bigtable ËÆæËÆ°Êàë‰ª¨Ëá™Â∑±ÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÊòØÊàë‰ª¨ÁöÑÁ≥ªÁªüÊûÅÂÖ∑ÁÅµÊ¥ªÊÄß„ÄÇÂè¶Â§ñÔºåÁî±‰∫éÊàë‰ª¨ÂÖ®Èù¢ÊéßÂà∂ÁùÄ Bigtable ÁöÑÂÆûÁé∞ËøáÁ®ãÔºå‰ª•Âèä Bigtable ‰ΩøÁî®Âà∞ ÁöÑÂÖ∂ÂÆÉÁöÑ Google ÁöÑÂü∫Á°ÄÊûÑ‰ª∂ÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÊàë‰ª¨Âú®Á≥ªÁªüÂá∫Áé∞Áì∂È¢àÊàñÊïàÁéá‰Ωé‰∏ãÁöÑÊÉÖÂÜµÊó∂ÔºåËÉΩÂ§üÂø´ÈÄüÁöÑËß£ÂÜ≥Ëøô‰∫õÈóÆ È¢ò„ÄÇ<br><div class="note info"><h2 id="Acknowledgements"><a href="#Acknowledgements" class="headerlink" title="Acknowledgements"></a>Acknowledgements</h2></div><br>We thank the anonymous reviewers, David Nagle, and our shepherd Brad Calder, for their feedback on this paper.The Bigtable system has benefited greatly from the feedback of our many users within Google. In addition,we thank the following people for their contributions to Bigtable: Dan Aguayo, Sameer Ajmani, Zhifeng Chen,Bill Coughran, Mike Epstein, Healfdene Goguen, Robert Griesemer, Jeremy Hylton, Josh Hyman, Alex Khesin,<br>Joanna Kulik, Alberto Lerner, Sherry Listgarten, Mike Maloney, Eduardo Pinheiro, Kathy Polizzi, Frank Yellin,and Arthur Zwiegincew.<br><div class="note info"><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2></div><br>[1] ABADI, D. J., MADDEN, S. R., AND FERREIRA, M. C. Integrating compression and execution in columnoriented database systems. Proc. of SIGMOD (2006).<br>[2] AILAMAKI, A., DEWITT, D. J., HILL, M. D., AND SKOUNAKIS, M. Weaving relations for cache performance.In The VLDB Journal (2001), pp. 169-180.<br>[3] BANGA, G., DRUSCHEL, P., AND MOGUL, J. C. Resource containers: A new facility for resource management in server systems. In Proc. of the 3rd OSDI (Feb. 1999), pp. 45-58.<br>[4] BARU, C. K., FECTEAU, G., GOYAL, A., HSIAO, H., JHINGRAN, A., PADMANABHAN, S., COPELAND,G. P., AND WILSON, W. G. DB2 parallel edition. IBM Systems Journal 34, 2 (1995), 292-322.<br>[5] BAVIER, A., BOWMAN, M., CHUN, B., CULLER, D., KARLIN, S., PETERSON, L., ROSCOE, T., SPALINK, T., AND WAWRZONIAK, M. Operating system support for planetary-scale network services. In Proc. of the 1st NSDI(Mar. 2004), pp. 253-266.<br>[6] BENTLEY, J. L., AND MCILROY, M. D. Data compression using long common strings. In Data Compression Conference (1999), pp. 287-295.<br>[7] BLOOM, B. H. Space/time trade-offs in hash coding with allowable errors. CACM 13, 7 (1970), 422-426.<br>[8] BURROWS, M. The Chubby lock service for looselycoupled distributed systems. In Proc. of the 7th OSDI (Nov. 2006).<br>[9] CHANDRA, T., GRIESEMER, R., AND REDSTONE, J.Paxos made live ? An engineering perspective. In Proc. of PODC (2007).<br>[10] COMER, D. Ubiquitous B-tree. Computing Surveys 11, 2 (June 1979), 121-137.<br>[11] COPELAND, G. P., ALEXANDER, W., BOUGHTER, E. E., AND KELLER, T. W. Data placement in Bubba. In Proc. of SIGMOD (1988), pp. 99-108.<br>[12] DEAN, J., AND GHEMAWAT, S. MapReduce: Simplified data processing on large clusters. In Proc. of the 6th OSDI (Dec. 2004), pp. 137-150.<br>[13] DEWITT, D., KATZ, R., OLKEN, F., SHAPIRO, L., STONEBRAKER, M., AND WOOD, D. Implementation techniques for main memory database systems. In Proc. of SIGMOD (June 1984), pp. 1-8.<br>[14] DEWITT, D. J., AND GRAY, J. Parallel database systems: The future of high performance database systems. CACM 35, 6 (June 1992), 85-98.<br>[15] FRENCH, C. D. One size ts all database architectures do not work for DSS. In Proc. of SIGMOD (May 1995), pp. 449-450.<br>[16] GAWLICK, D., AND KINKADE, D. Varieties of concurrency control in IMS/VS fast path. Database Engineering Bulletin 8, 2 (1985), 3-10.<br>[17] GHEMAWAT, S., GOBIOFF, H., AND LEUNG, S.-T. The Google file system. In Proc. of the 19th ACM SOSP (Dec.2003), pp. 29-43.<br>[18] GRAY, J. Notes on database operating systems. In Operating Systems ? An Advanced Course, vol. 60 of Lecture Notes in Computer Science. Springer-Verlag, 1978.<br>[19] GREER, R. Daytona and the fourth-generation language Cymbal. In Proc. of SIGMOD (1999), pp. 525-526.<br>[20] HAGMANN, R. Reimplementing the Cedar file system using logging and group commit. In Proc. of the 11th SOSP (Dec. 1987), pp. 155-162.<br>[21] HARTMAN, J. H., AND OUSTERHOUT, J. K. The Zebra striped network file system. In Proc. of the 14th SOSP(Asheville, NC, 1993), pp. 29-43.<br>[22] KX.COM. kx.com/products/database.php. Product page.<br>[23] LAMPORT, L. The part-time parliament. ACM TOCS 16,2 (1998), 133-169.<br>[24] MACCORMICK, J., MURPHY, N., NAJORK, M., THEKKATH, C. A., AND ZHOU, L.Boxwood:Abstractions as the foundation for storage infrastructure. In Proc. of the 6th OSDI (Dec. 2004), pp. 105-120.<br>[25] MCCARTHY, J. Recursive functions of symbolic expressions and their computation by machine. CACM 3,4 (Apr. 1960), 184-195.<br>[26] O‚ÄôNEIL, P., CHENG, E., GAWLICK, D., AND O‚ÄôNEIL, E. The log-structured merge-tree (LSM-tree).Acta Inf. 33, 4 (1996), 351-385.<br>[27] ORACLE.COM. <a href="http://www.oracle.com/technology/products/database/clustering/index.html" target="_blank" rel="noopener">www.oracle.com/technology/products/database/clustering/index.html</a>. Product page.<br>[28] PIKE, R., DORWARD, S., GRIESEMER, R., AND QUINLAN, S. Interpreting the data: Parallel analysiswith Sawzall. Scientific Programming Journal 13, 4 (2005), 227-298.<br>[29] RATNASAMY, S., FRANCIS, P., HANDLEY, M., KARP, R., AND SHENKER, S. A scalablecontent-addressable network. In Proc. of SIGCOMM (Aug. 2001), pp. 161-172.<br>[30] ROWSTRON, A., AND DRUSCHEL, P. Pastry: Scalable, distributed object location and routing forlargescale peer-to-peer systems. In Proc. of Middleware 2001(Nov. 2001), pp. 329-350.<br>[31] SENSAGE.COM. sensage.com/products-sensage.htm. Product page.<br>[32] STOICA, I., MORRIS, R., KARGER, D., KAASHOEK, M. F., AND BALAKRISHNAN, H. Chord: Ascalable peer-to-peer lookup service for Internet applications. In Proc. of SIGCOMM (Aug. 2001), pp. 149-160.<br>[33] STONEBRAKER, M. The case for shared nothing. Database Engineering Bulletin 9, 1 (Mar. 1986), 4-9. [34] STONEBRAKER,M., ABADI, D. J., BATKIN, A., CHEN, X., CHERNIACK, M., FERREIRA, M., LAU,E., LIN, A., MADDEN, S., O‚ÄôNEIL, E., O‚ÄôNEIL, P., RASIN, A., TRAN, N., AND ZDONIK, S. C-Store: A columnoriented DBMS. In Proc. of VLDB (Aug. 2005), pp. 553-564.<br>[35] STONEBRAKER, M., AOKI, P. M., DEVINE, R., LITWIN, W., AND OLSON, M. A. Mariposa: A new architecture for distributed data. In Proc. of the Tenth ICDE(1994), IEEE Computer Society, pp. 54-65.<br>[36] SYBASE.COM. <a href="http://www.sybase.com/products/databaseservers/sybaseiq" target="_blank" rel="noopener">www.sybase.com/products/databaseservers/sybaseiq</a>. Product page.<br>[37] ZHAO, B. Y., KUBIATOWICZ, J., AND JOSEPH, A. D. Tapestry: An infrastructure for fault-tolerant wide-area location and routing. Tech. Rep. UCB/CSD-01-1141, CS Division, UC Berkeley, Apr. 2001.<br>[38] ZUKOWSKI, M., BONCZ, P. A., NES, N., AND HEMAN, S. MonetDB/X100 ?A DBMS in the CPU cache. IEEE Data Eng. Bull. 28, 2 (2005), 17-22.</p>
]]></content>
      
        <categories>
            
            <category> paper </category>
            
        </categories>
        
        
        <tags>
            
            <tag> paper </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Google MapReduce ‰∏≠ÊñáÁâà]]></title>
      <url>https://stanxia.github.io/2017/12/16/Google-MapReduce-%E4%B8%AD%E6%96%87%E7%89%88/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÊëòË¶Å"><a href="#ÊëòË¶Å" class="headerlink" title="ÊëòË¶Å"></a>ÊëòË¶Å</h2></div>
<p>MapReduce ÊòØ‰∏Ä‰∏™ÁºñÁ®ãÊ®°ÂûãÔºå‰πüÊòØ‰∏Ä‰∏™Â§ÑÁêÜÂíåÁîüÊàêË∂ÖÂ§ßÊï∞ÊçÆÈõÜÁöÑÁÆóÊ≥ïÊ®°ÂûãÁöÑÁõ∏ÂÖ≥ÂÆûÁé∞„ÄÇÁî®Êà∑È¶ñÂÖàÂàõÂª∫‰∏Ä ‰∏™ Map ÂáΩÊï∞Â§ÑÁêÜ‰∏Ä‰∏™Âü∫‰∫é key/value pair ÁöÑÊï∞ÊçÆÈõÜÂêàÔºåËæìÂá∫‰∏≠Èó¥ÁöÑÂü∫‰∫é key/value pair ÁöÑÊï∞ÊçÆÈõÜÂêà;ÁÑ∂ÂêéÂÜçÂàõÂª∫ ‰∏Ä‰∏™ Reduce ÂáΩÊï∞Áî®Êù•ÂêàÂπ∂ÊâÄÊúâÁöÑÂÖ∑ÊúâÁõ∏Âêå‰∏≠Èó¥ key ÂÄºÁöÑ‰∏≠Èó¥ value ÂÄº„ÄÇÁé∞ÂÆû‰∏ñÁïå‰∏≠ÊúâÂæàÂ§öÊª°Ë∂≥‰∏äËø∞Â§ÑÁêÜÊ®°Âûã ÁöÑ‰æãÂ≠êÔºåÊú¨ËÆ∫ÊñáÂ∞ÜËØ¶ÁªÜÊèèËø∞Ëøô‰∏™Ê®°Âûã„ÄÇ</p>
<p>MapReduce Êû∂ÊûÑÁöÑÁ®ãÂ∫èËÉΩÂ§üÂú®Â§ßÈáèÁöÑÊôÆÈÄöÈÖçÁΩÆÁöÑËÆ°ÁÆóÊú∫‰∏äÂÆûÁé∞Âπ∂Ë°åÂåñÂ§ÑÁêÜ„ÄÇËøô‰∏™Á≥ªÁªüÂú®ËøêË°åÊó∂Âè™ÂÖ≥ÂøÉ: Â¶Ç‰ΩïÂàÜÂâ≤ËæìÂÖ•Êï∞ÊçÆÔºåÂú®Â§ßÈáèËÆ°ÁÆóÊú∫ÁªÑÊàêÁöÑÈõÜÁæ§‰∏äÁöÑË∞ÉÂ∫¶ÔºåÈõÜÁæ§‰∏≠ËÆ°ÁÆóÊú∫ÁöÑÈîôËØØÂ§ÑÁêÜÔºåÁÆ°ÁêÜÈõÜÁæ§‰∏≠ËÆ°ÁÆóÊú∫‰πãÈó¥ ÂøÖË¶ÅÁöÑÈÄö‰ø°„ÄÇÈááÁî® MapReduce Êû∂ÊûÑÂèØ‰ª•‰ΩøÈÇ£‰∫õÊ≤°ÊúâÂπ∂Ë°åËÆ°ÁÆóÂíåÂàÜÂ∏ÉÂºèÂ§ÑÁêÜÁ≥ªÁªüÂºÄÂèëÁªèÈ™åÁöÑÁ®ãÂ∫èÂëòÊúâÊïàÂà©Áî®ÂàÜ Â∏ÉÂºèÁ≥ªÁªüÁöÑ‰∏∞ÂØåËµÑÊ∫ê„ÄÇ</p>
<p>Êàë‰ª¨ÁöÑ MapReduce ÂÆûÁé∞ËøêË°åÂú®ËßÑÊ®°ÂèØ‰ª•ÁÅµÊ¥ªË∞ÉÊï¥ÁöÑÁî±ÊôÆÈÄöÊú∫Âô®ÁªÑÊàêÁöÑÈõÜÁæ§‰∏ä:‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ MapReduce ËÆ°ÁÆóÂæÄÂæÄÁî±Âá†ÂçÉÂè∞Êú∫Âô®ÁªÑÊàê„ÄÅÂ§ÑÁêÜ‰ª• TB ËÆ°ÁÆóÁöÑÊï∞ÊçÆ„ÄÇÁ®ãÂ∫èÂëòÂèëÁé∞Ëøô‰∏™Á≥ªÁªüÈùûÂ∏∏Â•ΩÁî®:Â∑≤ÁªèÂÆûÁé∞‰∫ÜÊï∞‰ª•ÁôæËÆ° ÁöÑ MapReduce Á®ãÂ∫èÔºåÂú® Google ÁöÑÈõÜÁæ§‰∏äÔºåÊØèÂ§©ÈÉΩÊúâ 1000 Â§ö‰∏™ MapReduce Á®ãÂ∫èÂú®ÊâßË°å„ÄÇ<br>  <a id="more"></a><br><div class="note info"><h2 id="‰ªãÁªç"><a href="#‰ªãÁªç" class="headerlink" title="‰ªãÁªç"></a>‰ªãÁªç</h2></div><br>Âú®ËøáÂéªÁöÑ 5 Âπ¥ÈáåÔºåÂåÖÊã¨Êú¨Êñá‰ΩúËÄÖÂú®ÂÜÖÁöÑ Google ÁöÑÂæàÂ§öÁ®ãÂ∫èÂëòÔºå‰∏∫‰∫ÜÂ§ÑÁêÜÊµ∑ÈáèÁöÑÂéüÂßãÊï∞ÊçÆÔºåÂ∑≤ÁªèÂÆûÁé∞‰∫ÜÊï∞ ‰ª•ÁôæËÆ°ÁöÑ„ÄÅ‰∏ìÁî®ÁöÑËÆ°ÁÆóÊñπÊ≥ï„ÄÇËøô‰∫õËÆ°ÁÆóÊñπÊ≥ïÁî®Êù•Â§ÑÁêÜÂ§ßÈáèÁöÑÂéüÂßãÊï∞ÊçÆÔºåÊØîÂ¶ÇÔºåÊñáÊ°£ÊäìÂèñ(Á±ª‰ººÁΩëÁªúÁà¨Ëô´ÁöÑÁ®ã Â∫è)„ÄÅWeb ËØ∑Ê±ÇÊó•ÂøóÁ≠âÁ≠â;‰πü‰∏∫‰∫ÜËÆ°ÁÆóÂ§ÑÁêÜÂêÑÁßçÁ±ªÂûãÁöÑË°çÁîüÊï∞ÊçÆÔºåÊØîÂ¶ÇÂÄíÊéíÁ¥¢Âºï„ÄÅWeb ÊñáÊ°£ÁöÑÂõæÁªìÊûÑÁöÑÂêÑÁßçË°® Á§∫ÂΩ¢Âäø„ÄÅÊØèÂè∞‰∏ªÊú∫‰∏äÁΩëÁªúÁà¨Ëô´ÊäìÂèñÁöÑÈ°µÈù¢Êï∞ÈáèÁöÑÊ±áÊÄª„ÄÅÊØèÂ§©Ë¢´ËØ∑Ê±ÇÁöÑÊúÄÂ§öÁöÑÊü•ËØ¢ÁöÑÈõÜÂêàÁ≠âÁ≠â„ÄÇÂ§ßÂ§öÊï∞ËøôÊ†∑ÁöÑ Êï∞ÊçÆÂ§ÑÁêÜËøêÁÆóÂú®Ê¶ÇÂøµ‰∏äÂæàÂÆπÊòìÁêÜËß£„ÄÇÁÑ∂ËÄåÁî±‰∫éËæìÂÖ•ÁöÑÊï∞ÊçÆÈáèÂ∑®Â§ßÔºåÂõ†Ê≠§Ë¶ÅÊÉ≥Âú®ÂèØÊé•ÂèóÁöÑÊó∂Èó¥ÂÜÖÂÆåÊàêËøêÁÆóÔºåÂè™ ÊúâÂ∞ÜËøô‰∫õËÆ°ÁÆóÂàÜÂ∏ÉÂú®ÊàêÁôæ‰∏äÂçÉÁöÑ‰∏ªÊú∫‰∏ä„ÄÇÂ¶Ç‰ΩïÂ§ÑÁêÜÂπ∂Ë°åËÆ°ÁÆó„ÄÅÂ¶Ç‰ΩïÂàÜÂèëÊï∞ÊçÆ„ÄÅÂ¶Ç‰ΩïÂ§ÑÁêÜÈîôËØØ?ÊâÄÊúâËøô‰∫õÈóÆÈ¢ò ÁªºÂêàÂú®‰∏ÄËµ∑ÔºåÈúÄË¶ÅÂ§ßÈáèÁöÑ‰ª£Á†ÅÂ§ÑÁêÜÔºåÂõ†Ê≠§‰πü‰ΩøÂæóÂéüÊú¨ÁÆÄÂçïÁöÑËøêÁÆóÂèòÂæóÈöæ‰ª•Â§ÑÁêÜ„ÄÇ</p>
<p>‰∏∫‰∫ÜËß£ÂÜ≥‰∏äËø∞Â§çÊùÇÁöÑÈóÆÈ¢òÔºåÊàë‰ª¨ËÆæËÆ°‰∏Ä‰∏™Êñ∞ÁöÑÊäΩË±°Ê®°ÂûãÔºå‰ΩøÁî®Ëøô‰∏™ÊäΩË±°Ê®°ÂûãÔºåÊàë‰ª¨Âè™Ë¶ÅË°®Ëø∞Êàë‰ª¨ÊÉ≥Ë¶ÅÊâß Ë°åÁöÑÁÆÄÂçïËøêÁÆóÂç≥ÂèØÔºåËÄå‰∏çÂøÖÂÖ≥ÂøÉÂπ∂Ë°åËÆ°ÁÆó„ÄÅÂÆπÈîô„ÄÅÊï∞ÊçÆÂàÜÂ∏É„ÄÅË¥üËΩΩÂùáË°°Á≠âÂ§çÊùÇÁöÑÁªÜËäÇÔºåËøô‰∫õÈóÆÈ¢òÈÉΩË¢´Â∞ÅË£ÖÂú® ‰∫Ü‰∏Ä‰∏™Â∫ìÈáåÈù¢„ÄÇËÆæËÆ°Ëøô‰∏™ÊäΩË±°Ê®°ÂûãÁöÑÁÅµÊÑüÊù•Ëá™ Lisp ÂíåËÆ∏Â§öÂÖ∂‰ªñÂáΩÊï∞ÂºèËØ≠Ë®ÄÁöÑ Map Âíå Reduce ÁöÑÂéüËØ≠„ÄÇÊàë‰ª¨ÊÑè ËØÜÂà∞Êàë‰ª¨Â§ßÂ§öÊï∞ÁöÑËøêÁÆóÈÉΩÂåÖÂê´ËøôÊ†∑ÁöÑÊìç‰Ωú:Âú®ËæìÂÖ•Êï∞ÊçÆÁöÑ‚ÄúÈÄªËæë‚ÄùËÆ∞ÂΩï‰∏äÂ∫îÁî® Map Êìç‰ΩúÂæóÂá∫‰∏Ä‰∏™‰∏≠Èó¥ key/value pair ÈõÜÂêàÔºåÁÑ∂ÂêéÂú®ÊâÄÊúâÂÖ∑ÊúâÁõ∏Âêå key ÂÄºÁöÑ value ÂÄº‰∏äÂ∫îÁî® Reduce Êìç‰ΩúÔºå‰ªéËÄåËææÂà∞ÂêàÂπ∂‰∏≠Èó¥ÁöÑÊï∞ÊçÆÔºåÂæóÂà∞‰∏Ä‰∏™ÊÉ≥Ë¶ÅÁöÑÁªìÊûúÁöÑÁõÆÁöÑ„ÄÇ‰ΩøÁî® MapReduce Ê®°ÂûãÔºåÂÜçÁªìÂêàÁî®Êà∑ÂÆûÁé∞ÁöÑ Map Âíå Reduce ÂáΩÊï∞ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÈùûÂ∏∏ÂÆπÊòìÁöÑ ÂÆûÁé∞Â§ßËßÑÊ®°Âπ∂Ë°åÂåñËÆ°ÁÆó;ÈÄöËøá MapReduce Ê®°ÂûãËá™Â∏¶ÁöÑ‚ÄúÂÜçÊ¨°ÊâßË°å‚Äù(re-execution)ÂäüËÉΩÔºå‰πüÊèê‰æõ‰∫ÜÂàùÁ∫ßÁöÑÂÆπÁÅæÂÆûÁé∞ÊñπÊ°à„ÄÇ</p>
<p>Ëøô‰∏™Â∑•‰Ωú(ÂÆûÁé∞‰∏Ä‰∏™ MapReduce Ê°ÜÊû∂Ê®°Âûã)ÁöÑ‰∏ªË¶ÅË¥°ÁåÆÊòØÈÄöËøáÁÆÄÂçïÁöÑÊé•Âè£Êù•ÂÆûÁé∞Ëá™Âä®ÁöÑÂπ∂Ë°åÂåñÂíåÂ§ßËßÑÊ®°<br>ÁöÑÂàÜÂ∏ÉÂºèËÆ°ÁÆóÔºåÈÄöËøá‰ΩøÁî® MapReduce Ê®°ÂûãÊé•Âè£ÂÆûÁé∞Âú®Â§ßÈáèÊôÆÈÄöÁöÑ PC Êú∫‰∏äÈ´òÊÄßËÉΩËÆ°ÁÆó„ÄÇ </p>
<p>Á¨¨‰∫åÈÉ®ÂàÜÊèèËø∞Âü∫Êú¨ÁöÑÁºñÁ®ãÊ®°ÂûãÂíå‰∏Ä‰∫õ‰ΩøÁî®Ê°à‰æã„ÄÇ </p>
<p>Á¨¨‰∏âÈÉ®ÂàÜÊèèËø∞‰∫Ü‰∏Ä‰∏™ÁªèËøáË£ÅÂâ™ÁöÑ„ÄÅÈÄÇÂêàÊàë‰ª¨ÁöÑÂü∫‰∫éÈõÜÁæ§ÁöÑËÆ°ÁÆóÁéØÂ¢ÉÁöÑ MapReduce ÂÆûÁé∞„ÄÇ </p>
<p>Á¨¨ÂõõÈÉ®ÂàÜÊèèËø∞Êàë‰ª¨ËÆ§‰∏∫Âú® MapReduce ÁºñÁ®ãÊ®°Âûã‰∏≠‰∏Ä‰∫õÂÆûÁî®ÁöÑÊäÄÂ∑ß„ÄÇ </p>
<p>Á¨¨‰∫îÈÉ®ÂàÜÂØπ‰∫éÂêÑÁßç‰∏çÂêåÁöÑ‰ªªÂä°ÔºåÊµãÈáèÊàë‰ª¨ MapReduce ÂÆûÁé∞ÁöÑÊÄßËÉΩ„ÄÇ</p>
<p>Á¨¨ÂÖ≠ÈÉ®ÂàÜÊè≠Á§∫‰∫ÜÂú® Google ÂÜÖÈÉ®Â¶Ç‰Ωï‰ΩøÁî® MapReduce ‰Ωú‰∏∫Âü∫Á°ÄÈáçÂÜôÊàë‰ª¨ÁöÑÁ¥¢ÂºïÁ≥ªÁªü‰∫ßÂìÅÔºåÂåÖÊã¨ÂÖ∂ÂÆÉ‰∏Ä‰∫õ ‰ΩøÁî® MapReduce ÁöÑÁªèÈ™å„ÄÇ</p>
<p>Á¨¨‰∏ÉÈÉ®ÂàÜËÆ®ËÆ∫Áõ∏ÂÖ≥ÁöÑÂíåÊú™Êù•ÁöÑÂ∑•‰Ωú„ÄÇ</p>
<div class="note info"><h2 id="ÁºñÁ®ãÊ®°Âûã"><a href="#ÁºñÁ®ãÊ®°Âûã" class="headerlink" title="ÁºñÁ®ãÊ®°Âûã"></a>ÁºñÁ®ãÊ®°Âûã</h2></div>
<p>MapReduce ÁºñÁ®ãÊ®°ÂûãÁöÑÂéüÁêÜÊòØ:Âà©Áî®‰∏Ä‰∏™ËæìÂÖ• key/value pair ÈõÜÂêàÊù•‰∫ßÁîü‰∏Ä‰∏™ËæìÂá∫ÁöÑ key/value pair ÈõÜÂêà„ÄÇ MapReduce Â∫ìÁöÑÁî®Êà∑Áî®‰∏§‰∏™ÂáΩÊï∞Ë°®ËææËøô‰∏™ËÆ°ÁÆó:Map Âíå Reduce„ÄÇ</p>
<p>Áî®Êà∑Ëá™ÂÆö‰πâÁöÑ Map ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™ËæìÂÖ•ÁöÑ key/value pair ÂÄºÔºåÁÑ∂Âêé‰∫ßÁîü‰∏Ä‰∏™‰∏≠Èó¥ key/value pair ÂÄºÁöÑÈõÜÂêà„ÄÇ MapReduce Â∫ìÊääÊâÄÊúâÂÖ∑ÊúâÁõ∏Âêå‰∏≠Èó¥ key ÂÄº I ÁöÑ‰∏≠Èó¥ value ÂÄºÈõÜÂêàÂú®‰∏ÄËµ∑Âêé‰º†ÈÄíÁªô reduce ÂáΩÊï∞„ÄÇ</p>
<p>Áî®Êà∑Ëá™ÂÆö‰πâÁöÑ Reduce ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™‰∏≠Èó¥ key ÁöÑÂÄº I ÂíåÁõ∏ÂÖ≥ÁöÑ‰∏Ä‰∏™ value ÂÄºÁöÑÈõÜÂêà„ÄÇReduce ÂáΩÊï∞ÂêàÂπ∂Ëøô‰∫õ value ÂÄºÔºåÂΩ¢Êàê‰∏Ä‰∏™ËæÉÂ∞èÁöÑ value ÂÄºÁöÑÈõÜÂêà„ÄÇ‰∏ÄËà¨ÁöÑÔºåÊØèÊ¨° Reduce ÂáΩÊï∞Ë∞ÉÁî®Âè™‰∫ßÁîü 0 Êàñ 1 ‰∏™ËæìÂá∫ value ÂÄº„ÄÇÈÄö Â∏∏Êàë‰ª¨ÈÄöËøá‰∏Ä‰∏™Ëø≠‰ª£Âô®Êää‰∏≠Èó¥ value ÂÄºÊèê‰æõÁªô Reduce ÂáΩÊï∞ÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•Â§ÑÁêÜÊó†Ê≥ïÂÖ®ÈÉ®ÊîæÂÖ•ÂÜÖÂ≠ò‰∏≠ÁöÑÂ§ßÈáè ÁöÑ value ÂÄºÁöÑÈõÜÂêà„ÄÇ</p>
<h3 id="‰æãÂ≠ê"><a href="#‰æãÂ≠ê" class="headerlink" title="‰æãÂ≠ê"></a>‰æãÂ≠ê</h3><p>‰æãÂ¶ÇÔºåËÆ°ÁÆó‰∏Ä‰∏™Â§ßÁöÑÊñáÊ°£ÈõÜÂêà‰∏≠ÊØè‰∏™ÂçïËØçÂá∫Áé∞ÁöÑÊ¨°Êï∞Ôºå‰∏ãÈù¢ÊòØ‰º™‰ª£Á†ÅÊÆµ:</p>
<p><code>`</code><br>map(String key, String value):<br>    // key: document name<br>    // value: document contents<br>    for each word w in value:<br>        EmitIntermediate(w, ‚Äú1‚Ä≤‚Ä≤);</p>
<p>reduce(String key, Iterator values):<br>    // key: a word<br>    // values: a list of counts<br>    int result = 0;<br>    for each v in values:<br>        result += ParseInt(v);<br>    Emit(AsString(result));<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Map ÂáΩÊï∞ËæìÂá∫ÊñáÊ°£‰∏≠ÁöÑÊØè‰∏™ËØç„ÄÅ‰ª•ÂèäËøô‰∏™ËØçÁöÑÂá∫Áé∞Ê¨°Êï∞(Âú®Ëøô‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÈáåÂ∞±ÊòØ 1)„ÄÇReduce ÂáΩÊï∞Êää Map ÂáΩÊï∞‰∫ßÁîüÁöÑÊØè‰∏Ä‰∏™ÁâπÂÆöÁöÑËØçÁöÑËÆ°Êï∞Á¥ØÂä†Ëµ∑Êù•„ÄÇÂè¶Â§ñÔºåÁî®Êà∑ÁºñÂÜô‰ª£Á†ÅÔºå‰ΩøÁî®ËæìÂÖ•ÂíåËæìÂá∫Êñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÅÂèØÈÄâÁöÑË∞ÉËäÇÂèÇÊï∞Êù•ÂÆåÊàê‰∏Ä‰∏™Á¨¶Âêà MapReduce Ê®°ÂûãËßÑ ËåÉÁöÑÂØπË±°ÔºåÁÑ∂ÂêéË∞ÉÁî® MapReduce ÂáΩÊï∞ÔºåÂπ∂ÊääËøô‰∏™ËßÑËåÉÂØπË±°‰º†ÈÄíÁªôÂÆÉ„ÄÇÁî®Êà∑ÁöÑ‰ª£Á†ÅÂíå MapReduce Â∫ìÈìæÊé•Âú®‰∏ÄËµ∑ (Áî® C++ÂÆûÁé∞)„ÄÇÈôÑÂΩï A ÂåÖÂê´‰∫ÜËøô‰∏™ÂÆû‰æãÁöÑÂÖ®ÈÉ®Á®ãÂ∫è‰ª£Á†Å„ÄÇ### Á±ªÂûãÂ∞ΩÁÆ°Âú®ÂâçÈù¢‰æãÂ≠êÁöÑ‰º™‰ª£Á†Å‰∏≠‰ΩøÁî®‰∫Ü‰ª•Â≠óÁ¨¶‰∏≤Ë°®Á§∫ÁöÑËæìÂÖ•ËæìÂá∫ÂÄºÔºå‰ΩÜÊòØÂú®Ê¶ÇÂøµ‰∏äÔºåÁî®Êà∑ÂÆö‰πâÁöÑ Map Âíå ReduceÂáΩÊï∞ÈÉΩÊúâÁõ∏ÂÖ≥ËÅîÁöÑÁ±ªÂûã:</span><br></pre></td></tr></table></figure></p>
<p>map(k1,v1) -&gt;list(k2,v2)<br>reduce(k2,list(v2)) -&gt;list(v2)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">ÊØîÂ¶ÇÔºåËæìÂÖ•ÁöÑ key Âíå value ÂÄº‰∏éËæìÂá∫ÁöÑ key Âíå value ÂÄºÂú®Á±ªÂûã‰∏äÊé®ÂØºÁöÑÂüü‰∏çÂêå„ÄÇÊ≠§Â§ñÔºå‰∏≠Èó¥ key Âíå value ÂÄº‰∏éËæìÂá∫ key Âíå value ÂÄºÂú®Á±ªÂûã‰∏äÊé®ÂØºÁöÑÂüüÁõ∏Âêå„ÄÇÊàë‰ª¨ÁöÑ C++‰∏≠‰ΩøÁî®Â≠óÁ¨¶‰∏≤Á±ªÂûã‰Ωú‰∏∫Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÁöÑËæìÂÖ•ËæìÂá∫ÔºåÁî®Êà∑Âú®Ëá™Â∑±ÁöÑ‰ª£Á†Å‰∏≠ÂØπÂ≠óÁ¨¶‰∏≤ËøõË°åÈÄÇÂΩì ÁöÑÁ±ªÂûãËΩ¨Êç¢„ÄÇ### Êõ¥Â§öÁöÑ‰æãÂ≠êËøôÈáåËøòÊúâ‰∏Ä‰∫õÊúâË∂£ÁöÑÁÆÄÂçï‰æãÂ≠êÔºåÂèØ‰ª•ÂæàÂÆπÊòìÁöÑ‰ΩøÁî® MapReduce Ê®°ÂûãÊù•Ë°®Á§∫:ÂàÜÂ∏ÉÂºèÁöÑ Grep:Map ÂáΩÊï∞ËæìÂá∫ÂåπÈÖçÊüê‰∏™Ê®°ÂºèÁöÑ‰∏ÄË°åÔºåReduce ÂáΩÊï∞ÊòØ‰∏Ä‰∏™ÊÅíÁ≠âÂáΩÊï∞ÔºåÂç≥Êää‰∏≠Èó¥Êï∞ÊçÆÂ§çÂà∂Âà∞ ËæìÂá∫„ÄÇËÆ°ÁÆó URL ËÆøÈóÆÈ¢ëÁéá:Map ÂáΩÊï∞Â§ÑÁêÜÊó•Âøó‰∏≠ web È°µÈù¢ËØ∑Ê±ÇÁöÑËÆ∞ÂΩïÔºåÁÑ∂ÂêéËæìÂá∫(URL,1)„ÄÇReduce ÂáΩÊï∞ÊääÁõ∏ÂêåURL ÁöÑ value ÂÄºÈÉΩÁ¥ØÂä†Ëµ∑Êù•Ôºå‰∫ßÁîü(URL,ËÆ∞ÂΩïÊÄªÊï∞)ÁªìÊûú„ÄÇÂÄíËΩ¨ÁΩëÁªúÈìæÊé•Âõæ:Map ÂáΩÊï∞Âú®Ê∫êÈ°µÈù¢(source)‰∏≠ÊêúÁ¥¢ÊâÄÊúâÁöÑÈìæÊé•ÁõÆÊ†á(target)Âπ∂ËæìÂá∫‰∏∫(target,source)„ÄÇReduce ÂáΩÊï∞ÊääÁªôÂÆöÈìæÊé•ÁõÆÊ†á(target)ÁöÑÈìæÊé•ÁªÑÂêàÊàê‰∏Ä‰∏™ÂàóË°®ÔºåËæìÂá∫(target,list(source))„ÄÇ </span><br><span class="line"></span><br><span class="line">ÊØè‰∏™‰∏ªÊú∫ÁöÑÊ£ÄÁ¥¢ËØçÂêëÈáè:Ê£ÄÁ¥¢ËØçÂêëÈáèÁî®‰∏Ä‰∏™(ËØç,È¢ëÁéá)ÂàóË°®Êù•Ê¶ÇËø∞Âá∫Áé∞Âú®ÊñáÊ°£ÊàñÊñáÊ°£ÈõÜ‰∏≠ÁöÑÊúÄÈáçË¶ÅÁöÑ‰∏Ä‰∫õ ËØç„ÄÇMap ÂáΩÊï∞‰∏∫ÊØè‰∏Ä‰∏™ËæìÂÖ•ÊñáÊ°£ËæìÂá∫(‰∏ªÊú∫Âêç,Ê£ÄÁ¥¢ËØçÂêëÈáè)ÔºåÂÖ∂‰∏≠‰∏ªÊú∫ÂêçÊù•Ëá™ÊñáÊ°£ÁöÑ URL„ÄÇReduce ÂáΩÊï∞Êé•Êî∂Áªô ÂÆö‰∏ªÊú∫ÁöÑÊâÄÊúâÊñáÊ°£ÁöÑÊ£ÄÁ¥¢ËØçÂêëÈáèÔºåÂπ∂ÊääËøô‰∫õÊ£ÄÁ¥¢ËØçÂêëÈáèÂä†Âú®‰∏ÄËµ∑Ôºå‰∏¢ÂºÉÊéâ‰ΩéÈ¢ëÁöÑÊ£ÄÁ¥¢ËØçÔºåËæìÂá∫‰∏Ä‰∏™ÊúÄÁªàÁöÑ(‰∏ªÊú∫Âêç,Ê£ÄÁ¥¢ËØçÂêëÈáè)„ÄÇÂÄíÊéíÁ¥¢Âºï:Map ÂáΩÊï∞ÂàÜÊûêÊØè‰∏™ÊñáÊ°£ËæìÂá∫‰∏Ä‰∏™(ËØç,ÊñáÊ°£Âè∑)ÁöÑÂàóË°®ÔºåReduce ÂáΩÊï∞ÁöÑËæìÂÖ•ÊòØ‰∏Ä‰∏™ÁªôÂÆöËØçÁöÑÊâÄÊúâ(ËØçÔºåÊñáÊ°£Âè∑)ÔºåÊéíÂ∫èÊâÄÊúâÁöÑÊñáÊ°£Âè∑ÔºåËæìÂá∫(ËØç,list(ÊñáÊ°£Âè∑))„ÄÇÊâÄÊúâÁöÑËæìÂá∫ÈõÜÂêàÂΩ¢Êàê‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÄíÊéíÁ¥¢ÂºïÔºåÂÆÉ ‰ª•‰∏ÄÁßçÁÆÄÂçïÁöÑÁÆóÊ≥ïË∑üË∏™ËØçÂú®ÊñáÊ°£‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇÂàÜÂ∏ÉÂºèÊéíÂ∫è:Map ÂáΩÊï∞‰ªéÊØè‰∏™ËÆ∞ÂΩïÊèêÂèñ keyÔºåËæìÂá∫(key,record)„ÄÇReduce ÂáΩÊï∞‰∏çÊîπÂèò‰ªª‰ΩïÁöÑÂÄº„ÄÇËøô‰∏™ËøêÁÆó ‰æùËµñÂàÜÂå∫Êú∫Âà∂(Âú® 4.1 ÊèèËø∞)ÂíåÊéíÂ∫èÂ±ûÊÄß(Âú® 4.2 ÊèèËø∞)„ÄÇ&#123;% note info %&#125;</span><br><span class="line">## ÂÆûÁé∞</span><br><span class="line"> &#123;% endnote %&#125;MapReduce Ê®°ÂûãÂèØ‰ª•ÊúâÂ§öÁßç‰∏çÂêåÁöÑÂÆûÁé∞ÊñπÂºè„ÄÇÂ¶Ç‰ΩïÊ≠£Á°ÆÈÄâÊã©ÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÁöÑÁéØÂ¢É„ÄÇ‰æãÂ¶ÇÔºå‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèÈÄÇ Áî®‰∫éÂ∞èÂûãÁöÑÂÖ±‰∫´ÂÜÖÂ≠òÊñπÂºèÁöÑÊú∫Âô®ÔºåÂè¶Â§ñ‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèÂàôÈÄÇÁî®‰∫éÂ§ßÂûã NUMA Êû∂ÊûÑÁöÑÂ§öÂ§ÑÁêÜÂô®ÁöÑ‰∏ªÊú∫ÔºåËÄåÊúâÁöÑÂÆû Áé∞ÊñπÂºèÊõ¥ÈÄÇÂêàÂ§ßÂûãÁöÑÁΩëÁªúËøûÊé•ÈõÜÁæ§„ÄÇÊú¨Á´†ËäÇÊèèËø∞‰∏Ä‰∏™ÈÄÇÁî®‰∫é Google ÂÜÖÈÉ®ÂπøÊ≥õ‰ΩøÁî®ÁöÑËøêÁÆóÁéØÂ¢ÉÁöÑÂÆûÁé∞:Áî®‰ª•Â§™ÁΩë‰∫§Êç¢Êú∫ËøûÊé•„ÄÅÁî±ÊôÆÈÄö PC Êú∫ÁªÑ ÊàêÁöÑÂ§ßÂûãÈõÜÁæ§„ÄÇÂú®Êàë‰ª¨ÁöÑÁéØÂ¢ÉÈáåÂåÖÊã¨:</span><br><span class="line">1. x86 Êû∂ÊûÑ„ÄÅËøêË°å Linux Êìç‰ΩúÁ≥ªÁªü„ÄÅÂèåÂ§ÑÁêÜÂô®„ÄÅ2-4GB ÂÜÖÂ≠òÁöÑÊú∫Âô®„ÄÇ2. ÊôÆÈÄöÁöÑÁΩëÁªúÁ°¨‰ª∂ËÆæÂ§áÔºåÊØè‰∏™Êú∫Âô®ÁöÑÂ∏¶ÂÆΩ‰∏∫ÁôæÂÖÜÊàñËÄÖÂçÉÂÖÜÔºå‰ΩÜÊòØËøúÂ∞è‰∫éÁΩëÁªúÁöÑÂπ≥ÂùáÂ∏¶ÂÆΩÁöÑ‰∏ÄÂçä„ÄÇ3. ÈõÜÁæ§‰∏≠ÂåÖÂê´ÊàêÁôæ‰∏äÂçÉÁöÑÊú∫Âô®ÔºåÂõ†Ê≠§ÔºåÊú∫Âô®ÊïÖÈöúÊòØÂ∏∏ÊÄÅ„ÄÇ4. Â≠òÂÇ®‰∏∫Âªâ‰ª∑ÁöÑÂÜÖÁΩÆ IDE Á°¨Áõò„ÄÇ‰∏Ä‰∏™ÂÜÖÈÉ®ÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÁî®Êù•ÁÆ°ÁêÜÂ≠òÂÇ®Âú®Ëøô‰∫õÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆ„ÄÇÊñá‰ª∂Á≥ªÁªüÈÄöËøáÊï∞ÊçÆÂ§çÂà∂Êù•Âú®‰∏çÂèØÈù†ÁöÑÁ°¨‰ª∂‰∏ä‰øùËØÅÊï∞ÊçÆÁöÑÂèØÈù†ÊÄßÂíåÊúâÊïàÊÄß„ÄÇ5. Áî®Êà∑Êèê‰∫§Â∑•‰Ωú(job)ÁªôË∞ÉÂ∫¶Á≥ªÁªü„ÄÇÊØè‰∏™Â∑•‰Ωú(job)ÈÉΩÂåÖÂê´‰∏ÄÁ≥ªÂàóÁöÑ‰ªªÂä°(task)ÔºåË∞ÉÂ∫¶Á≥ªÁªüÂ∞ÜËøô‰∫õ‰ªª    Âä°Ë∞ÉÂ∫¶Âà∞ÈõÜÁæ§‰∏≠Â§öÂè∞ÂèØÁî®ÁöÑÊú∫Âô®‰∏ä„ÄÇ</span><br><span class="line">    ### ÊâßË°åÊ¶ÇÊã¨ÈÄöËøáÂ∞Ü Map Ë∞ÉÁî®ÁöÑËæìÂÖ•Êï∞ÊçÆËá™Âä®ÂàÜÂâ≤‰∏∫ M ‰∏™Êï∞ÊçÆÁâáÊÆµÁöÑÈõÜÂêàÔºåMap Ë∞ÉÁî®Ë¢´ÂàÜÂ∏ÉÂà∞Â§öÂè∞Êú∫Âô®‰∏äÊâßË°å„ÄÇËæìÂÖ•ÁöÑÊï∞ÊçÆÁâáÊÆµËÉΩÂ§üÂú®‰∏çÂêåÁöÑÊú∫Âô®‰∏äÂπ∂Ë°åÂ§ÑÁêÜ„ÄÇ‰ΩøÁî®ÂàÜÂå∫ÂáΩÊï∞Â∞Ü Map Ë∞ÉÁî®‰∫ßÁîüÁöÑ‰∏≠Èó¥ key ÂÄºÂàÜÊàê R ‰∏™‰∏çÂêåÂàÜÂå∫(‰æãÂ¶ÇÔºåhash(key) mod R)ÔºåReduce Ë∞ÉÁî®‰πüË¢´ÂàÜÂ∏ÉÂà∞Â§öÂè∞Êú∫Âô®‰∏äÊâßË°å„ÄÇÂàÜÂå∫Êï∞Èáè(R)ÂíåÂàÜÂå∫ÂáΩÊï∞Áî±Áî®Êà∑Êù•ÊåáÂÆö„ÄÇ</span><br><span class="line">![](http://oliji9s3j.bkt.clouddn.com/15133908393351.jpg)Âõæ 1 Â±ïÁ§∫‰∫ÜÊàë‰ª¨ÁöÑ MapReduce ÂÆûÁé∞‰∏≠Êìç‰ΩúÁöÑÂÖ®ÈÉ®ÊµÅÁ®ã„ÄÇÂΩìÁî®Êà∑Ë∞ÉÁî® MapReduce ÂáΩÊï∞Êó∂ÔºåÂ∞ÜÂèëÁîü‰∏ãÈù¢ÁöÑ‰∏Ä Á≥ªÂàóÂä®‰Ωú(‰∏ãÈù¢ÁöÑÂ∫èÂè∑ÂíåÂõæ 1 ‰∏≠ÁöÑÂ∫èÂè∑‰∏Ä‰∏ÄÂØπÂ∫î):</span><br><span class="line">1. Áî®Êà∑Á®ãÂ∫èÈ¶ñÂÖàË∞ÉÁî®ÁöÑ MapReduce Â∫ìÂ∞ÜËæìÂÖ•Êñá‰ª∂ÂàÜÊàê M ‰∏™Êï∞ÊçÆÁâáÂ∫¶ÔºåÊØè‰∏™Êï∞ÊçÆÁâáÊÆµÁöÑÂ§ßÂ∞è‰∏ÄËà¨‰ªé 16MB Âà∞ 64MB(ÂèØ‰ª•ÈÄöËøáÂèØÈÄâÁöÑÂèÇÊï∞Êù•ÊéßÂà∂ÊØè‰∏™Êï∞ÊçÆÁâáÊÆµÁöÑÂ§ßÂ∞è)„ÄÇÁÑ∂ÂêéÁî®Êà∑Á®ãÂ∫èÂú®Êú∫Áæ§‰∏≠ÂàõÂª∫Â§ßÈáè ÁöÑÁ®ãÂ∫èÂâØÊú¨„ÄÇ2. Ëøô‰∫õÁ®ãÂ∫èÂâØÊú¨‰∏≠ÁöÑÊúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑÁ®ãÂ∫è‚Äìmaster„ÄÇÂâØÊú¨‰∏≠ÂÖ∂ÂÆÉÁöÑÁ®ãÂ∫èÈÉΩÊòØ worker Á®ãÂ∫èÔºåÁî± master ÂàÜÈÖç ‰ªªÂä°„ÄÇÊúâ M ‰∏™ Map ‰ªªÂä°Âíå R ‰∏™ Reduce ‰ªªÂä°Â∞ÜË¢´ÂàÜÈÖçÔºåmaster Â∞Ü‰∏Ä‰∏™ Map ‰ªªÂä°Êàñ Reduce ‰ªªÂä°ÂàÜÈÖç Áªô‰∏Ä‰∏™Á©∫Èó≤ÁöÑ worker„ÄÇ3. Ë¢´ÂàÜÈÖç‰∫Ü map ‰ªªÂä°ÁöÑ worker Á®ãÂ∫èËØªÂèñÁõ∏ÂÖ≥ÁöÑËæìÂÖ•Êï∞ÊçÆÁâáÊÆµÔºå‰ªéËæìÂÖ•ÁöÑÊï∞ÊçÆÁâáÊÆµ‰∏≠Ëß£ÊûêÂá∫ key/value pairÔºåÁÑ∂ÂêéÊää key/value pair ‰º†ÈÄíÁªôÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Map ÂáΩÊï∞ÔºåÁî± Map ÂáΩÊï∞ÁîüÊàêÂπ∂ËæìÂá∫ÁöÑ‰∏≠Èó¥ key/value pairÔºåÂπ∂ÁºìÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ4. ÁºìÂ≠ò‰∏≠ÁöÑ key/value pair ÈÄöËøáÂàÜÂå∫ÂáΩÊï∞ÂàÜÊàê R ‰∏™Âå∫ÂüüÔºå‰πãÂêéÂë®ÊúüÊÄßÁöÑÂÜôÂÖ•Âà∞Êú¨Âú∞Á£ÅÁõò‰∏ä„ÄÇÁºìÂ≠òÁöÑ key/value pair Âú®Êú¨Âú∞Á£ÅÁõò‰∏äÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÂ∞ÜË¢´Âõû‰º†Áªô masterÔºåÁî± master Ë¥üË¥£ÊääËøô‰∫õÂ≠òÂÇ®‰ΩçÁΩÆÂÜç‰º†ÈÄÅÁªô Reduce worker„ÄÇ5. ÂΩì Reduce worker Á®ãÂ∫èÊé•Êî∂Âà∞ master Á®ãÂ∫èÂèëÊù•ÁöÑÊï∞ÊçÆÂ≠òÂÇ®‰ΩçÁΩÆ‰ø°ÊÅØÂêéÔºå‰ΩøÁî® RPC ‰ªé Map worker ÊâÄÂú® ‰∏ªÊú∫ÁöÑÁ£ÅÁõò‰∏äËØªÂèñËøô‰∫õÁºìÂ≠òÊï∞ÊçÆ„ÄÇÂΩì Reduce worker ËØªÂèñ‰∫ÜÊâÄÊúâÁöÑ‰∏≠Èó¥Êï∞ÊçÆÂêéÔºåÈÄöËøáÂØπ key ËøõË°åÊéíÂ∫èÂêé‰ΩøÂæóÂÖ∑ÊúâÁõ∏Âêå key ÂÄºÁöÑÊï∞ÊçÆËÅöÂêàÂú®‰∏ÄËµ∑„ÄÇÁî±‰∫éËÆ∏Â§ö‰∏çÂêåÁöÑ key ÂÄº‰ºöÊò†Â∞ÑÂà∞Áõ∏ÂêåÁöÑ Reduce ‰ªªÂä°‰∏äÔºåÂõ†Ê≠§ÂøÖÈ°ªËøõË°åÊéíÂ∫è„ÄÇÂ¶ÇÊûú‰∏≠Èó¥Êï∞ÊçÆÂ§™Â§ßÊó†Ê≥ïÂú®ÂÜÖÂ≠ò‰∏≠ÂÆåÊàêÊéíÂ∫èÔºåÈÇ£‰πàÂ∞±Ë¶ÅÂú®Â§ñÈÉ®ËøõË°åÊéíÂ∫è„ÄÇ6. Reduce worker Á®ãÂ∫èÈÅçÂéÜÊéíÂ∫èÂêéÁöÑ‰∏≠Èó¥Êï∞ÊçÆÔºåÂØπ‰∫éÊØè‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ‰∏≠Èó¥ key ÂÄºÔºåReduce worker Á®ãÂ∫èÂ∞ÜËøô ‰∏™ key ÂÄºÂíåÂÆÉÁõ∏ÂÖ≥ÁöÑ‰∏≠Èó¥ value ÂÄºÁöÑÈõÜÂêà‰º†ÈÄíÁªôÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Reduce ÂáΩÊï∞„ÄÇReduce ÂáΩÊï∞ÁöÑËæìÂá∫Ë¢´ËøΩÂä†Âà∞ÊâÄÂ±ûÂàÜÂå∫ÁöÑËæìÂá∫Êñá‰ª∂„ÄÇ7. ÂΩìÊâÄÊúâÁöÑ Map Âíå Reduce ‰ªªÂä°ÈÉΩÂÆåÊàê‰πãÂêéÔºåmaster Âî§ÈÜíÁî®Êà∑Á®ãÂ∫è„ÄÇÂú®Ëøô‰∏™Êó∂ÂÄôÔºåÂú®Áî®Êà∑Á®ãÂ∫èÈáåÁöÑÂØπMapReduce Ë∞ÉÁî®ÊâçËøîÂõû„ÄÇ</span><br><span class="line">Âú®ÊàêÂäüÂÆåÊàê‰ªªÂä°‰πãÂêéÔºåMapReduce ÁöÑËæìÂá∫Â≠òÊîæÂú® R ‰∏™ËæìÂá∫Êñá‰ª∂‰∏≠(ÂØπÂ∫îÊØè‰∏™ Reduce ‰ªªÂä°‰∫ßÁîü‰∏Ä‰∏™ËæìÂá∫Êñá‰ª∂ÔºåÊñá‰ª∂ÂêçÁî±Áî®Êà∑ÊåáÂÆö)„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÁî®Êà∑‰∏çÈúÄË¶ÅÂ∞ÜËøô R ‰∏™ËæìÂá∫Êñá‰ª∂ÂêàÂπ∂Êàê‰∏Ä‰∏™Êñá‰ª∂‚Äì‰ªñ‰ª¨ÁªèÂ∏∏ÊääËøô‰∫õÊñá ‰ª∂‰Ωú‰∏∫Âè¶Â§ñ‰∏Ä‰∏™ MapReduce ÁöÑËæìÂÖ•ÔºåÊàñËÄÖÂú®Âè¶Â§ñ‰∏Ä‰∏™ÂèØ‰ª•Â§ÑÁêÜÂ§ö‰∏™ÂàÜÂâ≤Êñá‰ª∂ÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®‰∏≠‰ΩøÁî®„ÄÇ### Master Êï∞ÊçÆÁªìÊûÑMaster ÊåÅÊúâ‰∏Ä‰∫õÊï∞ÊçÆÁªìÊûÑÔºåÂÆÉÂ≠òÂÇ®ÊØè‰∏Ä‰∏™ Map Âíå Reduce ‰ªªÂä°ÁöÑÁä∂ÊÄÅ(Á©∫Èó≤„ÄÅÂ∑•‰Ωú‰∏≠ÊàñÂÆåÊàê)Ôºå‰ª•Âèä Worker Êú∫Âô®(ÈùûÁ©∫Èó≤‰ªªÂä°ÁöÑÊú∫Âô®)ÁöÑÊ†áËØÜ„ÄÇMaster Â∞±ÂÉè‰∏Ä‰∏™Êï∞ÊçÆÁÆ°ÈÅìÔºå‰∏≠Èó¥Êñá‰ª∂Â≠òÂÇ®Âå∫ÂüüÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÈÄöËøáËøô‰∏™ÁÆ°ÈÅì‰ªé Map ‰º†ÈÄíÂà∞ Reduce„ÄÇÂõ†Ê≠§Ôºå ÂØπ‰∫éÊØè‰∏™Â∑≤ÁªèÂÆåÊàêÁöÑ Map ‰ªªÂä°Ôºåmaster Â≠òÂÇ®‰∫Ü Map ‰ªªÂä°‰∫ßÁîüÁöÑ R ‰∏™‰∏≠Èó¥Êñá‰ª∂Â≠òÂÇ®Âå∫ÂüüÁöÑÂ§ßÂ∞èÂíå‰ΩçÁΩÆ„ÄÇÂΩì Map ‰ªªÂä°ÂÆåÊàêÊó∂ÔºåMaster Êé•Êî∂Âà∞‰ΩçÁΩÆÂíåÂ§ßÂ∞èÁöÑÊõ¥Êñ∞‰ø°ÊÅØÔºåËøô‰∫õ‰ø°ÊÅØË¢´ÈÄêÊ≠•ÈÄíÂ¢ûÁöÑÊé®ÈÄÅÁªôÈÇ£‰∫õÊ≠£Âú®Â∑•‰ΩúÁöÑ Reduce ‰ªª Âä°„ÄÇ### ÂÆπÈîôÂõ†‰∏∫ MapReduce Â∫ìÁöÑËÆæËÆ°ÂàùË°∑ÊòØ‰ΩøÁî®Áî±ÊàêÁôæ‰∏äÂçÉÁöÑÊú∫Âô®ÁªÑÊàêÁöÑÈõÜÁæ§Êù•Â§ÑÁêÜË∂ÖÂ§ßËßÑÊ®°ÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•ÔºåËøô‰∏™Â∫ìÂøÖÈ°ªË¶ÅËÉΩÂæàÂ•ΩÁöÑÂ§ÑÁêÜÊú∫Âô®ÊïÖÈöú„ÄÇ#### worker ÊïÖÈöúmaster Âë®ÊúüÊÄßÁöÑ ping ÊØè‰∏™ worker„ÄÇÂ¶ÇÊûúÂú®‰∏Ä‰∏™Á∫¶ÂÆöÁöÑÊó∂Èó¥ËåÉÂõ¥ÂÜÖÊ≤°ÊúâÊî∂Âà∞ worker ËøîÂõûÁöÑ‰ø°ÊÅØÔºåmaster Â∞Ü ÊääËøô‰∏™ worker Ê†áËÆ∞‰∏∫Â§±Êïà„ÄÇÊâÄÊúâÁî±Ëøô‰∏™Â§±ÊïàÁöÑ worker ÂÆåÊàêÁöÑ Map ‰ªªÂä°Ë¢´ÈáçËÆæ‰∏∫ÂàùÂßãÁöÑÁ©∫Èó≤Áä∂ÊÄÅÔºå‰πãÂêéËøô‰∫õ ‰ªªÂä°Â∞±ÂèØ‰ª•Ë¢´ÂÆâÊéíÁªôÂÖ∂‰ªñÁöÑ worker„ÄÇÂêåÊ†∑ÁöÑÔºåworker Â§±ÊïàÊó∂Ê≠£Âú®ËøêË°åÁöÑ Map Êàñ Reduce ‰ªªÂä°‰πüÂ∞ÜË¢´ÈáçÊñ∞ÁΩÆ‰∏∫ Á©∫Èó≤Áä∂ÊÄÅÔºåÁ≠âÂæÖÈáçÊñ∞Ë∞ÉÂ∫¶„ÄÇÂΩì worker ÊïÖÈöúÊó∂ÔºåÁî±‰∫éÂ∑≤ÁªèÂÆåÊàêÁöÑ Map ‰ªªÂä°ÁöÑËæìÂá∫Â≠òÂÇ®Âú®ËøôÂè∞Êú∫Âô®‰∏äÔºåMap ‰ªªÂä°ÁöÑËæìÂá∫Â∑≤‰∏çÂèØËÆøÈóÆ‰∫Ü,Âõ†Ê≠§ÂøÖÈ°ªÈáçÊñ∞ÊâßË°å„ÄÇËÄåÂ∑≤ÁªèÂÆåÊàêÁöÑ Reduce ‰ªªÂä°ÁöÑËæìÂá∫Â≠òÂÇ®Âú®ÂÖ®Â±ÄÊñá‰ª∂Á≥ªÁªü‰∏äÔºåÂõ†Ê≠§‰∏çÈúÄË¶ÅÂÜçÊ¨°ÊâßË°å„ÄÇÂΩì‰∏Ä‰∏™ Map ‰ªªÂä°È¶ñÂÖàË¢´ worker A ÊâßË°åÔºå‰πãÂêéÁî±‰∫é worker A Â§±Êïà‰∫ÜÂèàË¢´Ë∞ÉÂ∫¶Âà∞ worker B ÊâßË°åÔºåËøô‰∏™‚ÄúÈáç Êñ∞ÊâßË°å‚ÄùÁöÑÂä®‰Ωú‰ºöË¢´ÈÄöÁü•ÁªôÊâÄÊúâÊâßË°å Reduce ‰ªªÂä°ÁöÑ worker„ÄÇ‰ªª‰ΩïËøòÊ≤°Êúâ‰ªé worker A ËØªÂèñÊï∞ÊçÆÁöÑ Reduce ‰ªªÂä° Â∞Ü‰ªé worker B ËØªÂèñÊï∞ÊçÆ„ÄÇMapReduce ÂèØ‰ª•Â§ÑÁêÜÂ§ßËßÑÊ®° worker Â§±ÊïàÁöÑÊÉÖÂÜµ„ÄÇÊØîÂ¶ÇÔºåÂú®‰∏Ä‰∏™ MapReduce Êìç‰ΩúÊâßË°åÊúüÈó¥ÔºåÂú®Ê≠£Âú®ËøêË°å ÁöÑÈõÜÁæ§‰∏äËøõË°åÁΩëÁªúÁª¥Êä§ÂºïËµ∑ 80 Âè∞Êú∫Âô®Âú®Âá†ÂàÜÈíüÂÜÖ‰∏çÂèØËÆøÈóÆ‰∫ÜÔºåMapReduce master Âè™ÈúÄË¶ÅÁÆÄÂçïÁöÑÂÜçÊ¨°ÊâßË°åÈÇ£‰∫õ ‰∏çÂèØËÆøÈóÆÁöÑ worker ÂÆåÊàêÁöÑÂ∑•‰ΩúÔºå‰πãÂêéÁªßÁª≠ÊâßË°åÊú™ÂÆåÊàêÁöÑ‰ªªÂä°ÔºåÁõ¥Âà∞ÊúÄÁªàÂÆåÊàêËøô‰∏™ MapReduce Êìç‰Ωú„ÄÇ#### master Â§±Ë¥•‰∏Ä‰∏™ÁÆÄÂçïÁöÑËß£ÂÜ≥ÂäûÊ≥ïÊòØËÆ© master Âë®ÊúüÊÄßÁöÑÂ∞Ü‰∏äÈù¢ÊèèËø∞ÁöÑÊï∞ÊçÆÁªìÊûÑ(alex Ê≥®:Êåá 3.2 ËäÇ)ÁöÑÂÜôÂÖ•Á£ÅÁõòÔºåÂç≥ Ê£ÄÊü•ÁÇπ(checkpoint)„ÄÇÂ¶ÇÊûúËøô‰∏™ master ‰ªªÂä°Â§±Êïà‰∫ÜÔºåÂèØ‰ª•‰ªéÊúÄÂêé‰∏Ä‰∏™Ê£ÄÊü•ÁÇπ(checkpoint)ÂºÄÂßãÂêØÂä®Âè¶‰∏Ä‰∏™ master ËøõÁ®ã„ÄÇÁÑ∂ËÄåÔºåÁî±‰∫éÂè™Êúâ‰∏Ä‰∏™ master ËøõÁ®ãÔºåmaster Â§±ÊïàÂêéÂÜçÊÅ¢Â§çÊòØÊØîËæÉÈ∫ªÁÉ¶ÁöÑÔºåÂõ†Ê≠§Êàë‰ª¨Áé∞Âú®ÁöÑÂÆûÁé∞ÊòØ Â¶ÇÊûú master Â§±ÊïàÔºåÂ∞±‰∏≠Ê≠¢ MapReduce ËøêÁÆó„ÄÇÂÆ¢Êà∑ÂèØ‰ª•Ê£ÄÊü•Âà∞Ëøô‰∏™Áä∂ÊÄÅÔºåÂπ∂‰∏îÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÈáçÊñ∞ÊâßË°å MapReduce Êìç‰Ωú„ÄÇ#### Âú®Â§±ÊïàÊñπÈù¢ÁöÑÂ§ÑÁêÜÊú∫Âà∂(Ê≥®:ÂéüÊñá‰∏∫‚Äùsemantics in the presence of failures‚Äù)ÂΩìÁî®Êà∑Êèê‰æõÁöÑ Map Âíå Reduce Êìç‰ΩúÊòØËæìÂÖ•Á°ÆÂÆöÊÄßÂáΩÊï∞(Âç≥Áõ∏ÂêåÁöÑËæìÂÖ•‰∫ßÁîüÁõ∏ÂêåÁöÑËæìÂá∫)Êó∂ÔºåÊàë‰ª¨ÁöÑÂàÜÂ∏É ÂºèÂÆûÁé∞Âú®‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÁöÑËæìÂá∫ÈÉΩÂíåÊâÄÊúâÁ®ãÂ∫èÊ≤°ÊúâÂá∫Áé∞‰ªª‰ΩïÈîôËØØ„ÄÅÈ°∫Â∫èÁöÑÊâßË°å‰∫ßÁîüÁöÑËæìÂá∫ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇÊàë‰ª¨‰æùËµñÂØπ Map Âíå Reduce ‰ªªÂä°ÁöÑËæìÂá∫ÊòØÂéüÂ≠êÊèê‰∫§ÁöÑÊù•ÂÆåÊàêËøô‰∏™ÁâπÊÄß„ÄÇÊØè‰∏™Â∑•‰Ωú‰∏≠ÁöÑ‰ªªÂä°ÊääÂÆÉÁöÑËæìÂá∫ÂÜô Âà∞ÁßÅÊúâÁöÑ‰∏¥Êó∂Êñá‰ª∂‰∏≠„ÄÇÊØè‰∏™ Reduce ‰ªªÂä°ÁîüÊàê‰∏Ä‰∏™ËøôÊ†∑ÁöÑÊñá‰ª∂ÔºåËÄåÊØè‰∏™ Map ‰ªªÂä°ÂàôÁîüÊàê R ‰∏™ËøôÊ†∑ÁöÑÊñá‰ª∂(‰∏Ä ‰∏™ Reduce ‰ªªÂä°ÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂)„ÄÇÂΩì‰∏Ä‰∏™ Map ‰ªªÂä°ÂÆåÊàêÁöÑÊó∂Ôºåworker ÂèëÈÄÅ‰∏Ä‰∏™ÂåÖÂê´ R ‰∏™‰∏¥Êó∂Êñá‰ª∂ÂêçÁöÑÂÆåÊàêÊ∂àÊÅØ Áªô master„ÄÇÂ¶ÇÊûú master ‰ªé‰∏Ä‰∏™Â∑≤ÁªèÂÆåÊàêÁöÑ Map ‰ªªÂä°ÂÜçÊ¨°Êé•Êî∂Âà∞Âà∞‰∏Ä‰∏™ÂÆåÊàêÊ∂àÊÅØÔºåmaster Â∞ÜÂøΩÁï•Ëøô‰∏™Ê∂àÊÅØ;Âê¶ ÂàôÔºåmaster Â∞ÜËøô R ‰∏™Êñá‰ª∂ÁöÑÂêçÂ≠óËÆ∞ÂΩïÂú®Êï∞ÊçÆÁªìÊûÑÈáå„ÄÇÂΩì Reduce ‰ªªÂä°ÂÆåÊàêÊó∂ÔºåReduce worker ËøõÁ®ã‰ª•ÂéüÂ≠êÁöÑÊñπÂºèÊää‰∏¥Êó∂Êñá‰ª∂ÈáçÂëΩÂêç‰∏∫ÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂„ÄÇÂ¶ÇÊûúÂêå ‰∏Ä‰∏™ Reduce ‰ªªÂä°Âú®Â§öÂè∞Êú∫Âô®‰∏äÊâßË°åÔºåÈíàÂØπÂêå‰∏Ä‰∏™ÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂Â∞ÜÊúâÂ§ö‰∏™ÈáçÂëΩÂêçÊìç‰ΩúÊâßË°å„ÄÇÊàë‰ª¨‰æùËµñÂ∫ïÂ±ÇÊñá ‰ª∂Á≥ªÁªüÊèê‰æõÁöÑÈáçÂëΩÂêçÊìç‰ΩúÁöÑÂéüÂ≠êÊÄßÊù•‰øùËØÅÊúÄÁªàÁöÑÊñá‰ª∂Á≥ªÁªüÁä∂ÊÄÅ‰ªÖ‰ªÖÂåÖÂê´‰∏Ä‰∏™ Reduce ‰ªªÂä°‰∫ßÁîüÁöÑÊï∞ÊçÆ„ÄÇ‰ΩøÁî® MapReduce Ê®°ÂûãÁöÑÁ®ãÂ∫èÂëòÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÁêÜËß£‰ªñ‰ª¨Á®ãÂ∫èÁöÑË°å‰∏∫ÔºåÂõ†‰∏∫Êàë‰ª¨ÁªùÂ§ßÂ§öÊï∞ÁöÑ Map Âíå Reduce Êìç‰ΩúÊòØÁ°ÆÂÆöÊÄßÁöÑÔºåËÄå‰∏îÂ≠òÂú®ËøôÊ†∑ÁöÑ‰∏Ä‰∏™‰∫ãÂÆû:Êàë‰ª¨ÁöÑÂ§±ÊïàÂ§ÑÁêÜÊú∫Âà∂Á≠â‰ª∑‰∫é‰∏Ä‰∏™È°∫Â∫èÁöÑÊâßË°åÁöÑÊìç‰Ωú„ÄÇÂΩì Map Êàñ /Âíå Reduce Êìç‰ΩúÊòØ‰∏çÁ°ÆÂÆöÊÄßÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Êèê‰æõËôΩÁÑ∂ËæÉÂº±‰ΩÜÊòØ‰æùÁÑ∂ÂêàÁêÜÁöÑÂ§ÑÁêÜÊú∫Âà∂„ÄÇÂΩì‰ΩøÁî®ÈùûÁ°ÆÂÆöÊìç‰ΩúÁöÑÊó∂ÂÄôÔºå ‰∏Ä‰∏™ Reduce ‰ªªÂä° R1 ÁöÑËæìÂá∫Á≠â‰ª∑‰∫é‰∏Ä‰∏™ÈùûÁ°ÆÂÆöÊÄßÁ®ãÂ∫èÈ°∫Â∫èÊâßË°å‰∫ßÁîüÊó∂ÁöÑËæìÂá∫„ÄÇ‰ΩÜÊòØÔºåÂè¶‰∏Ä‰∏™ Reduce ‰ªªÂä° R2 ÁöÑËæìÂá∫‰πüËÆ∏Á¨¶Âêà‰∏Ä‰∏™‰∏çÂêåÁöÑÈùûÁ°ÆÂÆöÈ°∫Â∫èÁ®ãÂ∫èÊâßË°å‰∫ßÁîüÁöÑ R2 ÁöÑËæìÂá∫„ÄÇËÄÉËôë Map ‰ªªÂä° M Âíå Reduce ‰ªªÂä° R1„ÄÅR2 ÁöÑÊÉÖÂÜµ„ÄÇÊàë‰ª¨ËÆæÂÆö e(Ri)ÊòØ Ri Â∑≤ÁªèÊèê‰∫§ÁöÑÊâßË°åËøáÁ®ã(Êúâ‰∏î‰ªÖÊúâ‰∏Ä‰∏™ËøôÊ†∑ÁöÑÊâßË°åËøáÁ®ã)„ÄÇÂΩì e(R1)ËØªÂèñ‰∫ÜÁî± M ‰∏ÄÊ¨°ÊâßË°å‰∫ßÁîüÁöÑËæìÂá∫ÔºåËÄå e(R2)ËØªÂèñ‰∫ÜÁî± M ÁöÑÂè¶‰∏ÄÊ¨°ÊâßË°å‰∫ßÁîüÁöÑ ËæìÂá∫ÔºåÂØºËá¥‰∫ÜËæÉÂº±ÁöÑÂ§±ÊïàÂ§ÑÁêÜ„ÄÇ### Â≠òÂÇ®‰ΩçÁΩÆÂú®Êàë‰ª¨ÁöÑËÆ°ÁÆóËøêË°åÁéØÂ¢É‰∏≠ÔºåÁΩëÁªúÂ∏¶ÂÆΩÊòØ‰∏Ä‰∏™Áõ∏ÂΩìÂåÆ‰πèÁöÑËµÑÊ∫ê„ÄÇÊàë‰ª¨ÈÄöËøáÂ∞ΩÈáèÊääËæìÂÖ•Êï∞ÊçÆ(Áî± GFS ÁÆ°ÁêÜ)Â≠ò ÂÇ®Âú®ÈõÜÁæ§‰∏≠Êú∫Âô®ÁöÑÊú¨Âú∞Á£ÅÁõò‰∏äÊù•ËäÇÁúÅÁΩëÁªúÂ∏¶ÂÆΩ„ÄÇGFS ÊääÊØè‰∏™Êñá‰ª∂Êåâ 64MB ‰∏Ä‰∏™ Block ÂàÜÈöîÔºåÊØè‰∏™ Block ‰øùÂ≠ò Âú®Â§öÂè∞Êú∫Âô®‰∏äÔºåÁéØÂ¢É‰∏≠Â∞±Â≠òÊîæ‰∫ÜÂ§ö‰ªΩÊã∑Ë¥ù(‰∏ÄËà¨ÊòØ 3 ‰∏™Êã∑Ë¥ù)„ÄÇMapReduce ÁöÑ master Âú®Ë∞ÉÂ∫¶ Map ‰ªªÂä°Êó∂‰ºöËÄÉËôë ËæìÂÖ•Êñá‰ª∂ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÔºåÂ∞ΩÈáèÂ∞Ü‰∏Ä‰∏™ Map ‰ªªÂä°Ë∞ÉÂ∫¶Âú®ÂåÖÂê´Áõ∏ÂÖ≥ËæìÂÖ•Êï∞ÊçÆÊã∑Ë¥ùÁöÑÊú∫Âô®‰∏äÊâßË°å;Â¶ÇÊûú‰∏äËø∞Âä™ÂäõÂ§±Ë¥• ‰∫ÜÔºåmaster Â∞ÜÂ∞ùËØïÂú®‰øùÂ≠òÊúâËæìÂÖ•Êï∞ÊçÆÊã∑Ë¥ùÁöÑÊú∫Âô®ÈôÑËøëÁöÑÊú∫Âô®‰∏äÊâßË°å Map ‰ªªÂä°(‰æãÂ¶ÇÔºåÂàÜÈÖçÂà∞‰∏Ä‰∏™ÂíåÂåÖÂê´ËæìÂÖ•Êï∞ ÊçÆÁöÑÊú∫Âô®Âú®‰∏Ä‰∏™ switch ÈáåÁöÑ worker Êú∫Âô®‰∏äÊâßË°å)„ÄÇÂΩìÂú®‰∏Ä‰∏™Ë∂≥Â§üÂ§ßÁöÑ cluster ÈõÜÁæ§‰∏äËøêË°åÂ§ßÂûã MapReduce Êìç‰Ωú ÁöÑÊó∂ÂÄôÔºåÂ§ßÈÉ®ÂàÜÁöÑËæìÂÖ•Êï∞ÊçÆÈÉΩËÉΩ‰ªéÊú¨Âú∞Êú∫Âô®ËØªÂèñÔºåÂõ†Ê≠§Ê∂àËÄóÈùûÂ∏∏Â∞ëÁöÑÁΩëÁªúÂ∏¶ÂÆΩ„ÄÇ### ‰ªªÂä°Á≤íÂ∫¶Â¶ÇÂâçÊâÄËø∞ÔºåÊàë‰ª¨Êää Map ÊãÜÂàÜÊàê‰∫Ü M ‰∏™ÁâáÊÆµ„ÄÅÊää Reduce ÊãÜÂàÜÊàê R ‰∏™ÁâáÊÆµÊâßË°å„ÄÇÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÔºåM Âíå R Â∫îÂΩì ÊØîÈõÜÁæ§‰∏≠ worker ÁöÑÊú∫Âô®Êï∞ÈáèË¶ÅÂ§öÂæóÂ§ö„ÄÇÂú®ÊØèÂè∞ worker Êú∫Âô®ÈÉΩÊâßË°åÂ§ßÈáèÁöÑ‰∏çÂêå‰ªªÂä°ËÉΩÂ§üÊèêÈ´òÈõÜÁæ§ÁöÑÂä®ÊÄÅÁöÑË¥üËΩΩ ÂùáË°°ËÉΩÂäõÔºåÂπ∂‰∏îËÉΩÂ§üÂä†Âø´ÊïÖÈöúÊÅ¢Â§çÁöÑÈÄüÂ∫¶:Â§±ÊïàÊú∫Âô®‰∏äÊâßË°åÁöÑÂ§ßÈáè Map ‰ªªÂä°ÈÉΩÂèØ‰ª•ÂàÜÂ∏ÉÂà∞ÊâÄÊúâÂÖ∂‰ªñÁöÑ worker Êú∫Âô®‰∏äÂéªÊâßË°å„ÄÇ‰ΩÜÊòØÂÆûÈôÖ‰∏äÔºåÂú®Êàë‰ª¨ÁöÑÂÖ∑‰ΩìÂÆûÁé∞‰∏≠ÂØπ M Âíå R ÁöÑÂèñÂÄºÈÉΩÊúâ‰∏ÄÂÆöÁöÑÂÆ¢ËßÇÈôêÂà∂ÔºåÂõ†‰∏∫ master ÂøÖÈ°ªÊâßË°å O(M+R) Ê¨°Ë∞ÉÂ∫¶ÔºåÂπ∂‰∏îÂú®ÂÜÖÂ≠ò‰∏≠‰øùÂ≠ò O(M*R)‰∏™Áä∂ÊÄÅ(ÂØπÂΩ±ÂìçÂÜÖÂ≠ò‰ΩøÁî®ÁöÑÂõ†Á¥†ËøòÊòØÊØîËæÉÂ∞èÁöÑ:O(M*R)ÂùóÁä∂ÊÄÅÔºåÂ§ßÊ¶ÇÊØè ÂØπ Map ‰ªªÂä°/Reduce ‰ªªÂä° 1 ‰∏™Â≠óËäÇÂ∞±ÂèØ‰ª•‰∫Ü)„ÄÇÊõ¥Ëøõ‰∏ÄÊ≠•ÔºåR ÂÄºÈÄöÂ∏∏ÊòØÁî±Áî®Êà∑ÊåáÂÆöÁöÑÔºåÂõ†‰∏∫ÊØè‰∏™ Reduce ‰ªªÂä°ÊúÄÁªàÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™Áã¨Á´ãÁöÑËæìÂá∫Êñá‰ª∂„ÄÇÂÆûÈôÖ‰Ωø Áî®Êó∂Êàë‰ª¨‰πüÂÄæÂêë‰∫éÈÄâÊã©ÂêàÈÄÇÁöÑ M ÂÄºÔºå‰ª•‰ΩøÂæóÊØè‰∏Ä‰∏™Áã¨Á´ã‰ªªÂä°ÈÉΩÊòØÂ§ÑÁêÜÂ§ßÁ∫¶ 16M Âà∞ 64M ÁöÑËæìÂÖ•Êï∞ÊçÆ(ËøôÊ†∑Ôºå ‰∏äÈù¢ÊèèÂÜôÁöÑËæìÂÖ•Êï∞ÊçÆÊú¨Âú∞Â≠òÂÇ®‰ºòÂåñÁ≠ñÁï•ÊâçÊúÄÊúâÊïà)ÔºåÂè¶Â§ñÔºåÊàë‰ª¨Êää R ÂÄºËÆæÁΩÆ‰∏∫Êàë‰ª¨ÊÉ≥‰ΩøÁî®ÁöÑ worker Êú∫Âô®Êï∞Èáè ÁöÑÂ∞èÁöÑÂÄçÊï∞„ÄÇÊàë‰ª¨ÈÄöÂ∏∏‰ºöÁî®ËøôÊ†∑ÁöÑÊØî‰æãÊù•ÊâßË°å MapReduce:M=200000ÔºåR=5000Ôºå‰ΩøÁî® 2000 Âè∞ worker Êú∫Âô®„ÄÇ### Â§áÁî®‰ªªÂä°ÂΩ±Âìç‰∏Ä‰∏™ MapReduce ÁöÑÊÄªÊâßË°åÊó∂Èó¥ÊúÄÈÄöÂ∏∏ÁöÑÂõ†Á¥†ÊòØ‚ÄúËêΩ‰ºçËÄÖ‚Äù:Âú®ËøêÁÆóËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúÊúâ‰∏ÄÂè∞Êú∫Âô®Ëä±‰∫ÜÂæà ÈïøÁöÑÊó∂Èó¥ÊâçÂÆåÊàêÊúÄÂêéÂá†‰∏™ Map Êàñ Reduce ‰ªªÂä°ÔºåÂØºËá¥ MapReduce Êìç‰ΩúÊÄªÁöÑÊâßË°åÊó∂Èó¥Ë∂ÖËøáÈ¢ÑÊúü„ÄÇÂá∫Áé∞‚ÄúËêΩ‰ºçËÄÖ‚Äù ÁöÑÂéüÂõ†ÈùûÂ∏∏Â§ö„ÄÇÊØîÂ¶Ç:Â¶ÇÊûú‰∏Ä‰∏™Êú∫Âô®ÁöÑÁ°¨ÁõòÂá∫‰∫ÜÈóÆÈ¢òÔºåÂú®ËØªÂèñÁöÑÊó∂ÂÄôË¶ÅÁªèÂ∏∏ÁöÑËøõË°åËØªÂèñÁ∫†ÈîôÊìç‰ΩúÔºåÂØºËá¥ËØªÂèñÊï∞ÊçÆÁöÑÈÄüÂ∫¶‰ªé 30M/s Èôç‰ΩéÂà∞ 1M/s„ÄÇÂ¶ÇÊûú cluster ÁöÑË∞ÉÂ∫¶Á≥ªÁªüÂú®ËøôÂè∞Êú∫Âô®‰∏äÂèàË∞ÉÂ∫¶‰∫ÜÂÖ∂‰ªñÁöÑ‰ªªÂä°ÔºåÁî±‰∫é CPU„ÄÅÂÜÖ Â≠ò„ÄÅÊú¨Âú∞Á°¨ÁõòÂíåÁΩëÁªúÂ∏¶ÂÆΩÁ≠âÁ´û‰∫âÂõ†Á¥†ÁöÑÂ≠òÂú®ÔºåÂØºËá¥ÊâßË°å MapReduce ‰ª£Á†ÅÁöÑÊâßË°åÊïàÁéáÊõ¥Âä†ÁºìÊÖ¢„ÄÇÊàë‰ª¨ÊúÄËøëÈÅáÂà∞ ÁöÑ‰∏Ä‰∏™ÈóÆÈ¢òÊòØÁî±‰∫éÊú∫Âô®ÁöÑÂàùÂßãÂåñ‰ª£Á†ÅÊúâ bugÔºåÂØºËá¥ÂÖ≥Èó≠‰∫ÜÁöÑÂ§ÑÁêÜÂô®ÁöÑÁºìÂ≠ò:Âú®Ëøô‰∫õÊú∫Âô®‰∏äÊâßË°å‰ªªÂä°ÁöÑÊÄßËÉΩÂíåÊ≠£Â∏∏ÊÉÖÂÜµÁõ∏Â∑Æ‰∏äÁôæÂÄç„ÄÇÊàë‰ª¨Êúâ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÊú∫Âà∂Êù•ÂáèÂ∞ë‚ÄúËêΩ‰ºçËÄÖ‚ÄùÂá∫Áé∞ÁöÑÊÉÖÂÜµ„ÄÇÂΩì‰∏Ä‰∏™ MapReduce Êìç‰ΩúÊé•ËøëÂÆåÊàêÁöÑÊó∂ÂÄôÔºåmasterË∞ÉÂ∫¶Â§áÁî®(backup)‰ªªÂä°ËøõÁ®ãÊù•ÊâßË°åÂâ©‰∏ãÁöÑ„ÄÅÂ§Ñ‰∫éÂ§ÑÁêÜ‰∏≠Áä∂ÊÄÅ(in-progress)ÁöÑ‰ªªÂä°„ÄÇÊó†ËÆ∫ÊòØÊúÄÂàùÁöÑÊâßË°åËøõÁ®ã„ÄÅ ËøòÊòØÂ§áÁî®(backup)‰ªªÂä°ËøõÁ®ãÂÆåÊàê‰∫Ü‰ªªÂä°ÔºåÊàë‰ª¨ÈÉΩÊääËøô‰∏™‰ªªÂä°Ê†áËÆ∞Êàê‰∏∫Â∑≤ÁªèÂÆåÊàê„ÄÇÊàë‰ª¨Ë∞É‰ºò‰∫ÜËøô‰∏™Êú∫Âà∂ÔºåÈÄö Â∏∏Âè™‰ºöÂç†Áî®ÊØîÊ≠£Â∏∏Êìç‰ΩúÂ§öÂá†‰∏™ÁôæÂàÜÁÇπÁöÑËÆ°ÁÆóËµÑÊ∫ê„ÄÇÊàë‰ª¨ÂèëÁé∞ÈááÁî®ËøôÊ†∑ÁöÑÊú∫Âà∂ÂØπ‰∫éÂáèÂ∞ëË∂ÖÂ§ß MapReduce Êìç‰ΩúÁöÑ ÊÄªÂ§ÑÁêÜÊó∂Èó¥ÊïàÊûúÊòæËëó„ÄÇ‰æãÂ¶ÇÔºåÂú® 5.3 ËäÇÊèèËø∞ÁöÑÊéíÂ∫è‰ªªÂä°ÔºåÂú®ÂÖ≥Èó≠ÊéâÂ§áÁî®‰ªªÂä°ÁöÑÊÉÖÂÜµ‰∏ãË¶ÅÂ§öËä± 44%ÁöÑÊó∂Èó¥ÂÆåÊàê ÊéíÂ∫è‰ªªÂä°„ÄÇ&#123;% note info %&#125;</span><br><span class="line">## ÊäÄÂ∑ß</span><br><span class="line"> &#123;% endnote %&#125;ËôΩÁÑ∂ÁÆÄÂçïÁöÑ Map Âíå Reduce ÂáΩÊï∞Êèê‰æõÁöÑÂü∫Êú¨ÂäüËÉΩÂ∑≤ÁªèËÉΩÂ§üÊª°Ë∂≥Â§ßÈÉ®ÂàÜÁöÑËÆ°ÁÆóÈúÄË¶ÅÔºåÊàë‰ª¨ËøòÊòØÂèëÊéòÂá∫‰∫Ü‰∏Ä‰∫õÊúâ‰ª∑ÂÄºÁöÑÊâ©Â±ïÂäüËÉΩ„ÄÇÊú¨ËäÇÂ∞ÜÊèèËø∞Ëøô‰∫õÊâ©Â±ïÂäüËÉΩ„ÄÇ### ÂàÜÂå∫ÂáΩÊï∞MapReduce ÁöÑ‰ΩøÁî®ËÄÖÈÄöÂ∏∏‰ºöÊåáÂÆö Reduce ‰ªªÂä°Âíå Reduce ‰ªªÂä°ËæìÂá∫Êñá‰ª∂ÁöÑÊï∞Èáè(R)„ÄÇÊàë‰ª¨Âú®‰∏≠Èó¥ key ‰∏ä‰Ωø Áî®ÂàÜÂå∫ÂáΩÊï∞Êù•ÂØπÊï∞ÊçÆËøõË°åÂàÜÂå∫Ôºå‰πãÂêéÂÜçËæìÂÖ•Âà∞ÂêéÁª≠‰ªªÂä°ÊâßË°åËøõÁ®ã„ÄÇ‰∏Ä‰∏™Áº∫ÁúÅÁöÑÂàÜÂå∫ÂáΩÊï∞ÊòØ‰ΩøÁî® hash ÊñπÊ≥ï(ÊØîÂ¶ÇÔºå hash(key) mod R)ËøõË°åÂàÜÂå∫„ÄÇhash ÊñπÊ≥ïËÉΩ‰∫ßÁîüÈùûÂ∏∏Âπ≥Ë°°ÁöÑÂàÜÂå∫„ÄÇÁÑ∂ËÄåÔºåÊúâÁöÑÊó∂ÂÄôÔºåÂÖ∂ÂÆÉÁöÑ‰∏Ä‰∫õÂàÜÂå∫ÂáΩÊï∞ÂØπ key ÂÄºËøõË°åÁöÑÂàÜÂå∫Â∞ÜÈùûÂ∏∏ÊúâÁî®„ÄÇÊØîÂ¶ÇÔºåËæìÂá∫ÁöÑ key ÂÄºÊòØ URLsÔºåÊàë‰ª¨Â∏åÊúõÊØè‰∏™‰∏ªÊú∫ÁöÑÊâÄÊúâÊù°ÁõÆ‰øùÊåÅÂú®Âêå‰∏Ä‰∏™ËæìÂá∫Êñá ‰ª∂‰∏≠„ÄÇ‰∏∫‰∫ÜÊîØÊåÅÁ±ª‰ººÁöÑÊÉÖÂÜµÔºåMapReduce Â∫ìÁöÑÁî®Êà∑ÈúÄË¶ÅÊèê‰æõ‰∏ìÈó®ÁöÑÂàÜÂå∫ÂáΩÊï∞„ÄÇ‰æãÂ¶ÇÔºå‰ΩøÁî®‚Äúhash(Hostname(urlkey)) mod R‚Äù‰Ωú‰∏∫ÂàÜÂå∫ÂáΩÊï∞Â∞±ÂèØ‰ª•ÊääÊâÄÊúâÊù•Ëá™Âêå‰∏Ä‰∏™‰∏ªÊú∫ÁöÑ URLs ‰øùÂ≠òÂú®Âêå‰∏Ä‰∏™ËæìÂá∫Êñá‰ª∂‰∏≠„ÄÇ### È°∫Â∫è‰øùËØÅÊàë‰ª¨Á°Æ‰øùÂú®ÁªôÂÆöÁöÑÂàÜÂå∫‰∏≠Ôºå‰∏≠Èó¥ key/value pair Êï∞ÊçÆÁöÑÂ§ÑÁêÜÈ°∫Â∫èÊòØÊåâÁÖß key ÂÄºÂ¢ûÈáèÈ°∫Â∫èÂ§ÑÁêÜÁöÑ„ÄÇËøôÊ†∑ÁöÑÈ°∫ Â∫è‰øùËØÅÂØπÊØè‰∏™ÂàÜÊàêÁîüÊàê‰∏Ä‰∏™ÊúâÂ∫èÁöÑËæìÂá∫Êñá‰ª∂ÔºåËøôÂØπ‰∫éÈúÄË¶ÅÂØπËæìÂá∫Êñá‰ª∂Êåâ key ÂÄºÈöèÊú∫Â≠òÂèñÁöÑÂ∫îÁî®ÈùûÂ∏∏ÊúâÊÑè‰πâÔºå ÂØπÂú®ÊéíÂ∫èËæìÂá∫ÁöÑÊï∞ÊçÆÈõÜ‰πüÂæàÊúâÂ∏ÆÂä©„ÄÇ### Combiner ÂáΩÊï∞Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåMap ÂáΩÊï∞‰∫ßÁîüÁöÑ‰∏≠Èó¥ key ÂÄºÁöÑÈáçÂ§çÊï∞ÊçÆ‰ºöÂç†ÂæàÂ§ßÁöÑÊØîÈáçÔºåÂπ∂‰∏îÔºåÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Reduce ÂáΩÊï∞Êª°Ë∂≥ÁªìÂêàÂæãÂíå‰∫§Êç¢Âæã„ÄÇÂú® 2.1 ËäÇÁöÑËØçÊï∞ÁªüËÆ°Á®ãÂ∫èÊòØ‰∏™ÂæàÂ•ΩÁöÑ‰æãÂ≠ê„ÄÇÁî±‰∫éËØçÈ¢ëÁéáÂÄæÂêë‰∫é‰∏Ä‰∏™ zipf ÂàÜÂ∏É(ÈΩêÂ§´ÂàÜÂ∏É)ÔºåÊØè‰∏™ Map ‰ªªÂä°Â∞Ü‰∫ßÁîüÊàêÂçÉ‰∏ä‰∏á‰∏™ËøôÊ†∑ÁöÑËÆ∞ÂΩï&lt;the,1&gt;„ÄÇÊâÄÊúâÁöÑËøô‰∫õËÆ∞ÂΩïÂ∞ÜÈÄöËøáÁΩëÁªúË¢´ÂèëÈÄÅÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑ Reduce ‰ªªÂä°ÔºåÁÑ∂ÂêéÁî±Ëøô‰∏™ Reduce ‰ªªÂä°ÊääÊâÄÊúâËøô‰∫õËÆ∞ÂΩïÁ¥ØÂä†Ëµ∑Êù•‰∫ßÁîü‰∏Ä‰∏™Êï∞Â≠ó„ÄÇÊàë‰ª¨ÂÖÅËÆ∏Áî®Êà∑ÊåáÂÆö‰∏Ä‰∏™ÂèØÈÄâ ÁöÑ combiner ÂáΩÊï∞Ôºåcombiner ÂáΩÊï∞È¶ñÂÖàÂú®Êú¨Âú∞Â∞ÜËøô‰∫õËÆ∞ÂΩïËøõË°å‰∏ÄÊ¨°ÂêàÂπ∂ÔºåÁÑ∂ÂêéÂ∞ÜÂêàÂπ∂ÁöÑÁªìÊûúÂÜçÈÄöËøáÁΩëÁªúÂèëÈÄÅÂá∫Âéª„ÄÇCombiner ÂáΩÊï∞Âú®ÊØèÂè∞ÊâßË°å Map ‰ªªÂä°ÁöÑÊú∫Âô®‰∏äÈÉΩ‰ºöË¢´ÊâßË°å‰∏ÄÊ¨°„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåCombiner Âíå Reduce ÂáΩÊï∞ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇCombiner ÂáΩÊï∞Âíå Reduce ÂáΩÊï∞‰πãÈó¥ÂîØ‰∏ÄÁöÑÂå∫Âà´ÊòØ MapReduce Â∫ìÊÄéÊ†∑ÊéßÂà∂ÂáΩÊï∞ÁöÑËæìÂá∫„ÄÇReduce ÂáΩÊï∞ÁöÑ ËæìÂá∫Ë¢´‰øùÂ≠òÂú®ÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂ÈáåÔºåËÄå Combiner ÂáΩÊï∞ÁöÑËæìÂá∫Ë¢´ÂÜôÂà∞‰∏≠Èó¥Êñá‰ª∂ÈáåÔºåÁÑ∂ÂêéË¢´ÂèëÈÄÅÁªô Reduce ‰ªªÂä°„ÄÇÈÉ®ÂàÜÁöÑÂêàÂπ∂‰∏≠Èó¥ÁªìÊûúÂèØ‰ª•ÊòæËëóÁöÑÊèêÈ´ò‰∏Ä‰∫õ MapReduce Êìç‰ΩúÁöÑÈÄüÂ∫¶„ÄÇÈôÑÂΩï A ÂåÖÂê´‰∏Ä‰∏™‰ΩøÁî® combiner ÂáΩÊï∞ ÁöÑ‰æãÂ≠ê„ÄÇ### ËæìÂÖ•ÂíåËæìÂá∫ÁöÑÁ±ªÂûãMapReduce Â∫ìÊîØÊåÅÂá†Áßç‰∏çÂêåÁöÑÊ†ºÂºèÁöÑËæìÂÖ•Êï∞ÊçÆ„ÄÇÊØîÂ¶ÇÔºåÊñáÊú¨Ê®°ÂºèÁöÑËæìÂÖ•Êï∞ÊçÆÁöÑÊØè‰∏ÄË°åË¢´ËßÜ‰∏∫ÊòØ‰∏Ä‰∏™ key/value pair„ÄÇkey ÊòØÊñá‰ª∂ÁöÑÂÅèÁßªÈáèÔºåvalue ÊòØÈÇ£‰∏ÄË°åÁöÑÂÜÖÂÆπ„ÄÇÂè¶Â§ñ‰∏ÄÁßçÂ∏∏ËßÅÁöÑÊ†ºÂºèÊòØ‰ª• key ËøõË°åÊéíÂ∫èÊù•Â≠òÂÇ® ÁöÑ key/value pair ÁöÑÂ∫èÂàó„ÄÇÊØèÁßçËæìÂÖ•Á±ªÂûãÁöÑÂÆûÁé∞ÈÉΩÂøÖÈ°ªËÉΩÂ§üÊääËæìÂÖ•Êï∞ÊçÆÂàÜÂâ≤ÊàêÊï∞ÊçÆÁâáÊÆµÔºåËØ•Êï∞ÊçÆÁâáÊÆµËÉΩÂ§üÁî±Âçï Áã¨ÁöÑ Map ‰ªªÂä°Êù•ËøõË°åÂêéÁª≠Â§ÑÁêÜ(‰æãÂ¶ÇÔºåÊñáÊú¨Ê®°ÂºèÁöÑËåÉÂõ¥ÂàÜÂâ≤ÂøÖÈ°ªÁ°Æ‰øù‰ªÖ‰ªÖÂú®ÊØèË°åÁöÑËæπÁïåËøõË°åËåÉÂõ¥ÂàÜÂâ≤)„ÄÇËôΩÁÑ∂ Â§ßÂ§öÊï∞ MapReduce ÁöÑ‰ΩøÁî®ËÄÖ‰ªÖ‰ªÖ‰ΩøÁî®ÂæàÂ∞ëÁöÑÈ¢ÑÂÆö‰πâËæìÂÖ•Á±ªÂûãÂ∞±Êª°Ë∂≥Ë¶ÅÊ±Ç‰∫ÜÔºå‰ΩÜÊòØ‰ΩøÁî®ËÄÖ‰æùÁÑ∂ÂèØ‰ª•ÈÄöËøáÊèê‰æõ‰∏Ä ‰∏™ÁÆÄÂçïÁöÑ Reader Êé•Âè£ÂÆûÁé∞Â∞±ËÉΩÂ§üÊîØÊåÅ‰∏Ä‰∏™Êñ∞ÁöÑËæìÂÖ•Á±ªÂûã„ÄÇReader Âπ∂Èùû‰∏ÄÂÆöË¶Å‰ªéÊñá‰ª∂‰∏≠ËØªÂèñÊï∞ÊçÆÔºåÊØîÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÂÆûÁé∞‰∏Ä‰∏™‰ªéÊï∞ÊçÆÂ∫ìÈáåËØªËÆ∞ÂΩïÁöÑ ReaderÔºå ÊàñËÄÖ‰ªéÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑËØªÂèñÊï∞ÊçÆÁöÑ Reader„ÄÇÁ±ª‰ººÁöÑÔºåÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∫õÈ¢ÑÂÆö‰πâÁöÑËæìÂá∫Êï∞ÊçÆÁöÑÁ±ªÂûãÔºåÈÄöËøáËøô‰∫õÈ¢ÑÂÆö‰πâÁ±ªÂûãËÉΩÂ§ü‰∫ßÁîü‰∏çÂêåÊ†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇÁî®Êà∑ÈááÁî®Á±ª‰ººÊ∑ªÂä†Êñ∞ÁöÑËæìÂÖ•Êï∞ÊçÆÁ±ªÂûãÁöÑÊñπÂºèÂ¢ûÂä†Êñ∞ÁöÑËæìÂá∫Á±ªÂûã„ÄÇ### ÂâØ‰ΩúÁî®Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåMapReduce ÁöÑ‰ΩøÁî®ËÄÖÂèëÁé∞ÔºåÂ¶ÇÊûúÂú® Map Âíå/Êàñ Reduce Êìç‰ΩúËøáÁ®ã‰∏≠Â¢ûÂä†ËæÖÂä©ÁöÑËæìÂá∫Êñá‰ª∂‰ºö ÊØîËæÉÁúÅ‰∫ã„ÄÇÊàë‰ª¨‰æùÈù†Á®ãÂ∫è writer ÊääËøôÁßç‚ÄúÂâØ‰ΩúÁî®‚ÄùÂèòÊàêÂéüÂ≠êÁöÑÂíåÂπÇÁ≠âÁöÑ3„ÄÇÈÄöÂ∏∏Â∫îÁî®Á®ãÂ∫èÈ¶ñÂÖàÊääËæìÂá∫ÁªìÊûúÂÜôÂà∞ ‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂‰∏≠ÔºåÂú®ËæìÂá∫ÂÖ®ÈÉ®Êï∞ÊçÆ‰πãÂêéÔºåÂú®‰ΩøÁî®Á≥ªÁªüÁ∫ßÁöÑÂéüÂ≠êÊìç‰Ωú rename ÈáçÊñ∞ÂëΩÂêçËøô‰∏™‰∏¥Êó∂Êñá‰ª∂„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™‰ªªÂä°‰∫ßÁîü‰∫ÜÂ§ö‰∏™ËæìÂá∫Êñá‰ª∂ÔºåÊàë‰ª¨Ê≤°ÊúâÊèê‰æõÁ±ª‰ºº‰∏§Èò∂ÊÆµÊèê‰∫§ÁöÑÂéüÂ≠êÊìç‰ΩúÊîØÊåÅËøôÁßçÊÉÖÂÜµ„ÄÇÂõ†Ê≠§ÔºåÂØπ‰∫é‰ºö‰∫ßÁîüÂ§ö‰∏™ËæìÂá∫Êñá‰ª∂„ÄÅÂπ∂‰∏îÂØπ‰∫éË∑®Êñá‰ª∂Êúâ‰∏ÄËá¥ÊÄßË¶ÅÊ±ÇÁöÑ‰ªªÂä°ÔºåÈÉΩÂøÖÈ°ªÊòØÁ°ÆÂÆöÊÄßÁöÑ‰ªªÂä°„ÄÇ‰ΩÜÊòØÂú®ÂÆûÈôÖÂ∫îÁî®ËøáÁ®ã‰∏≠ÔºåËøô‰∏™ÈôêÂà∂ËøòÊ≤°ÊúâÁªôÊàë‰ª¨Â∏¶Êù•ËøáÈ∫ªÁÉ¶„ÄÇ</span><br><span class="line">### Ë∑≥ËøáÊçüÂùèÁöÑËÆ∞ÂΩïÊúâÊó∂ÂÄôÔºåÁî®Êà∑Á®ãÂ∫è‰∏≠ÁöÑ bug ÂØºËá¥ Map ÊàñËÄÖ Reduce ÂáΩÊï∞Âú®Â§ÑÁêÜÊüê‰∫õËÆ∞ÂΩïÁöÑÊó∂ÂÄô crash ÊéâÔºåMapReduce Êìç‰Ωú Êó†Ê≥ïÈ°∫Âà©ÂÆåÊàê„ÄÇÊÉØÂ∏∏ÁöÑÂÅöÊ≥ïÊòØ‰øÆÂ§ç bug ÂêéÂÜçÊ¨°ÊâßË°å MapReduce Êìç‰ΩúÔºå‰ΩÜÊòØÔºåÊúâÊó∂ÂÄôÊâæÂá∫Ëøô‰∫õ bug Âπ∂‰øÆÂ§çÂÆÉ‰ª¨ ‰∏çÊòØ‰∏Ä‰ª∂ÂÆπÊòìÁöÑ‰∫ãÊÉÖ;Ëøô‰∫õ bug ‰πüËÆ∏ÊòØÂú®Á¨¨‰∏âÊñπÂ∫ìÈáåËæπÔºåËÄåÊàë‰ª¨ÊâãÂ§¥Ê≤°ÊúâËøô‰∫õÂ∫ìÁöÑÊ∫ê‰ª£Á†Å„ÄÇËÄå‰∏îÂú®ÂæàÂ§öÊó∂ÂÄôÔºå ÂøΩÁï•‰∏Ä‰∫õÊúâÈóÆÈ¢òÁöÑËÆ∞ÂΩï‰πüÊòØÂèØ‰ª•Êé•ÂèóÁöÑÔºåÊØîÂ¶ÇÂú®‰∏Ä‰∏™Â∑®Â§ßÁöÑÊï∞ÊçÆÈõÜ‰∏äËøõË°åÁªüËÆ°ÂàÜÊûêÁöÑÊó∂ÂÄô„ÄÇÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏ÄÁßç ÊâßË°åÊ®°ÂºèÔºåÂú®ËøôÁßçÊ®°Âºè‰∏ãÔºå‰∏∫‰∫Ü‰øùËØÅ‰øùËØÅÊï¥‰∏™Â§ÑÁêÜËÉΩÁªßÁª≠ËøõË°åÔºåMapReduce ‰ºöÊ£ÄÊµãÂì™‰∫õËÆ∞ÂΩïÂØºËá¥Á°ÆÂÆöÊÄßÁöÑ crashÔºå Âπ∂‰∏îË∑≥ËøáËøô‰∫õËÆ∞ÂΩï‰∏çÂ§ÑÁêÜ„ÄÇÊØè‰∏™ worker ËøõÁ®ãÈÉΩËÆæÁΩÆ‰∫Ü‰ø°Âè∑Â§ÑÁêÜÂáΩÊï∞ÊçïËé∑ÂÜÖÂ≠òÊÆµÂºÇÂ∏∏(segmentation violation)ÂíåÊÄªÁ∫øÈîôËØØ(bus error)„ÄÇ Âú®ÊâßË°å Map ÊàñËÄÖ Reduce Êìç‰Ωú‰πãÂâçÔºåMapReduce Â∫ìÈÄöËøáÂÖ®Â±ÄÂèòÈáè‰øùÂ≠òËÆ∞ÂΩïÂ∫èÂè∑„ÄÇÂ¶ÇÊûúÁî®Êà∑Á®ãÂ∫èËß¶Âèë‰∫Ü‰∏Ä‰∏™Á≥ª Áªü‰ø°Âè∑ÔºåÊ∂àÊÅØÂ§ÑÁêÜÂáΩÊï∞Â∞ÜÁî®‚ÄúÊúÄÂêé‰∏ÄÂè£Ê∞î‚ÄùÈÄöËøá UDP ÂåÖÂêë master ÂèëÈÄÅÂ§ÑÁêÜÁöÑÊúÄÂêé‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÂ∫èÂè∑„ÄÇÂΩì master ÁúãÂà∞Âú®Â§ÑÁêÜÊüêÊù°ÁâπÂÆöËÆ∞ÂΩï‰∏çÊ≠¢Â§±Ë¥•‰∏ÄÊ¨°Êó∂Ôºåmaster Â∞±Ê†áÂøóÁùÄÊù°ËÆ∞ÂΩïÈúÄË¶ÅË¢´Ë∑≥ËøáÔºåÂπ∂‰∏îÂú®‰∏ãÊ¨°ÈáçÊñ∞ÊâßË°åÁõ∏ÂÖ≥ÁöÑ Map ÊàñËÄÖ Reduce ‰ªªÂä°ÁöÑÊó∂ÂÄôË∑≥ËøáËøôÊù°ËÆ∞ÂΩï„ÄÇ### Êú¨Âú∞ÊâßË°åË∞ÉËØï Map Âíå Reduce ÂáΩÊï∞ÁöÑ bug ÊòØÈùûÂ∏∏Âõ∞ÈöæÁöÑÔºåÂõ†‰∏∫ÂÆûÈôÖÊâßË°åÊìç‰ΩúÊó∂‰∏ç‰ΩÜÊòØÂàÜÂ∏ÉÂú®Á≥ªÁªü‰∏≠ÊâßË°åÁöÑÔºåËÄå‰∏î ÈÄöÂ∏∏ÊòØÂú®Â•ΩÂá†ÂçÉÂè∞ËÆ°ÁÆóÊú∫‰∏äÊâßË°åÔºåÂÖ∑‰ΩìÁöÑÊâßË°å‰ΩçÁΩÆÊòØÁî± master ËøõË°åÂä®ÊÄÅË∞ÉÂ∫¶ÁöÑÔºåËøôÂèàÂ§ßÂ§ßÂ¢ûÂä†‰∫ÜË∞ÉËØïÁöÑÈöæÂ∫¶„ÄÇ ‰∏∫‰∫ÜÁÆÄÂåñË∞ÉËØï„ÄÅprofile ÂíåÂ∞èËßÑÊ®°ÊµãËØïÔºåÊàë‰ª¨ÂºÄÂèë‰∫Ü‰∏ÄÂ•ó MapReduce Â∫ìÁöÑÊú¨Âú∞ÂÆûÁé∞ÁâàÊú¨ÔºåÈÄöËøá‰ΩøÁî®Êú¨Âú∞ÁâàÊú¨ÁöÑ MapReduce Â∫ìÔºåMapReduce Êìç‰ΩúÂú®Êú¨Âú∞ËÆ°ÁÆóÊú∫‰∏äÈ°∫Â∫èÁöÑÊâßË°å„ÄÇÁî®Êà∑ÂèØ‰ª•ÊéßÂà∂ MapReduce Êìç‰ΩúÁöÑÊâßË°åÔºåÂèØ‰ª•Êää Êìç‰ΩúÈôêÂà∂Âà∞ÁâπÂÆöÁöÑ Map ‰ªªÂä°‰∏ä„ÄÇÁî®Êà∑ÈÄöËøáËÆæÂÆöÁâπÂà´ÁöÑÊ†áÂøóÊù•Âú®Êú¨Âú∞ÊâßË°å‰ªñ‰ª¨ÁöÑÁ®ãÂ∫èÔºå‰πãÂêéÂ∞±ÂèØ‰ª•ÂæàÂÆπÊòìÁöÑ‰Ωø Áî®Êú¨Âú∞Ë∞ÉËØïÂíåÊµãËØïÂ∑•ÂÖ∑(ÊØîÂ¶Ç gdb)„ÄÇ### Áä∂ÊÄÅ‰ø°ÊÅØmaster ‰ΩøÁî®ÂµåÂÖ•ÂºèÁöÑ HTTP ÊúçÂä°Âô®(Â¶Ç Jetty)ÊòæÁ§∫‰∏ÄÁªÑÁä∂ÊÄÅ‰ø°ÊÅØÈ°µÈù¢ÔºåÁî®Êà∑ÂèØ‰ª•ÁõëÊéßÂêÑÁßçÊâßË°åÁä∂ÊÄÅ„ÄÇÁä∂ ÊÄÅ‰ø°ÊÅØÈ°µÈù¢ÊòæÁ§∫‰∫ÜÂåÖÊã¨ËÆ°ÁÆóÊâßË°åÁöÑËøõÂ∫¶ÔºåÊØîÂ¶ÇÂ∑≤ÁªèÂÆåÊàê‰∫ÜÂ§öÂ∞ë‰ªªÂä°„ÄÅÊúâÂ§öÂ∞ë‰ªªÂä°Ê≠£Âú®Â§ÑÁêÜ„ÄÅËæìÂÖ•ÁöÑÂ≠óËäÇÊï∞„ÄÅ ‰∏≠Èó¥Êï∞ÊçÆÁöÑÂ≠óËäÇÊï∞„ÄÅËæìÂá∫ÁöÑÂ≠óËäÇÊï∞„ÄÅÂ§ÑÁêÜÁôæÂàÜÊØîÁ≠âÁ≠â„ÄÇÈ°µÈù¢ËøòÂåÖÂê´‰∫ÜÊåáÂêëÊØè‰∏™‰ªªÂä°ÁöÑ stderr Âíå stdout Êñá‰ª∂ÁöÑÈìæ Êé•„ÄÇÁî®Êà∑Ê†πÊçÆËøô‰∫õÊï∞ÊçÆÈ¢ÑÊµãËÆ°ÁÆóÈúÄË¶ÅÊâßË°åÂ§ßÁ∫¶Â§öÈïøÊó∂Èó¥„ÄÅÊòØÂê¶ÈúÄË¶ÅÂ¢ûÂä†È¢ùÂ§ñÁöÑËÆ°ÁÆóËµÑÊ∫ê„ÄÇËøô‰∫õÈ°µÈù¢‰πüÂèØ‰ª•Áî® Êù•ÂàÜÊûê‰ªÄ‰πàÊó∂ÂÄôËÆ°ÁÆóÊâßË°åÁöÑÊØîÈ¢ÑÊúüÁöÑË¶ÅÊÖ¢„ÄÇÂè¶Â§ñÔºåÂ§Ñ‰∫éÊúÄÈ°∂Â±ÇÁöÑÁä∂ÊÄÅÈ°µÈù¢ÊòæÁ§∫‰∫ÜÂì™‰∫õ worker Â§±Êïà‰∫ÜÔºå‰ª•Âèä‰ªñ‰ª¨Â§±ÊïàÁöÑÊó∂ÂÄôÊ≠£Âú®ËøêË°åÁöÑ Map Âíå Reduce ‰ªªÂä°„ÄÇËøô‰∫õ‰ø°ÊÅØÂØπ‰∫éË∞ÉËØïÁî®Êà∑‰ª£Á†Å‰∏≠ÁöÑ bug ÂæàÊúâÂ∏ÆÂä©„ÄÇ</span><br><span class="line">### ËÆ°Êï∞Âô®MapReduce Â∫ì‰ΩøÁî®ËÆ°Êï∞Âô®ÁªüËÆ°‰∏çÂêå‰∫ã‰ª∂ÂèëÁîüÊ¨°Êï∞„ÄÇÊØîÂ¶ÇÔºåÁî®Êà∑ÂèØËÉΩÊÉ≥ÁªüËÆ°Â∑≤ÁªèÂ§ÑÁêÜ‰∫ÜÂ§öÂ∞ë‰∏™ÂçïËØç„ÄÅÂ∑≤Áªè Á¥¢ÂºïÁöÑÂ§öÂ∞ëÁØá German ÊñáÊ°£Á≠âÁ≠â„ÄÇ‰∏∫‰∫Ü‰ΩøÁî®Ëøô‰∏™ÁâπÊÄßÔºåÁî®Êà∑Âú®Á®ãÂ∫è‰∏≠ÂàõÂª∫‰∏Ä‰∏™ÂëΩÂêçÁöÑËÆ°Êï∞Âô®ÂØπË±°ÔºåÂú® Map Âíå Reduce ÂáΩÊï∞‰∏≠Áõ∏Â∫îÁöÑÂ¢ûÂä†ËÆ° Êï∞Âô®ÁöÑÂÄº„ÄÇ‰æãÂ¶Ç:</span><br></pre></td></tr></table></figure></p>
<p>Counter* uppercase;<br>uppercase = GetCounter(‚Äúuppercase‚Äù);<br>map(String name, String contents):<br>    for each word w in contents:<br>        if (IsCapitalized(w)):<br>            uppercase-&gt;Increment();<br>            EmitIntermediate(w, ‚Äú1‚Ä≤‚Ä≤);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">Ëøô‰∫õËÆ°Êï∞Âô®ÁöÑÂÄºÂë®ÊúüÊÄßÁöÑ‰ªéÂêÑ‰∏™ÂçïÁã¨ÁöÑ worker Êú∫Âô®‰∏ä‰º†ÈÄíÁªô maste(r ÈôÑÂä†Âú® ping ÁöÑÂ∫îÁ≠îÂåÖ‰∏≠‰º†ÈÄí)„ÄÇmaster ÊääÊâßË°åÊàêÂäüÁöÑ Map Âíå Reduce ‰ªªÂä°ÁöÑËÆ°Êï∞Âô®ÂÄºËøõË°åÁ¥ØËÆ°ÔºåÂΩì MapReduce Êìç‰ΩúÂÆåÊàê‰πãÂêéÔºåËøîÂõûÁªôÁî®Êà∑‰ª£Á†Å„ÄÇËÆ°Êï∞Âô®ÂΩìÂâçÁöÑÂÄº‰πü‰ºöÊòæÁ§∫Âú® master ÁöÑÁä∂ÊÄÅÈ°µÈù¢‰∏äÔºåËøôÊ†∑Áî®Êà∑Â∞±ÂèØ‰ª•ÁúãÂà∞ÂΩìÂâçËÆ°ÁÆóÁöÑËøõÂ∫¶„ÄÇÂΩìÁ¥ØÂä†ËÆ°Êï∞Âô® ÁöÑÂÄºÁöÑÊó∂ÂÄôÔºåmaster Ë¶ÅÊ£ÄÊü•ÈáçÂ§çËøêË°åÁöÑ Map ÊàñËÄÖ Reduce ‰ªªÂä°ÔºåÈÅøÂÖçÈáçÂ§çÁ¥ØÂä†(‰πãÂâçÊèêÂà∞ÁöÑÂ§áÁî®‰ªªÂä°ÂíåÂ§±Êïà ÂêéÈáçÊñ∞ÊâßË°å‰ªªÂä°Ëøô‰∏§ÁßçÊÉÖÂÜµ‰ºöÂØºËá¥Áõ∏ÂêåÁöÑ‰ªªÂä°Ë¢´Â§öÊ¨°ÊâßË°å)„ÄÇÊúâ‰∫õËÆ°Êï∞Âô®ÁöÑÂÄºÊòØÁî± MapReduce Â∫ìËá™Âä®Áª¥ÊåÅÁöÑÔºåÊØîÂ¶ÇÂ∑≤ÁªèÂ§ÑÁêÜÁöÑËæìÂÖ•ÁöÑ key/value pair ÁöÑÊï∞Èáè„ÄÅËæìÂá∫ÁöÑ key/value pair ÁöÑÊï∞ÈáèÁ≠âÁ≠â„ÄÇËÆ°Êï∞Âô®Êú∫Âà∂ÂØπ‰∫é MapReduce Êìç‰ΩúÁöÑÂÆåÊï¥ÊÄßÊ£ÄÊü•ÈùûÂ∏∏ÊúâÁî®„ÄÇÊØîÂ¶ÇÔºåÂú®Êüê‰∫õ MapReduce Êìç‰Ωú‰∏≠ÔºåÁî®Êà∑ÈúÄË¶ÅÁ°Æ ‰øùËæìÂá∫ÁöÑ key value pair Á≤æÁ°ÆÁöÑÁ≠â‰∫éËæìÂÖ•ÁöÑ key value pairÔºåÊàñËÄÖÂ§ÑÁêÜÁöÑ German ÊñáÊ°£Êï∞ÈáèÂú®Â§ÑÁêÜÁöÑÊï¥‰∏™ÊñáÊ°£Êï∞ Èáè‰∏≠Â±û‰∫éÂêàÁêÜËåÉÂõ¥„ÄÇ&#123;% note info %&#125;</span><br><span class="line">## ÊÄßËÉΩ</span><br><span class="line">&#123;% endnote %&#125;Êú¨ËäÇÊàë‰ª¨Áî®Âú®‰∏Ä‰∏™Â§ßÂûãÈõÜÁæ§‰∏äËøêË°åÁöÑ‰∏§‰∏™ËÆ°ÁÆóÊù•Ë°°Èáè MapReduce ÁöÑÊÄßËÉΩ„ÄÇ‰∏Ä‰∏™ËÆ°ÁÆóÂú®Â§ßÁ∫¶ 1TB ÁöÑÊï∞ÊçÆ‰∏≠ ËøõË°åÁâπÂÆöÁöÑÊ®°ÂºèÂåπÈÖçÔºåÂè¶‰∏Ä‰∏™ËÆ°ÁÆóÂØπÂ§ßÁ∫¶ 1TB ÁöÑÊï∞ÊçÆËøõË°åÊéíÂ∫è„ÄÇËøô‰∏§‰∏™Á®ãÂ∫èÂú®Â§ßÈáèÁöÑ‰ΩøÁî® MapReduce ÁöÑÂÆûÈôÖÂ∫îÁî®‰∏≠ÊòØÈùûÂ∏∏ÂÖ∏ÂûãÁöÑ ‚Äî ‰∏ÄÁ±ªÊòØÂØπÊï∞ÊçÆÊ†ºÂºèËøõË°åËΩ¨Êç¢Ôºå‰ªé‰∏Ä ÁßçË°®Áé∞ÂΩ¢ÂºèËΩ¨Êç¢‰∏∫Âè¶Â§ñ‰∏ÄÁßçË°®Áé∞ÂΩ¢Âºè;Âè¶‰∏ÄÁ±ªÊòØ‰ªéÊµ∑ÈáèÊï∞ÊçÆ‰∏≠ÊäΩÂèñÂ∞ëÈÉ®ÂàÜÁöÑÁî®Êà∑ÊÑüÂÖ¥Ë∂£ÁöÑÊï∞ÊçÆ„ÄÇ       </span><br><span class="line">### ÈõÜÁæ§ÈÖçÁΩÆÊâÄÊúâËøô‰∫õÁ®ãÂ∫èÈÉΩËøêË°åÂú®‰∏Ä‰∏™Â§ßÁ∫¶Áî± 1800 Âè∞Êú∫Âô®ÊûÑÊàêÁöÑÈõÜÁæ§‰∏ä„ÄÇÊØèÂè∞Êú∫Âô®ÈÖçÁΩÆ 2 ‰∏™ 2G ‰∏ªÈ¢ë„ÄÅÊîØÊåÅË∂ÖÁ∫øÁ®ã ÁöÑ Intel Xeon Â§ÑÁêÜÂô®Ôºå4GB ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÔºå‰∏§‰∏™ 160GB ÁöÑ IDE Á°¨ÁõòÂíå‰∏Ä‰∏™ÂçÉÂÖÜ‰ª•Â§™ÁΩëÂç°„ÄÇËøô‰∫õÊú∫Âô®ÈÉ®ÁΩ≤Âú®‰∏Ä‰∏™ ‰∏§Â±ÇÁöÑÊ†ëÂΩ¢‰∫§Êç¢ÁΩëÁªú‰∏≠ÔºåÂú® root ËäÇÁÇπÂ§ßÊ¶ÇÊúâ 100-200GBPS ÁöÑ‰º†ËæìÂ∏¶ÂÆΩ„ÄÇÊâÄÊúâËøô‰∫õÊú∫Âô®ÈÉΩÈááÁî®Áõ∏ÂêåÁöÑÈÉ®ÁΩ≤(ÂØπ Á≠âÈÉ®ÁΩ≤)ÔºåÂõ†Ê≠§‰ªªÊÑè‰∏§ÁÇπ‰πãÈó¥ÁöÑÁΩëÁªúÊù•ÂõûÊó∂Èó¥Â∞è‰∫é 1 ÊØ´Áßí„ÄÇÂú® 4GB ÂÜÖÂ≠òÈáåÔºåÂ§ßÊ¶ÇÊúâ 1-1.5G Áî®‰∫éËøêË°åÂú®ÈõÜÁæ§‰∏äÁöÑÂÖ∂‰ªñ‰ªªÂä°„ÄÇÊµãËØïÁ®ãÂ∫èÂú®Âë®Êú´‰∏ãÂçàÂºÄÂßãÊâßË°åÔºåËøôÊó∂‰∏ªÊú∫ ÁöÑ CPU„ÄÅÁ£ÅÁõòÂíåÁΩëÁªúÂü∫Êú¨‰∏äÂ§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅ„ÄÇ### GREPËøô‰∏™ÂàÜÂ∏ÉÂºèÁöÑ grep Á®ãÂ∫èÈúÄË¶ÅÊâ´ÊèèÂ§ßÊ¶Ç 10 ÁöÑ 10 Ê¨°Êñπ‰∏™Áî± 100 ‰∏™Â≠óËäÇÁªÑÊàêÁöÑËÆ∞ÂΩïÔºåÊü•ÊâæÂá∫Áé∞Ê¶ÇÁéáËæÉÂ∞èÁöÑ 3 ‰∏™Â≠óÁ¨¶ÁöÑÊ®°Âºè(Ëøô‰∏™Ê®°ÂºèÂú® 92337 ‰∏™ËÆ∞ÂΩï‰∏≠Âá∫Áé∞)„ÄÇËæìÂÖ•Êï∞ÊçÆË¢´ÊãÜÂàÜÊàêÂ§ßÁ∫¶ 64M ÁöÑ Block(M=15000)ÔºåÊï¥‰∏™ ËæìÂá∫Êï∞ÊçÆÂ≠òÊîæÂú®‰∏Ä‰∏™Êñá‰ª∂‰∏≠(R=1)„ÄÇ</span><br><span class="line">![](http://oliji9s3j.bkt.clouddn.com/15133914679471.jpg)Âõæ 2 ÊòæÁ§∫‰∫ÜËøô‰∏™ËøêÁÆóÈöèÊó∂Èó¥ÁöÑÂ§ÑÁêÜËøáÁ®ã„ÄÇÂÖ∂‰∏≠ Y ËΩ¥Ë°®Á§∫ËæìÂÖ•Êï∞ÊçÆÁöÑÂ§ÑÁêÜÈÄüÂ∫¶„ÄÇÂ§ÑÁêÜÈÄüÂ∫¶ÈöèÁùÄÂèÇ‰∏é MapReduce ËÆ°ÁÆóÁöÑÊú∫Âô®Êï∞ÈáèÁöÑÂ¢ûÂä†ËÄåÂ¢ûÂä†ÔºåÂΩì 1764 Âè∞ worker ÂèÇ‰∏éËÆ°ÁÆóÁöÑÊó∂ÔºåÂ§ÑÁêÜÈÄüÂ∫¶ËææÂà∞‰∫Ü 30GB/s„ÄÇÂΩì Map ‰ªªÂä°ÁªìÊùüÁöÑÊó∂ÂÄôÔºåÂç≥Âú®ËÆ°ÁÆóÂºÄÂßãÂêé 80 ÁßíÔºåËæìÂÖ•ÁöÑÂ§ÑÁêÜÈÄüÂ∫¶ÈôçÂà∞ 0„ÄÇÊï¥‰∏™ËÆ°ÁÆóËøáÁ®ã‰ªéÂºÄÂßãÂà∞ÁªìÊùü‰∏ÄÂÖ±Ëä±‰∫Ü Â§ßÊ¶Ç 150 Áßí„ÄÇËøôÂåÖÊã¨‰∫ÜÂ§ßÁ∫¶‰∏ÄÂàÜÈíüÁöÑÂàùÂßãÂêØÂä®Èò∂ÊÆµ„ÄÇÂàùÂßãÂêØÂä®Èò∂ÊÆµÊ∂àËÄóÁöÑÊó∂Èó¥ÂåÖÊã¨‰∫ÜÊòØÊääËøô‰∏™Á®ãÂ∫è‰º†ÈÄÅÂà∞ÂêÑ ‰∏™ worker Êú∫Âô®‰∏äÁöÑÊó∂Èó¥„ÄÅÁ≠âÂæÖ GFS Êñá‰ª∂Á≥ªÁªüÊâìÂºÄ 1000 ‰∏™ËæìÂÖ•Êñá‰ª∂ÈõÜÂêàÁöÑÊó∂Èó¥„ÄÅËé∑ÂèñÁõ∏ÂÖ≥ÁöÑÊñá‰ª∂Êú¨Âú∞‰ΩçÁΩÆ‰ºò Âåñ‰ø°ÊÅØÁöÑÊó∂Èó¥„ÄÇ### ÊéíÂ∫èÊéíÂ∫èÁ®ãÂ∫èÂ§ÑÁêÜ 10 ÁöÑ 10 Ê¨°Êñπ‰∏™ 100 ‰∏™Â≠óËäÇÁªÑÊàêÁöÑËÆ∞ÂΩï(Â§ßÊ¶Ç 1TB ÁöÑÊï∞ÊçÆ)„ÄÇËøô‰∏™Á®ãÂ∫èÊ®°‰ªø TeraSortbenchmark[10]„ÄÇÊéíÂ∫èÁ®ãÂ∫èÁî±‰∏çÂà∞ 50 Ë°å‰ª£Á†ÅÁªÑÊàê„ÄÇÂè™Êúâ‰∏âË°åÁöÑ Map ÂáΩÊï∞‰ªéÊñáÊú¨Ë°å‰∏≠Ëß£ÊûêÂá∫ 10 ‰∏™Â≠óËäÇÁöÑ key ÂÄº‰Ωú‰∏∫ÊéíÂ∫èÁöÑ keyÔºåÂπ∂‰∏îÊääËøô‰∏™ key ÂíåÂéüÂßãÊñáÊú¨Ë°å‰Ωú‰∏∫‰∏≠Èó¥ÁöÑ key/value pair ÂÄºËæìÂá∫„ÄÇÊàë‰ª¨‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂÜÖÁΩÆÁöÑÊÅíÁ≠âÂáΩÊï∞‰Ωú‰∏∫ Reduce Êìç‰ΩúÂáΩÊï∞„ÄÇËøô‰∏™ÂáΩÊï∞Êää‰∏≠Èó¥ÁöÑ key/value pair ÂÄº‰∏ç‰Ωú‰ªª‰ΩïÊîπÂèòËæìÂá∫„ÄÇÊúÄÁªàÊéíÂ∫èÁªìÊûúËæìÂá∫Âà∞‰∏§Ë∑ØÂ§çÂà∂ÁöÑGFS Êñá‰ª∂Á≥ªÁªü(‰πüÂ∞±ÊòØËØ¥ÔºåÁ®ãÂ∫èËæìÂá∫ 2TB ÁöÑÊï∞ÊçÆ)„ÄÇÂ¶ÇÂâçÊâÄËø∞ÔºåËæìÂÖ•Êï∞ÊçÆË¢´ÂàÜÊàê 64MB ÁöÑ Block(M=15000)„ÄÇÊàë‰ª¨ÊääÊéíÂ∫èÂêéÁöÑËæìÂá∫ÁªìÊûúÂàÜÂå∫ÂêéÂ≠òÂÇ®Âà∞ 4000‰∏™Êñá‰ª∂(R=4000)„ÄÇÂàÜÂå∫ÂáΩÊï∞‰ΩøÁî® key ÁöÑÂéüÂßãÂ≠óËäÇÊù•ÊääÊï∞ÊçÆÂàÜÂå∫Âà∞ R ‰∏™ÁâáÊÆµ‰∏≠„ÄÇÂú®Ëøô‰∏™ benchmark ÊµãËØï‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑÂàÜÂå∫ÂáΩÊï∞Áü•ÈÅì key ÁöÑÂàÜÂå∫ÊÉÖÂÜµ„ÄÇÈÄöÂ∏∏ÂØπ‰∫éÊéíÂ∫èÁ®ãÂ∫èÊù•ËØ¥ÔºåÊàë‰ª¨‰ºöÂ¢ûÂä†‰∏Ä‰∏™È¢ÑÂ§ÑÁêÜÁöÑ MapReduce Êìç‰ΩúÁî®‰∫éÈááÊ†∑ key ÂÄºÁöÑÂàÜÂ∏ÉÊÉÖÂÜµÔºåÈÄöËøáÈááÊ†∑ÁöÑÊï∞ÊçÆÊù•ËÆ°ÁÆóÂØπÊúÄÁªàÊéíÂ∫èÂ§ÑÁêÜÁöÑÂàÜ Âå∫ÁÇπ„ÄÇ</span><br><span class="line">![](http://oliji9s3j.bkt.clouddn.com/15133915176963.jpg)Âõæ‰∏â(a)ÊòæÁ§∫‰∫ÜËøô‰∏™ÊéíÂ∫èÁ®ãÂ∫èÁöÑÊ≠£Â∏∏ÊâßË°åËøáÁ®ã„ÄÇÂ∑¶‰∏äÁöÑÂõæÊòæÁ§∫‰∫ÜËæìÂÖ•Êï∞ÊçÆËØªÂèñÁöÑÈÄüÂ∫¶„ÄÇÊï∞ÊçÆËØªÂèñÈÄüÂ∫¶Â≥∞ ÂÄº‰ºöËææÂà∞ 13GB/sÔºåÂπ∂‰∏îÊâÄÊúâ Map ‰ªªÂä°ÂÆåÊàê‰πãÂêéÔºåÂç≥Â§ßÁ∫¶ 200 Áßí‰πãÂêéËøÖÈÄüÊªëËêΩÂà∞ 0„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÊéíÂ∫èÁ®ãÂ∫è ËæìÂÖ•Êï∞ÊçÆËØªÂèñÈÄüÂ∫¶Â∞è‰∫éÂàÜÂ∏ÉÂºè grep Á®ãÂ∫è„ÄÇËøôÊòØÂõ†‰∏∫ÊéíÂ∫èÁ®ãÂ∫èÁöÑ Map ‰ªªÂä°Ëä±‰∫ÜÂ§ßÁ∫¶‰∏ÄÂçäÁöÑÂ§ÑÁêÜÊó∂Èó¥Âíå I/O Â∏¶ÂÆΩ Êää‰∏≠Èó¥ËæìÂá∫ÁªìÊûúÂÜôÂà∞Êú¨Âú∞Á°¨Áõò„ÄÇÁõ∏Â∫îÁöÑÂàÜÂ∏ÉÂºè grep Á®ãÂ∫èÁöÑ‰∏≠Èó¥ÁªìÊûúËæìÂá∫Âá†‰πéÂèØ‰ª•ÂøΩÁï•‰∏çËÆ°„ÄÇÂ∑¶Ëæπ‰∏≠Èó¥ÁöÑÂõæÊòæÁ§∫‰∫Ü‰∏≠Èó¥Êï∞ÊçÆ‰ªé Map ‰ªªÂä°ÂèëÈÄÅÂà∞ Reduce ‰ªªÂä°ÁöÑÁΩëÁªúÈÄüÂ∫¶„ÄÇËøô‰∏™ËøáÁ®ã‰ªéÁ¨¨‰∏Ä‰∏™ Map ‰ªªÂä° ÂÆåÊàê‰πãÂêéÂ∞±ÂºÄÂßãÁºìÊÖ¢ÂêØÂä®‰∫Ü„ÄÇÂõæÁ§∫ÁöÑÁ¨¨‰∏Ä‰∏™È´òÂ≥∞ÊòØÂêØÂä®‰∫ÜÁ¨¨‰∏ÄÊâπÂ§ßÊ¶Ç 1700 ‰∏™ Reduce ‰ªªÂä°(Êï¥‰∏™ MapReduce ÂàÜÂ∏ÉÂà∞Â§ßÊ¶Ç 1700 Âè∞Êú∫Âô®‰∏äÔºåÊØèÂè∞Êú∫Âô® 1 Ê¨°ÊúÄÂ§öÊâßË°å 1 ‰∏™ Reduce ‰ªªÂä°)„ÄÇÊéíÂ∫èÁ®ãÂ∫èËøêË°åÂ§ßÁ∫¶ 300 ÁßíÂêéÔºåÁ¨¨‰∏ÄÊâπ ÂêØÂä®ÁöÑ Reduce ‰ªªÂä°Êúâ‰∫õÂÆåÊàê‰∫ÜÔºåÊàë‰ª¨ÂºÄÂßãÊâßË°åÂâ©‰∏ãÁöÑ Reduce ‰ªªÂä°„ÄÇÊâÄÊúâÁöÑÂ§ÑÁêÜÂú®Â§ßÁ∫¶ 600 ÁßíÂêéÁªìÊùü„ÄÇ</span><br><span class="line"></span><br><span class="line">Â∑¶‰∏ãÂõæË°®Á§∫ Reduce ‰ªªÂä°ÊääÊéíÂ∫èÂêéÁöÑÊï∞ÊçÆÂÜôÂà∞ÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂ÁöÑÈÄüÂ∫¶„ÄÇÂú®Á¨¨‰∏Ä‰∏™ÊéíÂ∫èÈò∂ÊÆµÁªìÊùüÂíåÊï∞ÊçÆÂºÄÂßã ÂÜôÂÖ•Á£ÅÁõò‰πãÈó¥Êúâ‰∏Ä‰∏™Â∞èÁöÑÂª∂Êó∂ÔºåËøôÊòØÂõ†‰∏∫ worker Êú∫Âô®Ê≠£Âú®Âøô‰∫éÊéíÂ∫è‰∏≠Èó¥Êï∞ÊçÆ„ÄÇÁ£ÅÁõòÂÜôÂÖ•ÈÄüÂ∫¶Âú® 2-4GB/s ÊåÅÁª≠ ‰∏ÄÊÆµÊó∂Èó¥„ÄÇËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÂ§ßÁ∫¶ÊåÅÁª≠ 850 Áßí„ÄÇËÆ°ÂÖ•ÂàùÂßãÂêØÂä®ÈÉ®ÂàÜÁöÑÊó∂Èó¥ÔºåÊï¥‰∏™ËøêÁÆóÊ∂àËÄó‰∫Ü 891 Áßí„ÄÇËøô‰∏™ÈÄüÂ∫¶Âíå TeraSort benchmark[18]ÁöÑÊúÄÈ´òÁ∫™ÂΩï 1057 ÁßíÁõ∏Â∑Æ‰∏çÂ§ö„ÄÇ </span><br><span class="line"></span><br><span class="line">ËøòÊúâ‰∏Ä‰∫õÂÄºÂæóÊ≥®ÊÑèÁöÑÁé∞Ë±°:ËæìÂÖ•Êï∞ÊçÆÁöÑËØªÂèñÈÄüÂ∫¶ÊØîÊéíÂ∫èÈÄüÂ∫¶ÂíåËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÈÄüÂ∫¶Ë¶ÅÈ´ò‰∏çÂ∞ëÔºåËøôÊòØÂõ†‰∏∫Êàë‰ª¨ÁöÑËæìÂÖ•Êï∞ÊçÆÊú¨Âú∞Âåñ‰ºòÂåñÁ≠ñÁï•Ëµ∑‰∫Ü‰ΩúÁî® ‚Äî ÁªùÂ§ßÈÉ®ÂàÜÊï∞ÊçÆÈÉΩÊòØ‰ªéÊú¨Âú∞Á°¨ÁõòËØªÂèñÁöÑÔºå‰ªéËÄåËäÇÁúÅ‰∫ÜÁΩëÁªúÂ∏¶ÂÆΩ„ÄÇ ÊéíÂ∫èÈÄüÂ∫¶ÊØîËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Âà∞Á£ÅÁõòÁöÑÈÄüÂ∫¶Âø´ÔºåËøôÊòØÂõ†‰∏∫ËæìÂá∫Êï∞ÊçÆÂÜô‰∫Ü‰∏§‰ªΩ(Êàë‰ª¨‰ΩøÁî®‰∫Ü 2 Ë∑ØÁöÑ GFS Êñá‰ª∂Á≥ªÁªüÔºå ÂÜôÂÖ•Â§çÂà∂ËäÇÁÇπÁöÑÂéüÂõ†ÊòØ‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄß)„ÄÇÊàë‰ª¨ÊääËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Âà∞‰∏§‰∏™Â§çÂà∂ËäÇÁÇπÁöÑÂéüÂõ†ÊòØÂõ†‰∏∫Ëøô ÊòØÂ∫ïÂ±ÇÊñá‰ª∂Á≥ªÁªüÁöÑ‰øùËØÅÊï∞ÊçÆÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄßÁöÑÂÆûÁé∞Êú∫Âà∂„ÄÇÂ¶ÇÊûúÂ∫ïÂ±ÇÊñá‰ª∂Á≥ªÁªü‰ΩøÁî®Á±ª‰ººÂÆπÈîôÁºñÁ†Å[14](erasure coding)ÁöÑÊñπÂºèËÄå‰∏çÊòØÂ§çÂà∂ÁöÑÊñπÂºè‰øùËØÅÊï∞ÊçÆÁöÑÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄßÔºåÈÇ£‰πàÂú®ËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØ‰ª•Èôç‰Ωé ÁΩëÁªúÂ∏¶ÂÆΩÁöÑ‰ΩøÁî®„ÄÇ### È´òÊïàÁöÑ backup ‰ªªÂä°Âõæ‰∏â(b)ÊòæÁ§∫‰∫ÜÂÖ≥Èó≠‰∫ÜÂ§áÁî®‰ªªÂä°ÂêéÊéíÂ∫èÁ®ãÂ∫èÊâßË°åÊÉÖÂÜµ„ÄÇÊâßË°åÁöÑËøáÁ®ãÂíåÂõæ 3(a)ÂæàÁõ∏‰ººÔºåÈô§‰∫ÜËæìÂá∫Êï∞ÊçÆÂÜô Á£ÅÁõòÁöÑÂä®‰ΩúÂú®Êó∂Èó¥‰∏äÊãñ‰∫Ü‰∏Ä‰∏™ÂæàÈïøÁöÑÂ∞æÂ∑¥ÔºåËÄå‰∏îÂú®ËøôÊÆµÊó∂Èó¥ÈáåÔºåÂá†‰πéÊ≤°Êúâ‰ªÄ‰πàÂÜôÂÖ•Âä®‰Ωú„ÄÇÂú® 960 ÁßíÂêéÔºåÂè™Êúâ 5 ‰∏™ Reduce ‰ªªÂä°Ê≤°ÊúâÂÆåÊàê„ÄÇËøô‰∫õÊãñÂêéËÖøÁöÑ‰ªªÂä°ÂèàÊâßË°å‰∫Ü 300 ÁßíÊâçÂÆåÊàê„ÄÇÊï¥‰∏™ËÆ°ÁÆóÊ∂àËÄó‰∫Ü 1283 ÁßíÔºåÂ§ö‰∫Ü 44% ÁöÑÊâßË°åÊó∂Èó¥„ÄÇ### Â§±ÊïàÁöÑÊú∫Âô®Âú®Âõæ‰∏â(c)‰∏≠ÊºîÁ§∫ÁöÑÊéíÂ∫èÁ®ãÂ∫èÊâßË°åÁöÑËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨Âú®Á®ãÂ∫èÂºÄÂßãÂêéÂá†ÂàÜÈíüÊúâÊÑèÁöÑ kill ‰∫Ü 1746 ‰∏™ worker ‰∏≠ ÁöÑ 200 ‰∏™„ÄÇÈõÜÁæ§Â∫ïÂ±ÇÁöÑË∞ÉÂ∫¶Á´ãÂàªÂú®Ëøô‰∫õÊú∫Âô®‰∏äÈáçÊñ∞ÂºÄÂßãÊñ∞ÁöÑ worker Â§ÑÁêÜËøõÁ®ã(Âõ†‰∏∫Âè™ÊòØ worker Êú∫Âô®‰∏äÁöÑÂ§ÑÁêÜ ËøõÁ®ãË¢´ kill ‰∫ÜÔºåÊú∫Âô®Êú¨Ë∫´ËøòÂú®Â∑•‰Ωú)„ÄÇÂõæ‰∏â(c)ÊòæÁ§∫Âá∫‰∫Ü‰∏Ä‰∏™‚ÄúË¥ü‚ÄùÁöÑËæìÂÖ•Êï∞ÊçÆËØªÂèñÈÄüÂ∫¶ÔºåËøôÊòØÂõ†‰∏∫‰∏Ä‰∫õÂ∑≤ÁªèÂÆåÊàêÁöÑ Map ‰ªªÂä°‰∏¢Â§±‰∫Ü(Áî±‰∫é Áõ∏Â∫îÁöÑÊâßË°å Map ‰ªªÂä°ÁöÑ worker ËøõÁ®ãË¢´ kill ‰∫Ü)ÔºåÈúÄË¶ÅÈáçÊñ∞ÊâßË°åËøô‰∫õ‰ªªÂä°„ÄÇÁõ∏ÂÖ≥ Map ‰ªªÂä°ÂæàÂø´Â∞±Ë¢´ÈáçÊñ∞ÊâßË°å‰∫Ü„ÄÇ Êï¥‰∏™ËøêÁÆóÂú® 933 ÁßíÂÜÖÂÆåÊàêÔºåÂåÖÊã¨‰∫ÜÂàùÂßãÂêØÂä®Êó∂Èó¥(Âè™ÊØîÊ≠£Â∏∏ÊâßË°åÂ§öÊ∂àËÄó‰∫Ü 5%ÁöÑÊó∂Èó¥)„ÄÇ&#123;% note info %&#125;</span><br><span class="line">## ÁªèÈ™å</span><br><span class="line"> &#123;% endnote %&#125;Êàë‰ª¨Âú® 2003 Âπ¥ 1 ÊúàÂÆåÊàê‰∫ÜÁ¨¨‰∏Ä‰∏™ÁâàÊú¨ÁöÑ MapReduce Â∫ìÔºåÂú® 2003 Âπ¥ 8 ÊúàÁöÑÁâàÊú¨Êúâ‰∫ÜÊòæËëóÁöÑÂ¢ûÂº∫ÔºåËøôÂåÖÊã¨ ‰∫ÜËæìÂÖ•Êï∞ÊçÆÊú¨Âú∞‰ºòÂåñ„ÄÅworker Êú∫Âô®‰πãÈó¥ÁöÑÂä®ÊÄÅË¥üËΩΩÂùáË°°Á≠âÁ≠â„ÄÇ‰ªéÈÇ£‰ª•ÂêéÔºåÊàë‰ª¨ÊÉäÂñúÁöÑÂèëÁé∞ÔºåMapReduce Â∫ìËÉΩ ÂπøÊ≥õÂ∫îÁî®‰∫éÊàë‰ª¨Êó•Â∏∏Â∑•‰Ωú‰∏≠ÈÅáÂà∞ÁöÑÂêÑÁ±ªÈóÆÈ¢ò„ÄÇÂÆÉÁé∞Âú®Âú® Google ÂÜÖÈÉ®ÂêÑ‰∏™È¢ÜÂüüÂæóÂà∞ÂπøÊ≥õÂ∫îÁî®ÔºåÂåÖÊã¨:</span><br><span class="line">1. Â§ßËßÑÊ®°Êú∫Âô®Â≠¶‰π†ÈóÆÈ¢ò</span><br><span class="line">2. Google News Âíå Froogle ‰∫ßÂìÅÁöÑÈõÜÁæ§ÈóÆÈ¢ò3. ‰ªéÂÖ¨‰ºóÊü•ËØ¢‰∫ßÂìÅ(ÊØîÂ¶Ç Google ÁöÑ Zeitgeist)ÁöÑÊä•Âëä‰∏≠ÊäΩÂèñÊï∞ÊçÆ„ÄÇ4. ‰ªéÂ§ßÈáèÁöÑÊñ∞Â∫îÁî®ÂíåÊñ∞‰∫ßÂìÅÁöÑÁΩëÈ°µ‰∏≠ÊèêÂèñÊúâÁî®‰ø°ÊÅØ(ÊØîÂ¶ÇÔºå‰ªéÂ§ßÈáèÁöÑ‰ΩçÁΩÆÊêúÁ¥¢ÁΩëÈ°µ‰∏≠ÊäΩÂèñÂú∞ÁêÜ‰ΩçÁΩÆ‰ø°ÊÅØ)„ÄÇ5. Â§ßËßÑÊ®°ÁöÑÂõæÂΩ¢ËÆ°ÁÆó„ÄÇ</span><br><span class="line"></span><br><span class="line">![](http://oliji9s3j.bkt.clouddn.com/15133916089336.jpg)ÂõæÂõõÊòæÁ§∫‰∫ÜÂú®Êàë‰ª¨ÁöÑÊ∫ê‰ª£Á†ÅÁÆ°ÁêÜÁ≥ªÁªü‰∏≠ÔºåÈöèÁùÄÊó∂Èó¥Êé®ÁßªÔºåÁã¨Á´ãÁöÑ MapReduce Á®ãÂ∫èÊï∞ÈáèÁöÑÊòæËëóÂ¢ûÂä†„ÄÇ‰ªé 2003 Âπ¥Êó©‰∫õÊó∂ÂÄôÁöÑ 0 ‰∏™Â¢ûÈïøÂà∞ 2004 Âπ¥ 9 Êúà‰ªΩÁöÑÂ∑Æ‰∏çÂ§ö 900 ‰∏™‰∏çÂêåÁöÑÁ®ãÂ∫è„ÄÇMapReduce ÁöÑÊàêÂäüÂèñÂÜ≥‰∫éÈááÁî® MapReduce Â∫ìËÉΩÂ§üÂú®‰∏çÂà∞Âçä‰∏™Â∞èÊó∂Êó∂Èó¥ÂÜÖÂÜôÂá∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ®ãÂ∫èÔºåËøô‰∏™ÁÆÄÂçïÁöÑÁ®ãÂ∫èËÉΩÂ§üÂú®‰∏äÂçÉÂè∞Êú∫Âô®ÁöÑÁªÑÊàêÁöÑÈõÜÁæ§‰∏äÂÅöÂ§ß ËßÑÊ®°Âπ∂ÂèëÂ§ÑÁêÜÔºåËøôÊûÅÂ§ßÁöÑÂä†Âø´‰∫ÜÂºÄÂèëÂíåÂéüÂΩ¢ËÆæËÆ°ÁöÑÂë®Êúü„ÄÇÂè¶Â§ñÔºåÈááÁî® MapReduce Â∫ìÔºåÂèØ‰ª•ËÆ©ÂÆåÂÖ®Ê≤°ÊúâÂàÜÂ∏ÉÂºè Âíå/ÊàñÂπ∂Ë°åÁ≥ªÁªüÂºÄÂèëÁªèÈ™åÁöÑÁ®ãÂ∫èÂëòÂæàÂÆπÊòìÁöÑÂà©Áî®Â§ßÈáèÁöÑËµÑÊ∫êÔºåÂºÄÂèëÂá∫ÂàÜÂ∏ÉÂºèÂíå/ÊàñÂπ∂Ë°åÂ§ÑÁêÜÁöÑÂ∫îÁî®„ÄÇ</span><br><span class="line">![](http://oliji9s3j.bkt.clouddn.com/15133916531743.jpg)Âú®ÊØè‰∏™‰ªªÂä°ÁªìÊùüÁöÑÊó∂ÂÄôÔºåMapReduce Â∫ìÁªüËÆ°ËÆ°ÁÆóËµÑÊ∫êÁöÑ‰ΩøÁî®Áä∂ÂÜµ„ÄÇÂú®Ë°® 1ÔºåÊàë‰ª¨ÂàóÂá∫‰∫Ü 2004 Âπ¥ 8 Êúà‰ªΩ MapReduce ËøêË°åÁöÑ‰ªªÂä°ÊâÄÂç†Áî®ÁöÑÁõ∏ÂÖ≥ËµÑÊ∫ê„ÄÇ### Â§ßËßÑÊ®°Á¥¢ÂºïÂà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåMapReduce ÊúÄÊàêÂäüÁöÑÂ∫îÁî®Â∞±ÊòØÈáçÂÜô‰∫Ü Google ÁΩëÁªúÊêúÁ¥¢ÊúçÂä°ÊâÄ‰ΩøÁî®Âà∞ÁöÑ index Á≥ªÁªü„ÄÇÁ¥¢ÂºïÁ≥ª ÁªüÁöÑËæìÂÖ•Êï∞ÊçÆÊòØÁΩëÁªúÁà¨Ëô´ÊäìÂèñÂõûÊù•ÁöÑÊµ∑ÈáèÁöÑÊñáÊ°£ÔºåËøô‰∫õÊñáÊ°£Êï∞ÊçÆÈÉΩ‰øùÂ≠òÂú® GFS Êñá‰ª∂Á≥ªÁªüÈáå„ÄÇËøô‰∫õÊñáÊ°£ÂéüÂßãÂÜÖ ÂÆπ4ÁöÑÂ§ßÂ∞èË∂ÖËøá‰∫Ü 20TB„ÄÇÁ¥¢ÂºïÁ®ãÂ∫èÊòØÈÄöËøá‰∏ÄÁ≥ªÂàóÁöÑ MapReduce Êìç‰Ωú(Â§ßÁ∫¶ 5 Âà∞ 10 Ê¨°)Êù•Âª∫Á´ãÁ¥¢Âºï„ÄÇ‰ΩøÁî® MapReduce(ÊõøÊç¢‰∏ä‰∏Ä‰∏™ÁâπÂà´ËÆæËÆ°ÁöÑ„ÄÅÂàÜÂ∏ÉÂºèÂ§ÑÁêÜÁöÑÁ¥¢ÂºïÁ®ãÂ∫è)Â∏¶Êù•Ëøô‰∫õÂ•ΩÂ§Ñ:ÂÆûÁé∞Á¥¢ÂºïÈÉ®ÂàÜÁöÑ‰ª£Á†ÅÁÆÄÂçï„ÄÅÂ∞èÂ∑ß„ÄÅÂÆπÊòìÁêÜËß£ÔºåÂõ†‰∏∫ÂØπ‰∫éÂÆπÈîô„ÄÅÂàÜÂ∏ÉÂºè‰ª•ÂèäÂπ∂Ë°åËÆ°ÁÆóÁöÑÂ§ÑÁêÜÈÉΩÊòØ MapReduce Â∫ìÊèê‰æõÁöÑ„ÄÇÊØîÂ¶ÇÔºå‰ΩøÁî® MapReduce Â∫ìÔºåËÆ°ÁÆóÁöÑ‰ª£Á†ÅË°åÊï∞‰ªéÂéüÊù•ÁöÑ 3800 Ë°å C++‰ª£Á†ÅÂáèÂ∞ëÂà∞Â§ßÊ¶Ç 700 Ë°å‰ª£Á†Å„ÄÇMapReduce Â∫ìÁöÑÊÄßËÉΩÂ∑≤ÁªèË∂≥Â§üÂ•Ω‰∫ÜÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•ÊääÂú®Ê¶ÇÂøµ‰∏ä‰∏çÁõ∏ÂÖ≥ÁöÑËÆ°ÁÆóÊ≠•È™§ÂàÜÂºÄÂ§ÑÁêÜÔºåËÄå‰∏çÊòØÊ∑∑Âú® ‰∏ÄËµ∑‰ª•ÊúüÂáèÂ∞ëÊï∞ÊçÆ‰º†ÈÄíÁöÑÈ¢ùÂ§ñÊ∂àËÄó„ÄÇÊ¶ÇÂøµ‰∏ä‰∏çÁõ∏ÂÖ≥ÁöÑËÆ°ÁÆóÊ≠•È™§ÁöÑÈöîÁ¶ª‰πü‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÊîπÂèòÁ¥¢ÂºïÂ§ÑÁêÜÊñπ Âºè„ÄÇÊØîÂ¶ÇÔºåÂØπ‰πãÂâçÁöÑÁ¥¢ÂºïÁ≥ªÁªüÁöÑ‰∏Ä‰∏™Â∞èÊõ¥ÊîπÂèØËÉΩË¶ÅËÄóË¥πÂ•ΩÂá†‰∏™ÊúàÁöÑÊó∂Èó¥Ôºå‰ΩÜÊòØÂú®‰ΩøÁî® MapReduce ÁöÑÊñ∞Á≥ªÁªü‰∏äÔºå ËøôÊ†∑ÁöÑÊõ¥ÊîπÂè™ÈúÄË¶ÅËä±Âá†Â§©Êó∂Èó¥Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÁ¥¢ÂºïÁ≥ªÁªüÁöÑÊìç‰ΩúÁÆ°ÁêÜÊõ¥ÂÆπÊòì‰∫Ü„ÄÇÂõ†‰∏∫Áî±Êú∫Âô®Â§±Êïà„ÄÅÊú∫Âô®Â§ÑÁêÜÈÄüÂ∫¶ÁºìÊÖ¢„ÄÅ‰ª•ÂèäÁΩëÁªúÁöÑÁû¨Èó¥ÈòªÂ°ûÁ≠âÂºïËµ∑ÁöÑÁªù Â§ßÈÉ®ÂàÜÈóÆÈ¢òÈÉΩÂ∑≤ÁªèÁî± MapReduce Â∫ìËß£ÂÜ≥‰∫ÜÔºå‰∏çÂÜçÈúÄË¶ÅÊìç‰Ωú‰∫∫ÂëòÁöÑ‰ªãÂÖ•‰∫Ü„ÄÇÂè¶Â§ñÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂú®Á¥¢ÂºïÁ≥ªÁªüÈõÜ Áæ§‰∏≠Â¢ûÂä†Êú∫Âô®ÁöÑÁÆÄÂçïÊñπÊ≥ïÊèêÈ´òÊï¥‰ΩìÂ§ÑÁêÜÊÄßËÉΩ„ÄÇ&#123;% note info %&#125;</span><br><span class="line">## Áõ∏ÂÖ≥Â∑•‰Ωú</span><br><span class="line"> &#123;% endnote %&#125;</span><br><span class="line">ÂæàÂ§öÁ≥ªÁªüÈÉΩÊèê‰æõ‰∫Ü‰∏•Ê†ºÁöÑÁºñÁ®ãÊ®°ÂºèÔºåÂπ∂‰∏îÈÄöËøáÂØπÁºñÁ®ãÁöÑ‰∏•Ê†ºÈôêÂà∂Êù•ÂÆûÁé∞Âπ∂Ë°åËÆ°ÁÆó„ÄÇ‰æãÂ¶ÇÔºå‰∏Ä‰∏™ÁªìÂêàÂáΩÊï∞ÂèØ‰ª•ÈÄöËøáÊää N ‰∏™ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÁöÑÂâçÁºÄÂú® N ‰∏™Â§ÑÁêÜÂô®‰∏ä‰ΩøÁî®Âπ∂Ë°åÂâçÁºÄÁÆóÊ≥ïÔºåÂú® log N ÁöÑÊó∂Èó¥ÂÜÖËÆ°ÁÆóÂÆå[6Ôºå9Ôºå13]5„ÄÇMapReduce ÂèØ‰ª•Áúã‰ΩúÊòØÊàë‰ª¨ÁªìÂêàÂú®ÁúüÂÆûÁéØÂ¢É‰∏ãÂ§ÑÁêÜÊµ∑ÈáèÊï∞ÊçÆÁöÑÁªèÈ™åÔºåÂØπËøô‰∫õÁªèÂÖ∏Ê®°ÂûãËøõË°åÁÆÄÂåñÂíåËêÉÂèñÁöÑÊàêÊûú„ÄÇ Êõ¥Âä†ÂÄºÂæóÈ™ÑÂÇ≤ÁöÑÊòØÔºåÊàë‰ª¨ËøòÂÆûÁé∞‰∫ÜÂü∫‰∫é‰∏äÂçÉÂè∞Â§ÑÁêÜÂô®ÁöÑÈõÜÁæ§ÁöÑÂÆπÈîôÂ§ÑÁêÜ„ÄÇÁõ∏ÊØîËÄåË®ÄÔºåÂ§ßÈÉ®ÂàÜÂπ∂ÂèëÂ§ÑÁêÜÁ≥ªÁªüÈÉΩ Âè™Âú®Â∞èËßÑÊ®°ÁöÑÈõÜÁæ§‰∏äÂÆûÁé∞ÔºåÂπ∂‰∏îÊääÂÆπÈîôÂ§ÑÁêÜ‰∫§Áªô‰∫ÜÁ®ãÂ∫èÂëò„ÄÇBulk Synchronous Programming[17]Âíå‰∏Ä‰∫õ MPI ÂéüËØ≠[11]Êèê‰æõ‰∫ÜÊõ¥È´òÁ∫ßÂà´ÁöÑÂπ∂Ë°åÂ§ÑÁêÜÊäΩË±°ÔºåÂèØ‰ª•Êõ¥ÂÆπÊòìÂÜô Âá∫Âπ∂Ë°åÂ§ÑÁêÜÁöÑÁ®ãÂ∫è„ÄÇMapReduce ÂíåËøô‰∫õÁ≥ªÁªüÁöÑÂÖ≥ÈîÆ‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÔºåMapReduce Âà©Áî®ÈôêÂà∂ÊÄßÁºñÁ®ãÊ®°ÂºèÂÆûÁé∞‰∫ÜÁî® Êà∑Á®ãÂ∫èÁöÑËá™Âä®Âπ∂ÂèëÂ§ÑÁêÜÔºåÂπ∂‰∏îÊèê‰æõ‰∫ÜÈÄèÊòéÁöÑÂÆπÈîôÂ§ÑÁêÜ„ÄÇÊàë‰ª¨Êï∞ÊçÆÊú¨Âú∞‰ºòÂåñÁ≠ñÁï•ÁöÑÁÅµÊÑüÊù•Ê∫ê‰∫é active disks[12,15]Á≠âÊäÄÊúØÔºåÂú® active disks ‰∏≠ÔºåËÆ°ÁÆó‰ªªÂä°ÊòØÂ∞ΩÈáèÊé®ÈÄÅ Âà∞Êï∞ÊçÆÂ≠òÂÇ®ÁöÑËäÇÁÇπÂ§ÑÁêÜ6ÔºåËøôÊ†∑Â∞±ÂáèÂ∞ë‰∫ÜÁΩëÁªúÂíå IO Â≠êÁ≥ªÁªüÁöÑÂêûÂêêÈáè„ÄÇÊàë‰ª¨Âú®ÊåÇËΩΩÂá†‰∏™Á°¨ÁõòÁöÑÊôÆÈÄöÊú∫Âô®‰∏äÊâßË°å Êàë‰ª¨ÁöÑËøêÁÆóÔºåËÄå‰∏çÊòØÂú®Á£ÅÁõòÂ§ÑÁêÜÂô®‰∏äÊâßË°åÊàë‰ª¨ÁöÑÂ∑•‰ΩúÔºå‰ΩÜÊòØËææÂà∞ÁöÑÁõÆÁöÑ‰∏ÄÊ†∑ÁöÑ„ÄÇÊàë‰ª¨ÁöÑÂ§áÁî®‰ªªÂä°Êú∫Âà∂Âíå Charlotte System[3]ÊèêÂá∫ÁöÑ eager Ë∞ÉÂ∫¶Êú∫Âà∂ÊØîËæÉÁ±ª‰ºº„ÄÇEager Ë∞ÉÂ∫¶Êú∫Âà∂ÁöÑ‰∏Ä‰∏™Áº∫ÁÇπÊòØ Â¶ÇÊûú‰∏Ä‰∏™‰ªªÂä°ÂèçÂ§çÂ§±ÊïàÔºåÈÇ£‰πàÊï¥‰∏™ËÆ°ÁÆóÂ∞±‰∏çËÉΩÂÆåÊàê„ÄÇÊàë‰ª¨ÈÄöËøáÂøΩÁï•ÂºïËµ∑ÊïÖÈöúÁöÑËÆ∞ÂΩïÁöÑÊñπÂºèÂú®ÊüêÁßçÁ®ãÂ∫¶‰∏äËß£ÂÜ≥ ‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇMapReduce ÁöÑÂÆûÁé∞‰æùËµñ‰∫é‰∏Ä‰∏™ÂÜÖÈÉ®ÁöÑÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüÔºåËøô‰∏™ÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüË¥üË¥£Âú®‰∏Ä‰∏™Ë∂ÖÂ§ßÁöÑ„ÄÅÂÖ±‰∫´Êú∫Âô®ÁöÑ ÈõÜÁæ§‰∏äÂàÜÂ∏ÉÂíåËøêË°åÁî®Êà∑‰ªªÂä°„ÄÇËôΩÁÑ∂Ëøô‰∏™‰∏çÊòØÊú¨ËÆ∫ÊñáÁöÑÈáçÁÇπÔºå‰ΩÜÊòØÊúâÂøÖË¶ÅÊèê‰∏Ä‰∏ãÔºåËøô‰∏™ÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüÂú®ÁêÜÂøµ‰∏ä ÂíåÂÖ∂ÂÆÉÁ≥ªÁªüÔºåÂ¶Ç Condor[16]ÊòØ‰∏ÄÊ†∑„ÄÇMapReduce Â∫ìÁöÑÊéíÂ∫èÊú∫Âà∂Âíå NOW-Sort[1]ÁöÑÊìç‰Ωú‰∏äÂæàÁ±ª‰ºº„ÄÇËØªÂèñËæìÂÖ•Ê∫êÁöÑÊú∫Âô®(map workers)ÊääÂæÖÊéíÂ∫è ÁöÑÊï∞ÊçÆËøõË°åÂàÜÂå∫ÂêéÔºåÂèëÈÄÅÂà∞ R ‰∏™ Reduce worker ‰∏≠ÁöÑ‰∏Ä‰∏™ËøõË°åÂ§ÑÁêÜ„ÄÇÊØè‰∏™ Reduce worker Âú®Êú¨Âú∞ÂØπÊï∞ÊçÆËøõË°åÊéí Â∫è(Â∞ΩÂèØËÉΩÂú®ÂÜÖÂ≠ò‰∏≠ÊéíÂ∫è)„ÄÇÂΩìÁÑ∂ÔºåNOW-Sort Ê≤°ÊúâÁªôÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Map Âíå Reduce ÂáΩÊï∞ÁöÑÊú∫‰ºöÔºåÂõ†Ê≠§‰∏çÂÖ∑Â§á MapReduce Â∫ìÂπøÊ≥õÁöÑÂÆûÁî®ÊÄß„ÄÇRiver[2]Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÁºñÁ®ãÊ®°Âûã:Â§ÑÁêÜËøõÁ®ãÈÄöËøáÂàÜÂ∏ÉÂºèÈòüÂàó‰º†ÈÄÅÊï∞ÊçÆÁöÑÊñπÂºèËøõË°å‰∫íÁõ∏ÈÄöËÆØ„ÄÇÂíå MapReduce Á±ª‰ººÔºåRiver Á≥ªÁªüÂ∞ùËØïÂú®‰∏çÂØπÁ≠âÁöÑÁ°¨‰ª∂ÁéØÂ¢É‰∏ãÔºåÊàñËÄÖÂú®Á≥ªÁªüÈ¢†Á∞∏ÁöÑÊÉÖÂÜµ‰∏ã‰πüËÉΩÊèê‰æõËøë‰ººÂπ≥ÂùáÁöÑÊÄßËÉΩ„ÄÇRiver ÊòØ ÈÄöËøáÁ≤æÂøÉË∞ÉÂ∫¶Á°¨ÁõòÂíåÁΩëÁªúÁöÑÈÄöËÆØÊù•Âπ≥Ë°°‰ªªÂä°ÁöÑÂÆåÊàêÊó∂Èó¥„ÄÇMapReduce Â∫ìÈááÁî®‰∫ÜÂÖ∂ÂÆÉÁöÑÊñπÊ≥ï„ÄÇÈÄöËøáÂØπÁºñÁ®ãÊ®°Âûã ËøõË°åÈôêÂà∂ÔºåMapReduce Ê°ÜÊû∂ÊääÈóÆÈ¢òÂàÜËß£Êàê‰∏∫Â§ßÈáèÁöÑ‚ÄúÂ∞è‚Äù‰ªªÂä°„ÄÇËøô‰∫õ‰ªªÂä°Âú®ÂèØÁî®ÁöÑ worker ÈõÜÁæ§‰∏äÂä®ÊÄÅÁöÑË∞ÉÂ∫¶Ôºå ËøôÊ†∑Âø´ÈÄüÁöÑ worker Â∞±ÂèØ‰ª•ÊâßË°åÊõ¥Â§öÁöÑ‰ªªÂä°„ÄÇÈÄöËøáÂØπÁºñÁ®ãÊ®°ÂûãËøõË°åÈôêÂà∂ÔºåÊàë‰ª¨ÂèØÁî®Âú®Â∑•‰ΩúÊé•ËøëÂÆåÊàêÁöÑÊó∂ÂÄôË∞ÉÂ∫¶ Â§áÁî®‰ªªÂä°ÔºåÁº©Áü≠Âú®Á°¨‰ª∂ÈÖçÁΩÆ‰∏çÂùáË°°ÁöÑÊÉÖÂÜµ‰∏ãÁº©Â∞èÊï¥‰∏™Êìç‰ΩúÂÆåÊàêÁöÑÊó∂Èó¥(ÊØîÂ¶ÇÊúâÁöÑÊú∫Âô®ÊÄßËÉΩÂ∑Æ„ÄÅÊàñËÄÖÊú∫Âô®Ë¢´Êüê ‰∫õÊìç‰ΩúÈòªÂ°û‰∫Ü)„ÄÇBAD-FS[5]ÈááÁî®‰∫ÜÂíå MapReduce ÂÆåÂÖ®‰∏çÂêåÁöÑÁºñÁ®ãÊ®°ÂºèÔºåÂÆÉÊòØÈù¢ÂêëÂπøÂüüÁΩë(alex Ê≥®:wide-area network)ÁöÑ„ÄÇ‰∏çËøáÔºåËøô‰∏§‰∏™Á≥ªÁªüÊúâ‰∏§‰∏™Âü∫Á°ÄÂäüËÉΩÂæàÁ±ª‰ºº„ÄÇ</span><br><span class="line"></span><br><span class="line">1. ‰∏§‰∏™Á≥ªÁªüÈááÁî®ÈáçÊñ∞ÊâßË°åÁöÑÊñπÂºèÊù•Èò≤Ê≠¢Áî±‰∫éÂ§±ÊïàÂØºËá¥ÁöÑÊï∞ÊçÆ‰∏¢Â§±„ÄÇ</span><br><span class="line">2. ‰∏§‰∏™ÈÉΩ‰ΩøÁî®Êï∞ÊçÆÊú¨Âú∞ÂåñË∞ÉÂ∫¶Á≠ñÁï•ÔºåÂáèÂ∞ëÁΩëÁªúÈÄöËÆØÁöÑÊï∞ÊçÆÈáè„ÄÇ </span><br><span class="line"></span><br><span class="line">TACC[7]ÊòØ‰∏Ä‰∏™Áî®‰∫éÁÆÄÂåñÊûÑÈÄ†È´òÂèØÁî®ÊÄßÁΩëÁªúÊúçÂä°ÁöÑÁ≥ªÁªü„ÄÇÂíå MapReduce ‰∏ÄÊ†∑ÔºåÂÆÉ‰πü‰æùÈù†ÈáçÊñ∞ÊâßË°åÊú∫Âà∂Êù•ÂÆûÁé∞ÁöÑÂÆπÈîôÂ§ÑÁêÜ„ÄÇ&#123;% note info %&#125;</span><br><span class="line">## ÁªìÊùüËØ≠</span><br><span class="line"> &#123;% endnote %&#125;MapReduce ÁºñÁ®ãÊ®°ÂûãÂú® Google ÂÜÖÈÉ®ÊàêÂäüÂ∫îÁî®‰∫éÂ§ö‰∏™È¢ÜÂüü„ÄÇÊàë‰ª¨ÊääËøôÁßçÊàêÂäüÂΩíÁªì‰∏∫Âá†‰∏™ÊñπÈù¢:È¶ñÂÖàÔºåÁî±‰∫é MapReduce Â∞ÅË£Ö‰∫ÜÂπ∂Ë°åÂ§ÑÁêÜ„ÄÅÂÆπÈîôÂ§ÑÁêÜ„ÄÅÊï∞ÊçÆÊú¨Âú∞Âåñ‰ºòÂåñ„ÄÅË¥üËΩΩÂùáË°°Á≠âÁ≠âÊäÄÊúØÈöæÁÇπÁöÑÁªÜËäÇÔºåËøô‰ΩøÂæó MapReduce Â∫ìÊòì‰∫é‰ΩøÁî®„ÄÇÂç≥‰æøÂØπ‰∫éÂÆåÂÖ®Ê≤°ÊúâÂπ∂Ë°åÊàñËÄÖÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂºÄÂèëÁªèÈ™åÁöÑÁ®ãÂ∫èÂëòËÄåË®Ä;ÂÖ∂Ê¨°ÔºåÂ§ßÈáè‰∏çÂêåÁ±ªÂûãÁöÑÈóÆÈ¢òÈÉΩ ÂèØ‰ª•ÈÄöËøá MapReduce ÁÆÄÂçïÁöÑËß£ÂÜ≥„ÄÇÊØîÂ¶ÇÔºåMapReduce Áî®‰∫éÁîüÊàê Google ÁöÑÁΩëÁªúÊêúÁ¥¢ÊúçÂä°ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆ„ÄÅÁî®Êù• ÊéíÂ∫è„ÄÅÁî®Êù•Êï∞ÊçÆÊåñÊéò„ÄÅÁî®‰∫éÊú∫Âô®Â≠¶‰π†Ôºå‰ª•ÂèäÂæàÂ§öÂÖ∂ÂÆÉÁöÑÁ≥ªÁªü;Á¨¨‰∏âÔºåÊàë‰ª¨ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Âú®Êï∞ÂçÉÂè∞ËÆ°ÁÆóÊú∫ÁªÑÊàêÁöÑ Â§ßÂûãÈõÜÁæ§‰∏äÁÅµÊ¥ªÈÉ®ÁΩ≤ËøêË°åÁöÑ MapReduce„ÄÇËøô‰∏™ÂÆûÁé∞‰ΩøÂæóÊúâÊïàÂà©Áî®Ëøô‰∫õ‰∏∞ÂØåÁöÑËÆ°ÁÆóËµÑÊ∫êÂèòÂæóÈùûÂ∏∏ÁÆÄÂçïÔºåÂõ†Ê≠§‰πü ÈÄÇÂêàÁî®Êù•Ëß£ÂÜ≥ Google ÈÅáÂà∞ÁöÑÂÖ∂‰ªñÂæàÂ§öÈúÄË¶ÅÂ§ßÈáèËÆ°ÁÆóÁöÑÈóÆÈ¢ò„ÄÇÊàë‰ª¨‰πü‰ªé MapReduce ÂºÄÂèëËøáÁ®ã‰∏≠Â≠¶Âà∞‰∫Ü‰∏çÂ∞ë‰∏úË•ø„ÄÇÈ¶ñÂÖàÔºåÁ∫¶ÊùüÁºñÁ®ãÊ®°Âºè‰ΩøÂæóÂπ∂Ë°åÂíåÂàÜÂ∏ÉÂºèËÆ°ÁÆóÈùûÂ∏∏ÂÆπÊòìÔºå ‰πüÊòì‰∫éÊûÑÈÄ†ÂÆπÈîôÁöÑËÆ°ÁÆóÁéØÂ¢É;ÂÖ∂Ê¨°ÔºåÁΩëÁªúÂ∏¶ÂÆΩÊòØÁ®ÄÊúâËµÑÊ∫ê„ÄÇÂ§ßÈáèÁöÑÁ≥ªÁªü‰ºòÂåñÊòØÈíàÂØπÂáèÂ∞ëÁΩëÁªú‰º†ËæìÈáè‰∏∫ÁõÆÁöÑÁöÑ: Êú¨Âú∞‰ºòÂåñÁ≠ñÁï•‰ΩøÂ§ßÈáèÁöÑÊï∞ÊçÆ‰ªéÊú¨Âú∞Á£ÅÁõòËØªÂèñÔºå‰∏≠Èó¥Êñá‰ª∂ÂÜôÂÖ•Êú¨Âú∞Á£ÅÁõò„ÄÅÂπ∂‰∏îÂè™ÂÜô‰∏Ä‰ªΩ‰∏≠Èó¥Êñá‰ª∂‰πüËäÇÁ∫¶‰∫ÜÁΩëÁªú Â∏¶ÂÆΩ;Á¨¨‰∏âÔºåÂ§öÊ¨°ÊâßË°åÁõ∏ÂêåÁöÑ‰ªªÂä°ÂèØ‰ª•ÂáèÂ∞ëÊÄßËÉΩÁºìÊÖ¢ÁöÑÊú∫Âô®Â∏¶Êù•ÁöÑË¥üÈù¢ÂΩ±Âìç(alex Ê≥®:Âç≥Á°¨‰ª∂ÈÖçÁΩÆÁöÑ‰∏çÂπ≥Ë°°)Ôºå ÂêåÊó∂Ëß£ÂÜ≥‰∫ÜÁî±‰∫éÊú∫Âô®Â§±ÊïàÂØºËá¥ÁöÑÊï∞ÊçÆ‰∏¢Â§±ÈóÆÈ¢ò„ÄÇ&#123;% note info %&#125;</span><br><span class="line">## ÊÑüË∞¢</span><br><span class="line"> &#123;% endnote %&#125;Josh Levenberg has been instrumental in revising and extending the user-level MapReduce API with a number of new features based on his experience with using MapReduce and other people‚Äôs suggestions for enhancements. MapReduce reads its input from and writes its output to the Google File System [8]. We would like to thank Mohit Aron, Howard Gobioff, Markus Gutschke, David Kramer, Shun-Tak Leung, and Josh Redstone for their work in developing GFS. We would also like to thank Percy Liang and Olcan Sercinoglu for their work in developing the cluster management system used by MapReduce. Mike Burrows, Wilson Hsieh, Josh Levenberg, Sharon Perl, Rob Pike, and Debby Wallach provided helpful comments on earlier drafts of this paper.The anonymous OSDI reviewers, and our shepherd, Eric Brewer, provided many useful suggestions of areas where the paper could be improved. Finally, we thank all the users of MapReduce within Google‚Äôs engineering organization for providing helpful feedback, suggestions, and bug reports.&#123;% note info %&#125;</span><br><span class="line">## ÂèÇËÄÉËµÑÊñô</span><br><span class="line"> &#123;% endnote %&#125;[1] Andrea C. Arpaci-Dusseau, Remzi H. Arpaci-Dusseau,David E. Culler, Joseph M. Hellerstein, and David A. Patterson.High-performance sorting on networks of workstations.In Proceedings of the 1997 ACM SIGMOD InternationalConference on Management of Data, Tucson,Arizona, May 1997.[2] Remzi H. Arpaci-Dusseau, Eric Anderson, NoahTreuhaft, David E. Culler, Joseph M. Hellerstein, David Patterson, and Kathy Yelick. Cluster I/O with River:Making the fast case common. In Proceedings of the Sixth Workshop on Input/Output in Parallel and Distributed Systems (IOPADS ‚Äô99), pages 10.22, Atlanta, Georgia, May 1999.[3] Arash Baratloo, Mehmet Karaul, Zvi Kedem, and Peter Wyckoff. Charlotte: Metacomputing on the web. In Proceedings of the 9th International Conference on Parallel and Distributed Computing Systems, 1996. [4] Luiz A. Barroso, Jeffrey Dean, and Urs H Ãàolzle. Web search for a planet: The Google cluster architecture. IEEE Micro, 23(2):22.28, April 2003.[5] John Bent, Douglas Thain, Andrea C.Arpaci-Dusseau, Remzi H. Arpaci-Dusseau, and Miron Livny. Explicit control in a batch-aware distributed file system. In Proceedings of the 1st USENIX Symposium on Networked Systems Design and Implementation NSDI, March 2004.[6] Guy E. Blelloch. Scans as primitive parallel operations.IEEE Transactions on Computers, C-38(11), November 1989.[7] Armando Fox, Steven D. Gribble, Yatin Chawathe, Eric A. Brewer, and Paul Gauthier. Cluster-based scalable network services. In Proceedings of the 16th ACM Symposium on Operating System Principles, pages 78. 91, Saint-Malo, France, 1997.[8] Sanjay Ghemawat, Howard Gobioff, and Shun-Tak Leung. The Google file system. In 19th Symposium on Operating Systems Principles, pages 29.43, Lake George, New York, 2003. To appear in OSDI 2004 12[9] S. Gorlatch. Systematic efficient parallelization of scan and other list homomorphisms. In L. Bouge, P. Fraigniaud, A. Mignotte, and Y. Robert, editors, Euro-Par‚Äô96. Parallel Processing, Lecture Notes in Computer Science 1124, pages 401.408. Springer-Verlag, 1996.[10] Jim Gray. Sort benchmark home page. http://research.microsoft.com/barc/SortBenchmark/.[11] William Gropp, Ewing Lusk, and Anthony Skjellum. Using MPI: Portable Parallel Programming with the Message-Passing Interface. MIT Press, Cambridge, MA, 1999.[12] L. Huston, R. Sukthankar, R.Wickremesinghe, M. Satyanarayanan, G. R. Ganger, E. Riedel, and A.Ailamaki. Diamond: A storage architecture for early discard in interactive search. In Proceedings of the 2004USENIX File and Storage Technologies FAST Conference, April 2004.[13] Richard E. Ladner and Michael J. Fischer. Parallel prefix computation. Journal of the ACM, 27(4):831.838,1980.[14] Michael O. Rabin. Efficient dispersal of information for security, load balancing and fault tolerance. Journalof the ACM, 36(2):335.348, 1989.[15] Erik Riedel, Christos Faloutsos, Garth A. Gibson, and David Nagle. Active disks for large-scale dataprocessing. IEEE Computer, pages 68.74, June 2001.[16] Douglas Thain, Todd Tannenbaum, and Miron Livny. Distributed computing in practice: The Condorexperience. Concurrency and Computation: Practice and Experience, 2004.[17] L. G. Valiant. A bridging model for parallel computation. Communications of the ACM, 33(8):103.111,1997.[18] Jim Wyllie. Spsort: How to sort a terabyte quickly. http://alme1.almaden.ibm.com/cs/spsort.pdf.</span><br><span class="line">&#123;% note info %&#125;</span><br><span class="line">## ÈôÑÂΩï A-ÂçïËØçÈ¢ëÁéáÁªüËÆ°</span><br><span class="line"> &#123;% endnote %&#125;</span><br><span class="line">Êú¨ËäÇÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÁ®ãÂ∫èÔºåÁî®‰∫éÁªüËÆ°Âú®‰∏ÄÁªÑÂëΩ‰ª§Ë°åÊåáÂÆöÁöÑËæìÂÖ•Êñá‰ª∂‰∏≠ÔºåÊØè‰∏Ä‰∏™‰∏çÂêåÁöÑÂçïËØçÂá∫Áé∞È¢ëÁéá„ÄÇ</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">#include ‚Äúmapreduce/mapreduce.h‚Äù // User‚Äôs map function</span><br><span class="line"></span><br><span class="line">class WordCounter :public Mapper&#123;</span><br><span class="line">public:</span><br><span class="line">        virtual void Map(const MapInput&amp;input)&#123;</span><br><span class="line">        const string&amp;text=input.value();</span><br><span class="line">        const int n=text.size();</span><br><span class="line">        for(int i=0;i&lt;n; )&#123;</span><br><span class="line">// Skip past leading whitespace</span><br><span class="line">        while((i&lt;n)&amp;&amp;isspace(text[i]))i++;</span><br><span class="line">// Find word end </span><br><span class="line">        int start=i;</span><br><span class="line">        while((i&lt;n)&amp;&amp;!isspace(text[i]))i++;</span><br><span class="line">        if(start&lt;i)Emit(text.substr(start,i-start),‚Äù1‚Ä≤‚Ä≤);</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        REGISTER_MAPPER(WordCounter);</span><br><span class="line"></span><br><span class="line">// User‚Äôs reduce function</span><br><span class="line">class Adder :public Reducer&#123;</span><br><span class="line">        virtual void Reduce(ReduceInput*input)&#123; // Iterate over all entries with the</span><br><span class="line">// same key and add the values</span><br><span class="line">        int64 value=0;</span><br><span class="line">        while(!input-&gt;done())&#123;</span><br><span class="line">        value+=StringToInt(input-&gt;value());input-&gt;NextValue();</span><br><span class="line">        &#125;</span><br><span class="line">// Emit sum for input-&gt;key()</span><br><span class="line">        Emit(IntToString(value));&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        REGISTER_REDUCER(Adder);</span><br><span class="line">        int main(int argc,char**argv)&#123;ParseCommandLineFlags(argc,argv);</span><br><span class="line">        MapReduceSpecification spec;</span><br><span class="line">// Store list of input files into ‚Äúspec‚Äù </span><br><span class="line">        for(int i=1;i&lt;argc; i++)&#123;</span><br><span class="line">        MapReduceInput*input=spec.add_input();</span><br><span class="line">        input-&gt;set_format(‚Äútext‚Äù);</span><br><span class="line">        input-&gt;set_filepattern(argv[i]);</span><br><span class="line">        input-&gt;set_mapper_class(‚ÄúWordCounter‚Äù);</span><br><span class="line">        &#125;</span><br><span class="line">// Specify the output files:</span><br><span class="line">// /gfs/test/freq-00000-of-00100</span><br><span class="line">// /gfs/test/freq-00001-of-00100</span><br><span class="line">// ...</span><br><span class="line">        MapReduceOutput*out=spec.output();</span><br><span class="line">        out-&gt;set_filebase(‚Äú/gfs/test/freq‚Äù);</span><br><span class="line">        out-&gt;set_num_tasks(100);</span><br><span class="line">        out-&gt;set_format(‚Äútext‚Äù);</span><br><span class="line">        out-&gt;set_reducer_class(‚ÄúAdder‚Äù);</span><br><span class="line">// Optional: do partial sums within map tasks to save network bandwidth </span><br><span class="line">        out-&gt;set_combiner_class(‚ÄúAdder‚Äù);</span><br><span class="line">// Tuning parameters: use at most 2000</span><br><span class="line">// machines and 100 MB of memory per task </span><br><span class="line">        spec.set_machines(2000);</span><br><span class="line">        spec.set_map_megabytes(100);</span><br><span class="line">        spec.set_reduce_megabytes(100);</span><br><span class="line">// Now run it</span><br><span class="line">        MapReduceResult result;</span><br><span class="line">        if(!MapReduce(spec,&amp;result))abort();</span><br><span class="line">// Done: ‚Äòresult‚Äô structure contains info about counters, time taken, number of machines used, etc.</span><br><span class="line">        return 0;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure></p>
]]></content>
      
        <categories>
            
            <category> paper </category>
            
        </categories>
        
        
        <tags>
            
            <tag> paper </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Google File System ‰∏≠ÊñáÁâà]]></title>
      <url>https://stanxia.github.io/2017/12/14/Google-File-System-%E4%B8%AD%E6%96%87%E7%89%88/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÊëòË¶Å"><a href="#ÊëòË¶Å" class="headerlink" title="ÊëòË¶Å"></a>ÊëòË¶Å</h2></div>
<p>Êàë‰ª¨ËÆæËÆ°Âπ∂ÂÆûÁé∞‰∫Ü Google GFS Êñá‰ª∂Á≥ªÁªüÔºå‰∏Ä‰∏™Èù¢ÂêëÂ§ßËßÑÊ®°Êï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®ÁöÑ„ÄÅÂèØ‰º∏Áº©ÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü„ÄÇGFS ËôΩÁÑ∂ËøêË°åÂú®Âªâ‰ª∑ÁöÑÊôÆÈÅçÁ°¨‰ª∂ËÆæÂ§á‰∏äÔºå‰ΩÜÊòØÂÆÉ‰æùÁÑ∂‰∫ÜÊèê‰æõÁÅæÈöæÂÜó‰ΩôÁöÑËÉΩÂäõÔºå‰∏∫Â§ßÈáèÂÆ¢Êà∑Êú∫Êèê‰æõ‰∫ÜÈ´òÊÄßËÉΩÁöÑ<br>ÊúçÂä°„ÄÇ</p>
<p>ËôΩÁÑ∂ GFS ÁöÑËÆæËÆ°ÁõÆÊ†á‰∏éËÆ∏Â§ö‰º†ÁªüÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÊúâÂæàÂ§öÁõ∏Âêå‰πãÂ§ÑÔºå‰ΩÜÊòØÔºåÊàë‰ª¨ÁöÑËÆæËÆ°ËøòÊòØ‰ª•Êàë‰ª¨ÂØπ<br>Ëá™Â∑±ÁöÑÂ∫îÁî®ÁöÑË¥üËΩΩÊÉÖÂÜµÂíåÊäÄÊúØÁéØÂ¢ÉÁöÑÂàÜÊûê‰∏∫Âü∫Á°ÄÁöÑÔºå‰∏çÁÆ°Áé∞Âú®ËøòÊòØÂ∞ÜÊù•ÔºåGFS ÂíåÊó©ÊúüÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÁöÑËÆæÊÉ≥ÈÉΩÊúâÊòéÊòæÁöÑ‰∏çÂêå„ÄÇÊâÄ‰ª•Êàë‰ª¨ÈáçÊñ∞ÂÆ°ËßÜ‰∫Ü‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÂú®ËÆæËÆ°‰∏äÁöÑÊäòË°∑ÈÄâÊã©ÔºåË°çÁîüÂá∫‰∫ÜÂÆåÂÖ®‰∏çÂêåÁöÑËÆæËÆ°ÊÄùË∑Ø„ÄÇ</p>
<p>GFS ÂÆåÂÖ®Êª°Ë∂≥‰∫ÜÊàë‰ª¨ÂØπÂ≠òÂÇ®ÁöÑÈúÄÊ±Ç„ÄÇGFS ‰Ωú‰∏∫Â≠òÂÇ®Âπ≥Âè∞Â∑≤ÁªèË¢´ÂπøÊ≥õÁöÑÈÉ®ÁΩ≤Âú® Google ÂÜÖÈÉ®ÔºåÂ≠òÂÇ®Êàë‰ª¨ÁöÑÊúçÂä°‰∫ßÁîüÂíåÂ§ÑÁêÜÁöÑÊï∞ÊçÆÔºåÂêåÊó∂ËøòÁî®‰∫éÈÇ£‰∫õÈúÄË¶ÅÂ§ßËßÑÊ®°Êï∞ÊçÆÈõÜÁöÑÁ†îÁ©∂ÂíåÂºÄÂèëÂ∑•‰Ωú„ÄÇÁõÆÂâç‰∏∫Ê≠¢ÔºåÊúÄÂ§ßÁöÑ‰∏Ä‰∏™ÈõÜÁæ§Âà©Áî®Êï∞ÂçÉÂè∞Êú∫Âô®ÁöÑÊï∞ÂçÉ‰∏™Á°¨ÁõòÔºåÊèê‰æõ‰∫ÜÊï∞Áôæ TB ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÂêåÊó∂‰∏∫Êï∞Áôæ‰∏™ÂÆ¢Êà∑Êú∫ÊúçÂä°„ÄÇ<br>Âú®Êú¨ËÆ∫Êñá‰∏≠ÔºåÊàë‰ª¨Â±ïÁ§∫‰∫ÜËÉΩÂ§üÊîØÊåÅÂàÜÂ∏ÉÂºèÂ∫îÁî®ÁöÑÊñá‰ª∂Á≥ªÁªüÊé•Âè£ÁöÑÊâ©Â±ïÔºåËÆ®ËÆ∫Êàë‰ª¨ËÆæËÆ°ÁöÑËÆ∏Â§öÊñπÈù¢ÔºåÊúÄÂêé<br>ÂàóÂá∫‰∫ÜÂ∞èËßÑÊ®°ÊÄßËÉΩÊµãËØï‰ª•ÂèäÁúüÂÆûÁîü‰∫ßÁ≥ªÁªü‰∏≠ÊÄßËÉΩÁõ∏ÂÖ≥Êï∞ÊçÆ„ÄÇ<br><a id="more"></a><br><div class="note info"><h2 id="ÁÆÄ‰ªã"><a href="#ÁÆÄ‰ªã" class="headerlink" title="ÁÆÄ‰ªã"></a>ÁÆÄ‰ªã</h2></div><br> ‰∏∫‰∫ÜÊª°Ë∂≥ Google ËøÖÈÄüÂ¢ûÈïøÁöÑÊï∞ÊçÆÂ§ÑÁêÜÈúÄÊ±ÇÔºåÊàë‰ª¨ËÆæËÆ°Âπ∂ÂÆûÁé∞‰∫Ü Google Êñá‰ª∂Á≥ªÁªü(Google File System ‚ÄìGFS)„ÄÇGFS ‰∏é‰º†ÁªüÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÊúâÁùÄÂæàÂ§öÁõ∏ÂêåÁöÑËÆæËÆ°ÁõÆÊ†áÔºåÊØîÂ¶ÇÔºåÊÄßËÉΩ„ÄÅÂèØ‰º∏Áº©ÊÄß„ÄÅÂèØÈù†ÊÄß‰ª•ÂèäÂèØÁî®ÊÄß„ÄÇ‰ΩÜÊòØÔºåÊàë‰ª¨ÁöÑËÆæËÆ°ËøòÂü∫‰∫éÊàë‰ª¨ÂØπÊàë‰ª¨Ëá™Â∑±ÁöÑÂ∫îÁî®ÁöÑË¥üËΩΩÊÉÖÂÜµÂíåÊäÄÊúØÁéØÂ¢ÉÁöÑËßÇÂØüÁöÑÂΩ±ÂìçÔºå‰∏çÁÆ°Áé∞Âú®ËøòÊòØÂ∞ÜÊù•ÔºåGFS ÂíåÊó©ÊúüÊñá‰ª∂Á≥ªÁªüÁöÑÂÅáËÆæÈÉΩÊúâÊòéÊòæÁöÑ‰∏çÂêå„ÄÇÊâÄ‰ª•Êàë‰ª¨ÈáçÊñ∞ÂÆ°ËßÜ‰∫Ü‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÂú®ËÆæËÆ°‰∏äÁöÑÊäòË°∑ÈÄâÊã©ÔºåË°çÁîüÂá∫‰∫ÜÂÆåÂÖ®‰∏çÂêåÁöÑËÆæËÆ°ÊÄùË∑Ø„ÄÇ</p>
<p> <strong>È¶ñÂÖàÔºåÁªÑ‰ª∂Â§±ÊïàË¢´ËÆ§‰∏∫ÊòØÂ∏∏ÊÄÅ‰∫ã‰ª∂ÔºåËÄå‰∏çÊòØÊÑèÂ§ñ‰∫ã‰ª∂</strong>„ÄÇGFS ÂåÖÊã¨Âá†ÁôæÁîöËá≥Âá†ÂçÉÂè∞ÊôÆÈÄöÁöÑÂªâ‰ª∑ËÆæÂ§áÁªÑË£ÖÁöÑÂ≠òÂÇ®Êú∫Âô®ÔºåÂêåÊó∂Ë¢´Áõ∏ÂΩìÊï∞ÈáèÁöÑÂÆ¢Êà∑Êú∫ËÆøÈóÆ„ÄÇGFS ÁªÑ‰ª∂ÁöÑÊï∞ÈáèÂíåË¥®ÈáèÂØºËá¥Âú®‰∫ãÂÆû‰∏äÔºå‰ªª‰ΩïÁªôÂÆöÊó∂Èó¥ÂÜÖÈÉΩÊúâÂèØËÉΩÂèëÁîüÊüê‰∫õÁªÑ‰ª∂Êó†Ê≥ïÂ∑•‰ΩúÔºåÊüê‰∫õÁªÑ‰ª∂Êó†Ê≥ï‰ªéÂÆÉ‰ª¨ÁõÆÂâçÁöÑÂ§±ÊïàÁä∂ÊÄÅ‰∏≠ÊÅ¢Â§ç„ÄÇÊàë‰ª¨ÈÅáÂà∞ËøáÂêÑÁßçÂêÑÊ†∑ÁöÑÈóÆÈ¢òÔºåÊØîÂ¶ÇÂ∫îÁî®Á®ãÂ∫è bug„ÄÅÊìç‰ΩúÁ≥ªÁªüÁöÑ bug„ÄÅ‰∫∫‰∏∫Â§±ËØØÔºåÁîöËá≥ËøòÊúâÁ°¨Áõò„ÄÅÂÜÖÂ≠ò„ÄÅËøûÊé•Âô®„ÄÅÁΩëÁªú‰ª•ÂèäÁîµÊ∫êÂ§±ÊïàÁ≠âÈÄ†ÊàêÁöÑÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÔºåÊåÅÁª≠ÁöÑÁõëÊéß„ÄÅÈîôËØØ‰æ¶Êµã„ÄÅÁÅæÈöæÂÜó‰Ωô‰ª•ÂèäËá™Âä®ÊÅ¢Â§çÁöÑÊú∫Âà∂ÂøÖÈ°ªÈõÜÊàêÂú® GFS ‰∏≠„ÄÇ</p>
<p> <strong>ÂÖ∂Ê¨°Ôºå‰ª•ÈÄöÂ∏∏ÁöÑÊ†áÂáÜË°°ÈáèÔºåÊàë‰ª¨ÁöÑÊñá‰ª∂ÈùûÂ∏∏Â∑®Â§ß</strong>„ÄÇÊï∞ GB ÁöÑÊñá‰ª∂ÈùûÂ∏∏ÊôÆÈÅç„ÄÇÊØè‰∏™Êñá‰ª∂ÈÄöÂ∏∏ÈÉΩÂåÖÂê´ËÆ∏Â§öÂ∫îÁî®Á®ãÂ∫èÂØπË±°ÔºåÊØîÂ¶Ç web ÊñáÊ°£„ÄÇÂΩìÊàë‰ª¨ÁªèÂ∏∏ÈúÄË¶ÅÂ§ÑÁêÜÂø´ÈÄüÂ¢ûÈïøÁöÑ„ÄÅÂπ∂‰∏îÁî±Êï∞‰∫ø‰∏™ÂØπË±°ÊûÑÊàêÁöÑ„ÄÅÊï∞‰ª• TB ÁöÑÊï∞ÊçÆÈõÜÊó∂ÔºåÈááÁî®ÁÆ°ÁêÜÊï∞‰∫ø‰∏™ KB Â§ßÂ∞èÁöÑÂ∞èÊñá‰ª∂ÁöÑÊñπÂºèÊòØÈùûÂ∏∏‰∏çÊòéÊô∫ÁöÑÔºåÂ∞ΩÁÆ°Êúâ‰∫õÊñá‰ª∂Á≥ªÁªüÊîØÊåÅËøôÊ†∑ÁöÑÁÆ°ÁêÜÊñπÂºè„ÄÇÂõ†Ê≠§ÔºåËÆæËÆ°ÁöÑÂÅáËÆæÊù°‰ª∂ÂíåÂèÇÊï∞ÔºåÊØîÂ¶Ç I/O Êìç‰ΩúÂíå Block ÁöÑÂ∞∫ÂØ∏ÈÉΩÈúÄË¶ÅÈáçÊñ∞ËÄÉËôë„ÄÇ</p>
<p> <strong>Á¨¨‰∏âÔºåÁªùÂ§ßÈÉ®ÂàÜÊñá‰ª∂ÁöÑ‰øÆÊîπÊòØÈááÁî®Âú®Êñá‰ª∂Â∞æÈÉ®ËøΩÂä†Êï∞ÊçÆÔºåËÄå‰∏çÊòØË¶ÜÁõñÂéüÊúâÊï∞ÊçÆÁöÑÊñπÂºè</strong>„ÄÇÂØπÊñá‰ª∂ÁöÑÈöèÊú∫ÂÜôÂÖ•Êìç‰ΩúÂú®ÂÆûÈôÖ‰∏≠Âá†‰πé‰∏çÂ≠òÂú®„ÄÇ‰∏ÄÊó¶ÂÜôÂÆå‰πãÂêéÔºåÂØπÊñá‰ª∂ÁöÑÊìç‰ΩúÂ∞±Âè™ÊúâËØªÔºåËÄå‰∏îÈÄöÂ∏∏ÊòØÊåâÈ°∫Â∫èËØª„ÄÇÂ§ßÈáèÁöÑÊï∞ÊçÆÁ¨¶ÂêàËøô‰∫õÁâπÊÄßÔºåÊØîÂ¶ÇÔºöÊï∞ÊçÆÂàÜÊûêÁ®ãÂ∫èÊâ´ÊèèÁöÑË∂ÖÂ§ßÁöÑÊï∞ÊçÆÈõÜÔºõÊ≠£Âú®ËøêË°åÁöÑÂ∫îÁî®Á®ãÂ∫èÁîüÊàêÁöÑËøûÁª≠ÁöÑÊï∞ÊçÆÊµÅÔºõÂ≠òÊ°£ÁöÑÊï∞ÊçÆÔºõÁî±‰∏ÄÂè∞Êú∫Âô®ÁîüÊàê„ÄÅÂè¶Â§ñ‰∏ÄÂè∞Êú∫Âô®Â§ÑÁêÜÁöÑ‰∏≠Èó¥Êï∞ÊçÆÔºåËøô‰∫õ‰∏≠Èó¥Êï∞ÊçÆÁöÑÂ§ÑÁêÜÂèØËÉΩÊòØÂêåÊó∂ËøõË°åÁöÑ„ÄÅ‰πüÂèØËÉΩÊòØÂêéÁª≠ÊâçÂ§ÑÁêÜÁöÑ„ÄÇÂØπ‰∫éËøôÁßçÈíàÂØπÊµ∑ÈáèÊñá‰ª∂ÁöÑËÆøÈóÆÊ®°ÂºèÔºåÂÆ¢Êà∑Á´ØÂØπÊï∞ÊçÆÂùóÁºìÂ≠òÊòØÊ≤°ÊúâÊÑè‰πâÁöÑÔºåÊï∞ÊçÆÁöÑËøΩÂä†Êìç‰ΩúÊòØÊÄßËÉΩ‰ºòÂåñÂíåÂéüÂ≠êÊÄß‰øùËØÅÁöÑ‰∏ªË¶ÅËÄÉÈáèÂõ†Á¥†„ÄÇ</p>
<p><strong>Á¨¨ÂõõÔºåÂ∫îÁî®Á®ãÂ∫èÂíåÊñá‰ª∂Á≥ªÁªü API ÁöÑÂçèÂêåËÆæËÆ°ÊèêÈ´ò‰∫ÜÊï¥‰∏™Á≥ªÁªüÁöÑÁÅµÊ¥ªÊÄß</strong>„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÊîæÊùæ‰∫ÜÂØπ GFS ‰∏ÄËá¥ÊÄßÊ®°ÂûãÁöÑË¶ÅÊ±ÇÔºåËøôÊ†∑Â∞±ÂáèËΩª‰∫ÜÊñá‰ª∂Á≥ªÁªüÂØπÂ∫îÁî®Á®ãÂ∫èÁöÑËãõÂàªË¶ÅÊ±ÇÔºåÂ§ßÂ§ßÁÆÄÂåñ‰∫Ü GFS ÁöÑËÆæËÆ°„ÄÇÊàë‰ª¨ÂºïÂÖ•‰∫ÜÂéüÂ≠êÊÄßÁöÑËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÔºå‰ªéËÄå‰øùËØÅÂ§ö‰∏™ÂÆ¢Êà∑Á´ØËÉΩÂ§üÂêåÊó∂ËøõË°åËøΩÂä†Êìç‰ΩúÔºå‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂêåÊ≠•Êìç‰ΩúÊù•‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß„ÄÇÊú¨ÊñáÂêéÈù¢ËøòÊúâÂØπËøô‰∫õÈóÆÈ¢òÁöÑÁªÜËäÇÁöÑËØ¶ÁªÜËÆ®ËÆ∫„ÄÇ</p>
<p>Google Â∑≤ÁªèÈíàÂØπ‰∏çÂêåÁöÑÂ∫îÁî®ÈÉ®ÁΩ≤‰∫ÜÂ§öÂ•ó GFS ÈõÜÁæ§„ÄÇÊúÄÂ§ßÁöÑ‰∏Ä‰∏™ÈõÜÁæ§Êã•ÊúâË∂ÖËøá 1000 ‰∏™Â≠òÂÇ®ËäÇÁÇπÔºåË∂ÖËøá300TB ÁöÑÁ°¨ÁõòÁ©∫Èó¥ÔºåË¢´‰∏çÂêåÊú∫Âô®‰∏äÁöÑÊï∞Áôæ‰∏™ÂÆ¢Êà∑Á´ØËøûÁª≠‰∏çÊñ≠ÁöÑÈ¢ëÁπÅËÆøÈóÆ„ÄÇ<br> <div class="note info"><h2 id="ËÆæËÆ°Ê¶ÇËø∞"><a href="#ËÆæËÆ°Ê¶ÇËø∞" class="headerlink" title="ËÆæËÆ°Ê¶ÇËø∞"></a>ËÆæËÆ°Ê¶ÇËø∞</h2></div></p>
<h3 id="ËÆæËÆ°È¢ÑÊúü"><a href="#ËÆæËÆ°È¢ÑÊúü" class="headerlink" title="ËÆæËÆ°È¢ÑÊúü"></a>ËÆæËÆ°È¢ÑÊúü</h3><p>Âú®ËÆæËÆ°Êª°Ë∂≥Êàë‰ª¨ÈúÄÊ±ÇÁöÑÊñá‰ª∂Á≥ªÁªüÊó∂ÂÄôÔºåÊàë‰ª¨ÁöÑËÆæËÆ°ÁõÆÊ†áÊó¢ÊúâÊú∫‰ºö„ÄÅÂèàÊúâÊåëÊàò„ÄÇ‰πãÂâçÊàë‰ª¨Â∑≤ÁªèÊèêÂà∞‰∫Ü‰∏Ä‰∫õ<br>ÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÂÖ≥ÈîÆÁÇπÔºåËøôÈáåÊàë‰ª¨Â∞ÜËÆæËÆ°ÁöÑÈ¢ÑÊúüÁõÆÊ†áÁöÑÁªÜËäÇÂ±ïÂºÄËÆ®ËÆ∫„ÄÇ</p>
<p>Á≥ªÁªüÁî±ËÆ∏Â§öÂªâ‰ª∑ÁöÑÊôÆÈÄöÁªÑ‰ª∂ÁªÑÊàêÔºåÁªÑ‰ª∂Â§±ÊïàÊòØ‰∏ÄÁßçÂ∏∏ÊÄÅ„ÄÇÁ≥ªÁªüÂøÖÈ°ªÊåÅÁª≠ÁõëÊéßËá™Ë∫´ÁöÑÁä∂ÊÄÅÔºåÂÆÉÂøÖÈ°ªÂ∞ÜÁªÑ‰ª∂<br>Â§±Êïà‰Ωú‰∏∫‰∏ÄÁßçÂ∏∏ÊÄÅÔºåËÉΩÂ§üËøÖÈÄüÂú∞‰æ¶Êµã„ÄÅÂÜó‰ΩôÂπ∂ÊÅ¢Â§çÂ§±ÊïàÁöÑÁªÑ‰ª∂„ÄÇ</p>
<p>Á≥ªÁªüÂ≠òÂÇ®‰∏ÄÂÆöÊï∞ÈáèÁöÑÂ§ßÊñá‰ª∂„ÄÇÊàë‰ª¨È¢ÑÊúü‰ºöÊúâÂá†Áôæ‰∏áÊñá‰ª∂ÔºåÊñá‰ª∂ÁöÑÂ§ßÂ∞èÈÄöÂ∏∏Âú® 100MB ÊàñËÄÖ‰ª•‰∏ä„ÄÇÊï∞‰∏™ GBÂ§ßÂ∞èÁöÑÊñá‰ª∂‰πüÊòØÊôÆÈÅçÂ≠òÂú®ÔºåÂπ∂‰∏îË¶ÅËÉΩÂ§üË¢´ÊúâÊïàÁöÑÁÆ°ÁêÜ„ÄÇÁ≥ªÁªü‰πüÂøÖÈ°ªÊîØÊåÅÂ∞èÊñá‰ª∂Ôºå‰ΩÜÊòØ‰∏çÈúÄË¶ÅÈíàÂØπÂ∞èÊñá‰ª∂ÂÅö‰∏ìÈó®ÁöÑ‰ºòÂåñ„ÄÇ</p>
<p>Á≥ªÁªüÁöÑÂ∑•‰ΩúË¥üËΩΩ‰∏ªË¶ÅÁî±‰∏§ÁßçËØªÊìç‰ΩúÁªÑÊàêÔºöÂ§ßËßÑÊ®°ÁöÑÊµÅÂºèËØªÂèñÂíåÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫ËØªÂèñ„ÄÇÂ§ßËßÑÊ®°ÁöÑÊµÅÂºèËØªÂèñÈÄö<br>Â∏∏‰∏ÄÊ¨°ËØªÂèñÊï∞Áôæ KB ÁöÑÊï∞ÊçÆÔºåÊõ¥Â∏∏ËßÅÁöÑÊòØ‰∏ÄÊ¨°ËØªÂèñ 1MB ÁîöËá≥Êõ¥Â§öÁöÑÊï∞ÊçÆ„ÄÇÊù•Ëá™Âêå‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ÁöÑËøûÁª≠Êìç‰ΩúÈÄöÂ∏∏ÊòØËØªÂèñÂêå‰∏Ä‰∏™Êñá‰ª∂‰∏≠ËøûÁª≠ÁöÑ‰∏Ä‰∏™Âå∫Âüü„ÄÇÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫ËØªÂèñÈÄöÂ∏∏ÊòØÂú®Êñá‰ª∂Êüê‰∏™ÈöèÊú∫ÁöÑ‰ΩçÁΩÆËØªÂèñÂá†‰∏™ KB Êï∞ÊçÆ„ÄÇÂ¶ÇÊûúÂ∫îÁî®Á®ãÂ∫èÂØπÊÄßËÉΩÈùûÂ∏∏ÂÖ≥Ê≥®ÔºåÈÄöÂ∏∏ÁöÑÂÅöÊ≥ïÊòØÊääÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫ËØªÂèñÊìç‰ΩúÂêàÂπ∂Âπ∂ÊéíÂ∫èÔºå‰πãÂêéÊåâÈ°∫Â∫èÊâπÈáèËØªÂèñÔºåËøôÊ†∑Â∞±ÈÅøÂÖç‰∫ÜÂú®Êñá‰ª∂‰∏≠ÂâçÂêéÊù•ÂõûÁöÑÁßªÂä®ËØªÂèñ‰ΩçÁΩÆ„ÄÇ</p>
<p>Á≥ªÁªüÁöÑÂ∑•‰ΩúË¥üËΩΩËøòÂåÖÊã¨ËÆ∏Â§öÂ§ßËßÑÊ®°ÁöÑ„ÄÅÈ°∫Â∫èÁöÑ„ÄÅÊï∞ÊçÆËøΩÂä†ÊñπÂºèÁöÑÂÜôÊìç‰Ωú„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÊØèÊ¨°ÂÜôÂÖ•ÁöÑÊï∞ÊçÆ<br>ÁöÑÂ§ßÂ∞èÂíåÂ§ßËßÑÊ®°ËØªÁ±ª‰ºº„ÄÇÊï∞ÊçÆ‰∏ÄÊó¶Ë¢´ÂÜôÂÖ•ÂêéÔºåÊñá‰ª∂Â∞±ÂæàÂ∞ë‰ºöË¢´‰øÆÊîπ‰∫Ü„ÄÇÁ≥ªÁªüÊîØÊåÅÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫‰ΩçÁΩÆÂÜôÂÖ•Êìç‰ΩúÔºå‰ΩÜÊòØÂèØËÉΩÊïàÁéá‰∏çÂΩ∞„ÄÇ</p>
<p>Á≥ªÁªüÂøÖÈ°ªÈ´òÊïàÁöÑ„ÄÅË°å‰∏∫ÂÆö‰πâÊòéÁ°ÆÁöÑÔºàÂéüÊñáÔºöwell-definedÔºâÂÆûÁé∞Â§öÂÆ¢Êà∑Á´ØÂπ∂Ë°åËøΩÂä†Êï∞ÊçÆÂà∞Âêå‰∏Ä‰∏™Êñá‰ª∂ÈáåÁöÑËØ≠ÊÑè„ÄÇÊàë‰ª¨ÁöÑÊñá‰ª∂ÈÄöÂ∏∏Ë¢´Áî®‰∫é‚ÄúÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖ‚ÄùÈòüÂàóÔºåÊàñËÄÖÂÖ∂ÂÆÉÂ§öË∑ØÊñá‰ª∂ÂêàÂπ∂Êìç‰Ωú„ÄÇÈÄöÂ∏∏‰ºöÊúâÊï∞Áôæ‰∏™Áîü‰∫ßËÄÖÔºåÊØè‰∏™Áîü‰∫ßËÄÖËøõÁ®ãËøêË°åÂú®‰∏ÄÂè∞Êú∫Âô®‰∏äÔºåÂêåÊó∂ÂØπ‰∏Ä‰∏™Êñá‰ª∂ËøõË°åËøΩÂä†Êìç‰Ωú„ÄÇ‰ΩøÁî®ÊúÄÂ∞èÁöÑÂêåÊ≠•ÂºÄÈîÄÊù•ÂÆûÁé∞ÁöÑÂéüÂ≠êÁöÑÂ§öË∑ØËøΩÂä†Êï∞ÊçÆÊìç‰ΩúÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑ„ÄÇÊñá‰ª∂ÂèØ‰ª•Âú®Á®çÂêéËØªÂèñÔºåÊàñËÄÖÊòØÊ∂àË¥πËÄÖÂú®ËøΩÂä†ÁöÑÊìç‰ΩúÁöÑÂêåÊó∂ËØªÂèñÊñá‰ª∂„ÄÇ</p>
<p>È´òÊÄßËÉΩÁöÑÁ®≥ÂÆöÁΩëÁªúÂ∏¶ÂÆΩËøúÊØî‰ΩéÂª∂ËøüÈáçË¶Å„ÄÇÊàë‰ª¨ÁöÑÁõÆÊ†áÁ®ãÂ∫èÁªùÂ§ßÈÉ®ÂàÜË¶ÅÊ±ÇËÉΩÂ§üÈ´òÈÄüÁéáÁöÑ„ÄÅÂ§ßÊâπÈáèÁöÑÂ§ÑÁêÜÊï∞<br>ÊçÆÔºåÊûÅÂ∞ëÊúâÁ®ãÂ∫èÂØπÂçï‰∏ÄÁöÑËØªÂÜôÊìç‰ΩúÊúâ‰∏•Ê†ºÁöÑÂìçÂ∫îÊó∂Èó¥Ë¶ÅÊ±Ç„ÄÇ</p>
<h3 id="Êé•Âè£"><a href="#Êé•Âè£" class="headerlink" title="Êé•Âè£"></a>Êé•Âè£</h3><p>GFS Êèê‰æõ‰∫Ü‰∏ÄÂ•óÁ±ª‰ºº‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÁöÑ API Êé•Âè£ÂáΩÊï∞ÔºåËôΩÁÑ∂Âπ∂‰∏çÊòØ‰∏•Ê†ºÊåâÁÖß POSIX Á≠âÊ†áÂáÜ API ÁöÑÂΩ¢ÂºèÂÆûÁé∞ÁöÑ„ÄÇÊñá‰ª∂‰ª•ÂàÜÂ±ÇÁõÆÂΩïÁöÑÂΩ¢ÂºèÁªÑÁªáÔºåÁî®Ë∑ØÂæÑÂêçÊù•Ê†áËØÜ„ÄÇÊàë‰ª¨ÊîØÊåÅÂ∏∏Áî®ÁöÑÊìç‰ΩúÔºåÂ¶ÇÂàõÂª∫Êñ∞Êñá‰ª∂„ÄÅÂà†Èô§Êñá‰ª∂„ÄÅÊâìÂºÄÊñá‰ª∂„ÄÅÂÖ≥Èó≠Êñá‰ª∂„ÄÅËØªÂíåÂÜôÊñá‰ª∂„ÄÇ</p>
<p>Âè¶Â§ñÔºåGFS Êèê‰æõ‰∫ÜÂø´ÁÖßÂíåËÆ∞ÂΩïËøΩÂä†Êìç‰Ωú„ÄÇÂø´ÁÖß‰ª•Âæà‰ΩéÁöÑÊàêÊú¨ÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂ÊàñËÄÖÁõÆÂΩïÊ†ëÁöÑÊã∑Ë¥ù„ÄÇËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂÖÅËÆ∏Â§ö‰∏™ÂÆ¢Êà∑Á´ØÂêåÊó∂ÂØπ‰∏Ä‰∏™Êñá‰ª∂ËøõË°åÊï∞ÊçÆËøΩÂä†Êìç‰ΩúÔºåÂêåÊó∂‰øùËØÅÊØè‰∏™ÂÆ¢Êà∑Á´ØÁöÑËøΩÂä†Êìç‰ΩúÈÉΩÊòØÂéüÂ≠êÊÄßÁöÑ„ÄÇËøôÂØπ‰∫éÂÆûÁé∞Â§öË∑ØÁªìÊûúÂêàÂπ∂Ôºå‰ª•Âèä‚ÄúÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖ‚ÄùÈòüÂàóÈùûÂ∏∏ÊúâÁî®ÔºåÂ§ö‰∏™ÂÆ¢Êà∑Á´ØÂèØ‰ª•Âú®‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂêåÊ≠•ÈîÅÂÆöÁöÑÊÉÖÂÜµ‰∏ãÔºåÂêåÊó∂ÂØπ‰∏Ä‰∏™Êñá‰ª∂ËøΩÂä†Êï∞ÊçÆ„ÄÇÊàë‰ª¨ÂèëÁé∞Ëøô‰∫õÁ±ªÂûãÁöÑÊñá‰ª∂ÂØπ‰∫éÊûÑÂª∫Â§ßÂûãÂàÜÂ∏ÉÂ∫îÁî®ÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ„ÄÇÂø´ÁÖßÂíåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂ∞ÜÂú® 3.4 Âíå 3.3 ËäÇÂàÜÂà´ËÆ®ËÆ∫„ÄÇ</p>
<h3 id="Êû∂ÊûÑ"><a href="#Êû∂ÊûÑ" class="headerlink" title="Êû∂ÊûÑ"></a>Êû∂ÊûÑ</h3><p>‰∏Ä‰∏™ GFS ÈõÜÁæ§ÂåÖÂê´‰∏Ä‰∏™ÂçïÁã¨ÁöÑ Master ËäÇÁÇπÔºà<em>ËøôÈáåÁöÑ‰∏Ä‰∏™ÂçïÁã¨ÁöÑ Master ËäÇÁÇπÁöÑÂê´‰πâÊòØ GFS Á≥ªÁªü‰∏≠Âè™Â≠òÂú®‰∏Ä‰∏™ÈÄªËæë‰∏äÁöÑ Master ÁªÑ‰ª∂„ÄÇÂêéÈù¢Êàë‰ª¨Ëøò‰ºöÊèêÂà∞ Master ËäÇÁÇπÂ§çÂà∂ÔºåÂõ†Ê≠§Ôºå‰∏∫‰∫ÜÁêÜËß£Êñπ‰æøÔºåÊàë‰ª¨Êää Master ËäÇÁÇπËßÜ‰∏∫‰∏Ä‰∏™ÈÄªËæë‰∏äÁöÑÊ¶ÇÂøµÔºå‰∏Ä‰∏™ÈÄªËæëÁöÑ Master ËäÇÁÇπÂåÖÊã¨‰∏§Âè∞Áâ©ÁêÜ‰∏ªÊú∫</em>Ôºâ„ÄÅÂ§öÂè∞ Chunk ÊúçÂä°Âô®ÔºåÂπ∂‰∏îÂêåÊó∂Ë¢´Â§ö‰∏™ÂÆ¢Êà∑Á´ØËÆøÈóÆÔºåÂ¶ÇÂõæ 1ÊâÄÁ§∫„ÄÇÊâÄÊúâÁöÑËøô‰∫õÊú∫Âô®ÈÄöÂ∏∏ÈÉΩÊòØÊôÆÈÄöÁöÑ Linux Êú∫Âô®ÔºåËøêË°åÁùÄÁî®Êà∑Á∫ßÂà´(user-level)ÁöÑÊúçÂä°ËøõÁ®ã„ÄÇÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÊää Chunk ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÈÉΩÊîæÂú®Âêå‰∏ÄÂè∞Êú∫Âô®‰∏äÔºåÂâçÊèêÊòØÊú∫Âô®ËµÑÊ∫êÂÖÅËÆ∏ÔºåÂπ∂‰∏îÊàë‰ª¨ËÉΩÂ§üÊé•Âèó‰∏çÂèØÈù†ÁöÑÂ∫îÁî®Á®ãÂ∫è‰ª£Á†ÅÂ∏¶Êù•ÁöÑÁ®≥ÂÆöÊÄßÈôç‰ΩéÁöÑÈ£éÈô©„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15132301300998.jpg" alt><br>GFS Â≠òÂÇ®ÁöÑÊñá‰ª∂ÈÉΩË¢´ÂàÜÂâ≤ÊàêÂõ∫ÂÆöÂ§ßÂ∞èÁöÑ Chunk„ÄÇÂú® Chunk ÂàõÂª∫ÁöÑÊó∂ÂÄôÔºåMaster ÊúçÂä°Âô®‰ºöÁªôÊØè‰∏™ Chunk ÂàÜÈÖç‰∏Ä‰∏™‰∏çÂèòÁöÑ„ÄÅÂÖ®ÁêÉÂîØ‰∏ÄÁöÑ 64 ‰ΩçÁöÑ Chunk Ê†áËØÜ„ÄÇChunk ÊúçÂä°Âô®Êää Chunk ‰ª• Linux Êñá‰ª∂ÁöÑÂΩ¢Âºè‰øùÂ≠òÂú®Êú¨Âú∞Á°¨Áõò‰∏äÔºåÂπ∂‰∏îÊ†πÊçÆÊåáÂÆöÁöÑ Chunk Ê†áËØÜÂíåÂ≠óËäÇËåÉÂõ¥Êù•ËØªÂÜôÂùóÊï∞ÊçÆ„ÄÇÂá∫‰∫éÂèØÈù†ÊÄßÁöÑËÄÉËôëÔºåÊØè‰∏™ÂùóÈÉΩ‰ºöÂ§çÂà∂Âà∞Â§ö‰∏™ÂùóÊúçÂä°Âô®‰∏ä„ÄÇÁº∫ÁúÅÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ΩøÁî® 3 ‰∏™Â≠òÂÇ®Â§çÂà∂ËäÇÁÇπÔºå‰∏çËøáÁî®Êà∑ÂèØ‰ª•‰∏∫‰∏çÂêåÁöÑÊñá‰ª∂ÂëΩÂêçÁ©∫Èó¥ËÆæÂÆö‰∏çÂêåÁöÑÂ§çÂà∂Á∫ßÂà´„ÄÇ</p>
<p>Master ËäÇÁÇπÁÆ°ÁêÜÊâÄÊúâÁöÑÊñá‰ª∂Á≥ªÁªüÂÖÉÊï∞ÊçÆ„ÄÇËøô‰∫õÂÖÉÊï∞ÊçÆÂåÖÊã¨ÂêçÂ≠óÁ©∫Èó¥„ÄÅËÆøÈóÆÊéßÂà∂‰ø°ÊÅØ„ÄÅÊñá‰ª∂Âíå Chunk ÁöÑÊò†Â∞Ñ‰ø°ÊÅØ„ÄÅ‰ª•ÂèäÂΩìÂâç Chunk ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇMaster ËäÇÁÇπËøòÁÆ°ÁêÜÁùÄÁ≥ªÁªüËåÉÂõ¥ÂÜÖÁöÑÊ¥ªÂä®ÔºåÊØîÂ¶ÇÔºåChunk ÁßüÁî®ÁÆ°ÁêÜÔºà<em>BDB ‰πüÊúâÂÖ≥‰∫é lease ÁöÑÊèèËø∞Ôºå‰∏çÁü•ÈÅìÊòØÂê¶Áõ∏Âêå</em>Ôºâ„ÄÅÂ≠§ÂÑø ChunkÔºà<em>ÂéüÊñáÔºöorphaned chunks</em>ÔºâÁöÑÂõûÊî∂„ÄÅ‰ª•Âèä Chunk Âú® Chunk ÊúçÂä°Âô®‰πãÈó¥ÁöÑËøÅÁßª„ÄÇMaster ËäÇÁÇπ‰ΩøÁî®ÂøÉË∑≥‰ø°ÊÅØÂë®ÊúüÂú∞ÂíåÊØè‰∏™ ChunkÊúçÂä°Âô®ÈÄöËÆØÔºåÂèëÈÄÅÊåá‰ª§Âà∞ÂêÑ‰∏™ Chunk ÊúçÂä°Âô®Âπ∂Êé•Êî∂ Chunk ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ„ÄÇ</p>
<p>GFS ÂÆ¢Êà∑Á´Ø‰ª£Á†Å‰ª•Â∫ìÁöÑÂΩ¢ÂºèË¢´ÈìæÊé•Âà∞ÂÆ¢Êà∑Á®ãÂ∫èÈáå„ÄÇÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÂÆûÁé∞‰∫Ü GFS Êñá‰ª∂Á≥ªÁªüÁöÑ API Êé•Âè£ÂáΩÊï∞„ÄÅÂ∫îÁî®Á®ãÂ∫è‰∏é Master ËäÇÁÇπÂíå Chunk ÊúçÂä°Âô®ÈÄöËÆØ„ÄÅ‰ª•ÂèäÂØπÊï∞ÊçÆËøõË°åËØªÂÜôÊìç‰Ωú„ÄÇÂÆ¢Êà∑Á´ØÂíå Master ËäÇÁÇπÁöÑÈÄö‰ø°Âè™Ëé∑ÂèñÂÖÉÊï∞ÊçÆÔºåÊâÄÊúâÁöÑÊï∞ÊçÆÊìç‰ΩúÈÉΩÊòØÁî±ÂÆ¢Êà∑Á´ØÁõ¥Êé•Âíå Chunk ÊúçÂä°Âô®ËøõË°å‰∫§‰∫íÁöÑ„ÄÇÊàë‰ª¨‰∏çÊèê‰æõ POSIX Ê†áÂáÜÁöÑ API ÁöÑÂäüËÉΩÔºåÂõ†Ê≠§ÔºåGFS API Ë∞ÉÁî®‰∏çÈúÄË¶ÅÊ∑±ÂÖ•Âà∞ Linux vnode Á∫ßÂà´„ÄÇ</p>
<p>Êó†ËÆ∫ÊòØÂÆ¢Êà∑Á´ØËøòÊòØ Chunk ÊúçÂä°Âô®ÈÉΩ‰∏çÈúÄË¶ÅÁºìÂ≠òÊñá‰ª∂Êï∞ÊçÆ„ÄÇÂÆ¢Êà∑Á´ØÁºìÂ≠òÊï∞ÊçÆÂá†‰πéÊ≤°Êúâ‰ªÄ‰πàÁî®Â§ÑÔºåÂõ†‰∏∫Â§ßÈÉ®ÂàÜÁ®ãÂ∫èË¶Å‰πà‰ª•ÊµÅÁöÑÊñπÂºèËØªÂèñ‰∏Ä‰∏™Â∑®Â§ßÊñá‰ª∂ÔºåË¶Å‰πàÂ∑•‰ΩúÈõÜÂ§™Â§ßÊ†πÊú¨Êó†Ê≥ïË¢´ÁºìÂ≠ò„ÄÇÊó†ÈúÄËÄÉËôëÁºìÂ≠òÁõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò‰πüÁÆÄÂåñ‰∫ÜÂÆ¢Êà∑Á´ØÂíåÊï¥‰∏™Á≥ªÁªüÁöÑËÆæËÆ°ÂíåÂÆûÁé∞Ôºà<em>Ê≥®Ôºö‰∏çËøáÔºåÂÆ¢Êà∑Á´Ø‰ºöÁºìÂ≠òÂÖÉÊï∞ÊçÆ„ÄÇ</em>Ôºâ„ÄÇChunk ÊúçÂä°Âô®‰∏çÈúÄË¶ÅÁºìÂ≠òÊñá‰ª∂Êï∞ÊçÆÁöÑÂéüÂõ†ÊòØÔºåChunk ‰ª•Êú¨Âú∞Êñá‰ª∂ÁöÑÊñπÂºè‰øùÂ≠òÔºåLinux Êìç‰ΩúÁ≥ªÁªüÁöÑÊñá‰ª∂Á≥ªÁªüÁºìÂ≠ò‰ºöÊääÁªèÂ∏∏ËÆøÈóÆÁöÑÊï∞ÊçÆÁºìÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ</p>
<h3 id="Âçï‰∏Ä-Master-ËäÇÁÇπ"><a href="#Âçï‰∏Ä-Master-ËäÇÁÇπ" class="headerlink" title="Âçï‰∏Ä Master ËäÇÁÇπ"></a>Âçï‰∏Ä Master ËäÇÁÇπ</h3><p>Âçï‰∏ÄÁöÑ Master ËäÇÁÇπÁöÑÁ≠ñÁï•Â§ßÂ§ßÁÆÄÂåñ‰∫ÜÊàë‰ª¨ÁöÑËÆæËÆ°„ÄÇÂçï‰∏ÄÁöÑ Master ËäÇÁÇπÂèØ‰ª•ÈÄöËøáÂÖ®Â±ÄÁöÑ‰ø°ÊÅØÁ≤æÁ°ÆÂÆö‰ΩçChunk ÁöÑ‰ΩçÁΩÆ‰ª•ÂèäËøõË°åÂ§çÂà∂ÂÜ≥Á≠ñ„ÄÇÂè¶Â§ñÔºåÊàë‰ª¨ÂøÖÈ°ªÂáèÂ∞ëÂØπ Master ËäÇÁÇπÁöÑËØªÂÜôÔºåÈÅøÂÖç Master ËäÇÁÇπÊàê‰∏∫Á≥ªÁªüÁöÑÁì∂È¢à„ÄÇÂÆ¢Êà∑Á´ØÂπ∂‰∏çÈÄöËøá Master ËäÇÁÇπËØªÂÜôÊñá‰ª∂Êï∞ÊçÆ„ÄÇÂèç‰πãÔºåÂÆ¢Êà∑Á´ØÂêë Master ËäÇÁÇπËØ¢ÈóÆÂÆÉÂ∫îËØ•ËÅîÁ≥ªÁöÑ Chunk ÊúçÂä°Âô®„ÄÇÂÆ¢Êà∑Á´ØÂ∞ÜËøô‰∫õÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÁºìÂ≠ò‰∏ÄÊÆµÊó∂Èó¥ÔºåÂêéÁª≠ÁöÑÊìç‰ΩúÂ∞ÜÁõ¥Êé•Âíå Chunk ÊúçÂä°Âô®ËøõË°åÊï∞ÊçÆËØªÂÜôÊìç‰Ωú„ÄÇ</p>
<p>Êàë‰ª¨Âà©Áî®Âõæ 1 Ëß£Èáä‰∏Ä‰∏ã‰∏ÄÊ¨°ÁÆÄÂçïËØªÂèñÁöÑÊµÅÁ®ã„ÄÇÈ¶ñÂÖàÔºåÂÆ¢Êà∑Á´ØÊääÊñá‰ª∂ÂêçÂíåÁ®ãÂ∫èÊåáÂÆöÁöÑÂ≠óËäÇÂÅèÁßªÔºåÊ†πÊçÆÂõ∫ÂÆöÁöÑ Chunk Â§ßÂ∞èÔºåËΩ¨Êç¢ÊàêÊñá‰ª∂ÁöÑ Chunk Á¥¢Âºï„ÄÇÁÑ∂ÂêéÔºåÂÆÉÊääÊñá‰ª∂ÂêçÂíå Chunk Á¥¢ÂºïÂèëÈÄÅÁªô Master ËäÇÁÇπ„ÄÇMaster ËäÇÁÇπÂ∞ÜÁõ∏Â∫îÁöÑ Chunk Ê†áËØÜÂíåÂâØÊú¨ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÂèëËøòÁªôÂÆ¢Êà∑Á´Ø„ÄÇÂÆ¢Êà∑Á´ØÁî®Êñá‰ª∂ÂêçÂíå Chunk Á¥¢Âºï‰Ωú‰∏∫ key ÁºìÂ≠òËøô‰∫õ‰ø°ÊÅØ„ÄÇ</p>
<p>‰πãÂêéÂÆ¢Êà∑Á´ØÂèëÈÄÅËØ∑Ê±ÇÂà∞ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÂâØÊú¨Â§ÑÔºå‰∏ÄËà¨‰ºöÈÄâÊã©ÊúÄËøëÁöÑ„ÄÇËØ∑Ê±Ç‰ø°ÊÅØÂåÖÂê´‰∫Ü Chunk ÁöÑÊ†áËØÜÂíåÂ≠óËäÇËåÉÂõ¥„ÄÇÂú®ÂØπËøô‰∏™ Chunk ÁöÑÂêéÁª≠ËØªÂèñÊìç‰Ωú‰∏≠ÔºåÂÆ¢Êà∑Á´Ø‰∏çÂøÖÂÜçÂíå Master ËäÇÁÇπÈÄöËÆØ‰∫ÜÔºåÈô§ÈùûÁºìÂ≠òÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØËøáÊúüÊàñËÄÖÊñá‰ª∂Ë¢´ÈáçÊñ∞ÊâìÂºÄ„ÄÇÂÆûÈôÖ‰∏äÔºåÂÆ¢Êà∑Á´ØÈÄöÂ∏∏‰ºöÂú®‰∏ÄÊ¨°ËØ∑Ê±Ç‰∏≠Êü•ËØ¢Â§ö‰∏™ Chunk ‰ø°ÊÅØÔºåMaster ËäÇÁÇπÁöÑÂõûÂ∫î‰πüÂèØËÉΩÂåÖÂê´‰∫ÜÁ¥ßË∑üÁùÄËøô‰∫õË¢´ËØ∑Ê±ÇÁöÑ Chunk ÂêéÈù¢ÁöÑ Chunk ÁöÑ‰ø°ÊÅØ„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøô‰∫õÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÂú®Ê≤°Êúâ‰ªª‰Ωï‰ª£‰ª∑ÁöÑÊÉÖÂÜµ‰∏ãÔºåÈÅøÂÖç‰∫ÜÂÆ¢Êà∑Á´ØÂíå Master ËäÇÁÇπÊú™Êù•ÂèØËÉΩ‰ºöÂèëÁîüÁöÑÂá†Ê¨°ÈÄöËÆØ„ÄÇ</p>
<h3 id="Chunk-Â∞∫ÂØ∏"><a href="#Chunk-Â∞∫ÂØ∏" class="headerlink" title="Chunk Â∞∫ÂØ∏"></a>Chunk Â∞∫ÂØ∏</h3><p>Chunk ÁöÑÂ§ßÂ∞èÊòØÂÖ≥ÈîÆÁöÑËÆæËÆ°ÂèÇÊï∞‰πã‰∏Ä„ÄÇÊàë‰ª¨ÈÄâÊã©‰∫Ü 64MBÔºåËøô‰∏™Â∞∫ÂØ∏ËøúËøúÂ§ß‰∫é‰∏ÄËà¨Êñá‰ª∂Á≥ªÁªüÁöÑ Block size„ÄÇÊØè‰∏™ Chunk ÁöÑÂâØÊú¨ÈÉΩ‰ª•ÊôÆÈÄö Linux Êñá‰ª∂ÁöÑÂΩ¢Âºè‰øùÂ≠òÂú® Chunk ÊúçÂä°Âô®‰∏äÔºåÂè™ÊúâÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊâçÊâ©Â§ß„ÄÇÊÉ∞ÊÄßÁ©∫Èó¥ÂàÜÈÖçÁ≠ñÁï•ÈÅøÂÖç‰∫ÜÂõ†ÂÜÖÈÉ®Á¢éÁâáÈÄ†ÊàêÁöÑÁ©∫Èó¥Êµ™Ë¥πÔºåÂÜÖÈÉ®Á¢éÁâáÊàñËÆ∏ÊòØÂØπÈÄâÊã©Ëøô‰πàÂ§ßÁöÑ Chunk Â∞∫ÂØ∏ÊúÄÂÖ∑‰∫âËÆÆ‰∏ÄÁÇπ„ÄÇ</p>
<p>ÈÄâÊã©ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏ÊúâÂá†‰∏™ÈáçË¶ÅÁöÑ‰ºòÁÇπ„ÄÇÈ¶ñÂÖàÔºåÂÆÉÂáèÂ∞ë‰∫ÜÂÆ¢Êà∑Á´ØÂíå Master ËäÇÁÇπÈÄöËÆØÁöÑÈúÄÊ±ÇÔºåÂõ†‰∏∫Âè™ÈúÄË¶Å‰∏ÄÊ¨°Âíå Mater ËäÇÁÇπÁöÑÈÄö‰ø°Â∞±ÂèØ‰ª•Ëé∑Âèñ Chunk ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÔºå‰πãÂêéÂ∞±ÂèØ‰ª•ÂØπÂêå‰∏Ä‰∏™ Chunk ËøõË°åÂ§öÊ¨°ÁöÑËØªÂÜôÊìç‰Ωú„ÄÇËøôÁßçÊñπÂºèÂØπÈôç‰ΩéÊàë‰ª¨ÁöÑÂ∑•‰ΩúË¥üËΩΩÊù•ËØ¥ÊïàÊûúÊòæËëóÔºåÂõ†‰∏∫Êàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èÈÄöÂ∏∏ÊòØËøûÁª≠ËØªÂÜôÂ§ßÊñá‰ª∂„ÄÇÂç≥‰ΩøÊòØÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫ËØªÂèñÔºåÈááÁî®ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏‰πüÂ∏¶Êù•ÊòéÊòæÁöÑÂ•ΩÂ§ÑÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•ËΩªÊùæÁöÑÁºìÂ≠ò‰∏Ä‰∏™Êï∞ TB ÁöÑÂ∑•‰ΩúÊï∞ÊçÆÈõÜÊâÄÊúâÁöÑ Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇÂÖ∂Ê¨°ÔºåÈááÁî®ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏ÔºåÂÆ¢Êà∑Á´ØËÉΩÂ§üÂØπ‰∏Ä‰∏™ÂùóËøõË°åÂ§öÊ¨°Êìç‰ΩúÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈÄöËøá‰∏é Chunk ÊúçÂä°Âô®‰øùÊåÅËæÉÈïøÊó∂Èó¥ÁöÑ TCP ËøûÊé•Êù•ÂáèÂ∞ëÁΩëÁªúË¥üËΩΩ„ÄÇÁ¨¨‰∏âÔºåÈÄâÁî®ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏ÂáèÂ∞ë‰∫Ü MasterËäÇÁÇπÈúÄË¶Å‰øùÂ≠òÁöÑÂÖÉÊï∞ÊçÆÁöÑÊï∞Èáè„ÄÇËøôÂ∞±ÂÖÅËÆ∏Êàë‰ª¨ÊääÂÖÉÊï∞ÊçÆÂÖ®ÈÉ®ÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂú® 2.6.1 ËäÇÊàë‰ª¨‰ºöËÆ®ËÆ∫ÂÖÉÊï∞ÊçÆÂÖ®ÈÉ®ÊîæÂú®ÂÜÖÂ≠ò‰∏≠Â∏¶Êù•ÁöÑÈ¢ùÂ§ñÁöÑÂ•ΩÂ§Ñ„ÄÇ</p>
<p>Âè¶‰∏ÄÊñπÈù¢ÔºåÂç≥‰ΩøÈÖçÂêàÊÉ∞ÊÄßÁ©∫Èó¥ÂàÜÈÖçÔºåÈááÁî®ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏‰πüÊúâÂÖ∂Áº∫Èô∑„ÄÇÂ∞èÊñá‰ª∂ÂåÖÂê´ËæÉÂ∞ëÁöÑ ChunkÔºåÁîöËá≥Âè™Êúâ‰∏Ä‰∏™ Chunk„ÄÇÂΩìÊúâËÆ∏Â§öÁöÑÂÆ¢Êà∑Á´ØÂØπÂêå‰∏Ä‰∏™Â∞èÊñá‰ª∂ËøõË°åÂ§öÊ¨°ÁöÑËÆøÈóÆÊó∂ÔºåÂ≠òÂÇ®Ëøô‰∫õ Chunk ÁöÑ Chunk ÊúçÂä°Âô®Â∞±‰ºöÂèòÊàêÁÉ≠ÁÇπ„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÁî±‰∫éÊàë‰ª¨ÁöÑÁ®ãÂ∫èÈÄöÂ∏∏ÊòØËøûÁª≠ÁöÑËØªÂèñÂåÖÂê´Â§ö‰∏™ Chunk ÁöÑÂ§ßÊñá‰ª∂ÔºåÁÉ≠ÁÇπËøò‰∏çÊòØ‰∏ªË¶ÅÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>ÁÑ∂ËÄåÔºåÂΩìÊàë‰ª¨Á¨¨‰∏ÄÊ¨°Êää GFS Áî®‰∫éÊâπÂ§ÑÁêÜÈòüÂàóÁ≥ªÁªüÁöÑÊó∂ÂÄôÔºåÁÉ≠ÁÇπÁöÑÈóÆÈ¢òËøòÊòØ‰∫ßÁîü‰∫ÜÔºö‰∏Ä‰∏™ÂèØÊâßË°åÊñá‰ª∂Âú®<br>GFS ‰∏ä‰øùÂ≠ò‰∏∫ single-chunk Êñá‰ª∂Ôºå‰πãÂêéËøô‰∏™ÂèØÊâßË°åÊñá‰ª∂Âú®Êï∞ÁôæÂè∞Êú∫Âô®‰∏äÂêåÊó∂ÂêØÂä®„ÄÇÂ≠òÊîæËøô‰∏™ÂèØÊâßË°åÊñá‰ª∂ÁöÑÂá†‰∏™ Chunk ÊúçÂä°Âô®Ë¢´Êï∞Áôæ‰∏™ÂÆ¢Êà∑Á´ØÁöÑÂπ∂ÂèëËØ∑Ê±ÇËÆøÈóÆÂØºËá¥Á≥ªÁªüÂ±ÄÈÉ®ËøáËΩΩ„ÄÇÊàë‰ª¨ÈÄöËøá‰ΩøÁî®Êõ¥Â§ßÁöÑÂ§çÂà∂ÂèÇÊï∞Êù•‰øùÂ≠òÂèØÊâßË°åÊñá‰ª∂Ôºå‰ª•ÂèäÈîôÂºÄÊâπÂ§ÑÁêÜÈòüÂàóÁ≥ªÁªüÁ®ãÂ∫èÁöÑÂêØÂä®Êó∂Èó¥ÁöÑÊñπÊ≥ïËß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇ‰∏Ä‰∏™ÂèØËÉΩÁöÑÈïøÊïàËß£ÂÜ≥ÊñπÊ°àÊòØÔºåÂú®ËøôÁßçÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÖÅËÆ∏ÂÆ¢Êà∑Á´Ø‰ªéÂÖ∂ÂÆÉÂÆ¢Êà∑Á´ØËØªÂèñÊï∞ÊçÆ„ÄÇ</p>
<h3 id="ÂÖÉÊï∞ÊçÆ"><a href="#ÂÖÉÊï∞ÊçÆ" class="headerlink" title="ÂÖÉÊï∞ÊçÆ"></a>ÂÖÉÊï∞ÊçÆ</h3><p><code>Master ÊúçÂä°Âô®</code>Ôºà<em>Ê≥®ÊÑèÈÄªËæëÁöÑ Master ËäÇÁÇπÂíåÁâ©ÁêÜÁöÑ Master ÊúçÂä°Âô®ÁöÑÂå∫Âà´„ÄÇÂêéÁª≠Êàë‰ª¨Ë∞àÁöÑÊòØÊØè‰∏™ Master ÊúçÂä°Âô®ÁöÑË°å‰∏∫ÔºåÂ¶ÇÂ≠òÂÇ®„ÄÅÂÜÖÂ≠òÁ≠âÁ≠âÔºåÂõ†Ê≠§Êàë‰ª¨Â∞ÜÂÖ®ÈÉ®‰ΩøÁî®Áâ©ÁêÜÂêçÁß∞</em>ÔºâÂ≠òÂÇ® 3 Áßç‰∏ªË¶ÅÁ±ªÂûãÁöÑÂÖÉÊï∞ÊçÆÔºåÂåÖÊã¨ÔºöÊñá‰ª∂Âíå Chunk ÁöÑÂëΩÂêçÁ©∫Èó¥„ÄÅÊñá‰ª∂Âíå Chunk ÁöÑÂØπÂ∫îÂÖ≥Á≥ª„ÄÅÊØè‰∏™ Chunk ÂâØÊú¨ÁöÑÂ≠òÊîæÂú∞ÁÇπ„ÄÇÊâÄÊúâÁöÑÂÖÉÊï∞ÊçÆÈÉΩ‰øùÂ≠òÂú® Master ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇÂâç‰∏§ÁßçÁ±ªÂûãÁöÑ <code>ÂÖÉÊï∞ÊçÆ</code>Ôºà<em>ÂÖÉÊï∞ÊçÆÔºöÂëΩÂêçÁ©∫Èó¥„ÄÅÊñá‰ª∂Âíå Chunk ÁöÑÂØπÂ∫îÂÖ≥Á≥ª</em>ÔºâÂêåÊó∂‰πü‰ºö‰ª•ËÆ∞ÂΩïÂèòÊõ¥Êó•ÂøóÁöÑÊñπÂºèËÆ∞ÂΩïÂú®Êìç‰ΩúÁ≥ªÁªüÁöÑÁ≥ªÁªüÊó•ÂøóÊñá‰ª∂‰∏≠ÔºåÊó•ÂøóÊñá‰ª∂Â≠òÂÇ®Âú®Êú¨Âú∞Á£ÅÁõò‰∏äÔºåÂêåÊó∂Êó•Âøó‰ºöË¢´Â§çÂà∂Âà∞ÂÖ∂ÂÆÉÁöÑËøúÁ®ãMasterÊúçÂä°Âô®‰∏ä„ÄÇÈááÁî®‰øùÂ≠òÂèòÊõ¥Êó•ÂøóÁöÑÊñπÂºèÔºåÊàë‰ª¨ËÉΩÂ§üÁÆÄÂçïÂèØÈù†ÁöÑÊõ¥Êñ∞ Master ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÔºåÂπ∂‰∏î‰∏çÁî®ÊãÖÂøÉ Master ÊúçÂä°Âô®Â¥©Ê∫ÉÂØºËá¥Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈ£éÈô©„ÄÇMaster ÊúçÂä°Âô®‰∏ç‰ºöÊåÅ‰πÖ‰øùÂ≠ò Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇMasterÊúçÂä°Âô®Âú®ÂêØÂä®Êó∂ÔºåÊàñËÄÖÊúâÊñ∞ÁöÑ Chunk ÊúçÂä°Âô®Âä†ÂÖ•Êó∂ÔºåÂêëÂêÑ‰∏™ Chunk ÊúçÂä°Âô®ËΩÆËØ¢ÂÆÉ‰ª¨ÊâÄÂ≠òÂÇ®ÁöÑ Chunk ÁöÑ‰ø°ÊÅØ„ÄÇ</p>
<h4 id="ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑ"><a href="#ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑ" class="headerlink" title="ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑ"></a>ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑ</h4><p>Âõ†‰∏∫ÂÖÉÊï∞ÊçÆ‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª• Master ÊúçÂä°Âô®ÁöÑÊìç‰ΩúÈÄüÂ∫¶ÈùûÂ∏∏Âø´„ÄÇÂπ∂‰∏îÔºåMaster ÊúçÂä°Âô®ÂèØ‰ª•Âú®ÂêéÂè∞ÁÆÄÂçïËÄåÈ´òÊïàÁöÑÂë®ÊúüÊÄßÊâ´ÊèèËá™Â∑±‰øùÂ≠òÁöÑÂÖ®ÈÉ®Áä∂ÊÄÅ‰ø°ÊÅØ„ÄÇËøôÁßçÂë®ÊúüÊÄßÁöÑÁä∂ÊÄÅÊâ´Êèè‰πüÁî®‰∫éÂÆûÁé∞ Chunk ÂûÉÂúæÊî∂ÈõÜ„ÄÅÂú® ChunkÊúçÂä°Âô®Â§±ÊïàÁöÑÊó∂ÈáçÊñ∞Â§çÂà∂Êï∞ÊçÆ„ÄÅÈÄöËøá Chunk ÁöÑËøÅÁßªÂÆûÁé∞Ë∑® Chunk ÊúçÂä°Âô®ÁöÑË¥üËΩΩÂùáË°°‰ª•ÂèäÁ£ÅÁõò‰ΩøÁî®Áä∂ÂÜµÁªüËÆ°Á≠âÂäüËÉΩ„ÄÇ4.3 Âíå 4.4 Á´†ËäÇÂ∞ÜÊ∑±ÂÖ•ËÆ®ËÆ∫Ëøô‰∫õË°å‰∏∫„ÄÇ</p>
<p>Â∞ÜÂÖÉÊï∞ÊçÆÂÖ®ÈÉ®‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÊñπÊ≥ïÊúâÊΩúÂú®ÈóÆÈ¢òÔºöChunk ÁöÑÊï∞Èáè‰ª•ÂèäÊï¥‰∏™Á≥ªÁªüÁöÑÊâøËΩΩËÉΩÂäõÈÉΩÂèóÈôê‰∫é MasterÊúçÂä°Âô®ÊâÄÊã•ÊúâÁöÑÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇ‰ΩÜÊòØÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøôÂπ∂‰∏çÊòØ‰∏Ä‰∏™‰∏•ÈáçÁöÑÈóÆÈ¢ò„ÄÇMaster ÊúçÂä°Âô®Âè™ÈúÄË¶Å‰∏çÂà∞ 64 ‰∏™Â≠óËäÇÁöÑÂÖÉÊï∞ÊçÆÂ∞±ËÉΩÂ§üÁÆ°ÁêÜ‰∏Ä‰∏™ 64MB ÁöÑ Chunk„ÄÇÁî±‰∫éÂ§ßÂ§öÊï∞Êñá‰ª∂ÈÉΩÂåÖÂê´Â§ö‰∏™ ChunkÔºåÂõ†Ê≠§ÁªùÂ§ßÂ§öÊï∞ Chunk ÈÉΩÊòØÊª°ÁöÑÔºåÈô§‰∫ÜÊñá‰ª∂ÁöÑÊúÄÂêé‰∏Ä‰∏™ Chunk ÊòØÈÉ®ÂàÜÂ°´ÂÖÖÁöÑ„ÄÇÂêåÊ†∑ÁöÑÔºåÊØè‰∏™Êñá‰ª∂ÁöÑÂú®ÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑÊï∞ÊçÆÂ§ßÂ∞èÈÄöÂ∏∏Âú® 64Â≠óËäÇ‰ª•‰∏ãÔºåÂõ†‰∏∫‰øùÂ≠òÁöÑÊñá‰ª∂ÂêçÊòØÁî®ÂâçÁºÄÂéãÁº©ÁÆóÊ≥ïÂéãÁº©ËøáÁöÑ„ÄÇ</p>
<p>Âç≥‰æøÊòØÈúÄË¶ÅÊîØÊåÅÊõ¥Â§ßÁöÑÊñá‰ª∂Á≥ªÁªüÔºå‰∏∫ Master ÊúçÂä°Âô®Â¢ûÂä†È¢ùÂ§ñÂÜÖÂ≠òÁöÑË¥πÁî®ÊòØÂæàÂ∞ëÁöÑÔºåËÄåÈÄöËøáÂ¢ûÂä†ÊúâÈôêÁöÑË¥πÁî®ÔºåÊàë‰ª¨Â∞±ËÉΩÂ§üÊääÂÖÉÊï∞ÊçÆÂÖ®ÈÉ®‰øùÂ≠òÂú®ÂÜÖÂ≠òÈáåÔºåÂ¢ûÂº∫‰∫ÜÁ≥ªÁªüÁöÑÁÆÄÊ¥ÅÊÄß„ÄÅÂèØÈù†ÊÄß„ÄÅÈ´òÊÄßËÉΩÂíåÁÅµÊ¥ªÊÄß„ÄÇ</p>
<h4 id="Chunk-‰ΩçÁΩÆ‰ø°ÊÅØ"><a href="#Chunk-‰ΩçÁΩÆ‰ø°ÊÅØ" class="headerlink" title="Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ"></a>Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ</h4><p>Master ÊúçÂä°Âô®Âπ∂‰∏ç‰øùÂ≠òÊåÅ‰πÖÂåñ‰øùÂ≠òÂì™‰∏™ Chunk ÊúçÂä°Âô®Â≠òÊúâÊåáÂÆö Chunk ÁöÑÂâØÊú¨ÁöÑ‰ø°ÊÅØ„ÄÇMaster ÊúçÂä°Âô®Âè™ÊòØÂú®ÂêØÂä®ÁöÑÊó∂ÂÄôËΩÆËØ¢ Chunk ÊúçÂä°Âô®‰ª•Ëé∑ÂèñËøô‰∫õ‰ø°ÊÅØ„ÄÇMaster ÊúçÂä°Âô®ËÉΩÂ§ü‰øùËØÅÂÆÉÊåÅÊúâÁöÑ‰ø°ÊÅØÂßãÁªàÊòØÊúÄÊñ∞ÁöÑÔºåÂõ†‰∏∫ÂÆÉÊéßÂà∂‰∫ÜÊâÄÊúâÁöÑ Chunk ‰ΩçÁΩÆÁöÑÂàÜÈÖçÔºåËÄå‰∏îÈÄöËøáÂë®ÊúüÊÄßÁöÑÂøÉË∑≥‰ø°ÊÅØÁõëÊéß Chunk ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<p>ÊúÄÂàùËÆæËÆ°Êó∂ÔºåÊàë‰ª¨ËØïÂõæÊää Chunk ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÊåÅ‰πÖÁöÑ‰øùÂ≠òÂú® Master ÊúçÂä°Âô®‰∏äÔºå‰ΩÜÊòØÂêéÊù•Êàë‰ª¨ÂèëÁé∞Âú®ÂêØÂä®ÁöÑÊó∂ÂÄôËΩÆËØ¢ Chunk ÊúçÂä°Âô®Ôºå‰πãÂêéÂÆöÊúüËΩÆËØ¢Êõ¥Êñ∞ÁöÑÊñπÂºèÊõ¥ÁÆÄÂçï„ÄÇËøôÁßçËÆæËÆ°ÁÆÄÂåñ‰∫ÜÂú®Êúâ Chunk ÊúçÂä°Âô®Âä†ÂÖ•ÈõÜÁæ§„ÄÅÁ¶ªÂºÄÈõÜÁæ§„ÄÅÊõ¥Âêç„ÄÅÂ§±Êïà„ÄÅ‰ª•ÂèäÈáçÂêØÁöÑÊó∂ÂÄôÔºåMaster ÊúçÂä°Âô®Âíå Chunk ÊúçÂä°Âô®Êï∞ÊçÆÂêåÊ≠•ÁöÑÈóÆÈ¢ò„ÄÇÂú®‰∏Ä‰∏™Êã•ÊúâÊï∞ÁôæÂè∞ÊúçÂä°Âô®ÁöÑÈõÜÁæ§‰∏≠ÔºåËøôÁ±ª‰∫ã‰ª∂‰ºöÈ¢ëÁπÅÁöÑÂèëÁîü„ÄÇ</p>
<p>ÂèØ‰ª•‰ªéÂè¶Â§ñ‰∏Ä‰∏™ËßíÂ∫¶ÂéªÁêÜËß£Ëøô‰∏™ËÆæËÆ°ÂÜ≥Á≠ñÔºöÂè™Êúâ Chunk ÊúçÂä°Âô®ÊâçËÉΩÊúÄÁªàÁ°ÆÂÆö‰∏Ä‰∏™ Chunk ÊòØÂê¶Âú®ÂÆÉÁöÑÁ°¨Áõò‰∏ä„ÄÇÊàë‰ª¨‰ªéÊ≤°ÊúâËÄÉËôëËøáÂú® Master ÊúçÂä°Âô®‰∏äÁª¥Êä§‰∏Ä‰∏™Ëøô‰∫õ‰ø°ÊÅØÁöÑÂÖ®Â±ÄËßÜÂõæÔºåÂõ†‰∏∫ Chunk ÊúçÂä°Âô®ÁöÑÈîôËØØÂèØËÉΩ‰ºöÂØºËá¥ Chunk Ëá™Âä®Ê∂àÂ§±(ÊØîÂ¶ÇÔºåÁ°¨ÁõòÊçüÂùè‰∫ÜÊàñËÄÖÊó†Ê≥ïËÆøÈóÆ‰∫Ü)Ôºå‰∫¶ÊàñËÄÖÊìç‰Ωú‰∫∫ÂëòÂèØËÉΩ‰ºöÈáçÂëΩÂêç‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®„ÄÇ</p>
<h4 id="Êìç‰ΩúÊó•Âøó"><a href="#Êìç‰ΩúÊó•Âøó" class="headerlink" title="Êìç‰ΩúÊó•Âøó"></a>Êìç‰ΩúÊó•Âøó</h4><p>Êìç‰ΩúÊó•ÂøóÂåÖÂê´‰∫ÜÂÖ≥ÈîÆÁöÑÂÖÉÊï∞ÊçÆÂèòÊõ¥ÂéÜÂè≤ËÆ∞ÂΩï„ÄÇËøôÂØπ GFS ÈùûÂ∏∏ÈáçË¶Å„ÄÇËøô‰∏ç‰ªÖ‰ªÖÊòØÂõ†‰∏∫Êìç‰ΩúÊó•ÂøóÊòØÂÖÉÊï∞ÊçÆÂîØ‰∏ÄÁöÑÊåÅ‰πÖÂåñÂ≠òÂÇ®ËÆ∞ÂΩïÔºåÂÆÉ‰πü‰Ωú‰∏∫Âà§Êñ≠ÂêåÊ≠•Êìç‰ΩúÈ°∫Â∫èÁöÑÈÄªËæëÊó∂Èó¥Âü∫Á∫ø(<em>‰πüÂ∞±ÊòØÈÄöËøáÈÄªËæëÊó•ÂøóÁöÑÂ∫èÂè∑‰Ωú‰∏∫Êìç‰ΩúÂèëÁîüÁöÑÈÄªËæëÊó∂Èó¥ÔºåÁ±ª‰ºº‰∫é‰∫ãÂä°Á≥ªÁªü‰∏≠ÁöÑ LSN</em>)„ÄÇÊñá‰ª∂Âíå ChunkÔºåËøûÂêåÂÆÉ‰ª¨ÁöÑÁâàÊú¨(ÂèÇËÄÉ4.5 ËäÇ)ÔºåÈÉΩÁî±ÂÆÉ‰ª¨ÂàõÂª∫ÁöÑÈÄªËæëÊó∂Èó¥ÂîØ‰∏ÄÁöÑ„ÄÅÊ∞∏‰πÖÁöÑÊ†áËØÜ„ÄÇ</p>
<p>Êìç‰ΩúÊó•ÂøóÈùûÂ∏∏ÈáçË¶ÅÔºåÊàë‰ª¨ÂøÖÈ°ªÁ°Æ‰øùÊó•ÂøóÊñá‰ª∂ÁöÑÂÆåÊï¥ÔºåÁ°Æ‰øùÂè™ÊúâÂú®ÂÖÉÊï∞ÊçÆÁöÑÂèòÂåñË¢´ÊåÅ‰πÖÂåñÂêéÔºåÊó•ÂøóÊâçÂØπÂÆ¢<br>Êà∑Á´ØÊòØÂèØËßÅÁöÑ„ÄÇÂê¶ÂàôÔºåÂç≥‰Ωø Chunk Êú¨Ë∫´Ê≤°ÊúâÂá∫Áé∞‰ªª‰ΩïÈóÆÈ¢òÔºåÊàë‰ª¨‰ªçÊúâÂèØËÉΩ‰∏¢Â§±Êï¥‰∏™Êñá‰ª∂Á≥ªÁªüÔºåÊàñËÄÖ‰∏¢Â§±ÂÆ¢Êà∑Á´ØÊúÄËøëÁöÑÊìç‰Ωú„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨‰ºöÊääÊó•ÂøóÂ§çÂà∂Âà∞Â§öÂè∞ËøúÁ®ãÊú∫Âô®ÔºåÂπ∂‰∏îÂè™ÊúâÊääÁõ∏Â∫îÁöÑÊó•ÂøóËÆ∞ÂΩïÂÜôÂÖ•Âà∞Êú¨Âú∞‰ª•ÂèäËøúÁ®ãÊú∫Âô®ÁöÑÁ°¨ÁõòÂêéÔºåÊâç‰ºöÂìçÂ∫îÂÆ¢Êà∑Á´ØÁöÑÊìç‰ΩúËØ∑Ê±Ç„ÄÇMaster ÊúçÂä°Âô®‰ºöÊî∂ÈõÜÂ§ö‰∏™Êó•ÂøóËÆ∞ÂΩïÂêéÊâπÈáèÂ§ÑÁêÜÔºå‰ª•ÂáèÂ∞ëÂÜôÂÖ•Á£ÅÁõòÂíåÂ§çÂà∂ÂØπÁ≥ªÁªüÊï¥‰ΩìÊÄßËÉΩÁöÑÂΩ±Âìç„ÄÇ</p>
<p>Master ÊúçÂä°Âô®Âú®ÁÅæÈöæÊÅ¢Â§çÊó∂ÔºåÈÄöËøáÈáçÊºîÊìç‰ΩúÊó•ÂøóÊääÊñá‰ª∂Á≥ªÁªüÊÅ¢Â§çÂà∞ÊúÄËøëÁöÑÁä∂ÊÄÅ„ÄÇ‰∏∫‰∫ÜÁº©Áü≠ Master ÂêØÂä®ÁöÑÊó∂Èó¥ÔºåÊàë‰ª¨ÂøÖÈ°ª‰ΩøÊó•ÂøóË∂≥Â§üÂ∞è(<em>Âç≥ÈáçÊºîÁ≥ªÁªüÊìç‰ΩúÁöÑÊó•ÂøóÈáèÂ∞ΩÈáèÁöÑÂ∞ë</em>)„ÄÇMaster ÊúçÂä°Âô®Âú®Êó•ÂøóÂ¢ûÈïøÂà∞‰∏ÄÂÆöÈáèÊó∂ÂØπÁ≥ªÁªüÁä∂ÊÄÅÂÅö‰∏ÄÊ¨° <code>Checkpoint</code>(<em>Checkpoint ÊòØ‰∏ÄÁßçË°å‰∏∫Ôºå‰∏ÄÁßçÂØπÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅ‰Ωú‰∏ÄÊ¨°Âø´ÁÖßÁöÑË°å‰∏∫</em>)ÔºåÂ∞ÜÊâÄÊúâÁöÑÁä∂ÊÄÅÊï∞ÊçÆÂÜôÂÖ•‰∏Ä‰∏™ Checkpoint Êñá‰ª∂(<em>Ê≥®ÔºöÂπ∂Âà†Èô§‰πãÂâçÁöÑÊó•ÂøóÊñá‰ª∂</em>)„ÄÇÂú®ÁÅæÈöæÊÅ¢Â§çÁöÑÊó∂ÂÄôÔºåMaster ÊúçÂä°Âô®Â∞±ÈÄöËøá‰ªéÁ£ÅÁõò‰∏äËØªÂèñËøô‰∏™Checkpoint Êñá‰ª∂Ôºå‰ª•ÂèäÈáçÊºî Checkpoint ‰πãÂêéÁöÑÊúâÈôê‰∏™Êó•ÂøóÊñá‰ª∂Â∞±ËÉΩÂ§üÊÅ¢Â§çÁ≥ªÁªü„ÄÇCheckpoint Êñá‰ª∂‰ª•ÂéãÁº© B-Ê†ëÂΩ¢ÂäøÁöÑÊï∞ÊçÆÁªìÊûÑÂ≠òÂÇ®ÔºåÂèØ‰ª•Áõ¥Êé•Êò†Â∞ÑÂà∞ÂÜÖÂ≠òÔºåÂú®Áî®‰∫éÂëΩÂêçÁ©∫Èó¥Êü•ËØ¢Êó∂Êó†ÈúÄÈ¢ùÂ§ñÁöÑËß£Êûê„ÄÇËøôÂ§ßÂ§ßÊèêÈ´ò‰∫ÜÊÅ¢Â§çÈÄüÂ∫¶ÔºåÂ¢ûÂº∫‰∫ÜÂèØÁî®ÊÄß„ÄÇ</p>
<p>Áî±‰∫éÂàõÂª∫‰∏Ä‰∏™ Checkpoint Êñá‰ª∂ÈúÄË¶Å‰∏ÄÂÆöÁöÑÊó∂Èó¥ÔºåÊâÄ‰ª• Master ÊúçÂä°Âô®ÁöÑÂÜÖÈÉ®Áä∂ÊÄÅË¢´ÁªÑÁªá‰∏∫‰∏ÄÁßçÊ†ºÂºèÔºåËøôÁßçÊ†ºÂºèË¶ÅÁ°Æ‰øùÂú® Checkpoint ËøáÁ®ã‰∏≠‰∏ç‰ºöÈòªÂ°ûÊ≠£Âú®ËøõË°åÁöÑ‰øÆÊîπÊìç‰Ωú„ÄÇMaster ÊúçÂä°Âô®‰ΩøÁî®Áã¨Á´ãÁöÑÁ∫øÁ®ãÂàáÊç¢Âà∞Êñ∞ÁöÑÊó•ÂøóÊñá‰ª∂ÂíåÂàõÂª∫Êñ∞ÁöÑ Checkpoint Êñá‰ª∂„ÄÇÊñ∞ÁöÑ Checkpoint Êñá‰ª∂ÂåÖÊã¨ÂàáÊç¢ÂâçÊâÄÊúâÁöÑ‰øÆÊîπ„ÄÇÂØπ‰∫é‰∏Ä‰∏™ÂåÖÂê´Êï∞Áôæ‰∏á‰∏™Êñá‰ª∂ÁöÑÈõÜÁæ§ÔºåÂàõÂª∫‰∏Ä‰∏™ Checkpoint Êñá‰ª∂ÈúÄË¶Å 1 ÂàÜÈíüÂ∑¶Âè≥ÁöÑÊó∂Èó¥„ÄÇÂàõÂª∫ÂÆåÊàêÂêéÔºåCheckpoint Êñá‰ª∂‰ºöË¢´ÂÜôÂÖ•Âú®Êú¨Âú∞ÂíåËøúÁ®ãÁöÑÁ°¨ÁõòÈáå„ÄÇ</p>
<p>Master ÊúçÂä°Âô®ÊÅ¢Â§çÂè™ÈúÄË¶ÅÊúÄÊñ∞ÁöÑ Checkpoint Êñá‰ª∂ÂíåÂêéÁª≠ÁöÑÊó•ÂøóÊñá‰ª∂„ÄÇÊóßÁöÑ Checkpoint Êñá‰ª∂ÂíåÊó•ÂøóÊñá‰ª∂ÂèØ‰ª•Ë¢´Âà†Èô§Ôºå‰ΩÜÊòØ‰∏∫‰∫ÜÂ∫îÂØπ<code>ÁÅæÈöæÊÄßÁöÑÊïÖÈöú</code>(<em>catastrophesÔºåÊï∞ÊçÆÂ§á‰ªΩÁõ∏ÂÖ≥ÊñáÊ°£‰∏≠ÁªèÂ∏∏‰ºöÈÅáÂà∞Ëøô‰∏™ËØçÔºåË°®Á§∫‰∏ÄÁßçË∂ÖÂá∫È¢ÑÊúüËåÉÂõ¥ÁöÑÁÅæÈöæÊÄß‰∫ã‰ª∂</em>)ÔºåÊàë‰ª¨ÈÄöÂ∏∏‰ºöÂ§ö‰øùÂ≠ò‰∏Ä‰∫õÂéÜÂè≤Êñá‰ª∂„ÄÇCheckpoint Â§±Ë¥•‰∏ç‰ºöÂØπÊ≠£Á°ÆÊÄß‰∫ßÁîü‰ªª‰ΩïÂΩ±ÂìçÔºåÂõ†‰∏∫ÊÅ¢Â§çÂäüËÉΩÁöÑ‰ª£Á†ÅÂèØ‰ª•Ê£ÄÊµãÂπ∂Ë∑≥ËøáÊ≤°ÊúâÂÆåÊàêÁöÑ Checkpoint Êñá‰ª∂„ÄÇ</p>
<h3 id="‰∏ÄËá¥ÊÄßÊ®°Âûã"><a href="#‰∏ÄËá¥ÊÄßÊ®°Âûã" class="headerlink" title="‰∏ÄËá¥ÊÄßÊ®°Âûã"></a>‰∏ÄËá¥ÊÄßÊ®°Âûã</h3><p>GFS ÊîØÊåÅ‰∏Ä‰∏™ÂÆΩÊùæÁöÑ‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºåËøô‰∏™Ê®°ÂûãËÉΩÂ§üÂæàÂ•ΩÁöÑÊîØÊíëÊàë‰ª¨ÁöÑÈ´òÂ∫¶ÂàÜÂ∏ÉÁöÑÂ∫îÁî®ÔºåÂêåÊó∂Ëøò‰øùÊåÅ‰∫ÜÁõ∏ÂØπÁÆÄÂçï‰∏îÂÆπÊòìÂÆûÁé∞ÁöÑ‰ºòÁÇπ„ÄÇÊú¨ËäÇÊàë‰ª¨ËÆ®ËÆ∫ GFS ÁöÑ‰∏ÄËá¥ÊÄßÁöÑ‰øùÈöúÊú∫Âà∂Ôºå‰ª•ÂèäÂØπÂ∫îÁî®Á®ãÂ∫èÁöÑÊÑè‰πâ„ÄÇÊàë‰ª¨‰πüÁùÄÈáçÊèèËø∞‰∫Ü GFS Â¶Ç‰ΩïÁÆ°ÁêÜËøô‰∫õ‰∏ÄËá¥ÊÄß‰øùÈöúÊú∫Âà∂Ôºå‰ΩÜÊòØÂÆûÁé∞ÁöÑÁªÜËäÇÂ∞ÜÂú®Êú¨ËÆ∫ÊñáÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜËÆ®ËÆ∫„ÄÇ</p>
<h4 id="GFS-‰∏ÄËá¥ÊÄß‰øùÈöúÊú∫Âà∂"><a href="#GFS-‰∏ÄËá¥ÊÄß‰øùÈöúÊú∫Âà∂" class="headerlink" title="GFS ‰∏ÄËá¥ÊÄß‰øùÈöúÊú∫Âà∂"></a>GFS ‰∏ÄËá¥ÊÄß‰øùÈöúÊú∫Âà∂</h4><p>Êñá‰ª∂ÂëΩÂêçÁ©∫Èó¥ÁöÑ‰øÆÊîπÔºà‰æãÂ¶ÇÔºåÊñá‰ª∂ÂàõÂª∫ÔºâÊòØÂéüÂ≠êÊÄßÁöÑ„ÄÇÂÆÉ‰ª¨‰ªÖÁî± Master ËäÇÁÇπÁöÑÊéßÂà∂ÔºöÂëΩÂêçÁ©∫Èó¥ÈîÅÊèê‰æõ‰∫ÜÂéüÂ≠êÊÄßÂíåÊ≠£Á°ÆÊÄßÔºà4.1 Á´†ÔºâÁöÑ‰øùÈöúÔºõMaster ËäÇÁÇπÁöÑÊìç‰ΩúÊó•ÂøóÂÆö‰πâ‰∫ÜËøô‰∫õÊìç‰ΩúÂú®ÂÖ®Â±ÄÁöÑÈ°∫Â∫èÔºà2.6.3 Á´†Ôºâ„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15132311656905.jpg" alt><br>Êï∞ÊçÆ‰øÆÊîπÂêéÊñá‰ª∂ regionÁöÑÁä∂ÊÄÅÂèñÂÜ≥‰∫éÊìç‰ΩúÁöÑÁ±ªÂûã„ÄÅÊàêÂäü‰∏éÂê¶„ÄÅ‰ª•ÂèäÊòØÂê¶ÂêåÊ≠•‰øÆÊîπ„ÄÇË°® 1 ÊÄªÁªì‰∫ÜÂêÑÁßçÊìç‰ΩúÁöÑÁªìÊûú„ÄÇ</p>
<p>Â¶ÇÊûúÊâÄÊúâÂÆ¢Êà∑Á´ØÔºåÊó†ËÆ∫‰ªéÂì™‰∏™ÂâØÊú¨ËØªÂèñÔºåËØªÂà∞ÁöÑÊï∞ÊçÆÈÉΩ‰∏ÄÊ†∑ÔºåÈÇ£‰πàÊàë‰ª¨ËÆ§‰∏∫Êñá‰ª∂ region ÊòØ‚Äú‰∏ÄËá¥ÁöÑ‚ÄùÔºõÂ¶ÇÊûúÂØπÊñá‰ª∂ÁöÑÊï∞ÊçÆ‰øÆÊîπ‰πãÂêéÔºåregion ÊòØ‰∏ÄËá¥ÁöÑÔºåÂπ∂‰∏îÂÆ¢Êà∑Á´ØËÉΩÂ§üÁúãÂà∞ÂÜôÂÖ•Êìç‰ΩúÂÖ®ÈÉ®ÁöÑÂÜÖÂÆπÔºåÈÇ£‰πàËøô‰∏™ regionÊòØ‚ÄúÂ∑≤ÂÆö‰πâÁöÑ‚Äù„ÄÇ</p>
<p>ÂΩì‰∏Ä‰∏™Êï∞ÊçÆ‰øÆÊîπÊìç‰ΩúÊàêÂäüÊâßË°åÔºåÂπ∂‰∏îÊ≤°ÊúâÂèóÂà∞ÂêåÊó∂ÊâßË°åÁöÑÂÖ∂ÂÆÉÂÜôÂÖ•Êìç‰ΩúÁöÑÂπ≤Êâ∞ÔºåÈÇ£‰πàÂΩ±ÂìçÁöÑ region Â∞±ÊòØÂ∑≤ÂÆö‰πâÁöÑÔºàÈöêÂê´‰∫Ü‰∏ÄËá¥ÊÄßÔºâÔºöÊâÄÊúâÁöÑÂÆ¢Êà∑Á´ØÈÉΩÂèØ‰ª•ÁúãÂà∞ÂÜôÂÖ•ÁöÑÂÜÖÂÆπ„ÄÇÂπ∂Ë°å‰øÆÊîπÊìç‰ΩúÊàêÂäüÂÆåÊàê‰πãÂêéÔºåregion Â§Ñ‰∫é‰∏ÄËá¥ÁöÑ„ÄÅÊú™ÂÆö‰πâÁöÑÁä∂ÊÄÅÔºöÊâÄÊúâÁöÑÂÆ¢Êà∑Á´ØÁúãÂà∞ÂêåÊ†∑ÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØÊó†Ê≥ïËØªÂà∞‰ªª‰Ωï‰∏ÄÊ¨°ÂÜôÂÖ•Êìç‰ΩúÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊñá‰ª∂ region ÂÜÖÂåÖÂê´‰∫ÜÊù•Ëá™Â§ö‰∏™‰øÆÊîπÊìç‰ΩúÁöÑ„ÄÅÊ∑∑ÊùÇÁöÑÊï∞ÊçÆÁâáÊÆµ„ÄÇÂ§±Ë¥•ÁöÑ‰øÆÊîπÊìç‰ΩúÂØºËá¥‰∏Ä‰∏™ region Â§Ñ‰∫é‰∏ç‰∏ÄËá¥Áä∂ÊÄÅÔºàÂêåÊó∂‰πüÊòØÊú™ÂÆö‰πâÁöÑÔºâÔºö‰∏çÂêåÁöÑÂÆ¢Êà∑Âú®‰∏çÂêåÁöÑÊó∂Èó¥‰ºöÁúãÂà∞‰∏çÂêåÁöÑÊï∞ÊçÆ„ÄÇÂêéÈù¢Êàë‰ª¨Â∞ÜÊèèËø∞Â∫îÁî®Â¶Ç‰ΩïÂå∫ÂàÜÂ∑≤ÂÆö‰πâÂíåÊú™ÂÆö‰πâÁöÑ region„ÄÇÂ∫îÁî®Á®ãÂ∫èÊ≤°ÊúâÂøÖË¶ÅÂÜçÂéªÁªÜÂàÜÊú™ÂÆö‰πâ region ÁöÑ‰∏çÂêåÁ±ªÂûã„ÄÇ</p>
<p>Êï∞ÊçÆ‰øÆÊîπÊìç‰ΩúÂàÜ‰∏∫ÂÜôÂÖ•ÊàñËÄÖËÆ∞ÂΩïËøΩÂä†‰∏§Áßç„ÄÇÂÜôÂÖ•Êìç‰ΩúÊääÊï∞ÊçÆÂÜôÂú®Â∫îÁî®Á®ãÂ∫èÊåáÂÆöÁöÑÊñá‰ª∂ÂÅèÁßª‰ΩçÁΩÆ‰∏ä„ÄÇÂç≥‰Ωø<br>ÊúâÂ§ö‰∏™‰øÆÊîπÊìç‰ΩúÂπ∂Ë°åÊâßË°åÊó∂ÔºåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúËá≥Â∞ëÂèØ‰ª•ÊääÊï∞ÊçÆÂéüÂ≠êÊÄßÁöÑËøΩÂä†Âà∞Êñá‰ª∂‰∏≠‰∏ÄÊ¨°Ôºå‰ΩÜÊòØÂÅèÁßª‰ΩçÁΩÆÊòØÁî±GFS ÈÄâÊã©ÁöÑÔºà3.3 Á´†Ôºâ(<em>ËøôÂè•ËØùÊúâÁÇπË¥πËß£ÔºåÂÖ∂Âê´‰πâÊòØÊâÄÊúâÁöÑËøΩÂä†ÂÜôÂÖ•ÈÉΩ‰ºöÊàêÂäüÔºå‰ΩÜÊòØÊúâÂèØËÉΩË¢´ÊâßË°å‰∫ÜÂ§öÊ¨°ÔºåËÄå‰∏îÊØèÊ¨°ËøΩÂä†ÁöÑÊñá‰ª∂ÂÅèÁßªÈáèÁî± GFS Ëá™Â∑±ËÆ°ÁÆó„ÄÇÁõ∏ÊØîËÄåË®ÄÔºåÈÄöÂ∏∏ËØ¥ÁöÑËøΩÂä†Êìç‰ΩúÂÜôÁöÑÂÅèÁßª‰ΩçÁΩÆÊòØÊñá‰ª∂ÁöÑÂ∞æÈÉ®</em>)„ÄÇGFS ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø‰∏Ä‰∏™ÂÅèÁßªÈáèÔºåË°®Á§∫‰∫ÜÂåÖÂê´‰∫ÜÂÜôÂÖ•ËÆ∞ÂΩïÁöÑ„ÄÅÂ∑≤ÂÆö‰πâÁöÑ region ÁöÑËµ∑ÁÇπ„ÄÇÂè¶Â§ñÔºåGFS ÂèØËÉΩ‰ºöÂú®Êñá‰ª∂‰∏≠Èó¥ÊèíÂÖ•Â°´ÂÖÖÊï∞ÊçÆÊàñËÄÖÈáçÂ§çËÆ∞ÂΩï„ÄÇËøô‰∫õÊï∞ÊçÆÂç†ÊçÆÁöÑÊñá‰ª∂ region Ë¢´ËÆ§ÂÆöÊòØ‰∏ç‰∏ÄËá¥ÁöÑÔºåËøô‰∫õÊï∞ÊçÆÈÄöÂ∏∏ÊØîÁî®Êà∑Êï∞ÊçÆÂ∞èÁöÑÂ§ö„ÄÇ</p>
<p>ÁªèËøá‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÊàêÂäüÁöÑ‰øÆÊîπÊìç‰Ωú‰πãÂêéÔºåGFS Á°Æ‰øùË¢´‰øÆÊîπÁöÑÊñá‰ª∂ region ÊòØÂ∑≤ÂÆö‰πâÁöÑÔºåÂπ∂‰∏îÂåÖÂê´ÊúÄÂêé‰∏ÄÊ¨°‰øÆÊîπÊìç‰ΩúÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇGFS ÈÄöËøá‰ª•‰∏ãÊé™ÊñΩÁ°Æ‰øù‰∏äËø∞Ë°å‰∏∫ÔºöÔºàaÔºâ ÂØπ Chunk ÁöÑÊâÄÊúâÂâØÊú¨ÁöÑ‰øÆÊîπÊìç‰ΩúÈ°∫Â∫è‰∏ÄËá¥Ôºà3.1Á´†ÔºâÔºåÔºàbÔºâ‰ΩøÁî® Chunk ÁöÑÁâàÊú¨Âè∑Êù•Ê£ÄÊµãÂâØÊú¨ÊòØÂê¶Âõ†‰∏∫ÂÆÉÊâÄÂú®ÁöÑ Chunk ÊúçÂä°Âô®ÂÆïÊú∫Ôºà4.5 Á´†ÔºâËÄåÈîôËøá‰∫Ü‰øÆÊîπÊìç‰ΩúËÄåÂØºËá¥ÂÖ∂Â§±Êïà„ÄÇÂ§±ÊïàÁöÑÂâØÊú¨‰∏ç‰ºöÂÜçËøõË°å‰ªª‰Ωï‰øÆÊîπÊìç‰ΩúÔºåMaster ÊúçÂä°Âô®‰πü‰∏çÂÜçËøîÂõûËøô‰∏™ Chunk ÂâØÊú¨ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÁªôÂÆ¢Êà∑Á´Ø„ÄÇÂÆÉ‰ª¨‰ºöË¢´ÂûÉÂúæÊî∂ÈõÜÁ≥ªÁªüÂ∞ΩÂø´ÂõûÊî∂„ÄÇ</p>
<p>Áî±‰∫é Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ‰ºöË¢´ÂÆ¢Êà∑Á´ØÁºìÂ≠òÔºåÊâÄ‰ª•Âú®‰ø°ÊÅØÂà∑Êñ∞ÂâçÔºåÂÆ¢Êà∑Á´ØÊúâÂèØËÉΩ‰ªé‰∏Ä‰∏™Â§±ÊïàÁöÑÂâØÊú¨ËØªÂèñ‰∫ÜÊï∞ÊçÆ„ÄÇÂú®ÁºìÂ≠òÁöÑË∂ÖÊó∂Êó∂Èó¥ÂíåÊñá‰ª∂‰∏ã‰∏ÄÊ¨°Ë¢´ÊâìÂºÄÁöÑÊó∂Èó¥‰πãÈó¥Â≠òÂú®‰∏Ä‰∏™Êó∂Èó¥Á™óÔºåÊñá‰ª∂ÂÜçÊ¨°Ë¢´ÊâìÂºÄÂêé‰ºöÊ∏ÖÈô§ÁºìÂ≠ò‰∏≠‰∏éËØ•Êñá‰ª∂ÊúâÂÖ≥ÁöÑÊâÄÊúâ Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇËÄå‰∏îÔºåÁî±‰∫éÊàë‰ª¨ÁöÑÊñá‰ª∂Â§ßÂ§öÊï∞ÈÉΩÊòØÂè™ËøõË°åËøΩÂä†Êìç‰ΩúÁöÑÔºåÊâÄ‰ª•Ôºå‰∏Ä‰∏™Â§±ÊïàÁöÑÂâØÊú¨ÈÄöÂ∏∏ËøîÂõû‰∏Ä‰∏™ÊèêÂâçÁªìÊùüÁöÑ Chunk ËÄå‰∏çÊòØËøáÊúüÁöÑÊï∞ÊçÆ„ÄÇÂΩì‰∏Ä‰∏™ Reader(<em>Êú¨Êñá‰∏≠Â∞ÜÁî®Âà∞‰∏§‰∏™‰∏ìÊúâÂêçËØçÔºåReader Âíå WriterÔºåÂàÜÂà´Ë°®Á§∫ÊâßË°å GFS ËØªÂèñÂíåÂÜôÂÖ•Êìç‰ΩúÁöÑÁ®ãÂ∫è</em>)ÈáçÊñ∞Â∞ùËØïÂπ∂ËÅîÁªú Master ÊúçÂä°Âô®Êó∂ÔºåÂÆÉÂ∞±‰ºöÁ´ãÂàªÂæóÂà∞ÊúÄÊñ∞ÁöÑ Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇ</p>
<p>Âç≥‰ΩøÂú®‰øÆÊîπÊìç‰ΩúÊàêÂäüÊâßË°åÂæàÈïøÊó∂Èó¥‰πãÂêéÔºåÁªÑ‰ª∂ÁöÑÂ§±Êïà‰πüÂèØËÉΩÊçüÂùèÊàñËÄÖÂà†Èô§Êï∞ÊçÆ„ÄÇGFS ÈÄöËøá Master ÊúçÂä°Âô®ÂíåÊâÄÊúâ Chunk ÊúçÂä°Âô®ÁöÑÂÆöÊúü‚ÄúÊè°Êâã‚ÄùÊù•ÊâæÂà∞Â§±ÊïàÁöÑ Chunk ÊúçÂä°Âô®ÔºåÂπ∂‰∏î‰ΩøÁî® Checksum Êù•Ê†°È™åÊï∞ÊçÆÊòØÂê¶ÊçüÂùèÔºà5.2 Á´†Ôºâ„ÄÇ‰∏ÄÊó¶ÂèëÁé∞ÈóÆÈ¢òÔºåÊï∞ÊçÆË¶ÅÂ∞ΩÂø´Âà©Áî®ÊúâÊïàÁöÑÂâØÊú¨ËøõË°åÊÅ¢Â§çÔºà4.3 Á´†Ôºâ„ÄÇÂè™ÊúâÂΩì‰∏Ä‰∏™ Chunk ÁöÑÊâÄÊúâÂâØÊú¨Âú® GFS Ê£ÄÊµãÂà∞ÈîôËØØÂπ∂ÈááÂèñÂ∫îÂØπÊé™ÊñΩ‰πãÂâçÂÖ®ÈÉ®‰∏¢Â§±ÔºåËøô‰∏™ Chunk Êâç‰ºö‰∏çÂèØÈÄÜËΩ¨ÁöÑ‰∏¢Â§±„ÄÇÂú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã GFS ÁöÑÂèçÂ∫îÊó∂Èó¥(<em>Êåá Master ËäÇÁÇπÊ£ÄÊµãÂà∞ÈîôËØØÂπ∂ÈááÂèñÂ∫îÂØπÊé™ÊñΩ</em>)ÊòØÂá†ÂàÜÈíü„ÄÇÂç≥‰ΩøÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåChunk ‰πüÂè™ÊòØ‰∏çÂèØÁî®‰∫ÜÔºåËÄå‰∏çÊòØÊçüÂùè‰∫ÜÔºöÂ∫îÁî®Á®ãÂ∫è‰ºöÊî∂Âà∞ÊòéÁ°ÆÁöÑÈîôËØØ‰ø°ÊÅØËÄå‰∏çÊòØÊçüÂùèÁöÑÊï∞ÊçÆ„ÄÇ</p>
<h4 id="Á®ãÂ∫èÁöÑÂÆûÁé∞"><a href="#Á®ãÂ∫èÁöÑÂÆûÁé∞" class="headerlink" title="Á®ãÂ∫èÁöÑÂÆûÁé∞"></a>Á®ãÂ∫èÁöÑÂÆûÁé∞</h4><p>‰ΩøÁî® GFS ÁöÑÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•Âà©Áî®‰∏Ä‰∫õÁÆÄÂçïÊäÄÊúØÂÆûÁé∞Ëøô‰∏™ÂÆΩÊùæÁöÑ‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºåËøô‰∫õÊäÄÊúØ‰πüÁî®Êù•ÂÆûÁé∞‰∏Ä‰∫õÂÖ∂ÂÆÉÁöÑÁõÆÊ†áÂäüËÉΩÔºåÂåÖÊã¨ÔºöÂ∞ΩÈáèÈááÁî®ËøΩÂä†ÂÜôÂÖ•ËÄå‰∏çÊòØË¶ÜÁõñÔºåCheckpointÔºåËá™È™åËØÅÁöÑÂÜôÂÖ•Êìç‰ΩúÔºåËá™Ê†áËØÜÁöÑËÆ∞ÂΩï„ÄÇ</p>
<p>Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÊàë‰ª¨ÊâÄÊúâÁöÑÂ∫îÁî®Á®ãÂ∫èÂØπÊñá‰ª∂ÁöÑÂÜôÂÖ•Êìç‰ΩúÈÉΩÊòØÂ∞ΩÈáèÈááÁî®Êï∞ÊçÆËøΩÂä†ÊñπÂºèÔºåËÄå‰∏çÊòØË¶ÜÁõñÊñπÂºè„ÄÇ<br>‰∏ÄÁßçÂÖ∏ÂûãÁöÑÂ∫îÁî®ÔºåÂ∫îÁî®Á®ãÂ∫è‰ªéÂ§¥Âà∞Â∞æÂÜôÂÖ•Êï∞ÊçÆÔºåÁîüÊàê‰∫Ü‰∏Ä‰∏™Êñá‰ª∂„ÄÇÂÜôÂÖ•ÊâÄÊúâÊï∞ÊçÆ‰πãÂêéÔºåÂ∫îÁî®Á®ãÂ∫èËá™Âä®Â∞ÜÊñá‰ª∂ÊîπÂêç‰∏∫‰∏Ä‰∏™Ê∞∏‰πÖ‰øùÂ≠òÁöÑÊñá‰ª∂ÂêçÔºåÊàñËÄÖÂë®ÊúüÊÄßÁöÑ‰Ωú CheckpointÔºåËÆ∞ÂΩïÊàêÂäüÂÜôÂÖ•‰∫ÜÂ§öÂ∞ëÊï∞ÊçÆ„ÄÇCheckpoint Êñá‰ª∂ÂèØ‰ª•ÂåÖÂê´Á®ãÂ∫èÁ∫ßÂà´ÁöÑÊ†°È™åÂíå„ÄÇReaders ‰ªÖÊ†°È™åÂπ∂Â§ÑÁêÜ‰∏ä‰∏™ Checkpoint ‰πãÂêé‰∫ßÁîüÁöÑÊñá‰ª∂ regionÔºåËøô‰∫õÊñá‰ª∂ region ÁöÑÁä∂ÊÄÅ‰∏ÄÂÆöÊòØÂ∑≤ÂÆö‰πâÁöÑ„ÄÇËøô‰∏™ÊñπÊ≥ïÊª°Ë∂≥‰∫ÜÊàë‰ª¨‰∏ÄËá¥ÊÄßÂíåÂπ∂ÂèëÂ§ÑÁêÜÁöÑË¶ÅÊ±Ç„ÄÇËøΩÂä†ÂÜôÂÖ•ÊØîÈöèÊú∫‰ΩçÁΩÆÂÜôÂÖ•Êõ¥Âä†ÊúâÊïàÁéáÔºåÂØπÂ∫îÁî®Á®ãÂ∫èÁöÑÂ§±Ë¥•Â§ÑÁêÜÊõ¥ÂÖ∑ÊúâÂºπÊÄß„ÄÇCheckpoint ÂèØ‰ª•ËÆ© Writer ‰ª•Ê∏êËøõÁöÑÊñπÂºèÈáçÊñ∞ÂºÄÂßãÔºåÂπ∂‰∏îÂèØ‰ª•Èò≤Ê≠¢ ReaderÂ§ÑÁêÜÂ∑≤ÁªèË¢´ÊàêÂäüÂÜôÂÖ•Ôºå‰ΩÜÊòØ‰ªéÂ∫îÁî®Á®ãÂ∫èÁöÑËßíÂ∫¶Êù•ÁúãËøòÂπ∂Êú™ÂÆåÊàêÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>Êàë‰ª¨ÂÜçÊù•ÂàÜÊûêÂè¶‰∏ÄÁßçÂÖ∏ÂûãÁöÑÂ∫îÁî®„ÄÇËÆ∏Â§öÂ∫îÁî®Á®ãÂ∫èÂπ∂Ë°åÁöÑËøΩÂä†Êï∞ÊçÆÂà∞Âêå‰∏Ä‰∏™Êñá‰ª∂ÔºåÊØîÂ¶ÇËøõË°åÁªìÊûúÁöÑÂêàÂπ∂Êàñ<br>ËÄÖÊòØ‰∏Ä‰∏™Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÈòüÂàó„ÄÇËÆ∞ÂΩïËøΩÂä†ÊñπÂºèÁöÑ‚ÄúËá≥Â∞ë‰∏ÄÊ¨°ËøΩÂä†‚ÄùÁöÑÁâπÊÄß‰øùËØÅ‰∫Ü Writer ÁöÑËæìÂá∫„ÄÇReaders ‰ΩøÁî®‰∏ãÈù¢ÁöÑÊñπÊ≥ïÊù•Â§ÑÁêÜÂÅ∂ÁÑ∂ÊÄßÁöÑÂ°´ÂÖÖÊï∞ÊçÆÂíåÈáçÂ§çÂÜÖÂÆπ„ÄÇWriters Âú®ÊØèÊù°ÂÜôÂÖ•ÁöÑËÆ∞ÂΩï‰∏≠ÈÉΩÂåÖÂê´‰∫ÜÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÔºå‰æãÂ¶ÇChecksumÔºåÁî®Êù•È™åËØÅÂÆÉÁöÑÊúâÊïàÊÄß„ÄÇReader ÂèØ‰ª•Âà©Áî® Checksum ËØÜÂà´ÂíåÊäõÂºÉÈ¢ùÂ§ñÁöÑÂ°´ÂÖÖÊï∞ÊçÆÂíåËÆ∞ÂΩïÁâáÊÆµ„ÄÇÂ¶ÇÊûúÂ∫îÁî®‰∏çËÉΩÂÆπÂøçÂÅ∂Â∞îÁöÑÈáçÂ§çÂÜÖÂÆπ(ÊØîÂ¶ÇÔºåÂ¶ÇÊûúËøô‰∫õÈáçÂ§çÊï∞ÊçÆËß¶Âèë‰∫ÜÈùûÂπÇÁ≠âÊìç‰Ωú)ÔºåÂèØ‰ª•Áî®ËÆ∞ÂΩïÁöÑÂîØ‰∏ÄÊ†áËØÜÁ¨¶Êù•ËøáÊª§ÂÆÉ‰ª¨ÔºåËøô‰∫õÂîØ‰∏ÄÊ†áËØÜÁ¨¶ÈÄöÂ∏∏Áî®‰∫éÂëΩÂêçÁ®ãÂ∫è‰∏≠Â§ÑÁêÜÁöÑÂÆû‰ΩìÂØπË±°Ôºå‰æãÂ¶Ç web ÊñáÊ°£„ÄÇËøô‰∫õËÆ∞ÂΩï I/O ÂäüËÉΩ(<em>These functionalities for record I/OÔºåÈô§‰∫ÜÂâîÈô§ÈáçÂ§çÊï∞ÊçÆÁöÑÂäüËÉΩ</em>)ÈÉΩÂåÖÂê´Âú®Êàë‰ª¨ÁöÑÁ®ãÂ∫èÂÖ±‰∫´ÁöÑÂ∫ì‰∏≠ÔºåÂπ∂‰∏îÈÄÇÁî®‰∫é Google ÂÜÖÈÉ®ÁöÑÂÖ∂ÂÆÉÁöÑÊñá‰ª∂Êé•Âè£ÂÆûÁé∞„ÄÇÊâÄ‰ª•ÔºåÁõ∏ÂêåÂ∫èÂàóÁöÑËÆ∞ÂΩïÔºåÂä†‰∏ä‰∏Ä‰∫õÂÅ∂Â∞îÂá∫Áé∞ÁöÑÈáçÂ§çÊï∞ÊçÆÔºåÈÉΩË¢´ÂàÜÂèëÂà∞ Reader ‰∫Ü„ÄÇ<br> <div class="note info"><h2 id="Á≥ªÁªü‰∫§‰∫í"><a href="#Á≥ªÁªü‰∫§‰∫í" class="headerlink" title="Á≥ªÁªü‰∫§‰∫í"></a>Á≥ªÁªü‰∫§‰∫í</h2></div><br>Êàë‰ª¨Âú®ËÆæËÆ°Ëøô‰∏™Á≥ªÁªüÊó∂Ôºå‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂéüÂàôÊòØÊúÄÂ∞èÂåñÊâÄÊúâÊìç‰ΩúÂíå Master ËäÇÁÇπÁöÑ‰∫§‰∫í„ÄÇÂ∏¶ÁùÄËøôÊ†∑ÁöÑËÆæËÆ°ÁêÜÂøµÔºåÊàë‰ª¨Áé∞Âú®ÊèèËø∞‰∏Ä‰∏ãÂÆ¢Êà∑Êú∫„ÄÅMaster ÊúçÂä°Âô®Âíå Chunk ÊúçÂä°Âô®Â¶Ç‰ΩïËøõË°å‰∫§‰∫íÔºå‰ª•ÂÆûÁé∞Êï∞ÊçÆ‰øÆÊîπÊìç‰Ωú„ÄÅÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†Êìç‰Ωú‰ª•ÂèäÂø´ÁÖßÂäüËÉΩ„ÄÇ</p>
<h3 id="ÁßüÁ∫¶ÔºàleaseÔºâÂíåÂèòÊõ¥È°∫Â∫è"><a href="#ÁßüÁ∫¶ÔºàleaseÔºâÂíåÂèòÊõ¥È°∫Â∫è" class="headerlink" title="ÁßüÁ∫¶ÔºàleaseÔºâÂíåÂèòÊõ¥È°∫Â∫è"></a>ÁßüÁ∫¶ÔºàleaseÔºâÂíåÂèòÊõ¥È°∫Â∫è</h3><p>ÂèòÊõ¥ÊòØ‰∏Ä‰∏™‰ºöÊîπÂèò Chunk ÂÜÖÂÆπÊàñËÄÖÂÖÉÊï∞ÊçÆÁöÑÊìç‰ΩúÔºåÊØîÂ¶ÇÂÜôÂÖ•Êìç‰ΩúÊàñËÄÖËÆ∞ÂΩïËøΩÂä†Êìç‰Ωú„ÄÇÂèòÊõ¥Êìç‰Ωú‰ºöÂú® ChunkÁöÑÊâÄÊúâÂâØÊú¨‰∏äÊâßË°å„ÄÇÊàë‰ª¨‰ΩøÁî®ÁßüÁ∫¶ÔºàleaseÔºâÊú∫Âà∂Êù•‰øùÊåÅÂ§ö‰∏™ÂâØÊú¨Èó¥ÂèòÊõ¥È°∫Â∫èÁöÑ‰∏ÄËá¥ÊÄß„ÄÇMaster ËäÇÁÇπ‰∏∫ ChunkÁöÑ‰∏Ä‰∏™ÂâØÊú¨Âª∫Á´ã‰∏Ä‰∏™ÁßüÁ∫¶ÔºåÊàë‰ª¨ÊääËøô‰∏™ÂâØÊú¨Âè´ÂÅö‰∏ª Chunk„ÄÇ‰∏ª Chunk ÂØπ Chunk ÁöÑÊâÄÊúâÊõ¥ÊîπÊìç‰ΩúËøõË°åÂ∫èÂàóÂåñ„ÄÇÊâÄÊúâÁöÑÂâØÊú¨ÈÉΩÈÅµ‰ªéËøô‰∏™Â∫èÂàóËøõË°å‰øÆÊîπÊìç‰Ωú„ÄÇÂõ†Ê≠§Ôºå‰øÆÊîπÊìç‰ΩúÂÖ®Â±ÄÁöÑÈ°∫Â∫èÈ¶ñÂÖàÁî± Master ËäÇÁÇπÈÄâÊã©ÁöÑÁßüÁ∫¶ÁöÑÈ°∫Â∫èÂÜ≥ÂÆöÔºåÁÑ∂ÂêéÁî±ÁßüÁ∫¶‰∏≠‰∏ª Chunk ÂàÜÈÖçÁöÑÂ∫èÂàóÂè∑ÂÜ≥ÂÆö„ÄÇ</p>
<p>ËÆæËÆ°ÁßüÁ∫¶Êú∫Âà∂ÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜÊúÄÂ∞èÂåñ Master ËäÇÁÇπÁöÑÁÆ°ÁêÜË¥üÊãÖ„ÄÇÁßüÁ∫¶ÁöÑÂàùÂßãË∂ÖÊó∂ËÆæÁΩÆ‰∏∫ 60 Áßí„ÄÇ‰∏çËøáÔºåÂè™Ë¶ÅChunk Ë¢´‰øÆÊîπ‰∫ÜÔºå‰∏ª Chunk Â∞±ÂèØ‰ª•Áî≥ËØ∑Êõ¥ÈïøÁöÑÁßüÊúüÔºåÈÄöÂ∏∏‰ºöÂæóÂà∞ Master ËäÇÁÇπÁöÑÁ°ÆËÆ§Âπ∂Êî∂Âà∞ÁßüÁ∫¶Âª∂ÈïøÁöÑÊó∂Èó¥„ÄÇËøô‰∫õÁßüÁ∫¶Âª∂ÈïøËØ∑Ê±ÇÂíåÊâπÂáÜÁöÑ‰ø°ÊÅØÈÄöÂ∏∏ÈÉΩÊòØÈôÑÂä†Âú® Master ËäÇÁÇπÂíå Chunk ÊúçÂä°Âô®‰πãÈó¥ÁöÑÂøÉË∑≥Ê∂àÊÅØ‰∏≠Êù•‰º†ÈÄí„ÄÇÊúâÊó∂Master ËäÇÁÇπ‰ºöËØïÂõæÊèêÂâçÂèñÊ∂àÁßüÁ∫¶Ôºà‰æãÂ¶ÇÔºåMaster ËäÇÁÇπÊÉ≥ÂèñÊ∂àÂú®‰∏Ä‰∏™Â∑≤ÁªèË¢´ÊîπÂêçÁöÑÊñá‰ª∂‰∏äÁöÑ‰øÆÊîπÊìç‰ΩúÔºâ„ÄÇÂç≥‰ΩøMasterËäÇÁÇπÂíå‰∏ªChunkÂ§±ÂéªËÅîÁ≥ªÔºåÂÆÉ‰ªçÁÑ∂ÂèØ‰ª•ÂÆâÂÖ®Âú∞Âú®ÊóßÁöÑÁßüÁ∫¶Âà∞ÊúüÂêéÂíåÂè¶Â§ñ‰∏Ä‰∏™ChunkÂâØÊú¨Á≠æËÆ¢Êñ∞ÁöÑÁßüÁ∫¶„ÄÇ</p>
<p>Âú®Âõæ 2 ‰∏≠ÔºåÊàë‰ª¨‰æùÊçÆÊ≠•È™§ÁºñÂè∑ÔºåÂ±ïÁé∞ÂÜôÂÖ•Êìç‰ΩúÁöÑÊéßÂà∂ÊµÅÁ®ã„ÄÇ<br> <img src="http://oliji9s3j.bkt.clouddn.com/15132320505160.jpg" alt><br>ÂÆ¢Êà∑Êú∫Âêë Master ËäÇÁÇπËØ¢ÈóÆÂì™‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®ÊåÅÊúâÂΩìÂâçÁöÑÁßüÁ∫¶Ôºå‰ª•ÂèäÂÖ∂ÂÆÉÂâØÊú¨ÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûúÊ≤°Êúâ‰∏Ä‰∏™ Chunk ÊåÅÊúâÁßüÁ∫¶ÔºåMaster ËäÇÁÇπÂ∞±ÈÄâÊã©ÂÖ∂‰∏≠‰∏Ä‰∏™ÂâØÊú¨Âª∫Á´ã‰∏Ä‰∏™ÁßüÁ∫¶(Ëøô‰∏™Ê≠•È™§Âú®Âõæ‰∏äÊ≤°ÊúâÊòæÁ§∫)„ÄÇ</p>
<p>Master ËäÇÁÇπÂ∞Ü‰∏ª Chunk ÁöÑÊ†áËØÜÁ¨¶‰ª•ÂèäÂÖ∂ÂÆÉÂâØÊú¨(ÂèàÁß∞‰∏∫ secondary ÂâØÊú¨„ÄÅ‰∫åÁ∫ßÂâØÊú¨)ÁöÑ‰ΩçÁΩÆËøîÂõûÁªôÂÆ¢Êà∑ Êú∫„ÄÇÂÆ¢Êà∑Êú∫ÁºìÂ≠òËøô‰∫õÊï∞ÊçÆ‰ª•‰æøÂêéÁª≠ÁöÑÊìç‰Ωú„ÄÇÂè™ÊúâÂú®‰∏ª Chunk ‰∏çÂèØÁî®ÔºåÊàñËÄÖ‰∏ª Chunk ÂõûÂ§ç‰ø°ÊÅØË°®ÊòéÂÆÉÂ∑≤‰∏çÂÜçÊåÅ ÊúâÁßüÁ∫¶ÁöÑÊó∂ÂÄôÔºåÂÆ¢Êà∑Êú∫ÊâçÈúÄË¶ÅÈáçÊñ∞Ë∑ü Master ËäÇÁÇπËÅîÁ≥ª„ÄÇ</p>
<p>ÂÆ¢Êà∑Êú∫ÊääÊï∞ÊçÆÊé®ÈÄÅÂà∞ÊâÄÊúâÁöÑÂâØÊú¨‰∏ä„ÄÇÂÆ¢Êà∑Êú∫ÂèØ‰ª•‰ª•‰ªªÊÑèÁöÑÈ°∫Â∫èÊé®ÈÄÅÊï∞ÊçÆ„ÄÇChunk ÊúçÂä°Âô®Êé•Êî∂Âà∞Êï∞ÊçÆÂπ∂‰øù Â≠òÂú®ÂÆÉÁöÑÂÜÖÈÉ® LRU ÁºìÂ≠ò‰∏≠Ôºå‰∏ÄÁõ¥Âà∞Êï∞ÊçÆË¢´‰ΩøÁî®ÊàñËÄÖËøáÊúü‰∫§Êç¢Âá∫Âéª„ÄÇÁî±‰∫éÊï∞ÊçÆÊµÅÁöÑÁΩëÁªú‰º†ËæìË¥üËΩΩÈùûÂ∏∏È´òÔºåÈÄöËøá ÂàÜÁ¶ªÊï∞ÊçÆÊµÅÂíåÊéßÂà∂ÊµÅÔºåÊàë‰ª¨ÂèØ‰ª•Âü∫‰∫éÁΩëÁªúÊãìÊâëÊÉÖÂÜµÂØπÊï∞ÊçÆÊµÅËøõË°åËßÑÂàíÔºåÊèêÈ´òÁ≥ªÁªüÊÄßËÉΩÔºåËÄå‰∏çÁî®ÂéªÁêÜ‰ºöÂì™‰∏™ Chunk ÊúçÂä°Âô®‰øùÂ≠ò‰∫Ü‰∏ª Chunk„ÄÇ3.2 Á´†ËäÇ‰ºöËøõ‰∏ÄÊ≠•ËÆ®ËÆ∫ËøôÁÇπ„ÄÇ</p>
<p>ÂΩìÊâÄÊúâÁöÑÂâØÊú¨ÈÉΩÁ°ÆËÆ§Êé•Êî∂Âà∞‰∫ÜÊï∞ÊçÆÔºåÂÆ¢Êà∑Êú∫ÂèëÈÄÅÂÜôËØ∑Ê±ÇÂà∞‰∏ª Chunk ÊúçÂä°Âô®„ÄÇËøô‰∏™ËØ∑Ê±ÇÊ†áËØÜ‰∫ÜÊó©ÂâçÊé®ÈÄÅÂà∞ ÊâÄÊúâÂâØÊú¨ÁöÑÊï∞ÊçÆ„ÄÇ‰∏ª Chunk ‰∏∫Êé•Êî∂Âà∞ÁöÑÊâÄÊúâÊìç‰ΩúÂàÜÈÖçËøûÁª≠ÁöÑÂ∫èÂàóÂè∑ÔºåËøô‰∫õÊìç‰ΩúÂèØËÉΩÊù•Ëá™‰∏çÂêåÁöÑÂÆ¢Êà∑Êú∫ÔºåÂ∫èÂàó Âè∑‰øùËØÅ‰∫ÜÊìç‰ΩúÈ°∫Â∫èÊâßË°å„ÄÇÂÆÉ‰ª•Â∫èÂàóÂè∑ÁöÑÈ°∫Â∫èÊääÊìç‰ΩúÂ∫îÁî®Âà∞ÂÆÉËá™Â∑±ÁöÑÊú¨Âú∞Áä∂ÊÄÅ‰∏≠(alex Ê≥®:‰πüÂ∞±ÊòØÂú®Êú¨Âú∞ÊâßË°åËøô‰∫õÊìç‰ΩúÔºåËøôÂè•ËØùÊåâÂ≠óÈù¢ÁøªËØëÊúâÁÇπË¥πËß£Ôºå‰πüËÆ∏Â∫îËØ•ÁøªËØë‰∏∫‚ÄúÂÆÉÈ°∫Â∫èÊâßË°åËøô‰∫õÊìç‰ΩúÔºåÂπ∂Êõ¥Êñ∞Ëá™Â∑±ÁöÑÁä∂ÊÄÅ‚Äù)„ÄÇ</p>
<p>‰∏ª Chunk ÊääÂÜôËØ∑Ê±Ç‰º†ÈÄíÂà∞ÊâÄÊúâÁöÑ‰∫åÁ∫ßÂâØÊú¨„ÄÇÊØè‰∏™‰∫åÁ∫ßÂâØÊú¨‰æùÁÖß‰∏ª Chunk ÂàÜÈÖçÁöÑÂ∫èÂàóÂè∑‰ª•Áõ∏ÂêåÁöÑÈ°∫Â∫èÊâßË°å Ëøô‰∫õÊìç‰Ωú„ÄÇÊâÄÊúâÁöÑ‰∫åÁ∫ßÂâØÊú¨ÂõûÂ§ç‰∏ª ChunkÔºåÂÆÉ‰ª¨Â∑≤ÁªèÂÆåÊàê‰∫ÜÊìç‰Ωú„ÄÇ</p>
<p>‰∏ª Chunk ÊúçÂä°Âô®20ÂõûÂ§çÂÆ¢Êà∑Êú∫„ÄÇ‰ªª‰ΩïÂâØÊú¨‰∫ßÁîüÁöÑ‰ªª‰ΩïÈîôËØØÈÉΩ‰ºöËøîÂõûÁªôÂÆ¢Êà∑Êú∫„ÄÇÂú®Âá∫Áé∞ÈîôËØØÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÜô ÂÖ•Êìç‰ΩúÂèØËÉΩÂú®‰∏ª Chunk Âíå‰∏Ä‰∫õ‰∫åÁ∫ßÂâØÊú¨ÊâßË°åÊàêÂäü„ÄÇ(Â¶ÇÊûúÊìç‰ΩúÂú®‰∏ª Chunk ‰∏äÂ§±Ë¥•‰∫ÜÔºåÊìç‰ΩúÂ∞±‰∏ç‰ºöË¢´ÂàÜÈÖçÂ∫èÂàó Âè∑Ôºå‰πü‰∏ç‰ºöË¢´‰º†ÈÄí„ÄÇ)ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇË¢´Á°ÆËÆ§‰∏∫Â§±Ë¥•ÔºåË¢´‰øÆÊîπÁöÑ region Â§Ñ‰∫é‰∏ç‰∏ÄËá¥ÁöÑÁä∂ÊÄÅ„ÄÇÊàë‰ª¨ÁöÑÂÆ¢Êà∑Êú∫‰ª£Á†ÅÈÄö ËøáÈáçÂ§çÊâßË°åÂ§±Ë¥•ÁöÑÊìç‰ΩúÊù•Â§ÑÁêÜËøôÊ†∑ÁöÑÈîôËØØ„ÄÇÂú®‰ªéÂ§¥ÂºÄÂßãÈáçÂ§çÊâßË°å‰πãÂâçÔºåÂÆ¢Êà∑Êú∫‰ºöÂÖà‰ªéÊ≠•È™§(3)Âà∞Ê≠•È™§(7) ÂÅöÂá†Ê¨°Â∞ùËØï„ÄÇ</p>
<p>Â¶ÇÊûúÂ∫îÁî®Á®ãÂ∫è‰∏ÄÊ¨°ÂÜôÂÖ•ÁöÑÊï∞ÊçÆÈáèÂæàÂ§ßÔºåÊàñËÄÖÊï∞ÊçÆË∑®Ë∂ä‰∫ÜÂ§ö‰∏™ ChunkÔºåGFS ÂÆ¢Êà∑Êú∫‰ª£Á†Å‰ºöÊääÂÆÉ‰ª¨ÂàÜÊàêÂ§ö‰∏™ ÂÜôÊìç‰Ωú„ÄÇËøô‰∫õÊìç‰ΩúÈÉΩÈÅµÂæ™ÂâçÈù¢ÊèèËø∞ÁöÑÊéßÂà∂ÊµÅÁ®ãÔºå‰ΩÜÊòØÂèØËÉΩ‰ºöË¢´ÂÖ∂ÂÆÉÂÆ¢Êà∑Êú∫‰∏äÂêåÊó∂ËøõË°åÁöÑÊìç‰ΩúÊâìÊñ≠ÊàñËÄÖË¶ÜÁõñ„ÄÇ Âõ†Ê≠§ÔºåÂÖ±‰∫´ÁöÑÊñá‰ª∂ region ÁöÑÂ∞æÈÉ®ÂèØËÉΩÂåÖÂê´Êù•Ëá™‰∏çÂêåÂÆ¢Êà∑Êú∫ÁöÑÊï∞ÊçÆÁâáÊÆµÔºåÂ∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÁî±‰∫éËøô‰∫õÂàÜËß£ÂêéÁöÑÂÜôÂÖ•Êìç ‰ΩúÂú®ÊâÄÊúâÁöÑÂâØÊú¨‰∏äÈÉΩ‰ª•Áõ∏ÂêåÁöÑÈ°∫Â∫èÊâßË°åÂÆåÊàêÔºåChunk ÁöÑÊâÄÊúâÂâØÊú¨ÈÉΩÊòØ‰∏ÄËá¥ÁöÑ„ÄÇËøô‰ΩøÊñá‰ª∂ region Â§Ñ‰∫é 2.7 ËäÇÊèèËø∞ ÁöÑ‰∏ÄËá¥ÁöÑ„ÄÅ‰ΩÜÊòØÊú™ÂÆö‰πâÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<h3 id="Êï∞ÊçÆÊµÅ"><a href="#Êï∞ÊçÆÊµÅ" class="headerlink" title="Êï∞ÊçÆÊµÅ"></a>Êï∞ÊçÆÊµÅ</h3><p>‰∏∫‰∫ÜÊèêÈ´òÁΩëÁªúÊïàÁéáÔºåÊàë‰ª¨ÈááÂèñ‰∫ÜÊääÊï∞ÊçÆÊµÅÂíåÊéßÂà∂ÊµÅÂàÜÂºÄÁöÑÊé™ÊñΩ„ÄÇÂú®ÊéßÂà∂ÊµÅ‰ªéÂÆ¢Êà∑Êú∫Âà∞‰∏ª Chunk„ÄÅÁÑ∂ÂêéÂÜç Âà∞ÊâÄÊúâ‰∫åÁ∫ßÂâØÊú¨ÁöÑÂêåÊó∂ÔºåÊï∞ÊçÆ‰ª•ÁÆ°ÈÅìÁöÑÊñπÂºèÔºåÈ°∫Â∫èÁöÑÊ≤øÁùÄ‰∏Ä‰∏™Á≤æÂøÉÈÄâÊã©ÁöÑ Chunk ÊúçÂä°Âô®ÈìæÊé®ÈÄÅ„ÄÇÊàë‰ª¨ÁöÑÁõÆÊ†á ÊòØÂÖÖÂàÜÂà©Áî®ÊØèÂè∞Êú∫Âô®ÁöÑÂ∏¶ÂÆΩÔºåÈÅøÂÖçÁΩëÁªúÁì∂È¢àÂíåÈ´òÂª∂Êó∂ÁöÑËøûÊé•ÔºåÊúÄÂ∞èÂåñÊé®ÈÄÅÊâÄÊúâÊï∞ÊçÆÁöÑÂª∂Êó∂„ÄÇ</p>
<p>‰∏∫‰∫ÜÂÖÖÂàÜÂà©Áî®ÊØèÂè∞Êú∫Âô®ÁöÑÂ∏¶ÂÆΩÔºåÊï∞ÊçÆÊ≤øÁùÄ‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®ÈìæÈ°∫Â∫èÁöÑÊé®ÈÄÅÔºåËÄå‰∏çÊòØ‰ª•ÂÖ∂ÂÆÉÊãìÊâëÂΩ¢ÂºèÂàÜÊï£ Êé®ÈÄÅ(‰æãÂ¶ÇÔºåÊ†ëÂûãÊãìÊâëÁªìÊûÑ)„ÄÇÁ∫øÊÄßÊé®ÈÄÅÊ®°Âºè‰∏ãÔºåÊØèÂè∞Êú∫Âô®ÊâÄÊúâÁöÑÂá∫Âè£Â∏¶ÂÆΩÈÉΩÁî®‰∫é‰ª•ÊúÄÂø´ÁöÑÈÄüÂ∫¶‰º†ËæìÊï∞ÊçÆÔºåËÄå ‰∏çÊòØÂú®Â§ö‰∏™Êé•ÂèóËÄÖ‰πãÈó¥ÂàÜÈÖçÂ∏¶ÂÆΩ„ÄÇ</p>
<p>‰∏∫‰∫ÜÂ∞ΩÂèØËÉΩÁöÑÈÅøÂÖçÂá∫Áé∞ÁΩëÁªúÁì∂È¢àÂíåÈ´òÂª∂ËøüÁöÑÈìæÊé•(egÔºåinter-switch ÊúÄÊúâÂèØËÉΩÂá∫Áé∞Á±ª‰ººÈóÆÈ¢ò)ÔºåÊØèÂè∞Êú∫Âô® ÈÉΩÂ∞ΩÈáèÁöÑÂú®ÁΩëÁªúÊãìÊâë‰∏≠ÈÄâÊã©‰∏ÄÂè∞ËøòÊ≤°ÊúâÊé•Êî∂Âà∞Êï∞ÊçÆÁöÑ„ÄÅÁ¶ªËá™Â∑±ÊúÄËøëÁöÑÊú∫Âô®‰Ωú‰∏∫ÁõÆÊ†áÊé®ÈÄÅÊï∞ÊçÆ„ÄÇÂÅáËÆæÂÆ¢Êà∑Êú∫Êää Êï∞ÊçÆ‰ªé Chunk ÊúçÂä°Âô® S1 Êé®ÈÄÅÂà∞ S4„ÄÇÂÆÉÊääÊï∞ÊçÆÊé®ÈÄÅÂà∞ÊúÄËøëÁöÑ Chunk ÊúçÂä°Âô® S1„ÄÇS1 ÊääÊï∞ÊçÆÊé®ÈÄÅÂà∞ S2ÔºåÂõ†‰∏∫ S2 Âíå S4 ‰∏≠ÊúÄÊé•ËøëÁöÑÊú∫Âô®ÊòØ S2„ÄÇÂêåÊ†∑ÁöÑÔºåS2 ÊääÊï∞ÊçÆ‰º†ÈÄíÁªô S3 Âíå S4 ‰πãÈó¥Êõ¥ËøëÁöÑÊú∫Âô®Ôºå‰æùÊ¨°Á±ªÊé®Êé®ÈÄÅ‰∏ãÂéª„ÄÇÊàë‰ª¨ ÁöÑÁΩëÁªúÊãìÊâëÈùûÂ∏∏ÁÆÄÂçïÔºåÈÄöËøá IP Âú∞ÂùÄÂ∞±ÂèØ‰ª•ËÆ°ÁÆóÂá∫ËäÇÁÇπÁöÑ‚ÄúË∑ùÁ¶ª‚Äù„ÄÇ</p>
<p>ÊúÄÂêéÔºåÊàë‰ª¨Âà©Áî®Âü∫‰∫é TCP ËøûÊé•ÁöÑ„ÄÅÁÆ°ÈÅìÂºèÊï∞ÊçÆÊé®ÈÄÅÊñπÂºèÊù•ÊúÄÂ∞èÂåñÂª∂Ëøü„ÄÇChunk ÊúçÂä°Âô®Êé•Êî∂Âà∞Êï∞ÊçÆÂêéÔºå È©¨‰∏äÂºÄÂßãÂêëÂâçÊé®ÈÄÅ„ÄÇÁÆ°ÈÅìÊñπÂºèÁöÑÊï∞ÊçÆÊé®ÈÄÅÂØπÊàë‰ª¨Â∏ÆÂä©ÂæàÂ§ßÔºåÂõ†‰∏∫Êàë‰ª¨ÈááÁî®ÂÖ®ÂèåÂ∑•ÁöÑ‰∫§Êç¢ÁΩëÁªú„ÄÇÊé•Êî∂Âà∞Êï∞ÊçÆÂêé(<em>Âç≥‰∏ª Chunk ÊâÄÂú®ÁöÑ Chunk ÊúçÂä°Âô®</em>)Á´ãÂàªÂêëÂâçÊé®ÈÄÅ‰∏ç‰ºöÈôç‰ΩéÊé•Êî∂ÁöÑÈÄüÂ∫¶„ÄÇÂú®Ê≤°ÊúâÁΩëÁªúÊã•Â°ûÁöÑÊÉÖÂÜµ‰∏ãÔºå‰º†ÈÄÅ B Â≠óËäÇÁöÑÊï∞ÊçÆÂà∞ R ‰∏™ÂâØÊú¨ÁöÑÁêÜÊÉ≥Êó∂Èó¥ÊòØ B/T+RL ÔºåT ÊòØÁΩëÁªúÁöÑÂêûÂêêÈáèÔºåL ÊòØÂú®‰∏§Âè∞Êú∫Âô®Êï∞ÊçÆ‰º†ËæìÁöÑÂª∂Ëøü„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÁöÑÁΩëÁªúËøûÊé•ÈÄüÂ∫¶ÊòØ 100Mbps(T)ÔºåL Â∞ÜËøúÂ∞è‰∫é 1ms„ÄÇÂõ†Ê≠§Ôºå1MB ÁöÑÊï∞ÊçÆÂú®ÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ã 80ms Â∑¶Âè≥Â∞±ËÉΩÂàÜÂèëÂá∫Âéª„ÄÇ </p>
<h3 id="ÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†"><a href="#ÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†" class="headerlink" title="ÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†"></a>ÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†</h3><p>GFS Êèê‰æõ‰∫Ü‰∏ÄÁßçÂéüÂ≠êÁöÑÊï∞ÊçÆËøΩÂä†Êìç‰Ωú‚ÄìËÆ∞ÂΩïËøΩÂä†„ÄÇ‰º†ÁªüÊñπÂºèÁöÑÂÜôÂÖ•Êìç‰ΩúÔºåÂÆ¢Êà∑Á®ãÂ∫è‰ºöÊåáÂÆöÊï∞ÊçÆÂÜôÂÖ•ÁöÑÂÅè ÁßªÈáè„ÄÇÂØπÂêå‰∏Ä‰∏™ region ÁöÑÂπ∂Ë°åÂÜôÂÖ•Êìç‰Ωú‰∏çÊòØ‰∏≤Ë°åÁöÑ:region Â∞æÈÉ®ÂèØËÉΩ‰ºöÂåÖÂê´Â§ö‰∏™‰∏çÂêåÂÆ¢Êà∑Êú∫ÂÜôÂÖ•ÁöÑÊï∞ÊçÆÁâáÊÆµ„ÄÇ ‰ΩøÁî®ËÆ∞ÂΩïËøΩÂä†ÔºåÂÆ¢Êà∑Êú∫Âè™ÈúÄË¶ÅÊåáÂÆöË¶ÅÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇGFS ‰øùËØÅËá≥Â∞ëÊúâ‰∏ÄÊ¨°ÂéüÂ≠êÁöÑÂÜôÂÖ•Êìç‰ΩúÊàêÂäüÊâßË°å(Âç≥ÂÜôÂÖ•‰∏Ä ‰∏™È°∫Â∫èÁöÑ byte ÊµÅ)ÔºåÂÜôÂÖ•ÁöÑÊï∞ÊçÆËøΩÂä†Âà∞ GFS ÊåáÂÆöÁöÑÂÅèÁßª‰ΩçÁΩÆ‰∏äÔºå‰πãÂêé GFS ËøîÂõûËøô‰∏™ÂÅèÁßªÈáèÁªôÂÆ¢Êà∑Êú∫„ÄÇËøôÁ±ª‰ºº ‰∫éÂú® Unix Êìç‰ΩúÁ≥ªÁªüÁºñÁ®ãÁéØÂ¢É‰∏≠ÔºåÂØπ‰ª• O_APPEND Ê®°ÂºèÊâìÂºÄÁöÑÊñá‰ª∂ÔºåÂ§ö‰∏™Âπ∂ÂèëÂÜôÊìç‰ΩúÂú®Ê≤°ÊúâÁ´ûÊÄÅÊù°‰ª∂Êó∂ÁöÑË°å ‰∏∫„ÄÇ</p>
<p>ËÆ∞ÂΩïËøΩÂä†Âú®Êàë‰ª¨ÁöÑÂàÜÂ∏ÉÂ∫îÁî®‰∏≠ÈùûÂ∏∏È¢ëÁπÅÁöÑ‰ΩøÁî®ÔºåÂú®Ëøô‰∫õÂàÜÂ∏ÉÂºèÂ∫îÁî®‰∏≠ÔºåÈÄöÂ∏∏ÊúâÂæàÂ§öÁöÑÂÆ¢Êà∑Êú∫Âπ∂Ë°åÂú∞ÂØπÂêå ‰∏Ä‰∏™Êñá‰ª∂ËøΩÂä†ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÈááÁî®‰º†ÁªüÊñπÂºèÁöÑÊñá‰ª∂ÂÜôÂÖ•Êìç‰ΩúÔºåÂÆ¢Êà∑Êú∫ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂ§çÊùÇ„ÄÅÊòÇË¥µÁöÑÂêåÊ≠•Êú∫Âà∂Ôºå ‰æãÂ¶Ç‰ΩøÁî®‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÈîÅÁÆ°ÁêÜÂô®„ÄÇÂú®Êàë‰ª¨ÁöÑÂ∑•‰Ωú‰∏≠ÔºåËøôÊ†∑ÁöÑÊñá‰ª∂ÈÄöÂ∏∏Áî®‰∫éÂ§ö‰∏™Áîü‰∫ßËÄÖ/Âçï‰∏ÄÊ∂àË¥πËÄÖÁöÑÈòüÂàóÁ≥ªÁªüÔºå ÊàñËÄÖÊòØÂêàÂπ∂‰∫ÜÊù•Ëá™Â§ö‰∏™ÂÆ¢Êà∑Êú∫ÁöÑÊï∞ÊçÆÁöÑÁªìÊûúÊñá‰ª∂„ÄÇ</p>
<p>ËÆ∞ÂΩïËøΩÂä†ÊòØ‰∏ÄÁßç‰øÆÊîπÊìç‰ΩúÔºåÂÆÉ‰πüÈÅµÂæ™ 3.1 ËäÇÊèèËø∞ÁöÑÊéßÂà∂ÊµÅÁ®ãÔºåÈô§‰∫ÜÂú®‰∏ª Chunk Êúâ‰∫õÈ¢ùÂ§ñÁöÑÊéßÂà∂ÈÄªËæë„ÄÇÂÆ¢ Êà∑Êú∫ÊääÊï∞ÊçÆÊé®ÈÄÅÁªôÊñá‰ª∂ÊúÄÂêé‰∏Ä‰∏™ Chunk ÁöÑÊâÄÊúâÂâØÊú¨Ôºå‰πãÂêéÂèëÈÄÅËØ∑Ê±ÇÁªô‰∏ª Chunk„ÄÇ‰∏ª Chunk ‰ºöÊ£ÄÊü•ËøôÊ¨°ËÆ∞ÂΩïËøΩ Âä†Êìç‰ΩúÊòØÂê¶‰ºö‰Ωø Chunk Ë∂ÖËøáÊúÄÂ§ßÂ∞∫ÂØ∏(64MB)„ÄÇÂ¶ÇÊûúË∂ÖËøá‰∫ÜÊúÄÂ§ßÂ∞∫ÂØ∏Ôºå‰∏ª Chunk È¶ñÂÖàÂ∞ÜÂΩìÂâç Chunk Â°´ÂÖÖÂà∞ÊúÄ Â§ßÂ∞∫ÂØ∏Ôºå‰πãÂêéÈÄöÁü•ÊâÄÊúâ‰∫åÁ∫ßÂâØÊú¨ÂÅöÂêåÊ†∑ÁöÑÊìç‰ΩúÔºåÁÑ∂ÂêéÂõûÂ§çÂÆ¢Êà∑Êú∫Ë¶ÅÊ±ÇÂÖ∂ÂØπ‰∏ã‰∏Ä‰∏™ Chunk ÈáçÊñ∞ËøõË°åËÆ∞ÂΩïËøΩÂä†Êìç ‰Ωú„ÄÇ(ËÆ∞ÂΩïËøΩÂä†ÁöÑÊï∞ÊçÆÂ§ßÂ∞è‰∏•Ê†ºÊéßÂà∂Âú® Chunk ÊúÄÂ§ßÂ∞∫ÂØ∏ÁöÑ 1/4ÔºåËøôÊ†∑Âç≥‰ΩøÂú®ÊúÄÂùèÊÉÖÂÜµ‰∏ãÔºåÊï∞ÊçÆÁ¢éÁâáÁöÑÊï∞Èáè‰ªçÁÑ∂ Âú®ÂèØÊéßÁöÑËåÉÂõ¥„ÄÇ)ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãËøΩÂä†ÁöÑËÆ∞ÂΩï‰∏çË∂ÖËøá Chunk ÁöÑÊúÄÂ§ßÂ∞∫ÂØ∏Ôºå‰∏ª Chunk ÊääÊï∞ÊçÆËøΩÂä†Âà∞Ëá™Â∑±ÁöÑÂâØÊú¨ÂÜÖÔºå ÁÑ∂ÂêéÈÄöÁü•‰∫åÁ∫ßÂâØÊú¨ÊääÊï∞ÊçÆÂÜôÂú®Ë∑ü‰∏ª Chunk ‰∏ÄÊ†∑ÁöÑ‰ΩçÁΩÆ‰∏äÔºåÊúÄÂêéÂõûÂ§çÂÆ¢Êà∑Êú∫Êìç‰ΩúÊàêÂäü„ÄÇ</p>
<p>Â¶ÇÊûúËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂú®‰ªª‰Ωï‰∏Ä‰∏™ÂâØÊú¨‰∏äÂ§±Ë¥•‰∫ÜÔºåÂÆ¢Êà∑Á´ØÂ∞±ÈúÄË¶ÅÈáçÊñ∞ËøõË°åÊìç‰Ωú„ÄÇÈáçÊñ∞ËøõË°åËÆ∞ÂΩïËøΩÂä†ÁöÑÁªìÊûúÊòØÔºå Âêå‰∏Ä‰∏™ Chunk ÁöÑ‰∏çÂêåÂâØÊú¨ÂèØËÉΩÂåÖÂê´‰∏çÂêåÁöÑÊï∞ÊçÆ‚ÄìÈáçÂ§çÂåÖÂê´‰∏Ä‰∏™ËÆ∞ÂΩïÂÖ®ÈÉ®ÊàñËÄÖÈÉ®ÂàÜÁöÑÊï∞ÊçÆ„ÄÇGFS Âπ∂‰∏ç‰øùËØÅ Chunk ÁöÑÊâÄÊúâÂâØÊú¨Âú®Â≠óËäÇÁ∫ßÂà´ÊòØÂÆåÂÖ®‰∏ÄËá¥ÁöÑ„ÄÇÂÆÉÂè™‰øùËØÅÊï∞ÊçÆ‰Ωú‰∏∫‰∏Ä‰∏™Êï¥‰ΩìÂéüÂ≠êÁöÑË¢´Ëá≥Â∞ëÂÜôÂÖ•‰∏ÄÊ¨°„ÄÇËøô‰∏™ÁâπÊÄßÂèØ‰ª•ÈÄö ËøáÁÆÄÂçïËßÇÂØüÊé®ÂØºÂá∫Êù•:Â¶ÇÊûúÊìç‰ΩúÊàêÂäüÊâßË°åÔºåÊï∞ÊçÆ‰∏ÄÂÆöÂ∑≤ÁªèÂÜôÂÖ•Âà∞ Chunk ÁöÑÊâÄÊúâÂâØÊú¨ÁöÑÁõ∏ÂêåÂÅèÁßª‰ΩçÁΩÆ‰∏ä„ÄÇËøô‰πã ÂêéÔºåÊâÄÊúâÁöÑÂâØÊú¨Ëá≥Â∞ëÈÉΩÂà∞‰∫ÜËÆ∞ÂΩïÂ∞æÈÉ®ÁöÑÈïøÂ∫¶Ôºå‰ªª‰ΩïÂêéÁª≠ÁöÑËÆ∞ÂΩïÈÉΩ‰ºöËøΩÂä†Âà∞Êõ¥Â§ßÁöÑÂÅèÁßªÂú∞ÂùÄÔºåÊàñËÄÖÊòØ‰∏çÂêåÁöÑ Chunk ‰∏äÔºåÂç≥‰ΩøÂÖ∂ÂÆÉÁöÑ Chunk ÂâØÊú¨Ë¢´ Master ËäÇÁÇπÈÄâ‰∏∫‰∫Ü‰∏ª Chunk„ÄÇÂ∞±Êàë‰ª¨ÁöÑ‰∏ÄËá¥ÊÄß‰øùÈöúÊ®°ÂûãËÄåË®ÄÔºåËÆ∞ÂΩïËøΩÂä† Êìç‰ΩúÊàêÂäüÂÜôÂÖ•Êï∞ÊçÆÁöÑ region ÊòØÂ∑≤ÂÆö‰πâÁöÑ(Âõ†Ê≠§‰πüÊòØ‰∏ÄËá¥ÁöÑ)ÔºåÂèç‰πãÂàôÊòØ‰∏ç‰∏ÄËá¥ÁöÑ(Âõ†Ê≠§‰πüÂ∞±ÊòØÊú™ÂÆö‰πâÁöÑ)„ÄÇÊ≠£Â¶ÇÊàë‰ª¨Âú® 2.7.2 ËäÇËÆ®ËÆ∫ÁöÑÔºåÊàë‰ª¨ÁöÑÁ®ãÂ∫èÂèØ‰ª•Â§ÑÁêÜ‰∏ç‰∏ÄËá¥ÁöÑÂå∫Âüü„ÄÇ</p>
<h3 id="Âø´ÁÖß"><a href="#Âø´ÁÖß" class="headerlink" title="Âø´ÁÖß"></a>Âø´ÁÖß</h3><p>Âø´ÁÖßÊìç‰ΩúÂá†‰πéÂèØ‰ª•Áû¨Èó¥ÂÆåÊàêÂØπ‰∏Ä‰∏™Êñá‰ª∂ÊàñËÄÖÁõÆÂΩïÊ†ë(‚ÄúÊ∫ê‚Äù)ÂÅö‰∏Ä‰∏™Êã∑Ë¥ùÔºåÂπ∂‰∏îÂá†‰πé‰∏ç‰ºöÂØπÊ≠£Âú®ËøõË°åÁöÑÂÖ∂ ÂÆÉÊìç‰ΩúÈÄ†Êàê‰ªª‰ΩïÂπ≤Êâ∞„ÄÇÊàë‰ª¨ÁöÑÁî®Êà∑ÂèØ‰ª•‰ΩøÁî®Âø´ÁÖßËøÖÈÄüÁöÑÂàõÂª∫‰∏Ä‰∏™Â∑®Â§ßÁöÑÊï∞ÊçÆÈõÜÁöÑÂàÜÊîØÊã∑Ë¥ù(ËÄå‰∏îÁªèÂ∏∏ÊòØÈÄíÂΩí ÁöÑÊã∑Ë¥ùÊã∑Ë¥ù)ÔºåÊàñËÄÖÊòØÂú®ÂÅöÂÆûÈ™åÊÄßÁöÑÊï∞ÊçÆÊìç‰Ωú‰πãÂâçÔºå‰ΩøÁî®Âø´ÁÖßÊìç‰ΩúÂ§á‰ªΩÂΩìÂâçÁä∂ÊÄÅÔºåËøôÊ†∑‰πãÂêéÂ∞±ÂèØ‰ª•ËΩªÊùæÁöÑÊèê‰∫§ ÊàñËÄÖÂõûÊªöÂà∞Â§á‰ªΩÊó∂ÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<p>Â∞±ÂÉè AFS(alex Ê≥®:AFSÔºåÂç≥ Andrew File SystemÔºå‰∏ÄÁßçÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü)ÔºåÊàë‰ª¨Áî®Ê†áÂáÜÁöÑ copy-on-write ÊäÄÊúØÂÆûÁé∞Âø´ÁÖß„ÄÇÂΩì Master ËäÇÁÇπÊî∂Âà∞‰∏Ä‰∏™Âø´ÁÖßËØ∑Ê±ÇÔºåÂÆÉÈ¶ñÂÖàÂèñÊ∂à‰ΩúÂø´ÁÖßÁöÑÊñá‰ª∂ÁöÑÊâÄÊúâ Chunk ÁöÑÁßüÁ∫¶„ÄÇËøô‰∏™Êé™ÊñΩ ‰øùËØÅ‰∫ÜÂêéÁª≠ÂØπËøô‰∫õ Chunk ÁöÑÂÜôÊìç‰ΩúÈÉΩÂøÖÈ°ª‰∏é Master ‰∫§‰∫í‰ª•ÊâæÂà∞ÁßüÁ∫¶ÊåÅÊúâËÄÖ„ÄÇËøôÂ∞±Áªô Master ËäÇÁÇπ‰∏Ä‰∏™ÁéáÂÖàÂàõÂª∫ Chunk ÁöÑÊñ∞Êã∑Ë¥ùÁöÑÊú∫‰ºö„ÄÇ</p>
<p>ÁßüÁ∫¶ÂèñÊ∂àÊàñËÄÖËøáÊúü‰πãÂêéÔºåMaster ËäÇÁÇπÊääËøô‰∏™Êìç‰Ωú‰ª•Êó•ÂøóÁöÑÊñπÂºèËÆ∞ÂΩïÂà∞Á°¨Áõò‰∏ä„ÄÇÁÑ∂ÂêéÔºåMaster ËäÇÁÇπÈÄöËøáÂ§ç Âà∂Ê∫êÊñá‰ª∂ÊàñËÄÖÁõÆÂΩïÁöÑÂÖÉÊï∞ÊçÆÁöÑÊñπÂºèÔºåÊääËøôÊù°Êó•ÂøóËÆ∞ÂΩïÁöÑÂèòÂåñÂèçÊò†Âà∞‰øùÂ≠òÂú®ÂÜÖÂ≠òÁöÑÁä∂ÊÄÅ‰∏≠„ÄÇÊñ∞ÂàõÂª∫ÁöÑÂø´ÁÖßÊñá‰ª∂ ÂíåÊ∫êÊñá‰ª∂ÊåáÂêëÂÆåÂÖ®Áõ∏ÂêåÁöÑ Chunk Âú∞ÂùÄ„ÄÇ</p>
<p>Âú®Âø´ÁÖßÊìç‰Ωú‰πãÂêéÔºåÂΩìÂÆ¢Êà∑Êú∫Á¨¨‰∏ÄÊ¨°ÊÉ≥ÂÜôÂÖ•Êï∞ÊçÆÂà∞ Chunk CÔºåÂÆÉÈ¶ñÂÖà‰ºöÂèëÈÄÅ‰∏Ä‰∏™ËØ∑Ê±ÇÂà∞ Master ËäÇÁÇπÊü•ËØ¢ÂΩì ÂâçÁöÑÁßüÁ∫¶ÊåÅÊúâËÄÖ„ÄÇMaster ËäÇÁÇπÊ≥®ÊÑèÂà∞ Chunk C ÁöÑÂºïÁî®ËÆ°Êï∞Ë∂ÖËøá‰∫Ü 1„ÄÇMaster ËäÇÁÇπ‰∏ç‰ºöÈ©¨‰∏äÂõûÂ§çÂÆ¢Êà∑Êú∫ÁöÑËØ∑Ê±ÇÔºå ËÄåÊòØÈÄâÊã©‰∏Ä‰∏™Êñ∞ÁöÑ Chunk Âè•ÊüÑ C<code>„ÄÇ‰πãÂêéÔºåMaster ËäÇÁÇπË¶ÅÊ±ÇÊØè‰∏™Êã•Êúâ Chunk C ÂΩìÂâçÂâØÊú¨ÁöÑ Chunk ÊúçÂä°Âô®ÂàõÂª∫‰∏Ä ‰∏™Âè´ÂÅö C</code>ÁöÑÊñ∞ Chunk„ÄÇÈÄöËøáÂú®Ê∫ê Chunk ÊâÄÂú® Chunk ÊúçÂä°Âô®‰∏äÂàõÂª∫Êñ∞ÁöÑ ChunkÔºåÊàë‰ª¨Á°Æ‰øùÊï∞ÊçÆÂú®Êú¨Âú∞ËÄå‰∏çÊòØÈÄö ËøáÁΩëÁªúÂ§çÂà∂(Êàë‰ª¨ÁöÑÁ°¨ÁõòÊØîÊàë‰ª¨ÁöÑ 100Mb ‰ª•Â§™ÁΩëÂ§ßÁ∫¶Âø´ 3 ÂÄç)„ÄÇ‰ªéËøôÁÇπÊù•ËÆ≤ÔºåËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÊñπÂºèÂíå‰ªª‰ΩïÂÖ∂ÂÆÉ Chunk Ê≤°‰ªÄ‰πà‰∏çÂêå:Master ËäÇÁÇπÁ°Æ‰øùÊñ∞ Chunk C`ÁöÑ‰∏Ä‰∏™ÂâØÊú¨Êã•ÊúâÁßüÁ∫¶Ôºå‰πãÂêéÂõûÂ§çÂÆ¢Êà∑Êú∫ÔºåÂÆ¢Êà∑Êú∫ÂæóÂà∞ÂõûÂ§çÂêéÂ∞±ÂèØ‰ª• Ê≠£Â∏∏ÁöÑÂÜôËøô‰∏™ ChunkÔºåËÄå‰∏çÂøÖÁêÜ‰ºöÂÆÉÊòØ‰ªé‰∏Ä‰∏™Â∑≤Â≠òÂú®ÁöÑ Chunk ÂÖãÈöÜÂá∫Êù•ÁöÑ„ÄÇ<br> <div class="note info"><h2 id="Master-ËäÇÁÇπÁöÑÊìç‰Ωú"><a href="#Master-ËäÇÁÇπÁöÑÊìç‰Ωú" class="headerlink" title="Master ËäÇÁÇπÁöÑÊìç‰Ωú"></a>Master ËäÇÁÇπÁöÑÊìç‰Ωú</h2></div><br>Master ËäÇÁÇπÊâßË°åÊâÄÊúâÁöÑÂêçÁß∞Á©∫Èó¥Êìç‰Ωú„ÄÇÊ≠§Â§ñÔºåÂÆÉËøòÁÆ°ÁêÜÁùÄÊï¥‰∏™Á≥ªÁªüÈáåÊâÄÊúâ Chunk ÁöÑÂâØÊú¨:ÂÆÉÂÜ≥ÂÆö Chunk ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÔºåÂàõÂª∫Êñ∞ Chunk ÂíåÂÆÉÁöÑÂâØÊú¨ÔºåÂçèË∞ÉÂêÑÁßçÂêÑÊ†∑ÁöÑÁ≥ªÁªüÊ¥ªÂä®‰ª•‰øùËØÅ Chunk Ë¢´ÂÆåÂÖ®Â§çÂà∂ÔºåÂú®ÊâÄÊúâÁöÑ Chunk ÊúçÂä°Âô®‰πãÈó¥ÁöÑËøõË°åË¥üËΩΩÂùáË°°ÔºåÂõûÊî∂‰∏çÂÜç‰ΩøÁî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥„ÄÇÊú¨ËäÇÊàë‰ª¨ËÆ®ËÆ∫‰∏äËø∞ÁöÑ‰∏ªÈ¢ò„ÄÇ</p>
<h3 id="ÂêçÁß∞Á©∫Èó¥ÁÆ°ÁêÜÂíåÈîÅ"><a href="#ÂêçÁß∞Á©∫Èó¥ÁÆ°ÁêÜÂíåÈîÅ" class="headerlink" title="ÂêçÁß∞Á©∫Èó¥ÁÆ°ÁêÜÂíåÈîÅ"></a>ÂêçÁß∞Á©∫Èó¥ÁÆ°ÁêÜÂíåÈîÅ</h3><p>Master ËäÇÁÇπÁöÑÂæàÂ§öÊìç‰Ωú‰ºöËä±Ë¥πÂæàÈïøÁöÑÊó∂Èó¥:ÊØîÂ¶ÇÔºåÂø´ÁÖßÊìç‰ΩúÂøÖÈ°ªÂèñÊ∂à Chunk ÊúçÂä°Âô®‰∏äÂø´ÁÖßÊâÄÊ∂âÂèäÁöÑÊâÄÊúâ ÁöÑ Chunk ÁöÑÁßüÁ∫¶„ÄÇÊàë‰ª¨‰∏çÂ∏åÊúõÂú®Ëøô‰∫õÊìç‰ΩúÁöÑËøêË°åÊó∂ÔºåÂª∂Áºì‰∫ÜÂÖ∂ÂÆÉÁöÑ Master ËäÇÁÇπÁöÑÊìç‰Ωú„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÂÖÅËÆ∏Â§ö‰∏™ Êìç‰ΩúÂêåÊó∂ËøõË°åÔºå‰ΩøÁî®ÂêçÁß∞Á©∫Èó¥ÁöÑ region ‰∏äÁöÑÈîÅÊù•‰øùËØÅÊâßË°åÁöÑÊ≠£Á°ÆÈ°∫Â∫è„ÄÇ</p>
<p>‰∏çÂêå‰∫éËÆ∏Â§ö‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÔºåGFS Ê≤°ÊúâÈíàÂØπÊØè‰∏™ÁõÆÂΩïÂÆûÁé∞ËÉΩÂ§üÂàóÂá∫ÁõÆÂΩï‰∏ãÊâÄÊúâÊñá‰ª∂ÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇGFS ‰πü‰∏ç ÊîØÊåÅÊñá‰ª∂ÊàñËÄÖÁõÆÂΩïÁöÑÈìæÊé•(Âç≥ Unix ÊúØËØ≠‰∏≠ÁöÑÁ°¨ÈìæÊé•ÊàñËÄÖÁ¨¶Âè∑ÈìæÊé•)„ÄÇÂú®ÈÄªËæë‰∏äÔºåGFS ÁöÑÂêçÁß∞Á©∫Èó¥Â∞±ÊòØ‰∏Ä‰∏™ÂÖ® Ë∑ØÂæÑÂíåÂÖÉÊï∞ÊçÆÊò†Â∞ÑÂÖ≥Á≥ªÁöÑÊü•ÊâæË°®„ÄÇÂà©Áî®ÂâçÁºÄÂéãÁº©ÔºåËøô‰∏™Ë°®ÂèØ‰ª•È´òÊïàÁöÑÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠„ÄÇÂú®Â≠òÂÇ®ÂêçÁß∞Á©∫Èó¥ÁöÑÊ†ëÂûã ÁªìÊûÑ‰∏äÔºåÊØè‰∏™ËäÇÁÇπ(ÁªùÂØπË∑ØÂæÑÁöÑÊñá‰ª∂ÂêçÊàñÁªùÂØπË∑ØÂæÑÁöÑÁõÆÂΩïÂêç)ÈÉΩÊúâ‰∏Ä‰∏™ÂÖ≥ËÅîÁöÑËØªÂÜôÈîÅ„ÄÇ</p>
<p>ÊØè‰∏™ Master ËäÇÁÇπÁöÑÊìç‰ΩúÂú®ÂºÄÂßã‰πãÂâçÈÉΩË¶ÅËé∑Âæó‰∏ÄÁ≥ªÂàóÁöÑÈîÅ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êìç‰ΩúÊ∂âÂèä/d1/d2/‚Ä¶ /dn/leafÔºåÈÇ£‰πàÊìç‰ΩúÈ¶ñÂÖàË¶ÅËé∑ÂæóÁõÆÂΩï/d1Ôºå/d1/d2Ôºå‚Ä¶Ôºå/d1/d2/‚Ä¶/dn ÁöÑËØªÈîÅÔºå‰ª•Âèä/d1/d2/‚Ä¶/dn/leaf ÁöÑËØªÂÜôÈîÅ„ÄÇÊ≥® ÊÑèÔºåÊ†πÊçÆÊìç‰ΩúÁöÑ‰∏çÂêåÔºåleaf ÂèØ‰ª•ÊòØ‰∏Ä‰∏™Êñá‰ª∂Ôºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÁõÆÂΩï„ÄÇ</p>
<p>Áé∞Âú®ÔºåÊàë‰ª¨ÊºîÁ§∫‰∏Ä‰∏ãÂú®/home/user Ë¢´Âø´ÁÖßÂà∞/save/user ÁöÑÊó∂ÂÄôÔºåÈîÅÊú∫Âà∂Â¶Ç‰ΩïÈò≤Ê≠¢ÂàõÂª∫Êñá‰ª∂/home/user/foo„ÄÇ Âø´ÁÖßÊìç‰ΩúËé∑Âèñ/home Âíå/save ÁöÑËØªÂèñÈîÅÔºå‰ª•Âèä/home/user Âíå/save/user ÁöÑÂÜôÂÖ•ÈîÅ„ÄÇÊñá‰ª∂ÂàõÂª∫Êìç‰ΩúËé∑Âæó/home Âíå /home/user ÁöÑËØªÂèñÈîÅÔºå‰ª•Âèä/home/user/foo ÁöÑÂÜôÂÖ•ÈîÅ„ÄÇËøô‰∏§‰∏™Êìç‰ΩúË¶ÅÈ°∫Â∫èÊâßË°åÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ËØïÂõæËé∑ÂèñÁöÑ/home/user ÁöÑÈîÅÊòØÁõ∏‰∫íÂÜ≤Á™Å„ÄÇÊñá‰ª∂ÂàõÂª∫Êìç‰Ωú‰∏çÈúÄË¶ÅËé∑ÂèñÁà∂ÁõÆÂΩïÁöÑÂÜôÂÖ•ÈîÅÔºåÂõ†‰∏∫ËøôÈáåÊ≤°Êúâ‚ÄúÁõÆÂΩï‚ÄùÔºåÊàñËÄÖÁ±ª‰ºº inode Á≠âÁî®Êù• Á¶ÅÊ≠¢‰øÆÊîπÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÊñá‰ª∂ÂêçÁöÑËØªÂèñÈîÅË∂≥‰ª•Èò≤Ê≠¢Áà∂ÁõÆÂΩïË¢´Âà†Èô§„ÄÇ</p>
<p>ÈááÁî®ËøôÁßçÈîÅÊñπÊ°àÁöÑ‰ºòÁÇπÊòØÊîØÊåÅÂØπÂêå‰∏ÄÁõÆÂΩïÁöÑÂπ∂Ë°åÊìç‰Ωú„ÄÇÊØîÂ¶ÇÔºåÂèØ‰ª•ÂÜçÂêå‰∏Ä‰∏™ÁõÆÂΩï‰∏ãÂêåÊó∂ÂàõÂª∫Â§ö‰∏™Êñá‰ª∂: ÊØè‰∏Ä‰∏™Êìç‰ΩúÈÉΩËé∑Âèñ‰∏Ä‰∏™ÁõÆÂΩïÂêçÁöÑ‰∏äÁöÑËØªÂèñÈîÅÂíåÊñá‰ª∂Âêç‰∏äÁöÑÂÜôÂÖ•ÈîÅ„ÄÇÁõÆÂΩïÂêçÁöÑËØªÂèñÈîÅË∂≥‰ª•ÁöÑÈò≤Ê≠¢ÁõÆÂΩïË¢´Âà†Èô§„ÄÅ ÊîπÂêç‰ª•ÂèäË¢´Âø´ÁÖß„ÄÇÊñá‰ª∂ÂêçÁöÑÂÜôÂÖ•ÈîÅÂ∫èÂàóÂåñÊñá‰ª∂ÂàõÂª∫Êìç‰ΩúÔºåÁ°Æ‰øù‰∏ç‰ºöÂ§öÊ¨°ÂàõÂª∫ÂêåÂêçÁöÑÊñá‰ª∂„ÄÇ</p>
<p>Âõ†‰∏∫ÂêçÁß∞Á©∫Èó¥ÂèØËÉΩÊúâÂæàÂ§öËäÇÁÇπÔºåËØªÂÜôÈîÅÈááÁî®ÊÉ∞ÊÄßÂàÜÈÖçÁ≠ñÁï•ÔºåÂú®‰∏çÂÜç‰ΩøÁî®ÁöÑÊó∂ÂÄôÁ´ãÂàªË¢´Âà†Èô§„ÄÇÂêåÊ†∑ÔºåÈîÅÁöÑ Ëé∑Âèñ‰πüË¶Å‰æùÊçÆ‰∏Ä‰∏™ÂÖ®Â±Ä‰∏ÄËá¥ÁöÑÈ°∫Â∫èÊù•ÈÅøÂÖçÊ≠ªÈîÅ:È¶ñÂÖàÊåâÂêçÁß∞Á©∫Èó¥ÁöÑÂ±ÇÊ¨°ÊéíÂ∫èÔºåÂú®Âêå‰∏Ä‰∏™Â±ÇÊ¨°ÂÜÖÊåâÂ≠óÂÖ∏È°∫Â∫èÊéíÂ∫è„ÄÇ</p>
<h3 id="ÂâØÊú¨ÁöÑ‰ΩçÁΩÆ"><a href="#ÂâØÊú¨ÁöÑ‰ΩçÁΩÆ" class="headerlink" title="ÂâØÊú¨ÁöÑ‰ΩçÁΩÆ"></a>ÂâØÊú¨ÁöÑ‰ΩçÁΩÆ</h3><p>GFS ÈõÜÁæ§ÊòØÈ´òÂ∫¶ÂàÜÂ∏ÉÁöÑÂ§öÂ±ÇÂ∏ÉÂ±ÄÁªìÊûÑÔºåËÄå‰∏çÊòØÂπ≥Èù¢ÁªìÊûÑ„ÄÇÂÖ∏ÂûãÁöÑÊãìÊâëÁªìÊûÑÊòØÊúâÊï∞Áôæ‰∏™ Chunk ÊúçÂä°Âô®ÂÆâË£Ö Âú®ËÆ∏Â§öÊú∫Êû∂‰∏ä„ÄÇChunk ÊúçÂä°Âô®Ë¢´Êù•Ëá™Âêå‰∏ÄÊàñËÄÖ‰∏çÂêåÊú∫Êû∂‰∏äÁöÑÊï∞Áôæ‰∏™ÂÆ¢Êà∑Êú∫ËΩÆÊµÅËÆøÈóÆ„ÄÇ‰∏çÂêåÊú∫Êû∂‰∏äÁöÑ‰∏§Âè∞Êú∫Âô® Èó¥ÁöÑÈÄöËÆØÂèØËÉΩË∑®Ë∂ä‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÁΩëÁªú‰∫§Êç¢Êú∫„ÄÇÂè¶Â§ñÔºåÊú∫Êû∂ÁöÑÂá∫ÂÖ•Â∏¶ÂÆΩÂèØËÉΩÊØîÊú∫Êû∂ÂÜÖÊâÄÊúâÊú∫Âô®Âä†ÂíåÂú®‰∏ÄËµ∑ÁöÑÂ∏¶ÂÆΩ Ë¶ÅÂ∞è„ÄÇÂ§öÂ±ÇÂàÜÂ∏ÉÊû∂ÊûÑÂØπÊï∞ÊçÆÁöÑÁÅµÊ¥ªÊÄß„ÄÅÂèØÈù†ÊÄß‰ª•ÂèäÂèØÁî®ÊÄßÊñπÈù¢ÊèêÂá∫ÁâπÊúâÁöÑÊåëÊàò„ÄÇ</p>
<p>Chunk ÂâØÊú¨‰ΩçÁΩÆÈÄâÊã©ÁöÑÁ≠ñÁï•ÊúçÂä°‰∏§Â§ßÁõÆÊ†á:ÊúÄÂ§ßÂåñÊï∞ÊçÆÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄßÔºåÊúÄÂ§ßÂåñÁΩëÁªúÂ∏¶ÂÆΩÂà©Áî®Áéá„ÄÇ‰∏∫‰∫Ü ÂÆûÁé∞Ëøô‰∏§‰∏™ÁõÆÁöÑÔºå‰ªÖ‰ªÖÊòØÂú®Â§öÂè∞Êú∫Âô®‰∏äÂàÜÂà´Â≠òÂÇ®Ëøô‰∫õÂâØÊú¨ÊòØ‰∏çÂ§üÁöÑÔºåËøôÂè™ËÉΩÈ¢ÑÈò≤Á°¨ÁõòÊçüÂùèÊàñËÄÖÊú∫Âô®Â§±ÊïàÂ∏¶Êù•ÁöÑÂΩ±ÂìçÔºå‰ª•ÂèäÊúÄÂ§ßÂåñÊØèÂè∞Êú∫Âô®ÁöÑÁΩëÁªúÂ∏¶ÂÆΩÂà©Áî®Áéá„ÄÇÊàë‰ª¨ÂøÖÈ°ªÂú®Â§ö‰∏™Êú∫Êû∂Èó¥ÂàÜÂ∏ÉÂÇ®Â≠ò Chunk ÁöÑÂâØÊú¨„ÄÇËøô‰øùËØÅ Chunk ÁöÑ‰∏Ä‰∫õÂâØÊú¨Âú®Êï¥‰∏™Êú∫Êû∂Ë¢´Á†¥ÂùèÊàñÊéâÁ∫ø(ÊØîÂ¶ÇÔºåÂÖ±‰∫´ËµÑÊ∫êÔºåÂ¶ÇÁîµÊ∫êÊàñËÄÖÁΩëÁªú‰∫§Êç¢Êú∫ÈÄ†ÊàêÁöÑÈóÆÈ¢ò)ÁöÑÊÉÖÂÜµ‰∏ã‰æùÁÑ∂ Â≠òÂú®‰∏î‰øùÊåÅÂèØÁî®Áä∂ÊÄÅ„ÄÇËøôËøòÊÑèÂë≥ÁùÄÂú®ÁΩëÁªúÊµÅÈáèÊñπÈù¢ÔºåÂ∞§ÂÖ∂ÊòØÈíàÂØπ Chunk ÁöÑËØªÊìç‰ΩúÔºåËÉΩÂ§üÊúâÊïàÂà©Áî®Â§ö‰∏™Êú∫Êû∂ÁöÑÊï¥ÂêàÂ∏¶ÂÆΩ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÂÜôÊìç‰ΩúÂøÖÈ°ªÂíåÂ§ö‰∏™Êú∫Êû∂‰∏äÁöÑËÆæÂ§áËøõË°åÁΩëÁªúÈÄö‰ø°Ôºå‰ΩÜÊòØËøô‰∏™‰ª£‰ª∑ÊòØÊàë‰ª¨ÊÑøÊÑè‰ªòÂá∫ÁöÑ„ÄÇ</p>
<h3 id="ÂàõÂª∫ÔºåÈáçÊñ∞Â§çÂà∂ÔºåÈáçÊñ∞Ë¥üËΩΩÂùáË°°"><a href="#ÂàõÂª∫ÔºåÈáçÊñ∞Â§çÂà∂ÔºåÈáçÊñ∞Ë¥üËΩΩÂùáË°°" class="headerlink" title="ÂàõÂª∫ÔºåÈáçÊñ∞Â§çÂà∂ÔºåÈáçÊñ∞Ë¥üËΩΩÂùáË°°"></a>ÂàõÂª∫ÔºåÈáçÊñ∞Â§çÂà∂ÔºåÈáçÊñ∞Ë¥üËΩΩÂùáË°°</h3><p>Chunk ÁöÑÂâØÊú¨Êúâ‰∏â‰∏™Áî®ÈÄî:Chunk ÂàõÂª∫ÔºåÈáçÊñ∞Â§çÂà∂ÂíåÈáçÊñ∞Ë¥üËΩΩÂùáË°°„ÄÇ<br>ÂΩì Master ËäÇÁÇπÂàõÂª∫‰∏Ä‰∏™ Chunk Êó∂ÔºåÂÆÉ‰ºöÈÄâÊã©Âú®Âì™ÈáåÊîæÁΩÆÂàùÂßãÁöÑÁ©∫ÁöÑÂâØÊú¨„ÄÇMaster ËäÇÁÇπ‰ºöËÄÉËôëÂá†‰∏™Âõ†Á¥† :<br>(1)Êàë‰ª¨Â∏åÊúõÂú®‰Ωé‰∫éÂπ≥ÂùáÁ°¨Áõò‰ΩøÁî®ÁéáÁöÑ Chunk ÊúçÂä°Âô®‰∏äÂ≠òÂÇ®Êñ∞ÁöÑÂâØÊú¨„ÄÇËøôÊ†∑ÁöÑÂÅöÊ≥ïÊúÄÁªàËÉΩÂ§üÂπ≥Ë°°ChunkÊúçÂä°Âô®‰πãÈó¥ÁöÑÁ°¨Áõò‰ΩøÁî®Áéá„ÄÇ</p>
<p>(2)Êàë‰ª¨Â∏åÊúõÈôêÂà∂Âú®ÊØè‰∏™ Chunk ÊúçÂä°Âô®‰∏ä‚ÄúÊúÄËøë‚ÄùÁöÑ Chunk ÂàõÂª∫Êìç‰ΩúÁöÑÊ¨°Êï∞„ÄÇËôΩÁÑ∂ÂàõÂª∫Êìç‰ΩúÊú¨Ë∫´ÊòØÂªâ‰ª∑ÁöÑÔºå‰ΩÜÊòØÂàõÂª∫Êìç‰Ωú‰πüÊÑèÂë≥ÁùÄÈöè‰πã‰ºöÊúâÂ§ßÈáèÁöÑÂÜôÂÖ•Êï∞ÊçÆÁöÑÊìç‰ΩúÔºåÂõ†‰∏∫ Chunk Âú® Writer ÁúüÊ≠£ÂÜôÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄôÊâç Ë¢´ÂàõÂª∫ÔºåËÄåÂú®Êàë‰ª¨ÁöÑ‚ÄúËøΩÂä†‰∏ÄÊ¨°ÔºåËØªÂèñÂ§öÊ¨°‚ÄùÁöÑÂ∑•‰ΩúÊ®°Âºè‰∏ãÔºåChunk ‰∏ÄÊó¶ÂÜôÂÖ•ÊàêÂäü‰πãÂêéÂ∞±‰ºöÂèò‰∏∫Âè™ËØªÁöÑ‰∫Ü„ÄÇ</p>
<p>(3)Â¶Ç‰∏äÊâÄËø∞ÔºåÊàë‰ª¨Â∏åÊúõÊää Chunk ÁöÑÂâØÊú¨ÂàÜÂ∏ÉÂú®Â§ö‰∏™Êú∫Êû∂‰πãÈó¥„ÄÇ</p>
<p>ÂΩì Chunk ÁöÑÊúâÊïàÂâØÊú¨Êï∞ÈáèÂ∞ë‰∫éÁî®Êà∑ÊåáÂÆöÁöÑÂ§çÂà∂Âõ†Êï∞ÁöÑÊó∂ÂÄôÔºåMaster ËäÇÁÇπ‰ºöÈáçÊñ∞Â§çÂà∂ÂÆÉ„ÄÇËøôÂèØËÉΩÊòØÁî±Âá†‰∏™ ÂéüÂõ†ÂºïËµ∑ÁöÑ:‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®‰∏çÂèØÁî®‰∫ÜÔºåChunk ÊúçÂä°Âô®Êä•ÂëäÂÆÉÊâÄÂ≠òÂÇ®ÁöÑ‰∏Ä‰∏™ÂâØÊú¨ÊçüÂùè‰∫ÜÔºåChunk ÊúçÂä°Âô®ÁöÑ ‰∏Ä‰∏™Á£ÅÁõòÂõ†‰∏∫ÈîôËØØ‰∏çÂèØÁî®‰∫ÜÔºåÊàñËÄÖ Chunk ÂâØÊú¨ÁöÑÂ§çÂà∂Âõ†Êï∞ÊèêÈ´ò‰∫Ü„ÄÇÊØè‰∏™ÈúÄË¶ÅË¢´ÈáçÊñ∞Â§çÂà∂ÁöÑ Chunk ÈÉΩ‰ºöÊ†πÊçÆÂá† ‰∏™Âõ†Á¥†ËøõË°åÊéíÂ∫è„ÄÇ‰∏Ä‰∏™Âõ†Á¥†ÊòØ Chunk Áé∞ÊúâÂâØÊú¨Êï∞ÈáèÂíåÂ§çÂà∂Âõ†Êï∞Áõ∏Â∑ÆÂ§öÂ∞ë„ÄÇ‰æãÂ¶ÇÔºå‰∏¢Â§±‰∏§‰∏™ÂâØÊú¨ÁöÑ Chunk ÊØî‰∏¢ Â§±‰∏Ä‰∏™ÂâØÊú¨ÁöÑ Chunk ÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ß„ÄÇÂè¶Â§ñÔºåÊàë‰ª¨‰ºòÂÖàÈáçÊñ∞Â§çÂà∂Ê¥ªË∑É(live)Êñá‰ª∂ÁöÑ Chunk ËÄå‰∏çÊòØÊúÄËøëÂàöË¢´ Âà†Èô§ÁöÑÊñá‰ª∂ÁöÑ Chunk(Êü•Áúã 4.4 ËäÇ)„ÄÇÊúÄÂêéÔºå‰∏∫‰∫ÜÊúÄÂ∞èÂåñÂ§±ÊïàÁöÑ Chunk ÂØπÊ≠£Âú®ËøêË°åÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÂΩ±ÂìçÔºåÊàë‰ª¨Êèê È´ò‰ºöÈòªÂ°ûÂÆ¢Êà∑Êú∫Á®ãÂ∫èÂ§ÑÁêÜÊµÅÁ®ãÁöÑ Chunk ÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ</p>
<p>Master ËäÇÁÇπÈÄâÊã©‰ºòÂÖàÁ∫ßÊúÄÈ´òÁöÑ ChunkÔºåÁÑ∂ÂêéÂëΩ‰ª§Êüê‰∏™ Chunk ÊúçÂä°Âô®Áõ¥Êé•‰ªéÂèØÁî®ÁöÑÂâØÊú¨‚ÄùÂÖãÈöÜ‚Äù‰∏Ä‰∏™ÂâØÊú¨ Âá∫Êù•„ÄÇÈÄâÊã©Êñ∞ÂâØÊú¨ÁöÑ‰ΩçÁΩÆÁöÑÁ≠ñÁï•ÂíåÂàõÂª∫Êó∂Á±ª‰ºº:Âπ≥Ë°°Á°¨Áõò‰ΩøÁî®Áéá„ÄÅÈôêÂà∂Âêå‰∏ÄÂè∞ Chunk ÊúçÂä°Âô®‰∏äÁöÑÊ≠£Âú®ËøõË°åÁöÑ ÂÖãÈöÜÊìç‰ΩúÁöÑÊï∞Èáè„ÄÅÂú®Êú∫Êû∂Èó¥ÂàÜÂ∏ÉÂâØÊú¨„ÄÇ‰∏∫‰∫ÜÈò≤Ê≠¢ÂÖãÈöÜ‰∫ßÁîüÁöÑÁΩëÁªúÊµÅÈáèÂ§ßÂ§ßË∂ÖËøáÂÆ¢Êà∑Êú∫ÁöÑÊµÅÈáèÔºåMaster ËäÇÁÇπÂØπ Êï¥‰∏™ÈõÜÁæ§ÂíåÊØè‰∏™ Chunk ÊúçÂä°Âô®‰∏äÁöÑÂêåÊó∂ËøõË°åÁöÑÂÖãÈöÜÊìç‰ΩúÁöÑÊï∞ÈáèÈÉΩËøõË°å‰∫ÜÈôêÂà∂„ÄÇÂè¶Â§ñÔºåChunk ÊúçÂä°Âô®ÈÄöËøáË∞ÉËäÇ ÂÆÉÂØπÊ∫ê Chunk ÊúçÂä°Âô®ËØªËØ∑Ê±ÇÁöÑÈ¢ëÁéáÊù•ÈôêÂà∂ÂÆÉÁî®‰∫éÂÖãÈöÜÊìç‰ΩúÁöÑÂ∏¶ÂÆΩ„ÄÇ</p>
<p>ÊúÄÂêéÔºåMaster ÊúçÂä°Âô®Âë®ÊúüÊÄßÂú∞ÂØπÂâØÊú¨ËøõË°åÈáçÊñ∞Ë¥üËΩΩÂùáË°°:ÂÆÉÊ£ÄÊü•ÂΩìÂâçÁöÑÂâØÊú¨ÂàÜÂ∏ÉÊÉÖÂÜµÔºåÁÑ∂ÂêéÁßªÂä®ÂâØÊú¨‰ª• ‰æøÊõ¥Â•ΩÁöÑÂà©Áî®Á°¨ÁõòÁ©∫Èó¥„ÄÅÊõ¥ÊúâÊïàÁöÑËøõË°åË¥üËΩΩÂùáË°°„ÄÇËÄå‰∏îÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåMaster ÊúçÂä°Âô®ÈÄêÊ∏êÁöÑÂ°´Êª°‰∏Ä‰∏™Êñ∞ÁöÑ Chunk ÊúçÂä°Âô®ÔºåËÄå‰∏çÊòØÂú®Áü≠Êó∂Èó¥ÂÜÖÁî®Êñ∞ÁöÑ Chunk Â°´Êª°ÂÆÉÔºå‰ª•Ëá≥‰∫éËøáËΩΩ„ÄÇÊñ∞ÂâØÊú¨ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÈÄâÊã©Á≠ñÁï•Âíå‰∏äÈù¢ËÆ®ËÆ∫ÁöÑÁõ∏ Âêå„ÄÇÂè¶Â§ñÔºåMaster ËäÇÁÇπÂøÖÈ°ªÈÄâÊã©Âì™‰∏™ÂâØÊú¨Ë¶ÅË¢´ÁßªËµ∞„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµÔºåMaster ËäÇÁÇπÁßªËµ∞ÈÇ£‰∫õÂâ©‰ΩôÁ©∫Èó¥‰Ωé‰∫éÂπ≥ÂùáÂÄºÁöÑChunk ÊúçÂä°Âô®‰∏äÁöÑÂâØÊú¨Ôºå‰ªéËÄåÂπ≥Ë°°Á≥ªÁªüÊï¥‰ΩìÁöÑÁ°¨Áõò‰ΩøÁî®Áéá„ÄÇ</p>
<h3 id="ÂûÉÂúæÂõûÊî∂"><a href="#ÂûÉÂúæÂõûÊî∂" class="headerlink" title="ÂûÉÂúæÂõûÊî∂"></a>ÂûÉÂúæÂõûÊî∂</h3><p>GFS Âú®Êñá‰ª∂Âà†Èô§Âêé‰∏ç‰ºöÁ´ãÂàªÂõûÊî∂ÂèØÁî®ÁöÑÁâ©ÁêÜÁ©∫Èó¥„ÄÇGFS Á©∫Èó¥ÂõûÊî∂ÈááÁî®ÊÉ∞ÊÄßÁöÑÁ≠ñÁï•ÔºåÂè™Âú®Êñá‰ª∂Âíå Chunk Á∫ß ÁöÑÂ∏∏ËßÑÂûÉÂúæÊî∂ÈõÜÊó∂ËøõË°å„ÄÇÊàë‰ª¨ÂèëÁé∞Ëøô‰∏™ÊñπÊ≥ï‰ΩøÁ≥ªÁªüÊõ¥ÁÆÄÂçï„ÄÅÊõ¥ÂèØÈù†„ÄÇ</p>
<h4 id="Êú∫Âà∂"><a href="#Êú∫Âà∂" class="headerlink" title="Êú∫Âà∂"></a>Êú∫Âà∂</h4><p>ÂΩì‰∏Ä‰∏™Êñá‰ª∂Ë¢´Â∫îÁî®Á®ãÂ∫èÂà†Èô§Êó∂ÔºåMaster ËäÇÁÇπË±°ÂØπÂæÖÂÖ∂ÂÆÉ‰øÆÊîπÊìç‰Ωú‰∏ÄÊ†∑ÔºåÁ´ãÂàªÊääÂà†Èô§Êìç‰Ωú‰ª•Êó•ÂøóÁöÑÊñπÂºèËÆ∞ ÂΩï‰∏ãÊù•„ÄÇ‰ΩÜÊòØÔºåMaster ËäÇÁÇπÂπ∂‰∏çÈ©¨‰∏äÂõûÊî∂ËµÑÊ∫êÔºåËÄåÊòØÊääÊñá‰ª∂ÂêçÊîπ‰∏∫‰∏Ä‰∏™ÂåÖÂê´Âà†Èô§Êó∂Èó¥Êà≥ÁöÑ„ÄÅÈöêËóèÁöÑÂêçÂ≠ó„ÄÇÂΩì Master ËäÇÁÇπÂØπÊñá‰ª∂Á≥ªÁªüÂëΩÂêçÁ©∫Èó¥ÂÅöÂ∏∏ËßÑÊâ´ÊèèÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöÂà†Èô§ÊâÄÊúâ‰∏âÂ§©ÂâçÁöÑÈöêËóèÊñá‰ª∂(Ëøô‰∏™Êó∂Èó¥Èó¥ÈöîÊòØÂèØ‰ª• ËÆæÁΩÆÁöÑ)„ÄÇÁõ¥Âà∞Êñá‰ª∂Ë¢´ÁúüÊ≠£Âà†Èô§ÔºåÂÆÉ‰ª¨‰ªçÊóßÂèØ‰ª•Áî®Êñ∞ÁöÑÁâπÊÆäÁöÑÂêçÂ≠óËØªÂèñÔºå‰πüÂèØ‰ª•ÈÄöËøáÊääÈöêËóèÊñá‰ª∂ÊîπÂêç‰∏∫Ê≠£Â∏∏Êòæ Á§∫ÁöÑÊñá‰ª∂ÂêçÁöÑÊñπÂºè‚ÄúÂèçÂà†Èô§‚Äù„ÄÇÂΩìÈöêËóèÊñá‰ª∂Ë¢´‰ªéÂêçÁß∞Á©∫Èó¥‰∏≠Âà†Èô§ÔºåMaster ÊúçÂä°Âô®ÂÜÖÂ≠ò‰∏≠‰øùÂ≠òÁöÑËøô‰∏™Êñá‰ª∂ÁöÑÁõ∏ÂÖ≥ ÂÖÉÊï∞ÊçÆÊâç‰ºöË¢´Âà†Èô§„ÄÇËøô‰πüÊúâÊïàÁöÑÂàáÊñ≠‰∫ÜÊñá‰ª∂ÂíåÂÆÉÂåÖÂê´ÁöÑÊâÄÊúâ Chunk ÁöÑËøûÊé•„ÄÇ</p>
<p>Âú®ÂØπ Chunk ÂêçÂ≠óÁ©∫Èó¥ÂÅöÁ±ª‰ººÁöÑÂ∏∏ËßÑÊâ´ÊèèÊó∂ÔºåMaster ËäÇÁÇπÊâæÂà∞Â≠§ÂÑø Chunk(‰∏çË¢´‰ªª‰ΩïÊñá‰ª∂ÂåÖÂê´ÁöÑ Chunk) Âπ∂Âà†Èô§ÂÆÉ‰ª¨ÁöÑÂÖÉÊï∞ÊçÆ„ÄÇChunk ÊúçÂä°Âô®Âú®Âíå Master ËäÇÁÇπ‰∫§‰∫íÁöÑÂøÉË∑≥‰ø°ÊÅØ‰∏≠ÔºåÊä•ÂëäÂÆÉÊã•ÊúâÁöÑ Chunk Â≠êÈõÜÁöÑ‰ø°ÊÅØÔºå Master ËäÇÁÇπÂõûÂ§ç Chunk ÊúçÂä°Âô®Âì™‰∫õ Chunk Âú® Master ËäÇÁÇπ‰øùÂ≠òÁöÑÂÖÉÊï∞ÊçÆ‰∏≠Â∑≤Áªè‰∏çÂ≠òÂú®‰∫Ü„ÄÇChunk ÊúçÂä°Âô®ÂèØ‰ª•‰ªª ÊÑèÂà†Èô§Ëøô‰∫õ Chunk ÁöÑÂâØÊú¨„ÄÇ</p>
<h4 id="ËÆ®ËÆ∫"><a href="#ËÆ®ËÆ∫" class="headerlink" title="ËÆ®ËÆ∫"></a>ËÆ®ËÆ∫</h4><p>ËôΩÁÑ∂ÂàÜÂ∏ÉÂºèÂûÉÂúæÂõûÊî∂Âú®ÁºñÁ®ãËØ≠Ë®ÄÈ¢ÜÂüüÊòØ‰∏Ä‰∏™ÈúÄË¶ÅÂ§çÊùÇÁöÑÊñπÊ°àÊâçËÉΩËß£ÂÜ≥ÁöÑÈöæÈ¢òÔºå‰ΩÜÊòØÂú® GFS Á≥ªÁªü‰∏≠ÊòØÈùûÂ∏∏ ÁÆÄÂçïÁöÑ„ÄÇÊàë‰ª¨ÂèØ‰ª•ËΩªÊòìÁöÑÂæóÂà∞ Chunk ÁöÑÊâÄÊúâÂºïÁî®:ÂÆÉ‰ª¨ÈÉΩÂè™Â≠òÂÇ®Âú® Master ÊúçÂä°Âô®‰∏äÁöÑÊñá‰ª∂Âà∞ÂùóÁöÑÊò†Â∞ÑË°®‰∏≠„ÄÇ Êàë‰ª¨‰πüÂèØ‰ª•ÂæàËΩªÊòìÁöÑÂæóÂà∞ÊâÄÊúâ Chunk ÁöÑÂâØÊú¨:ÂÆÉ‰ª¨ÈÉΩ‰ª• Linux Êñá‰ª∂ÁöÑÂΩ¢ÂºèÂ≠òÂÇ®Âú® Chunk ÊúçÂä°Âô®ÁöÑÊåáÂÆöÁõÆÂΩï‰∏ã„ÄÇ ÊâÄÊúâ Master ËäÇÁÇπ‰∏çËÉΩËØÜÂà´ÁöÑÂâØÊú¨ÈÉΩÊòØ‚ÄúÂûÉÂúæ‚Äù„ÄÇ</p>
<p>ÂûÉÂúæÂõûÊî∂Âú®Á©∫Èó¥ÂõûÊî∂ÊñπÈù¢Áõ∏ÊØîÁõ¥Êé•Âà†Èô§ÊúâÂá†‰∏™‰ºòÂäø„ÄÇÈ¶ñÂÖàÔºåÂØπ‰∫éÁªÑ‰ª∂Â§±ÊïàÊòØÂ∏∏ÊÄÅÁöÑÂ§ßËßÑÊ®°ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºå ÂûÉÂúæÂõûÊî∂ÊñπÂºèÁÆÄÂçïÂèØÈù†„ÄÇChunk ÂèØËÉΩÂú®Êüê‰∫õ Chunk ÊúçÂä°Âô®ÂàõÂª∫ÊàêÂäüÔºåÊüê‰∫õ Chunk ÊúçÂä°Âô®‰∏äÂàõÂª∫Â§±Ë¥•ÔºåÂ§±Ë¥•ÁöÑ ÂâØÊú¨Â§Ñ‰∫éÊó†Ê≥ïË¢´ Master ËäÇÁÇπËØÜÂà´ÁöÑÁä∂ÊÄÅ„ÄÇÂâØÊú¨Âà†Èô§Ê∂àÊÅØÂèØËÉΩ‰∏¢Â§±ÔºåMaster ËäÇÁÇπÂøÖÈ°ªÈáçÊñ∞ÂèëÈÄÅÂ§±Ë¥•ÁöÑÂà†Èô§Ê∂àÊÅØÔºå ÂåÖÊã¨Ëá™Ë∫´ÁöÑÂíå Chunk ÊúçÂä°Âô®ÁöÑ(<em>Ëá™Ë∫´ÁöÑÊåáÂà†Èô§ metadata ÁöÑÊ∂àÊÅØ</em>)„ÄÇÂûÉÂúæÂõûÊî∂Êèê‰æõ‰∫Ü‰∏ÄËá¥ÁöÑ„ÄÅÂèØÈù†ÁöÑÊ∏ÖÈô§Êó†Áî®ÂâØÊú¨ÁöÑÊñπÊ≥ï„ÄÇÁ¨¨‰∫åÔºåÂûÉÂúæÂõûÊî∂Êää Â≠òÂÇ®Á©∫Èó¥ÁöÑÂõûÊî∂Êìç‰ΩúÂêàÂπ∂Âà∞ Master ËäÇÁÇπËßÑÂæãÊÄßÁöÑÂêéÂè∞Ê¥ªÂä®‰∏≠ÔºåÊØîÂ¶ÇÔºå‰æãË°åÊâ´ÊèèÂíå‰∏é Chunk ÊúçÂä°Âô®Êè°ÊâãÁ≠â„ÄÇÂõ† Ê≠§ÔºåÊìç‰ΩúË¢´ÊâπÈáèÁöÑÊâßË°åÔºåÂºÄÈîÄ‰ºöË¢´ÂàÜÊï£„ÄÇÂè¶Â§ñÔºåÂûÉÂúæÂõûÊî∂Âú® Master ËäÇÁÇπÁõ∏ÂØπÁ©∫Èó≤ÁöÑÊó∂ÂÄôÂÆåÊàê„ÄÇËøôÊ†∑ MasterËäÇÁÇπÂ∞±ÂèØ‰ª•ÁªôÈÇ£‰∫õÈúÄË¶ÅÂø´ÈÄüÂèçÂ∫îÁöÑÂÆ¢Êà∑Êú∫ËØ∑Ê±ÇÊèê‰æõÊõ¥Âø´Êç∑ÁöÑÂìçÂ∫î„ÄÇÁ¨¨‰∏âÔºåÂª∂ÁºìÂ≠òÂÇ®Á©∫Èó¥ÂõûÊî∂‰∏∫ÊÑèÂ§ñÁöÑ„ÄÅ‰∏çÂèØ<br>ÈÄÜËΩ¨ÁöÑÂà†Èô§Êìç‰ΩúÊèê‰æõ‰∫ÜÂÆâÂÖ®‰øùÈöú„ÄÇ</p>
<p>Ê†πÊçÆÊàë‰ª¨ÁöÑ‰ΩøÁî®ÁªèÈ™åÔºåÂª∂ËøüÂõûÊî∂Á©∫Èó¥ÁöÑ‰∏ªË¶ÅÈóÆÈ¢òÊòØÔºåÂª∂ËøüÂõûÊî∂‰ºöÈòªÁ¢çÁî®Êà∑Ë∞É‰ºòÂ≠òÂÇ®Á©∫Èó¥ÁöÑ‰ΩøÁî®ÔºåÁâπÂà´ÊòØ<br>ÂΩìÂ≠òÂÇ®Á©∫Èó¥ÊØîËæÉÁ¥ßÁº∫ÁöÑÊó∂ÂÄô„ÄÇÂΩìÂ∫îÁî®Á®ãÂ∫èÈáçÂ§çÂàõÂª∫ÂíåÂà†Èô§‰∏¥Êó∂Êñá‰ª∂Êó∂ÔºåÈáäÊîæÁöÑÂ≠òÂÇ®Á©∫Èó¥‰∏çËÉΩÈ©¨‰∏äÈáçÁî®„ÄÇÊàë‰ª¨ ÈÄöËøáÊòæÂºèÁöÑÂÜçÊ¨°Âà†Èô§‰∏Ä‰∏™Â∑≤ÁªèË¢´Âà†Èô§ÁöÑÊñá‰ª∂ÁöÑÊñπÂºèÂä†ÈÄüÁ©∫Èó¥ÂõûÊî∂ÁöÑÈÄüÂ∫¶„ÄÇÊàë‰ª¨ÂÖÅËÆ∏Áî®Êà∑‰∏∫ÂëΩÂêçÁ©∫Èó¥ÁöÑ‰∏çÂêåÈÉ® ÂàÜËÆæÂÆö‰∏çÂêåÁöÑÂ§çÂà∂ÂíåÂõûÊî∂Á≠ñÁï•„ÄÇ‰æãÂ¶ÇÔºåÁî®Êà∑ÂèØ‰ª•ÊåáÂÆöÊüê‰∫õÁõÆÂΩïÊ†ë‰∏ãÈù¢ÁöÑÊñá‰ª∂‰∏çÂÅöÂ§çÂà∂ÔºåÂà†Èô§ÁöÑÊñá‰ª∂Ë¢´Âç≥Êó∂ÁöÑ„ÄÅ ‰∏çÂèØÊÅ¢Â§çÁöÑ‰ªéÊñá‰ª∂Á≥ªÁªüÁßªÈô§„ÄÇ</p>
<h3 id="ËøáÊúüÂ§±ÊïàÁöÑÂâØÊú¨Ê£ÄÊµã"><a href="#ËøáÊúüÂ§±ÊïàÁöÑÂâØÊú¨Ê£ÄÊµã" class="headerlink" title="ËøáÊúüÂ§±ÊïàÁöÑÂâØÊú¨Ê£ÄÊµã"></a>ËøáÊúüÂ§±ÊïàÁöÑÂâØÊú¨Ê£ÄÊµã</h3><p>ÂΩì Chunk ÊúçÂä°Âô®Â§±ÊïàÊó∂ÔºåChunk ÁöÑÂâØÊú¨ÊúâÂèØËÉΩÂõ†ÈîôÂ§±‰∫Ü‰∏Ä‰∫õ‰øÆÊîπÊìç‰ΩúËÄåËøáÊúüÂ§±Êïà„ÄÇMaster ËäÇÁÇπ‰øùÂ≠ò‰∫ÜÊØè ‰∏™ Chunk ÁöÑÁâàÊú¨Âè∑ÔºåÁî®Êù•Âå∫ÂàÜÂΩìÂâçÁöÑÂâØÊú¨ÂíåËøáÊúüÂâØÊú¨„ÄÇ</p>
<p>Êó†ËÆ∫‰ΩïÊó∂ÔºåÂè™Ë¶Å Master ËäÇÁÇπÂíå Chunk Á≠æËÆ¢‰∏Ä‰∏™Êñ∞ÁöÑÁßüÁ∫¶ÔºåÂÆÉÂ∞±Â¢ûÂä† Chunk ÁöÑÁâàÊú¨Âè∑ÔºåÁÑ∂ÂêéÈÄöÁü•ÊúÄÊñ∞ÁöÑ ÂâØÊú¨„ÄÇMaster ËäÇÁÇπÂíåËøô‰∫õÂâØÊú¨ÈÉΩÊääÊñ∞ÁöÑÁâàÊú¨Âè∑ËÆ∞ÂΩïÂú®ÂÆÉ‰ª¨ÊåÅ‰πÖÂåñÂ≠òÂÇ®ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ‰∏≠„ÄÇËøô‰∏™Âä®‰ΩúÂèëÁîüÂú®‰ªª‰ΩïÂÆ¢ Êà∑Êú∫ÂæóÂà∞ÈÄöÁü•‰ª•ÂâçÔºåÂõ†Ê≠§‰πüÊòØÂØπËøô‰∏™ Chunk ÂºÄÂßãÂÜô‰πãÂâç„ÄÇÂ¶ÇÊûúÊüê‰∏™ÂâØÊú¨ÊâÄÂú®ÁöÑ Chunk ÊúçÂä°Âô®Ê≠£Â•ΩÂ§Ñ‰∫éÂ§±ÊïàÁä∂ ÊÄÅÔºåÈÇ£‰πàÂâØÊú¨ÁöÑÁâàÊú¨Âè∑Â∞±‰∏ç‰ºöË¢´Â¢ûÂä†„ÄÇMaster ËäÇÁÇπÂú®Ëøô‰∏™ Chunk ÊúçÂä°Âô®ÈáçÊñ∞ÂêØÂä®ÔºåÂπ∂‰∏îÂêë Master ËäÇÁÇπÊä•ÂëäÂÆÉ Êã•ÊúâÁöÑ Chunk ÁöÑÈõÜÂêà‰ª•ÂèäÁõ∏Â∫îÁöÑÁâàÊú¨Âè∑ÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÊ£ÄÊµãÂá∫ÂÆÉÂåÖÂê´ËøáÊúüÁöÑ Chunk„ÄÇÂ¶ÇÊûú Master ËäÇÁÇπÁúãÂà∞‰∏Ä‰∏™ ÊØîÂÆÉËÆ∞ÂΩïÁöÑÁâàÊú¨Âè∑Êõ¥È´òÁöÑÁâàÊú¨Âè∑ÔºåMaster ËäÇÁÇπ‰ºöËÆ§‰∏∫ÂÆÉÂíå Chunk ÊúçÂä°Âô®Á≠æËÆ¢ÁßüÁ∫¶ÁöÑÊìç‰ΩúÂ§±Ë¥•‰∫ÜÔºåÂõ†Ê≠§‰ºöÈÄâÊã© Êõ¥È´òÁöÑÁâàÊú¨Âè∑‰Ωú‰∏∫ÂΩìÂâçÁöÑÁâàÊú¨Âè∑„ÄÇ</p>
<p>Master ËäÇÁÇπÂú®‰æãË°åÁöÑÂûÉÂúæÂõûÊî∂ËøáÁ®ã‰∏≠ÁßªÈô§ÊâÄÊúâÁöÑËøáÊúüÂ§±ÊïàÂâØÊú¨„ÄÇÂú®Ê≠§‰πãÂâçÔºåMaster ËäÇÁÇπÂú®ÂõûÂ§çÂÆ¢Êà∑Êú∫ÁöÑ Chunk ‰ø°ÊÅØËØ∑Ê±ÇÁöÑÊó∂ÂÄôÔºåÁÆÄÂçïÁöÑËÆ§‰∏∫ÈÇ£‰∫õËøáÊúüÁöÑÂùóÊ†πÊú¨Â∞±‰∏çÂ≠òÂú®„ÄÇÂè¶Â§ñ‰∏ÄÈáç‰øùÈöúÊé™ÊñΩÊòØÔºåMaster ËäÇÁÇπÂú®ÈÄöÁü• ÂÆ¢Êà∑Êú∫Âì™‰∏™ Chunk ÊúçÂä°Âô®ÊåÅÊúâÁßüÁ∫¶„ÄÅÊàñËÄÖÊåáÁ§∫ Chunk ÊúçÂä°Âô®‰ªéÂì™‰∏™ Chunk ÊúçÂä°Âô®ËøõË°åÂÖãÈöÜÊó∂ÔºåÊ∂àÊÅØ‰∏≠ÈÉΩÈôÑÂ∏¶ ‰∫Ü Chunk ÁöÑÁâàÊú¨Âè∑„ÄÇÂÆ¢Êà∑Êú∫ÊàñËÄÖ Chunk ÊúçÂä°Âô®Âú®ÊâßË°åÊìç‰ΩúÊó∂ÈÉΩ‰ºöÈ™åËØÅÁâàÊú¨Âè∑‰ª•Á°Æ‰øùÊÄªÊòØËÆøÈóÆÂΩìÂâçÁâàÊú¨ÁöÑÊï∞ÊçÆ„ÄÇ<br> <div class="note info"><h2 id="ÂÆπÈîôÂíåËØäÊñ≠"><a href="#ÂÆπÈîôÂíåËØäÊñ≠" class="headerlink" title="ÂÆπÈîôÂíåËØäÊñ≠"></a>ÂÆπÈîôÂíåËØäÊñ≠</h2></div><br>Êàë‰ª¨Âú®ËÆæËÆ° GFS Êó∂ÈÅáÂà∞ÁöÑÊúÄÂ§ßÊåëÊàò‰πã‰∏ÄÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÈ¢ëÁπÅÂèëÁîüÁöÑÁªÑ‰ª∂Â§±Êïà„ÄÇÁªÑ‰ª∂ÁöÑÊï∞ÈáèÂíåË¥®ÈáèËÆ©Ëøô‰∫õÈóÆÈ¢ò Âá∫Áé∞ÁöÑÈ¢ëÁéáËøúËøúË∂ÖËøá‰∏ÄËà¨Á≥ªÁªüÊÑèÂ§ñÂèëÁîüÁöÑÈ¢ëÁéá:Êàë‰ª¨‰∏çËÉΩÂÆåÂÖ®‰æùËµñÊú∫Âô®ÁöÑÁ®≥ÂÆöÊÄßÔºå‰πü‰∏çËÉΩÂÆåÂÖ®Áõ∏‰ø°Á°¨ÁõòÁöÑÂèØ Èù†ÊÄß„ÄÇÁªÑ‰ª∂ÁöÑÂ§±ÊïàÂèØËÉΩÈÄ†ÊàêÁ≥ªÁªü‰∏çÂèØÁî®ÔºåÊõ¥Á≥üÁ≥ïÁöÑÊòØÔºåËøòÂèØËÉΩ‰∫ßÁîü‰∏çÂÆåÊï¥ÁöÑÊï∞ÊçÆ„ÄÇÊàë‰ª¨ËÆ®ËÆ∫Êàë‰ª¨Â¶Ç‰ΩïÈù¢ÂØπËøô ‰∫õÊåëÊàòÔºå‰ª•ÂèäÂΩìÁªÑ‰ª∂Â§±Êïà‰∏çÂèØÈÅøÂÖçÁöÑÂèëÁîüÊó∂ÔºåÁî® GFS Ëá™Â∏¶Â∑•ÂÖ∑ËØäÊñ≠Á≥ªÁªüÊïÖÈöú„ÄÇ</p>
<h3 id="È´òÂèØÁî®ÊÄß"><a href="#È´òÂèØÁî®ÊÄß" class="headerlink" title="È´òÂèØÁî®ÊÄß"></a>È´òÂèØÁî®ÊÄß</h3><p>Âú® GFS ÈõÜÁæ§ÁöÑÊï∞Áôæ‰∏™ÊúçÂä°Âô®‰πã‰∏≠ÔºåÂú®‰ªª‰ΩïÁªôÂÆöÁöÑÊó∂Èó¥ÂøÖÂÆö‰ºöÊúâ‰∫õÊúçÂä°Âô®ÊòØ‰∏çÂèØÁî®ÁöÑ„ÄÇÊàë‰ª¨‰ΩøÁî®‰∏§Êù°ÁÆÄÂçï‰ΩÜÊòØÊúâÊïàÁöÑÁ≠ñÁï•‰øùËØÅÊï¥‰∏™Á≥ªÁªüÁöÑÈ´òÂèØÁî®ÊÄß:Âø´ÈÄüÊÅ¢Â§çÂíåÂ§çÂà∂„ÄÇ</p>
<h4 id="Âø´ÈÄüÊÅ¢Â§ç"><a href="#Âø´ÈÄüÊÅ¢Â§ç" class="headerlink" title="Âø´ÈÄüÊÅ¢Â§ç"></a>Âø´ÈÄüÊÅ¢Â§ç</h4><p>‰∏çÁÆ° Master ÊúçÂä°Âô®Âíå Chunk ÊúçÂä°Âô®ÊòØÂ¶Ç‰ΩïÂÖ≥Èó≠ÁöÑÔºåÂÆÉ‰ª¨ÈÉΩË¢´ËÆæËÆ°‰∏∫ÂèØ‰ª•Âú®Êï∞ÁßíÈíüÂÜÖÊÅ¢Â§çÂÆÉ‰ª¨ÁöÑÁä∂ÊÄÅÂπ∂Èáç Êñ∞ÂêØÂä®„ÄÇ‰∫ãÂÆû‰∏äÔºåÊàë‰ª¨Âπ∂‰∏çÂå∫ÂàÜÊ≠£Â∏∏ÂÖ≥Èó≠ÂíåÂºÇÂ∏∏ÂÖ≥Èó≠;ÈÄöÂ∏∏ÔºåÊàë‰ª¨ÈÄöËøáÁõ¥Êé• kill ÊéâËøõÁ®ãÊù•ÂÖ≥Èó≠ÊúçÂä°Âô®„ÄÇÂÆ¢Êà∑ Êú∫ÂíåÂÖ∂ÂÆÉÁöÑÊúçÂä°Âô®‰ºöÊÑüËßâÂà∞Á≥ªÁªüÊúâÁÇπÈ¢†Á∞∏(<em>a minor hiccup</em>)ÔºåÊ≠£Âú®ÂèëÂá∫ÁöÑËØ∑Ê±Ç‰ºöË∂ÖÊó∂ÔºåÈúÄË¶ÅÈáçÊñ∞ËøûÊé•Âà∞ÈáçÂêØÂêéÁöÑÊúçÂä°Âô®ÔºåÁÑ∂Âêé ÈáçËØïËøô‰∏™ËØ∑Ê±Ç„ÄÇ6.6.2 Á´†ËäÇËÆ∞ÂΩï‰∫ÜÂÆûÊµãÁöÑÂêØÂä®Êó∂Èó¥„ÄÇ</p>
<h4 id="Chunk-Â§çÂà∂"><a href="#Chunk-Â§çÂà∂" class="headerlink" title="Chunk Â§çÂà∂"></a>Chunk Â§çÂà∂</h4><p>Ê≠£Â¶Ç‰πãÂâçËÆ®ËÆ∫ÁöÑÔºåÊØè‰∏™ Chunk ÈÉΩË¢´Â§çÂà∂Âà∞‰∏çÂêåÊú∫Êû∂‰∏äÁöÑ‰∏çÂêåÁöÑ Chunk ÊúçÂä°Âô®‰∏ä„ÄÇÁî®Êà∑ÂèØ‰ª•‰∏∫Êñá‰ª∂ÂëΩÂêçÁ©∫ Èó¥ÁöÑ‰∏çÂêåÈÉ®ÂàÜËÆæÂÆö‰∏çÂêåÁöÑÂ§çÂà∂Á∫ßÂà´„ÄÇÁº∫ÁúÅÊòØ 3„ÄÇÂΩìÊúâ Chunk ÊúçÂä°Âô®Á¶ªÁ∫ø‰∫ÜÔºåÊàñËÄÖÈÄöËøá Chksum Ê†°È™å(ÂèÇËÄÉ 5.2 ËäÇ)ÂèëÁé∞‰∫ÜÂ∑≤ÁªèÊçüÂùèÁöÑÊï∞ÊçÆÔºåMaster ËäÇÁÇπÈÄöËøáÂÖãÈöÜÂ∑≤ÊúâÁöÑÂâØÊú¨‰øùËØÅÊØè‰∏™ Chunk ÈÉΩË¢´ÂÆåÊï¥Â§çÂà∂(<em>Âç≥ÊØè‰∏™ Chunk ÈÉΩÊúâÂ§çÂà∂Âõ†Â≠êÂà∂ÂÆöÁöÑ‰∏™Êï∞‰∏™ÂâØÊú¨ÔºåÁº∫ÁúÅÊòØ 3</em>)„ÄÇËôΩÁÑ∂ Chunk Â§çÂà∂Á≠ñÁï•ÂØπÊàë‰ª¨ÈùûÂ∏∏ÊúâÊïàÔºå‰ΩÜÊòØÊàë‰ª¨‰πüÂú®ÂØªÊâæÂÖ∂ÂÆÉÂΩ¢ÂºèÁöÑË∑®ÊúçÂä°Âô®ÁöÑÂÜó‰ΩôËß£ÂÜ≥ÊñπÊ°àÔºåÊØîÂ¶Ç‰ΩøÁî®Â•áÂÅ∂Ê†°È™å„ÄÅÊàñ ËÄÖ Erasure codes(<em>Erasure codes Áî®Êù•Ëß£ÂÜ≥ÈìæÊé•Â±Ç‰∏≠‰∏çÁõ∏ÂÖ≥ÁöÑÈîôËØØÔºå‰ª•ÂèäÁΩëÁªúÊã•Â°ûÂíå buffer ÈôêÂà∂ÈÄ†ÊàêÁöÑ‰∏¢ÂåÖÈîôËØØ</em>)Êù•Ëß£ÂÜ≥Êàë‰ª¨Êó•ÁõäÂ¢ûÈïøÁöÑÂè™ËØªÂ≠òÂÇ®ÈúÄÊ±Ç„ÄÇÊàë‰ª¨ÁöÑÁ≥ªÁªü‰∏ªË¶ÅÁöÑÂ∑•‰ΩúË¥üËΩΩÊòØËøΩÂä†ÊñπÂºèÁöÑÂÜôÂÖ•ÂíåËØªÂèñ Êìç‰ΩúÔºåÂæàÂ∞ëÊúâÈöèÊú∫ÁöÑÂÜôÂÖ•Êìç‰ΩúÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ËÆ§‰∏∫Âú®Êàë‰ª¨Ëøô‰∏™È´òÂ∫¶Ëß£ËÄ¶ÂêàÁöÑÁ≥ªÁªüÊû∂ÊûÑ‰∏ãÂÆûÁé∞Ëøô‰∫õÂ§çÊùÇÁöÑÂÜó‰ΩôÊñπ Ê°àÂæàÊúâÊåëÊàòÊÄßÔºå‰ΩÜÂπ∂Èùû‰∏çÂèØÂÆûÁé∞„ÄÇ</p>
<h4 id="Master-ÊúçÂä°Âô®ÁöÑÂ§çÂà∂"><a href="#Master-ÊúçÂä°Âô®ÁöÑÂ§çÂà∂" class="headerlink" title="Master ÊúçÂä°Âô®ÁöÑÂ§çÂà∂"></a>Master ÊúçÂä°Âô®ÁöÑÂ§çÂà∂</h4><p>‰∏∫‰∫Ü‰øùËØÅ Master ÊúçÂä°Âô®ÁöÑÂèØÈù†ÊÄßÔºåMaster ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅ‰πüË¶ÅÂ§çÂà∂„ÄÇMaster ÊúçÂä°Âô®ÊâÄÊúâÁöÑÊìç‰ΩúÊó•ÂøóÂíå checkpoint Êñá‰ª∂ÈÉΩË¢´Â§çÂà∂Âà∞Â§öÂè∞Êú∫Âô®‰∏ä„ÄÇÂØπ Master ÊúçÂä°Âô®Áä∂ÊÄÅÁöÑ‰øÆÊîπÊìç‰ΩúËÉΩÂ§üÊèê‰∫§ÊàêÂäüÁöÑÂâçÊèêÊòØÔºåÊìç‰ΩúÊó•Âøó ÂÜôÂÖ•Âà∞ Master ÊúçÂä°Âô®ÁöÑÂ§áËäÇÁÇπÂíåÊú¨Êú∫ÁöÑÁ£ÅÁõò„ÄÇÁÆÄÂçïËØ¥Êù•Ôºå‰∏Ä‰∏™ Master ÊúçÂä°ËøõÁ®ãË¥üË¥£ÊâÄÊúâÁöÑ‰øÆÊîπÊìç‰ΩúÔºåÂåÖÊã¨Âêé Âè∞ÁöÑÊúçÂä°ÔºåÊØîÂ¶ÇÂûÉÂúæÂõûÊî∂Á≠âÊîπÂèòÁ≥ªÁªüÂÜÖÈÉ®Áä∂ÊÄÅÊ¥ªÂä®„ÄÇÂΩìÂÆÉÂ§±ÊïàÁöÑÊó∂ÔºåÂá†‰πéÂèØ‰ª•Á´ãÂàªÈáçÊñ∞ÂêØÂä®„ÄÇÂ¶ÇÊûú Master Ëøõ Á®ãÊâÄÂú®ÁöÑÊú∫Âô®ÊàñËÄÖÁ£ÅÁõòÂ§±Êïà‰∫ÜÔºåÂ§Ñ‰∫é GFS Á≥ªÁªüÂ§ñÈÉ®ÁöÑÁõëÊéßËøõÁ®ã‰ºöÂú®ÂÖ∂ÂÆÉÁöÑÂ≠òÊúâÂÆåÊï¥Êìç‰ΩúÊó•ÂøóÁöÑÊú∫Âô®‰∏äÂêØÂä®‰∏Ä ‰∏™Êñ∞ÁöÑ Master ËøõÁ®ã„ÄÇÂÆ¢Êà∑Á´Ø‰ΩøÁî®ËßÑËåÉÁöÑÂêçÂ≠óËÆøÈóÆ Master(ÊØîÂ¶Ç gfs-test)ËäÇÁÇπÔºåËøô‰∏™ÂêçÂ≠óÁ±ª‰ºº DNS Âà´ÂêçÔºåÂõ† Ê≠§‰πüÂ∞±ÂèØ‰ª•Âú® Master ËøõÁ®ãËΩ¨Âà∞Âà´ÁöÑÊú∫Âô®‰∏äÊâßË°åÊó∂ÔºåÈÄöËøáÊõ¥ÊîπÂà´ÂêçÁöÑÂÆûÈôÖÊåáÂêëËÆøÈóÆÊñ∞ÁöÑ Master ËäÇÁÇπ„ÄÇ</p>
<p>Ê≠§Â§ñÔºåGFS ‰∏≠ËøòÊúâ‰∫õ‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®ÔºåËøô‰∫õ‚ÄúÂΩ±Â≠ê‚ÄùÊúçÂä°Âô®Âú®‚Äú‰∏ª‚ÄùMaster ÊúçÂä°Âô®ÂÆïÊú∫ÁöÑÊó∂ÂÄôÊèê ‰æõÊñá‰ª∂Á≥ªÁªüÁöÑÂè™ËØªËÆøÈóÆ„ÄÇÂÆÉ‰ª¨ÊòØÂΩ±Â≠êÔºåËÄå‰∏çÊòØÈïúÂÉèÔºåÊâÄ‰ª•ÂÆÉ‰ª¨ÁöÑÊï∞ÊçÆÂèØËÉΩÊØî‚Äú‰∏ª‚ÄùMaster ÊúçÂä°Âô®Êõ¥Êñ∞Ë¶ÅÊÖ¢Ôºå ÈÄöÂ∏∏ÊòØ‰∏çÂà∞ 1 Áßí„ÄÇÂØπ‰∫éÈÇ£‰∫õ‰∏çÁªèÂ∏∏ÊîπÂèòÁöÑÊñá‰ª∂„ÄÅÊàñËÄÖÈÇ£‰∫õÂÖÅËÆ∏Ëé∑ÂèñÁöÑÊï∞ÊçÆÊúâÂ∞ëÈáèËøáÊúüÁöÑÂ∫îÁî®Á®ãÂ∫èÔºå‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®ËÉΩÂ§üÊèêÈ´òËØªÂèñÁöÑÊïàÁéá„ÄÇ‰∫ãÂÆû‰∏äÔºåÂõ†‰∏∫Êñá‰ª∂ÂÜÖÂÆπÊòØ‰ªé Chunk ÊúçÂä°Âô®‰∏äËØªÂèñÁöÑÔºåÂõ†Ê≠§ÔºåÂ∫îÁî®Á®ãÂ∫è‰∏ç ‰ºöÂèëÁé∞ËøáÊúüÁöÑÊñá‰ª∂ÂÜÖÂÆπ„ÄÇÂú®Ëøô‰∏™Áü≠ÊöÇÁöÑÊó∂Èó¥Á™óÂÜÖÔºåËøáÊúüÁöÑÂèØËÉΩÊòØÊñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆÔºåÊØîÂ¶ÇÁõÆÂΩïÁöÑÂÜÖÂÆπÊàñËÄÖËÆøÈóÆÊéßÂà∂‰ø°ÊÅØ„ÄÇ</p>
<p>‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®‰∏∫‰∫Ü‰øùÊåÅËá™Ë∫´Áä∂ÊÄÅÊòØÊúÄÊñ∞ÁöÑÔºåÂÆÉ‰ºöËØªÂèñ‰∏Ä‰ªΩÂΩìÂâçÊ≠£Âú®ËøõË°åÁöÑÊìç‰ΩúÁöÑÊó•ÂøóÂâØÊú¨ÔºåÂπ∂‰∏î‰æùÁÖßÂíå‰∏ª Master ÊúçÂä°Âô®ÂÆåÂÖ®Áõ∏ÂêåÁöÑÈ°∫Â∫èÊù•Êõ¥ÊîπÂÜÖÈÉ®ÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÂíå‰∏ª Master ÊúçÂä°Âô®‰∏ÄÊ†∑Ôºå‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®Âú®ÂêØÂä®ÁöÑÊó∂ÂÄô‰πü‰ºö‰ªé Chunk ÊúçÂä°Âô®ËΩÆËØ¢Êï∞ÊçÆ(‰πãÂêéÂÆöÊúüÊãâÊï∞ÊçÆ)ÔºåÊï∞ÊçÆ‰∏≠ÂåÖÊã¨‰∫Ü Chunk ÂâØÊú¨ÁöÑ‰ΩçÁΩÆ‰ø° ÊÅØ;‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®‰πü‰ºöÂÆöÊúüÂíå Chunk ÊúçÂä°Âô®‚ÄúÊè°Êâã‚ÄùÊù•Á°ÆÂÆöÂÆÉ‰ª¨ÁöÑÁä∂ÊÄÅ„ÄÇÂú®‰∏ª Master ÊúçÂä°Âô®Âõ†ÂàõÂª∫ ÂíåÂà†Èô§ÂâØÊú¨ÂØºËá¥ÂâØÊú¨‰ΩçÁΩÆ‰ø°ÊÅØÊõ¥Êñ∞Êó∂Ôºå‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®ÊâçÂíå‰∏ª Master ÊúçÂä°Âô®ÈÄö‰ø°Êù•Êõ¥Êñ∞Ëá™Ë∫´Áä∂ÊÄÅ„ÄÇ</p>
<h3 id="Êï∞ÊçÆÂÆåÊï¥ÊÄß"><a href="#Êï∞ÊçÆÂÆåÊï¥ÊÄß" class="headerlink" title="Êï∞ÊçÆÂÆåÊï¥ÊÄß"></a>Êï∞ÊçÆÂÆåÊï¥ÊÄß</h3><p>ÊØè‰∏™ Chunk ÊúçÂä°Âô®ÈÉΩ‰ΩøÁî® Checksum Êù•Ê£ÄÊü•‰øùÂ≠òÁöÑÊï∞ÊçÆÊòØÂê¶ÊçüÂùè„ÄÇËÄÉËôëÂà∞‰∏Ä‰∏™ GFS ÈõÜÁæ§ÈÄöÂ∏∏ÈÉΩÊúâÂ•ΩÂá†Áôæ Âè∞Êú∫Âô®„ÄÅÂá†ÂçÉÂùóÁ°¨ÁõòÔºåÁ£ÅÁõòÊçüÂùèÂØºËá¥Êï∞ÊçÆÂú®ËØªÂÜôËøáÁ®ã‰∏≠ÊçüÂùèÊàñËÄÖ‰∏¢Â§±ÊòØÈùûÂ∏∏Â∏∏ËßÅÁöÑ(Á¨¨ 7 ËäÇËÆ≤‰∫Ü‰∏Ä‰∏™ÂéüÂõ†)„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂà´ÁöÑ Chunk ÂâØÊú¨Êù•Ëß£ÂÜ≥Êï∞ÊçÆÊçüÂùèÈóÆÈ¢òÔºå‰ΩÜÊòØË∑®Ë∂ä Chunk ÊúçÂä°Âô®ÊØîËæÉÂâØÊú¨Êù•Ê£ÄÊü•Êï∞ÊçÆÊòØÂê¶ÊçüÂùèÂæà ‰∏çÂÆûÈôÖ„ÄÇÂè¶Â§ñÔºåGFS ÂÖÅËÆ∏ÊúâÊ≠ß‰πâÁöÑÂâØÊú¨Â≠òÂú®:GFS ‰øÆÊîπÊìç‰ΩúÁöÑËØ≠‰πâÔºåÁâπÂà´ÊòØÊó©ÂÖàËÆ®ËÆ∫ËøáÁöÑÂéüÂ≠êÁ∫™ÂΩïËøΩÂä†ÁöÑÊìç ‰ΩúÔºåÂπ∂‰∏ç‰øùËØÅÂâØÊú¨ÂÆåÂÖ®Áõ∏Âêå(alex Ê≥®:ÂâØÊú¨‰∏çÊòØ byte-wise ÂÆåÂÖ®‰∏ÄËá¥ÁöÑ)„ÄÇÂõ†Ê≠§ÔºåÊØè‰∏™ Chunk ÊúçÂä°Âô®ÂøÖÈ°ªÁã¨Á´ãÁª¥ Êä§ Checksum Êù•Ê†°È™åËá™Â∑±ÁöÑÂâØÊú¨ÁöÑÂÆåÊï¥ÊÄß„ÄÇ</p>
<p>Êàë‰ª¨ÊääÊØè‰∏™ Chunk ÈÉΩÂàÜÊàê 64KB Â§ßÂ∞èÁöÑÂùó„ÄÇÊØè‰∏™ÂùóÈÉΩÂØπÂ∫î‰∏Ä‰∏™ 32 ‰ΩçÁöÑ Checksum„ÄÇÂíåÂÖ∂ÂÆÉÂÖÉÊï∞ÊçÆ‰∏ÄÊ†∑Ôºå Checksum ‰∏éÂÖ∂ÂÆÉÁöÑÁî®Êà∑Êï∞ÊçÆÊòØÂàÜÂºÄÁöÑÔºåÂπ∂‰∏î‰øùÂ≠òÂú®ÂÜÖÂ≠òÂíåÁ°¨Áõò‰∏äÔºåÂêåÊó∂‰πüËÆ∞ÂΩïÊìç‰ΩúÊó•Âøó„ÄÇ<br>ÂØπ‰∫éËØªÊìç‰ΩúÊù•ËØ¥ÔºåÂú®ÊääÊï∞ÊçÆËøîÂõûÁªôÂÆ¢Êà∑Á´ØÊàñËÄÖÂÖ∂ÂÆÉÁöÑ Chunk ÊúçÂä°Âô®‰πãÂâçÔºåChunk ÊúçÂä°Âô®‰ºöÊ†°È™åËØªÂèñÊìç‰Ωú Ê∂âÂèäÁöÑËåÉÂõ¥ÂÜÖÁöÑÂùóÁöÑ Checksum„ÄÇÂõ†Ê≠§ Chunk ÊúçÂä°Âô®‰∏ç‰ºöÊääÈîôËØØÊï∞ÊçÆ‰º†ÈÄíÂà∞ÂÖ∂ÂÆÉÁöÑÊú∫Âô®‰∏ä„ÄÇÂ¶ÇÊûúÂèëÁîüÊüê‰∏™ÂùóÁöÑ Checksum ‰∏çÊ≠£Á°ÆÔºåChunk ÊúçÂä°Âô®ËøîÂõûÁªôËØ∑Ê±ÇËÄÖ‰∏Ä‰∏™ÈîôËØØ‰ø°ÊÅØÔºåÂπ∂‰∏îÈÄöÁü• Master ÊúçÂä°Âô®Ëøô‰∏™ÈîôËØØ„ÄÇ‰Ωú‰∏∫ÂõûÂ∫îÔºå ËØ∑Ê±ÇËÄÖÂ∫îÂΩì‰ªéÂÖ∂ÂÆÉÂâØÊú¨ËØªÂèñÊï∞ÊçÆÔºåMaster ÊúçÂä°Âô®‰πü‰ºö‰ªéÂÖ∂ÂÆÉÂâØÊú¨ÂÖãÈöÜÊï∞ÊçÆËøõË°åÊÅ¢Â§ç„ÄÇÂΩì‰∏Ä‰∏™Êñ∞ÁöÑÂâØÊú¨Â∞±Áª™ÂêéÔºå Master ÊúçÂä°Âô®ÈÄöÁü•ÂâØÊú¨ÈîôËØØÁöÑ Chunk ÊúçÂä°Âô®Âà†ÊéâÈîôËØØÁöÑÂâØÊú¨„ÄÇ</p>
<p>Checksum ÂØπËØªÊìç‰ΩúÁöÑÊÄßËÉΩÂΩ±ÂìçÂæàÂ∞èÔºåÂèØ‰ª•Âü∫‰∫éÂá†‰∏™ÂéüÂõ†Êù•ÂàÜÊûê‰∏Ä‰∏ã„ÄÇÂõ†‰∏∫Â§ßÈÉ®ÂàÜÁöÑËØªÊìç‰ΩúÈÉΩËá≥Â∞ëË¶ÅËØªÂèñ Âá†‰∏™ÂùóÔºåËÄåÊàë‰ª¨Âè™ÈúÄË¶ÅËØªÂèñ‰∏ÄÂ∞èÈÉ®ÂàÜÈ¢ùÂ§ñÁöÑÁõ∏ÂÖ≥Êï∞ÊçÆËøõË°åÊ†°È™å„ÄÇGFS ÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÈÄöËøáÊØèÊ¨°ÊääËØªÂèñÊìç‰ΩúÈÉΩÂØπÈΩê Âú® Checksum block ÁöÑËæπÁïå‰∏äÔºåËøõ‰∏ÄÊ≠•ÂáèÂ∞ë‰∫ÜËøô‰∫õÈ¢ùÂ§ñÁöÑËØªÂèñÊìç‰ΩúÁöÑË¥üÈù¢ÂΩ±Âìç„ÄÇÂè¶Â§ñÔºåÂú® Chunk ÊúçÂä°Âô®‰∏äÔºå Checksum ÁöÑÊü•ÊâæÂíåÊØîËæÉ‰∏çÈúÄË¶Å I/O Êìç‰ΩúÔºåChecksum ÁöÑËÆ°ÁÆóÂèØ‰ª•Âíå I/O Êìç‰ΩúÂêåÊó∂ËøõË°å„ÄÇ</p>
<p>Checksum ÁöÑËÆ°ÁÆóÈíàÂØπÂú® Chunk Â∞æÈÉ®ÁöÑËøΩÂä†ÂÜôÂÖ•Êìç‰ΩúÂÅö‰∫ÜÈ´òÂ∫¶‰ºòÂåñ(‰∏é‰πãÂØπÂ∫îÁöÑÊòØË¶ÜÁõñÁé∞ÊúâÊï∞ÊçÆÁöÑÂÜôÂÖ•Êìç ‰Ωú)ÔºåÂõ†‰∏∫ËøôÁ±ªÊìç‰ΩúÂú®Êàë‰ª¨ÁöÑÂ∑•‰Ωú‰∏≠Âç†‰∫ÜÂæàÂ§ßÊØî‰æã„ÄÇÊàë‰ª¨Âè™Â¢ûÈáèÊõ¥Êñ∞ÊúÄÂêé‰∏Ä‰∏™‰∏çÂÆåÊï¥ÁöÑÂùóÁöÑ ChecksumÔºåÂπ∂‰∏î Áî®ÊâÄÊúâÁöÑËøΩÂä†Êù•ÁöÑÊñ∞ Checksum ÂùóÊù•ËÆ°ÁÆóÊñ∞ÁöÑ Checksum„ÄÇÂç≥‰ΩøÊòØÊúÄÂêé‰∏Ä‰∏™‰∏çÂÆåÊï¥ÁöÑ Checksum ÂùóÂ∑≤ÁªèÊçüÂùè‰∫ÜÔºå‰∏îÊàë‰ª¨‰∏çËÉΩÂ§üÈ©¨‰∏äÊ£ÄÊü•Âá∫Êù•ÔºåÁî±‰∫éÊñ∞ÁöÑ Checksum ÂíåÂ∑≤ÊúâÊï∞ÊçÆ‰∏çÂêªÂêàÔºåÂú®‰∏ãÊ¨°ÂØπËøô‰∏™ÂùóËøõË°åËØªÂèñÊìç‰ΩúÁöÑÊó∂ÂÄôÔºå‰ºöÊ£ÄÊü•Âá∫Êï∞ÊçÆÂ∑≤ÁªèÊçüÂùè‰∫Ü„ÄÇ</p>
<p>Áõ∏ÊØî‰πã‰∏ãÔºåÂ¶ÇÊûúÂÜôÊìç‰ΩúË¶ÜÁõñÂ∑≤ÁªèÂ≠òÂú®ÁöÑ‰∏Ä‰∏™ËåÉÂõ¥ÂÜÖÁöÑ ChunkÔºåÊàë‰ª¨ÂøÖÈ°ªËØªÂèñÂíåÊ†°È™åË¢´Ë¶ÜÁõñÁöÑÁ¨¨‰∏Ä‰∏™ÂíåÊúÄÂêé‰∏Ä‰∏™ÂùóÔºåÁÑ∂ÂêéÂÜçÊâßË°åÂÜôÊìç‰Ωú;Êìç‰ΩúÂÆåÊàê‰πãÂêéÂÜçÈáçÊñ∞ËÆ°ÁÆóÂíåÂÜôÂÖ•Êñ∞ÁöÑ Checksum„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰∏çÊ†°È™åÁ¨¨‰∏Ä‰∏™ÂíåÊúÄ Âêé‰∏Ä‰∏™Ë¢´ÂÜôÁöÑÂùóÔºåÈÇ£‰πàÊñ∞ÁöÑ Checksum ÂèØËÉΩ‰ºöÈöêËóèÊ≤°ÊúâË¢´Ë¶ÜÁõñÂå∫ÂüüÂÜÖÁöÑÊï∞ÊçÆÈîôËØØ„ÄÇ</p>
<p>Âú® Chunk ÊúçÂä°Âô®Á©∫Èó≤ÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöÊâ´ÊèèÂíåÊ†°È™åÊØè‰∏™‰∏çÊ¥ªÂä®ÁöÑ Chunk ÁöÑÂÜÖÂÆπ„ÄÇËøô‰ΩøÂæóÊàë‰ª¨ËÉΩÂ§üÂèëÁé∞ÂæàÂ∞ëË¢´ ËØªÂèñÁöÑ Chunk ÊòØÂê¶ÂÆåÊï¥„ÄÇ‰∏ÄÊó¶ÂèëÁé∞Êúâ Chunk ÁöÑÊï∞ÊçÆÊçüÂùèÔºåMaster ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ„ÄÅÊ≠£Á°ÆÁöÑÂâØÊú¨ÔºåÁÑ∂ÂêéÊääÊçü ÂùèÁöÑÂâØÊú¨Âà†Èô§Êéâ„ÄÇËøô‰∏™Êú∫Âà∂‰πüÈÅøÂÖç‰∫ÜÈùûÊ¥ªÂä®ÁöÑ„ÄÅÂ∑≤ÊçüÂùèÁöÑ Chunk Ê¨∫È™ó Master ËäÇÁÇπÔºå‰Ωø Master ËäÇÁÇπËÆ§‰∏∫ÂÆÉ‰ª¨Â∑≤ ÁªèÊúâ‰∫ÜË∂≥Â§üÂ§öÁöÑÂâØÊú¨‰∫Ü„ÄÇ</p>
<h3 id="ËØäÊñ≠Â∑•ÂÖ∑"><a href="#ËØäÊñ≠Â∑•ÂÖ∑" class="headerlink" title="ËØäÊñ≠Â∑•ÂÖ∑"></a>ËØäÊñ≠Â∑•ÂÖ∑</h3><p>ËØ¶Â∞ΩÁöÑ„ÄÅÊ∑±ÂÖ•ÁªÜËäÇÁöÑËØäÊñ≠Êó•ÂøóÔºåÂú®ÈóÆÈ¢òÈöîÁ¶ª„ÄÅË∞ÉËØï„ÄÅ‰ª•ÂèäÊÄßËÉΩÂàÜÊûêÁ≠âÊñπÈù¢ÁªôÊàë‰ª¨Â∏¶Êù•Êó†Ê≥ï‰º∞ÈáèÁöÑÂ∏ÆÂä©Ôºå ÂêåÊó∂‰πüÂè™ÈúÄË¶ÅÂæàÂ∞èÁöÑÂºÄÈîÄ„ÄÇÊ≤°ÊúâÊó•ÂøóÁöÑÂ∏ÆÂä©ÔºåÊàë‰ª¨ÂæàÈöæÁêÜËß£Áü≠ÊöÇÁöÑ„ÄÅ‰∏çÈáçÂ§çÁöÑÊú∫Âô®‰πãÈó¥ÁöÑÊ∂àÊÅØ‰∫§‰∫í„ÄÇGFS ÁöÑ ÊúçÂä°Âô®‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑÊó•ÂøóÔºåËÆ∞ÂΩï‰∫ÜÂ§ßÈáèÂÖ≥ÈîÆÁöÑ‰∫ã‰ª∂(ÊØîÂ¶ÇÔºåChunk ÊúçÂä°Âô®ÂêØÂä®ÂíåÂÖ≥Èó≠)‰ª•ÂèäÊâÄÊúâÁöÑ RPC ÁöÑËØ∑ Ê±ÇÂíåÂõûÂ§ç„ÄÇËøô‰∫õËØäÊñ≠Êó•ÂøóÂèØ‰ª•ÈöèÊÑèÂà†Èô§ÔºåÂØπÁ≥ªÁªüÁöÑÊ≠£Á°ÆËøêË°å‰∏çÈÄ†Êàê‰ªª‰ΩïÂΩ±Âìç„ÄÇÁÑ∂ËÄåÔºåÊàë‰ª¨Âú®Â≠òÂÇ®Á©∫Èó¥ÂÖÅËÆ∏ÁöÑ ÊÉÖÂÜµ‰∏ã‰ºöÂ∞ΩÈáèÁöÑ‰øùÂ≠òËøô‰∫õÊó•Âøó„ÄÇ</p>
<p>RPC Êó•ÂøóÂåÖÂê´‰∫ÜÁΩëÁªú‰∏äÂèëÁîüÁöÑÊâÄÊúâËØ∑Ê±ÇÂíåÂìçÂ∫îÁöÑËØ¶ÁªÜËÆ∞ÂΩïÔºå‰ΩÜÊòØ‰∏çÂåÖÊã¨ËØªÂÜôÁöÑÊñá‰ª∂Êï∞ÊçÆ„ÄÇÈÄöËøáÂåπÈÖçËØ∑Ê±Ç ‰∏éÂõûÂ∫îÔºå‰ª•ÂèäÊî∂ÈõÜ‰∏çÂêåÊú∫Âô®‰∏äÁöÑ RPC Êó•ÂøóËÆ∞ÂΩïÔºåÊàë‰ª¨ÂèØ‰ª•ÈáçÊºîÊâÄÊúâÁöÑÊ∂àÊÅØ‰∫§‰∫íÊù•ËØäÊñ≠ÈóÆÈ¢ò„ÄÇÊó•ÂøóËøòÁî®Êù•Ë∑üË∏™ Ë¥üËΩΩÊµãËØïÂíåÊÄßËÉΩÂàÜÊûê„ÄÇ</p>
<p>Êó•ÂøóÂØπÊÄßËÉΩÁöÑÂΩ±ÂìçÂæàÂ∞è(ËøúÂ∞è‰∫éÂÆÉÂ∏¶Êù•ÁöÑÂ•ΩÂ§Ñ)ÔºåÂõ†‰∏∫Ëøô‰∫õÊó•ÂøóÁöÑÂÜôÂÖ•ÊñπÂºèÊòØÈ°∫Â∫èÁöÑ„ÄÅÂºÇÊ≠•ÁöÑ„ÄÇÊúÄËøëÂèëÁîü ÁöÑ‰∫ã‰ª∂Êó•Âøó‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂèØÁî®‰∫éÊåÅÁª≠‰∏çÊñ≠ÁöÑÂú®Á∫øÁõëÊéß„ÄÇ<br> <div class="note info"><h2 id="Â∫¶Èáè"><a href="#Â∫¶Èáè" class="headerlink" title="Â∫¶Èáè"></a>Â∫¶Èáè</h2></div><br>Êú¨ËäÇ‰∏≠ÔºåÊàë‰ª¨Â∞Ü‰ΩøÁî®‰∏Ä‰∫õÂ∞èËßÑÊ®°Âü∫ÂáÜÊµãËØïÊù•Â±ïÁé∞ GFS Á≥ªÁªüÊû∂ÊûÑÂíåÂÆûÁé∞‰∏äÁöÑ‰∏Ä‰∫õÂõ∫ÊúâÁì∂È¢àÔºåËøòÊúâ‰∫õÊù•Ëá™<br>Google ÂÜÖÈÉ®‰ΩøÁî®ÁöÑÁúüÂÆûÁöÑ GFS ÈõÜÁæ§ÁöÑÂü∫ÂáÜÊï∞ÊçÆ„ÄÇ </p>
<h3 id="Â∞èËßÑÊ®°Âü∫ÂáÜÊµãËØï"><a href="#Â∞èËßÑÊ®°Âü∫ÂáÜÊµãËØï" class="headerlink" title="Â∞èËßÑÊ®°Âü∫ÂáÜÊµãËØï"></a>Â∞èËßÑÊ®°Âü∫ÂáÜÊµãËØï</h3><p>Êàë‰ª¨Âú®‰∏Ä‰∏™ÂåÖÂê´ 1 Âè∞ Master ÊúçÂä°Âô®Ôºå2 Âè∞ Master ÊúçÂä°Âô®Â§çÂà∂ËäÇÁÇπÔºå16 Âè∞ Chunk ÊúçÂä°Âô®Âíå 16 ‰∏™ÂÆ¢Êà∑Êú∫ÁªÑ ÊàêÁöÑ GFS ÈõÜÁæ§‰∏äÊµãÈáèÊÄßËÉΩ„ÄÇÊ≥®ÊÑèÔºåÈááÁî®ËøôÊ†∑ÁöÑÈõÜÁæ§ÈÖçÁΩÆÊñπÊ°àÂè™ÊòØ‰∏∫‰∫ÜÊòì‰∫éÊµãËØï„ÄÇÂÖ∏ÂûãÁöÑ GFS ÈõÜÁæ§ÊúâÊï∞Áôæ‰∏™ Chunk ÊúçÂä°Âô®ÂíåÊï∞Áôæ‰∏™ÂÆ¢Êà∑Êú∫„ÄÇ</p>
<p>ÊâÄÊúâÊú∫Âô®ÁöÑÈÖçÁΩÆÈÉΩ‰∏ÄÊ†∑:‰∏§‰∏™ PIII 1.4GHz Â§ÑÁêÜÂô®Ôºå2GB ÂÜÖÂ≠òÔºå‰∏§‰∏™ 80G/5400rpm ÁöÑÁ°¨ÁõòÔºå‰ª•Âèä 100Mbps ÂÖ®ÂèåÂ∑•‰ª•Â§™ÁΩëËøûÊé•Âà∞‰∏Ä‰∏™ HP2524 ‰∫§Êç¢Êú∫„ÄÇGFS ÈõÜÁæ§‰∏≠ÊâÄÊúâÁöÑ 19 Âè∞ÊúçÂä°Âô®ÈÉΩËøûÊé•Âú®‰∏Ä‰∏™‰∫§Êç¢Êú∫ÔºåÊâÄÊúâ 16 Âè∞ÂÆ¢Êà∑Êú∫ËøûÊé•Âà∞Âè¶‰∏Ä‰∏™‰∫§Êç¢Êú∫‰∏ä„ÄÇ‰∏§‰∏™‰∫§Êç¢Êú∫‰πãÈó¥‰ΩøÁî® 1Gbps ÁöÑÁ∫øË∑ØËøûÊé•„ÄÇ</p>
<h4 id="ËØªÂèñ"><a href="#ËØªÂèñ" class="headerlink" title="ËØªÂèñ"></a>ËØªÂèñ</h4><p>N ‰∏™ÂÆ¢Êà∑Êú∫‰ªé GFS Êñá‰ª∂Á≥ªÁªüÂêåÊ≠•ËØªÂèñÊï∞ÊçÆ„ÄÇÊØè‰∏™ÂÆ¢Êà∑Êú∫‰ªé 320GB ÁöÑÊñá‰ª∂ÈõÜÂêà‰∏≠ÈöèÊú∫ËØªÂèñ 4MB region ÁöÑ ÂÜÖÂÆπ„ÄÇËØªÂèñÊìç‰ΩúÈáçÂ§çÊâßË°å 256 Ê¨°ÔºåÂõ†Ê≠§ÔºåÊØè‰∏™ÂÆ¢Êà∑Êú∫ÊúÄÁªàÈÉΩËØªÂèñ 1GB ÁöÑÊï∞ÊçÆ„ÄÇÊâÄÊúâÁöÑ Chunk ÊúçÂä°Âô®Âä†Ëµ∑Êù•ÊÄª ÂÖ±Âè™Êúâ 32GB ÁöÑÂÜÖÂ≠òÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨È¢ÑÊúüÂè™ÊúâÊúÄÂ§ö 10%ÁöÑËØªÂèñËØ∑Ê±ÇÂëΩ‰∏≠ Linux ÁöÑÊñá‰ª∂Á≥ªÁªüÁºìÂÜ≤„ÄÇÊàë‰ª¨ÁöÑÊµãËØïÁªì ÊûúÂ∫îËØ•Âíå‰∏Ä‰∏™Âú®Ê≤°ÊúâÊñá‰ª∂Á≥ªÁªüÁºìÂ≠òÁöÑÊÉÖÂÜµ‰∏ãËØªÂèñÊµãËØïÁöÑÁªìÊûúÊé•Ëøë„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15132331882908.jpg" alt><br>‰∏äËæπÁöÑÊõ≤Á∫øÊòæÁ§∫‰∫ÜÊàë‰ª¨ÁΩëÁªúÊãìÊâë‰∏ãÁöÑÂêàËÆ°ÁêÜËÆ∫ÂêûÂêêÈáè‰∏äÈôê„ÄÇ‰∏ãËæπÁöÑÊõ≤Á∫øÊòæÁ§∫‰∫ÜËßÇÊµãÂà∞ÁöÑÂêûÂêêÈáè„ÄÇËøô‰∏™Êõ≤Á∫øÊúâÁùÄ 95%ÁöÑÂèØÈù†ÊÄßÔºåÂõ†‰∏∫ÊúâÊó∂ÂÄôÊµãÈáè‰ºö‰∏çÂ§üÁ≤æÁ°Æ„ÄÇ</p>
<p>Âõæ 3(a)ÊòæÁ§∫‰∫Ü N ‰∏™ÂÆ¢Êà∑Êú∫Êï¥‰ΩìÁöÑËØªÂèñÈÄüÂ∫¶‰ª•ÂèäËøô‰∏™ÈÄüÂ∫¶ÁöÑÁêÜËÆ∫ÊûÅÈôê„ÄÇÂΩìËøûÊé•‰∏§‰∏™‰∫§Êç¢Êú∫ÁöÑ 1Gbps ÁöÑÈìæË∑ØÈ•±ÂíåÊó∂ÔºåÊï¥‰ΩìËØªÂèñÈÄüÂ∫¶ËææÂà∞ÁêÜËÆ∫ÁöÑÊûÅÈôêÂÄºÊòØ 125MB/SÔºåÊàñËÄÖËØ¥ÊØè‰∏™ÂÆ¢Êà∑Êú∫ÈÖçÁΩÆÁöÑ 100Mbps ÁΩëÂç°ËææÂà∞È•±ÂíåÊó∂Ôºå ÊØè‰∏™ÂÆ¢Êà∑Êú∫ËØªÂèñÈÄüÂ∫¶ÁöÑÁêÜËÆ∫ÊûÅÈôêÂÄºÊòØ 12.5MB/s„ÄÇÂÆûÊµãÁªìÊûúÊòØÔºåÂΩì‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ËØªÂèñÁöÑÊó∂ÂÄôÔºåËØªÂèñÁöÑÈÄüÂ∫¶ÊòØ 10MB/sÔºå ‰πüÂ∞±ÊòØËØ¥ËææÂà∞ÂÆ¢Êà∑Êú∫ÁêÜËÆ∫ËØªÂèñÈÄüÂ∫¶ÊûÅÈôêÂÄºÁöÑ 80%„ÄÇÂØπ‰∫é 16 ‰∏™ÂÆ¢Êà∑Êú∫ÔºåÊï¥‰ΩìÁöÑËØªÂèñÈÄüÂ∫¶ËææÂà∞‰∫Ü 94MB/sÔºåÂ§ßÁ∫¶ ÊòØÁêÜËÆ∫Êï¥‰ΩìËØªÂèñÈÄüÂ∫¶ÊûÅÈôêÂÄºÁöÑ 75%Ôºå‰πüÂ∞±ÊòØËØ¥ÊØè‰∏™ÂÆ¢Êà∑Êú∫ÁöÑËØªÂèñÈÄüÂ∫¶ÊòØ 6MB/s„ÄÇËØªÂèñÊïàÁéá‰ªé 80%Èôç‰ΩéÂà∞‰∫Ü 75%Ôºå ‰∏ªË¶ÅÁöÑÂéüÂõ†ÊòØÂΩìËØªÂèñÁöÑÂÆ¢Êà∑Êú∫Â¢ûÂä†Êó∂ÔºåÂ§ö‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂ËØªÂèñ‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®ÁöÑÂá†Áéá‰πüÂ¢ûÂä†‰∫ÜÔºåÂØºËá¥Êï¥‰ΩìÁöÑ ËØªÂèñÊïàÁéá‰∏ãÈôç„ÄÇ</p>
<h4 id="ÂÜôÂÖ•"><a href="#ÂÜôÂÖ•" class="headerlink" title="ÂÜôÂÖ•"></a>ÂÜôÂÖ•</h4><p>N ‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂Âêë N ‰∏™‰∏çÂêåÁöÑÊñá‰ª∂‰∏≠ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇÊØè‰∏™ÂÆ¢Êà∑Êú∫‰ª•ÊØèÊ¨° 1MB ÁöÑÈÄüÂ∫¶ËøûÁª≠ÂÜôÂÖ• 1GB ÁöÑÊï∞ÊçÆ„ÄÇ Âõæ 3(b)ÊòæÁ§∫‰∫ÜÊï¥‰ΩìÁöÑÂÜôÂÖ•ÈÄüÂ∫¶ÂíåÂÆÉ‰ª¨ÁêÜËÆ∫‰∏äÁöÑÊûÅÈôêÂÄº„ÄÇÁêÜËÆ∫‰∏äÁöÑÊûÅÈôêÂÄºÊòØ 67MB/sÔºåÂõ†‰∏∫Êàë‰ª¨ÈúÄË¶ÅÊääÊØè‰∏Ä byte ÂÜôÂÖ•Âà∞ 16 ‰∏™ Chunk ÊúçÂä°Âô®‰∏≠ÁöÑ 3 ‰∏™‰∏äÔºåËÄåÊØè‰∏™ Chunk ÊúçÂä°Âô®ÁöÑËæìÂÖ•ËøûÊé•ÈÄüÂ∫¶ÊòØ 12.5MB/s„ÄÇ</p>
<p>‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ÁöÑÂÜôÂÖ•ÈÄüÂ∫¶ÊòØ 6.3MBÔºåÂ§ßÊ¶ÇÊòØÁêÜËÆ∫ÊûÅÈôêÂÄºÁöÑ‰∏ÄÂçä„ÄÇÂØºËá¥Ëøô‰∏™ÁªìÊûúÁöÑ‰∏ªË¶ÅÂéüÂõ†ÊòØÊàë‰ª¨ÁöÑÁΩëÁªúÂçè ËÆÆÊ†à„ÄÇÂÆÉ‰∏éÊàë‰ª¨Êé®ÈÄÅÊï∞ÊçÆÂà∞ Chunk ÊúçÂä°Âô®Êó∂ÈááÁî®ÁöÑÁÆ°ÈÅìÊ®°Âºè‰∏çÁõ∏ÈÄÇÂ∫î„ÄÇ‰ªé‰∏Ä‰∏™ÂâØÊú¨Âà∞Âè¶‰∏Ä‰∏™ÂâØÊú¨ÁöÑÊï∞ÊçÆ‰º†ËæìÂª∂ËøüÈôç‰Ωé‰∫ÜÊï¥‰∏™ÁöÑÂÜôÂÖ•ÈÄüÂ∫¶„ÄÇ</p>
<p>16 ‰∏™ÂÆ¢Êà∑Êú∫Êï¥‰ΩìÁöÑÂÜôÂÖ•ÈÄüÂ∫¶ËææÂà∞‰∫Ü 35MB/s(Âç≥ÊØè‰∏™ÂÆ¢Êà∑Êú∫ 2.2MB/s)ÔºåÂ§ßÁ∫¶Âè™ÊòØÁêÜËÆ∫ÊûÅÈôêÂÄºÁöÑ‰∏ÄÂçä„ÄÇÂíåÂ§ö‰∏™ÂÆ¢Êà∑Êú∫ËØªÂèñÁöÑÊÉÖÂΩ¢ÂæàÁ±ªÂûãÔºåÈöèÁùÄÂÆ¢Êà∑Êú∫Êï∞ÈáèÁöÑÂ¢ûÂä†ÔºåÂ§ö‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂ÂÜôÂÖ•Âêå‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®ÁöÑÂá†Áéá‰πü Â¢ûÂä†‰∫Ü„ÄÇËÄå‰∏îÔºå16 ‰∏™ÂÆ¢Êà∑Êú∫Âπ∂Ë°åÂÜôÂÖ•ÂèØËÉΩÂºïËµ∑ÁöÑÂÜ≤Á™ÅÊØî 16 ‰∏™ÂÆ¢Êà∑Êú∫Âπ∂Ë°åËØªÂèñË¶ÅÂ§ßÂæóÂ§öÔºåÂõ†‰∏∫ÊØè‰∏™ÂÜôÂÖ•ÈÉΩ‰ºö Ê∂âÂèä‰∏â‰∏™‰∏çÂêåÁöÑÂâØÊú¨„ÄÇ</p>
<p>ÂÜôÂÖ•ÁöÑÈÄüÂ∫¶ÊØîÊàë‰ª¨ÊÉ≥Ë±°ÁöÑË¶ÅÊÖ¢„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøôÊ≤°ÊúâÊàê‰∏∫Êàë‰ª¨ÁöÑ‰∏ªË¶ÅÈóÆÈ¢òÔºåÂõ†‰∏∫Âç≥‰ΩøÂú®Âçï‰∏™ÂÆ¢Êà∑Êú∫‰∏ä ËÉΩÂ§üÊÑüÂèóÂà∞Âª∂Êó∂ÔºåÂÆÉ‰πü‰∏ç‰ºöÂú®ÊúâÂ§ßÈáèÂÆ¢Êà∑Êú∫ÁöÑÊó∂ÂÄôÂØπÊï¥‰ΩìÁöÑÂÜôÂÖ•Â∏¶ÂÆΩÈÄ†ÊàêÊòæËëóÁöÑÂΩ±Âìç„ÄÇ</p>
<h4 id="ËÆ∞ÂΩïËøΩÂä†"><a href="#ËÆ∞ÂΩïËøΩÂä†" class="headerlink" title="ËÆ∞ÂΩïËøΩÂä†"></a>ËÆ∞ÂΩïËøΩÂä†</h4><p>Âõæ 3(c)ÊòæÁ§∫‰∫ÜËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇN ‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂ËøΩÂä†Êï∞ÊçÆÂà∞‰∏Ä‰∏™Êñá‰ª∂„ÄÇËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÁöÑÊÄßËÉΩÂèóÈôê ‰∫é‰øùÂ≠òÊñá‰ª∂ÊúÄÂêé‰∏Ä‰∏™ Chunk ÁöÑ Chunk ÊúçÂä°Âô®ÁöÑÂ∏¶ÂÆΩÔºåËÄå‰∏éÂÆ¢Êà∑Êú∫ÁöÑÊï∞ÈáèÊó†ÂÖ≥„ÄÇËÆ∞ÂΩïËøΩÂä†ÁöÑÈÄüÂ∫¶Áî±‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ ÁöÑ 6.0MB/s ÂºÄÂßãÔºå‰∏ãÈôçÂà∞ 16 ‰∏™ÂÆ¢Êà∑Êú∫ÁöÑ 4.8MB/s ‰∏∫Ê≠¢ÔºåÈÄüÂ∫¶ÁöÑ‰∏ãÈôç‰∏ªË¶ÅÊòØÁî±‰∫é‰∏çÂêåÂÆ¢Êà∑Á´ØÁöÑÁΩëÁªúÊã•Â°û‰ª•ÂèäÁΩë Áªú‰º†ËæìÈÄüÂ∫¶ÁöÑ‰∏çÂêåËÄåÂØºËá¥ÁöÑ„ÄÇ</p>
<p>Êàë‰ª¨ÁöÑÁ®ãÂ∫èÂÄæÂêë‰∫éÂêåÊó∂Â§ÑÁêÜÂ§ö‰∏™ËøôÊ†∑ÁöÑÊñá‰ª∂„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂç≥ N ‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂ËøΩÂä†Êï∞ÊçÆÂà∞ M ‰∏™ÂÖ±‰∫´Êñá‰ª∂‰∏≠Ôºå ËøôÈáå N Âíå M ÈÉΩÊòØÊï∞ÂçÅÊàñËÄÖÊï∞Áôæ‰ª•‰∏ä„ÄÇÊâÄ‰ª•ÔºåÂú®Êàë‰ª¨ÁöÑÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåChunk ÊúçÂä°Âô®ÁöÑÁΩëÁªúÊã•Â°ûÂπ∂Ê≤°ÊúâÊàê‰∏∫‰∏Ä‰∏™ ‰∏•ÈáçÈóÆÈ¢òÔºåÂ¶ÇÊûú Chunk ÊúçÂä°Âô®ÁöÑÊüê‰∏™Êñá‰ª∂Ê≠£Âú®ÂÜôÂÖ•ÔºåÂÆ¢Êà∑Êú∫‰ºöÂéªÂÜôÂè¶Â§ñ‰∏Ä‰∏™Êñá‰ª∂„ÄÇ</p>
<h3 id="ÂÆûÈôÖÂ∫îÁî®‰∏≠ÁöÑÈõÜÁæ§"><a href="#ÂÆûÈôÖÂ∫îÁî®‰∏≠ÁöÑÈõÜÁæ§" class="headerlink" title="ÂÆûÈôÖÂ∫îÁî®‰∏≠ÁöÑÈõÜÁæ§"></a>ÂÆûÈôÖÂ∫îÁî®‰∏≠ÁöÑÈõÜÁæ§</h3><p>Êàë‰ª¨Áé∞Âú®Êù•‰ªîÁªÜËØÑ‰º∞‰∏Ä‰∏ã Google ÂÜÖÈÉ®Ê≠£Âú®‰ΩøÁî®ÁöÑ‰∏§‰∏™ÈõÜÁæ§ÔºåÂÆÉ‰ª¨ÂÖ∑Êúâ‰∏ÄÂÆöÁöÑ‰ª£Ë°®ÊÄß„ÄÇÈõÜÁæ§ A ÈÄöÂ∏∏Ë¢´‰∏äÁôæ ‰∏™Â∑•Á®ãÂ∏àÁî®‰∫éÁ†îÁ©∂ÂíåÂºÄÂèë„ÄÇÂÖ∏ÂûãÁöÑ‰ªªÂä°ÊòØË¢´‰∫∫Â∑•ÂàùÂßãÂåñÂêéËøûÁª≠ËøêË°åÊï∞‰∏™Â∞èÊó∂„ÄÇÂÆÉÈÄöÂ∏∏ËØªÂèñÊï∞ MB Âà∞Êï∞ TB ÁöÑ Êï∞ÊçÆÔºå‰πãÂêéËøõË°åËΩ¨ÂåñÊàñËÄÖÂàÜÊûêÔºåÊúÄÂêéÊääÁªìÊûúÂÜôÂõûÂà∞ÈõÜÁæ§‰∏≠„ÄÇÈõÜÁæ§ B ‰∏ªË¶ÅÁî®‰∫éÂ§ÑÁêÜÂΩìÂâçÁöÑÁîü‰∫ßÊï∞ÊçÆ„ÄÇÈõÜÁæ§ B ÁöÑ ‰ªªÂä°ÊåÅÁª≠ÁöÑÊó∂Èó¥Êõ¥ÈïøÔºåÂú®ÂæàÂ∞ë‰∫∫Â∑•Âπ≤È¢ÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÊåÅÁª≠ÁöÑÁîüÊàêÂíåÂ§ÑÁêÜÊï∞ TB ÁöÑÊï∞ÊçÆÈõÜ„ÄÇÂú®Ëøô‰∏§‰∏™Ê°à‰æã‰∏≠Ôºå‰∏Ä ‰∏™ÂçïÁã¨ÁöÑ‚Äú‰ªªÂä°‚ÄùÈÉΩÊòØÊåáËøêË°åÂú®Â§ö‰∏™Êú∫Âô®‰∏äÁöÑÂ§ö‰∏™ËøõÁ®ãÔºåÂÆÉ‰ª¨ÂêåÊó∂ËØªÂèñÂíåÂÜôÂÖ•Â§ö‰∏™Êñá‰ª∂„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15132335583017.jpg" alt></p>
<h4 id="Â≠òÂÇ®"><a href="#Â≠òÂÇ®" class="headerlink" title="Â≠òÂÇ®"></a>Â≠òÂÇ®</h4><p>Â¶Ç‰∏äË°®Ââç‰∫îË°åÊâÄÊèèËø∞ÁöÑÔºå‰∏§‰∏™ÈõÜÁæ§ÈÉΩÁî±‰∏äÁôæÂè∞ Chunk ÊúçÂä°Âô®ÁªÑÊàêÔºåÊîØÊåÅÊï∞ TB ÁöÑÁ°¨ÁõòÁ©∫Èó¥;‰∏§‰∏™ÈõÜÁæ§ËôΩ ÁÑ∂ÈÉΩÂ≠òÂÇ®‰∫ÜÂ§ßÈáèÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØËøòÊúâÂâ©‰ΩôÁöÑÁ©∫Èó¥„ÄÇ‚ÄúÂ∑≤Áî®Á©∫Èó¥‚ÄùÂåÖÂê´‰∫ÜÊâÄÊúâÁöÑ Chunk ÂâØÊú¨„ÄÇÂÆûÈôÖ‰∏äÊâÄÊúâÁöÑÊñá‰ª∂ÈÉΩ Â§çÂà∂‰∫Ü‰∏â‰ªΩ„ÄÇÂõ†Ê≠§ÔºåÈõÜÁæ§ÂÆûÈôÖ‰∏äÂêÑÂ≠òÂÇ®‰∫Ü 18TB Âíå 52TB ÁöÑÊñá‰ª∂Êï∞ÊçÆ„ÄÇ</p>
<p>‰∏§‰∏™ÈõÜÁæ§Â≠òÂÇ®ÁöÑÊñá‰ª∂Êï∞ÈáèÈÉΩÂ∑Æ‰∏çÂ§öÔºå‰ΩÜÊòØÈõÜÁæ§ B ‰∏äÊúâÂ§ßÈáèÁöÑÊ≠ªÊñá‰ª∂„ÄÇÊâÄË∞ì‚ÄúÊ≠ªÊñá‰ª∂‚ÄùÊòØÊåáÊñá‰ª∂Ë¢´Âà†Èô§‰∫Ü ÊàñËÄÖÊòØË¢´Êñ∞ÁâàÊú¨ÁöÑÊñá‰ª∂ÊõøÊç¢‰∫ÜÔºå‰ΩÜÊòØÂ≠òÂÇ®Á©∫Èó¥ËøòÊ≤°ÊúâÊù•ÂæóÂèäË¢´ÂõûÊî∂„ÄÇÁî±‰∫éÈõÜÁæ§ B Â≠òÂÇ®ÁöÑÊñá‰ª∂ËæÉÂ§ßÔºåÂõ†Ê≠§ÂÆÉÁöÑ Chunk Êï∞Èáè‰πüÊØîËæÉÂ§ö„ÄÇ</p>
<h4 id="ÂÖÉÊï∞ÊçÆ-1"><a href="#ÂÖÉÊï∞ÊçÆ-1" class="headerlink" title="ÂÖÉÊï∞ÊçÆ"></a>ÂÖÉÊï∞ÊçÆ</h4><p>Chunk ÊúçÂä°Âô®ÊÄªÂÖ±‰øùÂ≠ò‰∫ÜÂçÅÂá† GB ÁöÑÂÖÉÊï∞ÊçÆÔºåÂ§ßÂ§öÊï∞ÊòØÊù•Ëá™Áî®Êà∑Êï∞ÊçÆÁöÑ„ÄÅ64KB Â§ßÂ∞èÁöÑÂùóÁöÑ Checksum„ÄÇ ‰øùÂ≠òÂú® Chunk ÊúçÂä°Âô®‰∏äÂÖ∂ÂÆÉÁöÑÂÖÉÊï∞ÊçÆÊòØ Chunk ÁöÑÁâàÊú¨Âè∑‰ø°ÊÅØÔºåÊàë‰ª¨Âú® 4.5 ËäÇÊèèËø∞Ëøá„ÄÇ</p>
<p>Âú® Master ÊúçÂä°Âô®‰∏ä‰øùÂ≠òÁöÑÂÖÉÊï∞ÊçÆÂ∞±Â∞èÁöÑÂ§ö‰∫ÜÔºåÂ§ßÁ∫¶Âè™ÊúâÊï∞ÂçÅ MBÔºåÊàñËÄÖËØ¥Âπ≥ÂùáÊØè‰∏™Êñá‰ª∂ 100 Â≠óËäÇÁöÑÂÖÉÊï∞ ÊçÆ„ÄÇËøôÂíåÊàë‰ª¨ËÆæÊÉ≥ÁöÑÊòØ‰∏ÄÊ†∑ÁöÑÔºåMaster ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Âπ∂‰∏ç‰ºöÊàê‰∏∫ GFS Á≥ªÁªüÂÆπÈáèÁöÑÁì∂È¢à„ÄÇÂ§ß Â§öÊï∞Êñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆÈÉΩÊòØ‰ª•ÂâçÁºÄÂéãÁº©Ê®°ÂºèÂ≠òÊîæÁöÑÊñá‰ª∂Âêç„ÄÇMaster ÊúçÂä°Âô®‰∏äÂ≠òÊîæÁöÑÂÖ∂ÂÆÉÂÖÉÊï∞ÊçÆÂåÖÊã¨‰∫ÜÊñá‰ª∂ÁöÑÊâÄÊúâ ËÄÖÂíåÊùÉÈôê„ÄÅÊñá‰ª∂Âà∞ Chunk ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºå‰ª•ÂèäÊØè‰∏Ä‰∏™ Chunk ÁöÑÂΩìÂâçÁâàÊú¨Âè∑„ÄÇÊ≠§Â§ñÔºåÈíàÂØπÊØè‰∏Ä‰∏™ ChunkÔºåÊàë‰ª¨ÈÉΩ ‰øùÂ≠ò‰∫ÜÂΩìÂâçÁöÑÂâØÊú¨‰ΩçÁΩÆ‰ª•ÂèäÂØπÂÆÉÁöÑÂºïÁî®ËÆ°Êï∞ÔºåËøô‰∏™ÂºïÁî®ËÆ°Êï∞Áî®‰∫éÂÆûÁé∞ÂÜôÊó∂Êã∑Ë¥ù(Âç≥ COWÔºåcopy-on-write)„ÄÇ</p>
<p>ÂØπ‰∫éÊØè‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊúçÂä°Âô®ÔºåÊó†ËÆ∫ÊòØ Chunk ÊúçÂä°Âô®ËøòÊòØ Master ÊúçÂä°Âô®ÔºåÈÉΩÂè™‰øùÂ≠ò‰∫Ü 50MB Âà∞ 100MB ÁöÑÂÖÉ Êï∞ÊçÆ„ÄÇÂõ†Ê≠§ÔºåÊÅ¢Â§çÊúçÂä°Âô®ÊòØÈùûÂ∏∏Âø´ÈÄüÁöÑ:Âú®ÊúçÂä°Âô®ÂìçÂ∫îÂÆ¢Êà∑ËØ∑Ê±Ç‰πãÂâçÔºåÂè™ÈúÄË¶ÅËä±Âá†ÁßíÈíüÊó∂Èó¥‰ªéÁ£ÅÁõò‰∏äËØªÂèñËøô ‰∫õÊï∞ÊçÆÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ‰∏çËøáÔºåMaster ÊúçÂä°Âô®‰ºöÊåÅÁª≠È¢†Á∞∏‰∏ÄÊÆµÊó∂Èó¥‚ÄìÈÄöÂ∏∏ÊòØ 30 Âà∞ 60 Áßí‚ÄìÁõ¥Âà∞ÂÆÉÂÆåÊàêËΩÆËØ¢ÊâÄÊúâÁöÑ ChunkÊúçÂä°Âô®ÔºåÂπ∂Ëé∑ÂèñÂà∞ÊâÄÊúâ Chunk ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇ </p>
<h4 id="ËØªÂÜôÈÄüÁéá"><a href="#ËØªÂÜôÈÄüÁéá" class="headerlink" title="ËØªÂÜôÈÄüÁéá"></a>ËØªÂÜôÈÄüÁéá</h4><p><img src="http://oliji9s3j.bkt.clouddn.com/15132336101847.jpg" alt><br>Ë°®‰∏âÊòæÁ§∫‰∫Ü‰∏çÂêåÊó∂ÊÆµÁöÑËØªÂÜôÈÄüÁéá„ÄÇÂú®ÊµãËØïÁöÑÊó∂ÂÄôÔºåËøô‰∏§‰∏™ÈõÜÁæ§ÈÉΩËøêË°å‰∫Ü‰∏ÄÂë®Â∑¶Âè≥ÁöÑÊó∂Èó¥„ÄÇ(Ëøô‰∏§‰∏™ÈõÜÁæ§ÊúÄ ËøëÈÉΩÂõ†‰∏∫ÂçáÁ∫ßÊñ∞ÁâàÊú¨ÁöÑ GFS ÈáçÊñ∞ÂêØÂä®Ëøá‰∫Ü)„ÄÇ</p>
<p>ÈõÜÁæ§ÈáçÊñ∞ÂêØÂä®ÂêéÔºåÂπ≥ÂùáÂÜôÂÖ•ÈÄüÁéáÂ∞è‰∫é 30MB/s„ÄÇÂΩìÊàë‰ª¨ÊèêÂèñÊÄßËÉΩÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÈõÜÁæ§ B Ê≠£ËøõË°åÂ§ßÈáèÁöÑÂÜôÂÖ•Êìç ‰ΩúÔºåÂÜôÂÖ•ÈÄüÂ∫¶ËææÂà∞‰∫Ü 100MB/sÔºåÂπ∂‰∏îÂõ†‰∏∫ÊØè‰∏™ Chunk ÈÉΩÊúâ‰∏â‰∏™ÂâØÊú¨ÁöÑÂéüÂõ†ÔºåÁΩëÁªúË¥üËΩΩËææÂà∞‰∫Ü 300MB/s„ÄÇ</p>
<p>ËØªÂèñÈÄüÁéáË¶ÅÊØîÂÜôÂÖ•ÈÄüÁéáÈ´òÁöÑÂ§ö„ÄÇÊ≠£Â¶ÇÊàë‰ª¨ËÆæÊÉ≥ÁöÑÈÇ£Ê†∑ÔºåÊÄªÁöÑÂ∑•‰ΩúË¥üËΩΩ‰∏≠ÔºåËØªÂèñÁöÑÊØî‰æãËøúËøúÈ´ò‰∫éÂÜôÂÖ•ÁöÑÊØî ‰æã„ÄÇ‰∏§‰∏™ÈõÜÁæ§ÈÉΩËøõË°åÁùÄÁπÅÈáçÁöÑËØªÂèñÊìç‰Ωú„ÄÇÁâπÂà´ÊòØÔºåÈõÜÁæ§ A Âú®‰∏ÄÂë®Êó∂Èó¥ÂÜÖÈÉΩÁª¥ÊåÅ‰∫Ü 580MB/s ÁöÑËØªÂèñÈÄüÂ∫¶„ÄÇÈõÜÁæ§ A ÁöÑÁΩëÁªúÈÖçÁΩÆÂèØ‰ª•ÊîØÊåÅ 750MB/s ÁöÑÈÄüÂ∫¶ÔºåÊòæÁÑ∂ÔºåÂÆÉÊúâÊïàÁöÑÂà©Áî®‰∫ÜËµÑÊ∫ê„ÄÇÈõÜÁæ§ B ÊîØÊåÅÁöÑÂ≥∞ÂÄºËØªÂèñÈÄüÂ∫¶ÊòØ 1300MB/sÔºå ‰ΩÜÊòØÂÆÉÁöÑÂ∫îÁî®Âè™Áî®Âà∞‰∫Ü 380MB/s„ÄÇ</p>
<h4 id="Master-ÊúçÂä°Âô®ÁöÑË¥üËΩΩ"><a href="#Master-ÊúçÂä°Âô®ÁöÑË¥üËΩΩ" class="headerlink" title="Master ÊúçÂä°Âô®ÁöÑË¥üËΩΩ"></a>Master ÊúçÂä°Âô®ÁöÑË¥üËΩΩ</h4><p>Ë°® 3 ÁöÑÊï∞ÊçÆÊòæÁ§∫‰∫ÜÂèëÈÄÅÂà∞ Master ÊúçÂä°Âô®ÁöÑÊìç‰ΩúËØ∑Ê±ÇÂ§ßÊ¶ÇÊòØÊØèÁßíÈíü 200 Âà∞ 500 ‰∏™„ÄÇMaster ÊúçÂä°Âô®ÂèØ‰ª•ËΩªÊùæ ÁöÑÂ∫î‰ªòËøô‰∏™ËØ∑Ê±ÇÈÄüÂ∫¶ÔºåÊâÄ‰ª• Master ÊúçÂä°Âô®ÁöÑÂ§ÑÁêÜËÉΩÂäõ‰∏çÊòØÁ≥ªÁªüÁöÑÁì∂È¢à„ÄÇ</p>
<p>Âú®Êó©ÊúüÁâàÊú¨ÁöÑ GFS ‰∏≠ÔºåMaster ÊúçÂä°Âô®ÂÅ∂Â∞î‰ºöÊàê‰∏∫Áì∂È¢à„ÄÇÂÆÉÂ§ßÂ§öÊï∞Êó∂Èó¥ÈáåÈÉΩÂú®È°∫Â∫èÊâ´ÊèèÊüê‰∏™ÂæàÂ§ßÁöÑÁõÆÂΩï (ÂåÖÂê´Êï∞‰∏á‰∏™Êñá‰ª∂)ÂéªÊü•ÊâæÊüê‰∏™ÁâπÂÆöÁöÑÊñá‰ª∂„ÄÇÂõ†Ê≠§Êàë‰ª¨‰øÆÊîπ‰∫Ü Master ÊúçÂä°Âô®ÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÈÄöËøáÂØπÂêçÂ≠óÁ©∫Èó¥Ëøõ Ë°å‰∫åÂàÜÊü•ÊâæÊù•ÊèêÈ´òÊïàÁéá„ÄÇÁé∞Âú® Master ÊúçÂä°Âô®ÂèØ‰ª•ËΩªÊùæÁöÑÊØèÁßíÈíüËøõË°åÊï∞ÂçÉÊ¨°Êñá‰ª∂ËÆøÈóÆ„ÄÇÂ¶ÇÊûúÊúâÈúÄË¶ÅÁöÑËØùÔºåÊàë‰ª¨ ÂèØ‰ª•ÈÄöËøáÂú®ÂêçÁß∞Á©∫Èó¥Êï∞ÊçÆÁªìÊûÑ‰πãÂâçËÆæÁΩÆÂêçÁß∞Êü•ËØ¢ÁºìÂÜ≤ÁöÑÊñπÂºèËøõ‰∏ÄÊ≠•ÊèêÈ´òÈÄüÂ∫¶„ÄÇ</p>
<h4 id="ÊÅ¢Â§çÊó∂Èó¥"><a href="#ÊÅ¢Â§çÊó∂Èó¥" class="headerlink" title="ÊÅ¢Â§çÊó∂Èó¥"></a>ÊÅ¢Â§çÊó∂Èó¥</h4><p>ÂΩìÊüê‰∏™ Chunk ÊúçÂä°Âô®Â§±Êïà‰∫ÜÔºå‰∏Ä‰∫õ Chunk ÂâØÊú¨ÁöÑÊï∞ÈáèÂèØËÉΩ‰ºö‰Ωé‰∫éÂ§çÂà∂Âõ†Â≠êÊåáÂÆöÁöÑÊï∞ÈáèÔºåÊàë‰ª¨ÂøÖÈ°ªÈÄöËøáÂÖã ÈöÜÂâØÊú¨‰Ωø Chunk ÂâØÊú¨Êï∞ÈáèËææÂà∞Â§çÂà∂Âõ†Â≠êÊåáÂÆöÁöÑÊï∞Èáè„ÄÇÊÅ¢Â§çÊâÄÊúâ Chunk ÂâØÊú¨ÊâÄËä±Ë¥πÁöÑÊó∂Èó¥ÂèñÂÜ≥‰∫éËµÑÊ∫êÁöÑÊï∞Èáè„ÄÇ Âú®Êàë‰ª¨ÁöÑËØïÈ™å‰∏≠ÔºåÊàë‰ª¨ÊääÈõÜÁæ§ B ‰∏äÁöÑ‰∏Ä‰∏™ Chunk ÊúçÂä°Âô® Kill Êéâ„ÄÇËøô‰∏™ Chunk ÊúçÂä°Âô®‰∏äÂ§ßÁ∫¶Êúâ 15000 ‰∏™ ChunkÔºå ÂÖ±ËÆ° 600GB ÁöÑÊï∞ÊçÆ„ÄÇ‰∏∫‰∫ÜÂáèÂ∞èÂÖãÈöÜÊìç‰ΩúÂØπÊ≠£Âú®ËøêË°åÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÂΩ±ÂìçÔºå‰ª•Âèä‰∏∫ GFS Ë∞ÉÂ∫¶ÂÜ≥Á≠ñÊèê‰æõ‰øÆÊ≠£Á©∫Èó¥Ôºå Êàë‰ª¨Áº∫ÁúÅÁöÑÊääÈõÜÁæ§‰∏≠Âπ∂ÂèëÂÖãÈöÜÊìç‰ΩúÁöÑÊï∞ÈáèËÆæÁΩÆ‰∏∫ 91 ‰∏™(Chunk ÊúçÂä°Âô®ÁöÑÊï∞ÈáèÁöÑ 40%)ÔºåÊØè‰∏™ÂÖãÈöÜÊìç‰ΩúÊúÄÂ§öÂÖÅ ËÆ∏‰ΩøÁî®ÁöÑÂ∏¶ÂÆΩÊòØ 6.25MB/s(50mbps)„ÄÇÊâÄÊúâÁöÑ Chunk Âú® 23.2 ÂàÜÈíüÂÜÖÊÅ¢Â§ç‰∫ÜÔºåÂ§çÂà∂ÁöÑÈÄüÂ∫¶È´òËææ 440MB/s„ÄÇ</p>
<p>Âú®Âè¶Â§ñ‰∏Ä‰∏™ÊµãËØï‰∏≠ÔºåÊàë‰ª¨ Kill Êéâ‰∫Ü‰∏§‰∏™ Chunk ÊúçÂä°Âô®ÔºåÊØè‰∏™ Chunk ÊúçÂä°Âô®Â§ßÁ∫¶Êúâ 16000 ‰∏™ ChunkÔºåÂÖ± ËÆ° 660GB ÁöÑÊï∞ÊçÆ„ÄÇËøô‰∏§‰∏™ÊïÖÈöúÂØºËá¥‰∫Ü 266 ‰∏™ Chunk Âè™ÊúâÂçï‰∏™ÂâØÊú¨„ÄÇËøô 266 ‰∏™ Chunk Ë¢´ GFS ‰ºòÂÖàË∞ÉÂ∫¶ËøõË°åÂ§ç Âà∂ÔºåÂú® 2 ÂàÜÈíüÂÜÖÊÅ¢Â§çÂà∞Ëá≥Â∞ëÊúâ‰∏§‰∏™ÂâØÊú¨;Áé∞Âú®ÈõÜÁæ§Ë¢´Â∏¶ÂÖ•Âà∞Âè¶Â§ñ‰∏Ä‰∏™Áä∂ÊÄÅÔºåÂú®Ëøô‰∏™Áä∂ÊÄÅ‰∏ãÔºåÁ≥ªÁªüÂèØ‰ª•ÂÆπÂøçÂè¶ Â§ñ‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®Â§±ÊïàËÄå‰∏ç‰∏¢Â§±Êï∞ÊçÆ„ÄÇ</p>
<h3 id="Â∑•‰ΩúË¥üËç∑ÂàÜÊûê-Workload-Breakdown"><a href="#Â∑•‰ΩúË¥üËç∑ÂàÜÊûê-Workload-Breakdown" class="headerlink" title="Â∑•‰ΩúË¥üËç∑ÂàÜÊûê(Workload Breakdown)"></a>Â∑•‰ΩúË¥üËç∑ÂàÜÊûê(Workload Breakdown)</h3><p>Êú¨ËäÇ‰∏≠ÔºåÊàë‰ª¨Â±ïÁ§∫‰∫ÜÂØπ‰∏§‰∏™ GFS ÈõÜÁæ§Â∑•‰ΩúË¥üËΩΩÊÉÖÂÜµÁöÑËØ¶ÁªÜÂàÜÊûêÔºåËøô‰∏§‰∏™ÈõÜÁæ§Âíå 6.2 ËäÇ‰∏≠ÁöÑÁ±ª‰ººÔºå‰ΩÜÊòØ‰∏çÂÆåÂÖ®Áõ∏Âêå„ÄÇÈõÜÁæ§ X Áî®‰∫éÁ†îÁ©∂ÂíåÂºÄÂèëÔºåÈõÜÁæ§ Y Áî®‰∫éÁîü‰∫ßÊï∞ÊçÆÂ§ÑÁêÜ„ÄÇ</p>
<h4 id="ÊñπÊ≥ïËÆ∫ÂíåÊ≥®ÊÑè‰∫ãÈ°π"><a href="#ÊñπÊ≥ïËÆ∫ÂíåÊ≥®ÊÑè‰∫ãÈ°π" class="headerlink" title="ÊñπÊ≥ïËÆ∫ÂíåÊ≥®ÊÑè‰∫ãÈ°π"></a>ÊñπÊ≥ïËÆ∫ÂíåÊ≥®ÊÑè‰∫ãÈ°π</h4><p>Êú¨Á´†ËäÇÂàóÂá∫ÁöÑËøô‰∫õÁªìÊûúÊï∞ÊçÆÂè™ÂåÖÊã¨ÂÆ¢Êà∑Êú∫ÂèëËµ∑ÁöÑÂéüÂßãËØ∑Ê±ÇÔºåÂõ†Ê≠§ÔºåËøô‰∫õÁªìÊûúËÉΩÂ§üÂèçÊò†Êàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èÂØπ GFS Êñá‰ª∂Á≥ªÁªü‰∫ßÁîüÁöÑÂÖ®ÈÉ®Â∑•‰ΩúË¥üËΩΩ„ÄÇÂÆÉ‰ª¨‰∏çÂåÖÂê´ÈÇ£‰∫õ‰∏∫‰∫ÜÂÆûÁé∞ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇËÄåÂú®ÊúçÂä°Âô®Èó¥‰∫§‰∫íÁöÑËØ∑Ê±ÇÔºå‰πü‰∏çÂåÖ Âê´ GFS ÂÜÖÈÉ®ÁöÑÂêéÂè∞Ê¥ªÂä®Áõ∏ÂÖ≥ÁöÑËØ∑Ê±ÇÔºåÊØîÂ¶ÇÂâçÂêëËΩ¨ÂèëÁöÑÂÜôÊìç‰ΩúÔºåÊàñËÄÖÈáçÊñ∞Ë¥üËΩΩÂùáË°°Á≠âÊìç‰Ωú„ÄÇ</p>
<p>Êàë‰ª¨‰ªé GFS ÊúçÂä°Âô®ËÆ∞ÂΩïÁöÑÁúüÂÆûÁöÑ RPC ËØ∑Ê±ÇÊó•Âøó‰∏≠Êé®ÂØºÈáçÂª∫Âá∫ÂÖ≥‰∫é IO Êìç‰ΩúÁöÑÁªüËÆ°‰ø°ÊÅØ„ÄÇ‰æãÂ¶ÇÔºåGFS ÂÆ¢ Êà∑Á®ãÂ∫èÂèØËÉΩ‰ºöÊää‰∏Ä‰∏™ËØªÊìç‰ΩúÂàÜÊàêÂá†‰∏™ RPC ËØ∑Ê±ÇÊù•ÊèêÈ´òÂπ∂Ë°åÂ∫¶ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáËøô‰∫õ RPC ËØ∑Ê±ÇÊé®ÂØºÂá∫ÂéüÂßãÁöÑËØª Êìç‰Ωú„ÄÇÂõ†‰∏∫Êàë‰ª¨ÁöÑËÆøÈóÆÊ®°ÂºèÊòØÈ´òÂ∫¶Á®ãÂºèÂåñÔºåÊâÄ‰ª•Êàë‰ª¨ËÆ§‰∏∫‰ªª‰Ωï‰∏çÁ¨¶ÂêàÁöÑÊï∞ÊçÆÈÉΩÊòØËØØÂ∑Æ„ÄÇ<br>Â∫îÁî®Á®ãÂ∫èÂ¶ÇÊûúËÉΩÂ§üËÆ∞ ÂΩïÊõ¥ËØ¶Â∞ΩÁöÑÊó•ÂøóÔºåÂ∞±ÊúâÂèØËÉΩÊèê‰æõÊõ¥ÂáÜÁ°ÆÁöÑËØäÊñ≠Êï∞ÊçÆ;‰ΩÜÊòØ‰∏∫‰∫ÜËøô‰∏™ÁõÆÁöÑÂéªÈáçÊñ∞ÁºñËØëÂíåÈáçÊñ∞ÂêØÂä®Êï∞ÂçÉ‰∏™Ê≠£Âú®Ëøê Ë°åÁöÑÂÆ¢Êà∑Êú∫ÊòØ‰∏çÁé∞ÂÆûÁöÑÔºåËÄå‰∏î‰ªéÈÇ£‰πàÂ§öÂÆ¢Êà∑Êú∫‰∏äÊî∂ÈõÜÁªìÊûú‰πüÊòØ‰∏™ÁπÅÈáçÁöÑÂ∑•‰Ωú„ÄÇ</p>
<p>Â∫îËØ•ÈÅøÂÖç‰ªéÊàë‰ª¨ÁöÑÂ∑•‰ΩúË¥üËç∑Êï∞ÊçÆ‰∏≠ËøáÂ∫¶ÁöÑÂΩíÁ∫≥Âá∫ÊôÆÈÅçÁöÑÁªìËÆ∫(<em>Âç≥‰∏çË¶ÅÊääÊú¨ËäÇÁöÑÊï∞ÊçÆ‰Ωú‰∏∫Âü∫Á°ÄÁöÑÊåáÂØºÊÄßÊï∞ÊçÆ</em>)„ÄÇÂõ†‰∏∫ Google ÂÆåÂÖ®ÊéßÂà∂ÁùÄ GFS Âíå‰ΩøÁî® GFS ÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÊâÄ‰ª•ÔºåÂ∫îÁî®Á®ãÂ∫èÈÉΩÈíàÂØπ GFS ÂÅö‰∫Ü‰ºòÂåñÔºåÂêåÊó∂ÔºåGFS ‰πüÊòØ‰∏∫‰∫ÜËøô‰∫õÂ∫îÁî®Á®ãÂ∫èËÄåËÆæËÆ°ÁöÑ„ÄÇËøôÊ†∑ÁöÑÁõ∏ ‰∫í‰ΩúÁî®‰πüÂèØËÉΩÂ≠òÂú®‰∫é‰∏ÄËà¨Á®ãÂ∫èÂíåÊñá‰ª∂Á≥ªÁªü‰∏≠Ôºå‰ΩÜÊòØÂú®Êàë‰ª¨ÁöÑÊ°à‰æã‰∏≠ËøôÊ†∑ÁöÑ‰ΩúÁî®ÂΩ±ÂìçÂèØËÉΩÊõ¥ÊòæËëó„ÄÇ</p>
<h4 id="Chunk-ÊúçÂä°Âô®Â∑•‰ΩúË¥üËç∑"><a href="#Chunk-ÊúçÂä°Âô®Â∑•‰ΩúË¥üËç∑" class="headerlink" title="Chunk ÊúçÂä°Âô®Â∑•‰ΩúË¥üËç∑"></a>Chunk ÊúçÂä°Âô®Â∑•‰ΩúË¥üËç∑</h4><p><img src="http://oliji9s3j.bkt.clouddn.com/15132336885895.jpg" alt><br>Ë°® 4 ÊòæÁ§∫‰∫ÜÊìç‰ΩúÊåâÊ∂âÂèäÁöÑÊï∞ÊçÆÈáèÂ§ßÂ∞èÁöÑÂàÜÂ∏ÉÊÉÖÂÜµ„ÄÇËØªÂèñÊìç‰ΩúÊåâÊìç‰ΩúÊ∂âÂèäÁöÑÊï∞ÊçÆÈáèÂ§ßÂ∞èÂëàÁé∞‰∫ÜÂèåÂ≥∞ÂàÜÂ∏É„ÄÇ Â∞èÁöÑËØªÂèñÊìç‰Ωú(Â∞è‰∫é 64KB)‰∏ÄËà¨ÊòØÁî±Êü•ÊâæÊìç‰ΩúÁöÑÂÆ¢Êà∑Á´ØÂèëËµ∑ÁöÑÔºåÁõÆÁöÑÂú®‰∫é‰ªéÂ∑®Â§ßÁöÑÊñá‰ª∂‰∏≠Êü•ÊâæÂ∞èÂùóÁöÑÊï∞ÊçÆ„ÄÇ Â§ßÁöÑËØªÂèñÊìç‰Ωú(Â§ß‰∫é 512KB)‰∏ÄËà¨ÊòØ‰ªéÂ§¥Âà∞Â∞æÈ°∫Â∫èÁöÑËØªÂèñÊï¥‰∏™Êñá‰ª∂„ÄÇ</p>
<p>Âú®ÈõÜÁæ§ Y ‰∏äÔºåÊúâÁõ∏ÂΩìÊï∞ÈáèÁöÑËØªÊìç‰ΩúÊ≤°ÊúâËøîÂõû‰ªª‰ΩïÁöÑÊï∞ÊçÆ„ÄÇÂú®Êàë‰ª¨ÁöÑÂ∫îÁî®‰∏≠ÔºåÂ∞§ÂÖ∂ÊòØÂú®Áîü‰∫ßÁ≥ªÁªü‰∏≠ÔºåÁªèÂ∏∏ ‰ΩøÁî®Êñá‰ª∂‰Ωú‰∏∫Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÈòüÂàó„ÄÇÁîü‰∫ßËÄÖÂπ∂Ë°åÁöÑÂêëÊñá‰ª∂‰∏≠ËøΩÂä†Êï∞ÊçÆÔºåÂêåÊó∂ÔºåÊ∂àË¥πËÄÖ‰ªéÊñá‰ª∂ÁöÑÂ∞æÈÉ®ËØªÂèñÊï∞ÊçÆ„ÄÇÊüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÊ∂àË¥πËÄÖËØªÂèñÁöÑÈÄüÂ∫¶Ë∂ÖËøá‰∫ÜÁîü‰∫ßËÄÖÂÜôÂÖ•ÁöÑÈÄüÂ∫¶ÔºåËøôÂ∞±‰ºöÂØºËá¥Ê≤°ÊúâËØªÂà∞‰ªª‰ΩïÊï∞ÊçÆÁöÑÊÉÖÂÜµ„ÄÇÈõÜÁæ§ X ÈÄö Â∏∏Áî®‰∫éÁü≠ÊöÇÁöÑÊï∞ÊçÆÂàÜÊûê‰ªªÂä°ÔºåËÄå‰∏çÊòØÈïøÊó∂Èó¥ËøêË°åÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®ÔºåÂõ†Ê≠§ÔºåÈõÜÁæ§ X ÂæàÂ∞ëÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ„ÄÇ</p>
<p>ÂÜôÊìç‰ΩúÊåâÊï∞ÊçÆÈáèÂ§ßÂ∞è‰πüÂêåÊ†∑ÂëàÁé∞‰∏∫ÂèåÂ≥∞ÂàÜÂ∏É„ÄÇÂ§ßÁöÑÂÜôÊìç‰Ωú(Ë∂ÖËøá 256KB)ÈÄöÂ∏∏ÊòØÁî±‰∫é Writer ‰ΩøÁî®‰∫ÜÁºìÂ≠ò Êú∫Âà∂ÂØºËá¥ÁöÑ„ÄÇWriter ÁºìÂ≠òËæÉÂ∞èÁöÑÊï∞ÊçÆÔºåÈÄöËøáÈ¢ëÁπÅÁöÑ Checkpoint ÊàñËÄÖÂêåÊ≠•Êìç‰ΩúÔºåÊàñËÄÖÂè™ÊòØÁÆÄÂçïÁöÑÁªüËÆ°Â∞èÁöÑÂÜôÂÖ• (Â∞è‰∫é 64KB)ÁöÑÊï∞ÊçÆÈáè(alex Ê≥®:Âç≥Ê±áÈõÜÂ§öÊ¨°Â∞èÁöÑÂÜôÂÖ•Êìç‰ΩúÔºåÂΩìÊï∞ÊçÆÈáèËææÂà∞‰∏Ä‰∏™ÈòàÂÄºÔºå‰∏ÄÊ¨°ÂÜôÂÖ•)Ôºå‰πãÂêéÊâπÈáè ÂÜôÂÖ•„ÄÇ</p>
<p>ÂÜçÊù•ËßÇÂØü‰∏Ä‰∏ãËÆ∞ÂΩïËøΩÂä†Êìç‰Ωú„ÄÇÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÈõÜÁæ§ Y ‰∏≠Â§ßÁöÑËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÊâÄÂç†ÊØî‰æãÊØîÈõÜÁæ§ X Â§öÁöÑÂ§öÔºåËøôÊòØ Âõ†‰∏∫ÈõÜÁæ§ Y Áî®‰∫éÊàë‰ª¨ÁöÑÁîü‰∫ßÁ≥ªÁªüÔºåÈíàÂØπ GFS ÂÅö‰∫ÜÊõ¥ÂÖ®Èù¢ÁöÑË∞É‰ºò„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15132337130589.jpg" alt><br>Ë°® 5 ÊòæÁ§∫‰∫ÜÊåâÊìç‰ΩúÊ∂âÂèäÁöÑÊï∞ÊçÆÈáèÁöÑÂ§ßÂ∞èÁªüËÆ°Âá∫Êù•ÁöÑÊÄªÊï∞ÊçÆ‰º†ËæìÈáè„ÄÇÂú®ÊâÄÊúâÁöÑÊìç‰Ωú‰∏≠ÔºåÂ§ßÁöÑÊìç‰Ωú(Ë∂ÖËøá 256KB)Âç†ÊçÆ‰∫Ü‰∏ªË¶ÅÁöÑ‰º†ËæìÈáè„ÄÇÂ∞èÁöÑËØªÂèñ(Â∞è‰∫é 64KB)ËôΩÁÑ∂‰º†ËæìÁöÑÊï∞ÊçÆÈáèÊØîËæÉÂ∞ëÔºå‰ΩÜÊòØÂú®ËØªÂèñÁöÑÊï∞ÊçÆÈáè‰∏≠‰ªç Âç†‰∫ÜÁõ∏ÂΩìÁöÑÊØî‰æãÔºåËøôÊòØÂõ†‰∏∫Âú®Êñá‰ª∂‰∏≠ÈöèÊú∫ Seek ÁöÑÂ∑•‰ΩúË¥üËç∑ËÄåÂØºËá¥ÁöÑ„ÄÇ</p>
<h4 id="ËÆ∞ÂΩïËøΩÂä†-vs-ÂÜôÊìç‰Ωú"><a href="#ËÆ∞ÂΩïËøΩÂä†-vs-ÂÜôÊìç‰Ωú" class="headerlink" title="ËÆ∞ÂΩïËøΩÂä† vs. ÂÜôÊìç‰Ωú"></a>ËÆ∞ÂΩïËøΩÂä† vs. ÂÜôÊìç‰Ωú</h4><p>ËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂú®Êàë‰ª¨ÁöÑÁîü‰∫ßÁ≥ªÁªü‰∏≠Â§ßÈáè‰ΩøÁî®„ÄÇÂØπ‰∫éÈõÜÁæ§ XÔºåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂíåÊôÆÈÄöÂÜôÊìç‰ΩúÁöÑÊØî‰æãÊåâÁÖßÂ≠óËäÇ ÊØîÊòØ 108:1ÔºåÊåâÁÖßÊìç‰ΩúÊ¨°Êï∞ÊØîÊòØ 8:1„ÄÇÂØπ‰∫é‰Ωú‰∏∫Êàë‰ª¨ÁöÑÁîü‰∫ßÁ≥ªÁªüÁöÑÈõÜÁæ§ Y Êù•ËØ¥ÔºåËøô‰∏§‰∏™ÊØî‰æãÂàÜÂà´ÊòØ 3.7:1 Âíå 2.5:1„ÄÇ Êõ¥Ëøõ‰∏ÄÊ≠•ÔºåËøô‰∏ÄÁªÑÊï∞ÊçÆËØ¥ÊòéÂú®Êàë‰ª¨ÁöÑ‰∏§‰∏™ÈõÜÁæ§‰∏äÔºåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÊâÄÂç†ÊØî‰æãÈÉΩË¶ÅÊØîÂÜôÊìç‰ΩúË¶ÅÂ§ß„ÄÇÂØπ‰∫éÈõÜÁæ§ XÔºå Âú®Êï¥‰∏™ÊµãÈáèËøáÁ®ã‰∏≠ÔºåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÊâÄÂç†ÊØîÁéáÈÉΩÊØîËæÉ‰ΩéÔºåÂõ†Ê≠§ÁªìÊûú‰ºöÂèóÂà∞‰∏Ä‰∏§‰∏™‰ΩøÁî®Êüê‰∫õÁâπÂÆöÂ§ßÂ∞èÁöÑ buffer ÁöÑ Â∫îÁî®Á®ãÂ∫èÁöÑÂΩ±Âìç„ÄÇ</p>
<p>Â¶ÇÂêåÊàë‰ª¨ÊâÄÈ¢ÑÊúüÁöÑÔºåÊàë‰ª¨ÁöÑÊï∞ÊçÆ‰øÆÊîπÊìç‰Ωú‰∏ªË¶ÅÊòØËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúËÄå‰∏çÊòØË¶ÜÁõñÊñπÂºèÁöÑÂÜôÊìç‰Ωú„ÄÇÊàë‰ª¨ÊµãÈáè‰∫ÜÁ¨¨ ‰∏Ä‰∏™ÂâØÊú¨ÁöÑÊï∞ÊçÆË¶ÜÁõñÂÜôÁöÑÊÉÖÂÜµ„ÄÇËøôËøë‰ºº‰∫é‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ÊïÖÊÑèË¶ÜÁõñÂàöÂàöÂÜôÂÖ•ÁöÑÊï∞ÊçÆÔºåËÄå‰∏çÊòØÂ¢ûÂä†Êñ∞ÁöÑÊï∞ÊçÆ„ÄÇÂØπ‰∫é ÈõÜÁæ§ XÔºåË¶ÜÁõñÂÜôÊìç‰ΩúÂú®ÂÜôÊìç‰ΩúÊâÄÂç†ÊçÆÂ≠óËäÇ‰∏äÁöÑÊØî‰æãÂ∞è‰∫é 0.0001%ÔºåÂú®ÊâÄÂç†ÊçÆÊìç‰ΩúÊï∞Èáè‰∏äÁöÑÊØî‰æãÂ∞è‰∫é 0.0003%„ÄÇ ÂØπ‰∫éÈõÜÁæ§ YÔºåËøô‰∏§‰∏™ÊØîÁéáÈÉΩÊòØ 0.05%„ÄÇËôΩÁÑ∂ËøôÂè™ÊòØÊüê‰∏ÄÁâáÊñ≠ÁöÑÊÉÖÂÜµÔºå‰ΩÜÊòØ‰ªçÁÑ∂È´ò‰∫éÊàë‰ª¨ÁöÑÈ¢ÑÊúü„ÄÇËøôÊòØÁî±‰∫éËøô ‰∫õË¶ÜÁõñÂÜôÁöÑÊìç‰ΩúÔºåÂ§ßÈÉ®ÂàÜÊòØÁî±‰∫éÂÆ¢Êà∑Á´ØÂú®ÂèëÁîüÈîôËØØÊàñËÄÖË∂ÖÊó∂‰ª•ÂêéÈáçËØïÁöÑÊÉÖÂÜµ„ÄÇËøôÂú®Êú¨Ë¥®‰∏äÂ∫îËØ•‰∏çÁÆó‰ΩúÂ∑•‰ΩúË¥ü Ëç∑ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËÄåÊòØÈáçËØïÊú∫Âà∂‰∫ßÁîüÁöÑÁªìÊûú„ÄÇ</p>
<h4 id="Master-ÁöÑÂ∑•‰ΩúË¥üËç∑"><a href="#Master-ÁöÑÂ∑•‰ΩúË¥üËç∑" class="headerlink" title="Master ÁöÑÂ∑•‰ΩúË¥üËç∑"></a>Master ÁöÑÂ∑•‰ΩúË¥üËç∑</h4><p><img src="http://oliji9s3j.bkt.clouddn.com/15132337429406.jpg" alt><br>Ë°® 6 ÊòæÁ§∫‰∫Ü Master ÊúçÂä°Âô®‰∏äÁöÑËØ∑Ê±ÇÊåâÁ±ªÂûãÂå∫ÂàÜÁöÑÊòéÁªÜË°®„ÄÇÂ§ßÈÉ®ÂàÜÁöÑËØ∑Ê±ÇÈÉΩÊòØËØªÂèñÊìç‰ΩúÊü•ËØ¢ Chunk ‰ΩçÁΩÆ‰ø° ÊÅØ(FindLocation)„ÄÅ‰ª•Âèä‰øÆÊîπÊìç‰ΩúÊü•ËØ¢ lease ÊåÅÊúâËÄÖÁöÑ‰ø°ÊÅØ(FindLease-Locker)„ÄÇ</p>
<p>ÈõÜÁæ§ X Âíå Y Âú®Âà†Èô§ËØ∑Ê±ÇÁöÑÊï∞Èáè‰∏äÊúâÁùÄÊòéÊòæÁöÑ‰∏çÂêåÔºåÂõ†‰∏∫ÈõÜÁæ§ Y Â≠òÂÇ®‰∫ÜÁîü‰∫ßÊï∞ÊçÆÔºå‰∏ÄËà¨‰ºöÈáçÊñ∞ÁîüÊàêÊï∞ÊçÆ ‰ª•ÂèäÁî®Êñ∞ÁâàÊú¨ÁöÑÊï∞ÊçÆÊõøÊç¢ÊóßÊúâÁöÑÊï∞ÊçÆ„ÄÇÊï∞Èáè‰∏äÁöÑÂ∑ÆÂºÇ‰πüË¢´ÈöêËóèÂú®‰∫Ü Open ËØ∑Ê±Ç‰∏≠ÔºåÂõ†‰∏∫ÊóßÁâàÊú¨ÁöÑÊñá‰ª∂ÂèØËÉΩÂú®‰ª• ÈáçÊñ∞ÂÜôÂÖ•ÁöÑÊ®°ÂºèÊâìÂºÄÊó∂ÔºåÈöêÂºèÁöÑË¢´Âà†Èô§‰∫Ü(Á±ª‰ºº UNIX ÁöÑ open ÂáΩÊï∞‰∏≠ÁöÑ‚Äúw‚ÄùÊ®°Âºè)„ÄÇ</p>
<p>FindMatchingFiles ÊòØ‰∏Ä‰∏™Ê®°ÂºèÂåπÈÖçËØ∑Ê±ÇÔºåÊîØÊåÅ‚Äúls‚Äù‰ª•ÂèäÂÖ∂ÂÆÉÁ±ª‰ººÁöÑÊñá‰ª∂Á≥ªÁªüÊìç‰Ωú„ÄÇ‰∏çÂêå‰∫é Master ÊúçÂä° Âô®ÁöÑÂÖ∂ÂÆÉËØ∑Ê±ÇÔºåÂÆÉÂèØËÉΩ‰ºöÊ£ÄÁ¥¢ namespace ÁöÑÂ§ßÈÉ®ÂàÜÂÜÖÂÆπÔºåÂõ†Ê≠§ÊòØÈùûÂ∏∏ÊòÇË¥µÁöÑÊìç‰Ωú„ÄÇÈõÜÁæ§ Y ÁöÑËøôÁ±ªËØ∑Ê±ÇË¶ÅÂ§ö‰∏Ä ‰∫õÔºåÂõ†‰∏∫Ëá™Âä®ÂåñÊï∞ÊçÆÂ§ÑÁêÜÁöÑ‰ªªÂä°ËøõÁ®ãÈúÄË¶ÅÊ£ÄÊü•Êñá‰ª∂Á≥ªÁªüÁöÑÂêÑ‰∏™ÈÉ®ÂàÜÔºå‰ª•‰æø‰ªéÂÖ®Â±Ä‰∏ä‰∫ÜËß£Â∫îÁî®Á®ãÂ∫èÁöÑÁä∂ÊÄÅ„ÄÇ‰∏é ‰πã‰∏çÂêåÁöÑÊòØÔºåÈõÜÁæ§ X ÁöÑÂ∫îÁî®Á®ãÂ∫èÊõ¥Âä†ÂÄæÂêë‰∫éÁî±ÂçïÁã¨ÁöÑÁî®Êà∑ÊéßÂà∂ÔºåÈÄöÂ∏∏È¢ÑÂÖàÁü•ÈÅìËá™Â∑±ÊâÄÈúÄË¶Å‰ΩøÁî®ÁöÑÂÖ®ÈÉ®Êñá‰ª∂ÁöÑ ÂêçÁß∞„ÄÇ<br> <div class="note info"><h2 id="ÁªèÈ™å"><a href="#ÁªèÈ™å" class="headerlink" title="ÁªèÈ™å"></a>ÁªèÈ™å</h2></div><br>Âú®Âª∫ÈÄ†ÂíåÈÉ®ÁΩ≤ GFS ÁöÑËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÁªèÂéÜ‰∫ÜÂêÑÁßçÂêÑÊ†∑ÁöÑÈóÆÈ¢òÔºåÊúâ‰∫õÊòØÊìç‰Ωú‰∏äÁöÑÔºåÊúâ‰∫õÊòØÊäÄÊúØ‰∏äÁöÑ„ÄÇËµ∑ÂàùÔºåGFS Ë¢´ËÆæÊÉ≥‰∏∫Êàë‰ª¨ÁöÑÁîü‰∫ßÁ≥ªÁªüÁöÑÂêéÁ´ØÊñá‰ª∂Á≥ªÁªü„ÄÇÈöèÁùÄÊó∂Èó¥Êé®ÁßªÔºåÂú® GFS ÁöÑ‰ΩøÁî®‰∏≠ÈÄêÊ≠•ÁöÑÂ¢ûÂä†‰∫ÜÂØπ Á†îÁ©∂ÂíåÂºÄÂèë‰ªªÂä°ÁöÑÊîØÊåÅ„ÄÇÊàë‰ª¨ÂºÄÂßãÂ¢ûÂä†‰∏Ä‰∫õÂ∞èÁöÑÂäüËÉΩÔºåÊØîÂ¶ÇÊùÉÈôêÂíåÈÖçÈ¢ùÔºåÂà∞‰∫ÜÁé∞Âú®ÔºåGFS Â∑≤ÁªèÂàùÊ≠•ÊîØÊåÅ‰∫ÜËøô ‰∫õÂäüËÉΩ„ÄÇËôΩÁÑ∂Êàë‰ª¨Áîü‰∫ßÁ≥ªÁªüÊòØ‰∏•Ê†ºÂèóÊéßÁöÑÔºå‰ΩÜÊòØÁî®Êà∑Â±ÇÂç¥‰∏çÊÄªÊòØËøôÊ†∑ÁöÑ„ÄÇÈúÄË¶ÅÊõ¥Â§öÁöÑÂü∫Á°ÄÊû∂ÊûÑÊù•Èò≤Ê≠¢Áî®Êà∑Èó¥ ÁöÑÁõ∏‰∫íÂπ≤Êâ∞„ÄÇ</p>
<p>Êàë‰ª¨ÊúÄÂ§ßÁöÑÈóÆÈ¢òÊòØÁ£ÅÁõò‰ª•ÂèäÂíå Linux Áõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò„ÄÇÂæàÂ§öÁ£ÅÁõòÈÉΩÂ£∞Áß∞ÂÆÉ‰ª¨ÊîØÊåÅÊüê‰∏™ËåÉÂõ¥ÂÜÖÁöÑ Linux IDE Á°¨Áõò È©±Âä®Á®ãÂ∫èÔºå‰ΩÜÊòØÂÆûÈôÖÂ∫îÁî®‰∏≠ÂèçÊò†Âá∫Êù•ÁöÑÊÉÖÂÜµÂç¥‰∏çÊòØËøôÊ†∑ÔºåÂÆÉ‰ª¨Âè™ÊîØÊåÅÊúÄÊñ∞ÁöÑÈ©±Âä®„ÄÇÂõ†‰∏∫ÂçèËÆÆÁâàÊú¨ÂæàÊé•ËøëÔºåÊâÄ ‰ª•Â§ßÈÉ®ÂàÜÁ£ÅÁõòÈÉΩÂèØ‰ª•Áî®Ôºå‰ΩÜÊòØÂÅ∂Â∞î‰πü‰ºöÊúâÁî±‰∫éÂçèËÆÆ‰∏çÂåπÈÖçÔºåÂØºËá¥È©±Âä®ÂíåÂÜÖÊ†∏ÂØπ‰∫éÈ©±Âä®Âô®ÁöÑÁä∂ÊÄÅÂà§Êñ≠Â§±ËØØ„ÄÇËøô‰ºöÂØºËá¥Êï∞ÊçÆÂõ†‰∏∫ÂÜÖÊ†∏‰∏≠ÁöÑÈóÆÈ¢òÊÑèÂ§ñÁöÑË¢´Á†¥Âùè‰∫Ü„ÄÇËøô‰∏™ÈóÆÈ¢ò‰øÉ‰ΩøÊàë‰ª¨‰ΩøÁî® Checksum Êù•Ê†°È™åÊï∞ÊçÆÔºåÂêåÊó∂Êàë‰ª¨‰πü‰øÆÊîπÂÜÖÊ†∏Êù•Â§ÑÁêÜËøô‰∫õÂõ†‰∏∫ÂçèËÆÆ‰∏çÂåπÈÖçÂ∏¶Êù•ÁöÑÈóÆÈ¢ò„ÄÇ</p>
<p>ËæÉÊó©ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Âú®‰ΩøÁî® Linux 2.2 ÂÜÖÊ†∏Êó∂ÈÅáÂà∞‰∫Ü‰∫õÈóÆÈ¢òÔºå‰∏ªË¶ÅÊòØ fsync()ÁöÑÊïàÁéáÈóÆÈ¢ò„ÄÇÂÆÉÁöÑÊïàÁéá‰∏éÊñá‰ª∂ÁöÑÂ§ßÂ∞èËÄå‰∏çÊòØÊñá‰ª∂‰øÆÊîπÈÉ®ÂàÜÁöÑÂ§ßÂ∞èÊúâÂÖ≥„ÄÇËøôÂú®Êàë‰ª¨ÁöÑÊìç‰ΩúÊó•ÂøóÊñá‰ª∂ËøáÂ§ßÊó∂ÁªôÂá∫‰∫ÜÈöæÈ¢òÔºåÂ∞§ÂÖ∂ÊòØÂú®Êàë‰ª¨Â∞öÊú™ÂÆû Áé∞ Checkpoint ÁöÑÊó∂ÂÄô„ÄÇÊàë‰ª¨Ë¥π‰∫ÜÂæàÂ§ßÁöÑÂäõÊ∞îÁî®ÂêåÊ≠•ÂÜôÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜÊòØÊúÄÂêéËøòÊòØÁßªÊ§çÂà∞‰∫Ü Linux2.4 ÂÜÖÊ†∏ ‰∏ä„ÄÇ</p>
<p>Âè¶‰∏Ä‰∏™Âíå Linux Áõ∏ÂÖ≥ÁöÑÈóÆÈ¢òÊòØÂçï‰∏™ËØªÂÜôÈîÅÁöÑÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂú®Êüê‰∏Ä‰∏™Âú∞ÂùÄÁ©∫Èó¥ÁöÑ‰ªªÊÑè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÂøÖÈ°ª Âú®‰ªéÁ£ÅÁõò page in(ËØªÈîÅ)ÁöÑÊó∂ÂÄôÂÖà hold ‰ΩèÔºåÊàñËÄÖÂú® mmap()Ë∞ÉÁî®(ÂÜôÈîÅ)ÁöÑÊó∂ÂÄôÊîπÂÜôÂú∞ÂùÄÁ©∫Èó¥„ÄÇÊàë‰ª¨ÂèëÁé∞Âç≥ ‰ΩøÊàë‰ª¨ÁöÑÁ≥ªÁªüË¥üËΩΩÂæàËΩªÁöÑÊÉÖÂÜµ‰∏ã‰πü‰ºöÊúâÂÅ∂Â∞îÁöÑË∂ÖÊó∂ÔºåÊàë‰ª¨Ëä±Ë¥π‰∫ÜÂæàÂ§öÁöÑÁ≤æÂäõÂéªÊü•ÊâæËµÑÊ∫êÁöÑÁì∂È¢àÊàñËÄÖÁ°¨‰ª∂ÁöÑÈóÆ È¢ò„ÄÇÊúÄÂêéÊàë‰ª¨Áªà‰∫éÂèëÁé∞Ëøô‰∏™Âçï‰∏™ÈîÅÂú®Á£ÅÁõòÁ∫øÁ®ã‰∫§Êç¢‰ª•ÂâçÊò†Â∞ÑÁöÑÊï∞ÊçÆÂà∞Á£ÅÁõòÁöÑÊó∂ÂÄôÔºåÈîÅ‰Ωè‰∫ÜÂΩìÂâçÁöÑÁΩëÁªúÁ∫øÁ®ãÔºå ÈòªÊ≠¢ÂÆÉÊääÊñ∞Êï∞ÊçÆÊò†Â∞ÑÂà∞ÂÜÖÂ≠ò„ÄÇÁî±‰∫éÊàë‰ª¨ÁöÑÊÄßËÉΩ‰∏ªË¶ÅÂèóÈôê‰∫éÁΩëÁªúÊé•Âè£ÔºåËÄå‰∏çÊòØÂÜÖÂ≠ò copy ÁöÑÂ∏¶ÂÆΩÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨Áî® pread()Êõø‰ª£ mmap()ÔºåÁî®‰∫Ü‰∏Ä‰∏™È¢ùÂ§ñÁöÑ copy Âä®‰ΩúÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ</p>
<p>Â∞ΩÁÆ°ÂÅ∂Â∞îËøòÊòØÊúâÂÖ∂ÂÆÉÁöÑÈóÆÈ¢òÔºåLinux ÁöÑÂºÄÊîæÊ∫ê‰ª£Á†ÅËøòÊòØ‰ΩøÊàë‰ª¨ËÉΩÂ§üÂø´ÈÄüÊé¢Á©∂ÂíåÁêÜËß£Á≥ªÁªüÁöÑË°å‰∏∫„ÄÇÂú®ÈÄÇÂΩìÁöÑ Êó∂ÂÄôÔºåÊàë‰ª¨‰ºöÊîπËøõÂÜÖÊ†∏Âπ∂‰∏îÂíåÂÖ¨ÂºÄÊ∫êÁ†ÅÁªÑÁªáÂÖ±‰∫´Ëøô‰∫õÊîπÂä®„ÄÇ<br> <div class="note info"><h2 id="Áõ∏ÂÖ≥Â∑•‰Ωú"><a href="#Áõ∏ÂÖ≥Â∑•‰Ωú" class="headerlink" title="Áõ∏ÂÖ≥Â∑•‰Ωú"></a>Áõ∏ÂÖ≥Â∑•‰Ωú</h2></div><br>ÂíåÂÖ∂ÂÆÉÁöÑÂ§ßÂûãÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÔºåÊØîÂ¶Ç AFS[5]Á±ª‰ººÔºåGFS Êèê‰æõ‰∫Ü‰∏Ä‰∏™‰∏é‰ΩçÁΩÆÊó†ÂÖ≥ÁöÑÂêçÂ≠óÁ©∫Èó¥ÔºåËøô‰ΩøÂæóÊï∞ÊçÆ ÂèØ‰ª•‰∏∫‰∫ÜË¥üËΩΩÂùáË°°ÊàñËÄÖÁÅæÈöæÂÜó‰ΩôÁ≠âÁõÆÁöÑÂú®‰∏çÂêå‰ΩçÁΩÆÈÄèÊòéÁöÑËøÅÁßª„ÄÇ‰∏çÂêå‰∫é AFS ÁöÑÊòØÔºåGFS ÊääÊñá‰ª∂ÂàÜÂ∏ÉÂ≠òÂÇ®Âà∞‰∏ç ÂêåÁöÑÊúçÂä°Âô®‰∏äÔºåËøôÁßçÊñπÂºèÊõ¥Á±ª‰ºº Xfs[1]Âíå Swift[3]ÔºåËøôÊòØ‰∏∫‰∫ÜÊèêÈ´òÊï¥‰ΩìÊÄßËÉΩ‰ª•ÂèäÁÅæÈöæÂÜó‰ΩôÁöÑËÉΩÂäõ„ÄÇ</p>
<p>Áî±‰∫éÁ£ÅÁõòÁõ∏ÂØπÊù•ËØ¥ÊØîËæÉ‰æøÂÆúÔºåÂπ∂‰∏îÂ§çÂà∂ÁöÑÊñπÂºèÊØî RAID[9]ÊñπÊ≥ïÁÆÄÂçïÁöÑÂ§öÔºåGFS ÁõÆÂâçÂè™‰ΩøÁî®Â§çÂà∂ÁöÑÊñπÂºèÊù• ËøõË°åÂÜó‰ΩôÔºåÂõ†Ê≠§Ë¶ÅÊØî xFS ÊàñËÄÖ Swift Âç†Áî®Êõ¥Â§öÁöÑË£∏Â≠òÂÇ®Á©∫Èó¥(alex Ê≥®:Raw storageÔºåË£∏ÁõòÁöÑÁ©∫Èó¥)„ÄÇ</p>
<p>‰∏é AFS„ÄÅxFS„ÄÅFrangipani[12]‰ª•Âèä Intermezzo[6]Á≠âÊñá‰ª∂Á≥ªÁªü‰∏çÂêåÁöÑÊòØÔºåGFS Âπ∂Ê≤°ÊúâÂú®Êñá‰ª∂Á≥ªÁªüÂ±ÇÈù¢Êèê‰æõ ‰ªª‰Ωï Cache Êú∫Âà∂„ÄÇÊàë‰ª¨‰∏ªË¶ÅÁöÑÂ∑•‰ΩúÂú®Âçï‰∏™Â∫îÁî®Á®ãÂ∫èÊâßË°åÁöÑÊó∂ÂÄôÂá†‰πé‰∏ç‰ºöÈáçÂ§çËØªÂèñÊï∞ÊçÆÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÁöÑÂ∑•‰ΩúÊñπÂºè Ë¶Å‰πàÊòØÊµÅÂºèÁöÑËØªÂèñ‰∏Ä‰∏™Â§ßÂûãÁöÑÊï∞ÊçÆÈõÜÔºåË¶Å‰πàÊòØÂú®Â§ßÂûãÁöÑÊï∞ÊçÆÈõÜ‰∏≠ÈöèÊú∫ Seek Âà∞Êüê‰∏™‰ΩçÁΩÆÔºå‰πãÂêéÊØèÊ¨°ËØªÂèñÂ∞ëÈáèÁöÑ Êï∞ÊçÆ„ÄÇ</p>
<p>Êüê‰∫õÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÔºåÊØîÂ¶Ç Frangipani„ÄÅxFS„ÄÅMinnesota‚Äôs GFS[11]„ÄÅGPFS[10]ÔºåÂéªÊéâ‰∫Ü‰∏≠ÂøÉÊúçÂä°Âô®ÔºåÂè™ ‰æùËµñ‰∫éÂàÜÂ∏ÉÂºèÁÆóÊ≥ïÊù•‰øùËØÅ‰∏ÄËá¥ÊÄßÂíåÂèØÁÆ°ÁêÜÊÄß„ÄÇÊàë‰ª¨ÈÄâÊã©‰∫Ü‰∏≠ÂøÉÊúçÂä°Âô®ÁöÑÊñπÊ≥ïÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜÁÆÄÂåñËÆæËÆ°ÔºåÂ¢ûÂä†ÂèØ Èù†ÊÄßÔºåËÉΩÂ§üÁÅµÊ¥ªÊâ©Â±ï„ÄÇÁâπÂà´ÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÔºåÁî±‰∫éÂ§Ñ‰∫é‰∏≠ÂøÉ‰ΩçÁΩÆÁöÑ Master ÊúçÂä°Âô®‰øùÂ≠òÊúâÂá†‰πéÊâÄÊúâÁöÑ Chunk Áõ∏ÂÖ≥ ‰ø°ÊÅØÔºåÂπ∂‰∏îÊéßÂà∂ÁùÄ Chunk ÁöÑÊâÄÊúâÂèòÊõ¥ÔºåÂõ†Ê≠§ÔºåÂÆÉÊûÅÂ§ßÂú∞ÁÆÄÂåñ‰∫ÜÂéüÊú¨ÈùûÂ∏∏Â§çÊùÇÁöÑ Chunk ÂàÜÈÖçÂíåÂ§çÂà∂Á≠ñÁï•ÁöÑÂÆûÁé∞ ÊñπÊ≥ï„ÄÇÊàë‰ª¨ÈÄöËøáÂáèÂ∞ë Master ÊúçÂä°Âô®‰øùÂ≠òÁöÑÁä∂ÊÄÅ‰ø°ÊÅØÁöÑÊï∞ÈáèÔºå‰ª•ÂèäÂ∞Ü Master ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÂ§çÂà∂Âà∞ÂÖ∂ÂÆÉËäÇÁÇπÊù•‰øùËØÅÁ≥ªÁªüÁöÑÁÅæÈöæÂÜó‰ΩôËÉΩÂäõ„ÄÇÊâ©Â±ïËÉΩÂäõÂíåÈ´òÂèØÁî®ÊÄß(ÂØπ‰∫éËØªÂèñ)ÁõÆÂâçÊòØÈÄöËøáÊàë‰ª¨ÁöÑÂΩ±Â≠ê Master ÊúçÂä°Âô®Êú∫Âà∂Êù•‰øùËØÅ ÁöÑ„ÄÇÂØπ Master ÊúçÂä°Âô®Áä∂ÊÄÅÊõ¥ÊîπÊòØÈÄöËøáÈ¢ÑÂÜôÊó•ÂøóÁöÑÊñπÂºèÂÆûÁé∞ÊåÅ‰πÖÂåñ„ÄÇ‰∏∫Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•Ë∞ÉÊï¥‰∏∫‰ΩøÁî®Á±ª‰ºº Harp[7]‰∏≠ÁöÑ primary-copy ÊñπÊ°àÔºå‰ªéËÄåÊèê‰æõÊØîÊàë‰ª¨Áé∞Âú®ÁöÑÊñπÊ°àÊõ¥‰∏•Ê†ºÁöÑ‰∏ÄËá¥ÊÄß‰øùËØÅ„ÄÇ </p>
<p>Êàë‰ª¨Ëß£ÂÜ≥‰∫Ü‰∏Ä‰∏™ÈöæÈ¢òÔºåËøô‰∏™ÈöæÈ¢òÁ±ª‰ºº Lustre[8]Âú®Â¶Ç‰ΩïÂú®ÊúâÂ§ßÈáèÂÆ¢Êà∑Á´ØÊó∂‰øùÈöúÁ≥ªÁªüÊï¥‰ΩìÊÄßËÉΩÈÅáÂà∞ÁöÑÈóÆÈ¢ò„ÄÇ‰∏çËøáÔºåÊàë‰ª¨ÈÄöËøáÂè™ÂÖ≥Ê≥®Êàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÈúÄÊ±ÇÔºåËÄå‰∏çÊòØÊèê‰æõ‰∏Ä‰∏™ÂÖºÂÆπ POSIX ÁöÑÊñá‰ª∂Á≥ªÁªüÔºå‰ªéËÄåËææÂà∞‰∫ÜÁÆÄÂåñÈóÆ È¢òÁöÑÁõÆÁöÑ„ÄÇÊ≠§Â§ñÔºåGFS ËÆæËÆ°È¢ÑÊúüÊòØ‰ΩøÁî®Â§ßÈáèÁöÑ‰∏çÂèØÈù†ËäÇÁÇπÁªÑÂª∫ÈõÜÁæ§ÔºåÂõ†Ê≠§ÔºåÁÅæÈöæÂÜó‰ΩôÊñπÊ°àÊòØÊàë‰ª¨ËÆæËÆ°ÁöÑÊ†∏ÂøÉ„ÄÇ </p>
<p>GFS ÂæàÁ±ª‰ºº NASD Êû∂ÊûÑ[4]„ÄÇNASD Êû∂ÊûÑÊòØÂü∫‰∫éÁΩëÁªúÁ£ÅÁõòÁöÑÔºåËÄå GFS ‰ΩøÁî®ÁöÑÊòØÊôÆÈÄöËÆ°ÁÆóÊú∫‰Ωú‰∏∫ Chunk Êúç Âä°Âô®ÔºåÂ∞±ÂÉè NASD ÂéüÂΩ¢‰∏≠ÊñπÊ°à‰∏ÄÊ†∑„ÄÇÊâÄ‰∏çÂêåÁöÑÊòØÔºåÊàë‰ª¨ÁöÑ Chunk ÊúçÂä°Âô®ÈááÁî®ÊÉ∞ÊÄßÂàÜÈÖçÂõ∫ÂÆöÂ§ßÂ∞èÁöÑ Chunk ÁöÑÊñπ ÂºèÔºåËÄå‰∏çÊòØÂàÜÈÖçÂèòÈïøÁöÑÂØπË±°Â≠òÂÇ®Á©∫Èó¥„ÄÇÊ≠§Â§ñÔºåGFS ÂÆûÁé∞‰∫ÜËØ∏Â¶ÇÈáçÊñ∞Ë¥üËΩΩÂùáË°°„ÄÅÂ§çÂà∂„ÄÅÊÅ¢Â§çÊú∫Âà∂Á≠âÁ≠âÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÈúÄË¶ÅÁöÑÁâπÊÄß„ÄÇ</p>
<p>‰∏çÂêå‰∫é‰∏é Minnesota‚Äôs GFS Âíå NASDÔºåÊàë‰ª¨Âπ∂‰∏çÊîπÂèòÂ≠òÂÇ®ËÆæÂ§áÁöÑ Model„ÄÇÊàë‰ª¨Âè™ÂÖ≥Ê≥®Áî®ÊôÆÈÄöÁöÑËÆæÂ§áÊù•Ëß£ÂÜ≥ÈùûÂ∏∏Â§çÊùÇÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊó•Â∏∏ÁöÑÊï∞ÊçÆÂ§ÑÁêÜ„ÄÇ </p>
<p>Êàë‰ª¨ÈÄöËøáÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂÆûÁé∞‰∫ÜÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÈòüÂàóÔºåËøô‰∏™ÈóÆÈ¢òÁ±ª‰ºº River[2]‰∏≠ÁöÑÂàÜÂ∏ÉÂºèÈòüÂàó„ÄÇRiver‰ΩøÁî®ÁöÑÊòØË∑®‰∏ªÊú∫ÁöÑ„ÄÅÂü∫‰∫éÂÜÖÂ≠òÁöÑÂàÜÂ∏ÉÂºèÈòüÂàóÔºå‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏™ÈòüÂàóÔºåÂøÖÈ°ª‰ªîÁªÜÊéßÂà∂Êï∞ÊçÆÊµÅ;ËÄå GFS ÈááÁî®ÂèØ‰ª•Ë¢´ Áîü‰∫ßËÄÖÂπ∂ÂèëËøΩÂä†ËÆ∞ÂΩïÁöÑÊåÅ‰πÖÂåñÁöÑÊñá‰ª∂ÁöÑÊñπÂºèÂÆûÁé∞„ÄÇRiver Ê®°ÂºèÊîØÊåÅ m-Âà∞-n ÁöÑÂàÜÂ∏ÉÂºèÈòüÂàóÔºå‰ΩÜÊòØÁº∫Â∞ëÁî±ÊåÅ‰πÖÂåñ Â≠òÂÇ®Êèê‰æõÁöÑÂÆπÈîôÊú∫Âà∂ÔºåGFS Âè™ÊîØÊåÅ m-Âà∞-1 ÁöÑÈòüÂàó„ÄÇÂ§ö‰∏™Ê∂àË¥πËÄÖÂèØ‰ª•ÂêåÊó∂ËØªÂèñ‰∏Ä‰∏™Êñá‰ª∂Ôºå‰ΩÜÊòØÂÆÉ‰ª¨ËæìÂÖ•ÊµÅÁöÑÂå∫ Èó¥ÂøÖÈ°ªÊòØÂØπÈΩêÁöÑ„ÄÇ<br> <div class="note info"><h2 id="ÁªìÊùüËØ≠"><a href="#ÁªìÊùüËØ≠" class="headerlink" title="ÁªìÊùüËØ≠"></a>ÁªìÊùüËØ≠</h2></div><br>Google Êñá‰ª∂Á≥ªÁªüÂ±ïÁ§∫‰∫Ü‰∏Ä‰∏™‰ΩøÁî®ÊôÆÈÄöÁ°¨‰ª∂ÊîØÊåÅÂ§ßËßÑÊ®°Êï∞ÊçÆÂ§ÑÁêÜÁöÑÁ≥ªÁªüÁöÑÁâπË¥®„ÄÇËôΩÁÑ∂‰∏Ä‰∫õËÆæËÆ°Ë¶ÅÁÇπÈÉΩÊòØÈíà ÂØπÊàë‰ª¨ÁöÑÁâπÊÆäÁöÑÈúÄË¶ÅÂÆöÂà∂ÁöÑÔºå‰ΩÜÊòØËøòÊòØÊúâÂæàÂ§öÁâπÊÄßÈÄÇÁî®‰∫éÁ±ª‰ººËßÑÊ®°ÁöÑÂíåÊàêÊú¨ÁöÑÊï∞ÊçÆÂ§ÑÁêÜ‰ªªÂä°„ÄÇ</p>
<p>È¶ñÂÖàÔºåÊàë‰ª¨Ê†πÊçÆÊàë‰ª¨ÂΩìÂâçÁöÑÂíåÂèØÈ¢ÑÊúüÁöÑÂ∞ÜÊù•ÁöÑÂ∫îÁî®ËßÑÊ®°ÂíåÊäÄÊúØÁéØÂ¢ÉÊù•ËØÑ‰º∞‰º†ÁªüÁöÑÊñá‰ª∂Á≥ªÁªüÁöÑÁâπÊÄß„ÄÇÊàë‰ª¨ ÁöÑËØÑ‰º∞ÁªìÊûúÂ∞ÜÊàë‰ª¨ÂºïÂØºÂà∞‰∏Ä‰∏™‰ΩøÁî®ÂÆåÂÖ®‰∏çÂêå‰∫é‰º†ÁªüÁöÑËÆæËÆ°ÊÄùË∑Ø‰∏ä„ÄÇÊ†πÊçÆÊàë‰ª¨ÁöÑËÆæËÆ°ÊÄùË∑ØÔºåÊàë‰ª¨ËÆ§‰∏∫ÁªÑ‰ª∂Â§±Êïà ÊòØÂ∏∏ÊÄÅËÄå‰∏çÊòØÂºÇÂ∏∏ÔºåÈíàÂØπÈááÁî®ËøΩÂä†ÊñπÂºè(ÊúâÂèØËÉΩÊòØÂπ∂ÂèëËøΩÂä†)ÂÜôÂÖ•„ÄÅÁÑ∂ÂêéÂÜçËØªÂèñ(ÈÄöÂ∏∏Â∫èÂàóÂåñËØªÂèñ)ÁöÑÂ§ßÊñá ‰ª∂ËøõË°å‰ºòÂåñÔºå‰ª•ÂèäÊâ©Â±ïÊ†áÂáÜÊñá‰ª∂Á≥ªÁªüÊé•Âè£„ÄÅÊîæÊùæÊé•Âè£ÈôêÂà∂Êù•ÊîπËøõÊï¥‰∏™Á≥ªÁªü„ÄÇ</p>
<p>Êàë‰ª¨Á≥ªÁªüÈÄöËøáÊåÅÁª≠ÁõëÊéßÔºåÂ§çÂà∂ÂÖ≥ÈîÆÊï∞ÊçÆÔºåÂø´ÈÄüÂíåËá™Âä®ÊÅ¢Â§çÊèê‰æõÁÅæÈöæÂÜó‰Ωô„ÄÇChunk Â§çÂà∂‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•ÂØπ Chunk ÊúçÂä°Âô®ÁöÑÂ§±ÊïàËøõË°åÂÆπÈîô„ÄÇÈ´òÈ¢ëÁéáÁöÑÁªÑ‰ª∂Â§±ÊïàË¶ÅÊ±ÇÁ≥ªÁªüÂÖ∑Â§áÂú®Á∫ø‰øÆÂ§çÊú∫Âà∂ÔºåËÉΩÂ§üÂë®ÊúüÊÄßÁöÑ„ÄÅÈÄèÊòéÁöÑ‰øÆÂ§ç ÊçüÂùèÁöÑÊï∞ÊçÆÔºå‰πüËÉΩÂ§üÁ¨¨‰∏ÄÊó∂Èó¥ÈáçÊñ∞Âª∫Á´ã‰∏¢Â§±ÁöÑÂâØÊú¨„ÄÇÊ≠§Â§ñÔºåÊàë‰ª¨‰ΩøÁî® Checksum Âú®Á£ÅÁõòÊàñËÄÖ IDE Â≠êÁ≥ªÁªüÁ∫ßÂà´ Ê£ÄÊµãÊï∞ÊçÆÊçüÂùèÔºåÂú®ËøôÊ†∑Á£ÅÁõòÊï∞ÈáèÊÉä‰∫∫ÁöÑÂ§ßÁ≥ªÁªü‰∏≠ÔºåÊçüÂùèÁéáÊòØÁõ∏ÂΩìÈ´òÁöÑ„ÄÇ</p>
<p>Êàë‰ª¨ÁöÑËÆæËÆ°‰øùËØÅ‰∫ÜÂú®ÊúâÂ§ßÈáèÁöÑÂπ∂ÂèëËØªÂÜôÊìç‰ΩúÊó∂ËÉΩÂ§üÊèê‰æõÂæàÈ´òÁöÑÂêàËÆ°ÂêûÂêêÈáè„ÄÇÊàë‰ª¨ÈÄöËøáÂàÜÁ¶ªÊéßÂà∂ÊµÅÂíåÊï∞ÊçÆ ÊµÅÊù•ÂÆûÁé∞Ëøô‰∏™ÁõÆÊ†áÔºåÊéßÂà∂ÊµÅÂú® Master ÊúçÂä°Âô®Â§ÑÁêÜÔºåËÄåÊï∞ÊçÆÊµÅÂú® Chunk ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÂ§ÑÁêÜ„ÄÇÂΩì‰∏ÄËà¨ÁöÑÊìç‰ΩúÊ∂â ÂèäÂà∞ Master ÊúçÂä°Âô®Êó∂ÔºåÁî±‰∫é GFS ÈÄâÊã©ÁöÑ Chunk Â∞∫ÂØ∏ËæÉÂ§ß(alex Ê≥®:‰ªéËÄåÂáèÂ∞è‰∫ÜÂÖÉÊï∞ÊçÆÁöÑÂ§ßÂ∞è)Ôºå‰ª•ÂèäÈÄöËøá Chunk Lease Â∞ÜÊéßÂà∂ÊùÉÈôêÁßª‰∫§Áªô‰∏ªÂâØÊú¨ÔºåËøô‰∫õÊé™ÊñΩÂ∞Ü Master ÊúçÂä°Âô®ÁöÑË¥üÊãÖÈôçÂà∞ÊúÄ‰Ωé„ÄÇËøô‰ΩøÂæó‰∏Ä‰∏™ÁÆÄÂçï„ÄÅ‰∏≠ÂøÉÁöÑ Master‰∏ç‰ºöÊàê‰∏∫Êàê‰∏∫Áì∂È¢à„ÄÇÊàë‰ª¨Áõ∏‰ø°Êàë‰ª¨ÂØπÁΩëÁªúÂçèËÆÆÊ†àÁöÑ‰ºòÂåñÂèØ‰ª•ÊèêÂçáÂΩìÂâçÂØπ‰∫éÊØèÂÆ¢Êà∑Á´ØÁöÑÂÜôÂÖ•ÂêûÂêêÈáèÈôêÂà∂„ÄÇ</p>
<p>GFS ÊàêÂäüÁöÑÂÆûÁé∞‰∫ÜÊàë‰ª¨ÂØπÂ≠òÂÇ®ÁöÑÈúÄÊ±ÇÔºåÂú® Google ÂÜÖÈÉ®ÔºåÊó†ËÆ∫ÊòØ‰Ωú‰∏∫Á†îÁ©∂ÂíåÂºÄÂèëÁöÑÂ≠òÂÇ®Âπ≥Âè∞ÔºåËøòÊòØ‰Ωú‰∏∫ Áîü‰∫ßÁ≥ªÁªüÁöÑÊï∞ÊçÆÂ§ÑÁêÜÂπ≥Âè∞ÔºåÈÉΩÂæóÂà∞‰∫ÜÂπøÊ≥õÁöÑÂ∫îÁî®„ÄÇÂÆÉÊòØÊàë‰ª¨ÊåÅÁª≠ÂàõÊñ∞ÂíåÂ§ÑÁêÜÊï¥‰∏™ WEB ËåÉÂõ¥ÂÜÖÁöÑÈöæÈ¢òÁöÑ‰∏Ä‰∏™Èáç<br>Ë¶ÅÂ∑•ÂÖ∑„ÄÇ</p>
]]></content>
      
        <categories>
            
            <category> paper </category>
            
        </categories>
        
        
        <tags>
            
            <tag> paper </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hive‰∫ãÂä°-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£]]></title>
      <url>https://stanxia.github.io/2017/12/13/Hive%E4%BA%8B%E5%8A%A1-%E7%BF%BB%E8%AF%91%E8%87%AA%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ACIDÁÆÄ‰ªã"><a href="#ACIDÁÆÄ‰ªã" class="headerlink" title="ACIDÁÆÄ‰ªã"></a>ACIDÁÆÄ‰ªã</h2></div>
<p>ACID‰ª£Ë°®Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÁöÑÂõõ‰∏™ÁâπÊÄß:</p>
<ul>
<li>ÂéüÂ≠êÊÄßÔºàAtomicityÔºâ:‰∏Ä‰∏™‰∫ãÂä°ÊòØ‰∏Ä‰∏™‰∏çÂèØÂÜçÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰ΩçÔºå‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúË¶Å‰πàÈÉΩÂèëÁîüÔºåË¶Å‰πàÈÉΩ‰∏çÂèëÁîü„ÄÇ</li>
<li>‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ:‰∫ãÂä°ÂºÄÂßã‰πãÂâçÂíå‰∫ãÂä°ÁªìÊùü‰ª•ÂêéÔºåÊï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥ÊÄßÁ∫¶ÊùüÊ≤°ÊúâË¢´Á†¥Âùè„ÄÇËøôÊòØËØ¥Êï∞ÊçÆÂ∫ì‰∫ãÂä°‰∏çËÉΩÁ†¥ÂùèÂÖ≥Á≥ªÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß‰ª•Âèä‰∏öÂä°ÈÄªËæë‰∏äÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ</li>
<li>ÈöîÁ¶ªÊÄßÔºàIsolationÔºâ:Â§ö‰∏™‰∫ãÂä°Âπ∂ÂèëËÆøÈóÆÔºå‰∫ãÂä°‰πãÈó¥ÊòØÈöîÁ¶ªÁöÑÔºå‰∏Ä‰∏™‰∫ãÂä°‰∏çÂΩ±ÂìçÂÖ∂ÂÆÉ‰∫ãÂä°ËøêË°åÊïàÊûú„ÄÇËøôÊåáÁöÑÊòØÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÔºåÂΩì‰∏çÂêåÁöÑ‰∫ãÂä°ÂêåÊó∂Êìç‰ΩúÁõ∏ÂêåÁöÑÊï∞ÊçÆÊó∂ÔºåÊØè‰∏™‰∫ãÂä°ÈÉΩÊúâÂêÑËá™ÂÆåÊï¥ÁöÑÊï∞ÊçÆÁ©∫Èó¥„ÄÇ‰∫ãÂä°Êü•ÁúãÊï∞ÊçÆÊõ¥Êñ∞Êó∂ÔºåÊï∞ÊçÆÊâÄÂ§ÑÁöÑÁä∂ÊÄÅË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂÆÉ‰πãÂâçÁöÑÁä∂ÊÄÅÔºåË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂêéÁöÑÁä∂ÊÄÅÔºå‰∫ãÂä°‰∏ç‰ºöÊü•ÁúãÂà∞‰∏≠Èó¥Áä∂ÊÄÅÁöÑÊï∞ÊçÆ„ÄÇ‰∫ãÂä°‰πãÈó¥ÁöÑÁõ∏Â∫îÂΩ±ÂìçÔºåÂàÜÂà´‰∏∫ÔºöËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØª„ÄÅ‰∏¢Â§±Êõ¥Êñ∞„ÄÇ</li>
<li>ÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ:ÊÑèÂë≥ÁùÄÂú®‰∫ãÂä°ÂÆåÊàê‰ª•ÂêéÔºåËØ•‰∫ãÂä°ÈîÅÂØπÊï∞ÊçÆÂ∫ìÊâÄ‰ΩúÁöÑÊõ¥Êîπ‰æøÊåÅ‰πÖÁöÑ‰øùÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰πã‰∏≠ÔºåÂπ∂‰∏ç‰ºöË¢´ÂõûÊªö„ÄÇ</li>
</ul>
<p>Âú®Hive0.13‰∏≠Ê∑ªÂä†‰∫ãÂä°‰πãÂêéÔºåÂú®ÂàÜÂå∫Á∫ßÂà´‰∏äÊèê‰æõ‰∫ÜÂéüÂ≠êÊÄß„ÄÅ‰∏ÄËá¥ÊÄßÂíåÊåÅ‰πÖÊÄß„ÄÇÂèØ‰ª•ÈÄöËøáÊâìÂºÄÂèØÁî®ÁöÑÈîÅÂÆöÊú∫Âà∂(ZooKeeperÊàñÂÜÖÂ≠ò)Êù•Êèê‰æõÈöîÁ¶ª„ÄÇÁé∞Âú®ÂèØ‰ª•Âú®Ë°åÁ∫ßÂà´‰∏äÊèê‰æõÂÆåÊï¥ÁöÑACIDËØ≠‰πâÔºåËøôÊ†∑‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•Ê∑ªÂä†Ë°åÔºåËÄåÂè¶‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•Âú®Áõ∏ÂêåÁöÑÂàÜÂå∫‰∏äËØªÂèñÔºåËÄå‰∏ç‰ºöÁõ∏‰∫íÂπ≤Êâ∞„ÄÇ<br><a id="more"></a><br>‰ΩøÁî®ACIDËØ≠‰πâÁöÑ‰∫ãÂä°Ë¢´Ê∑ªÂä†Âà∞Hive‰∏≠Ôºå‰ª•Ëß£ÂÜ≥‰ª•‰∏ãÁî®‰æã:</p>
<ul>
<li>ÊµÅÊï∞ÊçÆÁöÑÊé•ÂÖ•„ÄÇËÆ∏Â§öÁî®Êà∑ÈÉΩ‰ΩøÁî® Apache Flume, Apache Storm, or Apache Kafka Â∞ÜÊµÅÂºèÊï∞ÊçÆÂØºÂÖ•HadoopÈõÜÁæ§„ÄÇ Ëøô‰∫õÂ∑•ÂÖ∑ÈÉΩÊòØÊØèÁßíÁôæ‰∏áË°åÁ∫ßÁöÑÊï∞ÊçÆÂÜôÂÖ•ÔºåËÄåHiveÂè™ËÉΩÊØèÂçÅ‰∫îÂàÜÈíüÂà∞‰∏Ä‰∏™Â∞èÊó∂Ê∑ªÂä†‰∏ÄÊ¨°ÂàÜÂå∫„ÄÇÂø´ÈÄüÁöÑÂ¢ûÂä†ÂàÜÂå∫‰ºöÂØπË°®‰∏≠ÁöÑÂàÜÂå∫Êï∞ÈáèÂΩ¢ÊàêÂéãÂäõ„ÄÇÂΩìÁÑ∂ÂèØ‰ª•‰∫ãÂÖàÂàõÂª∫Â•ΩÂàÜÂå∫ÂÜçÂ∞ÜÊï∞ÊçÆÂØºÂÖ•Ôºå‰ΩÜËøôÊ†∑‰ºöÂºïËµ∑ËÑèËØªÔºåËÄå‰∏îÁõÆÂΩï‰∏ãÁîüÊàêÁöÑÂ∞èÊñá‰ª∂‰ºöÂØπnamenodeÈÄ†ÊàêÂæàÂ§ßÁöÑÂéãÂäõ„ÄÇËÄåÊñ∞ÁâπÊÄßÂèØ‰ª•ÂæàÂ•ΩÁöÑËß£ÂÜ≥‰∏äËø∞ÈóÆÈ¢ò</li>
<li>Áª¥Â∫¶Ë°®ÁöÑÁºìÊÖ¢ÂèòÂåñÔºöÂú®ÂÖ∏ÂûãÁöÑÊòüÂûãÊû∂ÊûÑÊï∞ÊçÆ‰ªìÂ∫ì‰∏≠ÔºåÁª¥Â∫¶Ë°®ÈöèÊó∂Èó¥ÊÖ¢ÊÖ¢ÂèòÂåñ„ÄÇ‰æãÂ¶ÇÔºåÈõ∂ÂîÆÂïÜÂ∞Ü‰ºöÊâìÂºÄÊñ∞ÁöÑÂïÜÂ∫óÔºåËøô‰∫õÂïÜÂ∫óÈúÄË¶ÅË¢´Ê∑ªÂä†Âà∞ÂïÜÂ∫óÁöÑË°®‰∏≠ÔºåÊàñËÄÖÁé∞ÊúâÁöÑÂïÜÂ∫óÂèØËÉΩ‰ºöÊîπÂèòÂÆÉÁöÑÂπ≥ÊñπËã±Â∞∫ÊàñÂÖ∂‰ªñ‰∏Ä‰∫õË¢´Ë∑üË∏™ÁöÑÁâπÊÄß„ÄÇËøô‰∫õÊõ¥Êîπ‰ºöÂØºËá¥ÊèíÂÖ•Âçï‰∏™ËÆ∞ÂΩïÊàñÊõ¥Êñ∞ËÆ∞ÂΩï(ÂèñÂÜ≥‰∫éÊâÄÈÄâÊã©ÁöÑÁ≠ñÁï•)„ÄÇHive‰ªé0.14ÂºÄÂßãÊîØÊåÅ„ÄÇ</li>
<li>Êï∞ÊçÆÊõ¥Êñ∞„ÄÇ‰ªéHive 0.14ÂºÄÂßãÔºåÂèØ‰ª• INSERT, UPDATE, Âíå DELETE„ÄÇ</li>
<li>‰ΩøÁî®SQL MERGEËØ≠Âè•ËøõË°åÊâπÈáèÊõ¥Êñ∞„ÄÇ</li>
</ul>
<div class="note info"><h2 id="‰∫ãÂä°ÈôêÂà∂"><a href="#‰∫ãÂä°ÈôêÂà∂" class="headerlink" title="‰∫ãÂä°ÈôêÂà∂"></a>‰∫ãÂä°ÈôêÂà∂</h2></div>
<ul>
<li>BEGIN, COMMIT, and ROLLBACKËøò‰∏çÊîØÊåÅ„ÄÇÊâÄÊúâÊìç‰ΩúÈÉΩÊòØËá™Âä®Êèê‰∫§ÁöÑ„ÄÇËØ•ËÆ°ÂàíÂ∞ÜÂú®Êú™Êù•ÁöÑÁâàÊú¨‰∏≠Êèê‰æõÊîØÊåÅ„ÄÇ</li>
<li>Áé∞ÁõÆÂâçÂè™ÊîØÊåÅORCÊñá‰ª∂Ê†ºÂºè„ÄÇÂ∑≤ÁªèÊûÑÂª∫‰∫ÜËøôÊ†∑ÁöÑÂäüËÉΩÔºåÂèØ‰ª•ÈÄöËøá‰ªª‰ΩïÂ≠òÂÇ®Ê†ºÂºèÊù•‰ΩøÁî®‰∫ãÂä°Ôºå‰ª•Á°ÆÂÆöÊõ¥Êñ∞ÊàñÂà†Èô§Â¶Ç‰ΩïÂ∫îÁî®‰∫éÂü∫Êú¨ËÆ∞ÂΩï(Âü∫Êú¨‰∏äÔºåÂÖ∑ÊúâÊòæÂºèÊàñÈöêÂºèË°åid)Ôºå‰ΩÜÂà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÈõÜÊàêÂ∑•‰ΩúËøòÂè™ÊòØÁî®‰∫éORC„ÄÇ</li>
<li>‰∫ãÂä°ÈªòËÆ§‰∏∫ÂÖ≥Èó≠ÁöÑ„ÄÇ</li>
<li>Ë°®ÂøÖÈ°ªË¶ÅÂàÜÊ°∂ÊâçËÉΩÊîØÊåÅ‰∫ãÂä°„ÄÇÂõ†‰∏∫Â§ñÈÉ®Ë°®‰∏çÂèóÂàÜÊ°∂ÁöÑÊéßÂà∂ÔºåÂõ†ËÄåÂ§ñÈÉ®Ë°®Âπ∂‰∏çÊîØÊåÅ‰∫ãÂä°„ÄÇ</li>
<li>‰ªé‰∏Ä‰∏™ non_ACID Ë°®ËØªÂÜô ACID Ë°® ÊòØ‰∏çÂÖÅËÆ∏ÁöÑ„ÄÇ‰∫ãÂä°ÁÆ°ÁêÜÂô®ÂøÖÈ°ªËÆæÁΩÆ‰∏∫Ôºöorg.apache.hadoop.hive.ql.lockmgr.DbTxnManager „ÄÇ</li>
<li>ÁõÆÂâçÂè™ÊîØÊåÅÂø´ÁÖßÁ∫ßÂà´ÁöÑÈöîÁ¶ª„ÄÇ</li>
<li>Áé∞ÊúâÁöÑZooKeeperÂíåÂÜÖÂ≠ò‰∏≠ÁöÑÈîÅÁÆ°ÁêÜÂô®‰∏é‰∫ãÂä°‰∏çÂÖºÂÆπ„ÄÇ</li>
<li>ACIDË°®‰∏çÊîØÊåÅ‰ΩøÁî®ALTER TABLEÁöÑÊ®°ÂºèÊõ¥Êîπ„ÄÇ</li>
<li>‰ΩøÁî® ORACLE ‰Ωú‰∏∫ÂÖÉÊï∞ÊçÆÂ∫ìÔºå‚Äùdatanucleus.connectionPoolingType=BONECP‚Äù ÂèØËÉΩ‰ºöÂá∫Áé∞Ôºö‚ÄùNo such lock..‚Äù Âíå ‚ÄúNo such transaction‚Ä¶‚ÄùÁ≠âÈîôËØØ„ÄÇËØ∑ËÆæÁΩÆ‰∏∫Ôºö‚Äùdatanucleus.connectionPoolingType=DBCP‚Äù „ÄÇ</li>
<li>‰∫ãÂä°Ë°®‰∏çÊîØÊåÅ ÔºöLOAD DATA‚Ä¶  ËØ≠Ê≥ï„ÄÇ</li>
</ul>
<div class="note info"><h2 id="ÊµÅ-APIs"><a href="#ÊµÅ-APIs" class="headerlink" title="ÊµÅ APIs"></a>ÊµÅ APIs</h2></div>
<p>Hive Êèê‰æõÊï∞ÊçÆ ÊµÅÂºèÊèíÂÖ•ÂíåÊµÅÂºèÊõ¥Êñ∞ÁöÑ APIs:</p>
<ul>
<li>Hive HCatalog Streaming API</li>
<li>HCatalog Streaming Mutation API (Hive 2.0.0 Âèä‰ª•‰∏äÂèØÁî®)</li>
</ul>
<div class="note info"><h2 id="ËØ≠Ê≥ï‰øÆÊîπ"><a href="#ËØ≠Ê≥ï‰øÆÊîπ" class="headerlink" title="ËØ≠Ê≥ï‰øÆÊîπ"></a>ËØ≠Ê≥ï‰øÆÊîπ</h2></div>
<p>‰ªéHive 0.14. ÂºÄÂßãÔºåINSERT‚Ä¶VALUES, UPDATE, and DELETE Â∑≤ÁªèÊ∑ªÂä†Ëøõ SQL ËØ≠Ê≥ï„ÄÇÂá†‰∏™Êñ∞ÂëΩ‰ª§Â∑≤ÁªèÊ∑ªÂä†Ëøõ Hive ÁöÑ DDL ÊîØÊåÅ ACID Âíå ‰∫ãÂä°, Âπ∂‰øÆÊîπ‰∏Ä‰∫õÂ∑≤ÁªèÂ≠òÂú®ÁöÑ DDL „ÄÇ  </p>
<p>Êñ∞ÂëΩ‰ª§Ôºö</p>
<ul>
<li>SHOW TRANSACTIONS </li>
<li>SHOW COMPACTIONS </li>
<li>ABORT TRANSACTIONS </li>
</ul>
<p>‰øÆÊîπÁöÑÂëΩ‰ª§Ôºö</p>
<ul>
<li>SHOW LOCKS  :Êèê‰æõ‰∏é‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊñ∞ÈîÅÁöÑ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúÊ≠£Âú®‰ΩøÁî® ZooKeeper ÊàñËÄÖÂÜÖÂ≠òÈîÅÁÆ°ÁêÜÔºåÂëΩ‰ª§ÁöÑËæìÂá∫Â∞ÜÊúâ‰∏çÂêå„ÄÇ</li>
<li>ALTER TABLE :Ê∑ªÂä†Êñ∞ÂäüËÉΩÔºåËØ∑Ê±ÇË°®ÊàñÂàÜÂå∫ÁöÑÂéãÁº©„ÄÇ ‰∏ÄËà¨Êù•ËØ¥ÔºåÁî®Êà∑‰∏çÈúÄË¶ÅËØ∑Ê±ÇÂéãÁº©ÔºåÂõ†‰∏∫Á≥ªÁªüÂ∞ÜÊ£ÄÊµãÂà∞ÂØπÂÆÉ‰ª¨ÁöÑÈúÄÊ±ÇÂπ∂ÂêØÂä®ÂéãÁº©„ÄÇ ÁÑ∂ËÄåÔºåÂ¶ÇÊûúÂØπ‰∏Ä‰∏™Ë°®ÂÖ≥Èó≠‰∫ÜÂéãÁº©ÔºåÊàñËÄÖÁî®Êà∑Â∏åÊúõÂú®Á≥ªÁªü‰∏çÈÄâÊã©ÁöÑÊó∂ÂÄôÂéãÁº©Ë°®, ALTER TABLE ÂèØÁî®‰∫éÂêØÂä®ÂéãÁº©„ÄÇ‰∏∫‰∫ÜËßÇÂØüÂéãÁº©ÁöÑËøõÂ∫¶ÔºåÁî®Êà∑ÂèØ‰ª•‰ΩøÁî® SHOW COMPACTIONS „ÄÇ</li>
</ul>
<div class="note info"><h2 id="Âü∫Á°ÄËÆæËÆ°"><a href="#Âü∫Á°ÄËÆæËÆ°" class="headerlink" title="Âü∫Á°ÄËÆæËÆ°"></a>Âü∫Á°ÄËÆæËÆ°</h2></div>
<p>HDFS ‰∏çÊîØÊåÅÂØπÊñá‰ª∂ËøõË°åÂ∞±Âú∞‰øÆÊîπ„ÄÇ‰πü‰∏çÊèê‰æõËØªÁöÑ‰∏ÄËá¥ÊÄßÔºåÂπ∂‰∏îÂΩìÊúâÊï∞ÊçÆËøΩÂä†Âà∞Êñá‰ª∂ÔºåHDFS ‰∏çÂØπËØªÊï∞ÊçÆÁöÑÁî®Êà∑Êèê‰æõ‰∏ÄËá¥ÊÄßÁöÑ„ÄÇ‰∏∫‰∫ÜÂú® HDFS ‰∏äÊèê‰æõËøô‰∫õÁâπÊÄßÔºåÊàë‰ª¨ÈÅµÂæ™‰∫ÜÂÖ∂‰ªñÊï∞ÊçÆ‰ªìÂ∫ìÂ∑•ÂÖ∑‰∏≠‰ΩøÁî®ÁöÑÊ†áÂáÜÊñπÊ≥ï„ÄÇ Ë°®ÊàñÂàÜÂå∫ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âú®‰∏ÄÁªÑ base Êñá‰ª∂‰∏≠„ÄÇ Êñ∞ÁöÑËÆ∞ÂΩï„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§Â≠òÂÇ®Âú® delta Êñá‰ª∂‰∏≠„ÄÇÊØè‰∏™ÊîπÂèòË°®ÊàñÂàÜÂå∫ÁöÑ‰∫ãÂä°‰∫ßÁîü‰∏ÄÁªÑÊñ∞ÁöÑ delta Êñá‰ª∂ „ÄÇËØªÁöÑÊó∂ÂÄôÔºåÂêàÂπ∂ base Âíå delta Êñá‰ª∂, Â∫îÁî®ÊâÄÊúâÁöÑÊõ¥Êñ∞ÂíåÂà†Èô§„ÄÇ</p>
<h3 id="Base-Âíå-Delta-ÁõÆÂΩï"><a href="#Base-Âíå-Delta-ÁõÆÂΩï" class="headerlink" title="Base Âíå Delta ÁõÆÂΩï"></a>Base Âíå Delta ÁõÆÂΩï</h3><p>‰∏Ä‰∏™ÂàÜÂå∫Êàñ‰∏Ä‰∏™ÈùûÂàÜÂå∫Ë°®ÁöÑÊâÄÊúâÊñá‰ª∂ÈÉΩÂú®Âêå‰∏Ä‰∏™ÁõÆÂΩï‰∏ã„ÄÇÊúâÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºå‰ªª‰Ωï ACID ÁöÑÂàÜÂå∫ÔºàÊàñÈùûÂàÜÂå∫Ë°®ÔºâÈÉΩÊúâ‰∏Ä‰∏™ base Êñá‰ª∂ÁõÆÂΩïÔºåÂíå‰∏Ä‰∏™ delta Êñá‰ª∂ÁõÆÂΩï„ÄÇ </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">hive&gt;</span> dfs -ls -R /user/hive/warehouse/t;</span><br><span class="line">drwxr-xr-x   - ekoifman staff          0 2016-06-09 17:03 /user/hive/warehouse/t/base_0000022</span><br><span class="line">-rw-r--r--   1 ekoifman staff        602 2016-06-09 17:03 /user/hive/warehouse/t/base_0000022/bucket_00000</span><br><span class="line">drwxr-xr-x   - ekoifman staff          0 2016-06-09 17:06 /user/hive/warehouse/t/delta_0000023_0000023_0000</span><br><span class="line">-rw-r--r--   1 ekoifman staff        611 2016-06-09 17:06 /user/hive/warehouse/t/delta_0000023_0000023_0000/bucket_00000</span><br><span class="line">drwxr-xr-x   - ekoifman staff          0 2016-06-09 17:07 /user/hive/warehouse/t/delta_0000024_0000024_0000</span><br><span class="line">-rw-r--r--   1 ekoifman staff        610 2016-06-09 17:07 /user/hive/warehouse/t/delta_0000024_0000024_0000/bucket_00000</span><br></pre></td></tr></table></figure>
<h3 id="ÂêàÂπ∂"><a href="#ÂêàÂπ∂" class="headerlink" title="ÂêàÂπ∂"></a>ÂêàÂπ∂</h3><p>ÂêàÂπ∂ÊòØ‰∏ÄÁªÑËøêË°åÂú® Metastore‰∏≠ÊîØÊåÅ ACID Á≥ªÁªüÁöÑÂêéÂè∞Á®ãÂ∫è„ÄÇÂåÖÂê´ Initiator, Worker, Cleaner, AcidHouseKeeperServiceis Âíå‰∏Ä‰∫õÂÖ∂‰ªñÁöÑ„ÄÇ</p>
<h4 id="Delta-Êñá‰ª∂ÂêàÂπ∂"><a href="#Delta-Êñá‰ª∂ÂêàÂπ∂" class="headerlink" title="Delta Êñá‰ª∂ÂêàÂπ∂"></a>Delta Êñá‰ª∂ÂêàÂπ∂</h4><p>ÈöèÁùÄ‰øÆÊîπÁöÑÊìç‰ΩúÔºåË∂äÊù•Ë∂äÂ§öÁöÑdeltaÊñá‰ª∂Ë¢´ÂàõÂª∫ÔºåÈúÄË¶ÅÂêàÂπ∂‰ª•‰øùÊåÅË∂≥Â§üÁöÑÊÄßËÉΩ„ÄÇÊúâ‰∏§ÁßçÁ±ªÂûãÁöÑÂêàÂπ∂ÔºåminorÂíåmajor„ÄÇ</p>
<ul>
<li>Minor ÂêàÂπ∂ ÔºöÂú®ÊØè‰∏Ä‰∏™ bucket ÔºåÂ∞Ü‰∏ÄÁªÑÂ∑≤ÁªèÂ≠òÂú®ÁöÑ delta Êñá‰ª∂ÂêàÂπ∂ÈáçÂÜôÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑ delta Êñá‰ª∂‰∏≠„ÄÇ</li>
<li>Major ÂêàÂπ∂ ÔºöÂú®ÊØè‰∏Ä‰∏™ bucket ÔºåÂ∞Ü‰∏Ä‰∏™ÊàñÂ§ö‰∏™ delta Êñá‰ª∂Âíå bucket ÁöÑ base Êñá‰ª∂ÂêàÂπ∂ÈáçÂÜôÂà∞‰∏Ä‰∏™Êñ∞ÁöÑ base Êñá‰ª∂‰∏≠.  Major ÂêàÂπ∂ÊïàÁéáÈ´ò‰ΩÜËä±ÈîÄÂ§ß„ÄÇ</li>
</ul>
<p>ÊâÄÊúâÁöÑÂêàÂπ∂ÈÉΩÂú®ÂêéÂè∞ÂÆåÊàêÔºåÂπ∂‰∏î‰∏çÂ¶®Á¢çÂØπÊï∞ÊçÆÂΩìÂâçÁöÑËØªÂíåÂÜô„ÄÇ ÂêàÂπ∂ÂÆåÊâÄÊúâÁöÑÊóßÊñá‰ª∂‰πãÂêéÔºåÂ∞±Âà†Èô§ÊéâËøô‰∫õÊóßÊñá‰ª∂„ÄÇ</p>
<h4 id="Initiator-ÂàùÂßãÂåñÂô®"><a href="#Initiator-ÂàùÂßãÂåñÂô®" class="headerlink" title="Initiator ÂàùÂßãÂåñÂô®"></a>Initiator ÂàùÂßãÂåñÂô®</h4><p>Ëøô‰∏™Ê®°ÂùóË¥üË¥£ÂèëÁé∞Âì™‰∫õË°®ÊàñÂàÜÂå∫Â∫îËØ•Ë¢´ÂêàÂπ∂„ÄÇ  ÈÄöËøáËÆæÁΩÆÔºöhive.compactor.initiator.on ÂºÄÂêØ„ÄÇÊØè‰∏™ÂêàÂπ∂‰ªªÂä°Â§ÑÁêÜ‰∏Ä‰∏™ÂàÜÂå∫ (Êàñ‰∏Ä‰∏™ÈùûÂàÜÂå∫Ë°®).  Â¶ÇÊûúËøûÁª≠ÂêàÂπ∂Â§±Ë¥•Ê¨°Êï∞Ë∂ÖËøá hive.compactor.initiator.failed.compacts.threshold ËÆæÂÆöÁöÑÂÄºÔºåËØ•ÂàÜÂå∫ÁöÑËá™Âä®ÂêàÂπ∂Ë∞ÉÂ∫¶Â∞Ü‰ºöË¢´ÂÅúÊ≠¢„ÄÇ</p>
<h4 id="Worker-Â∑•‰ΩúÊâßË°åÂô®"><a href="#Worker-Â∑•‰ΩúÊâßË°åÂô®" class="headerlink" title="Worker Â∑•‰ΩúÊâßË°åÂô®"></a>Worker Â∑•‰ΩúÊâßË°åÂô®</h4><p>ÊØè‰∏™ worker Â§ÑÁêÜ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂêàÂπ∂‰ªªÂä°.  ÂêàÂπ∂ÊòØ MapReduce jobÔºåÂêçÂ≠óÊòØ: <hostname>-compactor-<db>.<table>.<partition>. ÊØè‰∏Ä‰∏™worker Êèê‰∫§ job Âà∞ÈõÜÁæ§‰∏ä (ÈÄöËøáÂÆö‰πâÁöÑ hive.compactor.job.queue) Âπ∂Á≠âÁùÄ‰ªªÂä°ÂÆåÊàê„ÄÇhive.compactor.worker.threads ÂÜ≥ÂÆö‰∫ÜÊØè‰∏™ Metastore ‰∏≠ Workers ÁöÑÊï∞Èáè„ÄÇHive ‰ªìÂ∫ì‰∏≠ÁöÑ Workers ÁöÑÊÄªÊï∞ÂÜ≥ÂÆö‰∫ÜÂΩìÂâçÂêàÂπ∂‰ªªÂä°ÁöÑÊúÄÂ§ßÂÄº„ÄÇ</partition></table></db></hostname></p>
<h4 id="Cleaner-Ê∏ÖÈô§Âô®"><a href="#Cleaner-Ê∏ÖÈô§Âô®" class="headerlink" title="Cleaner Ê∏ÖÈô§Âô®"></a>Cleaner Ê∏ÖÈô§Âô®</h4><p>ËØ•Á®ãÂ∫èÁöÑËÅåË¥£ÔºöÂà†Èô§ÂêàÂπ∂Âêé‰∏çÂÜçÈúÄË¶ÅÁöÑ delta Êñá‰ª∂.</p>
<h4 id="AcidHouseKeeperService-ACIDÁÆ°ÂÆ∂ÊúçÂä°"><a href="#AcidHouseKeeperService-ACIDÁÆ°ÂÆ∂ÊúçÂä°" class="headerlink" title="AcidHouseKeeperService ACIDÁÆ°ÂÆ∂ÊúçÂä°"></a>AcidHouseKeeperService ACIDÁÆ°ÂÆ∂ÊúçÂä°</h4><p>ÂØªÊâæÂú® hive.txn.timeout Êó∂Èó¥ÂÜÖÊ≤°ÊúâÂøÉË∑≥ÁöÑ‰∫ãÂä°ÔºåÂπ∂Â∞ÜÂÖ∂ÁªàÊ≠¢„ÄÇËØ•Á≥ªÁªüÂÅáÂÆöÂèëËµ∑‰∫ãÂä°ÁöÑÂÆ¢Êà∑Êú∫ÂÅúÊ≠¢‰∫ÜÂøÉË∑≥ÔºåËÄåÈîÅÂÆöÁöÑËµÑÊ∫êÂ∫îËØ•Ë¢´ÈáäÊîæ„ÄÇ</p>
<h4 id="SHOW-COMPACTIONS-Êü•ÁúãÂêàÂπ∂"><a href="#SHOW-COMPACTIONS-Êü•ÁúãÂêàÂπ∂" class="headerlink" title="SHOW COMPACTIONS Êü•ÁúãÂêàÂπ∂"></a>SHOW COMPACTIONS Êü•ÁúãÂêàÂπ∂</h4><p>Ëøô‰∏™ÂëΩ‰ª§ÊòæÁ§∫ÁõÆÂâçÊ≠£Âú®ËøêË°åÁöÑÂêàÂπ∂‰ø°ÊÅØÔºåÂíåÊúÄËøëÁöÑÂêàÂπ∂ÂéÜÂè≤ (ÈÖçÁΩÆÁöÑÊó∂Èó¥ËåÉÂõ¥ÂÜÖ)„ÄÇ ‰ªé HIV-12353 ÂºÄÂßãÊîØÊåÅÂéÜÂè≤ÊòæÁ§∫„ÄÇ</p>
<h3 id="‰∫ãÂä°ÔºèÈîÅ-ÁÆ°ÁêÜÂô®"><a href="#‰∫ãÂä°ÔºèÈîÅ-ÁÆ°ÁêÜÂô®" class="headerlink" title="‰∫ãÂä°ÔºèÈîÅ ÁÆ°ÁêÜÂô®"></a>‰∫ãÂä°ÔºèÈîÅ ÁÆ°ÁêÜÂô®</h3><p>Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™Âêç‰∏∫‚Äú‰∫ãÂä°ÁÆ°ÁêÜÂô®‚ÄùÁöÑÊñ∞ÈÄªËæëÂÆû‰ΩìÔºåÂÆÉÂåÖÂê´‰∫Ü‰ª•ÂâçÁöÑ‚ÄúÊï∞ÊçÆÂ∫ì/Ë°®/ÂàÜÂå∫ÈîÅÁÆ°ÁêÜÂô®‚ÄùÊ¶ÇÂøµ„ÄÇ(hive.lock.manager with default of org.apache.hadoop.hive.ql.lockmgr.zookeeper.ZooKeeperHiveLockManager). ‰∫ãÂä°ÁÆ°ÁêÜÂô®Áé∞Âú®ËøòË¥üË¥£ÁÆ°ÁêÜ‰∫ãÂä°ÈîÅ„ÄÇÈªòËÆ§ÁöÑ DummyTxnManager Ê®°Êãü‰∫ÜËÄÅÁâàÊú¨ Hive ÁöÑË°å‰∏∫: Ê≤°Êúâ‰∫ãÂä°Âíå‰ΩøÁî® hive.lock.manager Â±ûÊÄßÁî®Êù•‰∏∫Ë°®ÔºåÂàÜÂå∫ÔºåÊï∞ÊçÆÂ∫ìÂàõÂª∫ÈîÅÁÆ°ÁêÜÂô®„ÄÇÂú® Hive metastore ‰∏≠Êñ∞Ê∑ªÂä†ÁöÑ DbTxnManager ÁÆ°ÁêÜÊâÄÊúâÁöÑÈîÅ/‰∫ãÂä°Âíå DbLockManager (Âú®ÊúçÂä°Âô®Âá∫Áé∞ÊïÖÈöúÊó∂Ôºå‰∫ãÂä°ÂíåÈîÅÊòØÊåÅ‰πÖÁöÑ). ËøôÊÑèÂë≥ÁùÄÂú®ÂêØÁî®‰∫ãÂä°Êó∂Ôºå‰ª•ÂâçÈîÅÂÆöZooKeeperÁöÑË°å‰∏∫‰∏çÂÜçÂ≠òÂú®„ÄÇ ‰ªé lock ÊåÅÊúâËÄÖÂíå‰∫ãÂä° initiators Âà∞ metastore ÁöÑÂøÉË∑≥ËøûÊé•ÔºåÂ¶ÇÊûúÂøÉË∑≥Ë∂ÖÊó∂ÔºåÂàôËøô‰∏™ÈîÅÊàñ‰∫ãÂä°Â∞ÜË¢´ËàçÂºÉ„ÄÇ</p>
<p>‰ªéhive 1.30Ëµ∑ÔºåDbLockManger ÊåÅÁª≠Ëé∑ÂèñÈîÅÁöÑÂë®ÊúüÂèØ‰ª•ÈÄöËøá hive.lock.numretires Âíå hive.lock.sleep.between.retries. ‰∏§‰∏™Â±ûÊÄßËÆæÁΩÆ„ÄÇÂ¶ÇÊûúDbLockManger Ëé∑ÂèñÈîÅÂ§±Ë¥•ÔºåËøá‰∏ÄÊÆµÊó∂Èó¥‰πãÂêé‰ºöËøõË°åÈáçËØï„ÄÇ‰∏∫‰∫ÜÊîØÊåÅÁü≠Êü•ËØ¢ÂêåÊó∂‰∏çÂØπmetastoreÈÄ†ÊàêË¥üÊãÖÔºåDbLockManger Âú®ÊØèÊ¨°ÈáçËØïÂêéÂä†ÂÄçÁ≠âÂæÖÊó∂Èïø„ÄÇ</p>
<p>Ê≥®ÊÑèÔºöDbTxnManager ÂèØ‰ª•Ëé∑ÂèñÊâÄÊúâÁöÑË°®ÁöÑÈîÅÔºåÂç≥‰æøÈÇ£‰∫õÊ≤°ÊúâËÆæÁΩÆtransactional=trueÂ±ûÊÄßÁöÑË°®„ÄÇÈªòËÆ§ÂØπ‰∏Ä‰∏™Èùû‰∫ãÂä°Ë°®ÁöÑÊèíÂÖ•Êìç‰ºöËé∑Âèñ‰∏Ä‰∏™Êéí‰ªñÈîÅ‰ªéËÄåÈòªÊ≠¢ÂÖ∂‰ªñÁöÑÊèíÂÖ•ÂíåËØªÂèñ„ÄÇÊäÄÊúØ‰∏äÊ≠£Á°ÆÁöÑÔºå‰ΩÜÊòØËøôËÉåÁ¶ª‰∫Ühive‰πãÂâçÁöÑÂ∑•‰ΩúÊñπÂºè„ÄÇ‰∏∫‰∫ÜÂêëÂêéÂÖºÂÆπÔºåÂèØ‰ª•ËÆæÁΩÆhive.txn.strict.locking.mode Â±ûÊÄßÊù•‰ΩøÈîÅÁÆ°ÁêÜÂô®Âú®ÂØπÈùû‰∫ãÂä°Ë°®ÁöÑÊèíÂÖ•Êìç‰ΩúÊó∂ÔºåËé∑ÂèñÂÖ±‰∫´ÈîÅ„ÄÇ‰øùÁïô‰πãÂâçÁöÑËØ≠‰πâÔºåËøòÊúâ‰∏Ä‰∏™Â•ΩÂ§ÑÂ∞±ÊòØËÉΩÈò≤Ê≠¢Ë°®Âú®ËØªÂèñÊòØË¢´Âà†Èô§„ÄÇËÄåÂØπ‰∫é‰∫ãÂä°Ë°®ÔºåÊèíÂÖ•ÊÄªÊòØËé∑ÂèñÁöÑÂÖ±‰∫´ÈîÅ„ÄÇÊòØÂõ†‰∏∫Ëøô‰∫õË°®ÂÆûÁé∞‰∫ÜMVCCÁöÑÊû∂ÊûÑÔºåÂú®Â≠òÂÇ®ÁöÑÂ∫ïÂ±ÇÂÆûÁé∞‰∫ÜÂæàÂº∫ÁöÑËØª‰∏ÄËá¥ÊÄßÔºàÂø´ÁÖßÈöîÁ¶ªÁöÑÊñπÂºèÔºâÔºåÁîöËá≥ËÉΩÂ∫îÂØπÂπ∂ÂèëÁöÑ‰øÆÊîπÊìç‰Ωú„ÄÇ</p>
<ul>
<li>ÂÖ±‰∫´ÈîÅ„ÄêSÈîÅ„Äë:ÂèàÁß∞ËØªÈîÅÔºåËã•‰∫ãÂä°TÂØπÊï∞ÊçÆÂØπË±°AÂä†‰∏äSÈîÅÔºåÂàô‰∫ãÂä°TÂèØ‰ª•ËØªA‰ΩÜ‰∏çËÉΩ‰øÆÊîπAÔºåÂÖ∂‰ªñ‰∫ãÂä°Âè™ËÉΩÂÜçÂØπAÂä†SÈîÅÔºåËÄå‰∏çËÉΩÂä†XÈîÅÔºåÁõ¥Âà∞TÈáäÊîæA‰∏äÁöÑSÈîÅ„ÄÇËøô‰øùËØÅ‰∫ÜÂÖ∂‰ªñ‰∫ãÂä°ÂèØ‰ª•ËØªAÔºå‰ΩÜÂú®TÈáäÊîæA‰∏äÁöÑSÈîÅ‰πãÂâç‰∏çËÉΩÂØπAÂÅö‰ªª‰Ωï‰øÆÊîπ„ÄÇ</li>
<li>Êéí‰ªñÈîÅ„ÄêXÈîÅ„Äë:ÂèàÁß∞ÂÜôÈîÅ„ÄÇËã•‰∫ãÂä°TÂØπÊï∞ÊçÆÂØπË±°AÂä†‰∏äXÈîÅÔºå‰∫ãÂä°TÂèØ‰ª•ËØªA‰πüÂèØ‰ª•‰øÆÊîπAÔºåÂÖ∂‰ªñ‰∫ãÂä°‰∏çËÉΩÂÜçÂØπAÂä†‰ªª‰ΩïÈîÅÔºåÁõ¥Âà∞TÈáäÊîæA‰∏äÁöÑÈîÅ„ÄÇËøô‰øùËØÅ‰∫ÜÂÖ∂‰ªñ‰∫ãÂä°Âú®TÈáäÊîæA‰∏äÁöÑÈîÅ‰πãÂâç‰∏çËÉΩÂÜçËØªÂèñÂíå‰øÆÊîπA„ÄÇÔºâ</li>
</ul>
<div class="note info"><h2 id="ÈÖçÁΩÆ‰ø°ÊÅØ"><a href="#ÈÖçÁΩÆ‰ø°ÊÅØ" class="headerlink" title="ÈÖçÁΩÆ‰ø°ÊÅØ"></a>ÈÖçÁΩÆ‰ø°ÊÅØ</h2></div>
<p>‰∏∫‰∫ÜÂºÄÂêØhiveÁöÑ‰∫ãÂä°ÊîØÊåÅÔºå‰ª•‰∏ãÊòØÈúÄË¶ÅÂºÄÂêØÁöÑÊúÄÂ∞ëÁöÑhiveÈÖçÁΩÆÔºö</p>
<p>ÂÆ¢Êà∑Á´ØÔºö</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hive.support.concurrency ‚Äì true</span><br><span class="line">hive.enforce.bucketing ‚Äì true (Not required as of Hive 2.0)</span><br><span class="line">hive.exec.dynamic.partition.mode ‚Äì nonstrict</span><br><span class="line">hive.txn.manager ‚Äì org.apache.hadoop.hive.ql.lockmgr.DbTxnManager</span><br></pre></td></tr></table></figure>
<p>ÊúçÂä°Á´ØÔºö (Metastore)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hive.compactor.initiator.on ‚Äì true (See table below for more details)</span><br><span class="line">hive.compactor.worker.threads ‚Äì a positive number on at least one instance of the Thrift metastore service</span><br></pre></td></tr></table></figure>
<p>ËØ¶ÁªÜÈÖçÁΩÆ‰ø°ÊÅØËØ∑ÁúãÔºö<a href="https://cwiki.apache.org/confluence/display/Hive/Hive+Transactions" target="_blank" rel="noopener">hive‰∫ãÂä°ÈÖçÁΩÆ‰ø°ÊÅØ</a></p>
<div class="note info"><h2 id="Ë°®Â±ûÊÄß"><a href="#Ë°®Â±ûÊÄß" class="headerlink" title="Ë°®Â±ûÊÄß"></a>Ë°®Â±ûÊÄß</h2></div>
<p>Â¶ÇÊûúË°®Ë¶Å‰ΩøÁî® ACID ÔºåÂàôÂøÖÈ°ªÊåáÂÆöÔºö <code>&quot;transactional=true&quot;</code> „ÄÇÂ¶ÇÊûúËØ•Ë°®Ë¢´ËÆæÁΩÆ‰∏∫ ACID Ë°®ÔºåÂàô‰∏çËÉΩËΩ¨Êç¢‰∏∫Èùû ACID Ë°®ÔºåËÆæÁΩÆ <code>&quot;transactional&quot;=&quot;false&quot;</code> ‰πüÊòØ‰∏çË°åÁöÑ„ÄÇÂú® hive-site.xml ‰∏≠ÂøÖÈ°ªËÆæÁΩÆÔºö<br><code>hive.txn.manager = org.apache.hadoop.hive.ql.lockmgr.DbTxnManager</code></p>
<p>Â¶ÇÊûúÈúÄÂ∏åÊúõÁ≥ªÁªüËá™Âä®ËøõË°åÂêàÂπ∂ÔºåÂàôÂèØ‰ª•ËÆæÁΩÆÔºö <code>&quot;NO_AUTO_COMPACTION&quot;</code> ,‰πüÂèØ‰ª•ÈÄöËøá<code>Alter Table/Partition Compact</code> ËØ≠Ê≥ïÊù•ËÆæÁΩÆ„ÄÇ</p>
<figure class="highlight sql"><figcaption><span>Example: Set compaction options in TBLPROPERTIES at table level</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name (</span><br><span class="line">  <span class="keyword">id</span>                <span class="built_in">int</span>,</span><br><span class="line">  <span class="keyword">name</span>              <span class="keyword">string</span></span><br><span class="line">)</span><br><span class="line">CLUSTERED <span class="keyword">BY</span> (<span class="keyword">id</span>) <span class="keyword">INTO</span> <span class="number">2</span> BUCKETS <span class="keyword">STORED</span> <span class="keyword">AS</span> ORC</span><br><span class="line">TBLPROPERTIES (<span class="string">"transactional"</span>=<span class="string">"true"</span>,</span><br><span class="line">  <span class="string">"compactor.mapreduce.map.memory.mb"</span>=<span class="string">"2048"</span>,     <span class="comment">-- specify compaction map job properties</span></span><br><span class="line">  <span class="string">"compactorthreshold.hive.compactor.delta.num.threshold"</span>=<span class="string">"4"</span>,  <span class="comment">-- trigger minor compaction if there are more than 4 delta directories</span></span><br><span class="line">  <span class="string">"compactorthreshold.hive.compactor.delta.pct.threshold"</span>=<span class="string">"0.5"</span> <span class="comment">-- trigger major compaction if the ratio of size of delta files to</span></span><br><span class="line">                                                                   <span class="comment">-- size of base files is greater than 50%</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><figcaption><span>Example: Set compaction options in TBLPROPERTIES at request level</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">COMPACT</span> <span class="string">'minor'</span> </span><br><span class="line">   <span class="keyword">WITH</span> OVERWRITE TBLPROPERTIES (<span class="string">"compactor.mapreduce.map.memory.mb"</span>=<span class="string">"3072"</span>);  <span class="comment">-- specify compaction map job properties</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name <span class="keyword">COMPACT</span> <span class="string">'major'</span></span><br><span class="line">   <span class="keyword">WITH</span> OVERWRITE TBLPROPERTIES (<span class="string">"tblprops.orc.compress.size"</span>=<span class="string">"8192"</span>);         <span class="comment">-- change any other Hive table properties</span></span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> hive </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hive </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[GitHub‰ΩøÁî®ÊåáÂçó]]></title>
      <url>https://stanxia.github.io/2017/12/13/GitHub%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2></div>
<p>Â≠¶‰π† GitHub ÁöÑ‰ΩøÁî®ËßÑÂàôÔºåËÆ∞ÂΩïÈÅáÂà∞ÁöÑÈóÆÈ¢ò„ÄÇ<br><div class="note info"><h2 id="watch-star-fork-ÁöÑÂê´‰πâ"><a href="#watch-star-fork-ÁöÑÂê´‰πâ" class="headerlink" title="watch , star , fork ÁöÑÂê´‰πâ"></a>watch , star , fork ÁöÑÂê´‰πâ</h2></div><br>Âàö‰ΩøÁî® GitHub ÁöÑÊó∂ÂÄôÔºåÁúãÂà∞ÊØè‰∏Ä‰∏™È°πÁõÆÈ°µÈù¢Âè≥‰∏äËßíÈÉΩÊúâÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÁöÑÂ≠óÊ†∑Ôºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15131331012221.jpg" alt><br><a id="more"></a><br>ÁÇπÂáª watch ÊåâÈíÆ ‰ºöÂá∫Áé∞Â¶Ç‰∏ãÊâÄÁ§∫Ôºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15131331429596.jpg" alt></p>
<h3 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h3><ul>
<li>watch ÁöÑÂäüËÉΩÊòØËßÇÂØüË∑üË∏™Ëøô‰∏™È°πÁõÆÔºåÂ¶ÇÊûúÈ°πÁõÆÊúâ‰ªª‰ΩïÊõ¥Êñ∞ÔºåÂ¶ÇÊûúÈÄâÊã©‰∫Ü watching ËØ•È°πÁõÆÔºåÈÉΩ‰ºöÂú®ÈÇÆÁÆ±‰∏≠Êé•Êî∂Âà∞Áõ∏ÂÖ≥ÁöÑÊõ¥Êñ∞‰ø°ÊÅØ„ÄÇ</li>
<li>not watching Ë°®Á§∫‰∏çÂÖ≥Ê≥®Ëøô‰∏™È°πÁõÆÁöÑÊõ¥Êñ∞ÊÉÖÂÜµÔºå‰ΩÜ‰Ω†Ë¢´ÊèêÂèäÁöÑÊó∂ÂÄô‰πü‰ºöÂèëÈÇÆ‰ª∂ÈÄöÁü•„ÄÇ</li>
<li>ignoring Ë°®Á§∫‰∏çÊé•Êî∂‰ªª‰ΩïÈÄöÁü•„ÄÇ</li>
</ul>
<p>Â¶ÇÊûú‰Ω†ÊÉ≥ÊåÅÁª≠Ë∑üËøõËØ•È°πÁõÆÁöÑ‰ªª‰ΩïÊõ¥Êñ∞ÊÉÖÂÜµÔºåÂàôÂèØ‰ª•ÈÄâÊã© watching „ÄÇ</p>
<h3 id="star"><a href="#star" class="headerlink" title="star"></a>star</h3><p>star Á±ª‰ºº‰∫éÁ§æ‰∫§ËΩØ‰ª∂‰∏≠ÁöÑÂÖ≥Ê≥®„ÄÇÂ¶ÇÊûúÈÄâÊã©‰∫Ü star Ôºå ÂàôÂèØ‰ª•Âú®Ëá™Â∑±ÁöÑ star È°µÈù¢Êü•ÁúãÂà∞ÊõæÁªè star ËøáÁöÑÈ°πÁõÆ„ÄÇ<br>ÁÇπÂáªÂè≥‰∏äËßíËá™Â∑±ÁöÑÂ§¥ÂÉèÔºåÈÄâÊã© your stars Ôºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15131334861734.jpg" alt><br>ÁÑ∂ÂêéÂ∞±‰ºöÁúãÂà∞ÊõæÁªèÊâÄÊúâ star ËøáÁöÑÈ°πÁõÆÔºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15131335238622.jpg" alt><br>Â¶ÇÊûú‰Ω†Âè™ÊÉ≥ÂÖ≥Ê≥®Ëøô‰∏™È°πÁõÆÔºå‰ΩÜ‰∏çÈúÄË¶ÅÊé•Êî∂‰ªª‰ΩïÊõ¥Êñ∞ÈÄöÁü•Ôºå‰πü‰∏çÈúÄË¶ÅÂØπËØ•È°πÁõÆËøõË°åÊìç‰ΩúÔºåÂàôÂèØ‰ª•ÈÄâÊã© star ÔºåÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂèØ‰ª•Âø´Êç∑Êü•ÁúãËØ•È°πÁõÆ„ÄÇ</p>
<h3 id="fork"><a href="#fork" class="headerlink" title="fork"></a>fork</h3><p>fork ÁöÑÁõÆÁöÑÊòØÂ∞ÜËØ•È°πÁõÆÂÖãÈöÜÂà∞Ëá™Â∑±ÁöÑ GitHub ‰∏≠ÔºåËá™Â∑±ÂèØ‰ª•ÂØπËØ•È°πÁõÆËøõË°åÁºñËæë‰øÆÊîπÔºåÂú® fork ÁöÑÊó∂ÂÄô‰ºöÂú®ËØ•È°πÁõÆ‰∏≠Êñ∞Ê∑ª‰∏Ä‰∏™ÂàÜÊîØÔºåÂèØ‰ª•ÈÄâÊã© pull-requests ÂØπËØ•È°πÁõÆËøõË°å‰øÆÊîπÂêéÂπ∂Êèê‰∫§„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÊÉ≥ÂèÇ‰∏éÁª¥Êä§Ëøô‰∏™È°πÁõÆÔºåÂèØ‰ª•‰ΩøÁî® fork ÂäüËÉΩÔºåÂπ∂Êèê‰∫§Ëá™Â∑±ÁöÑ‰ª£Á†ÅÔºàÂΩìÁÑ∂Áî®Ëá™Â∑±ÁöÑÂàÜÊîØÊèê‰∫§È°πÁõÆÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÈ°πÁõÆÂÖ∂‰ªñÂàÜÊîØÁöÑ‰∫∫ÂëòÂÆ°Ê†∏Ôºâ„ÄÇÂàöÂºÄÂßã‰∏çÁü•ÈÅì fork ÁöÑÂäüËÉΩÔºåÂØºËá¥ÊàëÂ∞ÜÂæàÂ§öÈ°πÁõÆÈÉΩ fork ‰∏ãÊù•ÔºåÂÖ∂ÂÆûÂæàÊ≤°ÊúâÂøÖË¶Å„ÄÇÊ†πÊçÆËá™Â∑±ÁöÑÂÆûÈôÖÈúÄÊ±ÇÈÄâÊã©Â∞±Â•Ω„ÄÇ</p>
<h3 id="Êü•ÁúãÈÉΩÊúâÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜÊìç‰Ωú"><a href="#Êü•ÁúãÈÉΩÊúâÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜÊìç‰Ωú" class="headerlink" title="Êü•ÁúãÈÉΩÊúâÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜÊìç‰Ωú"></a>Êü•ÁúãÈÉΩÊúâÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜÊìç‰Ωú</h3><p>Â¶ÇÊûúÊÉ≥Ë¶ÅÁü•ÈÅìÈÉΩÊúâÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜËøô‰∫õÊìç‰ΩúÂë¢ÔºüÊØîÂ¶ÇÊàëÊÉ≥Áü•ÈÅìÈÉΩÊúâË∞ÅÂØπËøô‰∏™È°πÁõÆËøõË°å‰∫Ü star Êìç‰ΩúÔºåÂèØ‰ª•ÁúãËßÅÊØè‰∏™ÂäüËÉΩÊóÅËæπÈÉΩÊúâ‰∏Ä‰∏™Êï∞Â≠óÔºåËØ•Êï∞Â≠óË°®Á§∫ÂØπËøô‰∏™È°πÁõÆËøõË°åËØ•Êìç‰ΩúÁöÑ‰∫∫Êï∞ÔºåÁÇπÂáªËØ•Êï∞Â≠óÔºåÂ∞±ÂèØ‰ª•Áü•ÈÅìÂÖ∑‰ΩìÊòØÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜÊìç‰ΩúÔºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15131341365906.jpg" alt></p>
]]></content>
      
        <categories>
            
            <category> GitHub </category>
            
        </categories>
        
        
        <tags>
            
            <tag> GitHub </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sparkÂèñÊ†∑ÂáΩÊï∞ÂàÜÊûê]]></title>
      <url>https://stanxia.github.io/2017/12/12/Spark%20sample%20%E5%8F%96%E6%A0%B7%E5%87%BD%E6%95%B0/</url>
      <content type="html"><![CDATA[<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<div class="note info"><h2 id="ËÉåÊôØ"><a href="#ËÉåÊôØ" class="headerlink" title="ËÉåÊôØ"></a>ËÉåÊôØ</h2></div>
<p>SparkÂèñÊ†∑Êìç‰ΩúÔºåÊó†Ê≥ïËé∑ÂèñÈöèÊú∫Ê†∑Êú¨ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇDataset‰∏≠sampleÂáΩÊï∞Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new [[Dataset]] by sampling a fraction of rows, using a user-supplied seed.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÈÄöËøá‰ΩøÁî®Áî®Êà∑Êèê‰æõÁöÑÁßçÂ≠êÔºåÈÄöËøáÊäΩÊ†∑ÁöÑÊñπÂºèËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ[[Dataset]]„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param withReplacement Sample with replacement or not.</span></span><br><span class="line"><span class="comment">  *                        Â¶ÇÊûúwithReplacement=trueÁöÑËØùË°®Á§∫ÊúâÊîæÂõûÁöÑÊäΩÊ†∑ÔºåÈááÁî®Ê≥äÊùæÊäΩÊ†∑ÁÆóÊ≥ïÂÆûÁé∞.</span></span><br><span class="line"><span class="comment">  *                        Â¶ÇÊûúwithReplacement=falseÁöÑËØùË°®Á§∫Êó†ÊîæÂõûÁöÑÊäΩÊ†∑ÔºåÈááÁî®‰ºØÂä™Âà©ÊäΩÊ†∑ÁÆóÊ≥ïÂÆûÁé∞.</span></span><br><span class="line"><span class="comment">  * @param fraction        Fraction of rows to generate.</span></span><br><span class="line"><span class="comment">  *                        ÊØè‰∏ÄË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá.Êúç‰ªé‰∫åÈ°πÂàÜÂ∏É.ÂΩìwithReplacement=trueÁöÑÊó∂ÂÄôfraction&gt;=0,ÂΩìwithReplacement=falseÁöÑÊó∂ÂÄô 0 &lt; fraction &lt; 1.</span></span><br><span class="line"><span class="comment">  * @param seed            Seed for sampling.</span></span><br><span class="line"><span class="comment">  *                        ÂèñÊ†∑ÁßçÂ≠êÔºà‰∏éÈöèÊú∫Êï∞ÁîüÊàêÊúâÂÖ≥Ôºâ</span></span><br><span class="line"><span class="comment">  * @note This is NOT guaranteed to provide exactly the fraction of the count</span></span><br><span class="line"><span class="comment">  *       of the given [[Dataset]].</span></span><br><span class="line"><span class="comment">  *       ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample</span></span>(withReplacement: <span class="type">Boolean</span>, fraction: <span class="type">Double</span>, seed: <span class="type">Long</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  require(fraction &gt;= <span class="number">0</span>,</span><br><span class="line">    <span class="string">s"Fraction must be nonnegative, but got <span class="subst">$&#123;fraction&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">  withTypedPlan &#123;</span><br><span class="line">    <span class="type">Sample</span>(<span class="number">0.0</span>, fraction, withReplacement, seed, logicalPlan)()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new [[Dataset]] by sampling a fraction of rows, using a random seed.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÁ®ãÂ∫èÈöèÊú∫ÁöÑÁßçÂ≠êÔºåÊäΩÊ†∑ËøîÂõûÊñ∞ÁöÑDataSet</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param withReplacement Sample with replacement or not.</span></span><br><span class="line"><span class="comment">  *                        ÂèñÊ†∑ÁªìÊûúÊòØÂê¶ÊîæÂõû</span></span><br><span class="line"><span class="comment">  * @param fraction        Fraction of rows to generate.</span></span><br><span class="line"><span class="comment">  *                        ÊØèË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá</span></span><br><span class="line"><span class="comment">  * @note This is NOT guaranteed to provide exactly the fraction of the total count</span></span><br><span class="line"><span class="comment">  *       of the given [[Dataset]].</span></span><br><span class="line"><span class="comment">  *       ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample</span></span>(withReplacement: <span class="type">Boolean</span>, fraction: <span class="type">Double</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  sample(withReplacement, fraction, <span class="type">Utils</span>.random.nextLong)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<div class="note info"><h2 id="ÈóÆÈ¢ò"><a href="#ÈóÆÈ¢ò" class="headerlink" title="ÈóÆÈ¢ò"></a>ÈóÆÈ¢ò</h2></div>
<p>ÁªìÊûúÊï∞ÊçÆÁöÑË°åÊï∞‰∏ÄËà¨Âú®Ôºàfraction*ÊÄªÊï∞ÔºâÂ∑¶Âè≥„ÄÇÊ≤°Êúâ‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÂÄºÔºåÂ¶ÇÊûúÈúÄË¶ÅÂæóÂà∞Âõ∫ÂÆöË°åÊï∞ÁöÑÈöèÊú∫Êï∞ÊçÆÁöÑËØù‰∏çÂª∫ËÆÆÈááÁî®ËØ•ÊñπÊ≥ï„ÄÇ<br><div class="note info"><h2 id="ÂäûÊ≥ï"><a href="#ÂäûÊ≥ï" class="headerlink" title="ÂäûÊ≥ï"></a>ÂäûÊ≥ï</h2></div><br>Ëé∑ÂèñÈöèÊú∫ÂèñÊ†∑ÁöÑÊõø‰ª£ÊñπÊ≥ïÔºö</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df.createOrReplaceTempView(<span class="string">"test_sample"</span>); <span class="comment">// ÁîüÊàê‰∏¥Êó∂Ë°®</span></span><br><span class="line">df.sqlContext() <span class="comment">// Ê∑ªÂä†ÈöèÊú∫Êï∞ÂàóÔºåÂπ∂Ê†πÊçÆÂÖ∂ËøõË°åÊéíÂ∫è</span></span><br><span class="line">  .sql(<span class="string">"select * ,rand() as random from test_sample order by random"</span>)</span><br><span class="line">  .limit(<span class="number">2</span>) <span class="comment">// Ê†πÊçÆÂèÇÊï∞ÁöÑfractionËÆ°ÁÆóÈúÄË¶ÅËé∑ÂèñÁöÑÂèñÊ†∑ÁªìÊûú</span></span><br><span class="line">  .drop(<span class="string">"random"</span>) <span class="comment">// Âà†Èô§ÊéâÊ∑ªÂä†ÁöÑÈöèÊú∫Âàó</span></span><br><span class="line">  .show();</span><br></pre></td></tr></table></figure>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HiveÊä•ÈîôÈõÜ]]></title>
      <url>https://stanxia.github.io/2017/12/11/Hive%E6%8A%A5%E9%94%99%E9%9B%86/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2></div>
<p>ÈíàÂØπ‰∏Ä‰∏™ËÄÅÊØõÁóÖÔºöÊúâ‰∫õÈîôËØØÂ±°ÁäØÂ±°ÊîπÔºåÂ±°ÊîπÂ±°ÁäØÔºåÊ≤°ÊúâÂºïËµ∑Ê†πÊú¨‰∏äÁöÑÊ≥®ÊÑèÔºåÊàñËÄÖÊ≤°Êúâ‰ªéÊ∫êÂ§¥ÁêÜËß£ÈîôËØØÂèëÁîüÁöÑÂ∫ïÂ±ÇÂéüÁêÜÔºåÂØºËá¥ÂÅöÂæàÂ§öÊó†Áî®Âäü„ÄÇ</p>
<p>ÊÄªÁªìÂéÜÂè≤ÔºåÂπ∂‰ªé‰∏≠Âê∏ÂèñÊïôËÆ≠ÔºåÂáèÂ∞ëÊó†Áî®ÂäüÈÄ†ÊàêÁöÑÊó∂Èó¥Êµ™Ë¥π„ÄÇÁâπÊ≠§Â∞Ü‰ªéÁõÆÂâçÈÅáÂà∞ÁöÑ hive ÈóÆÈ¢òÂÖ®ÈÉ®ËÆ∞ÂΩïÂú®ËøôÈáåÔºåÊêûÊ∏ÖÊ•öÈóÆÈ¢òÔºåËá™‰ø°ÂêëÂâç„ÄÇ<br><a id="more"></a><br><div class="note info"><h2 id="Êä•ÈîôÈõÜ"><a href="#Êä•ÈîôÈõÜ" class="headerlink" title="Êä•ÈîôÈõÜ"></a>Êä•ÈîôÈõÜ</h2></div></p>
<h3 id="ÈóÆÈ¢ò1ÔºöError-rolling-back"><a href="#ÈóÆÈ¢ò1ÔºöError-rolling-back" class="headerlink" title="ÈóÆÈ¢ò1ÔºöError rolling back"></a>ÈóÆÈ¢ò1ÔºöError rolling back</h3><h4 id="ËØ¶ÊÉÖÔºö"><a href="#ËØ¶ÊÉÖÔºö" class="headerlink" title="ËØ¶ÊÉÖÔºö"></a>ËØ¶ÊÉÖÔºö</h4><p><code>Error rolling back: Can&#39;t call rollback when autocommit=true</code></p>
<h4 id="Ëß£ÂÜ≥ÊñπÊ°àÔºö"><a href="#Ëß£ÂÜ≥ÊñπÊ°àÔºö" class="headerlink" title="Ëß£ÂÜ≥ÊñπÊ°àÔºö"></a>Ëß£ÂÜ≥ÊñπÊ°àÔºö</h4><p><code>vim conf/hive-site.xml</code></p>
<p>‰∏çË¶ÅÂä†Ëøô‰∏™ÈÖçÁΩÆÔºÅÔºÅÔºÅÔºÅ </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.in.test<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      
        <categories>
            
            <category> hive </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hive </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[HiveÈîÅ‰ªãÁªç-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£]]></title>
      <url>https://stanxia.github.io/2017/12/11/Hive%E9%94%81%E4%BB%8B%E7%BB%8D-%E7%BF%BB%E8%AF%91%E8%87%AA%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3/</url>
      <content type="html"><![CDATA[<p>Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂπ∂ÂèëÊÄßÊîØÊåÅÊòØÂøÖÈ°ªÁöÑÔºåËÄå‰∏îÂÆÉ‰ª¨ÁöÑÁî®‰æã‰πüÂæàÂÆπÊòìÁêÜËß£„ÄÇËá≥Â∞ëÔºåÊàë‰ª¨Â∏åÊúõÂ∞ΩÂèØËÉΩÊîØÊåÅÂπ∂ÂèëÁöÑËØªÂíåÂÜô„ÄÇÊ∑ªÂä†‰∏Ä‰∏™Êú∫Âà∂Êù•ÂèëÁé∞Â∑≤Ëé∑ÂæóÁöÑÂΩìÂâçÈîÅÊòØÂæàÊúâÁî®ÁöÑ„ÄÇÊ≤°ÊúâÁ´ãÂç≥Ê∑ªÂä†APIÊù•ÊòæÂºèËé∑Âèñ‰ªª‰ΩïÈîÅÁöÑÈúÄÊ±ÇÔºåÂõ†Ê≠§ÊâÄÊúâÈîÅÈÉΩÊòØÈöêÂºèËé∑ÂæóÁöÑ„ÄÇ‰ª•‰∏ãÈîÅÂÆöÊ®°ÂºèÂ∞ÜÂú®hive‰∏≠ÂÆö‰πâ(Ê≥®ÊÑèÔºå‰∏çÈúÄË¶ÅÊÑèÂõæÈîÅ)„ÄÇ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ÂÖ±‰∫´(S)</span><br><span class="line">Áã¨Âç†(X)</span><br></pre></td></tr></table></figure>
<p>È°æÂêçÊÄù‰πâÔºåÂèØ‰ª•ÂêåÊó∂Ëé∑ÂæóÂ§ö‰∏™ÂÖ±‰∫´ÈîÅÔºåËÄåXÈîÅÂèØ‰ª•ÈòªÊ≠¢ÊâÄÊúâÂÖ∂‰ªñÈîÅ„ÄÇ<br>ÂÖºÂÆπÊÄßÁü©ÈòµÂ¶Ç‰∏ã:<br><img src="http://oliji9s3j.bkt.clouddn.com/15129574898000.jpg" alt><br>ÂØπ‰∫éÊüê‰∫õÊìç‰ΩúÔºåÈîÅÂú®Êú¨Ë¥®‰∏äÊòØÂàÜÂ±ÇÁöÑ‚Äî‚Äî‰æãÂ¶ÇÔºåÂØπ‰∫éÊüê‰∫õÂàÜÂå∫Êìç‰ΩúÔºåË°®‰πüË¢´ÈîÅÂÆö(‰ª•Á°Æ‰øùÂú®ÂàõÂª∫Êñ∞ÂàÜÂå∫Êó∂‰∏çËÉΩÂà†Èô§Ë°®)„ÄÇ<br><a id="more"></a><br>ÈîÅÂÆöÊ®°Âºè‰∏ãËé∑ÂèñÁöÑÂêàÁêÜÊÄßÂ¶Ç‰∏ã:</p>
<p>ÂØπ‰∫éÈùûÂàÜÂå∫Ë°®ÔºåÈîÅÊ®°ÂºèÈùûÂ∏∏Áõ¥ËßÇ„ÄÇËØªÂèñË°®Êó∂ÔºåËé∑Âèñ‰∏Ä‰∏™SÈîÅÔºåËÄåÊâÄÊúâÂÖ∂‰ªñÊìç‰Ωú(ÊèíÂÖ•Ë°®„ÄÅalter tableÁ≠âÂÖ∂‰ªñÊìç‰Ωú)Ëé∑Âæó‰∏Ä‰∏™XÈîÅ„ÄÇ</p>
<p>ÂØπ‰∫éÂàÜÂå∫Ë°®ÔºåÂÖ∂ÊÄùÊÉ≥Â¶Ç‰∏ã:</p>
<p>Âú®ÊâßË°åËØªÊìç‰ΩúÊó∂ÔºåËé∑ÂèñË°®ÂíåÁõ∏ÂÖ≥ÂàÜÂå∫ÁöÑ ‚ÄòS‚Äô ÈîÅ„ÄÇÂØπ‰∫éÊâÄÊúâÂÖ∂‰ªñÊìç‰ΩúÔºåÂú®ÂàÜÂå∫‰∏äÊâßË°å‚ÄúX‚ÄùÈîÅ„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊõ¥ÊîπÂè™ÈÄÇÁî®‰∫éËæÉÊñ∞ÁöÑÂàÜÂå∫ÔºåÂàôÂú®Ë°®‰∏äËé∑Âæó‚ÄúS‚ÄùÈîÅÔºåËÄåÂ¶ÇÊûúÊõ¥ÊîπÈÄÇÁî®‰∫éÊâÄÊúâÂàÜÂå∫ÔºåÂàôÂú®Ë°®‰∏äËé∑Âæó‚ÄúX‚ÄùÈîÅ„ÄÇÂõ†Ê≠§ÔºåÊóßÂàÜÂå∫ÂèØ‰ª•Ë¢´ËØªÂèñÂíåÂÜôÂÖ•ÔºåËÄåÊñ∞ÁöÑÂàÜÂå∫ÂàôË¢´ËΩ¨Êç¢‰∏∫RCFile„ÄÇÊØèÂΩì‰∏Ä‰∏™ÂàÜÂå∫Ë¢´ÈîÅÂÆöÂú®‰ªª‰ΩïÊ®°ÂºèÊó∂ÔºåÂÆÉÁöÑÊâÄÊúâÁà∂Á∫ßÈÉΩË¢´ÈîÅÂú®‚ÄúS‚ÄùÊ®°Âºè‰∏≠„ÄÇ</p>
<p>Âü∫‰∫éÊ≠§Ôºå‰∏∫Êìç‰ΩúËé∑ÂæóÁöÑÈîÅÂ¶Ç‰∏ã:<br><img src="http://oliji9s3j.bkt.clouddn.com/15129575385061.jpg" alt></p>
<p>‰∏∫‰∫ÜÈÅøÂÖçÊ≠ªÈîÅÔºåËøôÈáåÊèêÂá∫‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑÊñπÊ°à„ÄÇÊâÄÊúâË¶ÅÈîÅÂÆöÁöÑÂØπË±°ÈÉΩÊòØÊåâÂ≠óÊØçÈ°∫Â∫èÊéíÂ∫èÁöÑÔºåÁÑ∂ÂêéËé∑ÂèñÊâÄÈúÄÁöÑÊ®°ÂºèÈîÅ„ÄÇËØ∑Ê≥®ÊÑèÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÂèØËÉΩ‰∏çÁü•ÈÅìÂØπË±°ÂàóË°®‚Äî‚Äî‰æãÂ¶ÇÔºåÂú®Âä®ÊÄÅÂàÜÂå∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊ≠£Âú®‰øÆÊîπÁöÑÂàÜÂå∫ÂàóË°®Âú®ÁºñËØëÊó∂ÊòØÊú™Áü•ÁöÑ‚Äî‚ÄîÂõ†Ê≠§ÔºåÂàóË°®ÁöÑÁîüÊàêÊòØ‰øùÂÆàÁöÑ„ÄÇÁî±‰∫éÂàÜÂå∫ÁöÑÊï∞ÈáèÂèØËÉΩ‰∏çÁü•ÈÅìÔºåÊâÄ‰ª•Â∫îËØ•Â∞Ü‰∏Ä‰∏™‰∏ìÁî®ÈîÅ(‰ΩÜÁõÆÂâç‰∏çÊòØÁî±‰∫éhive -3509 bug)ÊîæÂú®Ë°®‰∏äÔºåÊàñËÄÖÊòØÂ∑≤Áü•ÁöÑÂâçÁºÄ„ÄÇ</p>
<p>Â∞ÜÊ∑ªÂä†‰∏§‰∏™Êñ∞ÁöÑÂèØÈÖçÁΩÆÂèÇÊï∞Êù•ÂÜ≥ÂÆöÈîÅÁöÑÈáçËØïÊ¨°Êï∞ÂíåÊØèÊ¨°ÈáçËØï‰πãÈó¥ÁöÑÁ≠âÂæÖÊó∂Èó¥„ÄÇÂ¶ÇÊûúÈáçËØïÁöÑÊ¨°Êï∞ÁúüÁöÑÂæàÈ´òÔºåÂÆÉ‰ºöÂØºËá¥‰∏Ä‰∏™Ê¥ªÈîÅ„ÄÇÁúãÁúãZooKeeperÔºåÁúãÁúãÂ¶Ç‰Ωï‰ΩøÁî®ZooKeeper apiÂÆûÁé∞ËØªÂÜôÈîÅ„ÄÇËØ∑Ê≥®ÊÑèÔºåÈîÅËØ∑Ê±ÇÂ∞ÜË¢´ÊãíÁªùÔºåËÄå‰∏çÊòØÁ≠âÂæÖ„ÄÇÁé∞ÊúâÁöÑÈîÅÂ∞ÜË¢´ÈáäÊîæÔºåÊâÄÊúâÁöÑÈîÅÂ∞ÜÂú®ÈáçËØïÈó¥ÈöîÂêéÈáçËØï„ÄÇ</p>
<p>‰∏äÈù¢ÂàóÂá∫ÁöÑ‰∏ç‰ºöÊåâÁÖßÊåáÂÆöÁöÑÊñπÂºèÂ∑•‰ΩúÔºåÂõ†‰∏∫ÈîÅÁöÑÁ≠âÁ∫ßÊÄß„ÄÇ</p>
<p>Ë°®TÁöÑ‚ÄúS‚ÄùÈîÅÊåáÂÆöÂ¶Ç‰∏ã:</p>
<ul>
<li>Ë∞ÉÁî®create()ÂàõÂª∫ÂÖ∑ÊúâË∑ØÂæÑÂêçÁöÑËäÇÁÇπ‚Äú/ warehouse/T/ read‚Äî‚Äù„ÄÇËøôÊòØÂçèËÆÆÂêéÈù¢‰ΩøÁî®ÁöÑÈîÅËäÇÁÇπ„ÄÇÁ°Æ‰øùËÆæÁΩÆÈ°∫Â∫èÂíå‰∏¥Êó∂Ê†áÂøó„ÄÇ</li>
<li>Âú®ÈîÅÂÆöËäÇÁÇπ‰∏äË∞ÉÁî®getChildren()ÔºåËÄåÊó†ÈúÄËÆæÁΩÆËßÇÂØüÊ†áÂøó„ÄÇ</li>
<li>Â¶ÇÊûúÊúâ‰∏Ä‰∏™‰ª•‚Äúwrite -‚ÄùÂºÄÂ§¥ÁöÑË∑ØÂæÑÂêçÁöÑÂ≠©Â≠êÔºå‰ª•Âèä‰∏Ä‰∏™ËæÉ‰ΩéÁöÑÂ∫èÂàóÊï∞ÔºåÈÇ£‰πàËøô‰∏™ÈîÅÂ∞±‰∏çËÉΩË¢´Ëé∑Âèñ„ÄÇÂà†Èô§Á¨¨‰∏ÄÊ≠•‰∏≠ÂàõÂª∫ÁöÑËäÇÁÇπÂπ∂ËøîÂõû„ÄÇ</li>
<li>Âê¶ÂàôÔºåÈîÅÂ∞±Ë¢´Êéà‰∫à‰∫Ü„ÄÇ</li>
</ul>
<p>Ë°®TÁöÑ‚ÄúX‚ÄùÈîÅÂÆöÂ¶Ç‰∏ã:</p>
<ul>
<li>Ë∞ÉÁî®create()ÂàõÂª∫ÂÖ∑ÊúâË∑ØÂæÑÂêçÁöÑËäÇÁÇπ‚Äú/ warehouse/T/ write‚Äî‚Äù„ÄÇËøôÊòØÂçèËÆÆÂêéÈù¢‰ΩøÁî®ÁöÑÈîÅËäÇÁÇπ„ÄÇÁ°Æ‰øùËÆæÁΩÆÈ°∫Â∫èÂíå‰∏¥Êó∂Ê†áÂøó„ÄÇ</li>
<li>Âú®ÈîÅÂÆöËäÇÁÇπ‰∏äË∞ÉÁî®getChildren()ÔºåËÄåÊó†ÈúÄËÆæÁΩÆËßÇÂØüÊ†áÂøó„ÄÇ</li>
<li>Â¶ÇÊûúÊúâ‰∏Ä‰∏™‰ª•‚ÄúËØª-‚ÄùÊàñ‚ÄúÂÜô-‚ÄùÂºÄÂ§¥ÁöÑË∑ØÂæÑÂêçÁöÑÂ≠©Â≠êÔºåÂπ∂‰ª•ËæÉ‰ΩéÁöÑÂ∫èÂàóÂè∑ÂºÄÂßãÔºåÂ∞±‰∏çËÉΩËé∑ÂæóÈîÅ„ÄÇÂà†Èô§Á¨¨‰∏ÄÊ≠•‰∏≠ÂàõÂª∫ÁöÑËäÇÁÇπÂπ∂ËøîÂõû„ÄÇ</li>
<li>Âê¶ÂàôÔºåÈîÅÂ∞±Ë¢´Êéà‰∫à‰∫Ü„ÄÇ</li>
</ul>
<p>ÈªòËÆ§ÁöÑHiveË°å‰∏∫‰∏ç‰ºöÊõ¥ÊîπÔºåÂπ∂Âèë‰πü‰∏çÂèóÊîØÊåÅ„ÄÇ<br>ÊÇ®ÂèØ‰ª•ÈÄöËøáÂ∞Ü‰ª•‰∏ãÂèòÈáèËÆæÁΩÆ‰∏∫falseÊù•ÂÖ≥Èó≠Âπ∂ÂèëÊÄß: hive.support.concurrency.</p>
<p>ÊÇ®ÂèØ‰ª•ÈÄöËøáÂèëÂá∫‰ª•‰∏ãÂëΩ‰ª§Êü•ÁúãË°®‰∏≠ÁöÑÈîÅ:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> LOCKS &lt;TABLE_NAME&gt;;</span><br><span class="line"><span class="keyword">SHOW</span> LOCKS &lt;TABLE_NAME&gt; <span class="keyword">EXTENDED</span>;</span><br><span class="line"><span class="keyword">SHOW</span> LOCKS &lt;TABLE_NAME&gt; <span class="keyword">PARTITION</span> (&lt;PARTITION_DESC&gt;);</span><br><span class="line"><span class="keyword">SHOW</span> LOCKS &lt;TABLE_NAME&gt; <span class="keyword">PARTITION</span> (&lt;PARTITION_DESC&gt;) <span class="keyword">EXTENDED</span>;</span><br></pre></td></tr></table></figure>
<p><a href="https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Locking" target="_blank" rel="noopener">ÁÇπÊàë‰∫ÜËß£HiveÈîÅÂÆöÁöÑÈÖçÁΩÆÂ±ûÊÄß</a></p>
]]></content>
      
        <categories>
            
            <category> hive </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hive </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hexo + AppVeyor ÊåÅÁª≠ÈõÜÊàê]]></title>
      <url>https://stanxia.github.io/2017/12/07/Hexo%20%E4%BC%98%E5%8C%96-%E4%BD%BF%E7%94%A8%20AppVeyor%20%E8%BF%9B%E8%A1%8C%E9%83%A8%E7%BD%B2/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2></div>
<p>‰ªäÂ§©Êü•Áúã Spark Ê∫êÁ†ÅÁöÑÊó∂ÂÄôÔºåÊó†ÊÑèÂèëÁé∞‰∫Ü AppVeyor ÔºåÊâçÁü•ÈÅì ÊåÅÁª≠ÈõÜÊàêÔºàContinuous IntegrationÔºåÁÆÄÁß∞CIÔºâ,ÁÆÄÂçïÁêÜËß£‰∏∫ÂèØ‰ª•Ëá™Âä®ÂåñÊûÑÂª∫È°πÁõÆÁöÑÂ∑•ÂÖ∑„ÄÇÂú® Spark ‰∏≠ÔºåSparkR ÁöÑÈ°πÁõÆ‰ΩøÁî®‰∫Ü AppVeyor ÊåÅÁª≠ÈõÜÊàêÂ∑•ÂÖ∑„ÄÇ</p>
<p>ÁúãÂà∞ÁΩëÁªú‰∏ä‰∏Ä‰∫õÂ§ß‰Ω¨Áî® AppVeyor ËÅîÂêà HexoÔºå‰Ωú‰∏∫ÂçöÂÆ¢‰ª£Á†ÅÁöÑÈÉ®ÁΩ≤Â∑•ÂÖ∑Ôºå‰∏ÄÊñπÈù¢ÂèØ‰ª•‰ΩøÈÉ®ÁΩ≤‰ª£Á†ÅÊõ¥Âä†ÁÆÄÂçïÔºàÂÖ®Ëá™Âä®ÂåñÔºåËôΩÁÑ∂‰πãÂâç‰πüÂè™Êúâ hexo -clean ,hexo -g ,hexo -d ‰∏âÊ≠•Ôºå‰ΩÜÁé∞Âú®ÂÆåÂÖ®Âú®ÂêéÂè∞Ëá™Âä®ÈÉ®ÁΩ≤ÔºâÔºåÂè¶‰∏ÄÊñπÈù¢‰πüÂèØ‰ª•Ëß£ÂÜ≥ÂçöÂÆ¢Ê∫êÁ†ÅÂ§öÁîµËÑë‰π¶ÂÜôÁöÑÂ±ÄÈôêÊÄßÔºà‰πãÂâçÂè™ËÉΩÂú®‰∏ÄÂè∞ÁîµËÑë‰∏äËøõË°åÂçöÂÆ¢ÁöÑÂàõ‰ΩúÔºåÈù¢‰∏¥ÁùÄÈ°πÁõÆÂ§á‰ªΩÁöÑÈóÆÈ¢òÔºâÔºåÁé∞Âú®Â∞ÜÈ°πÁõÆÂÆåÂÖ®ÊâòÁÆ°Âú® GitHub‰∏äÔºåÊó†ÈúÄÊãÖÂøÉÁîµËÑëÊç¢‰∫ÜÔºåÊàñÊòØÁ£ÅÁõòÊçüÂùèÈÄ†ÊàêÁöÑÊï∞ÊçÆ‰∏¢Â§±Ôºå‰πüÊó†ÈúÄ‰ΩøÁî®‰∫ëÂ§á‰ªΩÂ∑•ÂÖ∑Ë¥πÊó∂Ë¥πÂäõÁöÑÁª¥Êä§È°πÁõÆ„ÄÇ<br><div class="note info"><h2 id="Ê†∏ÂøÉÊ≠•È™§"><a href="#Ê†∏ÂøÉÊ≠•È™§" class="headerlink" title="Ê†∏ÂøÉÊ≠•È™§"></a>Ê†∏ÂøÉÊ≠•È™§</h2></div></p>
<h3 id="Êñ∞Âª∫‰ª£Á†Å‰ªìÂ∫ì"><a href="#Êñ∞Âª∫‰ª£Á†Å‰ªìÂ∫ì" class="headerlink" title="Êñ∞Âª∫‰ª£Á†Å‰ªìÂ∫ì"></a>Êñ∞Âª∫‰ª£Á†Å‰ªìÂ∫ì</h3><p>È¶ñÂÖàÊàë‰ª¨ÂÖàÁ°ÆÂÆöÔºåÂ∞ÜÈ°πÁõÆÊâòÁÆ°Âú® GitHub ‰∏äÔºåËøôÈáåÊúâ‰∏§ÁßçÊñπÊ°àÔºå‰∏ÄÁßçÊòØÂú®Â≠òÊîæÂçöÂÆ¢ÈùôÊÄÅ‰ª£Á†ÅÁöÑ‰ªìÂ∫ìÔºàÂ¶ÇÔºöxxx.github.ioÔºâ‰∏≠Êñ∞Ê∑ªÂä†ÂàÜÊîØ;Âè¶‰∏ÄÁßçÂàôÊòØÊñ∞Âª∫‰∏Ä‰∏™‰ªìÂ∫ìÁî®‰∫éÂ≠òÊîæÈ°πÁõÆ„ÄÇÊàëËøôÈáå‰ΩøÁî®ÁöÑÁ¨¨‰∫åÁßçÊñπÂºèÔºåÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™‰ªìÂ∫ìÔºöhexo-github-source „ÄÇ</p>
<a id="more"></a>
<h3 id="ÈÖçÁΩÆ-AppVeyor"><a href="#ÈÖçÁΩÆ-AppVeyor" class="headerlink" title="ÈÖçÁΩÆ AppVeyor"></a>ÈÖçÁΩÆ AppVeyor</h3><p><a href="https://www.appveyor.com/" target="_blank" rel="noopener">ÁÇπÊàëËøõÂÖ•AppVeyorÂÆòÁΩë</a><br><img src="http://oliji9s3j.bkt.clouddn.com/15126603949109.png" alt><br>Ê∑ªÂä†‰Ω†ÁöÑGitHubÈ°πÁõÆÔºåËøôÈáåË¶ÅÊ≥®ÊÑèÊ∑ªÂä†ÁöÑÊòØ‰Ω†ÁöÑSource RepoÔºàhexo-github-sourceÔºâÔºåËÄå‰∏çÊòØContent RepoÔºàxxx.github.io.gitÔºâ„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15126607179064.jpg" alt></p>
<h3 id="ÈÖçÁΩÆ-appveyor-yml"><a href="#ÈÖçÁΩÆ-appveyor-yml" class="headerlink" title="ÈÖçÁΩÆ appveyor.yml"></a>ÈÖçÁΩÆ appveyor.yml</h3><p>ÂõûÂà∞ GitHub È°µÈù¢ÔºåÂú®Êñ∞Âª∫ÁöÑ hexo-github-source ‰ªìÂ∫ìÁöÑÊ†πÁõÆÂΩï‰∏ãÈù¢Êñ∞Âª∫ appveyor.yml Êñá‰ª∂„ÄÇ<br>ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">clone_depth: 5</span><br><span class="line"> </span><br><span class="line">environment:</span><br><span class="line">  nodejs_version: &quot;6&quot;</span><br><span class="line">  access_token:</span><br><span class="line">    secure: [ËøôÈáåÈúÄË¶ÅÊîπ‰∏∫Ëá™Â∑±ÁöÑÂØÜÂåôÔºåËé∑ÂèñÊñπÊ≥ïËßÅ‰∏ã]</span><br><span class="line"> </span><br><span class="line">install:</span><br><span class="line">  - ps: Install-Product node $env:nodejs_version</span><br><span class="line">  - node --version</span><br><span class="line">  - npm --version</span><br><span class="line">  - npm install</span><br><span class="line">  - npm install hexo-cli -g</span><br><span class="line"> </span><br><span class="line">build_script:</span><br><span class="line">  - hexo generate</span><br><span class="line"> </span><br><span class="line">artifacts:</span><br><span class="line">  - path: public</span><br><span class="line"> </span><br><span class="line">on_success:</span><br><span class="line">  - git config --global credential.helper store</span><br><span class="line">  - ps: Add-Content &quot;$env:USERPROFILE\.git-credentials&quot; &quot;https://$($env:access_token):x-oauth-basic@github.com`n&quot;</span><br><span class="line">  - git config --global user.email &quot;%GIT_USER_EMAIL%&quot;</span><br><span class="line">  - git config --global user.name &quot;%GIT_USER_NAME%&quot;</span><br><span class="line">  - git clone --depth 5 -q --branch=%TARGET_BRANCH% %STATIC_SITE_REPO% %TEMP%\static-site</span><br><span class="line">  - cd %TEMP%\static-site</span><br><span class="line">  - del * /f /q</span><br><span class="line">  - for /d %%p IN (*) do rmdir &quot;%%p&quot; /s /q</span><br><span class="line">  - SETLOCAL EnableDelayedExpansion &amp; robocopy &quot;%APPVEYOR_BUILD_FOLDER%\public&quot; &quot;%TEMP%\static-site&quot; /e &amp; IF !ERRORLEVEL! EQU 1 (exit 0) ELSE (IF !ERRORLEVEL! EQU 3 (exit 0) ELSE (exit 1))</span><br><span class="line">  - git add -A</span><br><span class="line">  - if &quot;%APPVEYOR_REPO_BRANCH%&quot;==&quot;master&quot; if not defined APPVEYOR_PULL_REQUEST_NUMBER (git diff --quiet --exit-code --cached || git commit -m &quot;Update Static Site&quot; &amp;&amp; git push origin %TARGET_BRANCH% &amp;&amp; appveyor AddMessage &quot;Static Site Updated&quot;)</span><br></pre></td></tr></table></figure>
<p>‰ª•‰∏äÈÖçÁΩÆÔºåÂè™Êúâ access_token ‰∏ç‰∏ÄÊ†∑ÔºàÂÖ∂‰ΩôÁöÑÈÉΩÂèØ‰ª•Áõ¥Êé•Áî®ÔºâÔºåËøô‰∏™ÈúÄË¶ÅÂéª GitHub ÁîüÊàêÔºå<a href="https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/" target="_blank" rel="noopener">Êà≥Êàë‰∫ÜËß£ÊÄé‰πàËé∑Âèñ</a>„ÄÇÂú® GitHub ÊãøÂà∞ access_token ‰πãÂêéÔºåËøòÈúÄË¶ÅÂà∞ <a href="https://ci.appveyor.com/tools/encrypt" target="_blank" rel="noopener">AppVeyor Âä†ÂØÜÈ°µÈù¢</a> ËøõË°åÂä†ÂØÜÔºåÊúÄÁªàÂæóÂà∞Á±ª‰ººËøôÊ†∑‰∏Ä‰∏≤‰∏úË•ø<br>MvjDPMTBE+hD5iZPRY2mIUuTl8quMhcEfhYe1rOti5g2GaTPQSDU/Mliff7NainM ÔºåÂ∞ÜËØ•ÂØÜÂåô ÂÜôÂÖ• appveyor.yml ‰∏≠„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/15126613031226.png" alt></p>
<h3 id="ÈÖçÁΩÆ-Appveyor-ÁéØÂ¢ÉÂèòÈáè"><a href="#ÈÖçÁΩÆ-Appveyor-ÁéØÂ¢ÉÂèòÈáè" class="headerlink" title="ÈÖçÁΩÆ Appveyor ÁéØÂ¢ÉÂèòÈáè"></a>ÈÖçÁΩÆ Appveyor ÁéØÂ¢ÉÂèòÈáè</h3><p>ÂõûÂà∞ ÂàöÊâçÁöÑ Appveyor È°µÈù¢ÔºåËøõÂÖ• settings È°µÈù¢ÔºåÈÄâÊã© Environment ÔºåÁÇπÂáª Add variable Ê∑ªÂä†ÁéØÂ¢ÉÂèòÈáèÔºåÈÖçÁΩÆÂ¶Ç‰∏ãÂõõ‰∏™ÂèòÈáèÔºö</p>
<ul>
<li>GIT_USER_EMAIL ÔºöGitHubÈÇÆÁÆ±</li>
<li>GIT_USER_NAME ÔºöGitHubÁî®Êà∑Âêç</li>
<li>STATIC_SITE_REPO ÔºöContent RepoÂú∞ÂùÄÔºà<a href="https://github.com/xxx/xxx.github.io.gitÔºâ" target="_blank" rel="noopener">https://github.com/xxx/xxx.github.io.gitÔºâ</a></li>
<li>TARGET_BRANCH Ôºö‰øùÁïôÈªòËÆ§ÁöÑ master<br>Â¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15126617970902.jpg" alt><div class="note info"><h2 id="ÊµãËØï‰∏éÈóÆÈ¢ò"><a href="#ÊµãËØï‰∏éÈóÆÈ¢ò" class="headerlink" title="ÊµãËØï‰∏éÈóÆÈ¢ò"></a>ÊµãËØï‰∏éÈóÆÈ¢ò</h2></div>
ÁªèËøá‰∏ÄÁï™ÊäòËÖæÔºåÁªà‰∫éË∂äËøáÊó†Êï∞ÁöÑÂùë‰πãÂêéÔºåÂÆåÁæéÁöÑËøêË°åÊàêÂäü„ÄÇ<h3 id="Âùë‰∏ÄÔºöpush-Âà∞‰ªìÂ∫ìÊó∂ÊèêÁ§∫Á©∫Êñá‰ª∂Â§π"><a href="#Âùë‰∏ÄÔºöpush-Âà∞‰ªìÂ∫ìÊó∂ÊèêÁ§∫Á©∫Êñá‰ª∂Â§π" class="headerlink" title="Âùë‰∏ÄÔºöpush Âà∞‰ªìÂ∫ìÊó∂ÊèêÁ§∫Á©∫Êñá‰ª∂Â§π"></a>Âùë‰∏ÄÔºöpush Âà∞‰ªìÂ∫ìÊó∂ÊèêÁ§∫Á©∫Êñá‰ª∂Â§π</h3>ÊèêÁ§∫ themes/next ‰∏∫Á©∫Êñá‰ª∂Â§πÔºåÊèê‰∫§Â§±Ë¥•Ôºà GitHub Êó†Ê≥ïÊèê‰∫§Á©∫Êñá‰ª∂Â§πÔºâÔºåÂèØÈóÆÈ¢òÊòØÊòéÊòé‰∏çÊòØÁ©∫Êñá‰ª∂ÂïäÔºå‰∏∫‰ªÄ‰πà‰ºöÂà§ÂÆö‰∏∫Á©∫ÁöÑÔºüÂéüÊù•ÊàëËøôÊòØ next ‰∏ªÈ¢òÁõ¥Êé• git clone ‰∏ãÊù•ÁöÑÔºåÂõ†ËÄåÂú® next Êñá‰ª∂Â§πÁöÑÊ†πÁõÆÂΩï‰∏ãÈù¢Êúâ‰∏Ä‰∏™ .git ÁöÑÈöêËóèÊñá‰ª∂ÔºåÂ∞±ÊòØËøôÂØºËá¥ÁöÑÊó†Ê≥ïÊèê‰∫§„ÄÇÊó¢ÁÑ∂ÊâæÂà∞‰∫ÜÂéüÂõ†ÔºåÈÇ£Â∞±Â•ΩÊï¥‰∫ÜÔºåÁõ¥Êé•Âà†ÊéâÔºåÂÆåÁæéËß£ÂÜ≥ÈóÆÈ¢ò„ÄÇ<h3 id="Âùë‰∫åÔºö-AppVeyor-ÊèêÁ§∫-Bug"><a href="#Âùë‰∫åÔºö-AppVeyor-ÊèêÁ§∫-Bug" class="headerlink" title="Âùë‰∫åÔºö AppVeyor ÊèêÁ§∫ Bug"></a>Âùë‰∫åÔºö AppVeyor ÊèêÁ§∫ Bug</h3>Â∞ÜÈ°πÁõÆ push Âà∞Êñ∞Âª∫ÁöÑ‰ªìÂ∫ì‰∏≠ÔºåÊü•Áúã AppVeyor ÁöÑËøêË°åÊó•ÂøóÔºåÁúãÊòØÂê¶ÊèêÁ§∫ Bug ÔºåÊàëÂú®ÊµãËØïÁöÑËøáÁ®ã‰∏≠Âæà‰∏çÂπ∏ÔºåÂ∞±Âá∫Áé∞ËøáÈóÆÈ¢òÔºåÂéüÂõ†ÊòØ hexo ÁöÑ‰∏Ä‰∏™Êèí‰ª∂ÁõÆÂΩïËøáÈïøÔºåÂØºËá¥Á®ãÂ∫èÂ§±Ë¥•ÔºåËß£ÂÜ≥ÊñπÊ≥ïÊòØ‰∏çÁî®Êää hexo Êñá‰ª∂Â§πÂ§á‰ªΩÂà∞‰ªìÂ∫ì‰∏≠ÔºåÂõ†ËÄåÂÆåÁæéÁöÑ<del>Ëß£ÂÜ≥</del>ÔºàÈÅøÂºÄÔºâÈóÆÈ¢ò„ÄÇ<br>Â§á‰ªΩÂà∞‰ªìÂ∫ìÁöÑÈ°πÁõÆÁªìÊûÑÂ¶Ç‰∏ãÔºöÔºàÂ§ö‰ΩôÁöÑÈÉΩÂèØÂéªÊéâÔºå‰ªÖ‰øùÁïôÊ†∏ÂøÉÔºâ<br><img src="http://oliji9s3j.bkt.clouddn.com/15126623258862.jpg" alt></li>
</ul>
]]></content>
      
        <categories>
            
            <category> hexo </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hexo </tag>
            
            <tag> appveyor </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Hive‰∫ãÂä°ÁÆ°ÁêÜ]]></title>
      <url>https://stanxia.github.io/2017/12/01/Hive%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÁÆÄ‰ªã"><a href="#ÁÆÄ‰ªã" class="headerlink" title="ÁÆÄ‰ªã"></a>ÁÆÄ‰ªã</h2></div>
<p>Hive‰Ωú‰∏∫HadoopÂÆ∂ÊóèÂéÜÂè≤ÊúÄÊÇ†‰πÖÁöÑÁªÑ‰ª∂‰πã‰∏ÄÔºå‰∏ÄÁõ¥‰ª•ÂÖ∂‰ºòÁßÄÁöÑÂÖºÂÆπÊÄßÊîØÊåÅÂíåÁ®≥ÂÆöÊÄßËÄåËëóÁß∞ÔºåË∂äÊù•Ë∂äÂ§öÁöÑ‰ºÅ‰∏öÂ∞Ü‰∏öÂä°Êï∞ÊçÆ‰ªé‰º†ÁªüÊï∞ÊçÆÂ∫ìËøÅÁßªËá≥HadoopÂπ≥Âè∞ÔºåÂπ∂ÈÄöËøáHiveÊù•ËøõË°åÊï∞ÊçÆÂàÜÊûê„ÄÇ‰ΩÜÊòØÊàë‰ª¨Âú®ËøÅÁßªÁöÑËøáÁ®ã‰∏≠ÈöæÂÖç‰ºöÁ¢∞Âà∞Â¶Ç‰ΩïÂ∞Ü‰º†ÁªüÊï∞ÊçÆÂ∫ìÁöÑÂäüËÉΩ‰πüËøÅÁßªÂà∞HadoopÁöÑÈóÆÈ¢òÔºåÊØîÂ¶ÇËØ¥‰∫ãÂä°„ÄÇ‰∫ãÂä°‰Ωú‰∏∫‰º†ÁªüÊï∞ÊçÆÂ∫ìÂæàÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÂäüËÉΩÔºåÂú®Hive‰∏≠ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢ÔºüHiveÁöÑÂÆûÁé∞Êúâ‰ªÄ‰πà‰∏ç‰∏ÄÊ†∑ÁöÑÂú∞ÊñπÂë¢ÔºüÊàë‰ª¨Â∞Ü‰º†ÁªüÊï∞ÊçÆÂ∫ìÁöÑÂ∫îÁî®ËøÅÁßªÂà∞HiveÂ¶ÇÊûúÊúâ‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÂú∫ÊôØÊàë‰ª¨ËØ•Â¶Ç‰ΩïÂéªËΩ¨Êç¢Âπ∂Ë¶ÅÊ≥®ÊÑè‰ªÄ‰πàÈóÆÈ¢òÂë¢Ôºü</p>
<p>Êú¨Êñá‰ºöÈÄöËøáÂæàÂ§öÁúüÂÆûÊµãËØïÊ°à‰æãÊù•ÊØîËæÉHive‰∏é‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∫ãÂä°ÁöÑÂå∫Âà´ÔºåÂπ∂Âú®ÊñáÊú´ÁªôÂá∫‰∏Ä‰∫õÂú®HiveÂπ≥Âè∞‰∏ä‰ΩøÁî®‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÂäüËÉΩÊó∂ÁöÑÊåáÂØºÂíåÂª∫ËÆÆ„ÄÇ<br><div class="note info"><h2 id="ACID‰∏éÂÆûÁé∞ÂéüÁêÜ"><a href="#ACID‰∏éÂÆûÁé∞ÂéüÁêÜ" class="headerlink" title="ACID‰∏éÂÆûÁé∞ÂéüÁêÜ"></a>ACID‰∏éÂÆûÁé∞ÂéüÁêÜ</h2></div><br>‰∏∫‰∫ÜÊñπ‰æøËß£ÈáäÂíåËØ¥ÊòéÂêéÈù¢ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÔºåËøôÈáåÈáçÊèê‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊ¶ÇÂøµÔºå‰ª•‰∏ãÂÜÖÂÆπÊù•Ê∫ê‰∫éÁΩëÁªú„ÄÇ</p>
<a id="more"></a>
<h3 id="ACIDËØ¥Êòé"><a href="#ACIDËØ¥Êòé" class="headerlink" title="ACIDËØ¥Êòé"></a>ACIDËØ¥Êòé</h3><p>‰Ωï‰∏∫‰∫ãÂä°ÔºüÂ∞±ÊòØ‰∏ÄÁªÑÂçïÂÖÉÂåñÊìç‰ΩúÔºåËøô‰∫õÊìç‰ΩúË¶Å‰πàÈÉΩÊâßË°åÔºåË¶Å‰πàÈÉΩ‰∏çÊâßË°åÔºåÊòØ‰∏Ä‰∏™‰∏çÂèØÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰Ωç„ÄÇ</p>
<p>‰∫ãÂä°ÔºàtransactionÔºâÊâÄÂ∫îËØ•ÂÖ∑ÊúâÁöÑÂõõ‰∏™Ë¶ÅÁ¥†ÔºöÂéüÂ≠êÊÄßÔºàAtomicityÔºâ„ÄÅ‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ„ÄÅÈöîÁ¶ªÊÄßÔºàIsolationÔºâ„ÄÅÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ„ÄÇËøôÂõõ‰∏™Âü∫Êú¨Ë¶ÅÁ¥†ÈÄöÂ∏∏Áß∞‰∏∫ACIDÁâπÊÄß„ÄÇ</p>
<ol>
<li>ÂéüÂ≠êÊÄßÔºàAtomicityÔºâ:‰∏Ä‰∏™‰∫ãÂä°ÊòØ‰∏Ä‰∏™‰∏çÂèØÂÜçÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰ΩçÔºå‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúË¶Å‰πàÈÉΩÂèëÁîüÔºåË¶Å‰πàÈÉΩ‰∏çÂèëÁîü„ÄÇ</li>
<li>‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ:‰∫ãÂä°ÂºÄÂßã‰πãÂâçÂíå‰∫ãÂä°ÁªìÊùü‰ª•ÂêéÔºåÊï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥ÊÄßÁ∫¶ÊùüÊ≤°ÊúâË¢´Á†¥Âùè„ÄÇËøôÊòØËØ¥Êï∞ÊçÆÂ∫ì‰∫ãÂä°‰∏çËÉΩÁ†¥ÂùèÂÖ≥Á≥ªÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß‰ª•Âèä‰∏öÂä°ÈÄªËæë‰∏äÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ</li>
<li>ÈöîÁ¶ªÊÄßÔºàIsolationÔºâ:Â§ö‰∏™‰∫ãÂä°Âπ∂ÂèëËÆøÈóÆÔºå‰∫ãÂä°‰πãÈó¥ÊòØÈöîÁ¶ªÁöÑÔºå‰∏Ä‰∏™‰∫ãÂä°‰∏çÂΩ±ÂìçÂÖ∂ÂÆÉ‰∫ãÂä°ËøêË°åÊïàÊûú„ÄÇËøôÊåáÁöÑÊòØÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÔºåÂΩì‰∏çÂêåÁöÑ‰∫ãÂä°ÂêåÊó∂Êìç‰ΩúÁõ∏ÂêåÁöÑÊï∞ÊçÆÊó∂ÔºåÊØè‰∏™‰∫ãÂä°ÈÉΩÊúâÂêÑËá™ÂÆåÊï¥ÁöÑÊï∞ÊçÆÁ©∫Èó¥„ÄÇ‰∫ãÂä°Êü•ÁúãÊï∞ÊçÆÊõ¥Êñ∞Êó∂ÔºåÊï∞ÊçÆÊâÄÂ§ÑÁöÑÁä∂ÊÄÅË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂÆÉ‰πãÂâçÁöÑÁä∂ÊÄÅÔºåË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂêéÁöÑÁä∂ÊÄÅÔºå‰∫ãÂä°‰∏ç‰ºöÊü•ÁúãÂà∞‰∏≠Èó¥Áä∂ÊÄÅÁöÑÊï∞ÊçÆ„ÄÇ‰∫ãÂä°‰πãÈó¥ÁöÑÁõ∏Â∫îÂΩ±ÂìçÔºåÂàÜÂà´‰∏∫ÔºöËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØª„ÄÅ‰∏¢Â§±Êõ¥Êñ∞„ÄÇ</li>
<li>ÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ:ÊÑèÂë≥ÁùÄÂú®‰∫ãÂä°ÂÆåÊàê‰ª•ÂêéÔºåËØ•‰∫ãÂä°ÈîÅÂØπÊï∞ÊçÆÂ∫ìÊâÄ‰ΩúÁöÑÊõ¥Êîπ‰æøÊåÅ‰πÖÁöÑ‰øùÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰πã‰∏≠ÔºåÂπ∂‰∏ç‰ºöË¢´ÂõûÊªö„ÄÇ</li>
</ol>
<h3 id="ACIDÁöÑÂÆûÁé∞ÂéüÁêÜ"><a href="#ACIDÁöÑÂÆûÁé∞ÂéüÁêÜ" class="headerlink" title="ACIDÁöÑÂÆûÁé∞ÂéüÁêÜ"></a>ACIDÁöÑÂÆûÁé∞ÂéüÁêÜ</h3><p>‰∫ãÂä°ÂèØ‰ª•‰øùËØÅACIDÂéüÂàôÁöÑÊìç‰ΩúÔºåÈÇ£‰πà‰∫ãÂä°ÊòØÂ¶Ç‰Ωï‰øùËØÅËøô‰∫õÂéüÂàôÁöÑÔºüËß£ÂÜ≥ACIDÈóÆÈ¢òÁöÑ‰∏§Â§ßÊäÄÊúØÁÇπÊòØÔºö</p>
<ol>
<li>È¢ÑÂÜôÊó•ÂøóÔºàWrite-ahead loggingÔºâ‰øùËØÅÂéüÂ≠êÊÄßÂíåÊåÅ‰πÖÊÄß</li>
<li>ÈîÅÔºàlockingÔºâ‰øùËØÅÈöîÁ¶ªÊÄß</li>
</ol>
<p>ËøôÈáåÂπ∂Ê≤°ÊúâÊèêÂà∞‰∏ÄËá¥ÊÄßÔºåÊòØÂõ†‰∏∫‰∏ÄËá¥ÊÄßÊòØÂ∫îÁî®Áõ∏ÂÖ≥ÁöÑËØùÈ¢òÔºåÂÆÉÁöÑÂÆö‰πâ‰∏Ä‰∏™Áî±‰∏öÂä°Á≥ªÁªüÊù•ÂÆö‰πâÔºå‰ªÄ‰πàÊ†∑ÁöÑÁä∂ÊÄÅÊâçÊòØ‰∏ÄËá¥ÔºüËÄåÂÆûÁé∞‰∏ÄËá¥ÊÄßÁöÑ‰ª£Á†ÅÈÄöÂ∏∏Âú®‰∏öÂä°ÈÄªËæëÁöÑ‰ª£Á†Å‰∏≠Âæó‰ª•‰ΩìÁé∞„ÄÇ</p>
<p>Ê≥®ÔºöÈîÅÊòØÊåáÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÈÄöËøáËØªÂÜôÈîÅÊù•‰øùËØÅÊìç‰ΩúÁöÑ‰∫íÊñ•ÊÄß„ÄÇÊ†πÊçÆÈöîÁ¶ªÁ®ãÂ∫¶‰∏çÂêåÔºåÈîÅÁöÑËøêÁî®‰πü‰∏çÂêå„ÄÇ<br><div class="note info"><h2 id="ÊµãËØïÁéØÂ¢É"><a href="#ÊµãËØïÁéØÂ¢É" class="headerlink" title="ÊµãËØïÁéØÂ¢É"></a>ÊµãËØïÁéØÂ¢É</h2></div></p>
<table>
<thead>
<tr>
<th>Êìç‰ΩúÁ≥ªÁªü</th>
<th>CentOS 6.5</th>
</tr>
</thead>
<tbody>
<tr>
<td>JDK</td>
<td>jdk1.7.0_67</td>
</tr>
<tr>
<td>CDH</td>
<td>5.9</td>
</tr>
<tr>
<td>Hadoop</td>
<td>2.6.0</td>
</tr>
<tr>
<td>Hive</td>
<td>1.1.0</td>
</tr>
</tbody>
</table>
<div class="note info"><h2 id="HiveÁöÑACIDÊµãËØï"><a href="#HiveÁöÑACIDÊµãËØï" class="headerlink" title="HiveÁöÑACIDÊµãËØï"></a>HiveÁöÑACIDÊµãËØï</h2></div>
<h3 id="Hive‰∏≠ÁöÑÈîÅÔºà‰∏çÂºÄÂêØ‰∫ãÂä°Ôºâ"><a href="#Hive‰∏≠ÁöÑÈîÅÔºà‰∏çÂºÄÂêØ‰∫ãÂä°Ôºâ" class="headerlink" title="Hive‰∏≠ÁöÑÈîÅÔºà‰∏çÂºÄÂêØ‰∫ãÂä°Ôºâ"></a>Hive‰∏≠ÁöÑÈîÅÔºà‰∏çÂºÄÂêØ‰∫ãÂä°Ôºâ</h3><p>Hive‰∏≠ÂÆö‰πâ‰∫Ü‰∏§ÁßçÈîÅÁöÑÊ®°ÂºèÔºöÂÖ±‰∫´ÈîÅÔºàSÔºâÂíåÊéíÂÆÉÈîÅÔºàXÔºâÔºåÈ°æÂêçÊÄù‰πâÔºåÂ§ö‰∏™ÂÖ±‰∫´ÈîÅ(S)ÂèØ‰ª•ÂêåÊó∂Ëé∑ÂèñÔºå‰ΩÜÊòØÊéíÂÆÉÈîÅ(X)‰ºöÈòªÂ°ûÂÖ∂ÂÆÉÊâÄÊúâÈîÅ„ÄÇÂú®Êú¨Ê¨°ÊµãËØï‰∏≠ÔºåCDH5.9ÁöÑConcurrencyÂèÇÊï∞ÊòØÈªòËÆ§ÂºÄÂêØÁöÑÔºàhive.support.concurrency=trueÔºâÔºå‰ª•‰∏ãÂàÜÂà´ÂØπÂºÄÂêØConcurrencyÂíåÂÖ≥Èó≠ËøõË°åÁõ∏ÂÖ≥ÊµãËØï„ÄÇ</p>
<p>È¶ñÂÖàÂú®ÊµãËØï‰πãÂâçÔºåÂàõÂª∫‰∏Ä‰∏™ÊôÆÈÄöÁöÑhiveË°®Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_notransaction(user_id <span class="built_in">Int</span>,<span class="keyword">name</span> <span class="keyword">String</span>);</span><br></pre></td></tr></table></figure>
<p>Âêëtest_transactionË°®‰∏≠ÊèíÂÖ•ÊµãËØïÊï∞ÊçÆÔºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_notransaction <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'peach1'</span>),(<span class="number">2</span>,<span class="string">'peach2'</span>),(<span class="number">3</span>, <span class="string">'peach3'</span>),(<span class="number">4</span>, <span class="string">'peach4'</span>);</span><br></pre></td></tr></table></figure>
<p>Êü•ÁúãÊèíÂÖ•ÁöÑÊï∞ÊçÆÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121055789375.jpg" alt></p>
<h4 id="ÂºÄÂêØConcurrency"><a href="#ÂºÄÂêØConcurrency" class="headerlink" title="ÂºÄÂêØConcurrency"></a>ÂºÄÂêØConcurrency</h4><p>1„ÄÅÂØπcatalog_salesË°®ËøõË°åÂπ∂ÂèëselectÊìç‰Ωú</p>
<p>ÊâßË°åÁöÑsqlËØ≠Âè•Ôºöselect count(*) from catalog_sales;</p>
<p>ÊâßË°åÂçïÊù°sqlÊü•ËØ¢Êó∂ÔºåËé∑Âèñ‰∏Ä‰∏™ÂÖ±‰∫´ÈîÅÔºàSÔºâÔºåsqlËØ≠Âè•Ê≠£Â∏∏ÊâßË°å</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121056449113.jpg" alt></p>
<p>ÂêåÊó∂ÊâßË°å‰∏§Êù°sqlÊü•ËØ¢ÊòØÔºåËé∑Âèñ‰∏§‰∏™ÂÖ±‰∫´ÈîÅÔºåÂπ∂‰∏îsqlËØ≠Âè•ÂùáÊ≠£Â∏∏ÊâßË°å</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121056652164.jpg" alt></p>
<p><strong>ÂàÜÊûê</strong>ÔºöÁî±Ê≠§ÂØπÊØîÂèØÂæóÂá∫hiveÂú®ÊâßË°åsqlÊü•ËØ¢Êó∂Ëé∑ÂèñShareÈîÅÔºåÂú®Âπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÂèØËé∑ÂèñÂ§ö‰∏™ÂÖ±‰∫´ÈîÅ„ÄÇ</p>
<p>2„ÄÅÂØπtestË°®ËøõË°åÂπ∂ÂèëInsertÊìç‰Ωú</p>
<p>ÂàõÂª∫Ë°®Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">test</span>(<span class="keyword">name</span> <span class="keyword">string</span>, <span class="keyword">id</span> <span class="built_in">int</span>);</span><br></pre></td></tr></table></figure>
<p>ÊâßË°åsqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">test</span> <span class="keyword">values</span>(<span class="string">'test11aaa1'</span>,<span class="number">1252</span>); </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> <span class="keyword">test</span> <span class="keyword">values</span>(<span class="string">'test1'</span>,<span class="number">52</span>);</span><br></pre></td></tr></table></figure>
<p>ÊâßË°åÂçïÊù°insertËØ≠Âè•Êó∂ÔºåËé∑Âèñ‰∏Ä‰∏™XÈîÅÔºåsqlËØ≠Âè•Ê≠£Â∏∏ÊâßË°å</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121057731335.jpg" alt></p>
<p>ÂêåÊó∂ÊâßË°å‰∏§Êù°insertËØ≠Âè•Êó∂ÔºåÂè™ËÉΩËé∑Âèñ‰∏Ä‰∏™testË°®XÈîÅÔºåÁ¨¨‰∏ÄÊù°insertËØ≠Âè•Ê≠£Â∏∏ÊâßË°åÔºåÁ¨¨‰∫åÊù°insertËØ≠Âè•Â§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅÔºåÂú®Á¨¨‰∏ÄÊù°insertËØ≠Âè•ÈáäÊîætestË°®ÁöÑXÈîÅÔºåÁ¨¨‰∫åÊù°sqlËØ≠Âè•Ê≠£Â∏∏ÊâßË°å.</p>
<p><strong>ÂàÜÊûê</strong>ÔºöÁî±Ê≠§ÂØπÊØîÂèØÂæóÂá∫hiveÂú®ÊâßË°åinsertÊìç‰ΩúÊó∂ÔºåÂè™ËÉΩËé∑Âèñ‰∏Ä‰∏™XÈîÅ‰∏îÈîÅ‰∏çËÉΩÂÖ±‰∫´ÔºåÂè™ËÉΩÂú®sqlÊâßË°åÂÆåÊàêÈáäÊîæÈîÅÂêéÔºåÂêéÁª≠sqlÊñπÂèØÁªßÁª≠ÊâßË°å„ÄÇ</p>
<p>3„ÄÅÂØπtestË°®ÊâßË°åselectÁöÑÂêåÊó∂ÊâßË°åinsertÊìç‰Ωú</p>
<p>ÊâßË°åsqlËØ≠Âè•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from test; </span><br><span class="line">insert into test values(&quot;test123&quot;,123);</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>1) ÊâßË°åselectËØ≠Âè•ÔºåÂú®selectÊú™ËøêË°åÂÆåÊó∂ÔºåÂú®Êñ∞ÁöÑÁ™óÂè£ÂêåÊó∂ÊâßË°åinsertËØ≠Âè•ËßÇÂØü‰∏§Êù°sqlÊâßË°åÊÉÖÂÜµÔºåselectËØ≠Âè•Ê≠£Â∏∏ÊâßË°åÔºåinsertËØ≠Âè•Â§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇ</p>
<p>2) Ê≠§Êó∂Êü•ÁúãtestË°®ÈîÅÁä∂ÊÄÅ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121058445186.jpg" alt></p>
<p>Âú®Ê≠•È™§1ÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºåËé∑ÂèñÂà∞testË°®ÁöÑÈîÅ‰∏∫ÂÖ±‰∫´ÈîÅÔºàSÔºâ</p>
<p>3) Âú®selectËØ≠Âè•ÊâßË°åÂÆåÊàêÂêéÔºåËßÇÂØüinsertËØ≠Âè•ÂºÄÂßãÊ≠£Â∏∏ÊâßË°åÔºåÊ≠§Êó∂Ëé∑ÂèñtestË°®ÈîÅ‰∏∫ÊéíÂÆÉÈîÅÔºàXÔºâ„ÄÇÊ≥®ÊÑèÔºöÂú®selectËØ≠Âè•ÊâßË°åÂÆåÊàêÂêéÔºåÂ§ßÊ¶ÇËøá40sÂ∑¶Âè≥insertËØ≠Âè•ÊâçÊ≠£Â∏∏ÊâßË°åÔºåËøôÊòØÁî±hive.lock.sleep.between.retriesÂèÇÊï∞ÊéßÂà∂ÔºåÈªòËÆ§60</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121058724922.jpg" alt></p>
<p><strong>ÂàÜÊûê</strong>Ôºö Áî±‰∏äËø∞Êìç‰ΩúÂèØÂæóÂá∫Ôºåhive‰∏≠‰∏Ä‰∏™Ë°®Âè™ËÉΩÊúâ‰∏Ä‰∏™ÊéíÂÆÉÈîÅ(X)‰∏îÈîÅ‰∏çËÉΩÂÖ±‰∫´ÔºåÂú®Ëé∑ÂèñÊéíÂÆÉÈîÅÊó∂ÔºåË°®‰∏ä‰∏çËÉΩÊúâÂÖ∂ÂÆÉÈîÅÂåÖÊã¨ÂÖ±‰∫´ÈîÅ(S)ÔºåÂè™ÊúâÂú®Ë°®‰∏äÊâÄÊúâÁöÑÈîÅÈÉΩÈáäÊîæÂêéÔºåinsertÊìç‰ΩúÊâçËÉΩÁªßÁª≠ÔºåÂê¶ÂàôÂ§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇ</p>
<p>ÂØπÊ≥®ÊÑèÈÉ®ÂàÜËøõË°åÂèÇÊï∞Ë∞ÉÊï¥ÔºåÂ∞Ühive.lock.sleep.between.retriesËÆæÁΩÆ‰∏∫10sÔºåÂÜçÊ¨°ËøõË°åÊµãËØïÂèëÁé∞ÔºåÂú®selectËØ≠Âè•ÊâßË°åÂÆåÊàêÂêéÔºåÂ§ßÊ¶ÇËøá6sÂ∑¶Âè≥insertËØ≠Âè•ÂºÄÂßãÊâßË°å,ÈÄöËøá‰∏§Ê¨°ÊµãËØïÂèëÁé∞ÔºåÁ≠âÂæÖÊó∂Èó¥ÂùáÂú®10s‰ª•ÂÜÖÔºåÁî±Ê≠§ÂèØ‰ª•ÂæóÂá∫Ê≠§ÂèÇÊï∞ÂΩ±ÂìçsqlÊìç‰ΩúËé∑ÂèñÈîÅÁöÑÈó¥ÈöîÔºàÂú®Êú™Ëé∑ÂèñÂà∞ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÔºâÔºåÂ¶ÇÊûúÊ≠§Êó∂Êú™Âà∞Ëé∑ÂèñÈîÅËß¶ÂèëÂë®ÊúüÔºåÊâßË°åÂÖ∂ÂÆÉsqlÂàôÔºåËØ•sql‰ºö‰ºò‰∫éÁ≠âÂæÖÁöÑsqlÊâßË°å„ÄÇ</p>
<p>4„ÄÅÂØπtestË°®ÊâßË°åinsertÁöÑÂêåÊó∂ÊâßË°åselectÊìç‰Ωú</p>
<p>ÊâßË°åsqlËØ≠Âè•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into test values(&quot;test123&quot;,123); </span><br><span class="line">select count(*) from test;</span><br></pre></td></tr></table></figure>
<p>Êìç‰ΩúÊ≠•È™§Ôºö</p>
<p>1) Âú®ÂëΩ‰ª§Á™óÂè£ÊâßË°åinsertËØ≠Âè•ÔºåÂú®insertÊìç‰ΩúÊú™ÊâßË°åÂÆåÊàêÊó∂ÔºåÂú®Êñ∞ÁöÑÂëΩ‰ª§Á™óÂè£ÊâßË°åselectËØ≠Âè•ÔºåËßÇÂØü‰∏§‰∏™Á™óÂè£ÁöÑsqlÊâßË°åÊÉÖÂÜµÔºåinsertËØ≠Âè•Ê≠£Â∏∏ÊâßË°åÔºåselectËØ≠Âè•Â§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇ</p>
<p>2) Ê≠§Êó∂Êü•ÁúãtestË°®ÈîÅÁä∂ÊÄÅÔºåÂè™ÊúâinsertÊìç‰ΩúËé∑ÂèñÁöÑÊéíÂÆÉÈîÅÔºàXÔºâ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121059151954.jpg" alt></p>
<p>3) Âú®insertËØ≠Âè•ÊâßË°åÂÆåÊàêÂêéÔºåËßÇÂØüselectËØ≠Âè•ÂºÄÂßãÊ≠£Â∏∏ÊâßË°åÔºåÊ≠§Êó∂Êü•ÁúãtestË°®ÈîÅÁä∂ÊÄÅ‰∏∫ÂÖ±‰∫´ÈîÅÔºàSÔºâÔºå‰πãÂâçÁöÑinsertÊìç‰ΩúËé∑ÂèñÁöÑÊéíÂÆÉÈîÅÔºàXÔºâÂ∑≤Ë¢´ÈáäÊîæ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121059320973.jpg" alt></p>
<p><strong>ÂàÜÊûê</strong>ÔºöÂú®testË°®ÈîÅÁä∂ÊÄÅ‰∏∫ÊéíÂÆÉÈîÅ(X)Êó∂ÔºåÊâÄÊúâÁöÑÊìç‰ΩúÂùáË¢´ÈòªÂ°ûÂ§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅÔºåÂè™ÊúâÂú®ÊéíÂÆÉÈîÅ(X)ÈáäÊîæÂÖ∂ÂÆÉÊìç‰ΩúÂèØÁªßÁª≠ËøõË°å„ÄÇ</p>
<p>5„ÄÅÊµãËØïupdateÂíådelete‰øÆÊîπtestË°®Êï∞ÊçÆ</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update test set name=&apos;aaaa&apos; where id=1252; </span><br><span class="line">delete test set name=&apos;bbbb&apos; where id=123;</span><br></pre></td></tr></table></figure>
<p>1) Ë°®‰∏≠Êï∞ÊçÆÔºåÊõ¥Êñ∞Ââç</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121059787723.jpg" alt></p>
<p>2) Âú®beelineÁ™óÂè£ÊâßË°åupdateÊìç‰Ωú</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121059930373.jpg" alt></p>
<p>ÊâßË°åupdateÊìç‰ΩúÊä•ÈîôÔºåÂºÇÂ∏∏ÊèêÁ§∫‚ÄúAttempt to do update or delete using transaction manager that does not support these operations‚ÄùÔºåÂú®Èùû‰∫ãÂä°Ê®°Âºè‰∏ã‰∏çÊîØÊåÅupdate Âíå delete„ÄÇ</p>
<h4 id="ÂÖ≥Èó≠Concurrency"><a href="#ÂÖ≥Èó≠Concurrency" class="headerlink" title="ÂÖ≥Èó≠Concurrency"></a>ÂÖ≥Èó≠Concurrency</h4><p>1„ÄÅÊâßË°åinsertÊìç‰ΩúÁöÑÂêåÊó∂ÊâßË°åselectÊìç‰Ωú</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into test_notransaction values(1,&apos;peach1&apos;),(2,&apos;peach2&apos;),(3, &apos;peach3&apos;),(4, &apos;peach4&apos;); </span><br><span class="line">select count(*) from test_notransaction;</span><br></pre></td></tr></table></figure>
<p>Êìç‰ΩúsqlÂâçÔºåÊü•ÁúãË°®Êï∞ÊçÆ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121060752594.jpg" alt></p>
<p>Êü•Áúãtest_notransactionË°®Ëé∑ÂèñÊÉÖÂÜµÔºåshow locks;</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121060893595.jpg" alt></p>
<p>hiveÂú®Êú™ÂºÄÂêØconcurrency ÁöÑÊÉÖÂÜµ‰∏ã,show locks‰∏çËÉΩÊ≠£Â∏∏Ëé∑ÂèñË°®ÁöÑÈîÅÔºåÂêåÊó∂ÂØπÂêå‰∏ÄÂº†Ë°®ÊâßË°åinsertÂíåselectÊìç‰ΩúÊó∂Âπ∂ÂèëÊâßË°åÔºåËé∑ÂèñÊï∞ÊçÆÂèñÂÜ≥‰∫ésqlÊâßË°åÈÄüÂ∫¶ÔºåÂõ†Ê≠§Âú®select ÁöÑÊó∂ÂÄôÊú™Ëé∑ÂèñÂà∞ÊèíÂÖ•Êï∞ÊçÆ„ÄÇ</p>
<p>2„ÄÅÊâßË°åselectÊìç‰ΩúÁöÑÂêåÊó∂ÊâßË°åinsertÊìç‰Ωú</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select count(*) from test_notransaction; </span><br><span class="line">insert into test_notransaction values(1,&apos;peach1&apos;),(2,&apos;peach2&apos;),(3, &apos;peach3&apos;),(4, &apos;peach4&apos;);</span><br></pre></td></tr></table></figure>
<p>Âú®ÊâßË°åselectÁöÑÂêåÊó∂ÊâßË°åinsertÊìç‰ΩúÔºåÊìç‰ΩúÂèØ‰ª•ÂêåÊó∂Âπ∂Ë°åÊìç‰ΩúÔºåÊú™‰∫ßÁîüÈòªÂ°ûÁ≠âÂæÖÁöÑËøáÁ®ã„ÄÇ</p>
<p>3„ÄÅÂêåÊó∂ÊâßË°åÂ§öÊù°insertÊìç‰Ωú</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into test_notransaction values(1,&apos;peach1&apos;),(2,&apos;peach2&apos;),(3, &apos;peach3&apos;),(4, &apos;peach4&apos;); </span><br><span class="line">insert into test_notransaction values(1,&apos;peach1&apos;),(2,&apos;peach2&apos;),(3, &apos;peach3&apos;),(4, &apos;peach4&apos;);</span><br></pre></td></tr></table></figure>
<p>ÂêåÊó∂ÊâßË°åinsertÊìç‰ΩúÊó∂ÔºåÂèØÂêåÊó∂ÊâßË°åÊú™‰∫ßÁîüÈòªÂ°ûÁ≠âÂæÖÁöÑËøáÁ®ã„ÄÇ</p>
<p>4„ÄÅÊâßË°åupdateÊìç‰ΩúÔºåÂ∞ÜË°®‰∏≠user_id‰∏∫2ÁöÑÁî®Êà∑Âêç‰øÆÊîπ‰∏∫peach22</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update test_notransaction set name=&apos;peach22&apos; where user_id=2;</span><br></pre></td></tr></table></figure>
<p>ÊâßË°åupdateÊìç‰ΩúÔºåÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121061484874.jpg" alt></p>
<p>Âú®Êú™ÈÖçÁΩÆhiveÁöÑTransactionÂíåACIDÊó∂Ôºå‰∏çÊîØÊåÅupdateÊìç‰Ωú„ÄÇ</p>
<p>5„ÄÅÊâßË°ådeleteÊìç‰ΩúÔºåÂ∞ÜË°®‰∏≠user_id‰∏∫1‰ø°ÊÅØÂà†Èô§</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_notransaction <span class="keyword">where</span> user_id=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>ÊâßË°ådeleteÊìç‰ΩúÔºåÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121061713652.jpg" alt></p>
<p>hiveÊú™ÈÖçÁΩÆTransactionÂíåACIDÔºå‰∏çÊîØÊåÅdeleteÊìç‰Ωú„ÄÇ</p>
<p>6„ÄÅÊü•ÁúãË°®Ëé∑ÂèñÈîÅÁ±ªÂûã</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> locks;</span><br></pre></td></tr></table></figure>
<p>Êó†Ê≥ïÊ≠£Â∏∏ÊâßË°åÔºõ</p>
<h3 id="HiveÁöÑ‰∫ãÂä°"><a href="#HiveÁöÑ‰∫ãÂä°" class="headerlink" title="HiveÁöÑ‰∫ãÂä°"></a>HiveÁöÑ‰∫ãÂä°</h3><h4 id="HiveÁöÑ‰∫ãÂä°ÈÖçÁΩÆ"><a href="#HiveÁöÑ‰∫ãÂä°ÈÖçÁΩÆ" class="headerlink" title="HiveÁöÑ‰∫ãÂä°ÈÖçÁΩÆ"></a>HiveÁöÑ‰∫ãÂä°ÈÖçÁΩÆ</h4><p>Hive‰ªé0.13ÂºÄÂßãÂä†ÂÖ•‰∫Ü‰∫ãÂä°ÊîØÊåÅÔºåÂú®Ë°åÁ∫ßÂà´Êèê‰æõÂÆåÊï¥ÁöÑACIDÁâπÊÄßÔºåHiveÂú®0.14Êó∂Âä†ÂÖ•‰∫ÜÂØπINSERT‚Ä¶VALUES,UPDATE,and DELETEÁöÑÊîØÊåÅ„ÄÇÂØπ‰∫éÂú®Hive‰∏≠‰ΩøÁî®ACIDÂíåTransactionsÔºå‰∏ªË¶ÅÊúâ‰ª•‰∏ãÈôêÂà∂Ôºö</p>
<ul>
<li>‰∏çÊîØÊåÅBEGIN,COMMITÂíåROLLBACK</li>
<li>Âè™ÊîØÊåÅORCÊñá‰ª∂Ê†ºÂºè</li>
<li>Ë°®ÂøÖÈ°ªÂàÜÊ°∂</li>
<li>‰∏çÂÖÅËÆ∏‰ªé‰∏Ä‰∏™ÈùûACIDËøûÊé•ÂÜôÂÖ•/ËØªÂèñACIDË°®</li>
</ul>
<p>‰∏∫‰∫Ü‰ΩøHiveÊîØÊåÅ‰∫ãÂä°Êìç‰ΩúÔºåÈúÄÂ∞Ü‰ª•‰∏ãÂèÇÊï∞Âä†ÂÖ•Âà∞hive-site.xmlÊñá‰ª∂‰∏≠„ÄÇ</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.support.concurrency<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.enforce.bucketing<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.exec.dynamic.partition.mode<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>nonstrict<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.txn.manager<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>org.apache.hadoop.hive.ql.lockmgr.DbTxnManager<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.compactor.initiator.on<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.compactor.worker.threads <span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>ÂèØ‰ª•Âú®Cloudera ManagerËøõË°å‰ª•‰∏ãÈÖçÁΩÆÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121063102376.jpg" alt></p>
<p>‰∏∫‰∫ÜËÆ©beelineÊîØÊåÅËøòÈúÄË¶ÅÈÖçÁΩÆÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121063263012.jpg" alt></p>
<h4 id="Hive‰∫ãÂä°ÊµãËØï"><a href="#Hive‰∫ãÂä°ÊµãËØï" class="headerlink" title="Hive‰∫ãÂä°ÊµãËØï"></a>Hive‰∫ãÂä°ÊµãËØï</h4><h5 id="ÁéØÂ¢ÉÂáÜÂ§á"><a href="#ÁéØÂ¢ÉÂáÜÂ§á" class="headerlink" title="ÁéØÂ¢ÉÂáÜÂ§á"></a>ÁéØÂ¢ÉÂáÜÂ§á</h5><p>1„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØÊåÅACIDÁöÑË°®</p>
<p>Âª∫Ë°®ËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test_trancaction </span><br><span class="line">(user_id <span class="built_in">Int</span>,<span class="keyword">name</span> <span class="keyword">String</span>) </span><br><span class="line">clustered <span class="keyword">by</span> (user_id) <span class="keyword">into</span> <span class="number">3</span> buckets <span class="keyword">stored</span> <span class="keyword">as</span> orc TBLPROPERTIES (<span class="string">'transactional'</span>=<span class="string">'true'</span>);</span><br></pre></td></tr></table></figure>
<p>Â∞ÜË°®Âêç‰øÆÊîπ‰∏∫test_transaction</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> test_trancaction <span class="keyword">rename</span> <span class="keyword">to</span> test_transaction;</span><br></pre></td></tr></table></figure>
<p>2„ÄÅÂáÜÂ§áÊµãËØïÊï∞ÊçÆÔºåÂêëÊï∞ÊçÆÂ∫ì‰∏≠ÊèíÂÖ•Êï∞ÊçÆ</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_transaction <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">'peach'</span>),(<span class="number">2</span>,<span class="string">'peach2'</span>),(<span class="number">3</span>,<span class="string">'peach3'</span>),(<span class="number">4</span>,<span class="string">'peach4'</span>),(<span class="number">5</span>,<span class="string">'peach5'</span>);</span><br></pre></td></tr></table></figure>
<h5 id="Áî®‰æãÊµãËØï"><a href="#Áî®‰æãÊµãËØï" class="headerlink" title="Áî®‰æãÊµãËØï"></a>Áî®‰æãÊµãËØï</h5><p>1„ÄÅÊâßË°åupdateÊìç‰ΩúÔºåÂ∞Üuser_idÁöÑname‰øÆÊîπ‰∏∫peach_update</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> test_transaction <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'peach_update'</span> <span class="keyword">where</span> user_id=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>ÊâßË°å‰øÆÊîπÊìç‰ΩúÔºåÊü•ÁúãË°®Ëé∑ÂèñÈîÅÁ±ªÂûã</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121064139828.jpg" alt></p>
<p>Êï∞ÊçÆ‰øÆÊîπÊàêÂäüÔºå‰∏î‰∏çÂΩ±ÂìçÂÖ∂ÂÆÉÊï∞ÊçÆ„ÄÇ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121064271722.jpg" alt></p>
<p>2„ÄÅÂêåÊó∂‰øÆÊîπÂêå‰∏ÄÊù°Êï∞ÊçÆÔºåÂ∞Üuser_id‰∏∫1ÁöÑÁî®Êà∑ÂêçÂ≠ó‰øÆÊîπ‰∏∫peachÔºåÂè¶‰∏ÄÊù°sqlÂ∞ÜÂêçÂ≠ó‰øÆÊîπ‰∏∫peach_</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> test_transaction <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'peach'</span> <span class="keyword">where</span> user_id=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">update</span> test_transaction <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'peach_'</span> <span class="keyword">where</span> user_id=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>sqlÊâßË°åÈ°∫Â∫è‰∏∫peachÔºåÂÖ∂Ê¨°‰∏∫peach_</p>
<p>Ê≠§Êó∂Êü•ÁúãË°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121065743030.jpg" alt></p>
<p>ÈÄöËøáËé∑ÂèñÂà∞ÈîÅÂàÜÊûêÔºåÂú®ÂêåÊó∂‰øÆÊîπÂêå‰∏ÄÊù°Êï∞ÊçÆÊó∂Ôºå‰ºòÂÖàÊâßË°åÁöÑsqlËé∑ÂèñÂà∞‰∫ÜSHARED_WRITEÔºåËÄåÂêéÊâßË°åÁöÑsqlËé∑ÂèñÈîÅÁöÑÁä∂ÊÄÅ‰∏∫WAITINGÁä∂ÊÄÅÔºåË°®Á§∫ËøòÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÁ≠âÂæÖÁ¨¨‰∏ÄÊù°sqlÊâßË°åÁªìÊùüÂêéÊñπÂèØËé∑ÂèñÂà∞ÈîÅÂØπÊï∞ÊçÆËøõË°åÊìç‰Ωú„ÄÇ</p>
<p>ÈÄöËøá‰∏ä‰∏çÊâßË°åÊìç‰ΩúÂàÜÊûêÔºåÊï∞ÊçÆuser_id‰∏∫1ÁöÑÁî®Êà∑ÂêçÂ≠óÂ∫îË¢´‰øÆÊîπ‰∏∫peach_</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121065916525.jpg" alt></p>
<p>3„ÄÅÂêåÊó∂‰øÆÊîπ‰∏çÂêåÊï∞ÊçÆÔºå‰øÆÊîπid‰∏∫2ÁöÑname‰∏∫peachtestÔºå‰øÆÊîπid‰∏∫3ÁöÑname‰∏∫peach_test</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> test_transaction <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'peachtest'</span> <span class="keyword">where</span> user_id=<span class="number">2</span>; </span><br><span class="line"><span class="keyword">update</span> test_transaction <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'peach_test'</span> <span class="keyword">where</span> user_id=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>sqlÊâßË°åÈ°∫Â∫è‰∏∫peachtestÔºåÂÖ∂Ê¨°‰∏∫peach_test</p>
<p>Ê≠§Êó∂Êü•ÁúãË°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121066198138.jpg" alt></p>
<p>ÈÄöËøásqlÊìç‰ΩúËé∑ÂèñÈîÅÂàÜÊûêÔºåÂú®ÂêåÊó∂‰øÆÊîπ‰∏çÂêåÊï∞ÊçÆÊó∂Ôºå‰ºòÂÖàÊâßË°åÁöÑsqlËé∑ÂèñÂà∞‰∫ÜSHARED_WRITEÔºåËÄåÂêéÊâßË°åÁöÑsqlËé∑ÂèñÈîÅÁöÑÁä∂ÊÄÅ‰∏∫WAITINGÁä∂ÊÄÅÔºåË°®Á§∫ËøòÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÁ≠âÂæÖÁ¨¨‰∏ÄÊù°sqlÊâßË°åÁªìÊùüÂêéÊñπÂèØËé∑ÂèñÂà∞ÈîÅÂØπÊï∞ÊçÆËøõË°åÊìç‰Ωú„ÄÇ</p>
<p>4„ÄÅÊâßË°åselectÊìç‰ΩúÁöÑÂêåÊó∂ÊâßË°åinsertÊìç‰Ωú</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> test_transaction; </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> test_transaction <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">'peach3'</span>);</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>ÂÖàÊâßË°åselectÊìç‰ΩúÔºåÂÜçÊâßË°åinsertÊìç‰ΩúÔºåÊâßË°åÂÆåÊàêÂêéÊü•ÁúãË°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121066537536.jpg" alt></p>
<p>Áî±‰∫éselectÂíåinsertÊìç‰ΩúÂùáËé∑ÂèñÁöÑÊòØSHARED_READÈîÅÔºåËØªÈîÅ‰∏∫Âπ∂Ë°åÔºåÊâÄ‰ª•selectÊü•ËØ¢ÂíåinsertÂêåÊó∂ÊâßË°åÔºå‰∫í‰∏çÂΩ±Âìç„ÄÇ</p>
<p>5„ÄÅupdateÂêå‰∏ÄÊù°Êï∞ÊçÆÁöÑÂêåÊó∂selectËØ•Êù°Êï∞ÊçÆ</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> test_transaction <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'peach_update'</span> <span class="keyword">where</span> user_id=<span class="number">1</span>; <span class="keyword">select</span> * <span class="keyword">from</span></span><br><span class="line"> test_transaction <span class="keyword">where</span> user_id=<span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>ÂÖàÊâßË°åupdateÊìç‰ΩúÔºåÂÜçÊâßË°åselectÊìç‰ΩúÔºåËé∑ÂèñÊ≠§Êó∂Ë°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121066850801.jpg" alt></p>
<p>ÈÄöËøáËé∑ÂèñÈîÅÁöÑÊÉÖÂÜµÂàÜÊûêÔºå Âú®updateÊìç‰ΩúÊó∂ÔºåËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÊâßË°åselectÊìç‰ΩúÊó∂Ëé∑ÂèñÂà∞SHARED_READÈîÅÔºåÂú®ËøõË°å‰øÆÊîπÊï∞ÊçÆÊó∂Êú™ÈòªÂ°ûselectÊü•ËØ¢Êìç‰ΩúÔºåupdateÊú™ÊâßË°åÂÆåÊàêÊó∂ÔºåselectÊü•ËØ¢Âà∞ÁöÑÊï∞ÊçÆ‰∏∫Êú™‰øÆÊîπÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>6„ÄÅÊâßË°ådeleteÊìç‰ΩúÔºåÂ∞Üuser_id‰∏∫3ÁöÑÊï∞ÊçÆÂà†Èô§</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_transaction <span class="keyword">where</span> user_id=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>ÊâßË°ådeleteÊìç‰ΩúÔºåËé∑ÂèñÊ≠§Êó∂Ë°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121067134496.jpg" alt></p>
<p>Âà†Èô§Êìç‰ΩúËé∑ÂèñÂà∞ÁöÑÊòØSHARED_WRITEÈîÅ</p>
<p>ÊâßË°åÊàêÂäüÂêéÊï∞ÊçÆ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121067318880.jpg" alt></p>
<p>7„ÄÅÂêåÊó∂deleteÂêå‰∏ÄÊù°Êï∞ÊçÆ</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_transaction <span class="keyword">where</span> user_id=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_transaction <span class="keyword">where</span> user_id=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>ÊåâÈ°∫Â∫èÊâßË°å‰∏§Êù°deleteÊìç‰ΩúÔºåÊü•ÁúãÊ≠§Êó∂Ë°®Ëé∑ÂèñÂà∞ÁöÑÈîÅÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121067593291.jpg" alt></p>
<p>ÈÄöËøáÊü•ÁúãdeleteÊìç‰ΩúËé∑ÂèñÂà∞ÁöÑÈîÅÔºå‰ºòÂÖàÊâßË°åÁöÑÊìç‰ΩúËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂêéÊâßË°åÁöÑdeleteÊìç‰ΩúÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂ§Ñ‰∫éWAITINGÁä∂ÊÄÅ„ÄÇ</p>
<p>ÊâßË°åÂà†Èô§ÂêéÁªìÊûú</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121067832545.jpg" alt></p>
<p>8„ÄÅÂêåÊó∂delete‰∏§Êù°‰∏çÂêåÁöÑÊï∞ÊçÆ</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_transaction <span class="keyword">where</span> user_id=<span class="number">1</span>; </span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_transaction <span class="keyword">where</span> user_id=<span class="number">5</span>;</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>ÊåâÈ°∫Â∫èÊâßË°å‰∏§Êù°deleteÊìç‰ΩúÔºåÊü•ÁúãÊ≠§Êó∂Ë°®Ëé∑ÂèñÂà∞ÁöÑÈîÅÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121068192695.jpg" alt></p>
<p>ÈÄöËøáÊü•ÁúãdeleteÊìç‰ΩúËé∑ÂèñÂà∞ÁöÑÈîÅÔºå‰ºòÂÖàÊâßË°åÁöÑÊìç‰ΩúËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂêéÊâßË°åÁöÑdeleteÊìç‰ΩúÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂ§Ñ‰∫éWAITINGÁä∂ÊÄÅ„ÄÇ</p>
<p>ÊâßË°åÂà†Èô§ÂêéÁªìÊûú</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121068364921.jpg" alt></p>
<p>9„ÄÅÊâßË°ådeleteÁöÑÂêåÊó∂ÂØπÂà†Èô§ÁöÑÊï∞ÊçÆËøõË°åupdateÊìç‰Ωú</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_transaction <span class="keyword">where</span> user_id=<span class="number">3</span>; </span><br><span class="line"><span class="keyword">update</span> test_transaction <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'test'</span> <span class="keyword">where</span> user_id=<span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>ÊåâÈ°∫Â∫èÊâßË°å‰∏§Êù°sqlÔºåÊü•ÁúãÊ≠§Êó∂Ëé∑ÂèñÂà∞Ë°®ÁöÑÈîÅÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121068639301.jpg" alt></p>
<p>ÈÄöËøáÊü•ÁúãdeleteÂíåupdateÊìç‰ΩúËé∑ÂèñÂà∞ÁöÑÈîÅÔºå‰ºòÂÖàÊâßË°åÁöÑÊìç‰ΩúËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂêéÊâßË°åÁöÑÊìç‰ΩúÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂ§Ñ‰∫éWAITINGÁä∂ÊÄÅ„ÄÇ</p>
<p>ÊâßË°ådeleteÂíåupdateÂêéÁªìÊûú</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121068852336.jpg" alt></p>
<p><strong>Ê≥®ÊÑè</strong>ÔºöÊ≠§Â§ÑÂú®delete‰ºòÂÖà‰∫éupdateÊâßË°åÔºå‰ΩÜÊâßË°åÁªìÊûú‰∏∫updateÁöÑÁªìÊûúÔºåÊâßË°åÂºÇÂ∏∏„ÄÇ</p>
<p>10„ÄÅÊâßË°ådeleteÁöÑÂêåÊó∂ÂØπ‰∏çÂêåÁöÑÊï∞ÊçÆËøõË°åupdateÊìç‰Ωú</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_transaction <span class="keyword">where</span> user_id=<span class="number">2</span>; </span><br><span class="line"><span class="keyword">update</span> test_transaction <span class="keyword">set</span> <span class="keyword">name</span>=<span class="string">'test'</span> <span class="keyword">where</span> user_id=<span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>ÊåâÈ°∫Â∫èÊâßË°å‰∏äÈù¢‰∏§Êù°sqlÔºåÊü•ÁúãË°®ÈîÅËé∑ÂèñÊÉÖÂÜµ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121069199763.jpg" alt></p>
<p>ÈÄöËøáÊü•ÁúãdeleteÂíåupdateÊìç‰ΩúËé∑ÂèñÂà∞ÁöÑÈîÅÔºå‰ºòÂÖàÊâßË°åÁöÑÊìç‰ΩúËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂêéÊâßË°åÁöÑÊìç‰ΩúÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂ§Ñ‰∫éWAITINGÁä∂ÊÄÅ„ÄÇ</p>
<p>ÊâßË°ådeleteÂíåupdateÂêéÁªìÊûú,ÊâßË°åÁªìÊûúÊ≠£Â∏∏</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121069373565.jpg" alt></p>
<p>11„ÄÅÊâßË°ådeleteÁöÑÂêåÊó∂ÊâßË°åselectÊìç‰Ωú</p>
<p>sqlËØ≠Âè•Ôºö</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> test_transaction <span class="keyword">where</span> user_id=<span class="number">4</span>; </span><br><span class="line"><span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">from</span> test_transaction;</span><br></pre></td></tr></table></figure>
<p>Ê≠•È™§Ôºö</p>
<p>ÊåâÈ°∫Â∫èÊâßË°å‰∏äÈù¢‰∏§Êù°sqlÔºåÊü•ÁúãË°®ÈîÅËé∑ÂèñÊÉÖÂÜµ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15121069645501.jpg" alt></p>
<p>Âú®Êìç‰ΩúdeleteÁöÑÂêåÊó∂ÊâßË°åselectÊìç‰ΩúÔºå‰∏§‰∏™Êìç‰ΩúÂùáÂêåÊó∂Ëé∑ÂèñÂà∞SHARED_REDÂíåSHARED_WRITEÈîÅÔºåÊìç‰ΩúÂπ∂Ë°åËøõË°åÊú™Âá∫Áé∞ÈòªÂ°û„ÄÇ<br><div class="note info"><h2 id="ÊÄªÁªìÂØπÊØî"><a href="#ÊÄªÁªìÂØπÊØî" class="headerlink" title="ÊÄªÁªìÂØπÊØî"></a>ÊÄªÁªìÂØπÊØî</h2></div><br><img src="http://oliji9s3j.bkt.clouddn.com/15121077401844.jpg" alt><br><div class="note info"><h2 id="Hive‰∫ãÂä°‰ΩøÁî®Âª∫ËÆÆ"><a href="#Hive‰∫ãÂä°‰ΩøÁî®Âª∫ËÆÆ" class="headerlink" title="Hive‰∫ãÂä°‰ΩøÁî®Âª∫ËÆÆ"></a>Hive‰∫ãÂä°‰ΩøÁî®Âª∫ËÆÆ</h2></div></p>
<ol>
<li>‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∏≠Êúâ‰∏âÁßçÊ®°ÂûãÈöêÂºè‰∫ãÂä°„ÄÅÊòæÁ§∫‰∫ãÂä°ÂíåËá™Âä®‰∫ãÂä°„ÄÇÂú®ÁõÆÂâçHiveÂØπ‰∫ãÂä°‰ªÖÊîØÊåÅËá™Âä®‰∫ãÂä°ÔºåÂõ†Ê≠§HiveÊó†Ê≥ïÈÄöËøáÊòæÁ§∫‰∫ãÂä°ÁöÑÊñπÂºèÂØπ‰∏Ä‰∏™Êìç‰ΩúÂ∫èÂàóËøõË°å‰∫ãÂä°ÊéßÂà∂„ÄÇ</li>
<li>‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∫ãÂä°Âú®ÈÅáÂà∞ÂºÇÂ∏∏ÊÉÖÂÜµÂèØËá™Âä®ËøõË°åÂõûÊªöÔºåÁõÆÂâçHiveÊó†Ê≥ïÊîØÊåÅROLLBACK„ÄÇ</li>
<li>‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∏≠ÊîØÊåÅ‰∫ãÂä°Âπ∂ÂèëÔºåËÄåHiveÂØπ‰∫ãÂä°Êó†Ê≥ïÂÅöÂà∞ÂÆåÂÖ®Âπ∂ÂèëÊéßÂà∂,Â§ö‰∏™Êìç‰ΩúÂùáÈúÄË¶ÅËé∑ÂèñWRITEÁöÑÊó∂ÂÄôÂàôËøô‰∫õÊìç‰Ωú‰∏∫‰∏≤Ë°åÊ®°ÂºèÊâßË°åÔºàÂú®ÊµãËØïÁî®‰æã‰∏≠‚ÄùdeleteÂêå‰∏ÄÊù°Êï∞ÊçÆÁöÑÂêåÊó∂updateËØ•Êï∞ÊçÆ‚ÄùÔºåÊìç‰ΩúÊòØ‰∏≤Ë°åÁöÑ‰∏îÊìç‰ΩúÂÆåÊàêÂêéÊï∞ÊçÆÊú™Ë¢´Âà†Èô§‰∏îÊï∞ÊçÆË¢´‰øÆÊîπÔºâÊú™‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄß„ÄÇ</li>
<li>HiveÁöÑ‰∫ãÂä°ÂäüËÉΩÂ∞öÂ±û‰∫éÂÆûÈ™åÂÆ§ÂäüËÉΩÔºåÂπ∂‰∏çÂª∫ËÆÆÁî®Êà∑Áõ¥Êé•‰∏äÁîü‰∫ßÁ≥ªÁªüÔºåÂõ†‰∏∫ÁõÆÂâçÂÆÉËøòÊúâËØ∏Â§öÁöÑÈôêÂà∂ÔºåÂ¶ÇÂè™ÊîØÊåÅORCÊñá‰ª∂Ê†ºÂºèÔºåÂª∫Ë°®ÂøÖÈ°ªÂàÜÊ°∂Á≠âÔºå‰ΩøÁî®Ëµ∑Êù•Ê≤°ÊúâÈÇ£‰πàÊñπ‰æøÔºåÂè¶Â§ñËØ•ÂäüËÉΩÁöÑÁ®≥ÂÆöÊÄßËøòÊúâÂæÖËøõ‰∏ÄÊ≠•È™åËØÅ„ÄÇ</li>
<li>CDHÈªòËÆ§ÂºÄÂêØ‰∫ÜHiveÁöÑConcurrencyÂäüËÉΩÔºå‰∏ªË¶ÅÊòØÂØπÂπ∂ÂèëËØªÂÜôÁöÑÁöÑÊó∂ÂÄôÈÄöËøáÈîÅËøõË°å‰∫ÜÊéßÂà∂„ÄÇÊâÄ‰ª•‰∏∫‰∫ÜÈò≤Ê≠¢Áî®Êà∑Âú®‰ΩøÁî®HiveÁöÑÊó∂ÂÄôÔºåÊä•ÈîôÊèêÁ§∫ËØ•Ë°®Â∑≤ÁªèË¢´lockÔºåÂØπ‰∫éÁî®Êà∑Êù•ËØ¥‰∏çÂèãÂ•ΩÔºåÂª∫ËÆÆÂú®‰∏öÂä°‰æßÊéßÂà∂‰∏Ä‰∏ãÂÜôÂÖ•ÂíåËØªÂèñÔºåÊØîÂ¶ÇÂÜôÂÖ•Âêå‰∏Ä‰∏™tableÊàñËÄÖpartitionÁöÑÊó∂ÂÄô‰øùËØÅÊòØÂçï‰ªªÂä°ÂÜôÂÖ•ÔºåÂÖ∂‰ªñÂÜôÂÖ•ÈúÄÊéßÂà∂ÂÜôÂÆåÁ¨¨‰∏Ä‰∏™‰ªªÂä°‰∫ÜÔºåÂêéÈù¢ÊâçÁªßÁª≠ÂÜôÔºåÂπ∂‰∏îÊéßÂà∂Âú®ÂÜôÁöÑÊó∂ÂÄô‰∏çËÆ©Áî®Êà∑ËøõË°åÊü•ËØ¢„ÄÇÂè¶Â§ñÈúÄË¶ÅÊéßÂà∂Âú®Êü•ËØ¢ÁöÑÊó∂ÂÄô‰∏çË¶ÅÂÖÅËÆ∏ÊúâÂÜôÂÖ•Êìç‰Ωú„ÄÇ</li>
<li>Â¶ÇÊûúÂØπ‰∫éÊï∞ÊçÆ‰∏ÄËá¥ÊÄß‰∏çÂú®‰πéÔºåÂèØ‰ª•ÂÆåÂÖ®ÂÖ≥Èó≠HiveÁöÑConcurrencyÂäüËÉΩÂÖ≥Èó≠ÔºåÂç≥ËÆæÁΩÆhive.support.concurrency‰∏∫falseÔºåËøôÊ†∑HiveÁöÑÂπ∂ÂèëËØªÂÜôÂ∞ÜÊ≤°Êúâ‰ªª‰ΩïÈôêÂà∂„ÄÇ</li>
</ol>
]]></content>
      
        <categories>
            
            <category> hive </category>
            
        </categories>
        
        
        <tags>
            
            <tag> hive </tag>
            
            <tag> acid </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[SparkSQL-Catalyst‰ºòÂåñÁêÜËß£]]></title>
      <url>https://stanxia.github.io/2017/11/30/SparkSQL-Catalyst%E4%BC%98%E5%8C%96%E7%90%86%E8%A7%A3/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2></div>
<p>Êú¨Êñá‰∏ªË¶Å‰ªãÁªçSparkSQLÁöÑ‰ºòÂåñÂô®Á≥ªÁªüCatalystÔºåÂÖ∂ËÆæËÆ°ÊÄùË∑ØÂü∫Êú¨ÈÉΩÊù•Ëá™‰∫é‰º†ÁªüÂûãÊï∞ÊçÆÂ∫ìÔºåËÄå‰∏îÂíåÂ§ßÂ§öÊï∞ÂΩìÂâçÁöÑÂ§ßÊï∞ÊçÆSQLÂ§ÑÁêÜÂºïÊìéËÆæËÆ°Âü∫Êú¨Áõ∏ÂêåÔºàImpala„ÄÅPresto„ÄÅHiveÔºàCalciteÔºâÁ≠âÔºâ„ÄÇ</p>
<p>SQL‰ºòÂåñÂô®Ê†∏ÂøÉÊâßË°åÁ≠ñÁï•‰∏ªË¶ÅÂàÜ‰∏∫‰∏§‰∏™Â§ßÁöÑÊñπÂêëÔºö</p>
<ol>
<li>Âü∫‰∫éËßÑÂàô‰ºòÂåñÔºàRBOÔºâÔºöÊòØ‰∏ÄÁßçÁªèÈ™åÂºè„ÄÅÂêØÂèëÂºèÂú∞‰ºòÂåñÊÄùË∑ØÔºåÊõ¥Â§öÂú∞‰æùÈù†ÂâçËæàÊÄªÁªìÂá∫Êù•ÁöÑ‰ºòÂåñËßÑÂàôÔºåÁÆÄÂçïÊòìË°å‰∏îËÉΩÂ§üË¶ÜÁõñÂà∞Â§ßÈÉ®ÂàÜ‰ºòÂåñÈÄªËæëÔºå‰ΩÜÊòØÂØπ‰∫éÊ†∏ÂøÉ‰ºòÂåñÁÆóÂ≠êJoinÂç¥ÊòæÂæóÊúâÁÇπÂäõ‰∏ç‰ªéÂøÉ„ÄÇ</li>
<li>Âü∫‰∫é‰ª£‰ª∑‰ºòÂåñ (CBO)ÔºöÊ†πÊçÆ‰ª£‰ª∑‰º∞ÁÆóÁ°ÆÂÆö‰∏ÄÁßç‰ª£‰ª∑ÊúÄÂ∞èÁöÑÊñπÊ°à„ÄÇ</li>
</ol>
<p>‰∏æ‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºå‰∏§‰∏™Ë°®ÊâßË°åJoinÂà∞Â∫ïÂ∫îËØ•‰ΩøÁî®BroadcastHashJoinËøòÊòØSortMergeJoinÔºüÂΩìÂâçSparkSQLÁöÑÊñπÂºèÊòØÈÄöËøáÊâãÂ∑•ËÆæÂÆöÂèÇÊï∞Êù•Á°ÆÂÆöÔºåÂ¶ÇÊûú‰∏Ä‰∏™Ë°®ÁöÑÊï∞ÊçÆÈáèÂ∞è‰∫éËøô‰∏™ÂÄºÂ∞±‰ΩøÁî®BroadcastHashJoinÔºå‰ΩÜÊòØËøôÁßçÊñπÊ°àÊòæÂæóÂæà‰∏ç‰ºòÈõÖÔºåÂæà‰∏çÁÅµÊ¥ª„ÄÇÂü∫‰∫é‰ª£‰ª∑‰ºòÂåñÂ∞±ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ËøôÁ±ªÈóÆÈ¢òÔºåÂÆÉ‰ºöÈíàÂØπÊØè‰∏™JoinËØÑ‰º∞ÂΩìÂâç‰∏§Âº†Ë°®‰ΩøÁî®ÊØèÁßçJoinÁ≠ñÁï•ÁöÑ‰ª£‰ª∑ÔºåÊ†πÊçÆ‰ª£‰ª∑‰º∞ÁÆóÁ°ÆÂÆö‰∏ÄÁßç‰ª£‰ª∑ÊúÄÂ∞èÁöÑÊñπÊ°à„ÄÇ</p>
<a id="more"></a>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120193767483.jpg" alt><br><div class="note info"><h2 id="Tree-amp-Rule"><a href="#Tree-amp-Rule" class="headerlink" title="Tree&amp;Rule"></a>Tree&amp;Rule</h2></div><br>Âú®‰ªãÁªçSQL‰ºòÂåñÂô®Â∑•‰ΩúÂéüÁêÜ‰πãÂâçÔºåÊúâÂøÖË¶ÅÈ¶ñÂÖà‰ªãÁªç‰∏§‰∏™ÈáçË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑÔºöTreeÂíåRule„ÄÇSQLËØ≠Ê≥ïÊ†ëÂ∞±ÊòØSQLËØ≠Âè•ÈÄöËøáÁºñËØëÂô®‰πãÂêé‰ºöË¢´Ëß£ÊûêÊàê‰∏ÄÊ£µÊ†ëÁä∂ÁªìÊûÑ„ÄÇËøôÊ£µÊ†ë‰ºöÂåÖÂê´ÂæàÂ§öËäÇÁÇπÂØπË±°ÔºåÊØè‰∏™ËäÇÁÇπÈÉΩÊã•ÊúâÁâπÂÆöÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂêåÊó∂‰ºöÊúâ0‰∏™ÊàñÂ§ö‰∏™Â≠©Â≠êËäÇÁÇπÔºàËäÇÁÇπÂØπË±°Âú®‰ª£Á†Å‰∏≠ÂÆö‰πâ‰∏∫TreeNodeÂØπË±°ÔºâÔºå‰∏ãÂõæÊòØ‰∏™ÁÆÄÂçïÁöÑÁ§∫‰æãÔºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15120194433988.jpg" alt><br>Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÁÆ≠Â§¥Â∑¶ËæπË°®ËææÂºèÊúâ3ÁßçÊï∞ÊçÆÁ±ªÂûãÔºàLiteralË°®Á§∫Â∏∏Èáè„ÄÅAttributeË°®Á§∫ÂèòÈáè„ÄÅAddË°®Á§∫Âä®‰ΩúÔºâÔºåË°®Á§∫x+(1+2)„ÄÇÊò†Â∞ÑÂà∞Âè≥ËæπÊ†ëÁä∂ÁªìÊûÑÂêéÔºåÊØè‰∏ÄÁßçÊï∞ÊçÆÁ±ªÂûãÂ∞±‰ºöÂèòÊàê‰∏Ä‰∏™ËäÇÁÇπ„ÄÇÂè¶Â§ñÔºåTreeËøòÊúâ‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÁâπÊÄßÔºåÂèØ‰ª•ÈÄöËøá‰∏ÄÂÆöÁöÑËßÑÂàôËøõË°åÁ≠â‰ª∑ÂèòÊç¢ÔºåÂ¶Ç‰∏ãÂõæÔºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15120194660866.jpg" alt></p>
<p>‰∏äÂõæÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Á≠â‰ª∑ÂèòÊç¢ËßÑÂàô(Rule)Ôºö‰∏§‰∏™IntegerÁ±ªÂûãÁöÑÂ∏∏ÈáèÁõ∏Âä†ÂèØ‰ª•Á≠â‰ª∑ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™IntegerÂ∏∏ÈáèÔºåËøô‰∏™ËßÑÂàôÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÂØπ‰∫é‰∏äÊñá‰∏≠ÊèêÂà∞ÁöÑË°®ËææÂºèx+(1+2)Êù•ËØ¥Â∞±ÂèØ‰ª•ËΩ¨Âèò‰∏∫x+3„ÄÇÂØπ‰∫éÁ®ãÂ∫èÊù•ËÆ≤ÔºåÂ¶Ç‰ΩïÊâæÂà∞‰∏§‰∏™IntegerÂ∏∏ÈáèÂë¢ÔºüÂÖ∂ÂÆûÂ∞±ÊòØÁÆÄÂçïÁöÑ‰∫åÂèâÊ†ëÈÅçÂéÜÁÆóÊ≥ïÔºåÊØèÈÅçÂéÜÂà∞‰∏Ä‰∏™ËäÇÁÇπÔºåÂ∞±Ê®°ÂºèÂåπÈÖçÂΩìÂâçËäÇÁÇπ‰∏∫Add„ÄÅÂ∑¶Âè≥Â≠êËäÇÁÇπÊòØIntegerÂ∏∏ÈáèÁöÑÁªìÊûÑÔºåÂÆö‰ΩçÂà∞‰πãÂêéÂ∞ÜÊ≠§‰∏â‰∏™ËäÇÁÇπÊõøÊç¢‰∏∫‰∏Ä‰∏™LiteralÁ±ªÂûãÁöÑËäÇÁÇπ„ÄÇ</p>
<p>‰∏äÈù¢Áî®‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÁ§∫‰æãÊù•ËØ¥ÊòéÁ≠â‰ª∑ÂèòÊç¢ËßÑÂàô‰ª•ÂèäÂ¶Ç‰ΩïÂ∞ÜËßÑÂàôÂ∫îÁî®‰∫éËØ≠Ê≥ïÊ†ë„ÄÇÂú®‰ªª‰Ωï‰∏Ä‰∏™SQL‰ºòÂåñÂô®‰∏≠ÔºåÈÄöÂ∏∏‰ºöÂÆö‰πâÂ§ßÈáèÁöÑRuleÔºàÂêéÈù¢‰ºöËÆ≤Âà∞ÔºâÔºåSQL‰ºòÂåñÂô®‰ºöÈÅçÂéÜËØ≠Ê≥ïÊ†ë‰∏≠ÊØè‰∏™ËäÇÁÇπÔºåÈíàÂØπÈÅçÂéÜÂà∞ÁöÑËäÇÁÇπÊ®°ÂºèÂåπÈÖçÊâÄÊúâÁªôÂÆöËßÑÂàôÔºàRuleÔºâÔºåÂ¶ÇÊûúÊúâÂåπÈÖçÊàêÂäüÁöÑÔºåÂ∞±ËøõË°åÁõ∏Â∫îËΩ¨Êç¢ÔºåÂ¶ÇÊûúÊâÄÊúâËßÑÂàôÈÉΩÂåπÈÖçÂ§±Ë¥•ÔºåÂ∞±ÁªßÁª≠ÈÅçÂéÜ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ„ÄÇ<br><div class="note info"><h2 id="CatalystÂ∑•‰ΩúÊµÅÁ®ã"><a href="#CatalystÂ∑•‰ΩúÊµÅÁ®ã" class="headerlink" title="CatalystÂ∑•‰ΩúÊµÅÁ®ã"></a>CatalystÂ∑•‰ΩúÊµÅÁ®ã</h2></div><br>‰ªª‰Ωï‰∏Ä‰∏™‰ºòÂåñÂô®Â∑•‰ΩúÂéüÁêÜÈÉΩÂ§ßÂêåÂ∞èÂºÇÔºöSQLËØ≠Âè•È¶ñÂÖàÈÄöËøáParserÊ®°ÂùóË¢´Ëß£Êûê‰∏∫ËØ≠Ê≥ïÊ†ëÔºåÊ≠§Ê£µÊ†ëÁß∞‰∏∫Unresolved Logical PlanÔºõUnresolved Logical PlanÈÄöËøáAnalyzerÊ®°ÂùóÂÄüÂä©‰∫éÊï∞ÊçÆÂÖÉÊï∞ÊçÆËß£Êûê‰∏∫Logical PlanÔºõÊ≠§Êó∂ÂÜçÈÄöËøáÂêÑÁßçÂü∫‰∫éËßÑÂàôÁöÑ‰ºòÂåñÁ≠ñÁï•ËøõË°åÊ∑±ÂÖ•‰ºòÂåñÔºåÂæóÂà∞Optimized Logical PlanÔºõ‰ºòÂåñÂêéÁöÑÈÄªËæëÊâßË°åËÆ°Âàí‰æùÁÑ∂ÊòØÈÄªËæëÁöÑÔºåÂπ∂‰∏çËÉΩË¢´SparkÁ≥ªÁªüÁêÜËß£ÔºåÊ≠§Êó∂ÈúÄË¶ÅÂ∞ÜÊ≠§ÈÄªËæëÊâßË°åËÆ°ÂàíËΩ¨Êç¢‰∏∫Physical PlanÔºõ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÂØπÊï¥‰∏™ËøáÁ®ãËøõË°åÁêÜËß£Ôºå‰∏ãÊñáÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁ§∫‰æãËøõË°åËß£Èáä„ÄÇ</p>
<h3 id="Parser"><a href="#Parser" class="headerlink" title="Parser"></a>Parser</h3><p>ParserÁÆÄÂçïÊù•ËØ¥ÊòØÂ∞ÜSQLÂ≠óÁ¨¶‰∏≤ÂàáÂàÜÊàê‰∏Ä‰∏™‰∏Ä‰∏™TokenÔºåÂÜçÊ†πÊçÆ‰∏ÄÂÆöËØ≠‰πâËßÑÂàôËß£Êûê‰∏∫‰∏ÄÊ£µËØ≠Ê≥ïÊ†ë„ÄÇParserÊ®°ÂùóÁõÆÂâçÂü∫Êú¨ÈÉΩ‰ΩøÁî®Á¨¨‰∏âÊñπÁ±ªÂ∫ìANTLRËøõË°åÂÆûÁé∞ÔºåÊØîÂ¶ÇHive„ÄÅ Presto„ÄÅSparkSQLÁ≠â„ÄÇ‰∏ãÂõæÊòØ‰∏Ä‰∏™Á§∫‰æãÊÄßÁöÑSQLËØ≠Âè•ÔºàÊúâ‰∏§Âº†Ë°®ÔºåÂÖ∂‰∏≠peopleË°®‰∏ªË¶ÅÂ≠òÂÇ®Áî®Êà∑Âü∫Êú¨‰ø°ÊÅØÔºåscoreË°®Â≠òÂÇ®Áî®Êà∑ÁöÑÂêÑÁßçÊàêÁª©ÔºâÔºåÈÄöËøáParserËß£ÊûêÂêéÁöÑASTËØ≠Ê≥ïÊ†ëÂ¶ÇÂõæÊâÄÁ§∫Ôºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15120196105832.jpg" alt></p>
<h3 id="Analyzer"><a href="#Analyzer" class="headerlink" title="Analyzer"></a>Analyzer</h3><p>ÈÄöËøáËß£ÊûêÂêéÁöÑÈÄªËæëÊâßË°åËÆ°ÂàíÂü∫Êú¨Êúâ‰∫ÜÈ™®Êû∂Ôºå‰ΩÜÊòØÁ≥ªÁªüÂπ∂‰∏çÁü•ÈÅìscore„ÄÅsumËøô‰∫õÈÉΩÊòØ‰∫õ‰ªÄ‰πàÈ¨ºÔºåÊ≠§Êó∂ÈúÄË¶ÅÂü∫Êú¨ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÊù•Ë°®ËææËøô‰∫õËØçÁ¥†ÔºåÊúÄÈáçË¶ÅÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ‰∏ªË¶ÅÂåÖÊã¨‰∏§ÈÉ®ÂàÜÔºöË°®ÁöÑSchemeÂíåÂü∫Êú¨ÂáΩÊï∞‰ø°ÊÅØÔºåË°®ÁöÑscheme‰∏ªË¶ÅÂåÖÊã¨Ë°®ÁöÑÂü∫Êú¨ÂÆö‰πâÔºàÂàóÂêç„ÄÅÊï∞ÊçÆÁ±ªÂûãÔºâ„ÄÅË°®ÁöÑÊï∞ÊçÆÊ†ºÂºèÔºàJson„ÄÅTextÔºâ„ÄÅË°®ÁöÑÁâ©ÁêÜ‰ΩçÁΩÆÁ≠âÔºåÂü∫Êú¨ÂáΩÊï∞‰ø°ÊÅØ‰∏ªË¶ÅÊåáÁ±ª‰ø°ÊÅØ„ÄÇ</p>
<p>Analyzer‰ºöÂÜçÊ¨°ÈÅçÂéÜÊï¥‰∏™ËØ≠Ê≥ïÊ†ëÔºåÂØπÊ†ë‰∏äÁöÑÊØè‰∏™ËäÇÁÇπËøõË°åÊï∞ÊçÆÁ±ªÂûãÁªëÂÆö‰ª•ÂèäÂáΩÊï∞ÁªëÂÆöÔºåÊØîÂ¶ÇpeopleËØçÁ¥†‰ºöÊ†πÊçÆÂÖÉÊï∞ÊçÆË°®‰ø°ÊÅØËß£Êûê‰∏∫ÂåÖÂê´age„ÄÅid‰ª•Âèäname‰∏âÂàóÁöÑË°®Ôºåpeople.age‰ºöË¢´Ëß£Êûê‰∏∫Êï∞ÊçÆÁ±ªÂûã‰∏∫intÁöÑÂèòÈáèÔºåsum‰ºöË¢´Ëß£Êûê‰∏∫ÁâπÂÆöÁöÑËÅöÂêàÂáΩÊï∞ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15120196532182.jpg" alt></p>
<p>SparkSQL‰∏≠AnalyzerÂÆö‰πâ‰∫ÜÂêÑÁßçËß£ÊûêËßÑÂàôÔºåÂèØ‰ª•Êü•ÁúãAnalyzerÁ±ªÔºåÂÖ∂‰∏≠ÂÆö‰πâ‰∫ÜÂü∫Êú¨ÁöÑËß£ÊûêËßÑÂàôÔºåÂ¶Ç‰∏ãÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120196892326.jpg" alt></p>
<h3 id="Optimizer"><a href="#Optimizer" class="headerlink" title="Optimizer"></a>Optimizer</h3><p>‰ºòÂåñÂô®ÊòØÊï¥‰∏™CatalystÁöÑÊ†∏ÂøÉÔºå‰∏äÊñáÊèêÂà∞‰ºòÂåñÂô®ÂàÜ‰∏∫Âü∫‰∫éËßÑÂàô‰ºòÂåñÂíåÂü∫‰∫é‰ª£‰ª∑‰ºòÂåñ‰∏§ÁßçÔºåÂΩìÂâçSparkSQL 2.1‰æùÁÑ∂Ê≤°ÊúâÂæàÂ•ΩÁöÑÊîØÊåÅÂü∫‰∫é‰ª£‰ª∑‰ºòÂåñÔºåÊ≠§Â§ÑÂè™‰ªãÁªçÂü∫‰∫éËßÑÂàôÁöÑ‰ºòÂåñÁ≠ñÁï•ÔºåÂü∫‰∫éËßÑÂàôÁöÑ‰ºòÂåñÁ≠ñÁï•ÂÆûÈôÖ‰∏äÂ∞±ÊòØÂØπËØ≠Ê≥ïÊ†ëËøõË°å‰∏ÄÊ¨°ÈÅçÂéÜÔºåÊ®°ÂºèÂåπÈÖçËÉΩÂ§üÊª°Ë∂≥ÁâπÂÆöËßÑÂàôÁöÑËäÇÁÇπÔºåÂÜçËøõË°åÁõ∏Â∫îÁöÑÁ≠â‰ª∑ËΩ¨Êç¢„ÄÇÂõ†Ê≠§ÔºåÂü∫‰∫éËßÑÂàô‰ºòÂåñËØ¥Âà∞Â∫ïÂ∞±ÊòØ‰∏ÄÊ£µÊ†ëÁ≠â‰ª∑Âú∞ËΩ¨Êç¢‰∏∫Âè¶‰∏ÄÊ£µÊ†ë„ÄÇSQL‰∏≠ÁªèÂÖ∏ÁöÑ‰ºòÂåñËßÑÂàôÊúâÂæàÂ§öÔºå‰∏ãÊñáÁªìÂêàÁ§∫‰æã‰ªãÁªç‰∏âÁßçÊØîËæÉÂ∏∏ËßÅÁöÑËßÑÂàôÔºö</p>
<ol>
<li>Ë∞ìËØç‰∏ãÊé®ÔºàPredicate PushdownÔºâ</li>
<li>Â∏∏ÈáèÁ¥ØÂä†ÔºàConstant FoldingÔºâ</li>
<li>ÂàóÂÄºË£ÅÂâ™ÔºàColumn PruningÔºâ</li>
</ol>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120197859386.jpg" alt></p>
<p>‰∏äÂõæÂ∑¶ËæπÊòØÁªèËøáAnalyzerËß£ÊûêÂêéÁöÑËØ≠Ê≥ïÊ†ëÔºåËØ≠Ê≥ïÊ†ë‰∏≠‰∏§‰∏™Ë°®ÂÖàÂÅöjoinÔºå‰πãÂêéÂÜç‰ΩøÁî®age&gt;10ÂØπÁªìÊûúËøõË°åËøáÊª§„ÄÇÂ§ßÂÆ∂Áü•ÈÅìjoinÁÆóÂ≠êÈÄöÂ∏∏ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ËÄóÊó∂ÁöÑÁÆóÂ≠êÔºåËÄóÊó∂Â§öÂ∞ë‰∏ÄËà¨ÂèñÂÜ≥‰∫éÂèÇ‰∏éjoinÁöÑ‰∏§‰∏™Ë°®ÁöÑÂ§ßÂ∞èÔºåÂ¶ÇÊûúËÉΩÂ§üÂáèÂ∞ëÂèÇ‰∏éjoin‰∏§Ë°®ÁöÑÂ§ßÂ∞èÔºåÂ∞±ÂèØ‰ª•Â§ßÂ§ßÈôç‰ΩéjoinÁÆóÂ≠êÊâÄÈúÄÊó∂Èó¥„ÄÇË∞ìËØç‰∏ãÊé®Â∞±ÊòØËøôÊ†∑‰∏ÄÁßçÂäüËÉΩÔºåÂÆÉ‰ºöÂ∞ÜËøáÊª§Êìç‰Ωú‰∏ãÊé®Âà∞join‰πãÂâçËøõË°åÔºå‰∏äÂõæ‰∏≠ËøáÊª§Êù°‰ª∂age&gt;0‰ª•Âèäid!=null‰∏§‰∏™Êù°‰ª∂Â∞±ÂàÜÂà´‰∏ãÊé®Âà∞‰∫Üjoin‰πãÂâç„ÄÇËøôÊ†∑ÔºåÁ≥ªÁªüÂú®Êâ´ÊèèÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ∞±ÂØπÊï∞ÊçÆËøõË°å‰∫ÜËøáÊª§ÔºåÂèÇ‰∏éjoinÁöÑÊï∞ÊçÆÈáèÂ∞Ü‰ºöÂæóÂà∞ÊòæËëóÁöÑÂáèÂ∞ëÔºåjoinËÄóÊó∂ÂøÖÁÑ∂‰πü‰ºöÈôç‰Ωé„ÄÇ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120198070875.jpg" alt></p>
<p>Â∏∏ÈáèÁ¥ØÂä†ÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÂ∞±ÊòØ‰∏äÊñá‰∏≠ÊèêÂà∞ÁöÑËßÑÂàô  x+(1+2)  -&gt; x+3ÔºåËôΩÁÑ∂ÊòØ‰∏Ä‰∏™ÂæàÂ∞èÁöÑÊîπÂä®Ôºå‰ΩÜÊòØÊÑè‰πâÂ∑®Â§ß„ÄÇÁ§∫‰æãÂ¶ÇÊûúÊ≤°ÊúâËøõË°å‰ºòÂåñÁöÑËØùÔºåÊØè‰∏ÄÊù°ÁªìÊûúÈÉΩÈúÄË¶ÅÊâßË°å‰∏ÄÊ¨°100+80ÁöÑÊìç‰ΩúÔºåÁÑ∂ÂêéÂÜç‰∏éÂèòÈáèmath_score‰ª•Âèäenglish_scoreÁõ∏Âä†ÔºåËÄå‰ºòÂåñÂêéÂ∞±‰∏çÈúÄË¶ÅÂÜçÊâßË°å100+80Êìç‰Ωú„ÄÇ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120198279383.jpg" alt></p>
<p>ÂàóÂÄºË£ÅÂâ™ÊòØÂè¶‰∏Ä‰∏™ÁªèÂÖ∏ÁöÑËßÑÂàôÔºåÁ§∫‰æã‰∏≠ÂØπ‰∫épeopleË°®Êù•ËØ¥ÔºåÂπ∂‰∏çÈúÄË¶ÅÊâ´ÊèèÂÆÉÁöÑÊâÄÊúâÂàóÂÄºÔºåËÄåÂè™ÈúÄË¶ÅÂàóÂÄºidÔºåÊâÄ‰ª•Âú®Êâ´Êèèpeople‰πãÂêéÈúÄË¶ÅÂ∞ÜÂÖ∂‰ªñÂàóËøõË°åË£ÅÂâ™ÔºåÂè™Áïô‰∏ãÂàóid„ÄÇËøô‰∏™‰ºòÂåñ‰∏ÄÊñπÈù¢Â§ßÂπÖÂ∫¶ÂáèÂ∞ë‰∫ÜÁΩëÁªú„ÄÅÂÜÖÂ≠òÊï∞ÊçÆÈáèÊ∂àËÄóÔºåÂè¶‰∏ÄÊñπÈù¢ÂØπ‰∫éÂàóÂ≠òÊï∞ÊçÆÂ∫ìÔºàParquetÔºâÊù•ËØ¥Â§ßÂ§ßÊèêÈ´ò‰∫ÜÊâ´ÊèèÊïàÁéá„ÄÇ</p>
<p>Èô§Ê≠§‰πãÂ§ñÔºåCatalystËøòÂÆö‰πâ‰∫ÜÂæàÂ§öÂÖ∂‰ªñ‰ºòÂåñËßÑÂàôÔºåÂèØ‰ª•Êü•ÁúãOptimizerÁ±ªÔºå‰∏ãÂõæÁÆÄÂçïÁöÑÊà™Âèñ‰∏ÄÈÉ®ÂàÜËßÑÂàôÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120198495604.jpg" alt></p>
<p>Ëá≥Ê≠§ÔºåÈÄªËæëÊâßË°åËÆ°ÂàíÂ∑≤ÁªèÂæóÂà∞‰∫ÜÊØîËæÉÂÆåÂñÑÁöÑ‰ºòÂåñÔºåÁÑ∂ËÄåÔºåÈÄªËæëÊâßË°åËÆ°Âàí‰æùÁÑ∂Ê≤°ÂäûÊ≥ïÁúüÊ≠£ÊâßË°åÔºå‰ªñ‰ª¨Âè™ÊòØÈÄªËæë‰∏äÂèØË°åÔºåÂÆûÈôÖ‰∏äSparkÂπ∂‰∏çÁü•ÈÅìÂ¶Ç‰ΩïÂéªÊâßË°åËøô‰∏™‰∏úË•ø„ÄÇÊØîÂ¶ÇJoinÂè™ÊòØ‰∏Ä‰∏™ÊäΩË±°Ê¶ÇÂøµÔºå‰ª£Ë°®‰∏§‰∏™Ë°®Ê†πÊçÆÁõ∏ÂêåÁöÑidËøõË°åÂêàÂπ∂ÔºåÁÑ∂ËÄåÂÖ∑‰ΩìÊÄé‰πàÂÆûÁé∞Ëøô‰∏™ÂêàÂπ∂ÔºåÈÄªËæëÊâßË°åËÆ°ÂàíÂπ∂Ê≤°ÊúâËØ¥Êòé„ÄÇ</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120198739726.jpg" alt></p>
<p>Ê≠§Êó∂Â∞±ÈúÄË¶ÅÂ∞ÜÈÄªËæëÊâßË°åËÆ°ÂàíËΩ¨Êç¢‰∏∫Áâ©ÁêÜÊâßË°åËÆ°ÂàíÔºåÂ∞ÜÈÄªËæë‰∏äÂèØË°åÁöÑÊâßË°åËÆ°ÂàíÂèò‰∏∫SparkÂèØ‰ª•ÁúüÊ≠£ÊâßË°åÁöÑËÆ°Âàí„ÄÇÊØîÂ¶ÇJoinÁÆóÂ≠êÔºåSparkÊ†πÊçÆ‰∏çÂêåÂú∫ÊôØ‰∏∫ËØ•ÁÆóÂ≠êÂà∂ÂÆö‰∫Ü‰∏çÂêåÁöÑÁÆóÊ≥ïÁ≠ñÁï•ÔºåÊúâBroadcastHashJoin„ÄÅShuffleHashJoin‰ª•ÂèäSortMergeJoinÁ≠âÔºàÂèØ‰ª•Â∞ÜJoinÁêÜËß£‰∏∫‰∏Ä‰∏™Êé•Âè£ÔºåBroadcastHashJoinÊòØÂÖ∂‰∏≠‰∏Ä‰∏™ÂÖ∑‰ΩìÂÆûÁé∞ÔºâÔºåÁâ©ÁêÜÊâßË°åËÆ°ÂàíÂÆûÈôÖ‰∏äÂ∞±ÊòØÂú®Ëøô‰∫õÂÖ∑‰ΩìÂÆûÁé∞‰∏≠ÊåëÈÄâ‰∏Ä‰∏™ËÄóÊó∂ÊúÄÂ∞èÁöÑÁÆóÊ≥ïÂÆûÁé∞ÔºåËøô‰∏™ËøáÁ®ãÊ∂âÂèäÂà∞Âü∫‰∫é‰ª£‰ª∑‰ºòÂåñÁ≠ñÁï•„ÄÇ<br><div class="note info"><h2 id="Êü•ÁúãSparkSQLÊâßË°åËÆ°Âàí"><a href="#Êü•ÁúãSparkSQLÊâßË°åËÆ°Âàí" class="headerlink" title="Êü•ÁúãSparkSQLÊâßË°åËÆ°Âàí"></a>Êü•ÁúãSparkSQLÊâßË°åËÆ°Âàí</h2></div><br>Ëá≥Ê≠§ÔºåÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ§∫‰æãÂÆåÊï¥ÁöÑ‰ªãÁªç‰∫ÜCatalystÁöÑÊï¥‰∏™Â∑•‰ΩúÊµÅÁ®ãÔºåÂåÖÊã¨ParserÈò∂ÊÆµ„ÄÅAnalyzerÈò∂ÊÆµ„ÄÅOptimizeÈò∂ÊÆµ‰ª•ÂèäPhysical PlanningÈò∂ÊÆµ„ÄÇÊúâÂêåÂ≠¶ÂèØËÉΩ‰ºöÊØîËæÉÊÑüÂÖ¥Ë∂£SparkÁéØÂ¢É‰∏ãÂ¶Ç‰ΩïÊü•Áúã‰∏ÄÊù°ÂÖ∑‰ΩìÁöÑSQLÁöÑÊï¥‰∏™ËøáÁ®ãÔºåÂú®Ê≠§‰ªãÁªç‰∏§ÁßçÊñπÊ≥ïÔºö</p>
<h3 id="Êü•ÁúãÈÄªËæëÊâßË°åËÆ°Âàí"><a href="#Êü•ÁúãÈÄªËæëÊâßË°åËÆ°Âàí" class="headerlink" title="Êü•ÁúãÈÄªËæëÊâßË°åËÆ°Âàí"></a>Êü•ÁúãÈÄªËæëÊâßË°åËÆ°Âàí</h3><p>‰ΩøÁî®queryExecutionÊñπÊ≥ïÊü•ÁúãÈÄªËæëÊâßË°åËÆ°ÂàíÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120199915140.jpg" alt></p>
<h3 id="Êü•ÁúãÁâ©ÁêÜÊâßË°åËÆ°Âàí"><a href="#Êü•ÁúãÁâ©ÁêÜÊâßË°åËÆ°Âàí" class="headerlink" title="Êü•ÁúãÁâ©ÁêÜÊâßË°åËÆ°Âàí"></a>Êü•ÁúãÁâ©ÁêÜÊâßË°åËÆ°Âàí</h3><p>‰ΩøÁî®explainÊñπÊ≥ïÊü•ÁúãÁâ©ÁêÜÊâßË°åËÆ°ÂàíÔºö</p>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15120200455737.jpg" alt></p>
<h3 id="Spark-WebUIËøõË°åÊü•Áúã"><a href="#Spark-WebUIËøõË°åÊü•Áúã" class="headerlink" title="Spark WebUIËøõË°åÊü•Áúã"></a>Spark WebUIËøõË°åÊü•Áúã</h3><p><img src="http://oliji9s3j.bkt.clouddn.com/15120200683962.jpg" alt></p>
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
            <tag> sparkSQL </tag>
            
            <tag> catalyst </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sparkÂÆπÈîôÊú∫Âà∂]]></title>
      <url>https://stanxia.github.io/2017/11/29/spark%E5%AE%B9%E9%94%99%E6%9C%BA%E5%88%B6/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÂºïË®Ä"><a href="#ÂºïË®Ä" class="headerlink" title="ÂºïË®Ä"></a>ÂºïË®Ä</h2></div>
<p>‰∏ÄËà¨Êù•ËØ¥ÔºåÂàÜÂ∏ÉÂºèÊï∞ÊçÆÈõÜÁöÑÂÆπÈîôÊÄßÊúâ‰∏§ÁßçÊñπÂºèÔºö Êï∞ÊçÆÊ£ÄÊü•ÁÇπ Âíå ËÆ∞ÂΩïÊï∞ÊçÆÁöÑÊõ¥Êñ∞ „ÄÇÈù¢ÂêëÂ§ßËßÑÊ®°Êï∞ÊçÆÂàÜÊûêÔºåÊï∞ÊçÆÊ£ÄÊü•ÁÇπÊìç‰ΩúÊàêÊú¨ÂæàÈ´òÔºåÈúÄË¶ÅÈÄöËøáÊï∞ÊçÆ‰∏≠ÂøÉÁöÑÁΩëÁªúËøûÊé•Âú®Êú∫Âô®‰πãÈó¥Â§çÂà∂Â∫ûÂ§ßÁöÑÊï∞ÊçÆÈõÜÔºåËÄåÁΩëÁªúÂ∏¶ÂÆΩÂæÄÂæÄÊØîÂÜÖÂ≠òÂ∏¶ÂÆΩ‰ΩéÂæóÂ§öÔºåÂêåÊó∂ËøòÈúÄË¶ÅÊ∂àËÄóÊõ¥Â§öÁöÑÂ≠òÂÇ®ËµÑÊ∫ê„ÄÇÂõ†Ê≠§ÔºåSparkÈÄâÊã©ËÆ∞ÂΩïÊõ¥Êñ∞ÁöÑÊñπÂºè„ÄÇ</p>
<p>‰ΩÜÊòØÔºåÂ¶ÇÊûúÊõ¥Êñ∞Á≤íÂ∫¶Â§™ÁªÜÂ§™Â§öÔºåÈÇ£‰πàËÆ∞ÂΩïÊõ¥Êñ∞ÊàêÊú¨‰πü‰∏ç‰Ωé„ÄÇÂõ†Ê≠§ÔºåRDDÂè™ÊîØÊåÅÁ≤óÁ≤íÂ∫¶ËΩ¨Êç¢ÔºåÂç≥Âè™ËÆ∞ÂΩïÂçï‰∏™Âùó‰∏äÊâßË°åÁöÑÂçï‰∏™Êìç‰ΩúÔºåÁÑ∂ÂêéÂ∞ÜÂàõÂª∫RDDÁöÑ‰∏ÄÁ≥ªÂàóÂèòÊç¢Â∫èÂàóÔºàÊØè‰∏™RDDÈÉΩÂåÖÂê´‰∫Ü‰ªñÊòØÂ¶Ç‰ΩïÁî±ÂÖ∂‰ªñRDDÂèòÊç¢ËøáÊù•ÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÈáçÂª∫Êüê‰∏ÄÂùóÊï∞ÊçÆÁöÑ‰ø°ÊÅØ„ÄÇÂõ†Ê≠§RDDÁöÑÂÆπÈîôÊú∫Âà∂ÂèàÁß∞‚ÄúË°ÄÁªü(Lineage)‚ÄùÂÆπÈîôÔºâËÆ∞ÂΩï‰∏ãÊù•Ôºå‰ª•‰æøÊÅ¢Â§ç‰∏¢Â§±ÁöÑÂàÜÂå∫„ÄÇ </p>
<p>LineageÊú¨Ë¥®‰∏äÂæàÁ±ª‰ºº‰∫éÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÈáçÂÅöÊó•ÂøóÔºàRedo LogÔºâÔºåÂè™‰∏çËøáËøô‰∏™ÈáçÂÅöÊó•ÂøóÁ≤íÂ∫¶ÂæàÂ§ßÔºåÊòØÂØπÂÖ®Â±ÄÊï∞ÊçÆÂÅöÂêåÊ†∑ÁöÑÈáçÂÅöËøõËÄåÊÅ¢Â§çÊï∞ÊçÆ„ÄÇ<br><div class="note info"><h2 id="LineageÊú∫Âà∂"><a href="#LineageÊú∫Âà∂" class="headerlink" title="LineageÊú∫Âà∂"></a>LineageÊú∫Âà∂</h2></div></p>
<h3 id="LineageÁÆÄ‰ªã"><a href="#LineageÁÆÄ‰ªã" class="headerlink" title="LineageÁÆÄ‰ªã"></a>LineageÁÆÄ‰ªã</h3><p>Áõ∏ÊØîÂÖ∂‰ªñÁ≥ªÁªüÁöÑÁªÜÈ¢óÁ≤íÂ∫¶ÁöÑÂÜÖÂ≠òÊï∞ÊçÆÊõ¥Êñ∞Á∫ßÂà´ÁöÑÂ§á‰ªΩÊàñËÄÖLOGÊú∫Âà∂ÔºåRDDÁöÑLineageËÆ∞ÂΩïÁöÑÊòØÁ≤óÈ¢óÁ≤íÂ∫¶ÁöÑÁâπÂÆöÊï∞ÊçÆTransformationÊìç‰ΩúÔºàÂ¶Çfilter„ÄÅmap„ÄÅjoinÁ≠âÔºâË°å‰∏∫„ÄÇÂΩìËøô‰∏™RDDÁöÑÈÉ®ÂàÜÂàÜÂå∫Êï∞ÊçÆ‰∏¢Â§±Êó∂ÔºåÂÆÉÂèØ‰ª•ÈÄöËøáLineageËé∑ÂèñË∂≥Â§üÁöÑ‰ø°ÊÅØÊù•ÈáçÊñ∞ËøêÁÆóÂíåÊÅ¢Â§ç‰∏¢Â§±ÁöÑÊï∞ÊçÆÂàÜÂå∫„ÄÇÂõ†‰∏∫ËøôÁßçÁ≤óÈ¢óÁ≤íÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÈôêÂà∂‰∫ÜSparkÁöÑËøêÁî®Âú∫ÂêàÔºåÊâÄ‰ª•SparkÂπ∂‰∏çÈÄÇÁî®‰∫éÊâÄÊúâÈ´òÊÄßËÉΩË¶ÅÊ±ÇÁöÑÂú∫ÊôØÔºå‰ΩÜÂêåÊó∂Áõ∏ÊØîÁªÜÈ¢óÁ≤íÂ∫¶ÁöÑÊï∞ÊçÆÊ®°ÂûãÔºå‰πüÂ∏¶Êù•‰∫ÜÊÄßËÉΩÁöÑÊèêÂçá„ÄÇ</p>
<a id="more"></a>
<h3 id="‰∏§Áßç‰æùËµñÂÖ≥Á≥ª"><a href="#‰∏§Áßç‰æùËµñÂÖ≥Á≥ª" class="headerlink" title="‰∏§Áßç‰æùËµñÂÖ≥Á≥ª"></a>‰∏§Áßç‰æùËµñÂÖ≥Á≥ª</h3><p>RDDÂú®Lineage‰æùËµñÊñπÈù¢ÂàÜ‰∏∫‰∏§ÁßçÔºöÁ™Ñ‰æùËµñ(Narrow Dependencies)‰∏éÂÆΩ‰æùËµñ(Wide Dependencies,Ê∫êÁ†Å‰∏≠Áß∞‰∏∫Shuffle Dependencies)ÔºåÁî®Êù•Ëß£ÂÜ≥Êï∞ÊçÆÂÆπÈîôÁöÑÈ´òÊïàÊÄß„ÄÇ</p>
<ul>
<li>Á™Ñ‰æùËµñÔºöÊòØÊåáÁà∂RDDÁöÑÊØè‰∏Ä‰∏™ÂàÜÂå∫ÊúÄÂ§öË¢´‰∏Ä‰∏™Â≠êRDDÁöÑÂàÜÂå∫ÊâÄÁî®ÔºåË°®Áé∞‰∏∫‰∏Ä‰∏™Áà∂RDDÁöÑÂàÜÂå∫ÂØπÂ∫î‰∫é‰∏Ä‰∏™Â≠êRDDÁöÑÂàÜÂå∫ÔºåÊàñÂ§ö‰∏™Áà∂RDDÁöÑÂàÜÂå∫ÂØπÂ∫î‰∫é‰∏Ä‰∏™Â≠êRDDÁöÑÂàÜÂå∫Ôºå‰πüÂ∞±ÊòØËØ¥‰∏Ä‰∏™Áà∂RDDÁöÑ‰∏Ä‰∏™ÂàÜÂå∫‰∏çÂèØËÉΩÂØπÂ∫î‰∏Ä‰∏™Â≠êRDDÁöÑÂ§ö‰∏™ÂàÜÂå∫„ÄÇ 1‰∏™Áà∂RDDÂàÜÂå∫ÂØπÂ∫î1‰∏™Â≠êRDDÂàÜÂå∫ÔºåËøôÂÖ∂‰∏≠ÂèàÂàÜ‰∏§ÁßçÊÉÖÂÜµÔºö1‰∏™Â≠êRDDÂàÜÂå∫ÂØπÂ∫î1‰∏™Áà∂RDDÂàÜÂå∫ÔºàÂ¶Çmap„ÄÅfilterÁ≠âÁÆóÂ≠êÔºâÔºå1‰∏™Â≠êRDDÂàÜÂå∫ÂØπÂ∫îN‰∏™Áà∂RDDÂàÜÂå∫ÔºàÂ¶Çco-paritionedÔºàÂçèÂêåÂàíÂàÜÔºâËøáÁöÑJoinÔºâ„ÄÇ</li>
<li>ÂÆΩ‰æùËµñÔºöÊòØÊåáÂ≠êRDDÁöÑÂàÜÂå∫‰æùËµñ‰∫éÁà∂RDDÁöÑÂ§ö‰∏™ÂàÜÂå∫ÊàñÊâÄÊúâÂàÜÂå∫ÔºåÂç≥Â≠òÂú®‰∏Ä‰∏™Áà∂RDDÁöÑ‰∏Ä‰∏™ÂàÜÂå∫ÂØπÂ∫î‰∏Ä‰∏™Â≠êRDDÁöÑÂ§ö‰∏™ÂàÜÂå∫„ÄÇ 1‰∏™Áà∂RDDÂàÜÂå∫ÂØπÂ∫îÂ§ö‰∏™Â≠êRDDÂàÜÂå∫ÔºåËøôÂÖ∂‰∏≠ÂèàÂàÜ‰∏§ÁßçÊÉÖÂÜµÔºö1‰∏™Áà∂RDDÂØπÂ∫îÊâÄÊúâÂ≠êRDDÂàÜÂå∫ÔºàÊú™ÁªèÂçèÂêåÂàíÂàÜÁöÑJoinÔºâÊàñËÄÖ1‰∏™Áà∂RDDÂØπÂ∫îÈùûÂÖ®ÈÉ®ÁöÑÂ§ö‰∏™RDDÂàÜÂå∫ÔºàÂ¶ÇgroupByKeyÔºâ„ÄÇ </li>
</ul>
<h3 id="Êú¨Ë¥®ÁêÜËß£"><a href="#Êú¨Ë¥®ÁêÜËß£" class="headerlink" title="Êú¨Ë¥®ÁêÜËß£"></a>Êú¨Ë¥®ÁêÜËß£</h3><p>Ê†πÊçÆÁà∂RDDÂàÜÂå∫ÊòØÂØπÂ∫î1‰∏™ËøòÊòØÂ§ö‰∏™Â≠êRDDÂàÜÂå∫Êù•Âå∫ÂàÜÁ™Ñ‰æùËµñÔºàÁà∂ÂàÜÂå∫ÂØπÂ∫î‰∏Ä‰∏™Â≠êÂàÜÂå∫ÔºåÂ§ö‰∏™Áà∂ÂàÜÂå∫ÂØπÂ∫î‰∏Ä‰∏™Â≠êÂàÜÂå∫ÔºâÂíåÂÆΩ‰æùËµñÔºàÁà∂ÂàÜÂå∫ÂØπÂ∫îÂ§ö‰∏™Â≠êÂàÜÂå∫Ôºâ„ÄÇÂ¶ÇÊûúÂØπÂ∫îÂ§ö‰∏™ÔºåÂàôÂΩìÂÆπÈîôÈáçÁÆóÂàÜÂå∫Êó∂ÔºåÂõ†‰∏∫Áà∂ÂàÜÂå∫Êï∞ÊçÆÂè™Êúâ‰∏ÄÈÉ®ÂàÜÊòØÈúÄË¶ÅÈáçÁÆóÂ≠êÂàÜÂå∫ÁöÑÔºåÂÖ∂‰ΩôÊï∞ÊçÆÈáçÁÆóÂ∞±ÈÄ†Êàê‰∫ÜÂÜó‰ΩôËÆ°ÁÆó„ÄÇ</p>
<p>ÂØπ‰∫éÂÆΩ‰æùËµñÔºåStageËÆ°ÁÆóÁöÑËæìÂÖ•ÂíåËæìÂá∫Âú®‰∏çÂêåÁöÑËäÇÁÇπ‰∏äÔºåÂØπ‰∫éËæìÂÖ•ËäÇÁÇπÂÆåÂ•ΩÔºåËÄåËæìÂá∫ËäÇÁÇπÊ≠ªÊú∫ÁöÑÊÉÖÂÜµÔºåÈÄöËøáÈáçÊñ∞ËÆ°ÁÆóÊÅ¢Â§çÊï∞ÊçÆËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËøôÁßçÊñπÊ≥ïÂÆπÈîôÊòØÊúâÊïàÁöÑÔºåÂê¶ÂàôÊó†ÊïàÔºåÂõ†‰∏∫Êó†Ê≥ïÈáçËØïÔºåÈúÄË¶ÅÂêë‰∏äËøΩÊ∫ØÂÖ∂Á•ñÂÖàÁúãÊòØÂê¶ÂèØ‰ª•ÈáçËØïÔºàËøôÂ∞±ÊòØlineageÔºåË°ÄÁªüÁöÑÊÑèÊÄùÔºâÔºåÁ™Ñ‰æùËµñÂØπ‰∫éÊï∞ÊçÆÁöÑÈáçÁÆóÂºÄÈîÄË¶ÅËøúÂ∞è‰∫éÂÆΩ‰æùËµñÁöÑÊï∞ÊçÆÈáçÁÆóÂºÄÈîÄ„ÄÇ</p>
<p>Á™Ñ‰æùËµñÂíåÂÆΩ‰æùËµñÁöÑÊ¶ÇÂøµ‰∏ªË¶ÅÁî®Âú®‰∏§‰∏™Âú∞ÊñπÔºö‰∏Ä‰∏™ÊòØÂÆπÈîô‰∏≠Áõ∏ÂΩì‰∫éRedoÊó•ÂøóÁöÑÂäüËÉΩÔºõÂè¶‰∏Ä‰∏™ÊòØÂú®Ë∞ÉÂ∫¶‰∏≠ÊûÑÂª∫DAG‰Ωú‰∏∫‰∏çÂêåStageÁöÑÂàíÂàÜÁÇπ„ÄÇ</p>
<h3 id="‰æùËµñÂÖ≥Á≥ªÁöÑÁâπÊÄß"><a href="#‰æùËµñÂÖ≥Á≥ªÁöÑÁâπÊÄß" class="headerlink" title="‰æùËµñÂÖ≥Á≥ªÁöÑÁâπÊÄß"></a>‰æùËµñÂÖ≥Á≥ªÁöÑÁâπÊÄß</h3><p>Á¨¨‰∏ÄÔºåÁ™Ñ‰æùËµñÂèØ‰ª•Âú®Êüê‰∏™ËÆ°ÁÆóËäÇÁÇπ‰∏äÁõ¥Êé•ÈÄöËøáËÆ°ÁÆóÁà∂RDDÁöÑÊüêÂùóÊï∞ÊçÆËÆ°ÁÆóÂæóÂà∞Â≠êRDDÂØπÂ∫îÁöÑÊüêÂùóÊï∞ÊçÆÔºõÂÆΩ‰æùËµñÂàôË¶ÅÁ≠âÂà∞Áà∂RDDÊâÄÊúâÊï∞ÊçÆÈÉΩËÆ°ÁÆóÂÆåÊàê‰πãÂêéÔºåÂπ∂‰∏îÁà∂RDDÁöÑËÆ°ÁÆóÁªìÊûúËøõË°åhashÂπ∂‰º†Âà∞ÂØπÂ∫îËäÇÁÇπ‰∏ä‰πãÂêéÊâçËÉΩËÆ°ÁÆóÂ≠êRDD„ÄÇ </p>
<p>Á¨¨‰∫åÔºåÊï∞ÊçÆ‰∏¢Â§±Êó∂ÔºåÂØπ‰∫éÁ™Ñ‰æùËµñÂè™ÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó‰∏¢Â§±ÁöÑÈÇ£‰∏ÄÂùóÊï∞ÊçÆÊù•ÊÅ¢Â§çÔºõÂØπ‰∫éÂÆΩ‰æùËµñÂàôË¶ÅÂ∞ÜÁ•ñÂÖàRDD‰∏≠ÁöÑÊâÄÊúâÊï∞ÊçÆÂùóÂÖ®ÈÉ®ÈáçÊñ∞ËÆ°ÁÆóÊù•ÊÅ¢Â§ç„ÄÇÊâÄ‰ª•Âú®Èïø‚ÄúË°ÄÁªü‚ÄùÈìæÁâπÂà´ÊòØÊúâÂÆΩ‰æùËµñÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÂú®ÈÄÇÂΩìÁöÑÊó∂Êú∫ËÆæÁΩÆÊï∞ÊçÆÊ£ÄÊü•ÁÇπ„ÄÇ‰πüÊòØËøô‰∏§‰∏™ÁâπÊÄßË¶ÅÊ±ÇÂØπ‰∫é‰∏çÂêå‰æùËµñÂÖ≥Á≥ªË¶ÅÈááÂèñ‰∏çÂêåÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶Êú∫Âà∂ÂíåÂÆπÈîôÊÅ¢Â§çÊú∫Âà∂„ÄÇ</p>
<h3 id="ÂÆπÈîôÂéüÁêÜ"><a href="#ÂÆπÈîôÂéüÁêÜ" class="headerlink" title="ÂÆπÈîôÂéüÁêÜ"></a>ÂÆπÈîôÂéüÁêÜ</h3><p>Âú®ÂÆπÈîôÊú∫Âà∂‰∏≠ÔºåÂ¶ÇÊûú‰∏Ä‰∏™ËäÇÁÇπÊ≠ªÊú∫‰∫ÜÔºåËÄå‰∏îËøêÁÆóÁ™Ñ‰æùËµñÔºåÂàôÂè™Ë¶ÅÊää‰∏¢Â§±ÁöÑÁà∂RDDÂàÜÂå∫ÈáçÁÆóÂç≥ÂèØÔºå‰∏ç‰æùËµñ‰∫éÂÖ∂‰ªñËäÇÁÇπ„ÄÇËÄåÂÆΩ‰æùËµñÈúÄË¶ÅÁà∂RDDÁöÑÊâÄÊúâÂàÜÂå∫ÈÉΩÂ≠òÂú®ÔºåÈáçÁÆóÂ∞±ÂæàÊòÇË¥µ‰∫Ü„ÄÇ</p>
<p>ÂèØ‰ª•ËøôÊ†∑ÁêÜËß£ÂºÄÈîÄÁöÑÁªèÊµé‰∏éÂê¶ÔºöÂú®Á™Ñ‰æùËµñ‰∏≠ÔºåÂú®Â≠êRDDÁöÑÂàÜÂå∫‰∏¢Â§±„ÄÅÈáçÁÆóÁà∂RDDÂàÜÂå∫Êó∂ÔºåÁà∂RDDÁõ∏Â∫îÂàÜÂå∫ÁöÑÊâÄÊúâÊï∞ÊçÆÈÉΩÊòØÂ≠êRDDÂàÜÂå∫ÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏çÂ≠òÂú®ÂÜó‰ΩôËÆ°ÁÆó„ÄÇÂú®ÂÆΩ‰æùËµñÊÉÖÂÜµ‰∏ãÔºå‰∏¢Â§±‰∏Ä‰∏™Â≠êRDDÂàÜÂå∫ÈáçÁÆóÁöÑÊØè‰∏™Áà∂RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÁöÑÊâÄÊúâÊï∞ÊçÆÂπ∂‰∏çÊòØÈÉΩÁªô‰∏¢Â§±ÁöÑÂ≠êRDDÂàÜÂå∫Áî®ÁöÑÔºå‰ºöÊúâ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆÁõ∏ÂΩì‰∫éÂØπÂ∫îÁöÑÊòØÊú™‰∏¢Â§±ÁöÑÂ≠êRDDÂàÜÂå∫‰∏≠ÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºåËøôÊ†∑Â∞±‰ºö‰∫ßÁîüÂÜó‰ΩôËÆ°ÁÆóÂºÄÈîÄÔºåËøô‰πüÊòØÂÆΩ‰æùËµñÂºÄÈîÄÊõ¥Â§ßÁöÑÂéüÂõ†„ÄÇ</p>
<p>Âõ†Ê≠§Â¶ÇÊûú‰ΩøÁî®CheckpointÁÆóÂ≠êÊù•ÂÅöÊ£ÄÊü•ÁÇπÔºå‰∏ç‰ªÖË¶ÅËÄÉËôëLineageÊòØÂê¶Ë∂≥Â§üÈïøÔºå‰πüË¶ÅËÄÉËôëÊòØÂê¶ÊúâÂÆΩ‰æùËµñÔºåÂØπÂÆΩ‰æùËµñÂä†CheckpointÊòØÊúÄÁâ©ÊúâÊâÄÂÄºÁöÑ„ÄÇ<br><div class="note info"><h2 id="CheckpointÊú∫Âà∂"><a href="#CheckpointÊú∫Âà∂" class="headerlink" title="CheckpointÊú∫Âà∂"></a>CheckpointÊú∫Âà∂</h2></div><br>ÈÄöËøá‰∏äËø∞ÂàÜÊûêÂèØ‰ª•ÁúãÂá∫Âú®‰ª•‰∏ã‰∏§ÁßçÊÉÖÂÜµ‰∏ãÔºåRDDÈúÄË¶ÅÂä†Ê£ÄÊü•ÁÇπ„ÄÇ</p>
<ol>
<li>DAG‰∏≠ÁöÑLineageËøáÈïøÔºåÂ¶ÇÊûúÈáçÁÆóÔºåÂàôÂºÄÈîÄÂ§™Â§ßÔºàÂ¶ÇÂú®PageRank‰∏≠Ôºâ„ÄÇ</li>
<li>Âú®ÂÆΩ‰æùËµñ‰∏äÂÅöCheckpointËé∑ÂæóÁöÑÊî∂ÁõäÊõ¥Â§ß„ÄÇ</li>
</ol>
<p>Áî±‰∫éRDDÊòØÂè™ËØªÁöÑÔºåÊâÄ‰ª•SparkÁöÑRDDËÆ°ÁÆó‰∏≠‰∏ÄËá¥ÊÄß‰∏çÊòØ‰∏ªË¶ÅÂÖ≥ÂøÉÁöÑÂÜÖÂÆπÔºåÂÜÖÂ≠òÁõ∏ÂØπÂÆπÊòìÁÆ°ÁêÜÔºåËøô‰πüÊòØËÆæËÆ°ËÄÖÂæàÊúâËøúËßÅÁöÑÂú∞ÊñπÔºåËøôÊ†∑ÂáèÂ∞ë‰∫ÜÊ°ÜÊû∂ÁöÑÂ§çÊùÇÊÄßÔºåÊèêÂçá‰∫ÜÊÄßËÉΩÂíåÂèØÊâ©Â±ïÊÄßÔºå‰∏∫‰ª•Âêé‰∏äÂ±ÇÊ°ÜÊû∂ÁöÑ‰∏∞ÂØåÂ•†ÂÆö‰∫ÜÂº∫ÊúâÂäõÁöÑÂü∫Á°Ä„ÄÇ </p>
<p>Âú®RDDËÆ°ÁÆó‰∏≠ÔºåÈÄöËøáÊ£ÄÊü•ÁÇπÊú∫Âà∂ËøõË°åÂÆπÈîôÔºå‰º†ÁªüÂÅöÊ£ÄÊü•ÁÇπÊúâ‰∏§ÁßçÊñπÂºèÔºöÈÄöËøáÂÜó‰ΩôÊï∞ÊçÆÂíåÊó•ÂøóËÆ∞ÂΩïÊõ¥Êñ∞Êìç‰Ωú„ÄÇÂú®RDD‰∏≠ÁöÑdoCheckPointÊñπÊ≥ïÁõ∏ÂΩì‰∫éÈÄöËøáÂÜó‰ΩôÊï∞ÊçÆÊù•ÁºìÂ≠òÊï∞ÊçÆÔºåËÄå‰πãÂâç‰ªãÁªçÁöÑË°ÄÁªüÂ∞±ÊòØÈÄöËøáÁõ∏ÂΩìÁ≤óÁ≤íÂ∫¶ÁöÑËÆ∞ÂΩïÊõ¥Êñ∞Êìç‰ΩúÊù•ÂÆûÁé∞ÂÆπÈîôÁöÑ„ÄÇ</p>
<p>Ê£ÄÊü•ÁÇπÔºàÊú¨Ë¥®ÊòØÈÄöËøáÂ∞ÜRDDÂÜôÂÖ•DiskÂÅöÊ£ÄÊü•ÁÇπÔºâÊòØ‰∏∫‰∫ÜÈÄöËøálineageÂÅöÂÆπÈîôÁöÑËæÖÂä©ÔºålineageËøáÈïø‰ºöÈÄ†ÊàêÂÆπÈîôÊàêÊú¨ËøáÈ´òÔºåËøôÊ†∑Â∞±‰∏çÂ¶ÇÂú®‰∏≠Èó¥Èò∂ÊÆµÂÅöÊ£ÄÊü•ÁÇπÂÆπÈîôÔºåÂ¶ÇÊûú‰πãÂêéÊúâËäÇÁÇπÂá∫Áé∞ÈóÆÈ¢òËÄå‰∏¢Â§±ÂàÜÂå∫Ôºå‰ªéÂÅöÊ£ÄÊü•ÁÇπÁöÑRDDÂºÄÂßãÈáçÂÅöLineageÔºåÂ∞±‰ºöÂáèÂ∞ëÂºÄÈîÄ„ÄÇ</p>
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
            <tag> ÂéüÁêÜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ORC‰∏éPARQUETÊñá‰ª∂Á±ªÂûãÁöÑÊØîËæÉ]]></title>
      <url>https://stanxia.github.io/2017/11/29/ORC%E4%B8%8EPARQUET%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%AF%94%E8%BE%83/</url>
      <content type="html"><![CDATA[<h2 id="ÂàóÂºèÂ≠òÂÇ®"><a href="#ÂàóÂºèÂ≠òÂÇ®" class="headerlink" title="ÂàóÂºèÂ≠òÂÇ®"></a>ÂàóÂºèÂ≠òÂÇ®</h2><p>Áî±‰∫éOLAPÊü•ËØ¢ÁöÑÁâπÁÇπÔºåÂàóÂºèÂ≠òÂÇ®ÂèØ‰ª•ÊèêÂçáÂÖ∂Êü•ËØ¢ÊÄßËÉΩÔºå‰ΩÜÊòØÂÆÉÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÂë¢ÔºüËøôÂ∞±Ë¶Å‰ªéÂàóÂºèÂ≠òÂÇ®ÁöÑÂéüÁêÜËØ¥Ëµ∑Ôºå‰ªéÂõæ1‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÁõ∏ÂØπ‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠ÈÄöÂ∏∏‰ΩøÁî®ÁöÑË°åÂºèÂ≠òÂÇ®ÔºåÂú®‰ΩøÁî®ÂàóÂºèÂ≠òÂÇ®Êó∂ÊØè‰∏ÄÂàóÁöÑÊâÄÊúâÂÖÉÁ¥†ÈÉΩÊòØÈ°∫Â∫èÂ≠òÂÇ®ÁöÑ„ÄÇÁî±Ê≠§ÁâπÁÇπÂèØ‰ª•ÁªôÊü•ËØ¢Â∏¶Êù•Â¶Ç‰∏ãÁöÑ‰ºòÂåñÔºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Êü•ËØ¢ÁöÑÊó∂ÂÄô‰∏çÈúÄË¶ÅÊâ´ÊèèÂÖ®ÈÉ®ÁöÑÊï∞ÊçÆÔºåËÄåÂè™ÈúÄË¶ÅËØªÂèñÊØèÊ¨°Êü•ËØ¢Ê∂âÂèäÁöÑÂàóÔºåËøôÊ†∑ÂèØ‰ª•Â∞ÜI/OÊ∂àËÄóÈôç‰ΩéNÂÄçÔºåÂè¶Â§ñÂèØ‰ª•‰øùÂ≠òÊØè‰∏ÄÂàóÁöÑÁªüËÆ°‰ø°ÊÅØ(min„ÄÅmax„ÄÅsumÁ≠â)ÔºåÂÆûÁé∞ÈÉ®ÂàÜÁöÑË∞ìËØç‰∏ãÊé®„ÄÇ</span><br><span class="line">Áî±‰∫éÊØè‰∏ÄÂàóÁöÑÊàêÂëòÈÉΩÊòØÂêåÊûÑÁöÑÔºåÂèØ‰ª•ÈíàÂØπ‰∏çÂêåÁöÑÊï∞ÊçÆÁ±ªÂûã‰ΩøÁî®Êõ¥È´òÊïàÁöÑÊï∞ÊçÆÂéãÁº©ÁÆóÊ≥ïÔºåËøõ‰∏ÄÊ≠•ÂáèÂ∞èI/O„ÄÇ</span><br><span class="line">Áî±‰∫éÊØè‰∏ÄÂàóÁöÑÊàêÂëòÁöÑÂêåÊûÑÊÄßÔºåÂèØ‰ª•‰ΩøÁî®Êõ¥Âä†ÈÄÇÂêàCPU pipelineÁöÑÁºñÁ†ÅÊñπÂºèÔºåÂáèÂ∞èCPUÁöÑÁºìÂ≠òÂ§±Êïà„ÄÇ</span><br></pre></td></tr></table></figure>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119228873171.jpg" alt></center><br><center>Âõæ1 Ë°åÂºèÂ≠òÂÇ®VSÂàóÂºèÂ≠òÂÇ®</center>

<a id="more"></a>
<h2 id="ÂµåÂ•óÊï∞ÊçÆÊ†ºÂºè"><a href="#ÂµåÂ•óÊï∞ÊçÆÊ†ºÂºè" class="headerlink" title="ÂµåÂ•óÊï∞ÊçÆÊ†ºÂºè"></a>ÂµåÂ•óÊï∞ÊçÆÊ†ºÂºè</h2><p>ÈÄöÂ∏∏Êàë‰ª¨‰ΩøÁî®ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂ≠òÂÇ®ÁªìÊûÑÂåñÊï∞ÊçÆÔºåËÄåÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÊîØÊåÅÁöÑÊï∞ÊçÆÊ®°ÂûãÈÉΩÊòØÊâÅÂπ≥ÂºèÁöÑÔºåËÄåÈÅáÂà∞ËØ∏Â¶ÇList„ÄÅMapÂíåËá™ÂÆö‰πâStructÁöÑÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÁî®Êà∑Ëá™Â∑±Ëß£ÊûêÔºå‰ΩÜÊòØÂú®Â§ßÊï∞ÊçÆÁéØÂ¢É‰∏ãÔºåÊï∞ÊçÆÁöÑÊù•Ê∫êÂ§öÁßçÂ§öÊ†∑Ôºå‰æãÂ¶ÇÂüãÁÇπÊï∞ÊçÆÔºåÂæàÂèØËÉΩÈúÄË¶ÅÊääÁ®ãÂ∫è‰∏≠ÁöÑÊüê‰∫õÂØπË±°ÂÜÖÂÆπ‰Ωú‰∏∫ËæìÂá∫ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËÄåÊØè‰∏Ä‰∏™ÂØπË±°ÈÉΩÂèØËÉΩÊòØÂµåÂ•óÁöÑÔºåÊâÄ‰ª•Â¶ÇÊûúËÉΩÂ§üÂéüÁîüÁöÑÊîØÊåÅËøôÁßçÊï∞ÊçÆÔºåÊü•ËØ¢ÁöÑÊó∂ÂÄôÂ∞±‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑËß£Êûê‰æøËÉΩËé∑ÂæóÊÉ≥Ë¶ÅÁöÑÁªìÊûú„ÄÇ‰æãÂ¶ÇÂú®TwitterÔºå‰ªñ‰ª¨‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑÊó•ÂøóÂØπË±°Ôºà‰∏ÄÊù°ËÆ∞ÂΩïÔºâÊúâ87‰∏™Â≠óÊÆµÔºåÂÖ∂‰∏≠ÂµåÂ•ó‰∫Ü7Â±ÇÔºåÂ¶Ç‰∏ãÂõæ„ÄÇ</p>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119230522913.jpg" alt><br>Âõæ2 ÂµåÂ•óÊï∞ÊçÆÊ®°Âûã</center>

<p>ÈöèÁùÄÂµåÂ•óÊ†ºÂºèÁöÑÊï∞ÊçÆÁöÑÈúÄÊ±ÇÊó•ÁõäÂ¢ûÂä†ÔºåÁõÆÂâçHadoopÁîüÊÄÅÂúà‰∏≠‰∏ªÊµÅÁöÑÊü•ËØ¢ÂºïÊìéÈÉΩÊîØÊåÅÊõ¥‰∏∞ÂØåÁöÑÊï∞ÊçÆÁ±ªÂûãÔºå‰æãÂ¶ÇHive„ÄÅSparkSQL„ÄÅImpalaÁ≠âÈÉΩÂéüÁîüÁöÑÊîØÊåÅËØ∏Â¶Çstruct„ÄÅmap„ÄÅarrayËøôÊ†∑ÁöÑÂ§çÊùÇÊï∞ÊçÆÁ±ªÂûãÔºåËøôÊ†∑‰øÉ‰ΩøÂêÑÁßçÂ≠òÂÇ®Ê†ºÂºèÈÉΩÈúÄË¶ÅÊîØÊåÅÂµåÂ•óÊï∞ÊçÆÊ†ºÂºè„ÄÇ</p>
<h2 id="ParquetÂ≠òÂÇ®Ê†ºÂºè"><a href="#ParquetÂ≠òÂÇ®Ê†ºÂºè" class="headerlink" title="ParquetÂ≠òÂÇ®Ê†ºÂºè"></a>ParquetÂ≠òÂÇ®Ê†ºÂºè</h2><p>Apache ParquetÊòØHadoopÁîüÊÄÅÂúà‰∏≠‰∏ÄÁßçÊñ∞ÂûãÂàóÂºèÂ≠òÂÇ®Ê†ºÂºèÔºåÂÆÉÂèØ‰ª•ÂÖºÂÆπHadoopÁîüÊÄÅÂúà‰∏≠Â§ßÂ§öÊï∞ËÆ°ÁÆóÊ°ÜÊû∂(Mapreduce„ÄÅSparkÁ≠â)ÔºåË¢´Â§öÁßçÊü•ËØ¢ÂºïÊìéÊîØÊåÅÔºàHive„ÄÅImpala„ÄÅDrillÁ≠âÔºâÔºåÂπ∂‰∏îÂÆÉÊòØËØ≠Ë®ÄÂíåÂπ≥Âè∞Êó†ÂÖ≥ÁöÑ„ÄÇParquetÊúÄÂàùÊòØÁî±TwitterÂíåClouderaÂêà‰ΩúÂºÄÂèëÂÆåÊàêÂπ∂ÂºÄÊ∫êÔºå2015Âπ¥5Êúà‰ªéApacheÁöÑÂ≠µÂåñÂô®ÈáåÊØï‰∏öÊàê‰∏∫ApacheÈ°∂Á∫ßÈ°πÁõÆ„ÄÇ</p>
<p>ParquetÊúÄÂàùÁöÑÁÅµÊÑüÊù•Ëá™Google‰∫é2010Âπ¥ÂèëË°®ÁöÑDremelËÆ∫ÊñáÔºåÊñá‰∏≠‰ªãÁªç‰∫Ü‰∏ÄÁßçÊîØÊåÅÂµåÂ•óÁªìÊûÑÁöÑÂ≠òÂÇ®Ê†ºÂºèÔºåÂπ∂‰∏î‰ΩøÁî®‰∫ÜÂàóÂºèÂ≠òÂÇ®ÁöÑÊñπÂºèÊèêÂçáÊü•ËØ¢ÊÄßËÉΩÔºåÂú®DremelËÆ∫Êñá‰∏≠Ëøò‰ªãÁªç‰∫ÜGoogleÂ¶Ç‰Ωï‰ΩøÁî®ËøôÁßçÂ≠òÂÇ®Ê†ºÂºèÂÆûÁé∞Âπ∂Ë°åÊü•ËØ¢ÁöÑÔºåÂ¶ÇÊûúÂØπÊ≠§ÊÑüÂÖ¥Ë∂£ÂèØ‰ª•ÂèÇËÄÉËÆ∫ÊñáÂíåÂºÄÊ∫êÂÆûÁé∞Drill„ÄÇ</p>
<h3 id="Êï∞ÊçÆÊ®°Âûã"><a href="#Êï∞ÊçÆÊ®°Âûã" class="headerlink" title="Êï∞ÊçÆÊ®°Âûã"></a>Êï∞ÊçÆÊ®°Âûã</h3><p>ParquetÊîØÊåÅÂµåÂ•óÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÁ±ª‰ºº‰∫éProtocol BuffersÔºåÊØè‰∏Ä‰∏™Êï∞ÊçÆÊ®°ÂûãÁöÑschemaÂåÖÂê´Â§ö‰∏™Â≠óÊÆµÔºåÊØè‰∏Ä‰∏™Â≠óÊÆµÊúâ‰∏â‰∏™Â±ûÊÄßÔºöÈáçÂ§çÊ¨°Êï∞„ÄÅÊï∞ÊçÆÁ±ªÂûãÂíåÂ≠óÊÆµÂêçÔºåÈáçÂ§çÊ¨°Êï∞ÂèØ‰ª•ÊòØ‰ª•‰∏ã‰∏âÁßçÔºörequired(Âè™Âá∫Áé∞1Ê¨°)Ôºårepeated(Âá∫Áé∞0Ê¨°ÊàñÂ§öÊ¨°)Ôºåoptional(Âá∫Áé∞0Ê¨°Êàñ1Ê¨°)„ÄÇÊØè‰∏Ä‰∏™Â≠óÊÆµÁöÑÊï∞ÊçÆÁ±ªÂûãÂèØ‰ª•ÂàÜÊàê‰∏§ÁßçÔºögroup(Â§çÊùÇÁ±ªÂûã)Âíåprimitive(Âü∫Êú¨Á±ªÂûã)„ÄÇ‰æãÂ¶ÇDremel‰∏≠Êèê‰æõÁöÑDocumentÁöÑschemaÁ§∫‰æãÔºåÂÆÉÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">message Document &#123;</span><br><span class="line">  required int64 DocId;</span><br><span class="line">  optional group Links &#123;</span><br><span class="line">    repeated int64 Backward;</span><br><span class="line">    repeated int64 Forward; </span><br><span class="line">  &#125;</span><br><span class="line">  repeated group Name &#123;</span><br><span class="line">    repeated group Language &#123;</span><br><span class="line">      required string Code;</span><br><span class="line">      optional string Country; </span><br><span class="line">     &#125;</span><br><span class="line">    optional string Url; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ÂèØ‰ª•ÊääËøô‰∏™SchemaËΩ¨Êç¢ÊàêÊ†ëÁä∂ÁªìÊûÑÔºåÊ†πËäÇÁÇπÂèØ‰ª•ÁêÜËß£‰∏∫repeatedÁ±ªÂûãÔºåÂ¶ÇÂõæ3„ÄÇ</p>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119233145314.jpg" alt><br>Âõæ3 ParquetÁöÑschemaÁªìÊûÑ</center>

<p>ÂèØ‰ª•ÁúãÂá∫Âú®Schema‰∏≠ÊâÄÊúâÁöÑÂü∫Êú¨Á±ªÂûãÂ≠óÊÆµÈÉΩÊòØÂè∂Â≠êËäÇÁÇπÔºåÂú®Ëøô‰∏™Schema‰∏≠‰∏ÄÂÖ±Â≠òÂú®6‰∏™Âè∂Â≠êËäÇÁÇπÔºåÂ¶ÇÊûúÊääËøôÊ†∑ÁöÑSchemaËΩ¨Êç¢ÊàêÊâÅÂπ≥ÂºèÁöÑÂÖ≥Á≥ªÊ®°ÂûãÔºåÂ∞±ÂèØ‰ª•ÁêÜËß£‰∏∫ËØ•Ë°®ÂåÖÂê´ÂÖ≠‰∏™Âàó„ÄÇParquet‰∏≠Ê≤°ÊúâMap„ÄÅArrayËøôÊ†∑ÁöÑÂ§çÊùÇÊï∞ÊçÆÁªìÊûÑÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøárepeatedÂíågroupÁªÑÂêàÊù•ÂÆûÁé∞ÁöÑ„ÄÇÁî±‰∫é‰∏ÄÊù°ËÆ∞ÂΩï‰∏≠Êüê‰∏ÄÂàóÂèØËÉΩÂá∫Áé∞Èõ∂Ê¨°ÊàñËÄÖÂ§öÊ¨°ÔºåÈúÄË¶ÅÊ†áÁ§∫Âá∫Âì™‰∫õÂàóÁöÑÂÄºÊûÑÊàê‰∏ÄÊù°ÂÆåÊï¥ÁöÑËÆ∞ÂΩï„ÄÇËøôÊòØÁî±Striping/AssemblyÁÆóÊ≥ïÂÆûÁé∞ÁöÑ„ÄÇ</p>
<p>Áî±‰∫éParquetÊîØÊåÅÁöÑÊï∞ÊçÆÊ®°ÂûãÊØîËæÉÊùæÊï£ÔºåÂèØËÉΩ‰∏ÄÊù°ËÆ∞ÂΩï‰∏≠Â≠òÂú®ÊØîËæÉÊ∑±ÁöÑÂµåÂ•óÂÖ≥Á≥ªÔºåÂ¶ÇÊûú‰∏∫ÊØè‰∏ÄÊù°ËÆ∞ÂΩïÈÉΩÁª¥Êä§‰∏Ä‰∏™Á±ª‰ººÁöÑÊ†ëÁä∂ÁªìÂèØËÉΩ‰ºöÂç†Áî®ËæÉÂ§ßÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÂõ†Ê≠§DremelËÆ∫Êñá‰∏≠ÊèêÂá∫‰∫Ü‰∏ÄÁßçÈ´òÊïàÁöÑÂØπ‰∫éÂµåÂ•óÊï∞ÊçÆÊ†ºÂºèÁöÑÂéãÁº©ÁÆóÊ≥ïÔºöStriping/AssemblyÁÆóÊ≥ï„ÄÇÂÆÉÁöÑÂéüÁêÜÊòØÊØè‰∏Ä‰∏™ËÆ∞ÂΩï‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÊàêÂëòÂÄºÊúâ‰∏âÈÉ®ÂàÜÁªÑÊàêÔºöValue„ÄÅRepetition levelÂíåDefinition level„ÄÇvalueËÆ∞ÂΩï‰∫ÜËØ•ÊàêÂëòÁöÑÂéüÂßãÂÄºÔºåÂèØ‰ª•Ê†πÊçÆÁâπÂÆöÁ±ªÂûãÁöÑÂéãÁº©ÁÆóÊ≥ïËøõË°åÂéãÁº©Ôºå‰∏§‰∏™levelÂÄºÁî®‰∫éËÆ∞ÂΩïËØ•ÂÄºÂú®Êï¥‰∏™ËÆ∞ÂΩï‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇÂØπ‰∫érepeatedÁ±ªÂûãÁöÑÂàóÔºåRepetition levelÂÄºËÆ∞ÂΩï‰∫ÜÂΩìÂâçÂÄºÂ±û‰∫éÂì™‰∏ÄÊù°ËÆ∞ÂΩï‰ª•ÂèäÂÆÉÂ§Ñ‰∫éËØ•ËÆ∞ÂΩïÁöÑ‰ªÄ‰πà‰ΩçÁΩÆÔºõÂØπ‰∫érepeatedÂíåoptionalÁ±ªÂûãÁöÑÂàóÔºåÂèØËÉΩ‰∏ÄÊù°ËÆ∞ÂΩï‰∏≠Êüê‰∏ÄÂàóÊòØÊ≤°ÊúâÂÄºÁöÑÔºåÂÅáËÆæÊàë‰ª¨‰∏çËÆ∞ÂΩïËøôÊ†∑ÁöÑÂÄºÂ∞±‰ºöÂØºËá¥Êú¨ËØ•Â±û‰∫é‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÂÄºË¢´ÂΩìÂÅöÂΩìÂâçËÆ∞ÂΩïÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ªéËÄåÈÄ†ÊàêÊï∞ÊçÆÁöÑÈîôËØØÔºåÂõ†Ê≠§ÂØπ‰∫éËøôÁßçÊÉÖÂÜµÈúÄË¶Å‰∏Ä‰∏™Âç†‰ΩçÁ¨¶Ê†áÁ§∫ËøôÁßçÊÉÖÂÜµ„ÄÇ</p>
<p>ÈÄöËøáStriping/AssemblyÁÆóÊ≥ïÔºåparquetÂèØ‰ª•‰ΩøÁî®ËæÉÂ∞ëÁöÑÂ≠òÂÇ®Á©∫Èó¥Ë°®Á§∫Â§çÊùÇÁöÑÂµåÂ•óÊ†ºÂºèÔºåÂπ∂‰∏îÈÄöÂ∏∏Repetition levelÂíåDefinition levelÈÉΩÊòØËæÉÂ∞èÁöÑÊï¥Êï∞ÂÄºÔºåÂèØ‰ª•ÈÄöËøáRLEÁÆóÊ≥ïÂØπÂÖ∂ËøõË°åÂéãÁº©ÔºåËøõ‰∏ÄÊ≠•Èôç‰ΩéÂ≠òÂÇ®Á©∫Èó¥„ÄÇ</p>
<h3 id="Êñá‰ª∂ÁªìÊûÑ"><a href="#Êñá‰ª∂ÁªìÊûÑ" class="headerlink" title="Êñá‰ª∂ÁªìÊûÑ"></a>Êñá‰ª∂ÁªìÊûÑ</h3><p>ParquetÊñá‰ª∂ÊòØ‰ª•‰∫åËøõÂà∂ÊñπÂºèÂ≠òÂÇ®ÁöÑÔºåÊòØ‰∏çÂèØ‰ª•Áõ¥Êé•ËØªÂèñÂíå‰øÆÊîπÁöÑÔºåParquetÊñá‰ª∂ÊòØËá™Ëß£ÊûêÁöÑÔºåÊñá‰ª∂‰∏≠ÂåÖÊã¨ËØ•Êñá‰ª∂ÁöÑÊï∞ÊçÆÂíåÂÖÉÊï∞ÊçÆ„ÄÇÂú®HDFSÊñá‰ª∂Á≥ªÁªüÂíåParquetÊñá‰ª∂‰∏≠Â≠òÂú®Â¶Ç‰∏ãÂá†‰∏™Ê¶ÇÂøµÔºö</p>
<ol>
<li>HDFSÂùó(Block)ÔºöÂÆÉÊòØHDFS‰∏äÁöÑÊúÄÂ∞èÁöÑÂâØÊú¨Âçï‰ΩçÔºåHDFS‰ºöÊää‰∏Ä‰∏™BlockÂ≠òÂÇ®Âú®Êú¨Âú∞ÁöÑ‰∏Ä‰∏™Êñá‰ª∂Âπ∂‰∏îÁª¥Êä§ÂàÜÊï£Âú®‰∏çÂêåÁöÑÊú∫Âô®‰∏äÁöÑÂ§ö‰∏™ÂâØÊú¨ÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ã‰∏Ä‰∏™BlockÁöÑÂ§ßÂ∞è‰∏∫256M„ÄÅ512MÁ≠â„ÄÇ</li>
<li>HDFSÊñá‰ª∂(File)Ôºö‰∏Ä‰∏™HDFSÁöÑÊñá‰ª∂ÔºåÂåÖÊã¨Êï∞ÊçÆÂíåÂÖÉÊï∞ÊçÆÔºåÊï∞ÊçÆÂàÜÊï£Â≠òÂÇ®Âú®Â§ö‰∏™Block‰∏≠„ÄÇ</li>
<li>Ë°åÁªÑ(Row Group)ÔºöÊåâÁÖßË°åÂ∞ÜÊï∞ÊçÆÁâ©ÁêÜ‰∏äÂàíÂàÜ‰∏∫Â§ö‰∏™ÂçïÂÖÉÔºåÊØè‰∏Ä‰∏™Ë°åÁªÑÂåÖÂê´‰∏ÄÂÆöÁöÑË°åÊï∞ÔºåÂú®‰∏Ä‰∏™HDFSÊñá‰ª∂‰∏≠Ëá≥Â∞ëÂ≠òÂÇ®‰∏Ä‰∏™Ë°åÁªÑÔºåParquetËØªÂÜôÁöÑÊó∂ÂÄô‰ºöÂ∞ÜÊï¥‰∏™Ë°åÁªÑÁºìÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª•Â¶ÇÊûúÊØè‰∏Ä‰∏™Ë°åÁªÑÁöÑÂ§ßÂ∞èÊòØÁî±ÂÜÖÂ≠òÂ§ßÁöÑÂ∞èÂÜ≥ÂÆöÁöÑ„ÄÇ</li>
<li>ÂàóÂùó(Column Chunk)ÔºöÂú®‰∏Ä‰∏™Ë°åÁªÑ‰∏≠ÊØè‰∏ÄÂàó‰øùÂ≠òÂú®‰∏Ä‰∏™ÂàóÂùó‰∏≠ÔºåË°åÁªÑ‰∏≠ÁöÑÊâÄÊúâÂàóËøûÁª≠ÁöÑÂ≠òÂÇ®Âú®Ëøô‰∏™Ë°åÁªÑÊñá‰ª∂‰∏≠„ÄÇ‰∏çÂêåÁöÑÂàóÂùóÂèØËÉΩ‰ΩøÁî®‰∏çÂêåÁöÑÁÆóÊ≥ïËøõË°åÂéãÁº©„ÄÇ</li>
<li>È°µ(Page)ÔºöÊØè‰∏Ä‰∏™ÂàóÂùóÂàíÂàÜ‰∏∫Â§ö‰∏™È°µÔºå‰∏Ä‰∏™È°µÊòØÊúÄÂ∞èÁöÑÁºñÁ†ÅÁöÑÂçï‰ΩçÔºåÂú®Âêå‰∏Ä‰∏™ÂàóÂùóÁöÑ‰∏çÂêåÈ°µÂèØËÉΩ‰ΩøÁî®‰∏çÂêåÁöÑÁºñÁ†ÅÊñπÂºè„ÄÇ</li>
</ol>
<p>ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂú®Â≠òÂÇ®ParquetÊï∞ÊçÆÁöÑÊó∂ÂÄô‰ºöÊåâÁÖßHDFSÁöÑBlockÂ§ßÂ∞èËÆæÁΩÆË°åÁªÑÁöÑÂ§ßÂ∞èÔºåÁî±‰∫é‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊØè‰∏Ä‰∏™Mapper‰ªªÂä°Â§ÑÁêÜÊï∞ÊçÆÁöÑÊúÄÂ∞èÂçï‰ΩçÊòØ‰∏Ä‰∏™BlockÔºåËøôÊ†∑ÂèØ‰ª•ÊääÊØè‰∏Ä‰∏™Ë°åÁªÑÁî±‰∏Ä‰∏™Mapper‰ªªÂä°Â§ÑÁêÜÔºåÂ¢ûÂ§ß‰ªªÂä°ÊâßË°åÂπ∂Ë°åÂ∫¶„ÄÇParquetÊñá‰ª∂ÁöÑÊ†ºÂºèÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ</p>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119234450484.jpg" alt><br>Âõæ4 ParquetÊñá‰ª∂ÁªìÊûÑ</center>

<p>‰∏äÂõæÂ±ïÁ§∫‰∫Ü‰∏Ä‰∏™ParquetÊñá‰ª∂ÁöÑÁªìÊûÑÔºå‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÂèØ‰ª•Â≠òÂÇ®Â§ö‰∏™Ë°åÁªÑÔºåÊñá‰ª∂ÁöÑÈ¶ñ‰ΩçÈÉΩÊòØËØ•Êñá‰ª∂ÁöÑMagic CodeÔºåÁî®‰∫éÊ†°È™åÂÆÉÊòØÂê¶ÊòØ‰∏Ä‰∏™ParquetÊñá‰ª∂ÔºåFooter lengthÂ≠òÂÇ®‰∫ÜÊñá‰ª∂ÂÖÉÊï∞ÊçÆÁöÑÂ§ßÂ∞èÔºåÈÄöËøáËØ•ÂÄºÂíåÊñá‰ª∂ÈïøÂ∫¶ÂèØ‰ª•ËÆ°ÁÆóÂá∫ÂÖÉÊï∞ÊçÆÁöÑÂÅèÁßªÈáèÔºåÊñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆ‰∏≠ÂåÖÊã¨ÊØè‰∏Ä‰∏™Ë°åÁªÑÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÂíåÂΩìÂâçÊñá‰ª∂ÁöÑSchema‰ø°ÊÅØ„ÄÇÈô§‰∫ÜÊñá‰ª∂‰∏≠ÊØè‰∏Ä‰∏™Ë°åÁªÑÁöÑÂÖÉÊï∞ÊçÆÔºåÊØè‰∏ÄÈ°µÁöÑÂºÄÂßãÈÉΩ‰ºöÂ≠òÂÇ®ËØ•È°µÁöÑÂÖÉÊï∞ÊçÆÔºåÂú®Parquet‰∏≠ÔºåÊúâ‰∏âÁßçÁ±ªÂûãÁöÑÈ°µÔºöÊï∞ÊçÆÈ°µ„ÄÅÂ≠óÂÖ∏È°µÂíåÁ¥¢ÂºïÈ°µ„ÄÇÊï∞ÊçÆÈ°µÁî®‰∫éÂ≠òÂÇ®ÂΩìÂâçË°åÁªÑ‰∏≠ËØ•ÂàóÁöÑÂÄºÔºåÂ≠óÂÖ∏È°µÂ≠òÂÇ®ËØ•ÂàóÂÄºÁöÑÁºñÁ†ÅÂ≠óÂÖ∏ÔºåÊØè‰∏Ä‰∏™ÂàóÂùó‰∏≠ÊúÄÂ§öÂåÖÂê´‰∏Ä‰∏™Â≠óÂÖ∏È°µÔºåÁ¥¢ÂºïÈ°µÁî®Êù•Â≠òÂÇ®ÂΩìÂâçË°åÁªÑ‰∏ãËØ•ÂàóÁöÑÁ¥¢ÂºïÔºåÁõÆÂâçParquet‰∏≠Ëøò‰∏çÊîØÊåÅÁ¥¢ÂºïÈ°µÔºå‰ΩÜÊòØÂú®ÂêéÈù¢ÁöÑÁâàÊú¨‰∏≠Â¢ûÂä†„ÄÇ</p>
<h3 id="Êï∞ÊçÆËÆøÈóÆ"><a href="#Êï∞ÊçÆËÆøÈóÆ" class="headerlink" title="Êï∞ÊçÆËÆøÈóÆ"></a>Êï∞ÊçÆËÆøÈóÆ</h3><p>ËØ¥Âà∞ÂàóÂºèÂ≠òÂÇ®ÁöÑ‰ºòÂäøÔºåProject‰∏ãÊé®ÊòØÊó†ÁñëÊúÄÁ™ÅÂá∫ÁöÑÔºåÂÆÉÊÑèÂë≥ÁùÄÂú®Ëé∑ÂèñË°®‰∏≠ÂéüÂßãÊï∞ÊçÆÊó∂Âè™ÈúÄË¶ÅÊâ´ÊèèÊü•ËØ¢‰∏≠ÈúÄË¶ÅÁöÑÂàóÔºåÁî±‰∫éÊØè‰∏ÄÂàóÁöÑÊâÄÊúâÂÄºÈÉΩÊòØËøûÁª≠Â≠òÂÇ®ÁöÑÔºåÈÅøÂÖçÊâ´ÊèèÊï¥‰∏™Ë°®Êñá‰ª∂ÂÜÖÂÆπ„ÄÇ</p>
<p>Âú®Parquet‰∏≠ÂéüÁîüÂ∞±ÊîØÊåÅProject‰∏ãÊé®ÔºåÊâßË°åÊü•ËØ¢ÁöÑÊó∂ÂÄôÂèØ‰ª•ÈÄöËøáConfiguration‰º†ÈÄíÈúÄË¶ÅËØªÂèñÁöÑÂàóÁöÑ‰ø°ÊÅØÔºåËøô‰∫õÂàóÂøÖÈ°ªÊòØSchemaÁöÑÂ≠êÈõÜÔºåParquetÊØèÊ¨°‰ºöÊâ´Êèè‰∏Ä‰∏™Row GroupÁöÑÊï∞ÊçÆÔºåÁÑ∂Âêé‰∏ÄÊ¨°ÊÄßÂæóÂ∞ÜËØ•Row GroupÈáåÊâÄÊúâÈúÄË¶ÅÁöÑÂàóÁöÑCloumn ChunkÈÉΩËØªÂèñÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÊØèÊ¨°ËØªÂèñ‰∏Ä‰∏™Row GroupÁöÑÊï∞ÊçÆËÉΩÂ§üÂ§ßÂ§ßÈôç‰ΩéÈöèÊú∫ËØªÁöÑÊ¨°Êï∞ÔºåÈô§Ê≠§‰πãÂ§ñÔºåParquetÂú®ËØªÂèñÁöÑÊó∂ÂÄô‰ºöËÄÉËôëÂàóÊòØÂê¶ËøûÁª≠ÔºåÂ¶ÇÊûúÊüê‰∫õÈúÄË¶ÅÁöÑÂàóÊòØÂ≠òÂÇ®‰ΩçÁΩÆÊòØËøûÁª≠ÁöÑÔºåÈÇ£‰πà‰∏ÄÊ¨°ËØªÊìç‰ΩúÂ∞±ÂèØ‰ª•ÊääÂ§ö‰∏™ÂàóÁöÑÊï∞ÊçÆËØªÂèñÂà∞ÂÜÖÂ≠ò„ÄÇ</p>
<p>Âú®Êï∞ÊçÆËÆøÈóÆÁöÑËøáÁ®ã‰∏≠ÔºåParquetËøòÂèØ‰ª•Âà©Áî®ÊØè‰∏Ä‰∏™row groupÁîüÊàêÁöÑÁªüËÆ°‰ø°ÊÅØËøõË°åË∞ìËØç‰∏ãÊé®ÔºåËøôÈÉ®ÂàÜ‰ø°ÊÅØÂåÖÊã¨ËØ•Column ChunkÁöÑÊúÄÂ§ßÂÄº„ÄÅÊúÄÂ∞èÂÄºÂíåÁ©∫ÂÄº‰∏™Êï∞„ÄÇÈÄöËøáËøô‰∫õÁªüËÆ°ÂÄºÂíåËØ•ÂàóÁöÑËøáÊª§Êù°‰ª∂ÂèØ‰ª•Âà§Êñ≠ËØ•Row GroupÊòØÂê¶ÈúÄË¶ÅÊâ´Êèè„ÄÇÂè¶Â§ñParquetÊú™Êù•Ëøò‰ºöÂ¢ûÂä†ËØ∏Â¶ÇBloom FilterÂíåIndexÁ≠â‰ºòÂåñÊï∞ÊçÆÔºåÊõ¥Âä†ÊúâÊïàÁöÑÂÆåÊàêË∞ìËØç‰∏ãÊé®„ÄÇ</p>
<h2 id="ORCÊñá‰ª∂Ê†ºÂºè"><a href="#ORCÊñá‰ª∂Ê†ºÂºè" class="headerlink" title="ORCÊñá‰ª∂Ê†ºÂºè"></a>ORCÊñá‰ª∂Ê†ºÂºè</h2><p>ORCÊñá‰ª∂Ê†ºÂºèÊòØ‰∏ÄÁßçHadoopÁîüÊÄÅÂúà‰∏≠ÁöÑÂàóÂºèÂ≠òÂÇ®Ê†ºÂºèÔºåÂÆÉÁöÑ‰∫ßÁîüÊó©Âú®2013Âπ¥ÂàùÔºåÊúÄÂàù‰∫ßÁîüËá™Apache HiveÔºåÁî®‰∫éÈôç‰ΩéHadoopÊï∞ÊçÆÂ≠òÂÇ®Á©∫Èó¥ÂíåÂä†ÈÄüHiveÊü•ËØ¢ÈÄüÂ∫¶„ÄÇÂíåParquetÁ±ª‰ººÔºåÂÆÉÂπ∂‰∏çÊòØ‰∏Ä‰∏™ÂçïÁ∫ØÁöÑÂàóÂºèÂ≠òÂÇ®Ê†ºÂºèÔºå‰ªçÁÑ∂ÊòØÈ¶ñÂÖàÊ†πÊçÆË°åÁªÑÂàÜÂâ≤Êï¥‰∏™Ë°®ÔºåÂú®ÊØè‰∏Ä‰∏™Ë°åÁªÑÂÜÖËøõË°åÊåâÂàóÂ≠òÂÇ®„ÄÇORCÊñá‰ª∂ÊòØËá™ÊèèËø∞ÁöÑÔºåÂÆÉÁöÑÂÖÉÊï∞ÊçÆ‰ΩøÁî®Protocol BuffersÂ∫èÂàóÂåñÔºåÂπ∂‰∏îÊñá‰ª∂‰∏≠ÁöÑÊï∞ÊçÆÂ∞ΩÂèØËÉΩÁöÑÂéãÁº©‰ª•Èôç‰ΩéÂ≠òÂÇ®Á©∫Èó¥ÁöÑÊ∂àËÄóÔºåÁõÆÂâç‰πüË¢´Spark SQL„ÄÅPrestoÁ≠âÊü•ËØ¢ÂºïÊìéÊîØÊåÅÔºå‰ΩÜÊòØImpalaÂØπ‰∫éORCÁõÆÂâçÊ≤°ÊúâÊîØÊåÅÔºå‰ªçÁÑ∂‰ΩøÁî®Parquet‰Ωú‰∏∫‰∏ªË¶ÅÁöÑÂàóÂºèÂ≠òÂÇ®Ê†ºÂºè„ÄÇ2015Âπ¥ORCÈ°πÁõÆË¢´ApacheÈ°πÁõÆÂü∫Èáë‰ºöÊèêÂçá‰∏∫ApacheÈ°∂Á∫ßÈ°πÁõÆ„ÄÇ</p>
<h3 id="Êï∞ÊçÆÊ®°Âûã-1"><a href="#Êï∞ÊçÆÊ®°Âûã-1" class="headerlink" title="Êï∞ÊçÆÊ®°Âûã"></a>Êï∞ÊçÆÊ®°Âûã</h3><p>ÂíåParquet‰∏çÂêåÔºåORCÂéüÁîüÊòØ‰∏çÊîØÊåÅÂµåÂ•óÊï∞ÊçÆÊ†ºÂºèÁöÑÔºåËÄåÊòØÈÄöËøáÂØπÂ§çÊùÇÊï∞ÊçÆÁ±ªÂûãÁâπÊÆäÂ§ÑÁêÜÁöÑÊñπÂºèÂÆûÁé∞ÂµåÂ•óÊ†ºÂºèÁöÑÊîØÊåÅÔºå‰æãÂ¶ÇÂØπ‰∫éÂ¶Ç‰∏ãÁöÑhiveË°®Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `orcStructTable`(</span><br><span class="line">  `name` string,</span><br><span class="line">  `course` struct&lt;course:string,score:int&gt;,</span><br><span class="line">  `score` map&lt;string,int&gt;,</span><br><span class="line">  `work_locations` array&lt;string&gt;)</span><br></pre></td></tr></table></figure>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119238618712.jpg" alt><br>Âõæ5 ORCÁöÑschemaÁªìÊûÑ</center>

<p>Âú®ORCÁöÑÁªìÊûÑ‰∏≠Ëøô‰∏™schemaÂåÖÂê´10‰∏™columnÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÂ§çÊùÇÁ±ªÂûãÂàóÂíåÂéüÂßãÁ±ªÂûãÁöÑÂàóÔºåÂâçËÄÖÂåÖÊã¨LIST„ÄÅSTRUCT„ÄÅMAPÂíåUNIONÁ±ªÂûãÔºåÂêéËÄÖÂåÖÊã¨BOOLEAN„ÄÅÊï¥Êï∞„ÄÅÊµÆÁÇπÊï∞„ÄÅÂ≠óÁ¨¶‰∏≤Á±ªÂûãÁ≠âÔºåÂÖ∂‰∏≠STRUCTÁöÑÂ≠©Â≠êËäÇÁÇπÂåÖÊã¨ÂÆÉÁöÑÊàêÂëòÂèòÈáèÔºåÂèØËÉΩÊúâÂ§ö‰∏™Â≠©Â≠êËäÇÁÇπÔºåMAPÊúâ‰∏§‰∏™Â≠©Â≠êËäÇÁÇπÔºåÂàÜÂà´‰∏∫keyÂíåvalueÔºåLISTÂåÖÂê´‰∏Ä‰∏™Â≠©Â≠êËäÇÁÇπÔºåÁ±ªÂûã‰∏∫ËØ•LISTÁöÑÊàêÂëòÁ±ªÂûãÔºåUNION‰∏ÄËà¨‰∏çÊÄé‰πàÁî®ÂæóÂà∞„ÄÇÊØè‰∏Ä‰∏™SchemaÊ†ëÁöÑÊ†πËäÇÁÇπ‰∏∫‰∏Ä‰∏™StructÁ±ªÂûãÔºåÊâÄÊúâÁöÑcolumnÊåâÁÖßÊ†ëÁöÑ‰∏≠Â∫èÈÅçÂéÜÈ°∫Â∫èÁºñÂè∑„ÄÇ</p>
<p>ORCÂè™ÈúÄË¶ÅÂ≠òÂÇ®schemaÊ†ë‰∏≠Âè∂Â≠êËäÇÁÇπÁöÑÂÄºÔºåËÄå‰∏≠Èó¥ÁöÑÈùûÂè∂Â≠êËäÇÁÇπÂè™ÊòØÂÅö‰∏ÄÂ±Ç‰ª£ÁêÜÔºåÂÆÉ‰ª¨Âè™ÈúÄË¶ÅË¥üË¥£Â≠©Â≠êËäÇÁÇπÂÄºÂæóËØªÂèñÔºåÂè™ÊúâÁúüÊ≠£ÁöÑÂè∂Â≠êËäÇÁÇπÊâç‰ºöËØªÂèñÊï∞ÊçÆÔºåÁÑ∂Âêé‰∫§Áî±Áà∂ËäÇÁÇπÂ∞ÅË£ÖÊàêÂØπÂ∫îÁöÑÊï∞ÊçÆÁªìÊûÑËøîÂõû„ÄÇ</p>
<h3 id="Êñá‰ª∂ÁªìÊûÑ-1"><a href="#Êñá‰ª∂ÁªìÊûÑ-1" class="headerlink" title="Êñá‰ª∂ÁªìÊûÑ"></a>Êñá‰ª∂ÁªìÊûÑ</h3><p>ÂíåParquetÁ±ª‰ººÔºåORCÊñá‰ª∂‰πüÊòØ‰ª•‰∫åËøõÂà∂ÊñπÂºèÂ≠òÂÇ®ÁöÑÔºåÊâÄ‰ª•ÊòØ‰∏çÂèØ‰ª•Áõ¥Êé•ËØªÂèñÔºåORCÊñá‰ª∂‰πüÊòØËá™Ëß£ÊûêÁöÑÔºåÂÆÉÂåÖÂê´ËÆ∏Â§öÁöÑÂÖÉÊï∞ÊçÆÔºåËøô‰∫õÂÖÉÊï∞ÊçÆÈÉΩÊòØÂêåÊûÑProtoBufferËøõË°åÂ∫èÂàóÂåñÁöÑ„ÄÇORCÁöÑÊñá‰ª∂ÁªìÊûÑÂÖ•Âõæ6ÔºåÂÖ∂‰∏≠Ê∂âÂèäÂà∞Â¶Ç‰∏ãÁöÑÊ¶ÇÂøµÔºö</p>
<ol>
<li>ORCÊñá‰ª∂Ôºö‰øùÂ≠òÂú®Êñá‰ª∂Á≥ªÁªü‰∏äÁöÑÊôÆÈÄö‰∫åËøõÂà∂Êñá‰ª∂Ôºå‰∏Ä‰∏™ORCÊñá‰ª∂‰∏≠ÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™stripeÔºåÊØè‰∏Ä‰∏™stripeÂåÖÂê´Â§öÊù°ËÆ∞ÂΩïÔºåËøô‰∫õËÆ∞ÂΩïÊåâÁÖßÂàóËøõË°åÁã¨Á´ãÂ≠òÂÇ®ÔºåÂØπÂ∫îÂà∞Parquet‰∏≠ÁöÑrow groupÁöÑÊ¶ÇÂøµ„ÄÇ</li>
<li>Êñá‰ª∂Á∫ßÂÖÉÊï∞ÊçÆÔºöÂåÖÊã¨Êñá‰ª∂ÁöÑÊèèËø∞‰ø°ÊÅØPostScript„ÄÅÊñá‰ª∂meta‰ø°ÊÅØÔºàÂåÖÊã¨Êï¥‰∏™Êñá‰ª∂ÁöÑÁªüËÆ°‰ø°ÊÅØÔºâ„ÄÅÊâÄÊúâstripeÁöÑ‰ø°ÊÅØÂíåÊñá‰ª∂schema‰ø°ÊÅØ„ÄÇ</li>
<li>stripeÔºö‰∏ÄÁªÑË°åÂΩ¢Êàê‰∏Ä‰∏™stripeÔºåÊØèÊ¨°ËØªÂèñÊñá‰ª∂ÊòØ‰ª•Ë°åÁªÑ‰∏∫Âçï‰ΩçÁöÑÔºå‰∏ÄËà¨‰∏∫HDFSÁöÑÂùóÂ§ßÂ∞èÔºå‰øùÂ≠ò‰∫ÜÊØè‰∏ÄÂàóÁöÑÁ¥¢ÂºïÂíåÊï∞ÊçÆ„ÄÇ</li>
<li>stripeÂÖÉÊï∞ÊçÆÔºö‰øùÂ≠òstripeÁöÑ‰ΩçÁΩÆ„ÄÅÊØè‰∏Ä‰∏™ÂàóÁöÑÂú®ËØ•stripeÁöÑÁªüËÆ°‰ø°ÊÅØ‰ª•ÂèäÊâÄÊúâÁöÑstreamÁ±ªÂûãÂíå‰ΩçÁΩÆ„ÄÇ</li>
<li>row groupÔºöÁ¥¢ÂºïÁöÑÊúÄÂ∞èÂçï‰ΩçÔºå‰∏Ä‰∏™stripe‰∏≠ÂåÖÂê´Â§ö‰∏™row groupÔºåÈªòËÆ§‰∏∫10000‰∏™ÂÄºÁªÑÊàê„ÄÇ</li>
<li>streamÔºö‰∏Ä‰∏™streamË°®Á§∫Êñá‰ª∂‰∏≠‰∏ÄÊÆµÊúâÊïàÁöÑÊï∞ÊçÆÔºåÂåÖÊã¨Á¥¢ÂºïÂíåÊï∞ÊçÆ‰∏§Á±ª„ÄÇÁ¥¢Âºïstream‰øùÂ≠òÊØè‰∏Ä‰∏™row groupÁöÑ‰ΩçÁΩÆÂíåÁªüËÆ°‰ø°ÊÅØÔºåÊï∞ÊçÆstreamÂåÖÊã¨Â§öÁßçÁ±ªÂûãÁöÑÊï∞ÊçÆÔºåÂÖ∑‰ΩìÈúÄË¶ÅÂì™Âá†ÁßçÊòØÁî±ËØ•ÂàóÁ±ªÂûãÂíåÁºñÁ†ÅÊñπÂºèÂÜ≥ÂÆö„ÄÇ</li>
</ol>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119239944085.jpg" alt><br><br>Âõæ6 ORCÊñá‰ª∂ÁªìÊûÑ</center>

<p>Âú®ORCÊñá‰ª∂‰∏≠‰øùÂ≠ò‰∫Ü‰∏â‰∏™Â±ÇÁ∫ßÁöÑÁªüËÆ°‰ø°ÊÅØÔºåÂàÜÂà´‰∏∫Êñá‰ª∂Á∫ßÂà´„ÄÅstripeÁ∫ßÂà´Âíårow groupÁ∫ßÂà´ÁöÑÔºå‰ªñ‰ª¨ÈÉΩÂèØ‰ª•Áî®Êù•Ê†πÊçÆSearch ARGumentsÔºàË∞ìËØç‰∏ãÊé®Êù°‰ª∂ÔºâÂà§Êñ≠ÊòØÂê¶ÂèØ‰ª•Ë∑≥ËøáÊüê‰∫õÊï∞ÊçÆÔºåÂú®ÁªüËÆ°‰ø°ÊÅØ‰∏≠ÈÉΩÂåÖÂê´ÊàêÂëòÊï∞ÂíåÊòØÂê¶ÊúânullÂÄºÔºåÂπ∂‰∏îÂØπ‰∫é‰∏çÂêåÁ±ªÂûãÁöÑÊï∞ÊçÆËÆæÁΩÆ‰∏Ä‰∫õÁâπÂÆöÁöÑÁªüËÆ°‰ø°ÊÅØ„ÄÇ</p>
<h3 id="Êï∞ÊçÆËÆøÈóÆ-1"><a href="#Êï∞ÊçÆËÆøÈóÆ-1" class="headerlink" title="Êï∞ÊçÆËÆøÈóÆ"></a>Êï∞ÊçÆËÆøÈóÆ</h3><p>ËØªÂèñORCÊñá‰ª∂ÊòØ‰ªéÂ∞æÈÉ®ÂºÄÂßãÁöÑÔºåÁ¨¨‰∏ÄÊ¨°ËØªÂèñ16KBÁöÑÂ§ßÂ∞èÔºåÂ∞ΩÂèØËÉΩÁöÑÂ∞ÜPostscriptÂíåFooterÊï∞ÊçÆÈÉΩËØªÂÖ•ÂÜÖÂ≠ò„ÄÇÊñá‰ª∂ÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠óËäÇ‰øùÂ≠òÁùÄPostScriptÁöÑÈïøÂ∫¶ÔºåÂÆÉÁöÑÈïøÂ∫¶‰∏ç‰ºöË∂ÖËøá256Â≠óËäÇÔºåPostScript‰∏≠‰øùÂ≠òÁùÄÊï¥‰∏™Êñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåÂÆÉÂåÖÊã¨Êñá‰ª∂ÁöÑÂéãÁº©Ê†ºÂºè„ÄÅÊñá‰ª∂ÂÜÖÈÉ®ÊØè‰∏Ä‰∏™ÂéãÁº©ÂùóÁöÑÊúÄÂ§ßÈïøÂ∫¶(ÊØèÊ¨°ÂàÜÈÖçÂÜÖÂ≠òÁöÑÂ§ßÂ∞è)„ÄÅFooterÈïøÂ∫¶Ôºå‰ª•Âèä‰∏Ä‰∫õÁâàÊú¨‰ø°ÊÅØ„ÄÇÂú®PostscriptÂíåFooter‰πãÈó¥Â≠òÂÇ®ÁùÄÊï¥‰∏™Êñá‰ª∂ÁöÑÁªüËÆ°‰ø°ÊÅØ(‰∏äÂõæ‰∏≠Êú™ÁîªÂá∫)ÔºåËøôÈÉ®ÂàÜÁöÑÁªüËÆ°‰ø°ÊÅØÂåÖÊã¨ÊØè‰∏Ä‰∏™stripe‰∏≠ÊØè‰∏ÄÂàóÁöÑ‰ø°ÊÅØÔºå‰∏ªË¶ÅÁªüËÆ°ÊàêÂëòÊï∞„ÄÅÊúÄÂ§ßÂÄº„ÄÅÊúÄÂ∞èÂÄº„ÄÅÊòØÂê¶ÊúâÁ©∫ÂÄºÁ≠â„ÄÇ</p>
<p>Êé•‰∏ãÊù•ËØªÂèñÊñá‰ª∂ÁöÑFooter‰ø°ÊÅØÔºåÂÆÉÂåÖÂê´‰∫ÜÊØè‰∏Ä‰∏™stripeÁöÑÈïøÂ∫¶ÂíåÂÅèÁßªÈáèÔºåËØ•Êñá‰ª∂ÁöÑschema‰ø°ÊÅØ(Â∞ÜschemaÊ†ëÊåâÁÖßschema‰∏≠ÁöÑÁºñÂè∑‰øùÂ≠òÂú®Êï∞ÁªÑ‰∏≠)„ÄÅÊï¥‰∏™Êñá‰ª∂ÁöÑÁªüËÆ°‰ø°ÊÅØ‰ª•ÂèäÊØè‰∏Ä‰∏™row groupÁöÑË°åÊï∞„ÄÇ</p>
<p>Â§ÑÁêÜstripeÊó∂È¶ñÂÖà‰ªéFooter‰∏≠Ëé∑ÂèñÊØè‰∏Ä‰∏™stripeÁöÑÂÖ∂ÂÆû‰ΩçÁΩÆÂíåÈïøÂ∫¶„ÄÅÊØè‰∏Ä‰∏™stripeÁöÑFooterÊï∞ÊçÆ(ÂÖÉÊï∞ÊçÆÔºåËÆ∞ÂΩï‰∫ÜindexÂíådataÁöÑÁöÑÈïøÂ∫¶)ÔºåÊï¥‰∏™striperË¢´ÂàÜ‰∏∫indexÂíådata‰∏§ÈÉ®ÂàÜÔºåstripeÂÜÖÈÉ®ÊòØÊåâÁÖßrow groupËøõË°åÂàÜÂùóÁöÑ(ÊØè‰∏Ä‰∏™row group‰∏≠Â§öÂ∞ëÊù°ËÆ∞ÂΩïÂú®Êñá‰ª∂ÁöÑFooter‰∏≠Â≠òÂÇ®)Ôºårow groupÂÜÖÈÉ®ÊåâÂàóÂ≠òÂÇ®„ÄÇÊØè‰∏Ä‰∏™row groupÁî±Â§ö‰∏™stream‰øùÂ≠òÊï∞ÊçÆÂíåÁ¥¢Âºï‰ø°ÊÅØ„ÄÇÊØè‰∏Ä‰∏™streamÁöÑÊï∞ÊçÆ‰ºöÊ†πÊçÆËØ•ÂàóÁöÑÁ±ªÂûã‰ΩøÁî®ÁâπÂÆöÁöÑÂéãÁº©ÁÆóÊ≥ï‰øùÂ≠ò„ÄÇÂú®ORC‰∏≠Â≠òÂú®Â¶Ç‰∏ãÂá†ÁßçstreamÁ±ªÂûãÔºö</p>
<ol>
<li>PRESENTÔºöÊØè‰∏Ä‰∏™ÊàêÂëòÂÄºÂú®Ëøô‰∏™stream‰∏≠‰øùÊåÅ‰∏Ä‰Ωç(bit)Áî®‰∫éÊ†áÁ§∫ËØ•ÂÄºÊòØÂê¶‰∏∫NULLÔºåÈÄöËøáÂÆÉÂèØ‰ª•Âè™ËÆ∞ÂΩïÈÉ®‰ΩçNULLÁöÑÂÄº</li>
<li>DATAÔºöËØ•ÂàóÁöÑ‰∏≠Â±û‰∫éÂΩìÂâçstripeÁöÑÊàêÂëòÂÄº„ÄÇ</li>
<li>LENGTHÔºöÊØè‰∏Ä‰∏™ÊàêÂëòÁöÑÈïøÂ∫¶ÔºåËøô‰∏™ÊòØÈíàÂØπstringÁ±ªÂûãÁöÑÂàóÊâçÊúâÁöÑ„ÄÇ</li>
<li>DICTIONARY_DATAÔºöÂØπstringÁ±ªÂûãÊï∞ÊçÆÁºñÁ†Å‰πãÂêéÂ≠óÂÖ∏ÁöÑÂÜÖÂÆπ„ÄÇ</li>
<li>SECONDARYÔºöÂ≠òÂÇ®Decimal„ÄÅtimestampÁ±ªÂûãÁöÑÂ∞èÊï∞ÊàñËÄÖÁ∫≥ÁßíÊï∞Á≠â„ÄÇ</li>
<li>ROW_INDEXÔºö‰øùÂ≠òstripe‰∏≠ÊØè‰∏Ä‰∏™row groupÁöÑÁªüËÆ°‰ø°ÊÅØÂíåÊØè‰∏Ä‰∏™row groupËµ∑Âßã‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇ</li>
</ol>
<p>Âú®ÂàùÂßãÂåñÈò∂ÊÆµËé∑ÂèñÂÖ®ÈÉ®ÁöÑÂÖÉÊï∞ÊçÆ‰πãÂêéÔºåÂèØ‰ª•ÈÄöËøáincludesÊï∞ÁªÑÊåáÂÆöÈúÄË¶ÅËØªÂèñÁöÑÂàóÁºñÂè∑ÔºåÂÆÉÊòØ‰∏Ä‰∏™booleanÊï∞ÁªÑÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÂàôËØªÂèñÂÖ®ÈÉ®ÁöÑÂàóÔºåËøòÂèØ‰ª•ÈÄöËøá‰º†ÈÄíSearchArgumentÂèÇÊï∞ÊåáÂÆöËøáÊª§Êù°‰ª∂ÔºåÊ†πÊçÆÂÖÉÊï∞ÊçÆÈ¶ñÂÖàËØªÂèñÊØè‰∏Ä‰∏™stripe‰∏≠ÁöÑindex‰ø°ÊÅØÔºåÁÑ∂ÂêéÊ†πÊçÆindex‰∏≠ÁªüËÆ°‰ø°ÊÅØ‰ª•ÂèäSearchArgumentÂèÇÊï∞Á°ÆÂÆöÈúÄË¶ÅËØªÂèñÁöÑrow groupÁºñÂè∑ÔºåÂÜçÊ†πÊçÆincludesÊï∞ÊçÆÂÜ≥ÂÆöÈúÄË¶Å‰ªéËøô‰∫õrow group‰∏≠ËØªÂèñÁöÑÂàóÔºåÈÄöËøáËøô‰∏§Â±ÇÁöÑËøáÊª§ÈúÄË¶ÅËØªÂèñÁöÑÊï∞ÊçÆÂè™ÊòØÊï¥‰∏™stripeÂ§ö‰∏™Â∞èÊÆµÁöÑÂå∫Èó¥ÔºåÁÑ∂ÂêéORC‰ºöÂ∞ΩÂèØËÉΩÂêàÂπ∂Â§ö‰∏™Á¶ªÊï£ÁöÑÂå∫Èó¥Â∞ΩÂèØËÉΩÁöÑÂáèÂ∞ëI/OÊ¨°Êï∞„ÄÇÁÑ∂ÂêéÂÜçÊ†πÊçÆindex‰∏≠‰øùÂ≠òÁöÑ‰∏ã‰∏Ä‰∏™row groupÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØË∞ÉËá≥ËØ•stripe‰∏≠Á¨¨‰∏Ä‰∏™ÈúÄË¶ÅËØªÂèñÁöÑrow group‰∏≠„ÄÇ</p>
<p>Áî±‰∫éORC‰∏≠‰ΩøÁî®‰∫ÜÊõ¥Âä†Á≤æÁ°ÆÁöÑÁ¥¢Âºï‰ø°ÊÅØÔºå‰ΩøÂæóÂú®ËØªÂèñÊï∞ÊçÆÊó∂ÂèØ‰ª•ÊåáÂÆö‰ªé‰ªªÊÑè‰∏ÄË°åÂºÄÂßãËØªÂèñÔºåÊõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÁªüËÆ°‰ø°ÊÅØ‰ΩøÂæóËØªÂèñORCÊñá‰ª∂Ë∑≥ËøáÊï¥‰∏™row groupÔºåORCÈªòËÆ§‰ºöÂØπ‰ªª‰Ωï‰∏ÄÂùóÊï∞ÊçÆÂíåÁ¥¢Âºï‰ø°ÊÅØ‰ΩøÁî®ZLIBÂéãÁº©ÔºåÂõ†Ê≠§ORCÊñá‰ª∂Âç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥‰πüÊõ¥Â∞èÔºåËøôÁÇπÂú®ÂêéÈù¢ÁöÑÊµãËØïÂØπÊØî‰∏≠‰πüÊúâÊâÄÂç∞ËØÅ„ÄÇ</p>
<p>Âú®Êñ∞ÁâàÊú¨ÁöÑORC‰∏≠‰πüÂä†ÂÖ•‰∫ÜÂØπBloom FilterÁöÑÊîØÊåÅÔºåÂÆÉÂèØ‰ª•Ëøõ‰∏ÄÊ≠•ÊèêÂçáË∞ìËØç‰∏ãÊé®ÁöÑÊïàÁéáÔºåÂú®Hive 1.2.0ÁâàÊú¨‰ª•Âêé‰πüÂä†ÂÖ•‰∫ÜÂØπÊ≠§ÁöÑÊîØÊåÅ„ÄÇ</p>
<h2 id="ÊÄßËÉΩÊµãËØï"><a href="#ÊÄßËÉΩÊµãËØï" class="headerlink" title="ÊÄßËÉΩÊµãËØï"></a>ÊÄßËÉΩÊµãËØï</h2><p>‰∏∫‰∫ÜÂØπÊØîÊµãËØï‰∏§ÁßçÂ≠òÂÇ®Ê†ºÂºèÔºåÊàëÈÄâÊã©‰ΩøÁî®TPC-DSÊï∞ÊçÆÈõÜÂπ∂‰∏îÂØπÂÆÉËøõË°åÊîπÈÄ†‰ª•ÁîüÊàêÂÆΩË°®„ÄÅÂµåÂ•óÂíåÂ§öÂ±ÇÂµåÂ•óÁöÑÊï∞ÊçÆ„ÄÇ‰ΩøÁî®ÊúÄÂ∏∏Áî®ÁöÑHive‰Ωú‰∏∫SQLÂºïÊìéËøõË°åÊµãËØï„ÄÇ</p>
<h3 id="ÊµãËØïÁéØÂ¢É"><a href="#ÊµãËØïÁéØÂ¢É" class="headerlink" title="ÊµãËØïÁéØÂ¢É"></a>ÊµãËØïÁéØÂ¢É</h3><ul>
<li>HadoopÈõÜÁæ§ÔºöÁâ©ÁêÜÊµãËØïÈõÜÁæ§ÔºåÂõõÂè∞DataNode/NodeManagerÊú∫Âô®ÔºåÊØè‰∏™Êú∫Âô®32core+128GBÔºåÊµãËØïÊó∂‰ΩøÁî®Êï¥‰∏™ÈõÜÁæ§ÁöÑËµÑÊ∫ê„ÄÇ</li>
<li>HiveÔºöHive 1.2.1ÁâàÊú¨Ôºå‰ΩøÁî®hiveserver2ÂêØÂä®ÔºåÊú¨Êú∫MySql‰Ωú‰∏∫ÂÖÉÊï∞ÊçÆÂ∫ìÔºåjdbcÊñπÂºèÊèê‰∫§Êü•ËØ¢SQL</li>
<li>Êï∞ÊçÆÈõÜÔºö100GB TPC-DSÊï∞ÊçÆÈõÜÔºåÈÄâÂèñÂÖ∂‰∏≠ÁöÑStore_Sales‰∏∫‰∫ãÂÆûË°®ÁöÑÊ®°Âûã‰Ωú‰∏∫ÊµãËØïÊï∞ÊçÆ</li>
<li>Êü•ËØ¢SQLÔºöÈÄâÊã©TPC-DS‰∏≠Ê∂âÂèäÂà∞‰∏äËø∞Ê®°ÂûãÁöÑ10Êù°SQLÂπ∂ÂØπÂÖ∂ËøõË°åÊîπÈÄ†„ÄÇ</li>
</ul>
<h3 id="ÊµãËØïÂú∫ÊôØÂíåÁªìÊûú"><a href="#ÊµãËØïÂú∫ÊôØÂíåÁªìÊûú" class="headerlink" title="ÊµãËØïÂú∫ÊôØÂíåÁªìÊûú"></a>ÊµãËØïÂú∫ÊôØÂíåÁªìÊûú</h3><p>Êï¥‰∏™ÊµãËØïËÆæÁΩÆ‰∫ÜÂõõÁßçÂú∫ÊôØÔºåÊØè‰∏ÄÁßçÂú∫ÊôØ‰∏ãÂØπÊØîÊµãËØïÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÂíåÁõ∏ÂêåÊü•ËØ¢ÊâßË°åÊ∂àËÄóÁöÑÊó∂Èó¥ÂØπÊØîÔºåÈô§‰∫ÜÂú∫ÊôØ‰∏ÄÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜÂ§ñÔºåÂÖ∂‰ΩôÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶ÅËøõË°åÊï∞ÊçÆÂØºÂÖ•ÔºåÂêåÊó∂ÂØπÊØîËøôÂá†‰∏™Âú∫ÊôØÁöÑÊï∞ÊçÆÂØºÂÖ•Êó∂Èó¥„ÄÇ</p>
<h4 id="Âú∫ÊôØ‰∏ÄÔºö‰∏Ä‰∏™‰∫ãÂÆûË°®„ÄÅÂ§ö‰∏™Áª¥Â∫¶Ë°®ÔºåÂ§çÊùÇÁöÑjoinÊü•ËØ¢„ÄÇ"><a href="#Âú∫ÊôØ‰∏ÄÔºö‰∏Ä‰∏™‰∫ãÂÆûË°®„ÄÅÂ§ö‰∏™Áª¥Â∫¶Ë°®ÔºåÂ§çÊùÇÁöÑjoinÊü•ËØ¢„ÄÇ" class="headerlink" title="Âú∫ÊôØ‰∏ÄÔºö‰∏Ä‰∏™‰∫ãÂÆûË°®„ÄÅÂ§ö‰∏™Áª¥Â∫¶Ë°®ÔºåÂ§çÊùÇÁöÑjoinÊü•ËØ¢„ÄÇ"></a>Âú∫ÊôØ‰∏ÄÔºö‰∏Ä‰∏™‰∫ãÂÆûË°®„ÄÅÂ§ö‰∏™Áª¥Â∫¶Ë°®ÔºåÂ§çÊùÇÁöÑjoinÊü•ËØ¢„ÄÇ</h4><p>Âü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜ„ÄÇ</p>
<p>Store_SalesË°®ËÆ∞ÂΩïÊï∞Ôºö287,997,024ÔºåË°®Â§ßÂ∞è‰∏∫Ôºö</p>
<ul>
<li>ÂéüÂßãTextÊ†ºÂºèÔºåÊú™ÂéãÁº© : 38.1 G</li>
<li>ORCÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº©ÔºàZLIBÔºâ,‰∏ÄÂÖ±1800+‰∏™ÂàÜÂå∫ : 11.5 G</li>
<li>ParquetÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº©ÔºàSnappyÔºâÔºå‰∏ÄÂÖ±1800+‰∏™ÂàÜÂå∫ Ôºö 14.8 G</li>
</ul>
<p>Êü•ËØ¢ÊµãËØïÁªìÊûúÔºö</p>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119243155587.jpg" alt></center>

<h4 id="Âú∫ÊôØ‰∫åÔºöÁª¥Â∫¶Ë°®Âíå‰∫ãÂÆûË°®join‰πãÂêéÁîüÊàêÁöÑÂÆΩË°®ÔºåÂè™Âú®‰∏Ä‰∏™Ë°®‰∏äÂÅöÊü•ËØ¢„ÄÇ"><a href="#Âú∫ÊôØ‰∫åÔºöÁª¥Â∫¶Ë°®Âíå‰∫ãÂÆûË°®join‰πãÂêéÁîüÊàêÁöÑÂÆΩË°®ÔºåÂè™Âú®‰∏Ä‰∏™Ë°®‰∏äÂÅöÊü•ËØ¢„ÄÇ" class="headerlink" title="Âú∫ÊôØ‰∫åÔºöÁª¥Â∫¶Ë°®Âíå‰∫ãÂÆûË°®join‰πãÂêéÁîüÊàêÁöÑÂÆΩË°®ÔºåÂè™Âú®‰∏Ä‰∏™Ë°®‰∏äÂÅöÊü•ËØ¢„ÄÇ"></a>Âú∫ÊôØ‰∫åÔºöÁª¥Â∫¶Ë°®Âíå‰∫ãÂÆûË°®join‰πãÂêéÁîüÊàêÁöÑÂÆΩË°®ÔºåÂè™Âú®‰∏Ä‰∏™Ë°®‰∏äÂÅöÊü•ËØ¢„ÄÇ</h4><p>Êï¥‰∏™ÊµãËØïËÆæÁΩÆ‰∫ÜÂõõÁßçÂú∫ÊôØÔºåÊØè‰∏ÄÁßçÂú∫ÊôØ‰∏ãÂØπÊØîÊµãËØïÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÂíåÁõ∏ÂêåÊü•ËØ¢ÊâßË°åÊ∂àËÄóÁöÑÊó∂Èó¥ÂØπÊØîÔºåÈô§‰∫ÜÂú∫ÊôØ‰∏ÄÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜÂ§ñÔºåÂÖ∂‰ΩôÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶ÅËøõË°åÊï∞ÊçÆÂØºÂÖ•ÔºåÂêåÊó∂ÂØπÊØîËøôÂá†‰∏™Âú∫ÊôØÁöÑÊï∞ÊçÆÂØºÂÖ•Êó∂Èó¥„ÄÇÈÄâÂèñÊï∞ÊçÆÊ®°Âûã‰∏≠ÁöÑstore_sales, household_demographics, customer_address, date_dim, storeË°®ÁîüÊàê‰∏Ä‰∏™ÊâÅÂπ≥ÂºèÂÆΩË°®(store_sales_wide_table)ÔºåÂü∫‰∫éËøô‰∏™Ë°®ÊâßË°åÊü•ËØ¢ÔºåÁî±‰∫éÂú∫ÊôØ‰∏ÄÁßçÈÄâÊã©ÁöÑqueryÂ§ßÂ§öÊï∞‰∏çËÉΩÂÆåÂÖ®matchÂà∞Ëøô‰∏™ÂÆΩË°®ÔºåÊâÄ‰ª•ÂØπÂú∫ÊôØ1‰∏≠ÁöÑSQLËøõË°åÈÉ®ÂàÜÊîπÈÄ†„ÄÇ</p>
<p>store_sales_wide_tableË°®ËÆ∞ÂΩïÊï∞Ôºö263,704,266ÔºåË°®Â§ßÂ∞è‰∏∫Ôºö</p>
<ul>
<li>ÂéüÂßãTextÊ†ºÂºèÔºåÊú™ÂéãÁº© Ôºö 149.0 G</li>
<li>ORCÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 10.6 G</li>
<li>PARQUETÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 12.5 G</li>
</ul>
<p>Êü•ËØ¢ÊµãËØïÁªìÊûúÔºö</p>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119243950348.jpg" alt><br></center>

<h4 id="Âú∫ÊôØ‰∏âÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÁªÑÊàêÁöÑÂÆΩË°®Ôºåstruct„ÄÅlist„ÄÅmapÁ≠âÔºà1Â±ÇÔºâ"><a href="#Âú∫ÊôØ‰∏âÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÁªÑÊàêÁöÑÂÆΩË°®Ôºåstruct„ÄÅlist„ÄÅmapÁ≠âÔºà1Â±ÇÔºâ" class="headerlink" title="Âú∫ÊôØ‰∏âÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÁªÑÊàêÁöÑÂÆΩË°®Ôºåstruct„ÄÅlist„ÄÅmapÁ≠âÔºà1Â±ÇÔºâ"></a>Âú∫ÊôØ‰∏âÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÁªÑÊàêÁöÑÂÆΩË°®Ôºåstruct„ÄÅlist„ÄÅmapÁ≠âÔºà1Â±ÇÔºâ</h4><p>Êï¥‰∏™ÊµãËØïËÆæÁΩÆ‰∫ÜÂõõÁßçÂú∫ÊôØÔºåÊØè‰∏ÄÁßçÂú∫ÊôØ‰∏ãÂØπÊØîÊµãËØïÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÂíåÁõ∏ÂêåÊü•ËØ¢ÊâßË°åÊ∂àËÄóÁöÑÊó∂Èó¥ÂØπÊØîÔºåÈô§‰∫ÜÂú∫ÊôØ‰∏ÄÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜÂ§ñÔºåÂÖ∂‰ΩôÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶ÅËøõË°åÊï∞ÊçÆÂØºÂÖ•ÔºåÂêåÊó∂ÂØπÊØîËøôÂá†‰∏™Âú∫ÊôØÁöÑÊï∞ÊçÆÂØºÂÖ•Êó∂Èó¥„ÄÇÂú®Âú∫ÊôØ‰∫åÁöÑÂü∫Á°Ä‰∏äÔºåÂ∞ÜÁª¥Â∫¶Ë°®ÔºàÈô§‰∫Üstore_salesË°®ÔºâËΩ¨Êç¢Êàê‰∏Ä‰∏™structÊàñËÄÖmapÂØπË±°ÔºåÊ∫êstore_salesË°®‰∏≠ÁöÑÂ≠óÊÆµ‰øùÊåÅ‰∏çÂèò„ÄÇÁîüÊàêÊúâ‰∏ÄÂ±ÇÂµåÂ•óÁöÑÊñ∞Ë°®Ôºàstore_sales_wide_table_one_nestedÔºâÔºå‰ΩøÁî®ÁöÑÊü•ËØ¢ÈÄªËæëÁõ∏Âêå„ÄÇ</p>
<p>store_sales_wide_table_one_nestedË°®ËÆ∞ÂΩïÊï∞Ôºö263,704,266ÔºåË°®Â§ßÂ∞è‰∏∫Ôºö</p>
<ul>
<li>ÂéüÂßãTextÊ†ºÂºèÔºåÊú™ÂéãÁº© Ôºö 245.3 G</li>
<li>ORCÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 10.9 G </li>
<li>PARQUETÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 29.8 G</li>
</ul>
<p>Êü•ËØ¢ÊµãËØïÁªìÊûúÔºö</p>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119244638287.jpg" alt><br></center>

<h4 id="Âú∫ÊôØÂõõÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ§öÂ±ÇÂµåÂ•ó„ÄÇÔºà3Â±ÇÔºâ"><a href="#Âú∫ÊôØÂõõÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ§öÂ±ÇÂµåÂ•ó„ÄÇÔºà3Â±ÇÔºâ" class="headerlink" title="Âú∫ÊôØÂõõÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ§öÂ±ÇÂµåÂ•ó„ÄÇÔºà3Â±ÇÔºâ"></a>Âú∫ÊôØÂõõÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ§öÂ±ÇÂµåÂ•ó„ÄÇÔºà3Â±ÇÔºâ</h4><p>Êï¥‰∏™ÊµãËØïËÆæÁΩÆ‰∫ÜÂõõÁßçÂú∫ÊôØÔºåÊØè‰∏ÄÁßçÂú∫ÊôØ‰∏ãÂØπÊØîÊµãËØïÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÂíåÁõ∏ÂêåÊü•ËØ¢ÊâßË°åÊ∂àËÄóÁöÑÊó∂Èó¥ÂØπÊØîÔºåÈô§‰∫ÜÂú∫ÊôØ‰∏ÄÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜÂ§ñÔºåÂÖ∂‰ΩôÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶ÅËøõË°åÊï∞ÊçÆÂØºÂÖ•ÔºåÂêåÊó∂ÂØπÊØîËøôÂá†‰∏™Âú∫ÊôØÁöÑÊï∞ÊçÆÂØºÂÖ•Êó∂Èó¥„ÄÇÂú®Âú∫ÊôØ‰∏âÁöÑÂü∫Á°Ä‰∏äÔºåÂ∞ÜÈÉ®ÂàÜÁª¥Â∫¶Ë°®ÁöÑstructÂÜÖÁöÑÂ≠óÊÆµÂÜçËΩ¨Êç¢ÊàêstructÊàñËÄÖmapÂØπË±°ÔºåÂè™Â≠òÂú®struct‰∏≠ÂµåÂ•ómapÁöÑÊÉÖÂÜµÔºåÊúÄÊ∑±ÁöÑÂµåÂ•ó‰∏∫‰∏âÂ±Ç„ÄÇÁîüÊàê‰∏Ä‰∏™Â§öÂ±ÇÂµåÂ•óÁöÑÊñ∞Ë°®Ôºàstore_sales_wide_table_more_nestedÔºâÔºå‰ΩøÁî®ÁöÑÊü•ËØ¢ÈÄªËæëÁõ∏Âêå„ÄÇ</p>
<p>ËØ•Âú∫ÊôØ‰∏≠Âè™Ê∂âÂèä‰∏Ä‰∏™Â§öÂ±ÇÂµåÂ•óÁöÑÂÆΩË°®ÔºåÊ≤°Êúâ‰ªª‰ΩïÂàÜÂå∫Â≠óÊÆµÔºåstore_sales_wide_table_more_nestedË°®ËÆ∞ÂΩïÊï∞Ôºö263,704,266ÔºåË°®Â§ßÂ∞è‰∏∫Ôºö</p>
<ul>
<li>ÂéüÂßãTextÊ†ºÂºèÔºåÊú™ÂéãÁº© Ôºö 222.7 G</li>
<li>ORCÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 10.9 G </li>
<li>PARQUETÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 23.1 G ÊØî‰∏ÄÂ±ÇÂµåÂ•óË°®store_sales_wide_table_one_nestedË¶ÅÂ∞èÔºü</li>
</ul>
<p>Êü•ËØ¢ÊµãËØïÁªìÊûúÔºö</p>
<center><img src="http://oliji9s3j.bkt.clouddn.com/15119245211902.jpg" alt></center>

<h3 id="ÁªìÊûúÂàÜÊûê"><a href="#ÁªìÊûúÂàÜÊûê" class="headerlink" title="ÁªìÊûúÂàÜÊûê"></a>ÁªìÊûúÂàÜÊûê</h3><p>‰ªé‰∏äËø∞ÊµãËØïÁªìÊûúÊù•ÁúãÔºåÊòüÁä∂Ê®°ÂûãÂØπ‰∫éÊï∞ÊçÆÂàÜÊûêÂú∫ÊôØÂπ∂‰∏çÊòØÂæàÂêàÈÄÇÔºåÂ§ö‰∏™Ë°®ÁöÑjoin‰ºöÂ§ßÂ§ßÊãñÊÖ¢Êü•ËØ¢ÈÄüÂ∫¶ÔºåÂπ∂‰∏î‰∏çËÉΩÂæàÂ•ΩÁöÑÂà©Áî®ÂàóÂºèÂ≠òÂÇ®Â∏¶Êù•ÁöÑÊÄßËÉΩÊèêÂçáÔºåÂú®‰ΩøÁî®ÂÆΩË°®ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂàóÂºèÂ≠òÂÇ®ÁöÑÊÄßËÉΩÊèêÂçáÊòéÊòæÔºåORCÊñá‰ª∂Ê†ºÂºèÂú®Â≠òÂÇ®Á©∫Èó¥‰∏äË¶ÅËøú‰ºò‰∫éTextÊ†ºÂºèÔºåËæÉ‰πã‰∫éPARQUETÊ†ºÂºèÊúâ‰∏ÄÂÄçÁöÑÂ≠òÂÇ®Á©∫Èó¥ÊèêÂçáÔºåÂú®ÂØºÊï∞ÊçÆÔºàinsert into table select ËøôÊ†∑ÁöÑÊñπÂºèÔºâÊñπÈù¢ORCÊ†ºÂºè‰πüË¶Å‰ºò‰∫éPARQUETÔºåÂú®ÊúÄÁªàÁöÑÊü•ËØ¢ÊÄßËÉΩ‰∏äÂèØ‰ª•ÁúãÂà∞ÔºåÊó†ËÆ∫ÊòØÊó†ÂµåÂ•óÁöÑÊâÅÂπ≥ÂºèÂÆΩË°®ÔºåÊàñÊòØ‰∏ÄÂ±ÇÂµåÂ•óË°®ÔºåËøòÊòØÂ§öÂ±ÇÂµåÂ•óÁöÑÂÆΩË°®Ôºå‰∏§ËÄÖÁöÑÊü•ËØ¢ÊÄßËÉΩÁõ∏Â∑Æ‰∏çÂ§öÔºåËæÉ‰πã‰∫éTextÊ†ºÂºèÊúâ2Âà∞3ÂÄçÂ∑¶Âè≥ÁöÑÊèêÂçá„ÄÇ</p>
<p>Âè¶Â§ñÔºåÈÄöËøáÂØπÊØîÂú∫ÊôØ‰∫åÂíåÂú∫ÊôØ‰∏âÁöÑÊµãËØïÁªìÊûúÔºåÂèØ‰ª•ÂèëÁé∞ÊâÅÂπ≥ÂºèÁöÑË°®ÁªìÊûÑË¶ÅÊØîÂµåÂ•óÂºèÁªìÊûÑÁöÑÊü•ËØ¢ÊÄßËÉΩÊúâÊâÄÊèêÂçáÔºåÊâÄ‰ª•Â¶ÇÊûúÈÄâÊã©‰ΩøÁî®Â§ßÂÆΩË°®ÔºåÂàôËÆæËÆ°ÂÆΩË°®ÁöÑÊó∂ÂÄôÂ∞ΩÂèØËÉΩÁöÑÂ∞ÜË°®ËÆæËÆ°ÁöÑÊâÅÂπ≥ÂåñÔºåÂáèÂ∞ëÂµåÂ•óÊï∞ÊçÆ„ÄÇ</p>
<p>ÈÄöËøáËøô‰∏âÁßçÊñá‰ª∂Â≠òÂÇ®Ê†ºÂºèÁöÑÊµãËØïÂØπÊØîÔºåORCÊñá‰ª∂Â≠òÂÇ®Ê†ºÂºèÊó†ËÆ∫ÊòØÂú®Á©∫Èó¥Â≠òÂÇ®„ÄÅÂØºÊï∞ÊçÆÈÄüÂ∫¶ËøòÊòØÊü•ËØ¢ÈÄüÂ∫¶‰∏äË°®Áé∞ÁöÑÈÉΩËæÉÂ•Ω‰∏Ä‰∫õÔºåÂπ∂‰∏îORCÂèØ‰ª•‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÊîØÊåÅACIDÊìç‰ΩúÔºåÁ§æÂå∫ÁöÑÂèëÂ±ïÁõÆÂâç‰πüÊòØHive‰∏≠ÊØîËæÉÊèêÂÄ°‰ΩøÁî®ÁöÑ‰∏ÄÁßçÂàóÂºèÂ≠òÂÇ®Ê†ºÂºèÔºåÂè¶Â§ñÔºåÊú¨Ê¨°ÊµãËØï‰∏ªË¶ÅÈíàÂØπÁöÑÊòØHiveÂºïÊìéÔºåÊâÄ‰ª•‰∏çÊéíÈô§Â≠òÂú®Hive‰∏éORCÁöÑÊïèÊÑüÂ∫¶ÊØîPARQUETË¶ÅÈ´òÁöÑÂèØËÉΩÊÄß„ÄÇ</p>
<h2 id="ÊÄªÁªì"><a href="#ÊÄªÁªì" class="headerlink" title="ÊÄªÁªì"></a>ÊÄªÁªì</h2><p>Êú¨Êñá‰∏ªË¶Å‰ªéÊï∞ÊçÆÊ®°Âûã„ÄÅÊñá‰ª∂Ê†ºÂºèÂíåÊï∞ÊçÆËÆøÈóÆÊµÅÁ®ãÁ≠âÂá†‰∏™ÊñπÈù¢ËØ¶ÁªÜ‰ªãÁªç‰∫ÜHadoopÁîüÊÄÅÂúà‰∏≠ÁöÑ‰∏§ÁßçÂàóÂºèÂ≠òÂÇ®Ê†ºÂºè‚Äî‚ÄîParquetÂíåORCÔºåÂπ∂ÈÄöËøáÂ§ßÊï∞ÊçÆÈáèÁöÑÊµãËØïÂØπ‰∏§ËÄÖÁöÑÂ≠òÂÇ®ÂíåÊü•ËØ¢ÊÄßËÉΩËøõË°å‰∫ÜÂØπÊØî„ÄÇÂØπ‰∫éÂ§ßÊï∞ÊçÆÂú∫ÊôØ‰∏ãÁöÑÊï∞ÊçÆÂàÜÊûêÈúÄÊ±ÇÔºå‰ΩøÁî®Ëøô‰∏§ÁßçÂ≠òÂÇ®Ê†ºÂºèÊÄª‰ºöÂ∏¶Êù•Â≠òÂÇ®ÂíåÊÄßËÉΩ‰∏äÁöÑÊèêÂçáÔºå‰ΩÜÊòØÂú®ÂÆûÈôÖ‰ΩøÁî®Êó∂ËøòÈúÄË¶ÅÈíàÂØπÂÆûÈôÖÁöÑÊï∞ÊçÆËøõË°åÈÄâÊã©„ÄÇÂè¶Â§ñÁî±‰∫é‰∏çÂêåÂºÄÊ∫ê‰∫ßÂìÅÂèØËÉΩÂØπ‰∏çÂêåÁöÑÂ≠òÂÇ®Ê†ºÂºèÊúâÁâπÂÆöÁöÑ‰ºòÂåñÔºåÊâÄ‰ª•ÈÄâÊã©Êó∂ËøòÈúÄË¶ÅËÄÉËôëÊü•ËØ¢ÂºïÊìéÁöÑÂõ†Á¥†„ÄÇ</p>
<p>ÊãìÂ±ïÈòÖËØªÔºö<a href="https://stanxia.github.io/2017/11/01/spark%E5%85%B3%E4%BA%8Eparquet%E7%9A%84%E4%BC%98%E5%8C%96/">sparkÂÖ≥‰∫éparquetÁöÑ‰ºòÂåñ</a></p>
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
            <tag> parquet </tag>
            
            <tag> orc </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sparkÂàÜÂ±ÇÂèñÊ†∑]]></title>
      <url>https://stanxia.github.io/2017/11/27/spark%E5%88%86%E5%B1%82%E5%8F%96%E6%A0%B7/</url>
      <content type="html"><![CDATA[<p>ÂÖàÂ∞ÜÊÄª‰ΩìÁöÑÂçï‰ΩçÊåâÊüêÁßçÁâπÂæÅÂàÜ‰∏∫Ëã•Âπ≤Ê¨°Á∫ßÊÄª‰ΩìÔºàÂ±ÇÔºâÔºåÁÑ∂ÂêéÂÜç‰ªéÊØè‰∏ÄÂ±ÇÂÜÖËøõË°åÂçïÁ∫ØÈöèÊú∫ÊäΩÊ†∑ÔºåÁªÑÊàê‰∏Ä‰∏™Ê†∑Êú¨ÁöÑÁªüËÆ°Â≠¶ËÆ°ÁÆóÊñπÊ≥ïÂè´ÂÅöÂàÜÂ±ÇÊäΩÊ†∑„ÄÇÂú®<code>spark.mllib</code>‰∏≠ÔºåÁî®<code>key</code>Êù•ÂàÜÂ±Ç„ÄÇ</p>
<p>‰∏éÂ≠òÂú®‰∫é<code>spark.mllib</code>‰∏≠ÁöÑÂÖ∂ÂÆÉÁªüËÆ°ÂáΩÊï∞‰∏çÂêåÔºåÂàÜÂ±ÇÈááÊ†∑ÊñπÊ≥ï<code>sampleByKey</code>Âíå<code>sampleByKeyExact</code>ÂèØ‰ª•Âú®<code>key-value</code>ÂØπÁöÑ<code>RDD</code>‰∏äÊâßË°å„ÄÇÂú®ÂàÜÂ±ÇÈááÊ†∑‰∏≠ÔºåÂèØ‰ª•ËÆ§‰∏∫<code>key</code>ÊòØ‰∏Ä‰∏™Ê†áÁ≠æÔºå<br><code>value</code>ÊòØÁâπÂÆöÁöÑÂ±ûÊÄß„ÄÇ‰æãÂ¶ÇÔºå<code>key</code>ÂèØ‰ª•ÊòØÁî∑‰∫∫ÊàñËÄÖÂ•≥‰∫∫ÊàñËÄÖÊñáÊ°£<code>id</code>,ÂÆÉÁõ∏Â∫îÁöÑ<code>value</code>ÂèØËÉΩÊòØ‰∏ÄÁªÑÂπ¥ÈæÑÊàñËÄÖÊòØÊñáÊ°£‰∏≠ÁöÑËØç„ÄÇ<code>sampleByKey</code>ÊñπÊ≥ïÈÄöËøáÊé∑Á°¨Â∏ÅÁöÑÊñπÂºèÂÜ≥ÂÆöÊòØÂê¶ÈááÊ†∑‰∏Ä‰∏™ËßÇÂØüÊï∞ÊçÆÔºå<br>Âõ†Ê≠§ÂÆÉÈúÄË¶ÅÊàë‰ª¨‰º†ÈÄíÔºà<code>pass over</code>ÔºâÊï∞ÊçÆÂπ∂‰∏îÊèê‰æõÊúüÊúõÁöÑÊï∞ÊçÆÂ§ßÂ∞è(<code>size</code>)„ÄÇ<code>sampleByKeyExact</code>ÊØîÊØèÂ±Ç‰ΩøÁî®<code>sampleByKey</code>ÈöèÊú∫ÊäΩÊ†∑ÈúÄË¶ÅÊõ¥Â§öÁöÑÊúâÊÑè‰πâÁöÑËµÑÊ∫êÔºå‰ΩÜÊòØÂÆÉËÉΩ‰ΩøÊ†∑Êú¨Â§ßÂ∞èÁöÑÂáÜÁ°ÆÊÄßËææÂà∞‰∫Ü<code>99.99%</code>„ÄÇ</p>
<p><a href="https://spark.apache.org/docs/latest/api/scala/index.html#org.apache.spark.rdd.PairRDDFunctions" target="_blank" rel="noopener">sampleByKeyExact()</a>ÂÖÅËÆ∏Áî®Êà∑ÂáÜÁ°ÆÊäΩÂèñ<code>f_k * n_k</code>‰∏™Ê†∑Êú¨Ôºå<br>ËøôÈáå<code>f_k</code>Ë°®Á§∫ÊúüÊúõËé∑ÂèñÈîÆ‰∏∫<code>k</code>ÁöÑÊ†∑Êú¨ÁöÑÊØî‰æãÔºå<code>n_k</code>Ë°®Á§∫ÈîÆ‰∏∫<code>k</code>ÁöÑÈîÆÂÄºÂØπÁöÑÊï∞Èáè„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰ΩøÁî®ÁöÑ‰æãÂ≠êÔºö</p>
<a id="more"></a>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span></span><br><span class="line"><span class="keyword">import</span> org.apache.spark.<span class="type">SparkContext</span>._</span><br><span class="line"><span class="keyword">import</span> org.apache.spark.rdd.<span class="type">PairRDDFunctions</span></span><br><span class="line"><span class="keyword">val</span> sc: <span class="type">SparkContext</span> = ...</span><br><span class="line"><span class="keyword">val</span> data = ... <span class="comment">// an RDD[(K, V)] of any key value pairs</span></span><br><span class="line"><span class="keyword">val</span> fractions: <span class="type">Map</span>[<span class="type">K</span>, <span class="type">Double</span>] = ... <span class="comment">// specify the exact fraction desired from each key</span></span><br><span class="line"><span class="comment">// Get an exact sample from each stratum</span></span><br><span class="line"><span class="keyword">val</span> approxSample = data.sampleByKey(withReplacement = <span class="literal">false</span>, fractions)</span><br><span class="line"><span class="keyword">val</span> exactSample = data.sampleByKeyExact(withReplacement = <span class="literal">false</span>, fractions)</span><br></pre></td></tr></table></figure>
<p>ÂΩì<code>withReplacement</code>‰∏∫<code>true</code>Êó∂ÔºåÈááÁî®<code>PoissonSampler</code>ÂèñÊ†∑Âô®ÔºåÂΩì<code>withReplacement</code>‰∏∫<code>false</code>‰ΩøÔºåÈááÁî®<code>BernoulliSampler</code>ÂèñÊ†∑Âô®„ÄÇ</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sampleByKey</span></span>(withReplacement: <span class="type">Boolean</span>,</span><br><span class="line">      fractions: <span class="type">Map</span>[<span class="type">K</span>, <span class="type">Double</span>],</span><br><span class="line">      seed: <span class="type">Long</span> = <span class="type">Utils</span>.random.nextLong): <span class="type">RDD</span>[(<span class="type">K</span>, <span class="type">V</span>)] = self.withScope &#123;</span><br><span class="line">    <span class="keyword">val</span> samplingFunc = <span class="keyword">if</span> (withReplacement) &#123;</span><br><span class="line">      <span class="type">StratifiedSamplingUtils</span>.getPoissonSamplingFunction(self, fractions, <span class="literal">false</span>, seed)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="type">StratifiedSamplingUtils</span>.getBernoulliSamplingFunction(self, fractions, <span class="literal">false</span>, seed)</span><br><span class="line">    &#125;</span><br><span class="line">    self.mapPartitionsWithIndex(samplingFunc, preservesPartitioning = <span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sampleByKeyExact</span></span>(</span><br><span class="line">      withReplacement: <span class="type">Boolean</span>,</span><br><span class="line">      fractions: <span class="type">Map</span>[<span class="type">K</span>, <span class="type">Double</span>],</span><br><span class="line">      seed: <span class="type">Long</span> = <span class="type">Utils</span>.random.nextLong): <span class="type">RDD</span>[(<span class="type">K</span>, <span class="type">V</span>)] = self.withScope &#123;</span><br><span class="line">    <span class="keyword">val</span> samplingFunc = <span class="keyword">if</span> (withReplacement) &#123;</span><br><span class="line">      <span class="type">StratifiedSamplingUtils</span>.getPoissonSamplingFunction(self, fractions, <span class="literal">true</span>, seed)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="type">StratifiedSamplingUtils</span>.getBernoulliSamplingFunction(self, fractions, <span class="literal">true</span>, seed)</span><br><span class="line">    &#125;</span><br><span class="line">    self.mapPartitionsWithIndex(samplingFunc, preservesPartitioning = <span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>‰∏ãÈù¢Êàë‰ª¨ÂàÜÂà´Êù•Áúã<code>sampleByKey</code>Âíå<code>sampleByKeyExact</code>ÁöÑÂÆûÁé∞„ÄÇ</p>
<h2 id="sampleByKeyÁöÑÂÆûÁé∞"><a href="#sampleByKeyÁöÑÂÆûÁé∞" class="headerlink" title="sampleByKeyÁöÑÂÆûÁé∞"></a><code>sampleByKey</code>ÁöÑÂÆûÁé∞</h2><p>ÂΩìÊàë‰ª¨ÈúÄË¶Å‰∏çÈáçÂ§çÊäΩÊ†∑Êó∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÁî®Ê≥äÊùæÊäΩÊ†∑Âô®Êù•ÊäΩÊ†∑„ÄÇÂΩìÈúÄË¶ÅÈáçÂ§çÊäΩÊ†∑Êó∂ÔºåÁî®‰ºØÂä™Âà©ÊäΩÊ†∑Âô®ÊäΩÊ†∑„ÄÇ<code>sampleByKey</code>ÁöÑÂÆûÁé∞ÊØîËæÉÁÆÄÂçïÔºåÂÆÉÂ∞±ÊòØÁªü‰∏ÄÁöÑÈöèÊú∫ÊäΩÊ†∑„ÄÇ</p>
<h3 id="Ê≥äÊùæÊäΩÊ†∑Âô®"><a href="#Ê≥äÊùæÊäΩÊ†∑Âô®" class="headerlink" title="Ê≥äÊùæÊäΩÊ†∑Âô®"></a>Ê≥äÊùæÊäΩÊ†∑Âô®</h3><p>Êàë‰ª¨È¶ñÂÖàÁúãÊ≥äÊùæÊäΩÊ†∑Âô®ÁöÑÂÆûÁé∞„ÄÇ</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getPoissonSamplingFunction</span></span>[<span class="type">K</span>: <span class="type">ClassTag</span>, <span class="type">V</span>: <span class="type">ClassTag</span>](rdd: <span class="type">RDD</span>[(<span class="type">K</span>, <span class="type">V</span>)],</span><br><span class="line">      fractions: <span class="type">Map</span>[<span class="type">K</span>, <span class="type">Double</span>],</span><br><span class="line">      exact: <span class="type">Boolean</span>,</span><br><span class="line">      seed: <span class="type">Long</span>): (<span class="type">Int</span>, <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)]) =&gt; <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)] = &#123;</span><br><span class="line">      (idx: <span class="type">Int</span>, iter: <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)]) =&gt; &#123;</span><br><span class="line">              <span class="comment">//ÂàùÂßãÂåñÈöèÊú∫ÁîüÊàêÂô®</span></span><br><span class="line">              <span class="keyword">val</span> rng = <span class="keyword">new</span> <span class="type">RandomDataGenerator</span>()</span><br><span class="line">              rng.reSeed(seed + idx)</span><br><span class="line">              iter.flatMap &#123; item =&gt;</span><br><span class="line">                <span class="comment">//Ëé∑Âæó‰∏ã‰∏Ä‰∏™Ê≥äÊùæÂÄº</span></span><br><span class="line">                <span class="keyword">val</span> count = rng.nextPoisson(fractions(item._1))</span><br><span class="line">                <span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">                  <span class="type">Iterator</span>.empty</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                  <span class="type">Iterator</span>.fill(count)(item)</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>getPoissonSamplingFunction</code>ËøîÂõûÁöÑÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ôºå‰º†ÈÄíÁªô<code>mapPartitionsWithIndex</code>Â§ÑÁêÜÊØè‰∏™ÂàÜÂå∫ÁöÑÊï∞ÊçÆ„ÄÇËøôÈáå<code>RandomDataGenerator</code>ÊòØ‰∏Ä‰∏™ÈöèÊú∫ÁîüÊàêÂô®ÔºåÂÆÉÁî®‰∫éÂêåÊó∂ÁîüÊàêÂùáÂåÄÂÄº(<code>uniform values</code>)ÂíåÊ≥äÊùæÂÄº(<code>Poisson values</code>)„ÄÇ</p>
<h3 id="‰ºØÂä™Âà©ÊäΩÊ†∑Âô®"><a href="#‰ºØÂä™Âà©ÊäΩÊ†∑Âô®" class="headerlink" title="‰ºØÂä™Âà©ÊäΩÊ†∑Âô®"></a>‰ºØÂä™Âà©ÊäΩÊ†∑Âô®</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getBernoulliSamplingFunction</span></span>[<span class="type">K</span>, <span class="type">V</span>](rdd: <span class="type">RDD</span>[(<span class="type">K</span>, <span class="type">V</span>)],</span><br><span class="line">      fractions: <span class="type">Map</span>[<span class="type">K</span>, <span class="type">Double</span>],</span><br><span class="line">      exact: <span class="type">Boolean</span>,</span><br><span class="line">      seed: <span class="type">Long</span>): (<span class="type">Int</span>, <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)]) =&gt; <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)] = &#123;</span><br><span class="line">    <span class="keyword">var</span> samplingRateByKey = fractions</span><br><span class="line">    (idx: <span class="type">Int</span>, iter: <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)]) =&gt; &#123;</span><br><span class="line">      <span class="comment">//ÂàùÂßãÂåñÈöèÊú∫ÁîüÊàêÂô®</span></span><br><span class="line">      <span class="keyword">val</span> rng = <span class="keyword">new</span> <span class="type">RandomDataGenerator</span>()</span><br><span class="line">      rng.reSeed(seed + idx)</span><br><span class="line">      <span class="comment">// Must use the same invoke pattern on the rng as in getSeqOp for without replacement</span></span><br><span class="line">      <span class="comment">// in order to generate the same sequence of random numbers when creating the sample</span></span><br><span class="line">      iter.filter(t =&gt; rng.nextUniform() &lt; samplingRateByKey(t._1))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="sampleByKeyExactÁöÑÂÆûÁé∞"><a href="#sampleByKeyExactÁöÑÂÆûÁé∞" class="headerlink" title="sampleByKeyExactÁöÑÂÆûÁé∞"></a><code>sampleByKeyExact</code>ÁöÑÂÆûÁé∞</h2><p><code>sampleByKeyExact</code>Ëé∑ÂèñÊõ¥ÂáÜÁ°ÆÁöÑÊäΩÊ†∑ÁªìÊûúÔºåÂÆÉÁöÑÂÆûÁé∞‰πüÂàÜ‰∏∫‰∏§ÁßçÊÉÖÂÜµÔºåÈáçÂ§çÊäΩÊ†∑Âíå‰∏çÈáçÂ§çÊäΩÊ†∑„ÄÇÂâçËÄÖ‰ΩøÁî®Ê≥äÊùæÊäΩÊ†∑Âô®ÔºåÂêéËÄÖ‰ΩøÁî®‰ºØÂä™Âà©ÊäΩÊ†∑Âô®„ÄÇ</p>
<h3 id="Ê≥äÊùæÊäΩÊ†∑Âô®-1"><a href="#Ê≥äÊùæÊäΩÊ†∑Âô®-1" class="headerlink" title="Ê≥äÊùæÊäΩÊ†∑Âô®"></a>Ê≥äÊùæÊäΩÊ†∑Âô®</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> counts = <span class="type">Some</span>(rdd.countByKey())</span><br><span class="line"><span class="comment">//ËÆ°ÁÆóÁ´ãÂç≥Êé•ÂèóÁöÑÊ†∑Êú¨Êï∞ÈáèÔºåÂπ∂‰∏î‰∏∫ÊØèÂ±ÇÁîüÊàêÂÄôÈÄâÂêçÂçï</span></span><br><span class="line"><span class="keyword">val</span> finalResult = getAcceptanceResults(rdd, <span class="literal">true</span>, fractions, counts, seed)</span><br><span class="line"><span class="comment">//ÂÜ≥ÂÆöÊé•ÂèóÊ†∑Êú¨ÁöÑÈòàÂÄºÔºåÁîüÊàêÂáÜÁ°ÆÁöÑÊ†∑Êú¨Â§ßÂ∞è</span></span><br><span class="line"><span class="keyword">val</span> thresholdByKey = computeThresholdByKey(finalResult, fractions)</span><br><span class="line">(idx: <span class="type">Int</span>, iter: <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)]) =&gt; &#123;</span><br><span class="line">     <span class="keyword">val</span> rng = <span class="keyword">new</span> <span class="type">RandomDataGenerator</span>()</span><br><span class="line">     rng.reSeed(seed + idx)</span><br><span class="line">     iter.flatMap &#123; item =&gt;</span><br><span class="line">          <span class="keyword">val</span> key = item._1</span><br><span class="line">          <span class="keyword">val</span> acceptBound = finalResult(key).acceptBound</span><br><span class="line">          <span class="comment">// Must use the same invoke pattern on the rng as in getSeqOp for with replacement</span></span><br><span class="line">          <span class="comment">// in order to generate the same sequence of random numbers when creating the sample</span></span><br><span class="line">          <span class="keyword">val</span> copiesAccepted = <span class="keyword">if</span> (acceptBound == <span class="number">0</span>) <span class="number">0</span>L <span class="keyword">else</span> rng.nextPoisson(acceptBound)</span><br><span class="line">          <span class="comment">//ÂÄôÈÄâÂêçÂçï</span></span><br><span class="line">          <span class="keyword">val</span> copiesWaitlisted = rng.nextPoisson(finalResult(key).waitListBound)</span><br><span class="line">          <span class="keyword">val</span> copiesInSample = copiesAccepted +</span><br><span class="line">            (<span class="number">0</span> until copiesWaitlisted).count(i =&gt; rng.nextUniform() &lt; thresholdByKey(key))</span><br><span class="line">          <span class="keyword">if</span> (copiesInSample &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="type">Iterator</span>.fill(copiesInSample.toInt)(item)</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">Iterator</span>.empty</span><br><span class="line">          &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="‰ºØÂä™Âà©ÊäΩÊ†∑"><a href="#‰ºØÂä™Âà©ÊäΩÊ†∑" class="headerlink" title="‰ºØÂä™Âà©ÊäΩÊ†∑"></a>‰ºØÂä™Âà©ÊäΩÊ†∑</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getBernoulliSamplingFunction</span></span>[<span class="type">K</span>, <span class="type">V</span>](rdd: <span class="type">RDD</span>[(<span class="type">K</span>, <span class="type">V</span>)],</span><br><span class="line">      fractions: <span class="type">Map</span>[<span class="type">K</span>, <span class="type">Double</span>],</span><br><span class="line">      exact: <span class="type">Boolean</span>,</span><br><span class="line">      seed: <span class="type">Long</span>): (<span class="type">Int</span>, <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)]) =&gt; <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)] = &#123;</span><br><span class="line">    <span class="keyword">var</span> samplingRateByKey = fractions</span><br><span class="line">    <span class="comment">//ËÆ°ÁÆóÁ´ãÂç≥Êé•ÂèóÁöÑÊ†∑Êú¨Êï∞ÈáèÔºåÂπ∂‰∏î‰∏∫ÊØèÂ±ÇÁîüÊàêÂÄôÈÄâÂêçÂçï</span></span><br><span class="line">    <span class="keyword">val</span> finalResult = getAcceptanceResults(rdd, <span class="literal">false</span>, fractions, <span class="type">None</span>, seed)</span><br><span class="line">    <span class="comment">//ÂÜ≥ÂÆöÊé•ÂèóÊ†∑Êú¨ÁöÑÈòàÂÄºÔºåÁîüÊàêÂáÜÁ°ÆÁöÑÊ†∑Êú¨Â§ßÂ∞è</span></span><br><span class="line">    samplingRateByKey = computeThresholdByKey(finalResult, fractions)</span><br><span class="line">    (idx: <span class="type">Int</span>, iter: <span class="type">Iterator</span>[(<span class="type">K</span>, <span class="type">V</span>)]) =&gt; &#123;</span><br><span class="line">      <span class="keyword">val</span> rng = <span class="keyword">new</span> <span class="type">RandomDataGenerator</span>()</span><br><span class="line">      rng.reSeed(seed + idx)</span><br><span class="line">      <span class="comment">// Must use the same invoke pattern on the rng as in getSeqOp for without replacement</span></span><br><span class="line">      <span class="comment">// in order to generate the same sequence of random numbers when creating the sample</span></span><br><span class="line">      iter.filter(t =&gt; rng.nextUniform() &lt; samplingRateByKey(t._1))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<!--ËßÜÈ¢ëend-->
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
            <tag> ÂèñÊ†∑ </tag>
            
            <tag> Ê∫êÁ†Å </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Dataset.scala]]></title>
      <url>https://stanxia.github.io/2017/11/23/Dataset-scala/</url>
      <content type="html"><![CDATA[<h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2><p>Dataset ÊòØ‰∏ÄÁßçÂº∫Á±ªÂûãÁöÑÈ¢ÜÂüüÁâπÂÆöÂØπË±°ÈõÜÂêàÔºåÂèØ‰ª•Âú®‰ΩøÁî®ÂäüËÉΩÊàñÂÖ≥Á≥ªÊìç‰ΩúÁöÑÂêåÊó∂ËøõË°åËΩ¨Êç¢„ÄÇÊØè‰∏™ Dataset ‰πüÊúâ‰∏Ä‰∏™Âêç‰∏∫ ‚ÄúDataFrame‚Äù ÁöÑÊó†Á±ªÂûãËßÜÂõæÔºåÂÆÉÊòØ [[Row]] ÁöÑ Dataset„ÄÇ<br>Dataset ‰∏äÂèØÁî®ÁöÑÊìç‰ΩúÂàÜ‰∏∫ËΩ¨Êç¢ÂíåÂä®‰Ωú:</p>
<blockquote>
<p>ËΩ¨Êç¢Ôºö‰∫ßÁîüÊñ∞ÁöÑ Dataset ÔºõÂåÖÊã¨ map, filter, select, and aggregate (<code>groupBy</code>).<br>Âä®‰ΩúÔºöËß¶ÂèëËÆ°ÁÆóÂπ∂ËøîÂõûÁªìÊûú ÔºõÂåÖÊã¨ count, show, or ÂÜôÊï∞ÊçÆÂà∞Êñá‰ª∂Á≥ªÁªü„ÄÇ</p>
</blockquote>
<p>DatasetÊòØÊáíÂä†ËΩΩÁöÑÔºå‰æãÂ¶ÇÔºöÂè™ÊúâÊèê‰∫§Âä®‰ΩúÁöÑÊó∂ÂÄôÊâç‰ºöËß¶ÂèëËÆ°ÁÆó„ÄÇÂú®ÂÜÖÈÉ®ÔºåDatasetsË°®Á§∫‰∏Ä‰∏™ÈÄªËæëËÆ°ÂàíÔºåÂÆÉÊèèËø∞ÁîüÊàêÊï∞ÊçÆÊâÄÈúÄÁöÑËÆ°ÁÆó„ÄÇÂΩìÊèê‰∫§Âä®‰ΩúÊó∂ÔºåSparkÁöÑÊü•ËØ¢‰ºòÂåñÂô®‰ºö‰ºòÂåñÈÄªËæëËÆ°ÂàíÔºåÂπ∂‰ª•Âπ∂Ë°åÂíåÂàÜÂ∏ÉÂºèÁöÑÊñπÂºèÁîüÊàêÊúâÊïàÊâßË°åÁöÑÁâ©ÁêÜËÆ°Âàí„ÄÇËØ∑‰ΩøÁî®<code>explain</code> ÂäüËÉΩÔºåÊé¢Á¥¢ÈÄªËæëËÆ°ÂàíÂíå‰ºòÂåñÁöÑÁâ©ÁêÜËÆ°Âàí„ÄÇ</p>
<p>‰∏∫‰∫ÜÊúâÊïàÂú∞ÊîØÊåÅÁâπÂÆö‰∫éÈ¢ÜÂüüÁöÑÂØπË±°ÔºåÈúÄË¶Å[[Encoder]]„ÄÇÁºñÁ†ÅÂô®Â∞ÜÁâπÂÆöÁ±ªÂûãÁöÑ‚ÄúT‚ÄùÊò†Â∞ÑÂà∞SparkÁöÑÂÜÖÈÉ®Á±ªÂûãÁ≥ªÁªü„ÄÇ‰æãÂ¶ÇÔºöÁªô‰∏Ä‰∏™ <code>Person</code> Á±ªÔºåÂπ∂Â∏¶Êúâ‰∏§‰∏™Â±ûÊÄßÔºö<code>name</code> (string) and <code>age</code> (int),ÁºñÁ†ÅÂô®ÂëäËØâSparkÂú®ËøêË°åÊó∂ÁîüÊàê‰ª£Á†ÅÔºåÂ∫èÂàóÂåñ <code>Person</code> ÂØπË±°‰∏∫‰∫åËøõÂà∂ÁªìÊûÑ„ÄÇ</p>
<p>ÈÄöÂ∏∏Êúâ‰∏§ÁßçÂàõÂª∫DatasetÁöÑÊñπÊ≥ï:</p>
<blockquote>
<p>‰ΩøÁî® <code>SparkSession</code> ‰∏äÂèØÁî®ÁöÑ <code>read</code> ÊñπÊ≥ïËØªÂèñ Spark ÊåáÂêëÁöÑÂ≠òÂÇ®Á≥ªÁªü‰∏äÁöÑÊñá‰ª∂„ÄÇ<br>Áî®Áé∞Â≠òÁöÑ Datasets ËΩ¨Êç¢ËÄåÊù•„ÄÇ</p>
</blockquote>
<p>DatasetÊìç‰Ωú‰πüÂèØ‰ª•ÊòØÊó†Á±ªÂûãÁöÑÔºåÈÄöËøáÂ§öÁßçÈ¢ÜÂüü‰∏ìÁî®ËØ≠Ë®ÄÔºàDSLÔºâÊñπÊ≥ïÂÆö‰πâÔºöËøô‰∫õÊìç‰ΩúÈùûÂ∏∏Á±ª‰ºº‰∫é RÊàñPythonËØ≠Ë®Ä‰∏≠ÁöÑ Êï∞ÊçÆÊ°ÜÊû∂ÊäΩË±°‰∏≠ÂèØÁî®ÁöÑÊìç‰Ωú„ÄÇ<br><a id="more"></a></p>
<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<h2 id="basic-Âü∫Á°ÄÊñπÊ≥ï"><a href="#basic-Âü∫Á°ÄÊñπÊ≥ï" class="headerlink" title="basic-Âü∫Á°ÄÊñπÊ≥ï"></a>basic-Âü∫Á°ÄÊñπÊ≥ï</h2><h3 id="toDF"><a href="#toDF" class="headerlink" title="toDF"></a>toDF</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Converts this strongly typed collection of data to generic Dataframe. In contrast to the</span></span><br><span class="line"><span class="comment">  * strongly typed objects that Dataset operations work on, a Dataframe returns generic [[Row]]</span></span><br><span class="line"><span class="comment">  * objects that allow fields to be accessed by ordinal or name.</span></span><br><span class="line"><span class="comment">  * Â∞ÜËøôÁßçÂº∫Á±ªÂûãÁöÑÊï∞ÊçÆÈõÜÂêàËΩ¨Êç¢‰∏∫‰∏ÄËà¨ÁöÑDataframe„ÄÇ</span></span><br><span class="line"><span class="comment">  * ‰∏éDatasetÊìç‰ΩúÊâÄ‰ΩøÁî®ÁöÑÂº∫Á±ªÂûãÂØπË±°Áõ∏ÂèçÔºå</span></span><br><span class="line"><span class="comment">  * DataframeËøîÂõûÊ≥õÂûã[[Row]]ÂØπË±°ÔºåËøô‰∫õÂØπË±°ÂÖÅËÆ∏ÈÄöËøáÂ∫èÂè∑ÊàñÂêçÁß∞ËÆøÈóÆÂ≠óÊÆµ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">// This is declared with parentheses to prevent the Scala compiler from treating</span></span><br><span class="line"><span class="comment">// `ds.toDF("1")` as invoking this toDF and then apply on the returned DataFrame.</span></span><br><span class="line"><span class="comment">// ËøôÊòØÁî®Êã¨Âè∑Â£∞ÊòéÁöÑÔºå‰ª•Èò≤Ê≠¢ScalaÁºñËØëÂô®Â§ÑÁêÜds.toDF(‚Äú1‚Äù)Ë∞ÉÁî®Ëøô‰∏™toDFÔºåÁÑ∂ÂêéÂú®ËøîÂõûÁöÑDataFrame‰∏äÂ∫îÁî®„ÄÇ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toDF</span></span>(): <span class="type">DataFrame</span> = <span class="keyword">new</span> <span class="type">Dataset</span>[<span class="type">Row</span>](sparkSession, queryExecution, <span class="type">RowEncoder</span>(schema))</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Converts this strongly typed collection of data to generic `DataFrame` with columns renamed.</span></span><br><span class="line"><span class="comment">  * This can be quite convenient in conversion from an RDD of tuples into a `DataFrame` with</span></span><br><span class="line"><span class="comment">  * meaningful names. For example:</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Â∞ÜËøôÁßçÂº∫Á±ªÂûãÁöÑÊï∞ÊçÆÈõÜÂêàËΩ¨Êç¢‰∏∫ÈÄöÁî®ÁöÑ‚ÄúDataFrame‚ÄùÔºåÂπ∂Â∞ÜÂàóÈáçÂëΩÂêç„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âú®Â∞ÜtupleÁöÑRDDËΩ¨Êç¢‰∏∫ÂØåÊúâÂê´‰πâÁöÑÂêçÁß∞ÁöÑ‚ÄúDataFrame‚ÄùÊó∂ÔºåËøôÊòØÈùûÂ∏∏Êñπ‰æøÁöÑÔºåÂ¶ÇÔºö</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   val rdd: RDD[(Int, String)] = ...</span></span><br><span class="line"><span class="comment">  *   rdd.toDF()  // ÈöêÂºèËΩ¨Êç¢ÂàõÂª∫‰∫Ü DataFrame ÔºåÂàóÂêç‰∏∫Ôºö `_1` and `_2`</span></span><br><span class="line"><span class="comment">  *   rdd.toDF("id", "name")  // ÂàõÂª∫‰∫Ü DataFrame ÔºåÂàóÂêç‰∏∫Ôºö "id" and "name"</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toDF</span></span>(colNames: <span class="type">String</span>*): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  require(schema.size == colNames.size,</span><br><span class="line">    <span class="string">"The number of columns doesn't match.\n"</span> +</span><br><span class="line">      <span class="string">s"Old column names (<span class="subst">$&#123;schema.size&#125;</span>): "</span> + schema.fields.map(_.name).mkString(<span class="string">", "</span>) + <span class="string">"\n"</span> +</span><br><span class="line">      <span class="string">s"New column names (<span class="subst">$&#123;colNames.size&#125;</span>): "</span> + colNames.mkString(<span class="string">", "</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> newCols = logicalPlan.output.zip(colNames).map &#123; <span class="keyword">case</span> (oldAttribute, newName) =&gt;</span><br><span class="line">    <span class="type">Column</span>(oldAttribute).as(newName)</span><br><span class="line">  &#125;</span><br><span class="line">  select(newCols: _*)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="as"><a href="#as" class="headerlink" title="as"></a>as</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * :: Experimental ::</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset where each record has been mapped on to the specified type. The</span></span><br><span class="line"><span class="comment">    * method used to map columns depend on the type of `U`:</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑDatasetÔºåÂÖ∂‰∏≠ÊØè‰∏™ËÆ∞ÂΩïÈÉΩË¢´Êò†Â∞ÑÂà∞ÊåáÂÆöÁöÑÁ±ªÂûã„ÄÇÁî®‰∫éÊò†Â∞ÑÂàóÁöÑÊñπÊ≥ïÂèñÂÜ≥‰∫é‚ÄúU‚ÄùÁöÑÁ±ªÂûã:</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    *  - When `U` is a class, fields for the class will be mapped to columns of the same name</span></span><br><span class="line"><span class="comment">    * (case sensitivity is determined by `spark.sql.caseSensitive`).</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    * ÂΩì‚ÄúU‚ÄùÊòØÁ±ªÊó∂ÔºöÁ±ªÁöÑÂ±ûÊÄßÂ∞ÜÊò†Â∞ÑÂà∞Áõ∏ÂêåÂêçÁß∞ÁöÑÂàó</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    *  - When `U` is a tuple, the columns will be be mapped by ordinal (i.e. the first column will</span></span><br><span class="line"><span class="comment">    * be assigned to `_1`).</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    * ÂΩì‚ÄúU‚ÄùÊòØÂÖÉÁªÑÊó∂ÔºöÂàóÂ∞ÜÁî±Â∫èÊï∞Êò†Â∞Ñ Ôºà‰æãÂ¶ÇÔºåÁ¨¨‰∏ÄÂàóÂ∞Ü‰∏∫ "_1"Ôºâ</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    *  - When `U` is a primitive type (i.e. String, Int, etc), then the first column of the</span></span><br><span class="line"><span class="comment">    * `DataFrame` will be used.</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    * ÂΩì‚ÄúU‚ÄùÊòØ Âü∫Êú¨Á±ªÂûãÔºàÂ¶Ç StringÔºåIntÁ≠âÔºâÔºöÁÑ∂ÂêéÂ∞Ü‰ΩøÁî®‚ÄúDataFrame‚ÄùÁöÑÁ¨¨‰∏ÄÂàó„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * If the schema of the Dataset does not match the desired `U` type, you can use `select`</span></span><br><span class="line"><span class="comment">    * along with `alias` or `as` to rearrange or rename as required.</span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    * Â¶ÇÊûúÊï∞ÊçÆÈõÜÁöÑÊ®°Âºè‰∏éÊâÄÈúÄÁöÑ‚ÄúU‚ÄùÁ±ªÂûã‰∏çÂåπÈÖçÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®‚Äúselect‚ÄùÂíå‚Äúalias‚ÄùÊàñ‚Äúas‚ÄùÊù•ÈáçÊñ∞ÊéíÂàóÊàñÈáçÂëΩÂêç„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group basic</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Experimental</span></span><br><span class="line">  <span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">as</span></span>[<span class="type">U</span>: <span class="type">Encoder</span>]: <span class="type">Dataset</span>[<span class="type">U</span>] = <span class="type">Dataset</span>[<span class="type">U</span>](sparkSession, logicalPlan)</span><br></pre></td></tr></table></figure>
<h3 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the schema of this Dataset.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûËØ•DatasetÁöÑÊ®°Áâà</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">schema</span></span>: <span class="type">StructType</span> = queryExecution.analyzed.schema</span><br></pre></td></tr></table></figure>
<h3 id="printSchema"><a href="#printSchema" class="headerlink" title="printSchema"></a>printSchema</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Prints the schema to the console in a nice tree format.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * ‰ª•‰∏ÄÁßçÊºÇ‰∫ÆÁöÑÊ†ëÊ†ºÂºèÂ∞ÜÊ®°ÂºèÊâìÂç∞Âà∞ÊéßÂà∂Âè∞„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">// scalastyle:off println</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printSchema</span></span>(): <span class="type">Unit</span> = println(schema.treeString)</span><br></pre></td></tr></table></figure>
<h3 id="explain"><a href="#explain" class="headerlink" title="explain"></a>explain</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Prints the plans (logical and physical) to the console for debugging purposes.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * Â∞ÜËÆ°Âàí(ÈÄªËæëÂíåÁâ©ÁêÜ)ÊâìÂç∞Âà∞ÊéßÂà∂Âè∞‰ª•ËøõË°åË∞ÉËØï„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÂèÇÊï∞Ôºöextended = false ‰∏∫Áâ©ÁêÜËÆ°Âàí</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">explain</span></span>(extended: <span class="type">Boolean</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> explain = <span class="type">ExplainCommand</span>(queryExecution.logical, extended = extended)</span><br><span class="line">  sparkSession.sessionState.executePlan(explain).executedPlan.executeCollect().foreach &#123;</span><br><span class="line">    <span class="comment">// scalastyle:off println</span></span><br><span class="line">    r =&gt; println(r.getString(<span class="number">0</span>))</span><br><span class="line">    <span class="comment">// scalastyle:on println</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Prints the physical plan to the console for debugging purposes.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÁâ©ÁêÜËÆ°ÂàíÊâìÂç∞Âà∞ÊéßÂà∂Âè∞‰ª•ËøõË°åË∞ÉËØï„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">explain</span></span>(): <span class="type">Unit</span> = explain(extended = <span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<h3 id="dtypes"><a href="#dtypes" class="headerlink" title="dtypes"></a>dtypes</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns all column names and their data types as an array.</span></span><br><span class="line"><span class="comment">  * ‰ª•Êï∞ÁªÑÁöÑÂΩ¢ÂºèËøîÂõûÊâÄÊúâÂàóÂêçÁß∞ÂíåÂÆÉ‰ª¨ÁöÑÊï∞ÊçÆÁ±ªÂûã</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dtypes</span></span>: <span class="type">Array</span>[(<span class="type">String</span>, <span class="type">String</span>)] = schema.fields.map &#123; field =&gt;</span><br><span class="line">  (field.name, field.dataType.toString)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="columns"><a href="#columns" class="headerlink" title="columns"></a>columns</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns all column names as an array.</span></span><br><span class="line"><span class="comment">  * ‰ª•Êï∞ÁªÑÁöÑÂΩ¢ÂºèËøîÂõû ÊâÄÊúâÂàóÂêç</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">columns</span></span>: <span class="type">Array</span>[<span class="type">String</span>] = schema.fields.map(_.name)</span><br></pre></td></tr></table></figure>
<h3 id="isLocal"><a href="#isLocal" class="headerlink" title="isLocal"></a>isLocal</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns true if the `collect` and `take` methods can be run locally</span></span><br><span class="line"><span class="comment">  * (without any Spark executors).</span></span><br><span class="line"><span class="comment">  * Â¶ÇÊûú`collect` and `take` ÊñπÊ≥ïËÉΩÂú®Êú¨Âú∞ËøêË°åÔºåÂàôËøîÂõûtrue</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isLocal</span></span>: <span class="type">Boolean</span> = logicalPlan.isInstanceOf[<span class="type">LocalRelation</span>]</span><br></pre></td></tr></table></figure>
<h3 id="checkpoint"><a href="#checkpoint" class="headerlink" title="checkpoint"></a>checkpoint</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Eagerly checkpoint a Dataset and return the new Dataset. Checkpointing can be used to truncate</span></span><br><span class="line"><span class="comment">  * the logical plan of this Dataset, which is especially useful in iterative algorithms where the</span></span><br><span class="line"><span class="comment">  * plan may grow exponentially. It will be saved to files inside the checkpoint</span></span><br><span class="line"><span class="comment">  * directory set with `SparkContext#setCheckpointDir`.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * ÊÄ•ÂàáÂú∞Ê£ÄÊü•‰∏Ä‰∏™Êï∞ÊçÆÈõÜÂπ∂ËøîÂõûÊñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * Ê£ÄÊü•ÁÇπËÉΩÁî®Êù•Ê∏ÖÈô§DatasetÁöÑÈÄªËæëËÆ°ÂàíÔºåÂ∞§ÂÖ∂ÊòØÂú®ÂèØËÉΩÁîüÊàêÊåáÊï∞Á∫ßÂà´ÁöÑËø≠‰ª£ÁÆóÊ≥ï‰∏≠Â∞§ÂÖ∂ÊúâÁî®„ÄÇ</span></span><br><span class="line"><span class="comment">  * Â∞Ü‰ºöÂú®Ê£ÄÊü•ÁÇπÁõÆÂΩï‰∏≠‰øùÂ≠òÊ£ÄÊü•Êñá‰ª∂„ÄÇÂèØ‰ª•Âú®`SparkContext#setCheckpointDir`‰∏≠ËÆæÁΩÆ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkpoint</span></span>(): <span class="type">Dataset</span>[<span class="type">T</span>] = checkpoint(eager = <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a checkpointed version of this Dataset. Checkpointing can be used to truncate the</span></span><br><span class="line"><span class="comment">  * logical plan of this Dataset, which is especially useful in iterative algorithms where the</span></span><br><span class="line"><span class="comment">  * plan may grow exponentially. It will be saved to files inside the checkpoint</span></span><br><span class="line"><span class="comment">  * directory set with `SparkContext#setCheckpointDir`.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûDataset ‰πãÂâçÊ£ÄÊü•ËøáÁöÑÁâàÊú¨„ÄÇ</span></span><br><span class="line"><span class="comment">  * Ê£ÄÊü•ÁÇπËÉΩÁî®Êù•Ê∏ÖÈô§DatasetÁöÑÈÄªËæëËÆ°ÂàíÔºåÂ∞§ÂÖ∂ÊòØÂú®ÂèØËÉΩÁîüÊàêÊåáÊï∞Á∫ßÂà´ÁöÑËø≠‰ª£ÁÆóÊ≥ï‰∏≠Â∞§ÂÖ∂ÊúâÁî®„ÄÇ</span></span><br><span class="line"><span class="comment">  * Â∞Ü‰ºöÂú®Ê£ÄÊü•ÁÇπÁõÆÂΩï‰∏≠‰øùÂ≠òÊ£ÄÊü•Êñá‰ª∂„ÄÇÂèØ‰ª•Âú®`SparkContext#setCheckpointDir`‰∏≠ËÆæÁΩÆ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkpoint</span></span>(eager: <span class="type">Boolean</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> internalRdd = queryExecution.toRdd.map(_.copy())</span><br><span class="line">  internalRdd.checkpoint()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (eager) &#123;</span><br><span class="line">    internalRdd.count()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> physicalPlan = queryExecution.executedPlan</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Takes the first leaf partitioning whenever we see a `PartitioningCollection`. Otherwise the</span></span><br><span class="line">  <span class="comment">// size of `PartitioningCollection` may grow exponentially for queries involving deep inner</span></span><br><span class="line">  <span class="comment">// joins.</span></span><br><span class="line">  <span class="comment">// ÊØèÂΩìÊàë‰ª¨ÁúãÂà∞‚ÄúPartitioningCollection‚ÄùÊó∂ÔºåÂ∞±ÈááÁî®Á¨¨‰∏Ä‰∏™Âè∂Â≠êÂàÜÂå∫</span></span><br><span class="line">  <span class="comment">// Âê¶ÂàôÔºåÁî®‰∫éÊ∂âÂèäÊ∑±Â∫¶ÂÜÖËøûÊé•ÁöÑÊü•ËØ¢Ôºå‚ÄúPartitioningCollection‚ÄùÁöÑÂ§ßÂ∞èÂèØËÉΩ‰ºö‰ª•ÊåáÊï∞ÂΩ¢ÂºèÂ¢ûÈïø„ÄÇ</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">firstLeafPartitioning</span></span>(partitioning: <span class="type">Partitioning</span>): <span class="type">Partitioning</span> = &#123;</span><br><span class="line">    partitioning <span class="keyword">match</span> &#123;</span><br><span class="line">      <span class="keyword">case</span> p: <span class="type">PartitioningCollection</span> =&gt; firstLeafPartitioning(p.partitionings.head)</span><br><span class="line">      <span class="keyword">case</span> p =&gt; p</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> outputPartitioning = firstLeafPartitioning(physicalPlan.outputPartitioning)</span><br><span class="line"></span><br><span class="line">  <span class="type">Dataset</span>.ofRows(</span><br><span class="line">    sparkSession,</span><br><span class="line">    <span class="type">LogicalRDD</span>(</span><br><span class="line">      logicalPlan.output,</span><br><span class="line">      internalRdd,</span><br><span class="line">      outputPartitioning,</span><br><span class="line">      physicalPlan.outputOrdering</span><br><span class="line">    )(sparkSession)).as[<span class="type">T</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="persist"><a href="#persist" class="headerlink" title="persist"></a>persist</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Persist this Dataset with the default storage level (`MEMORY_AND_DISK`).</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÊåÅ‰πÖÂåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  * Ê†πÊçÆÈªòËÆ§ÁöÑ Â≠òÂÇ®Á∫ßÂà´ (`MEMORY_AND_DISK`)  ÊåÅ‰πÖÂåñDataset„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">persist</span></span>(): <span class="keyword">this</span><span class="class">.<span class="keyword">type</span> </span>= &#123;</span><br><span class="line">  sparkSession.sharedState.cacheManager.cacheQuery(<span class="keyword">this</span>)</span><br><span class="line">  <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Persist this Dataset with the given storage level.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ê†πÊçÆÊåáÂÆöÁöÑ Â≠òÂÇ®Á∫ßÂà´ ÊåÅ‰πÖÂåñ Dataset„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param newLevel One of:</span></span><br><span class="line"><span class="comment">  *                 `MEMORY_ONLY`,</span></span><br><span class="line"><span class="comment">  *                 `MEMORY_AND_DISK`,</span></span><br><span class="line"><span class="comment">  *                 `MEMORY_ONLY_SER`,</span></span><br><span class="line"><span class="comment">  *                 `MEMORY_AND_DISK_SER`,</span></span><br><span class="line"><span class="comment">  *                 `DISK_ONLY`,</span></span><br><span class="line"><span class="comment">  *                 `MEMORY_ONLY_2`, ‰∏éMEMORY_ONLYÁöÑÂå∫Âà´ÊòØ‰ºöÂ§á‰ªΩÊï∞ÊçÆÂà∞ÂÖ∂‰ªñËäÇÁÇπ‰∏ä</span></span><br><span class="line"><span class="comment">  *                 `MEMORY_AND_DISK_2`, ‰∏éMEMORY_AND_DISKÁöÑÂå∫Âà´ÊòØ‰ºöÂ§á‰ªΩÊï∞ÊçÆÂà∞ÂÖ∂‰ªñËäÇÁÇπ‰∏ä</span></span><br><span class="line"><span class="comment">  *                 etc.</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">persist</span></span>(newLevel: <span class="type">StorageLevel</span>): <span class="keyword">this</span><span class="class">.<span class="keyword">type</span> </span>= &#123;</span><br><span class="line">  sparkSession.sharedState.cacheManager.cacheQuery(<span class="keyword">this</span>, <span class="type">None</span>, newLevel)</span><br><span class="line">  <span class="keyword">this</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Persist this Dataset with the default storage level (`MEMORY_AND_DISK`).</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÊåÅ‰πÖÂåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  * Ê†πÊçÆÈªòËÆ§ÁöÑ Â≠òÂÇ®Á∫ßÂà´ (`MEMORY_AND_DISK`)  ÊåÅ‰πÖÂåñDataset„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âíå persist ‰∏ÄËá¥„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cache</span></span>(): <span class="keyword">this</span><span class="class">.<span class="keyword">type</span> </span>= persist()</span><br></pre></td></tr></table></figure>
<h3 id="storageLevel"><a href="#storageLevel" class="headerlink" title="storageLevel"></a>storageLevel</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Get the Dataset's current storage level, or StorageLevel.NONE if not persisted.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ëé∑ÂèñÂΩìÂâçDatasetÁöÑÂΩìÂâçÂ≠òÂÇ®Á∫ßÂà´„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÁºìÂ≠òÂàô StorageLevel.NONE„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">storageLevel</span></span>: <span class="type">StorageLevel</span> = &#123;</span><br><span class="line">  sparkSession.sharedState.cacheManager.lookupCachedData(<span class="keyword">this</span>).map &#123; cachedData =&gt;</span><br><span class="line">    cachedData.cachedRepresentation.storageLevel</span><br><span class="line">  &#125;.getOrElse(<span class="type">StorageLevel</span>.<span class="type">NONE</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="unpersist"><a href="#unpersist" class="headerlink" title="unpersist"></a>unpersist</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Mark the Dataset as non-persistent, and remove all blocks for it from memory and disk.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ëß£Èô§ÊåÅ‰πÖÂåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  * Â∞ÜDatasetÊ†áËÆ∞‰∏∫ÈùûÊåÅ‰πÖÂåñÔºåÂπ∂‰ªéÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏≠ÁßªÈô§ÊâÄÊúâÁöÑÂùó„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param blocking Whether to block until all blocks are deleted.</span></span><br><span class="line"><span class="comment">  *                 ÊòØÂê¶ÈòªÂ°ûÔºåÁõ¥Âà∞Âà†Èô§ÊâÄÊúâÁöÑÂùó„ÄÇ</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">unpersist</span></span>(blocking: <span class="type">Boolean</span>): <span class="keyword">this</span><span class="class">.<span class="keyword">type</span> </span>= &#123;</span><br><span class="line">  sparkSession.sharedState.cacheManager.uncacheQuery(<span class="keyword">this</span>, blocking)</span><br><span class="line">  <span class="keyword">this</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Mark the Dataset as non-persistent, and remove all blocks for it from memory and disk.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ëß£Èô§ÊåÅ‰πÖÂåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  * Â∞ÜDatasetÊ†áËÆ∞‰∏∫ÈùûÊåÅ‰πÖÂåñÔºåÂπ∂‰ªéÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏≠ÁßªÈô§ÊâÄÊúâÁöÑÂùó„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">unpersist</span></span>(): <span class="keyword">this</span><span class="class">.<span class="keyword">type</span> </span>= unpersist(blocking = <span class="literal">false</span>)</span><br></pre></td></tr></table></figure>
<h3 id="rdd"><a href="#rdd" class="headerlink" title="rdd"></a>rdd</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Represents the content of the Dataset as an `RDD` of [[T]].</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËΩ¨Êç¢‰∏∫[[T]]ÁöÑ‚ÄúRDD‚ÄùÔºåË°®Á§∫DatasetÁöÑÂÜÖÂÆπ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">lazy</span> <span class="keyword">val</span> rdd: <span class="type">RDD</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> objectType = exprEnc.deserializer.dataType</span><br><span class="line">  <span class="keyword">val</span> deserialized = <span class="type">CatalystSerde</span>.deserialize[<span class="type">T</span>](logicalPlan)</span><br><span class="line">  sparkSession.sessionState.executePlan(deserialized).toRdd.mapPartitions &#123; rows =&gt;</span><br><span class="line">    rows.map(_.get(<span class="number">0</span>, objectType).asInstanceOf[<span class="type">T</span>])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="toJavaRDD"><a href="#toJavaRDD" class="headerlink" title="toJavaRDD"></a>toJavaRDD</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the content of the Dataset as a `JavaRDD` of [[T]]s.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * ËΩ¨Êç¢‰∏∫JavaRDD</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toJavaRDD</span></span>: <span class="type">JavaRDD</span>[<span class="type">T</span>] = rdd.toJavaRDD()</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the content of the Dataset as a `JavaRDD` of [[T]]s.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËΩ¨Êç¢‰∏∫JavaRDD</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">javaRDD</span></span>: <span class="type">JavaRDD</span>[<span class="type">T</span>] = toJavaRDD</span><br></pre></td></tr></table></figure>
<h3 id="registerTempTable"><a href="#registerTempTable" class="headerlink" title="registerTempTable"></a>registerTempTable</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Registers this Dataset as a temporary table using the given name. The lifetime of this</span></span><br><span class="line"><span class="comment">  * temporary table is tied to the [[SparkSession]] that was used to create this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ê†πÊçÆÊåáÂÆöÁöÑË°®ÂêçÔºåÊ≥®ÂÜå‰∏¥Êó∂Ë°®„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÁîüÂëΩÂë®Êúü‰∏∫[[SparkSession]]ÁöÑÁîüÂëΩÂë®Êúü„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@deprecated</span>(<span class="string">"Use createOrReplaceTempView(viewName) instead."</span>, <span class="string">"2.0.0"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">registerTempTable</span></span>(tableName: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">  createOrReplaceTempView(tableName)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="createTempView"><a href="#createTempView" class="headerlink" title="createTempView"></a>createTempView</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Creates a local temporary view using the given name. The lifetime of this</span></span><br><span class="line"><span class="comment">  * temporary view is tied to the [[SparkSession]] that was used to create this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Áî®ÊåáÂÆöÁöÑÂêçÂ≠óÂàõÂª∫Êú¨Âú∞‰∏¥Êó∂Ë°®„ÄÇ</span></span><br><span class="line"><span class="comment">  * ‰∏é[[SparkSession]] ÂêåÁîüÂëΩÂë®Êúü„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Local temporary view is session-scoped. Its lifetime is the lifetime of the session that</span></span><br><span class="line"><span class="comment">  * created it, i.e. it will be automatically dropped when the session terminates. It's not</span></span><br><span class="line"><span class="comment">  * tied to any databases, i.e. we can't use `db1.view1` to reference a local temporary view.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Êú¨Âú∞‰∏¥Êó∂Ë°®ÊòØ sessionËåÉÂõ¥ÂÜÖÁöÑ„ÄÇÂΩìÂàõÂª∫ÂÆÉÁöÑsessionÂÅúÊ≠¢ÁöÑÊó∂ÂÄôÔºåËØ•Ë°®‰πüÈöè‰πãÂÅúÊ≠¢„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @throws AnalysisException if the view name already exists</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@throws</span>[<span class="type">AnalysisException</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createTempView</span></span>(viewName: <span class="type">String</span>): <span class="type">Unit</span> = withPlan &#123;</span><br><span class="line">  createTempViewCommand(viewName, replace = <span class="literal">false</span>, global = <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="createOrReplaceTempView"><a href="#createOrReplaceTempView" class="headerlink" title="createOrReplaceTempView"></a>createOrReplaceTempView</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Creates a local temporary view using the given name. The lifetime of this</span></span><br><span class="line"><span class="comment">  * temporary view is tied to the [[SparkSession]] that was used to create this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Áî®ÊåáÂÆöÁöÑÂêçÂ≠óÂàõÂª∫Êú¨Âú∞‰∏¥Êó∂Ë°®„ÄÇÂ¶ÇÊûúÂ∑≤ÁªèÊúâ‰∫ÜÂàôÊõøÊç¢„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createOrReplaceTempView</span></span>(viewName: <span class="type">String</span>): <span class="type">Unit</span> = withPlan &#123;</span><br><span class="line">  createTempViewCommand(viewName, replace = <span class="literal">true</span>, global = <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="createGlobalTempView"><a href="#createGlobalTempView" class="headerlink" title="createGlobalTempView"></a>createGlobalTempView</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Creates a global temporary view using the given name. The lifetime of this</span></span><br><span class="line"><span class="comment">  * temporary view is tied to this Spark application.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÂàõÂª∫ÂÖ®Â±Ä‰∏¥Êó∂Ë°®„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÁîüÂëΩÂë®Êúü‰∏∫Êï¥‰∏™Spark application.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Global temporary view is cross-session. Its lifetime is the lifetime of the Spark application,</span></span><br><span class="line"><span class="comment">  * i.e. it will be automatically dropped when the application terminates. It's tied to a system</span></span><br><span class="line"><span class="comment">  * preserved database `_global_temp`, and we must use the qualified name to refer a global temp</span></span><br><span class="line"><span class="comment">  * view, e.g. `SELECT * FROM _global_temp.view1`.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÂÖ®Â±Ä‰∏¥Êó∂Ë°®ÊòØË∑®sessionÁöÑ„ÄÇÂ±û‰∫é _global_temp Êï∞ÊçÆÂ∫ì„ÄÇe.g. `SELECT * FROM _global_temp.view1`.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @throws AnalysisException if the view name already exists</span></span><br><span class="line"><span class="comment">  *                           Â¶ÇÊûúË°®Â∑≤ÁªèÂ≠òÂú®ÔºåÂàôÊä•Èîô„ÄÇ</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@throws</span>[<span class="type">AnalysisException</span>]</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createGlobalTempView</span></span>(viewName: <span class="type">String</span>): <span class="type">Unit</span> = withPlan &#123;</span><br><span class="line">  createTempViewCommand(viewName, replace = <span class="literal">false</span>, global = <span class="literal">true</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="write"><a href="#write" class="headerlink" title="write"></a>write</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Interface for saving the content of the non-streaming Dataset out into external storage.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * Â∞ÜÈùûÊµÅDatasetÁöÑÂÜÖÂÆπ‰øùÂ≠òÂà∞Â§ñÈÉ®Â≠òÂÇ®‰∏≠ÁöÑÊé•Âè£„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write</span></span>: <span class="type">DataFrameWriter</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">if</span> (isStreaming) &#123;</span><br><span class="line">    logicalPlan.failAnalysis(</span><br><span class="line">      <span class="string">"'write' can not be called on streaming Dataset/DataFrame"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">new</span> <span class="type">DataFrameWriter</span>[<span class="type">T</span>](<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="writeStream"><a href="#writeStream" class="headerlink" title="writeStream"></a>writeStream</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * Interface for saving the content of the streaming Dataset out into external storage.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊµÅDataset‰øùÂ≠òÂú®Â§ñÈÉ®Â≠òÂÇ®„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">writeStream</span></span>: <span class="type">DataStreamWriter</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">if</span> (!isStreaming) &#123;</span><br><span class="line">    logicalPlan.failAnalysis(</span><br><span class="line">      <span class="string">"'writeStream' can be called only on streaming Dataset/DataFrame"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">new</span> <span class="type">DataStreamWriter</span>[<span class="type">T</span>](<span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="toJSON"><a href="#toJSON" class="headerlink" title="toJSON"></a>toJSON</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the content of the Dataset as a Dataset of JSON strings.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Â∞ÜDatasetËΩ¨Êç¢‰∏∫JSON„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toJSON</span></span>: <span class="type">Dataset</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> rowSchema = <span class="keyword">this</span>.schema</span><br><span class="line">  <span class="keyword">val</span> rdd: <span class="type">RDD</span>[<span class="type">String</span>] = queryExecution.toRdd.mapPartitions &#123; iter =&gt;</span><br><span class="line">    <span class="keyword">val</span> writer = <span class="keyword">new</span> <span class="type">CharArrayWriter</span>()</span><br><span class="line">    <span class="comment">// create the Generator without separator inserted between 2 records</span></span><br><span class="line">    <span class="keyword">val</span> gen = <span class="keyword">new</span> <span class="type">JacksonGenerator</span>(rowSchema, writer)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> <span class="type">Iterator</span>[<span class="type">String</span>] &#123;</span><br><span class="line">      <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">hasNext</span></span>: <span class="type">Boolean</span> = iter.hasNext</span><br><span class="line"></span><br><span class="line">      <span class="keyword">override</span> <span class="function"><span class="keyword">def</span> <span class="title">next</span></span>(): <span class="type">String</span> = &#123;</span><br><span class="line">        gen.write(iter.next())</span><br><span class="line">        gen.flush()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">val</span> json = writer.toString</span><br><span class="line">        <span class="keyword">if</span> (hasNext) &#123;</span><br><span class="line">          writer.reset()</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          gen.close()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        json</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">import</span> sparkSession.implicits.newStringEncoder</span><br><span class="line">  sparkSession.createDataset(rdd)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="inputFiles"><a href="#inputFiles" class="headerlink" title="inputFiles"></a>inputFiles</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a best-effort snapshot of the files that compose this Dataset. This method simply</span></span><br><span class="line"><span class="comment">  * asks each constituent BaseRelation for its respective files and takes the union of all results.</span></span><br><span class="line"><span class="comment">  * Depending on the source relations, this may not find all input files. Duplicates are removed.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁªÑÊàêËøô‰∏™DatasetÁöÑÊâÄÊúâÊñá‰ª∂ÁöÑÊúÄ‰Ω≥Âø´ÁÖß„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËØ•ÊñπÊ≥ïÁÆÄÂçïÂú∞Ë¶ÅÊ±ÇÊØè‰∏™ÁªÑ‰ª∂BaseRelationÂØπÂÖ∂ÂêÑËá™ÁöÑÊñá‰ª∂ËøõË°åÂ§ÑÁêÜÔºåÂπ∂ËÅîÂêàÊâÄÊúâÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âü∫‰∫éÊ∫êÂÖ≥Á≥ªÔºåÂ∫îËØ•ÂèØ‰ª•ÊâæÂà∞ÊâÄÊúâÁöÑËæìÂÖ•Êñá‰ª∂„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÈáçÂ§çÁöÑ‰πü‰ºöË¢´ÁßªÈô§„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group basic</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">inputFiles</span></span>: <span class="type">Array</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> files: <span class="type">Seq</span>[<span class="type">String</span>] = queryExecution.optimizedPlan.collect &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">LogicalRelation</span>(fsBasedRelation: <span class="type">FileRelation</span>, _, _) =&gt;</span><br><span class="line">      fsBasedRelation.inputFiles</span><br><span class="line">    <span class="keyword">case</span> fr: <span class="type">FileRelation</span> =&gt;</span><br><span class="line">      fr.inputFiles</span><br><span class="line">  &#125;.flatten</span><br><span class="line">  files.toSet.toArray</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="streaming"><a href="#streaming" class="headerlink" title="streaming"></a>streaming</h2><h3 id="isStreaming"><a href="#isStreaming" class="headerlink" title="isStreaming"></a>isStreaming</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns true if this Dataset contains one or more sources that continuously</span></span><br><span class="line"><span class="comment">  * return data as it arrives. A Dataset that reads data from a streaming source</span></span><br><span class="line"><span class="comment">  * must be executed as a `StreamingQuery` using the `start()` method in</span></span><br><span class="line"><span class="comment">  * `DataStreamWriter`. Methods that return a single answer, e.g. `count()` or</span></span><br><span class="line"><span class="comment">  * `collect()`, will throw an [[AnalysisException]] when there is a streaming</span></span><br><span class="line"><span class="comment">  * source present.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * Â¶ÇÊûúDatasetÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊåÅÁª≠ËøîÂõûÊï∞ÊçÆÁöÑÊ∫êÔºåÂàôËøîÂõûtrueÔºõ</span></span><br><span class="line"><span class="comment">  * Â¶ÇÊûúDataset‰ªéstreamingÊ∫êËØªÂèñÊï∞ÊçÆÔºåÂàôÂøÖÈ°ªÂÉè `StreamingQuery` ‰∏ÄÊ†∑ÊâßË°åÔºö‰ΩøÁî® `DataStreamWriter` ‰∏≠ÁöÑ `start()`ÊñπÊ≥ï„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂçï‰∏™ÂÄºÁöÑÊñπÊ≥ïÔºå‰æãÂ¶ÇÔºö `count()` or `collect()`ÔºåÂΩìÂ≠òÂú®streamingÊ∫êÊó∂ÔºåÂ∞Ü‰ºöÊäõÂá∫[[AnalysisException]]„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group streaming</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isStreaming</span></span>: <span class="type">Boolean</span> = logicalPlan.isStreaming</span><br></pre></td></tr></table></figure>
<h3 id="withWatermark"><a href="#withWatermark" class="headerlink" title="withWatermark"></a>withWatermark</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental :: ÂÆûÈ™åÊÄßÁöÑ</span></span><br><span class="line"><span class="comment">  * Defines an event time watermark for this [[Dataset]]. A watermark tracks a point in time</span></span><br><span class="line"><span class="comment">  * before which we assume no more late data is going to arrive.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * ‰∏∫Ëøô‰∏™[[Dataset]]ÂÆö‰πâ‰∫ã‰ª∂Êó∂Èó¥Ê∞¥Âç∞„ÄÇ</span></span><br><span class="line"><span class="comment">  * Êàë‰ª¨ÂÅáËÆæÊ≤°ÊúâÊõ¥Â§öÁöÑÊôöÊúüÊï∞ÊçÆÂ∞ÜÂà∞Ëææ‰πãÂâçÔºå‰∏Ä‰∏™Ê∞¥Âç∞Ë∑üË∏™‰∏Ä‰∏™Êó∂Èó¥ÁÇπ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Spark will use this watermark for several purposes:</span></span><br><span class="line"><span class="comment">  * SparkÁî®Ê∞¥Âç∞ÊúâÂá†‰∏™ÁõÆÁöÑÔºö</span></span><br><span class="line"><span class="comment">  *  - To know when a given time window aggregation can be finalized and thus can be emitted when</span></span><br><span class="line"><span class="comment">  * using output modes that do not allow updates.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * ÂèØ‰ª•Áü•ÈÅì‰ΩïÊó∂ÂÆåÊàêÁªôÂÆöÁöÑÊó∂Èó¥Á™óÂè£ËÅöÂêàËÉΩÂ§üÂÆåÊàêÔºåÂõ†Ê≠§ÂΩì‰ΩøÁî®‰∏çÂÖÅËÆ∏Êõ¥Êñ∞ÁöÑËæìÂá∫Ê®°ÂºèÊó∂ËÉΩÂ§üË¢´ÊîæÂá∫„ÄÇ</span></span><br><span class="line"><span class="comment">  *  - To minimize the amount of state that we need to keep for on-going aggregations.</span></span><br><span class="line"><span class="comment">  * ‰∏∫‰∫ÜÊúÄÂ∞èÂåñÊàë‰ª¨ÈúÄË¶ÅÊåÅÁª≠‰∏çÊñ≠ÁöÑËÅöÂêàÁöÑÁä∂ÊÄÅÊï∞Èáè„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * The current watermark is computed by looking at the `MAX(eventTime)` seen across</span></span><br><span class="line"><span class="comment">  * all of the partitions in the query minus a user specified `delayThreshold`.  Due to the cost</span></span><br><span class="line"><span class="comment">  * of coordinating this value across partitions, the actual watermark used is only guaranteed</span></span><br><span class="line"><span class="comment">  * to be at least `delayThreshold` behind the actual event time.  In some cases we may still</span></span><br><span class="line"><span class="comment">  * process records that arrive more than `delayThreshold` late.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * ÂΩìÂâçÁöÑÊ∞¥Âç∞ = Êü•ÁúãÊü•ËØ¢‰∏≠ÊâÄÊúâÂàÜÂå∫‰∏äÁúãÂà∞ÁöÑ`MAX(eventTime)` - Áî®Êà∑ÊåáÂÆöÁöÑ`delayThreshold`</span></span><br><span class="line"><span class="comment">  * Áî±‰∫éÂú®ÂàÜÂå∫‰πãÈó¥ÂçèË∞ÉËøô‰∏™ÂÄºÁöÑËä±ÈîÄÔºåÂÆûÈôÖ‰ΩøÁî®ÁöÑÊ∞¥Âç∞Âè™‰øùËØÅÂú®ÂÆûÈôÖ‰∫ã‰ª∂Êó∂Èó¥ÂêéËá≥Â∞ëÊòØ‚ÄúdelayThreshold‚Äù„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂèØËÉΩËøò‰ºöÂ§ÑÁêÜÊØî‚ÄúdelayThreshold‚ÄùÊôö‰∫õÊó∂ÂÄôÂà∞ËææÁöÑËÆ∞ÂΩï„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param eventTime      the name of the column that contains the event time of the row.</span></span><br><span class="line"><span class="comment">  *                       ÂåÖÂê´Ë°åÁöÑ‰∫ã‰ª∂Êó∂Èó¥ÁöÑÂàóÂêç</span></span><br><span class="line"><span class="comment">  * @param delayThreshold the minimum delay to wait to data to arrive late, relative to the latest</span></span><br><span class="line"><span class="comment">  *                       record that has been processed in the form of an interval</span></span><br><span class="line"><span class="comment">  *                       (e.g. "1 minute" or "5 hours").</span></span><br><span class="line"><span class="comment">  *                       Á≠âÂæÖÊôöÂà∞Êï∞ÊçÆÁöÑÊúÄÂ∞ëÂª∂ËøüÔºåÁõ∏ÂØπ‰∫é‰ª•Èó¥ÈöîÂΩ¢ÂºèÂ§ÑÁêÜÁöÑÊúÄÊñ∞ËÆ∞ÂΩï</span></span><br><span class="line"><span class="comment">  * @group streaming</span></span><br><span class="line"><span class="comment">  * @since 2.1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="comment">// We only accept an existing column name, not a derived column here as a watermark that is</span></span><br><span class="line"><span class="comment">// defined on a derived column cannot referenced elsewhere in the plan.</span></span><br><span class="line"><span class="comment">// Êàë‰ª¨Âè™Êé•Âèó‰∏Ä‰∏™Áé∞ÊúâÁöÑÂàóÂêçÔºåËÄå‰∏çÊòØ‰Ωú‰∏∫‰∏Ä‰∏™Âú®Ê¥æÁîüÂàó‰∏äÂÆö‰πâÁöÑÊ∞¥Âç∞ÁöÑÊ¥æÁîüÂàóÔºåËÄå‰∏çËÉΩÂú®ËØ•ËÆ°ÂàíÁöÑÂÖ∂‰ªñÂú∞ÊñπÂºïÁî®„ÄÇ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">withWatermark</span></span>(eventTime: <span class="type">String</span>, delayThreshold: <span class="type">String</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">  <span class="keyword">val</span> parsedDelay =</span><br><span class="line">    <span class="type">Option</span>(<span class="type">CalendarInterval</span>.fromString(<span class="string">"interval "</span> + delayThreshold))</span><br><span class="line">      .getOrElse(<span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">AnalysisException</span>(<span class="string">s"Unable to parse time delay '<span class="subst">$delayThreshold</span>'"</span>))</span><br><span class="line">  <span class="type">EventTimeWatermark</span>(<span class="type">UnresolvedAttribute</span>(eventTime), parsedDelay, logicalPlan)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="action"><a href="#action" class="headerlink" title="action"></a>action</h2><h3 id="show"><a href="#show" class="headerlink" title="show"></a>show</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Displays the Dataset in a tabular form. Strings more than 20 characters will be truncated,</span></span><br><span class="line"><span class="comment">  * and all cells will be aligned right. For example:</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * ‰ª•Ë°®Ê†ºÂΩ¢ÂºèÊòæÁ§∫Êï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * Â≠óÁ¨¶‰∏≤Ë∂ÖËøá20‰∏™Â≠óÁ¨¶Â∞ÜË¢´Êà™Êñ≠Ôºå</span></span><br><span class="line"><span class="comment">  * ÊâÄÊúâÂçïÂÖÉÊ†ºÂ∞ÜË¢´ÂØπÈΩê„ÄÇ</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   year  month AVG('Adj Close) MAX('Adj Close)</span></span><br><span class="line"><span class="comment">  *   1980  12    0.503218        0.595103</span></span><br><span class="line"><span class="comment">  *   1981  01    0.523289        0.570307</span></span><br><span class="line"><span class="comment">  *   1982  02    0.436504        0.475256</span></span><br><span class="line"><span class="comment">  *   1983  03    0.410516        0.442194</span></span><br><span class="line"><span class="comment">  *   1984  04    0.450090        0.483521</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param numRows Number of rows to show Ë¶ÅÊòæÁ§∫ÁöÑË°åÊï∞</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(numRows: <span class="type">Int</span>): <span class="type">Unit</span> = show(numRows, truncate = <span class="literal">true</span>)</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Displays the top 20 rows of Dataset in a tabular form. Strings more than 20 characters</span></span><br><span class="line"><span class="comment">  * will be truncated, and all cells will be aligned right.</span></span><br><span class="line"><span class="comment">  * ÊòæÁ§∫Â§¥20Ë°å</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(): <span class="type">Unit</span> = show(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Displays the top 20 rows of Dataset in a tabular form.</span></span><br><span class="line"><span class="comment">  * ÊòæÁ§∫Â§¥20Ë°å</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param truncate Whether truncate long strings. If true, strings more than 20 characters will</span></span><br><span class="line"><span class="comment">  *                 be truncated and all cells will be aligned right</span></span><br><span class="line"><span class="comment">  *                 ÊòØÂê¶Êà™Êñ≠ÈïøÂ≠óÁ¨¶‰∏≤„ÄÇÂ¶ÇÊûú trueÔºöË∂ÖËøá20‰∏™Â≠óÁ¨¶Â∞±‰ºöË¢´Êà™Êñ≠</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(truncate: <span class="type">Boolean</span>): <span class="type">Unit</span> = show(<span class="number">20</span>, truncate)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Displays the Dataset in a tabular form. For example:</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   year  month AVG('Adj Close) MAX('Adj Close)</span></span><br><span class="line"><span class="comment">  *   1980  12    0.503218        0.595103</span></span><br><span class="line"><span class="comment">  *   1981  01    0.523289        0.570307</span></span><br><span class="line"><span class="comment">  *   1982  02    0.436504        0.475256</span></span><br><span class="line"><span class="comment">  *   1983  03    0.410516        0.442194</span></span><br><span class="line"><span class="comment">  *   1984  04    0.450090        0.483521</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param numRows  Number of rows to show ÊòæÁ§∫ÁöÑË°åÊï∞</span></span><br><span class="line"><span class="comment">  * @param truncate Whether truncate long strings. If true, strings more than 20 characters will</span></span><br><span class="line"><span class="comment">  *                 be truncated and all cells will be aligned right</span></span><br><span class="line"><span class="comment">  *                 ÊòØÂê¶Êà™Êñ≠ÈïøÂ≠óÁ¨¶‰∏≤</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">// scalastyle:off println</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(numRows: <span class="type">Int</span>, truncate: <span class="type">Boolean</span>): <span class="type">Unit</span> = <span class="keyword">if</span> (truncate) &#123;</span><br><span class="line">  println(showString(numRows, truncate = <span class="number">20</span>))</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  println(showString(numRows, truncate = <span class="number">0</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// scalastyle:on println</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Displays the Dataset in a tabular form. For example:</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   year  month AVG('Adj Close) MAX('Adj Close)</span></span><br><span class="line"><span class="comment">  *   1980  12    0.503218        0.595103</span></span><br><span class="line"><span class="comment">  *   1981  01    0.523289        0.570307</span></span><br><span class="line"><span class="comment">  *   1982  02    0.436504        0.475256</span></span><br><span class="line"><span class="comment">  *   1983  03    0.410516        0.442194</span></span><br><span class="line"><span class="comment">  *   1984  04    0.450090        0.483521</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param numRows  Number of rows to show</span></span><br><span class="line"><span class="comment">  * @param truncate If set to more than 0, truncates strings to `truncate` characters and</span></span><br><span class="line"><span class="comment">  *                 all cells will be aligned right.</span></span><br><span class="line"><span class="comment">  *                 ËÆæÁΩÆ Ëß¶ÂèëÊà™Êñ≠Â≠óÁ¨¶‰∏≤ÁöÑÈòàÂÄº</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">// scalastyle:off println</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show</span></span>(numRows: <span class="type">Int</span>, truncate: <span class="type">Int</span>): <span class="type">Unit</span> = println(showString(numRows, truncate))</span><br></pre></td></tr></table></figure>
<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Scala-specific)</span></span><br><span class="line"><span class="comment">  * Reduces the elements of this Dataset using the specified binary function. The given `func`</span></span><br><span class="line"><span class="comment">  * must be commutative and associative or the result may be non-deterministic.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ‰ΩøÁî®ÊåáÂÆöÁöÑ‰∫åËøõÂà∂ÂáΩÊï∞ÂáèÂ∞ëËøô‰∏™Êï∞ÊçÆÈõÜÁöÑÂÖÉÁ¥†„ÄÇÁªôÂÆöÁöÑ‚Äúfunc‚ÄùÂøÖÈ°ªÊòØÂèØ‰∫§Êç¢ÁöÑÂíåÂÖ≥ËÅîÁöÑÔºåÂê¶ÂàôÁªìÊûúÂèØËÉΩÊòØ‰∏çÁ°ÆÂÆöÊÄßÁöÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reduce</span></span>(func: (<span class="type">T</span>, <span class="type">T</span>) =&gt; <span class="type">T</span>): <span class="type">T</span> = rdd.reduce(func)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Java-specific)</span></span><br><span class="line"><span class="comment">  * Reduces the elements of this Dataset using the specified binary function. The given `func`</span></span><br><span class="line"><span class="comment">  * must be commutative and associative or the result may be non-deterministic.</span></span><br><span class="line"><span class="comment">  * </span></span><br><span class="line"><span class="comment">  * ‰ΩøÁî®ÊåáÂÆöÁöÑ‰∫åËøõÂà∂ÂáΩÊï∞ÂáèÂ∞ëËøô‰∏™Êï∞ÊçÆÈõÜÁöÑÂÖÉÁ¥†„ÄÇÁªôÂÆöÁöÑ‚Äúfunc‚ÄùÂøÖÈ°ªÊòØÂèØ‰∫§Êç¢ÁöÑÂíåÂÖ≥ËÅîÁöÑÔºåÂê¶ÂàôÁªìÊûúÂèØËÉΩÊòØ‰∏çÁ°ÆÂÆöÊÄßÁöÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reduce</span></span>(func: <span class="type">ReduceFunction</span>[<span class="type">T</span>]): <span class="type">T</span> = reduce(func.call(_, _))</span><br></pre></td></tr></table></figure>
<h3 id="describe"><a href="#describe" class="headerlink" title="describe"></a>describe</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Computes statistics for numeric and string columns, including count, mean, stddev, min, and</span></span><br><span class="line"><span class="comment">   * max. If no columns are given, this function computes statistics for all numerical or string</span></span><br><span class="line"><span class="comment">   * columns.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * ËÆ°ÁÆóÊï∞Â≠óÂíåÂ≠óÁ¨¶‰∏≤ÂàóÁöÑÁªüËÆ°Êï∞ÊçÆÔºåÂåÖÊã¨count„ÄÅmean„ÄÅstddev„ÄÅminÂíåmax„ÄÇ</span></span><br><span class="line"><span class="comment">   * Â¶ÇÊûúÊ≤°ÊúâÁªôÂá∫‰ªª‰ΩïÂàóÔºåËØ•ÂáΩÊï∞ËÆ°ÁÆóÊâÄÊúâÊï∞ÂÄºÊàñÂ≠óÁ¨¶‰∏≤ÂàóÁöÑÁªüËÆ°‰ø°ÊÅØ„ÄÇ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * This function is meant for exploratory data analysis, as we make no guarantee about the</span></span><br><span class="line"><span class="comment">   * backward compatibility of the schema of the resulting Dataset. If you want to</span></span><br><span class="line"><span class="comment">   * programmatically compute summary statistics, use the `agg` function instead.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * Ëøô‰∏™ÂáΩÊï∞Áî®‰∫éÊé¢Á¥¢ÊÄßÁöÑÊï∞ÊçÆÂàÜÊûêÔºåÂõ†‰∏∫Êàë‰ª¨‰∏çËÉΩ‰øùËØÅÁîüÊàêÊï∞ÊçÆÈõÜÁöÑÊ®°ÂºèÁöÑÂêëÂêéÂÖºÂÆπÊÄß„ÄÇ</span></span><br><span class="line"><span class="comment">   * Â¶ÇÊûúÊÇ®ÊÉ≥ÈÄöËøáÁºñÁ®ãËÆ°ÁÆóÊ±áÊÄªÁªüËÆ°‰ø°ÊÅØÔºåÂèØ‰ª•‰ΩøÁî®‚Äúagg‚ÄùÂáΩÊï∞„ÄÇ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">   *   ds.describe("age", "height").show()</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   *   // output:</span></span><br><span class="line"><span class="comment">   *   // summary age   height</span></span><br><span class="line"><span class="comment">   *   // count   10.0  10.0</span></span><br><span class="line"><span class="comment">   *   // mean    53.3  178.05</span></span><br><span class="line"><span class="comment">   *   // stddev  11.6  15.7</span></span><br><span class="line"><span class="comment">   *   // min     18.0  163.0</span></span><br><span class="line"><span class="comment">   *   // max     92.0  192.0</span></span><br><span class="line"><span class="comment">   * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group action</span></span><br><span class="line"><span class="comment">   * @since 1.6.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">describe</span></span>(cols: <span class="type">String</span>*): <span class="type">DataFrame</span> = withPlan &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// The list of summary statistics to compute, in the form of expressions.</span></span><br><span class="line">   <span class="keyword">val</span> statistics = <span class="type">List</span>[(<span class="type">String</span>, <span class="type">Expression</span> =&gt; <span class="type">Expression</span>)](</span><br><span class="line">     <span class="string">"count"</span> -&gt; ((child: <span class="type">Expression</span>) =&gt; <span class="type">Count</span>(child).toAggregateExpression()),</span><br><span class="line">     <span class="string">"mean"</span> -&gt; ((child: <span class="type">Expression</span>) =&gt; <span class="type">Average</span>(child).toAggregateExpression()),</span><br><span class="line">     <span class="string">"stddev"</span> -&gt; ((child: <span class="type">Expression</span>) =&gt; <span class="type">StddevSamp</span>(child).toAggregateExpression()),</span><br><span class="line">     <span class="string">"min"</span> -&gt; ((child: <span class="type">Expression</span>) =&gt; <span class="type">Min</span>(child).toAggregateExpression()),</span><br><span class="line">     <span class="string">"max"</span> -&gt; ((child: <span class="type">Expression</span>) =&gt; <span class="type">Max</span>(child).toAggregateExpression()))</span><br><span class="line"></span><br><span class="line">   <span class="keyword">val</span> outputCols =</span><br><span class="line">     (<span class="keyword">if</span> (cols.isEmpty) aggregatableColumns.map(usePrettyExpression(_).sql) <span class="keyword">else</span> cols).toList</span><br><span class="line"></span><br><span class="line">   <span class="keyword">val</span> ret: <span class="type">Seq</span>[<span class="type">Row</span>] = <span class="keyword">if</span> (outputCols.nonEmpty) &#123;</span><br><span class="line">     <span class="keyword">val</span> aggExprs = statistics.flatMap &#123; <span class="keyword">case</span> (_, colToAgg) =&gt;</span><br><span class="line">       outputCols.map(c =&gt; <span class="type">Column</span>(<span class="type">Cast</span>(colToAgg(<span class="type">Column</span>(c).expr), <span class="type">StringType</span>)).as(c))</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">val</span> row = groupBy().agg(aggExprs.head, aggExprs.tail: _*).head().toSeq</span><br><span class="line"></span><br><span class="line">     <span class="comment">// Pivot the data so each summary is one row</span></span><br><span class="line">     row.grouped(outputCols.size).toSeq.zip(statistics).map &#123; <span class="keyword">case</span> (aggregation, (statistic, _)) =&gt;</span><br><span class="line">       <span class="type">Row</span>(statistic :: aggregation.toList: _*)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">     <span class="comment">// If there are no output columns, just output a single column that contains the stats.</span></span><br><span class="line">     statistics.map &#123; <span class="keyword">case</span> (name, _) =&gt; <span class="type">Row</span>(name) &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// All columns are string type</span></span><br><span class="line">   <span class="keyword">val</span> schema = <span class="type">StructType</span>(</span><br><span class="line">     <span class="type">StructField</span>(<span class="string">"summary"</span>, <span class="type">StringType</span>) :: outputCols.map(<span class="type">StructField</span>(_, <span class="type">StringType</span>))).toAttributes</span><br><span class="line">   <span class="comment">// `toArray` forces materialization to make the seq serializable</span></span><br><span class="line">   <span class="type">LocalRelation</span>.fromExternalRows(schema, ret.toArray.toSeq)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="head"><a href="#head" class="headerlink" title="head"></a>head</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the first `n` rows.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂâçnË°å</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  *       all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  *       ‰ªÖÈÄÇÁî®‰∫éÁªìÊûúÂæàÂ∞ëÁöÑÊó∂ÂÄô‰ΩøÁî®ÔºåÂõ†‰∏∫‰ºöÂ∞ÜÁªìÊûúÂä†ËΩΩËøõÂÜÖÂ≠ò‰∏≠</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">head</span></span>(n: <span class="type">Int</span>): <span class="type">Array</span>[<span class="type">T</span>] = withTypedCallback(<span class="string">"head"</span>, limit(n)) &#123; df =&gt;</span><br><span class="line">  df.collect(needCallback = <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the first row.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁ¨¨‰∏ÄË°åÔºàÈªòËÆ§1Ôºâ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">head</span></span>(): <span class="type">T</span> = head(<span class="number">1</span>).head</span><br></pre></td></tr></table></figure>
<h3 id="first"><a href="#first" class="headerlink" title="first"></a>first</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the first row. Alias for head().</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁ¨¨‰∏ÄË°å Ôºå‰∏éhead()‰∏ÄÊ†∑</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">first</span></span>(): <span class="type">T</span> = head()</span><br></pre></td></tr></table></figure>
<h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Applies a function `f` to all rows.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÂØπÊâÄÊúâË°åÂ∫îÁî®ÂáΩÊï∞f„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreach</span></span>(f: <span class="type">T</span> =&gt; <span class="type">Unit</span>): <span class="type">Unit</span> = withNewExecutionId &#123;</span><br><span class="line">  rdd.foreach(f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * (Java-specific)</span></span><br><span class="line"><span class="comment">  * Runs `func` on each element of this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Âú®Ëøô‰∏™Êï∞ÊçÆÈõÜÁöÑÊØè‰∏™ÂÖÉÁ¥†‰∏äËøêË°å‚Äúfunc‚Äù„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreach</span></span>(func: <span class="type">ForeachFunction</span>[<span class="type">T</span>]): <span class="type">Unit</span> = foreach(func.call(_))</span><br></pre></td></tr></table></figure>
<h3 id="foreachPartition"><a href="#foreachPartition" class="headerlink" title="foreachPartition"></a>foreachPartition</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Applies a function `f` to each partition of this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÂØπËøô‰∏™Êï∞ÊçÆÈõÜÁöÑÊØè‰∏™ÂàÜÂå∫Â∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞f„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreachPartition</span></span>(f: <span class="type">Iterator</span>[<span class="type">T</span>] =&gt; <span class="type">Unit</span>): <span class="type">Unit</span> = withNewExecutionId &#123;</span><br><span class="line">  rdd.foreachPartition(f)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * (Java-specific)</span></span><br><span class="line"><span class="comment">  * Runs `func` on each partition of this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÂØπËøô‰∏™Êï∞ÊçÆÈõÜÁöÑÊØè‰∏™ÂàÜÂå∫Â∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞f„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreachPartition</span></span>(func: <span class="type">ForeachPartitionFunction</span>[<span class="type">T</span>]): <span class="type">Unit</span> =</span><br><span class="line">  foreachPartition(it =&gt; func.call(it.asJava))</span><br></pre></td></tr></table></figure>
<h3 id="take"><a href="#take" class="headerlink" title="take"></a>take</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the first `n` rows in the Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÊï∞ÊçÆÈõÜ‰∏≠ÁöÑÂâç‚Äún‚ÄùË°å„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âêåhead(n)</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Running take requires moving data into the application's driver process, and doing so with</span></span><br><span class="line"><span class="comment">  * a very large `n` can crash the driver process with OutOfMemoryError.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * takeÂú®driverÁ´ØÊâßË°åÔºånÂ§™Â§ß‰ºöÈÄ†Êàêoom</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">take</span></span>(n: <span class="type">Int</span>): <span class="type">Array</span>[<span class="type">T</span>] = head(n)</span><br></pre></td></tr></table></figure>
<h3 id="takeAsList"><a href="#takeAsList" class="headerlink" title="takeAsList"></a>takeAsList</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the first `n` rows in the Dataset as a list.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ‰ª•ListÂΩ¢ÂºèËøîÂõû ÂâçnË°å</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Running take requires moving data into the application's driver process, and doing so with</span></span><br><span class="line"><span class="comment">  * a very large `n` can crash the driver process with OutOfMemoryError.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * takeÂú®driverÁ´ØÊâßË°åÔºånÂ§™Â§ß‰ºöÈÄ†Êàêoom</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeAsList</span></span>(n: <span class="type">Int</span>): java.util.<span class="type">List</span>[<span class="type">T</span>] = java.util.<span class="type">Arrays</span>.asList(take(n): _*)</span><br></pre></td></tr></table></figure>
<h3 id="collect"><a href="#collect" class="headerlink" title="collect"></a>collect</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns an array that contains all of [[Row]]s in this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂåÖÂê´ÊâÄÊúâRowÁöÑ ‰∏Ä‰∏™Êï∞ÁªÑ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Running collect requires moving all the data into the application's driver process, and</span></span><br><span class="line"><span class="comment">  * doing so on a very large dataset can crash the driver process with OutOfMemoryError.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ‰ºöÂ∞ÜÊâÄÊúâÊï∞ÊçÆÁßªÂä®Âà∞driverÔºåÊâÄ‰ª•ÂèØËÉΩ‰ºöÈÄ†Êàêoom</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * For Java API, use [[collectAsList]].</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">collect</span></span>(): <span class="type">Array</span>[<span class="type">T</span>] = collect(needCallback = <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<h3 id="collectAsList"><a href="#collectAsList" class="headerlink" title="collectAsList"></a>collectAsList</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a Java list that contains all of [[Row]]s in this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂåÖÂê´ÊâÄÊúâRowÁöÑ‰∏Ä‰∏™Java List</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Running collect requires moving all the data into the application's driver process, and</span></span><br><span class="line"><span class="comment">  * doing so on a very large dataset can crash the driver process with OutOfMemoryError.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ‰ºöÂ∞ÜÊâÄÊúâÊï∞ÊçÆÁßªÂä®Âà∞driverÔºåÊâÄ‰ª•ÂèØËÉΩ‰ºöÈÄ†Êàêoom</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">collectAsList</span></span>(): java.util.<span class="type">List</span>[<span class="type">T</span>] = withCallback(<span class="string">"collectAsList"</span>, toDF()) &#123; _ =&gt;</span><br><span class="line">  withNewExecutionId &#123;</span><br><span class="line">    <span class="keyword">val</span> values = queryExecution.executedPlan.executeCollect().map(boundEnc.fromRow)</span><br><span class="line">    java.util.<span class="type">Arrays</span>.asList(values: _*)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="toLocalIterator"><a href="#toLocalIterator" class="headerlink" title="toLocalIterator"></a>toLocalIterator</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an iterator that contains all of [[Row]]s in this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂåÖÂê´ÊâÄÊúâRowÁöÑ‰∏Ä‰∏™Ëø≠‰ª£Âô®</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * The iterator will consume as much memory as the largest partition in this Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ëø≠‰ª£Âô®Â∞ÜÊ∂àËÄó‰∏éÊ≠§Êï∞ÊçÆÈõÜ‰∏≠ÊúÄÂ§ßÁöÑÂàÜÂå∫‰∏ÄÊ†∑Â§öÁöÑÂÜÖÂ≠ò„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this results in multiple Spark jobs, and if the input Dataset is the result</span></span><br><span class="line"><span class="comment">  *       of a wide transformation (e.g. join with different partitioners), to avoid</span></span><br><span class="line"><span class="comment">  *       recomputing the input Dataset should be cached first.</span></span><br><span class="line"><span class="comment">  *       ËøôÂ∞ÜÂØºËá¥Â§ö‰∏™Spark‰Ωú‰∏öÔºåÂ¶ÇÊûúËæìÂÖ•Êï∞ÊçÆÈõÜÊòØÂÆΩ‰æùËµñËΩ¨Êç¢ÁöÑÁªìÊûú(‰æãÂ¶ÇÔºå‰∏é‰∏çÂêåÁöÑÂàÜÂå∫ËøûÊé•)Ôºå</span></span><br><span class="line"><span class="comment">  *       ÈÇ£‰πà‰∏∫‰∫ÜÈÅøÂÖçÈáçÊñ∞ËÆ°ÁÆóËæìÂÖ•Êï∞ÊçÆÔºåÂ∫îËØ•È¶ñÂÖàÁºìÂ≠òËæìÂÖ•Êï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toLocalIterator</span></span>(): java.util.<span class="type">Iterator</span>[<span class="type">T</span>] = withCallback(<span class="string">"toLocalIterator"</span>, toDF()) &#123; _ =&gt;</span><br><span class="line">  withNewExecutionId &#123;</span><br><span class="line">    queryExecution.executedPlan.executeToIterator().map(boundEnc.fromRow).asJava</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="count"><a href="#count" class="headerlink" title="count"></a>count</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the number of rows in the Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÊÄªË°åÊï∞</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group action</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span></span>(): <span class="type">Long</span> = withCallback(<span class="string">"count"</span>, groupBy().count()) &#123; df =&gt;</span><br><span class="line">  df.collect(needCallback = <span class="literal">false</span>).head.getLong(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="untypedrel-Êó†Á±ªÂûãËΩ¨Êç¢"><a href="#untypedrel-Êó†Á±ªÂûãËΩ¨Êç¢" class="headerlink" title="untypedrel-Êó†Á±ªÂûãËΩ¨Êç¢"></a>untypedrel-Êó†Á±ªÂûãËΩ¨Êç¢</h2><h3 id="na"><a href="#na" class="headerlink" title="na"></a>na</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a [[DataFrameNaFunctions]] for working with missing data.</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Áî®‰∫éÂ§ÑÁêÜ‰∏¢Â§±Êï∞ÊçÆÁöÑ[[DataFrameNaFunctions]]„ÄÇ</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   // Dropping rows containing any null values. Âà†Èô§ÂåÖÂê´‰ªª‰Ωïnull ÂÄºÁöÑË°å</span></span><br><span class="line"><span class="comment">  *   ds.na.drop()</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">na</span></span>: <span class="type">DataFrameNaFunctions</span> = <span class="keyword">new</span> <span class="type">DataFrameNaFunctions</span>(toDF())</span><br></pre></td></tr></table></figure>
<h3 id="stat"><a href="#stat" class="headerlink" title="stat"></a>stat</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a [[DataFrameStatFunctions]] for working statistic functions support.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁî®‰∫éÊîØÊåÅÁªüËÆ°ÂäüËÉΩÁöÑ[[DataFrameStatFunctions]]„ÄÇ</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   // Finding frequent items in column with name 'a'. Êü•ËØ¢ÂàóÂêç‰∏∫"a"‰∏≠ÁöÑÈ¢ëÁπÅÊï∞ÊçÆ„ÄÇ</span></span><br><span class="line"><span class="comment">  *   ds.stat.freqItems(Seq("a"))</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">stat</span></span>: <span class="type">DataFrameStatFunctions</span> = <span class="keyword">new</span> <span class="type">DataFrameStatFunctions</span>(toDF())</span><br></pre></td></tr></table></figure>
<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Join with another `DataFrame`.</span></span><br><span class="line"><span class="comment">    * Âíå Âè¶‰∏Ä‰∏™ `DataFrame`  jion</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Behaves as an INNER JOIN and requires a subsequent join predicate.</span></span><br><span class="line"><span class="comment">    * ‰Ωú‰∏∫‰∏Ä‰∏™ÂÜÖÈÉ®ËøûÊé•ÔºåÂπ∂ÈúÄË¶Å‰∏Ä‰∏™ÂêéÁª≠ÁöÑËøûÊé•Ë∞ìËØç„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param right Right side of the join operation. joinÊìç‰ΩúÁöÑÂè≥‰æß</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">join</span></span>(right: <span class="type">Dataset</span>[_]): <span class="type">DataFrame</span> = withPlan &#123;</span><br><span class="line">    <span class="type">Join</span>(logicalPlan, right.logicalPlan, joinType = <span class="type">Inner</span>, <span class="type">None</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Inner equi-join with another `DataFrame` using the given column.</span></span><br><span class="line"><span class="comment">    * ÁªôÂÆöÂàóÂêçÁöÑÂÜÖÈÉ®Á≠âÂÄºËøûÊé•</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Different from other join functions, the join column will only appear once in the output,</span></span><br><span class="line"><span class="comment">    * i.e. similar to SQL's `JOIN USING` syntax.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // Joining df1 and df2 using the column "user_id" Áî®"user_id"  ËøûÊé• df1 Âíådf2</span></span><br><span class="line"><span class="comment">    *   df1.join(df2, "user_id")</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param right       Right side of the join operation. joinËøûÊé•Âè≥‰æß</span></span><br><span class="line"><span class="comment">    * @param usingColumn Name of the column to join on. This column must exist on both sides.</span></span><br><span class="line"><span class="comment">    *                    ÂàóÂêç„ÄÇÂøÖÈ°ªÂú®‰∏§ËæπÈÉΩÂ≠òÂú®</span></span><br><span class="line"><span class="comment">    * @note If you perform a self-join using this function without aliasing the input</span></span><br><span class="line"><span class="comment">    *       `DataFrame`s, you will NOT be able to reference any columns after the join, since</span></span><br><span class="line"><span class="comment">    *       there is no way to disambiguate which side of the join you would like to reference.</span></span><br><span class="line"><span class="comment">    *       Ëá™ËøûÊé•ÁöÑÊó∂ÂÄôÔºåËØ∑ÊåáÂÆö Ë°®Âà´Âêç„ÄÇ‰∏çÁÑ∂Âπ≤‰∏ç‰∫Ü‰∫ã</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">join</span></span>(right: <span class="type">Dataset</span>[_], usingColumn: <span class="type">String</span>): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">    join(right, <span class="type">Seq</span>(usingColumn))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Inner equi-join with another `DataFrame` using the given columns.</span></span><br><span class="line"><span class="comment">    * Ê†πÊçÆÊåáÂÆöÂ§ö‰∏™ÂàóËøõË°åjoin</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Different from other join functions, the join columns will only appear once in the output,</span></span><br><span class="line"><span class="comment">    * i.e. similar to SQL's `JOIN USING` syntax.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // Joining df1 and df2 using the columns "user_id" and "user_name"</span></span><br><span class="line"><span class="comment">    *   df1.join(df2, Seq("user_id", "user_name"))</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param right        Right side of the join operation.</span></span><br><span class="line"><span class="comment">    * @param usingColumns Names of the columns to join on. This columns must exist on both sides.</span></span><br><span class="line"><span class="comment">    * @note If you perform a self-join using this function without aliasing the input</span></span><br><span class="line"><span class="comment">    *       `DataFrame`s, you will NOT be able to reference any columns after the join, since</span></span><br><span class="line"><span class="comment">    *       there is no way to disambiguate which side of the join you would like to reference.</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">join</span></span>(right: <span class="type">Dataset</span>[_], usingColumns: <span class="type">Seq</span>[<span class="type">String</span>]): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">    join(right, usingColumns, <span class="string">"inner"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Equi-join with another `DataFrame` using the given columns.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Different from other join functions, the join columns will only appear once in the output,</span></span><br><span class="line"><span class="comment">    * i.e. similar to SQL's `JOIN USING` syntax.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param right        Right side of the join operation.</span></span><br><span class="line"><span class="comment">    * @param usingColumns Names of the columns to join on. This columns must exist on both sides.</span></span><br><span class="line"><span class="comment">    * @param joinType     One of: `inner`, `outer`, `left_outer`, `right_outer`, `leftsemi`.</span></span><br><span class="line"><span class="comment">    *                     ËøûÊé•Á±ªÂûãÔºöÂÜÖËøûÊé•ÔºåÂ§ñËøûÊé•ÔºåÂ∑¶Â§ñËøûÊé•ÔºåÂè≥Â§ñËøûÊé•ÔºåÂ∑¶ÂÜÖËøûÊé•</span></span><br><span class="line"><span class="comment">    * @note If you perform a self-join using this function without aliasing the input</span></span><br><span class="line"><span class="comment">    *       `DataFrame`s, you will NOT be able to reference any columns after the join, since</span></span><br><span class="line"><span class="comment">    *       there is no way to disambiguate which side of the join you would like to reference.</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">join</span></span>(right: <span class="type">Dataset</span>[_], usingColumns: <span class="type">Seq</span>[<span class="type">String</span>], joinType: <span class="type">String</span>): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">    <span class="comment">// Analyze the self join. The assumption is that the analyzer will disambiguate left vs right</span></span><br><span class="line">    <span class="comment">// by creating a new instance for one of the branch.</span></span><br><span class="line">    <span class="comment">// Ëá™ËøûÊé•ÁöÑÊó∂ÂÄôÔºå‰∏∫ÂÖ∂‰∏≠‰∏Ä‰∏™ÂàÜÊîØÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂÆû‰æãÊù•Ê∂àÈô§Â∑¶vsÂè≥ÁöÑÊ≠ß‰πâ„ÄÇ</span></span><br><span class="line">    <span class="keyword">val</span> joined = sparkSession.sessionState.executePlan(</span><br><span class="line">      <span class="type">Join</span>(logicalPlan, right.logicalPlan, joinType = <span class="type">JoinType</span>(joinType), <span class="type">None</span>))</span><br><span class="line">      .analyzed.asInstanceOf[<span class="type">Join</span>]</span><br><span class="line"></span><br><span class="line">    withPlan &#123;</span><br><span class="line">      <span class="type">Join</span>(</span><br><span class="line">        joined.left,</span><br><span class="line">        joined.right,</span><br><span class="line">        <span class="type">UsingJoin</span>(<span class="type">JoinType</span>(joinType), usingColumns),</span><br><span class="line">        <span class="type">None</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Inner join with another `DataFrame`, using the given join expression.</span></span><br><span class="line"><span class="comment">    * Áî®ÁªôÂÆöÁöÑË°®ËææÂºèËøõË°åjoin</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // The following two are equivalent:</span></span><br><span class="line"><span class="comment">    *   df1.join(df2, $"df1Key" === $"df2Key")</span></span><br><span class="line"><span class="comment">    *   df1.join(df2).where($"df1Key" === $"df2Key")</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">join</span></span>(right: <span class="type">Dataset</span>[_], joinExprs: <span class="type">Column</span>): <span class="type">DataFrame</span> = join(right, joinExprs, <span class="string">"inner"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Join with another `DataFrame`, using the given join expression. The following performs</span></span><br><span class="line"><span class="comment">    * a full outer join between `df1` and `df2`.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // Scala:</span></span><br><span class="line"><span class="comment">    *   import org.apache.spark.sql.functions._</span></span><br><span class="line"><span class="comment">    *   df1.join(df2, $"df1Key" === $"df2Key", "outer")</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *   // Java:</span></span><br><span class="line"><span class="comment">    *   import static org.apache.spark.sql.functions.*;</span></span><br><span class="line"><span class="comment">    *   df1.join(df2, col("df1Key").equalTo(col("df2Key")), "outer");</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param right     Right side of the join.</span></span><br><span class="line"><span class="comment">    * @param joinExprs Join expression.</span></span><br><span class="line"><span class="comment">    * @param joinType  One of: `inner`, `outer`, `left_outer`, `right_outer`, `leftsemi`.</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">join</span></span>(right: <span class="type">Dataset</span>[_], joinExprs: <span class="type">Column</span>, joinType: <span class="type">String</span>): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">    <span class="comment">// Note that in this function, we introduce a hack in the case of self-join to automatically</span></span><br><span class="line">    <span class="comment">// resolve ambiguous join conditions into ones that might make sense [SPARK-6231].</span></span><br><span class="line">    <span class="comment">// Consider this case: df.join(df, df("key") === df("key"))</span></span><br><span class="line">    <span class="comment">// Since df("key") === df("key") is a trivially true condition, this actually becomes a</span></span><br><span class="line">    <span class="comment">// cartesian join. However, most likely users expect to perform a self join using "key".</span></span><br><span class="line">    <span class="comment">// With that assumption, this hack turns the trivially true condition into equality on join</span></span><br><span class="line">    <span class="comment">// keys that are resolved to both sides.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Trigger analysis so in the case of self-join, the analyzer will clone the plan.</span></span><br><span class="line">    <span class="comment">// After the cloning, left and right side will have distinct expression ids.</span></span><br><span class="line">    <span class="comment">// ÈíàÂØπËá™ËøûÊé•ÁöÑ‰ºòÂåñÔºöÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåËá™ËøûÊé•Â¶ÇÊûú‰ΩøÁî®  df.join(df, df("key") === df("key"))</span></span><br><span class="line">    <span class="comment">// ‰ºöÈÄ†Êàê Á¨õÂç°Â∞îÁßØ</span></span><br><span class="line">    <span class="comment">// ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂàÜÊûêÂô®‰ºö ÂÖãÈöÜËÆ°ÂàíÔºåÂÖãÈöÜÂÆåÊàêÂêéÔºåÂ∑¶Âè≥‰∏§ËæπÂàôÊúâ‰∏çÂêåÁöÑ id</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">val</span> plan = withPlan(</span><br><span class="line">      <span class="type">Join</span>(logicalPlan, right.logicalPlan, <span class="type">JoinType</span>(joinType), <span class="type">Some</span>(joinExprs.expr)))</span><br><span class="line">      .queryExecution.analyzed.asInstanceOf[<span class="type">Join</span>]</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If auto self join alias is disabled, return the plan.</span></span><br><span class="line">    <span class="keyword">if</span> (!sparkSession.sessionState.conf.dataFrameSelfJoinAutoResolveAmbiguity) &#123;</span><br><span class="line">      <span class="keyword">return</span> withPlan(plan)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// If left/right have no output set intersection, return the plan.</span></span><br><span class="line">    <span class="keyword">val</span> lanalyzed = withPlan(<span class="keyword">this</span>.logicalPlan).queryExecution.analyzed</span><br><span class="line">    <span class="keyword">val</span> ranalyzed = withPlan(right.logicalPlan).queryExecution.analyzed</span><br><span class="line">    <span class="keyword">if</span> (lanalyzed.outputSet.intersect(ranalyzed.outputSet).isEmpty) &#123;</span><br><span class="line">      <span class="keyword">return</span> withPlan(plan)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Otherwise, find the trivially true predicates and automatically resolves them to both sides.</span></span><br><span class="line">    <span class="comment">// By the time we get here, since we have already run analysis, all attributes should've been</span></span><br><span class="line">    <span class="comment">// resolved and become AttributeReference.</span></span><br><span class="line">    <span class="keyword">val</span> cond = plan.condition.map &#123;</span><br><span class="line">      _.transform &#123;</span><br><span class="line">        <span class="keyword">case</span> catalyst.expressions.<span class="type">EqualTo</span>(a: <span class="type">AttributeReference</span>, b: <span class="type">AttributeReference</span>)</span><br><span class="line">          <span class="keyword">if</span> a.sameRef(b) =&gt;</span><br><span class="line">          catalyst.expressions.<span class="type">EqualTo</span>(</span><br><span class="line">            withPlan(plan.left).resolve(a.name),</span><br><span class="line">            withPlan(plan.right).resolve(b.name))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    withPlan &#123;</span><br><span class="line">      plan.copy(condition = cond)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="crossJoin"><a href="#crossJoin" class="headerlink" title="crossJoin"></a>crossJoin</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Explicit cartesian join with another `DataFrame`.</span></span><br><span class="line"><span class="comment">  * ÊòæÂºèÁ¨õÂç°Â∞îÁßØjoin</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param right Right side of the join operation.</span></span><br><span class="line"><span class="comment">  * @note Cartesian joins are very expensive without an extra filter that can be pushed down.</span></span><br><span class="line"><span class="comment">  *       Â¶ÇÊûúÊ≤°ÊúâÈ¢ùÂ§ñÁöÑËøáÊª§Âô®ÔºåÁ¨õÂç°Â∞îËøûÊé•ÈùûÂ∏∏ÊòÇË¥µ„ÄÇ</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.1.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crossJoin</span></span>(right: <span class="type">Dataset</span>[_]): <span class="type">DataFrame</span> = withPlan &#123;</span><br><span class="line">  <span class="type">Join</span>(logicalPlan, right.logicalPlan, joinType = <span class="type">Cross</span>, <span class="type">None</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Selects column based on the column name and return it as a [[Column]].</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÈÄâÊã©Âü∫‰∫éÂàóÂêçÁöÑÂàóÔºåÂπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫[[Column]]ËøîÂõû„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note The column name can also reference to a nested column like `a.b`.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *       ÂàóÂêç‰πüÂèØ‰ª•ÂºïÁî®ÂÉè‚Äúa.b‚ÄùËøôÊ†∑ÁöÑÂµåÂ•óÂàó„ÄÇ</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apply</span></span>(colName: <span class="type">String</span>): <span class="type">Column</span> = col(colName)</span><br></pre></td></tr></table></figure>
<h3 id="col"><a href="#col" class="headerlink" title="col"></a>col</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Selects column based on the column name and return it as a [[Column]].</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÈÄâÊã©Âü∫‰∫éÂàóÂêçÁöÑÂàóÔºåÂπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫[[Column]]ËøîÂõû„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note The column name can also reference to a nested column like `a.b`.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *       ÂàóÂêç‰πüÂèØ‰ª•ÂºïÁî®ÂÉè‚Äúa.b‚ÄùËøôÊ†∑ÁöÑÂµåÂ•óÂàó„ÄÇ</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">col</span></span>(colName: <span class="type">String</span>): <span class="type">Column</span> = colName <span class="keyword">match</span> &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">"*"</span> =&gt;</span><br><span class="line">    <span class="type">Column</span>(<span class="type">ResolvedStar</span>(queryExecution.analyzed.output))</span><br><span class="line">  <span class="keyword">case</span> _ =&gt;</span><br><span class="line">    <span class="keyword">val</span> expr = resolve(colName)</span><br><span class="line">    <span class="type">Column</span>(expr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Selects a set of column based expressions.</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   ds.select($"colA", $"colB" + 1)</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">select</span></span>(cols: <span class="type">Column</span>*): <span class="type">DataFrame</span> = withPlan &#123;</span><br><span class="line">  <span class="type">Project</span>(cols.map(_.named), logicalPlan)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Selects a set of columns. This is a variant of `select` that can only select</span></span><br><span class="line"><span class="comment">  * existing columns using column names (i.e. cannot construct expressions).</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Âè™ËÉΩÊòØÂ∑≤ÁªèÂ≠òÂú®ÁöÑÂàóÂêç</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   // The following two are equivalent:</span></span><br><span class="line"><span class="comment">  *   ds.select("colA", "colB")</span></span><br><span class="line"><span class="comment">  *   ds.select($"colA", $"colB")</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">select</span></span>(col: <span class="type">String</span>, cols: <span class="type">String</span>*): <span class="type">DataFrame</span> = select((col +: cols).map(<span class="type">Column</span>(_)): _*)</span><br></pre></td></tr></table></figure>
<h3 id="selectExpr"><a href="#selectExpr" class="headerlink" title="selectExpr"></a>selectExpr</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Selects a set of SQL expressions. This is a variant of `select` that accepts</span></span><br><span class="line"><span class="comment">  * SQL expressions.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Êé•ÂèóSQLË°®ËææÂºè</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   // The following are equivalent:</span></span><br><span class="line"><span class="comment">  *   ‰ª•‰∏ãÊòØÁ≠â‰ª∑ÁöÑ:</span></span><br><span class="line"><span class="comment">  *   ds.selectExpr("colA", "colB as newName", "abs(colC)")</span></span><br><span class="line"><span class="comment">  *   ds.select(expr("colA"), expr("colB as newName"), expr("abs(colC)"))</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">selectExpr</span></span>(exprs: <span class="type">String</span>*): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  select(exprs.map &#123; expr =&gt;</span><br><span class="line">    <span class="type">Column</span>(sparkSession.sessionState.sqlParser.parseExpression(expr))</span><br><span class="line">  &#125;: _*)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="groupBy"><a href="#groupBy" class="headerlink" title="groupBy"></a>groupBy</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Groups the Dataset using the specified columns, so we can run aggregation on them. See</span></span><br><span class="line"><span class="comment">  * [[RelationalGroupedDataset]] for all the available aggregate functions.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàóÂØπÊï∞ÊçÆÈõÜËøõË°åÂàÜÁªÑÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ÂØπÂÆÉ‰ª¨ËøõË°åËÅöÂêà„ÄÇ</span></span><br><span class="line"><span class="comment">  * Êü•Áúã[[RelationalGroupedDataset]]‰∏∫ÊâÄÊúâÂèØÁî®ÁöÑËÅöÂêàÂáΩÊï∞„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   // Compute the average for all numeric columns grouped by department.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *   ËÆ°ÁÆóÊåâÈÉ®Èó®ÂàÜÁªÑÁöÑÊâÄÊúâÊï∞Â≠óÂàóÁöÑÂπ≥ÂùáÂÄº„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *   ds.groupBy($"department").avg()</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *   // Compute the max age and average salary, grouped by department and gender.</span></span><br><span class="line"><span class="comment">  *   ds.groupBy($"department", $"gender").agg(Map(</span></span><br><span class="line"><span class="comment">  *     "salary" -&gt; "avg",</span></span><br><span class="line"><span class="comment">  *     "age" -&gt; "max"</span></span><br><span class="line"><span class="comment">  *   ))</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">groupBy</span></span>(cols: <span class="type">Column</span>*): <span class="type">RelationalGroupedDataset</span> = &#123;</span><br><span class="line">  <span class="type">RelationalGroupedDataset</span>(toDF(), cols.map(_.expr), <span class="type">RelationalGroupedDataset</span>.<span class="type">GroupByType</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Groups the Dataset using the specified columns, so that we can run aggregation on them.</span></span><br><span class="line"><span class="comment">  * See [[RelationalGroupedDataset]] for all the available aggregate functions.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This is a variant of groupBy that can only group by existing columns using column names</span></span><br><span class="line"><span class="comment">  * (i.e. cannot construct expressions).</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   // Compute the average for all numeric columns grouped by department.</span></span><br><span class="line"><span class="comment">  *   ds.groupBy("department").avg()</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *   // Compute the max age and average salary, grouped by department and gender.</span></span><br><span class="line"><span class="comment">  *   ds.groupBy($"department", $"gender").agg(Map(</span></span><br><span class="line"><span class="comment">  *     "salary" -&gt; "avg",</span></span><br><span class="line"><span class="comment">  *     "age" -&gt; "max"</span></span><br><span class="line"><span class="comment">  *   ))</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">groupBy</span></span>(col1: <span class="type">String</span>, cols: <span class="type">String</span>*): <span class="type">RelationalGroupedDataset</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> colNames: <span class="type">Seq</span>[<span class="type">String</span>] = col1 +: cols</span><br><span class="line">  <span class="type">RelationalGroupedDataset</span>(</span><br><span class="line">    toDF(), colNames.map(colName =&gt; resolve(colName)), <span class="type">RelationalGroupedDataset</span>.<span class="type">GroupByType</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="rollup"><a href="#rollup" class="headerlink" title="rollup"></a>rollup</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Create a multi-dimensional rollup for the current Dataset using the specified columns,</span></span><br><span class="line"><span class="comment">    * so we can run aggregation on them.</span></span><br><span class="line"><span class="comment">    * See [[RelationalGroupedDataset]] for all the available aggregate functions.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàó‰∏∫ÂΩìÂâçÊï∞ÊçÆÈõÜÂàõÂª∫Â§öÁª¥ÁöÑÊ±áÊÄªÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú®ÂÆÉ‰ª¨‰∏äËøêË°åËÅöÂêà„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // Compute the average for all numeric columns rolluped by department and group.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *   Ê±áÊÄªÂêé Ê±ÇÂπ≥ÂùáÂÄº</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *   ds.rollup($"department", $"group").avg()</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *   // Compute the max age and average salary, rolluped by department and gender.</span></span><br><span class="line"><span class="comment">    *   ds.rollup($"department", $"gender").agg(Map(</span></span><br><span class="line"><span class="comment">    *     "salary" -&gt; "avg",</span></span><br><span class="line"><span class="comment">    *     "age" -&gt; "max"</span></span><br><span class="line"><span class="comment">    *   ))</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">rollup</span></span>(cols: <span class="type">Column</span>*): <span class="type">RelationalGroupedDataset</span> = &#123;</span><br><span class="line">    <span class="type">RelationalGroupedDataset</span>(toDF(), cols.map(_.expr), <span class="type">RelationalGroupedDataset</span>.<span class="type">RollupType</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Create a multi-dimensional rollup for the current Dataset using the specified columns,</span></span><br><span class="line"><span class="comment">    * so we can run aggregation on them.</span></span><br><span class="line"><span class="comment">    * See [[RelationalGroupedDataset]] for all the available aggregate functions.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàó‰∏∫ÂΩìÂâçÊï∞ÊçÆÈõÜÂàõÂª∫Â§öÁª¥ÁöÑrollupÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú®ÂÆÉ‰ª¨‰∏äËøêË°åËÅöÂêà„ÄÇ</span></span><br><span class="line"><span class="comment">    * rollupÂèØ‰ª•ÂÆûÁé∞ ‰ªéÂè≥Âà∞Â∑¶‰∏ÄÊ¨°ÈÄíÂáèÁöÑÂ§öÁ∫ßÁªüËÆ°ÔºåÊòæÁ§∫ÁªüËÆ°Êüê‰∏ÄÂ±ÇÊ¨°ÁªìÊûÑÁöÑËÅöÂêà</span></span><br><span class="line"><span class="comment">    * ‰æãÂ¶Ç rollup(a,b,c,d) =ÁªìÊûú=&gt; (a,b,c,d),(a,b,c),(a,b),a</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * This is a variant of rollup that can only group by existing columns using column names</span></span><br><span class="line"><span class="comment">    * (i.e. cannot construct expressions).</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // Compute the average for all numeric columns rolluped by department and group.</span></span><br><span class="line"><span class="comment">    *   ds.rollup("department", "group").avg()</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *   // Compute the max age and average salary, rolluped by department and gender.</span></span><br><span class="line"><span class="comment">    *   ds.rollup($"department", $"gender").agg(Map(</span></span><br><span class="line"><span class="comment">    *     "salary" -&gt; "avg",</span></span><br><span class="line"><span class="comment">    *     "age" -&gt; "max"</span></span><br><span class="line"><span class="comment">    *   ))</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">rollup</span></span>(col1: <span class="type">String</span>, cols: <span class="type">String</span>*): <span class="type">RelationalGroupedDataset</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> colNames: <span class="type">Seq</span>[<span class="type">String</span>] = col1 +: cols</span><br><span class="line">    <span class="type">RelationalGroupedDataset</span>(</span><br><span class="line">      toDF(), colNames.map(colName =&gt; resolve(colName)), <span class="type">RelationalGroupedDataset</span>.<span class="type">RollupType</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="cube"><a href="#cube" class="headerlink" title="cube"></a>cube</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Create a multi-dimensional cube for the current Dataset using the specified columns,</span></span><br><span class="line"><span class="comment">    * so we can run aggregation on them.</span></span><br><span class="line"><span class="comment">    * See [[RelationalGroupedDataset]] for all the available aggregate functions.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàó‰∏∫ÂΩìÂâçÊï∞ÊçÆÈõÜÂàõÂª∫Â§öÁª¥Êï∞ÊçÆÈõÜÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú®ÂÆÉ‰ª¨‰∏äËøêË°åËÅöÂêà„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // Compute the average for all numeric columns cubed by department and group.</span></span><br><span class="line"><span class="comment">    *   ds.cube($"department", $"group").avg()</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *   // Compute the max age and average salary, cubed by department and gender.</span></span><br><span class="line"><span class="comment">    *   ds.cube($"department", $"gender").agg(Map(</span></span><br><span class="line"><span class="comment">    *     "salary" -&gt; "avg",</span></span><br><span class="line"><span class="comment">    *     "age" -&gt; "max"</span></span><br><span class="line"><span class="comment">    *   ))</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">cube</span></span>(cols: <span class="type">Column</span>*): <span class="type">RelationalGroupedDataset</span> = &#123;</span><br><span class="line">    <span class="type">RelationalGroupedDataset</span>(toDF(), cols.map(_.expr), <span class="type">RelationalGroupedDataset</span>.<span class="type">CubeType</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Create a multi-dimensional cube for the current Dataset using the specified columns,</span></span><br><span class="line"><span class="comment">    * so we can run aggregation on them.</span></span><br><span class="line"><span class="comment">    * See [[RelationalGroupedDataset]] for all the available aggregate functions.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * È≠îÊñπ ‰æãÂ¶ÇÔºöcube(a,b,c) =ÁªìÊûú=&gt; (a,b),(a,c),a,(b,c),b,c ÁªìÊûú‰∏∫ÊâÄÊúâÁöÑÁª¥Â∫¶</span></span><br><span class="line"><span class="comment">    * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàó‰∏∫ÂΩìÂâçÊï∞ÊçÆÈõÜÂàõÂª∫Â§öÁª¥Â§öÁª¥Êï∞ÊçÆÈõÜÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú®ÂÆÉ‰ª¨‰∏äËøêË°åËÅöÂêà„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * This is a variant of cube that can only group by existing columns using column names</span></span><br><span class="line"><span class="comment">    * (i.e. cannot construct expressions).</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ËøôÊòØ‰∏Ä‰∏™Â§öÁª¥Êï∞ÊçÆÈõÜÁöÑÂèò‰ΩìÔºåÂÆÉÂè™ËÉΩÈÄöËøá‰ΩøÁî®ÂàóÂêçÁöÑÁé∞ÊúâÂàóÊù•ÂàÜÁªÑ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // Compute the average for all numeric columns cubed by department and group.</span></span><br><span class="line"><span class="comment">    *   ds.cube("department", "group").avg()</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *   // Compute the max age and average salary, cubed by department and gender.</span></span><br><span class="line"><span class="comment">    *   ds.cube($"department", $"gender").agg(Map(</span></span><br><span class="line"><span class="comment">    *     "salary" -&gt; "avg",</span></span><br><span class="line"><span class="comment">    *     "age" -&gt; "max"</span></span><br><span class="line"><span class="comment">    *   ))</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group untypedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">cube</span></span>(col1: <span class="type">String</span>, cols: <span class="type">String</span>*): <span class="type">RelationalGroupedDataset</span> = &#123;</span><br><span class="line">    <span class="keyword">val</span> colNames: <span class="type">Seq</span>[<span class="type">String</span>] = col1 +: cols</span><br><span class="line">    <span class="type">RelationalGroupedDataset</span>(</span><br><span class="line">      toDF(), colNames.map(colName =&gt; resolve(colName)), <span class="type">RelationalGroupedDataset</span>.<span class="type">CubeType</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="agg"><a href="#agg" class="headerlink" title="agg"></a>agg</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * (Scala-specific) Aggregates on the entire Dataset without groups.</span></span><br><span class="line"><span class="comment">   * ÂØπÊï¥‰∏™Êï∞ÊçÆÈõÜËøõË°åËÅöÂêàÔºåÊó†ÈúÄÂàÜÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">   * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">   *   // ds.agg(...) is a shorthand for ds.groupBy().agg(...)</span></span><br><span class="line"><span class="comment">   *   ds.agg("age" -&gt; "max", "salary" -&gt; "avg")</span></span><br><span class="line"><span class="comment">   *   ds.groupBy().agg("age" -&gt; "max", "salary" -&gt; "avg")</span></span><br><span class="line"><span class="comment">   * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group untypedrel</span></span><br><span class="line"><span class="comment">   * @since 2.0.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">agg</span></span>(aggExpr: (<span class="type">String</span>, <span class="type">String</span>), aggExprs: (<span class="type">String</span>, <span class="type">String</span>)*): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">   groupBy().agg(aggExpr, aggExprs: _*)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * (Scala-specific) Aggregates on the entire Dataset without groups.</span></span><br><span class="line"><span class="comment">   * ÂØπÊï¥‰∏™Êï∞ÊçÆÈõÜËøõË°åËÅöÂêàÔºåÊó†ÈúÄÂàÜÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">   *   // ds.agg(...) is a shorthand for ds.groupBy().agg(...)</span></span><br><span class="line"><span class="comment">   *   ds.agg(Map("age" -&gt; "max", "salary" -&gt; "avg"))</span></span><br><span class="line"><span class="comment">   *   ds.groupBy().agg(Map("age" -&gt; "max", "salary" -&gt; "avg"))</span></span><br><span class="line"><span class="comment">   * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group untypedrel</span></span><br><span class="line"><span class="comment">   * @since 2.0.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">agg</span></span>(exprs: <span class="type">Map</span>[<span class="type">String</span>, <span class="type">String</span>]): <span class="type">DataFrame</span> = groupBy().agg(exprs)</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * (Java-specific) Aggregates on the entire Dataset without groups.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * ÂØπÊï¥‰∏™Êï∞ÊçÆÈõÜËøõË°åËÅöÂêàÔºåÊó†ÈúÄÂàÜÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">   *   // ds.agg(...) is a shorthand for ds.groupBy().agg(...)</span></span><br><span class="line"><span class="comment">   *   ds.agg(Map("age" -&gt; "max", "salary" -&gt; "avg"))</span></span><br><span class="line"><span class="comment">   *   ds.groupBy().agg(Map("age" -&gt; "max", "salary" -&gt; "avg"))</span></span><br><span class="line"><span class="comment">   * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group untypedrel</span></span><br><span class="line"><span class="comment">   * @since 2.0.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">agg</span></span>(exprs: java.util.<span class="type">Map</span>[<span class="type">String</span>, <span class="type">String</span>]): <span class="type">DataFrame</span> = groupBy().agg(exprs)</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Aggregates on the entire Dataset without groups.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * ÂØπÊï¥‰∏™Êï∞ÊçÆÈõÜËøõË°åËÅöÂêàÔºåÊó†ÈúÄÂàÜÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">   *   // ds.agg(...) is a shorthand for ds.groupBy().agg(...)</span></span><br><span class="line"><span class="comment">   *   ds.agg(max($"age"), avg($"salary"))</span></span><br><span class="line"><span class="comment">   *   ds.groupBy().agg(max($"age"), avg($"salary"))</span></span><br><span class="line"><span class="comment">   * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group untypedrel</span></span><br><span class="line"><span class="comment">   * @since 2.0.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">agg</span></span>(expr: <span class="type">Column</span>, exprs: <span class="type">Column</span>*): <span class="type">DataFrame</span> = groupBy().agg(expr, exprs: _*)</span><br></pre></td></tr></table></figure>
<h3 id="explode"><a href="#explode" class="headerlink" title="explode"></a>explode</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * (Scala-specific) Returns a new Dataset where each row has been expanded to zero or more</span></span><br><span class="line"><span class="comment">  * rows by the provided function. This is similar to a `LATERAL VIEW` in HiveQL. The columns of</span></span><br><span class="line"><span class="comment">  * the input row are implicitly joined with each row that is output by the function.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ê†πÊçÆÊèê‰æõÁöÑÊñπÊ≥ïÔºåËØ•Êï∞ÊçÆÈõÜÁöÑÊØè‰∏ÄË°åÈÉΩË¢´Êâ©Â±ï‰∏∫Èõ∂‰∏™ÊàñÊõ¥Â§öÁöÑË°åÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËøôÁ±ª‰ºº‰∫éHiveQLÁöÑ‚ÄúLATERAL VIEW‚Äù„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËæìÂÖ•Ë°åÁöÑÂàó ÈöêÂºèÂú∞Âä†ÂÖ•‰∫ÜÁî±ÂáΩÊï∞ËæìÂá∫ÁöÑÊØè‰∏ÄË°å„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Given that this is deprecated, as an alternative, you can explode columns either using</span></span><br><span class="line"><span class="comment">  * `functions.explode()` or `flatMap()`. The following example uses these alternatives to count</span></span><br><span class="line"><span class="comment">  * the number of books that contain a given word:</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËÄÉËôëÂà∞ËøôÂ∑≤ÁªèË¢´ÂºÉÁî®Ôºå‰Ωú‰∏∫Êõø‰ª£ÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®‚Äúfunctions.explode()‚ÄùÊàñ‚ÄúflatMap()‚ÄùÊù•ÂºïÁàÜÂàó„ÄÇ</span></span><br><span class="line"><span class="comment">  * ‰∏ãÈù¢ÁöÑÁ§∫‰æã‰ΩøÁî®Ëøô‰∫õÊõø‰ª£ÊñπÊ≥ïÊù•ËÆ°ÁÆóÂåÖÂê´ÁªôÂÆöÂçïËØçÁöÑÂõæ‰π¶ÁöÑÊï∞Èáè:</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   case class Book(title: String, words: String)</span></span><br><span class="line"><span class="comment">  *   val ds: Dataset[Book]</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *   val allWords = ds.select('title, explode(split('words, " ")).as("word"))</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *   val bookCountPerWord = allWords.groupBy("word").agg(countDistinct("title"))</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Using `flatMap()` this can similarly be exploded as:</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   ds.flatMap(_.words.split(" "))</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0 Â∑≤ÁªèËøáÊó∂ÔºåÁî® flatMap() Êàñ functions.explode() ‰ª£Êõø</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@deprecated</span>(<span class="string">"use flatMap() or select() with functions.explode() instead"</span>, <span class="string">"2.0.0"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">explode</span></span>[<span class="type">A</span> &lt;: <span class="type">Product</span> : <span class="type">TypeTag</span>](input: <span class="type">Column</span>*)(f: <span class="type">Row</span> =&gt; <span class="type">TraversableOnce</span>[<span class="type">A</span>]): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> elementSchema = <span class="type">ScalaReflection</span>.schemaFor[<span class="type">A</span>].dataType.asInstanceOf[<span class="type">StructType</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> convert = <span class="type">CatalystTypeConverters</span>.createToCatalystConverter(elementSchema)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> rowFunction =</span><br><span class="line">    f.andThen(_.map(convert(_).asInstanceOf[<span class="type">InternalRow</span>]))</span><br><span class="line">  <span class="keyword">val</span> generator = <span class="type">UserDefinedGenerator</span>(elementSchema, rowFunction, input.map(_.expr))</span><br><span class="line"></span><br><span class="line">  withPlan &#123;</span><br><span class="line">    <span class="type">Generate</span>(generator, join = <span class="literal">true</span>, outer = <span class="literal">false</span>,</span><br><span class="line">      qualifier = <span class="type">None</span>, generatorOutput = <span class="type">Nil</span>, logicalPlan)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * (Scala-specific) Returns a new Dataset where a single column has been expanded to zero</span></span><br><span class="line"><span class="comment">  * or more rows by the provided function. This is similar to a `LATERAL VIEW` in HiveQL. All</span></span><br><span class="line"><span class="comment">  * columns of the input row are implicitly joined with each value that is output by the function.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Given that this is deprecated, as an alternative, you can explode columns either using</span></span><br><span class="line"><span class="comment">  * `functions.explode()`:</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   ds.select(explode(split('words, " ")).as("word"))</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * or `flatMap()`:</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   ds.flatMap(_.words.split(" "))</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@deprecated</span>(<span class="string">"use flatMap() or select() with functions.explode() instead"</span>, <span class="string">"2.0.0"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">explode</span></span>[<span class="type">A</span>, <span class="type">B</span>: <span class="type">TypeTag</span>](inputColumn: <span class="type">String</span>, outputColumn: <span class="type">String</span>)(f: <span class="type">A</span> =&gt; <span class="type">TraversableOnce</span>[<span class="type">B</span>])</span><br><span class="line">: <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> dataType = <span class="type">ScalaReflection</span>.schemaFor[<span class="type">B</span>].dataType</span><br><span class="line">  <span class="keyword">val</span> attributes = <span class="type">AttributeReference</span>(outputColumn, dataType)() :: <span class="type">Nil</span></span><br><span class="line">  <span class="comment">// TODO handle the metadata?</span></span><br><span class="line">  <span class="keyword">val</span> elementSchema = attributes.toStructType</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">rowFunction</span></span>(row: <span class="type">Row</span>): <span class="type">TraversableOnce</span>[<span class="type">InternalRow</span>] = &#123;</span><br><span class="line">    <span class="keyword">val</span> convert = <span class="type">CatalystTypeConverters</span>.createToCatalystConverter(dataType)</span><br><span class="line">    f(row(<span class="number">0</span>).asInstanceOf[<span class="type">A</span>]).map(o =&gt; <span class="type">InternalRow</span>(convert(o)))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> generator = <span class="type">UserDefinedGenerator</span>(elementSchema, rowFunction, apply(inputColumn).expr :: <span class="type">Nil</span>)</span><br><span class="line"></span><br><span class="line">  withPlan &#123;</span><br><span class="line">    <span class="type">Generate</span>(generator, join = <span class="literal">true</span>, outer = <span class="literal">false</span>,</span><br><span class="line">      qualifier = <span class="type">None</span>, generatorOutput = <span class="type">Nil</span>, logicalPlan)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="withColumn"><a href="#withColumn" class="headerlink" title="withColumn"></a>withColumn</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset by adding a column or replacing the existing column that has</span></span><br><span class="line"><span class="comment">  * the same name.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÊ∑ªÂä†‰∏Ä‰∏™ÂàóÊàñÊõøÊç¢ÂÖ∑ÊúâÁõ∏ÂêåÂêçÁß∞ÁöÑÁé∞ÊúâÂàóËøîÂõûÊñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">withColumn</span></span>(colName: <span class="type">String</span>, col: <span class="type">Column</span>): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> resolver = sparkSession.sessionState.analyzer.resolver</span><br><span class="line">  <span class="keyword">val</span> output = queryExecution.analyzed.output</span><br><span class="line">  <span class="keyword">val</span> shouldReplace = output.exists(f =&gt; resolver(f.name, colName))</span><br><span class="line">  <span class="keyword">if</span> (shouldReplace) &#123;</span><br><span class="line">    <span class="keyword">val</span> columns = output.map &#123; field =&gt;</span><br><span class="line">      <span class="keyword">if</span> (resolver(field.name, colName)) &#123;</span><br><span class="line">        col.as(colName)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">Column</span>(field)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    select(columns: _*)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    select(<span class="type">Column</span>(<span class="string">"*"</span>), col.as(colName))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset by adding a column with metadata.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÊ∑ªÂä†Â∏¶ÊúâÂÖÉÊï∞ÊçÆÁöÑÂàóËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">private</span>[spark] <span class="function"><span class="keyword">def</span> <span class="title">withColumn</span></span>(colName: <span class="type">String</span>, col: <span class="type">Column</span>, metadata: <span class="type">Metadata</span>): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> resolver = sparkSession.sessionState.analyzer.resolver</span><br><span class="line">  <span class="keyword">val</span> output = queryExecution.analyzed.output</span><br><span class="line">  <span class="keyword">val</span> shouldReplace = output.exists(f =&gt; resolver(f.name, colName))</span><br><span class="line">  <span class="keyword">if</span> (shouldReplace) &#123;</span><br><span class="line">    <span class="keyword">val</span> columns = output.map &#123; field =&gt;</span><br><span class="line">      <span class="keyword">if</span> (resolver(field.name, colName)) &#123;</span><br><span class="line">        col.as(colName, metadata)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">Column</span>(field)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    select(columns: _*)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    select(<span class="type">Column</span>(<span class="string">"*"</span>), col.as(colName, metadata))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="withColumnRenamed"><a href="#withColumnRenamed" class="headerlink" title="withColumnRenamed"></a>withColumnRenamed</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset with a column renamed.</span></span><br><span class="line"><span class="comment">  * This is a no-op if schema doesn't contain existingName.</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™ÈáçÂëΩÂêçÁöÑÂàóÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * Â¶ÇÊûúÊ®°Âºè‰∏çÂåÖÂê´Â≠òÂú®ÂêçÁß∞ÔºåÈÇ£‰πàËøôÊòØ‰∏çÊìç‰ΩúÁöÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">withColumnRenamed</span></span>(existingName: <span class="type">String</span>, newName: <span class="type">String</span>): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> resolver = sparkSession.sessionState.analyzer.resolver</span><br><span class="line">  <span class="keyword">val</span> output = queryExecution.analyzed.output</span><br><span class="line">  <span class="keyword">val</span> shouldRename = output.exists(f =&gt; resolver(f.name, existingName))</span><br><span class="line">  <span class="keyword">if</span> (shouldRename) &#123;</span><br><span class="line">    <span class="keyword">val</span> columns = output.map &#123; col =&gt;</span><br><span class="line">      <span class="keyword">if</span> (resolver(col.name, existingName)) &#123;</span><br><span class="line">        <span class="type">Column</span>(col).as(newName)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="type">Column</span>(col)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    select(columns: _*)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    toDF()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="drop"><a href="#drop" class="headerlink" title="drop"></a>drop</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset with a column dropped. This is a no-op if schema doesn't contain</span></span><br><span class="line"><span class="comment">  * column name.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂà†Èô§ÊåáÂÆöÂàó‰πãÂêéÁöÑÊñ∞Dataset</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This method can only be used to drop top level columns. the colName string is treated</span></span><br><span class="line"><span class="comment">  * literally without further interpretation.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ‰ªÖÁî®‰∫éÂà†Èô§È°∂Â±ÇÁöÑÂàó</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop</span></span>(colName: <span class="type">String</span>): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  drop(<span class="type">Seq</span>(colName): _*)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset with columns dropped.</span></span><br><span class="line"><span class="comment">  * This is a no-op if schema doesn't contain column name(s).</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Âà†Èô§ÊåáÂÆöÁöÑÂ§ö‰∏™ÂàóÔºåÂπ∂ËøîÂõûÊñ∞ÁöÑdataset</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This method can only be used to drop top level columns. the colName string is treated literally</span></span><br><span class="line"><span class="comment">  * without further interpretation.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop</span></span>(colNames: <span class="type">String</span>*): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> resolver = sparkSession.sessionState.analyzer.resolver</span><br><span class="line">  <span class="keyword">val</span> allColumns = queryExecution.analyzed.output</span><br><span class="line">  <span class="keyword">val</span> remainingCols = allColumns.filter &#123; attribute =&gt;</span><br><span class="line">    colNames.forall(n =&gt; !resolver(attribute.name, n))</span><br><span class="line">  &#125;.map(attribute =&gt; <span class="type">Column</span>(attribute))</span><br><span class="line">  <span class="keyword">if</span> (remainingCols.size == allColumns.size) &#123;</span><br><span class="line">    toDF()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.select(remainingCols: _*)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset with a column dropped.</span></span><br><span class="line"><span class="comment">  * This version of drop accepts a [[Column]] rather than a name.</span></span><br><span class="line"><span class="comment">  * This is a no-op if the Dataset doesn't have a column</span></span><br><span class="line"><span class="comment">  * with an equivalent expression.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Âà†Èô§ÊåáÂÆöÁöÑ ÂàóÔºàÊ†πÊçÆColumnÔºâ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group untypedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">drop</span></span>(col: <span class="type">Column</span>): <span class="type">DataFrame</span> = &#123;</span><br><span class="line">  <span class="keyword">val</span> expression = col <span class="keyword">match</span> &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Column</span>(u: <span class="type">UnresolvedAttribute</span>) =&gt;</span><br><span class="line">      queryExecution.analyzed.resolveQuoted(</span><br><span class="line">        u.name, sparkSession.sessionState.analyzer.resolver).getOrElse(u)</span><br><span class="line">    <span class="keyword">case</span> <span class="type">Column</span>(expr: <span class="type">Expression</span>) =&gt; expr</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">val</span> attrs = <span class="keyword">this</span>.logicalPlan.output</span><br><span class="line">  <span class="keyword">val</span> colsAfterDrop = attrs.filter &#123; attr =&gt;</span><br><span class="line">    attr != expression</span><br><span class="line">  &#125;.map(attr =&gt; <span class="type">Column</span>(attr))</span><br><span class="line">  select(colsAfterDrop: _*)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="typedrel-ÊúâÁ±ªÂûãÁöÑËΩ¨Êç¢"><a href="#typedrel-ÊúâÁ±ªÂûãÁöÑËΩ¨Êç¢" class="headerlink" title="typedrel-ÊúâÁ±ªÂûãÁöÑËΩ¨Êç¢"></a>typedrel-ÊúâÁ±ªÂûãÁöÑËΩ¨Êç¢</h2><h3 id="joinWith"><a href="#joinWith" class="headerlink" title="joinWith"></a>joinWith</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::  ÂÆûÈ™åÁöÑ</span></span><br><span class="line"><span class="comment">  * Joins this Dataset returning a `Tuple2` for each pair where `condition` evaluates to</span></span><br><span class="line"><span class="comment">  * true.</span></span><br><span class="line"><span class="comment">  * ËøûÊé•Ëøô‰∏™Êï∞ÊçÆÈõÜËøîÂõû‰∏Ä‰∏™‚ÄúTuple2‚ÄùÂØπÊØè‰∏ÄÂØπÁöÑ‚ÄúÊù°‰ª∂‚ÄùËÆ°ÁÆó‰∏∫true„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This is similar to the relation `join` function with one important difference in the</span></span><br><span class="line"><span class="comment">  * result schema. Since `joinWith` preserves objects present on either side of the join, the</span></span><br><span class="line"><span class="comment">  * result schema is similarly nested into a tuple under the column names `_1` and `_2`.</span></span><br><span class="line"><span class="comment">  * ËøôÁ±ª‰ºº‰∫éÂÖ≥Á≥ª‚Äújoin‚ÄùÂáΩÊï∞ÔºåÂú®ÁªìÊûúÊ®°Âºè‰∏≠Êúâ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂå∫Âà´„ÄÇ</span></span><br><span class="line"><span class="comment">  * Áî±‰∫é‚ÄújoinWith‚Äù‰øùÂ≠ò‰∫ÜËøûÊé•ÁöÑ‰ªª‰Ωï‰∏ÄËæπÁöÑÂØπË±°ÔºåÂõ†Ê≠§ÁªìÊûúÊ®°ÂºèÁ±ª‰ººÂú∞ÂµåÂ•óÂú®ÂàóÂêçÁß∞‚Äú_1‚ÄùÂíå‚Äú_2‚Äù‰∏ãÈù¢ÁöÑtuple‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This type of join can be useful both for preserving type-safety with the original object</span></span><br><span class="line"><span class="comment">  * types as well as working with relational data where either side of the join has column</span></span><br><span class="line"><span class="comment">  * names in common.</span></span><br><span class="line"><span class="comment">  * ËøôÁßçÁ±ªÂûãÁöÑËÅîÊé•Êó¢ÂèØ‰ª•Áî®‰∫é‰øùÂ≠ò‰∏éÂéüÂßãÂØπË±°Á±ªÂûãÁöÑÁ±ªÂûãÂÆâÂÖ®ÊÄßÔºå</span></span><br><span class="line"><span class="comment">  * ‰πüÂèØ‰ª•Áî®‰∫éÂ§ÑÁêÜËøûÊé•ÁöÑ‰ªª‰Ωï‰∏ÄÁ´ØÈÉΩÊúâÂàóÂêçÁöÑÂÖ≥Á≥ªÊï∞ÊçÆ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param other     Right side of the join.</span></span><br><span class="line"><span class="comment">  * @param condition Join expression.</span></span><br><span class="line"><span class="comment">  * @param joinType  One of: `inner`, `outer`, `left_outer`, `right_outer`, `leftsemi`.</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">joinWith</span></span>[<span class="type">U</span>](other: <span class="type">Dataset</span>[<span class="type">U</span>], condition: <span class="type">Column</span>, joinType: <span class="type">String</span>): <span class="type">Dataset</span>[(<span class="type">T</span>, <span class="type">U</span>)] = &#123;</span><br><span class="line">  <span class="comment">// Creates a Join node and resolve it first, to get join condition resolved, self-join resolved,</span></span><br><span class="line">  <span class="comment">// ÂàõÂª∫‰∏Ä‰∏™ËÅîÊé•ËäÇÁÇπÂπ∂È¶ñÂÖàËß£ÊûêÂÆÉÔºå‰ΩøJoinÊù°‰ª∂ÂæóÂà∞Ëß£ÊûêÔºåself - JoinËß£ÊûêÔºå</span></span><br><span class="line">  <span class="comment">// etc.</span></span><br><span class="line">  <span class="keyword">val</span> joined = sparkSession.sessionState.executePlan(</span><br><span class="line">    <span class="type">Join</span>(</span><br><span class="line">      <span class="keyword">this</span>.logicalPlan,</span><br><span class="line">      other.logicalPlan,</span><br><span class="line">      <span class="type">JoinType</span>(joinType),</span><br><span class="line">      <span class="type">Some</span>(condition.expr))).analyzed.asInstanceOf[<span class="type">Join</span>]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// For both join side, combine all outputs into a single column and alias it with "_1" or "_2",</span></span><br><span class="line">  <span class="comment">// to match the schema for the encoder of the join result.</span></span><br><span class="line">  <span class="comment">// ÂØπ‰∫éËøô‰∏§‰∏™ËøûÊé•ÔºåÂ∞ÜÊâÄÊúâËæìÂá∫ÂêàÂπ∂‰∏∫‰∏Ä‰∏™ÂàóÔºåÂπ∂Â∞ÜÂÖ∂Âà´Âêç‰∏∫‚Äú_1‚ÄùÊàñ‚Äú_2‚ÄùÔºå‰ª•ÂåπÈÖçËøûÊé•ÁªìÊûúÁöÑÁºñÁ†ÅÂô®ÁöÑÊ®°Âºè„ÄÇ</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Note that we do this before joining them, to enable the join operator to return null for one</span></span><br><span class="line">  <span class="comment">// side, in cases like outer-join.</span></span><br><span class="line">  <span class="comment">// ËØ∑Ê≥®ÊÑèÔºåÂú®joinÂÆÉ‰ª¨‰πãÂâçÔºåÊàë‰ª¨ËøôÊ†∑ÂÅöÔºå‰ΩøjoinÊìç‰ΩúÁ¨¶Âú®ÂÉèouter - joinËøôÊ†∑ÁöÑÊÉÖÂÜµ‰∏ãËøîÂõûnull„ÄÇ</span></span><br><span class="line">  <span class="keyword">val</span> left = &#123;</span><br><span class="line">    <span class="keyword">val</span> combined = <span class="keyword">if</span> (<span class="keyword">this</span>.exprEnc.flat) &#123;</span><br><span class="line">      assert(joined.left.output.length == <span class="number">1</span>)</span><br><span class="line">      <span class="type">Alias</span>(joined.left.output.head, <span class="string">"_1"</span>)()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="type">Alias</span>(<span class="type">CreateStruct</span>(joined.left.output), <span class="string">"_1"</span>)()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Project</span>(combined :: <span class="type">Nil</span>, joined.left)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> right = &#123;</span><br><span class="line">    <span class="keyword">val</span> combined = <span class="keyword">if</span> (other.exprEnc.flat) &#123;</span><br><span class="line">      assert(joined.right.output.length == <span class="number">1</span>)</span><br><span class="line">      <span class="type">Alias</span>(joined.right.output.head, <span class="string">"_2"</span>)()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="type">Alias</span>(<span class="type">CreateStruct</span>(joined.right.output), <span class="string">"_2"</span>)()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">Project</span>(combined :: <span class="type">Nil</span>, joined.right)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Rewrites the join condition to make the attribute point to correct column/field, after we</span></span><br><span class="line">  <span class="comment">// combine the outputs of each join side.</span></span><br><span class="line">  <span class="comment">// Âú®Â∞ÜÊØè‰∏™ËøûÊé•ÁöÑËæìÂá∫ÁªÑÂêàÂú®‰∏ÄËµ∑‰πãÂêé,ÈáçÂÜôËÅîÊé•Êù°‰ª∂Ôºå‰ΩøÂ±ûÊÄßÊåáÂêëÊ≠£Á°ÆÁöÑÂàó/Â≠óÊÆµ„ÄÇ</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">val</span> conditionExpr = joined.condition.get transformUp &#123;</span><br><span class="line">    <span class="keyword">case</span> a: <span class="type">Attribute</span> <span class="keyword">if</span> joined.left.outputSet.contains(a) =&gt;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.exprEnc.flat) &#123;</span><br><span class="line">        left.output.head</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> index = joined.left.output.indexWhere(_.exprId == a.exprId)</span><br><span class="line">        <span class="type">GetStructField</span>(left.output.head, index)</span><br><span class="line">      &#125;</span><br><span class="line">    <span class="keyword">case</span> a: <span class="type">Attribute</span> <span class="keyword">if</span> joined.right.outputSet.contains(a) =&gt;</span><br><span class="line">      <span class="keyword">if</span> (other.exprEnc.flat) &#123;</span><br><span class="line">        right.output.head</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">val</span> index = joined.right.output.indexWhere(_.exprId == a.exprId)</span><br><span class="line">        <span class="type">GetStructField</span>(right.output.head, index)</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> tuple2Encoder: <span class="type">Encoder</span>[(<span class="type">T</span>, <span class="type">U</span>)] =</span><br><span class="line">    <span class="type">ExpressionEncoder</span>.tuple(<span class="keyword">this</span>.exprEnc, other.exprEnc)</span><br><span class="line"></span><br><span class="line">  withTypedPlan(<span class="type">Join</span>(left, right, joined.joinType, <span class="type">Some</span>(conditionExpr)))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * Using inner equi-join to join this Dataset returning a `Tuple2` for each pair</span></span><br><span class="line"><span class="comment">  * where `condition` evaluates to true.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ‰ΩøÁî®ÂÜÖÈÉ®ÁöÑÁ≠âËøûÊé•Âä†ÂÖ•Ëøô‰∏™Êï∞ÊçÆÈõÜÔºå‰∏∫ÊØè‰∏ÄÂØπËøîÂõû‰∏Ä‰∏™‚ÄúTuple2‚ÄùÔºåÂÖ∂‰∏≠‚ÄúÊù°‰ª∂‚ÄùÁöÑËÆ°ÁÆóÁªìÊûú‰∏∫true„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param other     Right side of the join.</span></span><br><span class="line"><span class="comment">  * @param condition Join expression.</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">joinWith</span></span>[<span class="type">U</span>](other: <span class="type">Dataset</span>[<span class="type">U</span>], condition: <span class="type">Column</span>): <span class="type">Dataset</span>[(<span class="type">T</span>, <span class="type">U</span>)] = &#123;</span><br><span class="line">  joinWith(other, condition, <span class="string">"inner"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="sortWithinPartitions"><a href="#sortWithinPartitions" class="headerlink" title="sortWithinPartitions"></a>sortWithinPartitions</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset with each partition sorted by the given expressions.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÊØè‰∏™ÂàÜÂå∫ÊåâÁÖßÁªôÂÆöÁöÑË°®ËææÂºèÊéíÂ∫è„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This is the same operation as "SORT BY" in SQL (Hive QL).</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏éSQL(Hive QL)‰∏≠‚ÄúSORT BY‚ÄùÁöÑÊìç‰ΩúÁõ∏Âêå„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sortWithinPartitions</span></span>(sortCol: <span class="type">String</span>, sortCols: <span class="type">String</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  sortWithinPartitions((sortCol +: sortCols).map(<span class="type">Column</span>(_)): _*)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset with each partition sorted by the given expressions.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÊØè‰∏™ÂàÜÂå∫ÊåâÁÖßÁªôÂÆöÁöÑË°®ËææÂºèÊéíÂ∫è„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This is the same operation as "SORT BY" in SQL (Hive QL).</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏éSQL(Hive QL)‰∏≠‚ÄúSORT BY‚ÄùÁöÑÊìç‰ΩúÁõ∏Âêå„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sortWithinPartitions</span></span>(sortExprs: <span class="type">Column</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  sortInternal(global = <span class="literal">false</span>, sortExprs)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset sorted by the specified column, all in ascending order.</span></span><br><span class="line"><span class="comment">    * ÊéíÂ∫è ÂçáÂ∫è</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // The following 3 are equivalent</span></span><br><span class="line"><span class="comment">    *   ‰∏ãÈù¢3‰∏™ÊòØÁ≠â‰ª∑ÁöÑ</span></span><br><span class="line"><span class="comment">    *   ds.sort("sortcol")</span></span><br><span class="line"><span class="comment">    *   ds.sort($"sortcol")</span></span><br><span class="line"><span class="comment">    *   ds.sort($"sortcol".asc)</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sort</span></span>(sortCol: <span class="type">String</span>, sortCols: <span class="type">String</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">    sort((sortCol +: sortCols).map(apply): _*)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset sorted by the given expressions. For example:</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ËøîÂõû‰∏Ä‰∏™Áî±ÁªôÂÆöË°®ËææÂºèÊéíÂ∫èÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ‰æãÂ¶Ç:</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   ds.sort($"col1", $"col2".desc)</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">sort</span></span>(sortExprs: <span class="type">Column</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">    sortInternal(global = <span class="literal">true</span>, sortExprs)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="orderBy"><a href="#orderBy" class="headerlink" title="orderBy"></a>orderBy</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Returns a new Dataset sorted by the given expressions.</span></span><br><span class="line"><span class="comment">   * This is an alias of the `sort` function.</span></span><br><span class="line"><span class="comment">   * ËøôÊòØ‚Äúsort‚ÄùÂáΩÊï∞ÁöÑÂà´Âêç„ÄÇ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group typedrel</span></span><br><span class="line"><span class="comment">   * @since 2.0.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">orderBy</span></span>(sortCol: <span class="type">String</span>, sortCols: <span class="type">String</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = sort(sortCol, sortCols: _*)</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Returns a new Dataset sorted by the given expressions.</span></span><br><span class="line"><span class="comment">   * This is an alias of the `sort` function.</span></span><br><span class="line"><span class="comment">   * ËøôÊòØ‚Äúsort‚ÄùÂáΩÊï∞ÁöÑÂà´Âêç„ÄÇ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group typedrel</span></span><br><span class="line"><span class="comment">   * @since 2.0.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">orderBy</span></span>(sortExprs: <span class="type">Column</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = sort(sortExprs: _*)</span><br></pre></td></tr></table></figure>
<h3 id="as-1"><a href="#as-1" class="headerlink" title="as"></a>as</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset with an alias set.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ËøîÂõû‰∏Ä‰∏™ÂÖ∑ÊúâÂà´ÂêçÈõÜÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">as</span></span>(alias: <span class="type">String</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">    <span class="type">SubqueryAlias</span>(alias, logicalPlan, <span class="type">None</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * (Scala-specific) Returns a new Dataset with an alias set.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">as</span></span>(alias: <span class="type">Symbol</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = as(alias.name)</span><br></pre></td></tr></table></figure>
<h3 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset with an alias set. Same as `as`.</span></span><br><span class="line"><span class="comment">    * ËøîÂõû‰∏Ä‰∏™ÂÖ∑ÊúâÂà´ÂêçÈõÜÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ‰∏é‚Äúas‚ÄùÁõ∏Âêå„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">alias</span></span>(alias: <span class="type">String</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = as(alias)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * (Scala-specific) Returns a new Dataset with an alias set. Same as `as`.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">alias</span></span>(alias: <span class="type">Symbol</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = as(alias)</span><br></pre></td></tr></table></figure>
<h3 id="select-1"><a href="#select-1" class="headerlink" title="select"></a>select</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * :: Experimental ::</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset by computing the given [[Column]] expression for each element.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ÈÄöËøáËÆ°ÁÆóÊØè‰∏™ÂÖÉÁ¥†ÁöÑÁªôÂÆö[[Âàó]]Ë°®ËææÂºèËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   val ds = Seq(1, 2, 3).toDS()</span></span><br><span class="line"><span class="comment">    *   val newDS = ds.select(expr("value + 1").as[Int])</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Experimental</span></span><br><span class="line">  <span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">select</span></span>[<span class="type">U1</span>](c1: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U1</span>]): <span class="type">Dataset</span>[<span class="type">U1</span>] = &#123;</span><br><span class="line">    <span class="keyword">implicit</span> <span class="keyword">val</span> encoder = c1.encoder</span><br><span class="line">    <span class="keyword">val</span> project = <span class="type">Project</span>(c1.withInputType(exprEnc, logicalPlan.output).named :: <span class="type">Nil</span>,</span><br><span class="line">      logicalPlan)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (encoder.flat) &#123;</span><br><span class="line">      <span class="keyword">new</span> <span class="type">Dataset</span>[<span class="type">U1</span>](sparkSession, project, encoder)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// Flattens inner fields of U1</span></span><br><span class="line">      <span class="comment">// ‰ΩøU1ÁöÑÂÜÖÈÉ®Âå∫ÂüüÂèòÂπ≥</span></span><br><span class="line">      <span class="keyword">new</span> <span class="type">Dataset</span>[<span class="type">Tuple1</span>[<span class="type">U1</span>]](sparkSession, project, <span class="type">ExpressionEncoder</span>.tuple(encoder)).map(_._1)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * :: Experimental ::</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset by computing the given [[Column]] expressions for each element.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Experimental</span></span><br><span class="line">  <span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">select</span></span>[<span class="type">U1</span>, <span class="type">U2</span>](c1: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U1</span>], c2: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U2</span>]): <span class="type">Dataset</span>[(<span class="type">U1</span>, <span class="type">U2</span>)] =</span><br><span class="line">    selectUntyped(c1, c2).asInstanceOf[<span class="type">Dataset</span>[(<span class="type">U1</span>, <span class="type">U2</span>)]]</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * :: Experimental ::</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset by computing the given [[Column]] expressions for each element.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Experimental</span></span><br><span class="line">  <span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">select</span></span>[<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>](</span><br><span class="line">                          c1: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U1</span>],</span><br><span class="line">                          c2: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U2</span>],</span><br><span class="line">                          c3: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U3</span>]): <span class="type">Dataset</span>[(<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>)] =</span><br><span class="line">    selectUntyped(c1, c2, c3).asInstanceOf[<span class="type">Dataset</span>[(<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>)]]</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * :: Experimental ::</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset by computing the given [[Column]] expressions for each element.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Experimental</span></span><br><span class="line">  <span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">select</span></span>[<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>, <span class="type">U4</span>](</span><br><span class="line">                              c1: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U1</span>],</span><br><span class="line">                              c2: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U2</span>],</span><br><span class="line">                              c3: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U3</span>],</span><br><span class="line">                              c4: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U4</span>]): <span class="type">Dataset</span>[(<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>, <span class="type">U4</span>)] =</span><br><span class="line">    selectUntyped(c1, c2, c3, c4).asInstanceOf[<span class="type">Dataset</span>[(<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>, <span class="type">U4</span>)]]</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * :: Experimental ::</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset by computing the given [[Column]] expressions for each element.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Experimental</span></span><br><span class="line">  <span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">select</span></span>[<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>, <span class="type">U4</span>, <span class="type">U5</span>](</span><br><span class="line">                                  c1: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U1</span>],</span><br><span class="line">                                  c2: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U2</span>],</span><br><span class="line">                                  c3: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U3</span>],</span><br><span class="line">                                  c4: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U4</span>],</span><br><span class="line">                                  c5: <span class="type">TypedColumn</span>[<span class="type">T</span>, <span class="type">U5</span>]): <span class="type">Dataset</span>[(<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>, <span class="type">U4</span>, <span class="type">U5</span>)] =</span><br><span class="line">    selectUntyped(c1, c2, c3, c4, c5).asInstanceOf[<span class="type">Dataset</span>[(<span class="type">U1</span>, <span class="type">U2</span>, <span class="type">U3</span>, <span class="type">U4</span>, <span class="type">U5</span>)]]</span><br></pre></td></tr></table></figure>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Filters rows using the given condition.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Áî®ÁªôÂÆöÁöÑÊù°‰ª∂ËøáÊª§rows</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   // The following are equivalent:</span></span><br><span class="line"><span class="comment">    *   ‰ª•‰∏ãÊòØÁ≠â‰ª∑ÁöÑÔºö</span></span><br><span class="line"><span class="comment">    *   peopleDs.filter($"age" &gt; 15)</span></span><br><span class="line"><span class="comment">    *   peopleDs.where($"age" &gt; 15)</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>(condition: <span class="type">Column</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">    <span class="type">Filter</span>(condition.expr, logicalPlan)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Filters rows using the given SQL expression.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Áî®ÁªôÂÆöÁöÑ SQL Ë°®ËææÂºè ËøáÊª§rows</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">    *   peopleDs.filter("age &gt; 15")</span></span><br><span class="line"><span class="comment">    * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>(conditionExpr: <span class="type">String</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">    filter(<span class="type">Column</span>(sparkSession.sessionState.sqlParser.parseExpression(conditionExpr)))</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="where"><a href="#where" class="headerlink" title="where"></a>where</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Filters rows using the given condition. This is an alias for `filter`.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * ‰ΩøÁî®ÁªôÂÆöÊù°‰ª∂ËøáÊª§Ë°å„ÄÇ</span></span><br><span class="line"><span class="comment">   * ËøôÊòØ‚Äúfilter‚ÄùÁöÑÂà´Âêç„ÄÇ</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">   *   // The following are equivalent:</span></span><br><span class="line"><span class="comment">   *   peopleDs.filter($"age" &gt; 15)</span></span><br><span class="line"><span class="comment">   *   peopleDs.where($"age" &gt; 15)</span></span><br><span class="line"><span class="comment">   * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group typedrel</span></span><br><span class="line"><span class="comment">   * @since 1.6.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">where</span></span>(condition: <span class="type">Column</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = filter(condition)</span><br><span class="line"></span><br><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * Filters rows using the given SQL expression.</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * ‰ΩøÁî®ÁªôÂÆöÁöÑ SQL Ë°®ËææÂºè  ËøáÊª§ rows</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">   *   peopleDs.where("age &gt; 15")</span></span><br><span class="line"><span class="comment">   * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * @group typedrel</span></span><br><span class="line"><span class="comment">   * @since 1.6.0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line"> <span class="function"><span class="keyword">def</span> <span class="title">where</span></span>(conditionExpr: <span class="type">String</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">   filter(<span class="type">Column</span>(sparkSession.sessionState.sqlParser.parseExpression(conditionExpr)))</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h3 id="groupByKey"><a href="#groupByKey" class="headerlink" title="groupByKey"></a>groupByKey</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Scala-specific)</span></span><br><span class="line"><span class="comment">  * Returns a [[KeyValueGroupedDataset]] where the data is grouped by the given key `func`.</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™[[KeyValueGroupedDataset]]ÔºåÊï∞ÊçÆÁî±ÁªôÂÆöÈîÆ' func 'ÂàÜÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">groupByKey</span></span>[<span class="type">K</span>: <span class="type">Encoder</span>](func: <span class="type">T</span> =&gt; <span class="type">K</span>): <span class="type">KeyValueGroupedDataset</span>[<span class="type">K</span>, <span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> inputPlan = logicalPlan</span><br><span class="line">  <span class="keyword">val</span> withGroupingKey = <span class="type">AppendColumns</span>(func, inputPlan)</span><br><span class="line">  <span class="keyword">val</span> executed = sparkSession.sessionState.executePlan(withGroupingKey)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">new</span> <span class="type">KeyValueGroupedDataset</span>(</span><br><span class="line">    encoderFor[<span class="type">K</span>],</span><br><span class="line">    encoderFor[<span class="type">T</span>],</span><br><span class="line">    executed,</span><br><span class="line">    inputPlan.output,</span><br><span class="line">    withGroupingKey.newColumns)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Java-specific)</span></span><br><span class="line"><span class="comment">  * Returns a [[KeyValueGroupedDataset]] where the data is grouped by the given key `func`.</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™[[KeyValueGroupedDataset]]ÔºåÊï∞ÊçÆÁî±ÁªôÂÆöÈîÆ' func 'ÂàÜÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">groupByKey</span></span>[<span class="type">K</span>](func: <span class="type">MapFunction</span>[<span class="type">T</span>, <span class="type">K</span>], encoder: <span class="type">Encoder</span>[<span class="type">K</span>]): <span class="type">KeyValueGroupedDataset</span>[<span class="type">K</span>, <span class="type">T</span>] =</span><br><span class="line">  groupByKey(func.call(_))(encoder)</span><br></pre></td></tr></table></figure>
<h3 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset by taking the first `n` rows. The difference between this function</span></span><br><span class="line"><span class="comment">  * and `head` is that `head` is an action and returns an array (by triggering query execution)</span></span><br><span class="line"><span class="comment">  * while `limit` returns a new Dataset.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÈÄöËøá‰ΩøÁî®Á¨¨‰∏Ä‰∏™‚Äún‚ÄùË°åËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏™ÂáΩÊï∞Âíå‚Äúhead‚ÄùÁöÑÂå∫Âà´Âú®‰∫é‚Äúhead‚ÄùÊòØ‰∏Ä‰∏™Âä®‰ΩúÔºå</span></span><br><span class="line"><span class="comment">  * Âπ∂ËøîÂõû‰∏Ä‰∏™Êï∞ÁªÑ(ÈÄöËøáËß¶ÂèëÊü•ËØ¢ÊâßË°å)ÔºåËÄå‚Äúlimit‚ÄùÂàôËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">limit</span></span>(n: <span class="type">Int</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">  <span class="type">Limit</span>(<span class="type">Literal</span>(n), logicalPlan)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="unionAll-Â∑≤ËøáÊó∂"><a href="#unionAll-Â∑≤ËøáÊó∂" class="headerlink" title="unionAll-Â∑≤ËøáÊó∂"></a>unionAll-Â∑≤ËøáÊó∂</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset containing union of rows in this Dataset and another Dataset.</span></span><br><span class="line"><span class="comment">  * This is equivalent to `UNION ALL` in SQL.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ËØ•Êï∞ÊçÆÈõÜ‰∏≠ÁöÑË°åÂíåÂè¶‰∏Ä‰∏™Êï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËøôÁõ∏ÂΩì‰∫éSQL‰∏≠ÁöÑ‚ÄúUNION ALL‚Äù„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * To do a SQL-style set union (that does deduplication of elements), use this function followed</span></span><br><span class="line"><span class="comment">  * by a [[distinct]].</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Â¶ÇÊûúÈúÄË¶ÅÂéªÈáçÁöÑËØùÔºåÂú®ËØ•ÊñπÊ≥ïÂêéÁªßÁª≠Áõ¥Êé•  [[distinct]]</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0 Â∑≤ÁªèËøáÊó∂</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@deprecated</span>(<span class="string">"use union()"</span>, <span class="string">"2.0.0"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">unionAll</span></span>(other: <span class="type">Dataset</span>[<span class="type">T</span>]): <span class="type">Dataset</span>[<span class="type">T</span>] = union(other)</span><br></pre></td></tr></table></figure>
<h3 id="union"><a href="#union" class="headerlink" title="union"></a>union</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset containing union of rows in this Dataset and another Dataset.</span></span><br><span class="line"><span class="comment">  * This is equivalent to `UNION ALL` in SQL.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ËØ•Êï∞ÊçÆÈõÜ‰∏≠ÁöÑË°åÂíåÂè¶‰∏Ä‰∏™Êï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËøôÁõ∏ÂΩì‰∫éSQL‰∏≠ÁöÑ‚ÄúUNION ALL‚Äù„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * To do a SQL-style set union (that does deduplication of elements), use this function followed</span></span><br><span class="line"><span class="comment">  * by a [[distinct]].</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Â¶ÇÊûúÈúÄË¶ÅÂéªÈáçÁöÑËØùÔºåÂú®ËØ•ÊñπÊ≥ïÂêéÁªßÁª≠Áõ¥Êé•  [[distinct]]</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">union</span></span>(other: <span class="type">Dataset</span>[<span class="type">T</span>]): <span class="type">Dataset</span>[<span class="type">T</span>] = withSetOperator &#123;</span><br><span class="line">  <span class="comment">// This breaks caching, but it's usually ok because it addresses a very specific use case:</span></span><br><span class="line">  <span class="comment">// using union to union many files or partitions.</span></span><br><span class="line">  <span class="comment">// ËøôÊâìÁ†¥‰∫ÜÁºìÂ≠òÔºå‰ΩÜÈÄöÂ∏∏ÊòØÂèØ‰ª•ÁöÑÔºåÂõ†‰∏∫ÂÆÉËß£ÂÜ≥‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏ÂÖ∑‰ΩìÁöÑÁî®‰æã:‰ΩøÁî®unionÊù•ËÅîÂêàËÆ∏Â§öÊñá‰ª∂ÊàñÂàÜÂå∫„ÄÇ</span></span><br><span class="line">  <span class="type">CombineUnions</span>(<span class="type">Union</span>(logicalPlan, other.logicalPlan))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="intersect-‰∫§ÈõÜ"><a href="#intersect-‰∫§ÈõÜ" class="headerlink" title="intersect-‰∫§ÈõÜ"></a>intersect-‰∫§ÈõÜ</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset containing rows only in both this Dataset and another Dataset.</span></span><br><span class="line"><span class="comment">  * This is equivalent to `INTERSECT` in SQL.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÂè™ÂåÖÂê´ËØ•Êï∞ÊçÆÈõÜÂíåÂè¶‰∏Ä‰∏™Êï∞ÊçÆÈõÜÁõ∏ÂêåÁöÑË°å.</span></span><br><span class="line"><span class="comment">  * ËøôÁõ∏ÂΩì‰∫éÂú®SQL‰∏≠‚ÄúINTERSECT‚Äù„ÄÇ</span></span><br><span class="line"><span class="comment">  * ‰ºöÂéªÈáç.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note Equality checking is performed directly on the encoded representation of the data</span></span><br><span class="line"><span class="comment">  *       and thus is not affected by a custom `equals` function defined on `T`.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *       Á≠âÂºèÊ£ÄÊü•Áõ¥Êé•ÊâßË°åÊï∞ÊçÆÁöÑÁºñÁ†ÅË°®Á§∫ÔºåÂõ†Ê≠§‰∏çÂèóÂÆö‰πâ‰∏∫‚ÄúT‚ÄùÁöÑËá™ÂÆö‰πâ‚Äúequals‚ÄùÂáΩÊï∞ÁöÑÂΩ±Âìç„ÄÇ</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">intersect</span></span>(other: <span class="type">Dataset</span>[<span class="type">T</span>]): <span class="type">Dataset</span>[<span class="type">T</span>] = withSetOperator &#123;</span><br><span class="line">  <span class="type">Intersect</span>(logicalPlan, other.logicalPlan)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="except-Âè™ÊòæÁ§∫Âè¶‰∏™Dataset‰∏≠Ê≤°ÊúâÁöÑÂÄº"><a href="#except-Âè™ÊòæÁ§∫Âè¶‰∏™Dataset‰∏≠Ê≤°ÊúâÁöÑÂÄº" class="headerlink" title="except-Âè™ÊòæÁ§∫Âè¶‰∏™Dataset‰∏≠Ê≤°ÊúâÁöÑÂÄº"></a>except-Âè™ÊòæÁ§∫Âè¶‰∏™Dataset‰∏≠Ê≤°ÊúâÁöÑÂÄº</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset containing rows in this Dataset but not in another Dataset.</span></span><br><span class="line"><span class="comment">  * This is equivalent to `EXCEPT` in SQL.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ËØ•Êï∞ÊçÆÈõÜ‰∏≠ÁöÑË°åÔºåËÄå‰∏çÊòØÂú®Âè¶‰∏Ä‰∏™Êï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËøôÁ≠â‰ª∑‰∫éSQL‰∏≠ÁöÑ‚ÄúEXCEPT‚Äù„ÄÇ</span></span><br><span class="line"><span class="comment">  * ‰ºöÂéªÈáç.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note Equality checking is performed directly on the encoded representation of the data</span></span><br><span class="line"><span class="comment">  *       and thus is not affected by a custom `equals` function defined on `T`.</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">except</span></span>(other: <span class="type">Dataset</span>[<span class="type">T</span>]): <span class="type">Dataset</span>[<span class="type">T</span>] = withSetOperator &#123;</span><br><span class="line">  <span class="type">Except</span>(logicalPlan, other.logicalPlan)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="sample-ÈöèÊú∫ÊäΩÊ†∑"><a href="#sample-ÈöèÊú∫ÊäΩÊ†∑" class="headerlink" title="sample-ÈöèÊú∫ÊäΩÊ†∑"></a>sample-ÈöèÊú∫ÊäΩÊ†∑</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new [[Dataset]] by sampling a fraction of rows, using a user-supplied seed.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÈÄöËøá‰ΩøÁî®Áî®Êà∑Êèê‰æõÁöÑÁßçÂ≠êÔºåÈÄöËøáÊäΩÊ†∑ÁöÑÊñπÂºèËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ[[Dataset]]„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param withReplacement Sample with replacement or not.</span></span><br><span class="line"><span class="comment">  *                        Ê†∑Êú¨Â∑≤ÁªèÂèñËøáÁöÑÂÄºÊòØÂê¶ÊîæÂõû</span></span><br><span class="line"><span class="comment">  * @param fraction        Fraction of rows to generate.</span></span><br><span class="line"><span class="comment">  *                        ÊØè‰∏ÄË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá</span></span><br><span class="line"><span class="comment">  * @param seed            Seed for sampling.</span></span><br><span class="line"><span class="comment">  *                        ÂèñÊ†∑ÁßçÂ≠êÔºà‰∏éÈöèÊú∫Êï∞ÁîüÊàêÊúâÂÖ≥Ôºâ</span></span><br><span class="line"><span class="comment">  * @note This is NOT guaranteed to provide exactly the fraction of the count</span></span><br><span class="line"><span class="comment">  *       of the given [[Dataset]].</span></span><br><span class="line"><span class="comment">  *       ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample</span></span>(withReplacement: <span class="type">Boolean</span>, fraction: <span class="type">Double</span>, seed: <span class="type">Long</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  require(fraction &gt;= <span class="number">0</span>,</span><br><span class="line">    <span class="string">s"Fraction must be nonnegative, but got <span class="subst">$&#123;fraction&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">  withTypedPlan &#123;</span><br><span class="line">    <span class="type">Sample</span>(<span class="number">0.0</span>, fraction, withReplacement, seed, logicalPlan)()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new [[Dataset]] by sampling a fraction of rows, using a random seed.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÁ®ãÂ∫èÈöèÊú∫ÁöÑÁßçÂ≠êÔºåÊäΩÊ†∑ËøîÂõûÊñ∞ÁöÑDataSet</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param withReplacement Sample with replacement or not.</span></span><br><span class="line"><span class="comment">  *                        ÂèñÊ†∑ÁªìÊûúÊòØÂê¶ÊîæÂõû</span></span><br><span class="line"><span class="comment">  * @param fraction        Fraction of rows to generate.</span></span><br><span class="line"><span class="comment">  *                        ÊØèË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá</span></span><br><span class="line"><span class="comment">  * @note This is NOT guaranteed to provide exactly the fraction of the total count</span></span><br><span class="line"><span class="comment">  *       of the given [[Dataset]].</span></span><br><span class="line"><span class="comment">  *       ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sample</span></span>(withReplacement: <span class="type">Boolean</span>, fraction: <span class="type">Double</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  sample(withReplacement, fraction, <span class="type">Utils</span>.random.nextLong)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="randomSplit-ÊåâÁÖßÊùÉÈáçÂàÜÂâ≤"><a href="#randomSplit-ÊåâÁÖßÊùÉÈáçÂàÜÂâ≤" class="headerlink" title="randomSplit-ÊåâÁÖßÊùÉÈáçÂàÜÂâ≤"></a>randomSplit-ÊåâÁÖßÊùÉÈáçÂàÜÂâ≤</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Randomly splits this Dataset with the provided weights.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ÈöèÊú∫Â∞ÜÊ≠§Êï∞ÊçÆÈõÜÊåâÁÖßÊâÄÊèê‰æõÁöÑÊùÉÈáçËøõË°åÂàÜÂâ≤„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param weights weights for splits, will be normalized if they don't sum to 1.</span></span><br><span class="line"><span class="comment">    *                ÂàáÂàÜÁöÑÊùÉÈáç„ÄÇÂ¶ÇÊûúÂíå‰∏ç‰∏∫1Â∞±‰ºöË¢´Ê†áÂáÜÂåñ„ÄÇ</span></span><br><span class="line"><span class="comment">    * @param seed    Seed for sampling.</span></span><br><span class="line"><span class="comment">    *                ÂèñÊ†∑ÁöÑÁßçÂ≠êÔºàÂΩ±ÂìçÈöèÊú∫Êï∞ÁîüÊàêÂô®Ôºâ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    *                For Java API, use [[randomSplitAsList]].</span></span><br><span class="line"><span class="comment">    *                Java API ‰ΩøÁî® [[randomSplitAsList]].</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">randomSplit</span></span>(weights: <span class="type">Array</span>[<span class="type">Double</span>], seed: <span class="type">Long</span>): <span class="type">Array</span>[<span class="type">Dataset</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line">    require(weights.forall(_ &gt;= <span class="number">0</span>),</span><br><span class="line">      <span class="string">s"Weights must be nonnegative, but got <span class="subst">$&#123;weights.mkString("[", ",", "]")&#125;</span>"</span>)</span><br><span class="line">    require(weights.sum &gt; <span class="number">0</span>,</span><br><span class="line">      <span class="string">s"Sum of weights must be positive, but got <span class="subst">$&#123;weights.mkString("[", ",", "]")&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// It is possible that the underlying dataframe doesn't guarantee the ordering of rows in its</span></span><br><span class="line">    <span class="comment">// constituent partitions each time a split is materialized which could result in</span></span><br><span class="line">    <span class="comment">// overlapping splits. To prevent this, we explicitly sort each input partition to make the</span></span><br><span class="line">    <span class="comment">// ordering deterministic.</span></span><br><span class="line">    <span class="comment">// MapType cannot be sorted.</span></span><br><span class="line">    <span class="keyword">val</span> sorted = <span class="type">Sort</span>(logicalPlan.output.filterNot(_.dataType.isInstanceOf[<span class="type">MapType</span>])</span><br><span class="line">      .map(<span class="type">SortOrder</span>(_, <span class="type">Ascending</span>)), global = <span class="literal">false</span>, logicalPlan)</span><br><span class="line">    <span class="keyword">val</span> sum = weights.sum</span><br><span class="line">    <span class="comment">// scanLeft ‰ªéÂè≥Âà∞Âè≥‰æùÊ¨°Á¥ØËÆ°ÁÆó scanLeft(0.0d)(_+_): (0.0,(0.0+0.2),(0.0+0.2+0.8))</span></span><br><span class="line">    <span class="keyword">val</span> normalizedCumWeights = weights.map(_ / sum).scanLeft(<span class="number">0.0</span>d)(_ + _)</span><br><span class="line">    <span class="comment">// sliding(n) ÊØèÊ¨°Âèñn‰∏™ÂÄºÔºå‰ª•Ê≠•Èïø‰∏∫1ÂêëÂè≥ÊªëÂä®ÔºåÂ¶ÇÔºö(0.0,0.2,0.8).sliding(2)=(0.0,0.2),(0.2,0.8)</span></span><br><span class="line">    normalizedCumWeights.sliding(<span class="number">2</span>).map &#123; x =&gt;</span><br><span class="line">      <span class="keyword">new</span> <span class="type">Dataset</span>[<span class="type">T</span>](</span><br><span class="line">        sparkSession, <span class="type">Sample</span>(x(<span class="number">0</span>), x(<span class="number">1</span>), withReplacement = <span class="literal">false</span>, seed, sorted)(), encoder)</span><br><span class="line">    &#125;.toArray</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Randomly splits this Dataset with the provided weights.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Á®ãÂ∫èËá™Âä®ÁîüÊàêÈöèÊú∫Êï∞ÁßçÂ≠êÔºåÈöèÊú∫Â∞ÜÊ≠§Êï∞ÊçÆÈõÜÊåâÁÖßÊâÄÊèê‰æõÁöÑÊùÉÈáçËøõË°åÂàÜÂâ≤„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param weights weights for splits, will be normalized if they don't sum to 1.</span></span><br><span class="line"><span class="comment">    *                ÂàáÂàÜÁöÑÊùÉÈáç„ÄÇÂ¶ÇÊûúÂíå‰∏ç‰∏∫1Â∞±‰ºöË¢´Ê†áÂáÜÂåñ„ÄÇ</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">randomSplit</span></span>(weights: <span class="type">Array</span>[<span class="type">Double</span>]): <span class="type">Array</span>[<span class="type">Dataset</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line">    randomSplit(weights, <span class="type">Utils</span>.random.nextLong)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Randomly splits this Dataset with the provided weights. Provided for the Python Api.</span></span><br><span class="line"><span class="comment">    * Python ‰ΩøÁî®ËØ•ÊñπÊ≥ï</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @param weights weights for splits, will be normalized if they don't sum to 1.</span></span><br><span class="line"><span class="comment">    * @param seed    Seed for sampling.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="keyword">private</span>[spark] <span class="function"><span class="keyword">def</span> <span class="title">randomSplit</span></span>(weights: <span class="type">List</span>[<span class="type">Double</span>], seed: <span class="type">Long</span>): <span class="type">Array</span>[<span class="type">Dataset</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line">    randomSplit(weights.toArray, seed)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="randomSplitAsList"><a href="#randomSplitAsList" class="headerlink" title="randomSplitAsList"></a>randomSplitAsList</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a Java list that contains randomly split Dataset with the provided weights.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ê†πÊçÆÊèê‰æõÁöÑÊùÉÈáçÂàÜÂâ≤DataFramesÔºåËøîÂõûJava list</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param weights weights for splits, will be normalized if they don't sum to 1.</span></span><br><span class="line"><span class="comment">  *                ÂàáÂàÜÁöÑÊùÉÈáç„ÄÇÂ¶ÇÊûúÂíå‰∏ç‰∏∫1Â∞±‰ºöË¢´Ê†áÂáÜÂåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  * @param seed    Seed for sampling.</span></span><br><span class="line"><span class="comment">  *                ÂèñÊ†∑ÁöÑÁßçÂ≠êÔºàÂΩ±ÂìçÈöèÊú∫Êï∞ÁîüÊàêÂô®Ôºâ</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">randomSplitAsList</span></span>(weights: <span class="type">Array</span>[<span class="type">Double</span>], seed: <span class="type">Long</span>): java.util.<span class="type">List</span>[<span class="type">Dataset</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line">  <span class="keyword">val</span> values = randomSplit(weights, seed)</span><br><span class="line">  java.util.<span class="type">Arrays</span>.asList(values: _*)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="dropDuplicates-ÂéªÈáç"><a href="#dropDuplicates-ÂéªÈáç" class="headerlink" title="dropDuplicates-ÂéªÈáç"></a>dropDuplicates-ÂéªÈáç</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset that contains only the unique rows from this Dataset.</span></span><br><span class="line"><span class="comment">  * This is an alias for `distinct`.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Âà†Èô§ÈáçÂ§çÁöÑrowÊï∞ÊçÆÔºåÊòØdistinctÁöÑÂà´Âêç</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropDuplicates</span></span>(): <span class="type">Dataset</span>[<span class="type">T</span>] = dropDuplicates(<span class="keyword">this</span>.columns)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * (Scala-specific) Returns a new Dataset with duplicate rows removed, considering only</span></span><br><span class="line"><span class="comment">  * the subset of columns.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Âè™Âà†Èô§ÊåáÂÆöÂàóÁöÑÈáçÂ§çÊï∞ÊçÆ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropDuplicates</span></span>(colNames: <span class="type">Seq</span>[<span class="type">String</span>]): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">  <span class="keyword">val</span> resolver = sparkSession.sessionState.analyzer.resolver</span><br><span class="line">  <span class="keyword">val</span> allColumns = queryExecution.analyzed.output</span><br><span class="line">  <span class="keyword">val</span> groupCols = colNames.flatMap &#123; colName =&gt;</span><br><span class="line">    <span class="comment">// It is possibly there are more than one columns with the same name,</span></span><br><span class="line">    <span class="comment">// so we call filter instead of find.</span></span><br><span class="line">    <span class="keyword">val</span> cols = allColumns.filter(col =&gt; resolver(col.name, colName))</span><br><span class="line">    <span class="keyword">if</span> (cols.isEmpty) &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="keyword">new</span> <span class="type">AnalysisException</span>(</span><br><span class="line">        <span class="string">s""</span><span class="string">"Cannot resolve column name "</span>$colN<span class="string">ame" among (<span class="subst">$&#123;schema.fieldNames.mkString(", ")&#125;</span>)"</span><span class="string">""</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    cols</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">val</span> groupColExprIds = groupCols.map(_.exprId)</span><br><span class="line">  <span class="keyword">val</span> aggCols = logicalPlan.output.map &#123; attr =&gt;</span><br><span class="line">    <span class="keyword">if</span> (groupColExprIds.contains(attr.exprId)) &#123;</span><br><span class="line">      attr</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// Removing duplicate rows should not change output attributes. We should keep</span></span><br><span class="line">      <span class="comment">// the original exprId of the attribute. Otherwise, to select a column in original</span></span><br><span class="line">      <span class="comment">// dataset will cause analysis exception due to unresolved attribute.</span></span><br><span class="line">      <span class="comment">// Âà†Èô§ÈáçÂ§çË°å‰∏çÂ∫îËØ•Êõ¥ÊîπËæìÂá∫Â±ûÊÄß„ÄÇ</span></span><br><span class="line">      <span class="comment">// Êàë‰ª¨Â∫îËØ•‰øùÁïôËøô‰∏™Â±ûÊÄßÁöÑÂéüÂßãÂ±ûÊÄß„ÄÇ</span></span><br><span class="line">      <span class="comment">// Âê¶ÂàôÔºåÂú®ÂéüÂßãÊï∞ÊçÆÈõÜ‰∏≠ÈÄâÊã©‰∏Ä‰∏™ÂàóÂ∞ÜÂØºËá¥ÂàÜÊûêÂºÇÂ∏∏ÔºåÂéüÂõ†ÊòØÊú™Ëß£ÊûêÁöÑÂ±ûÊÄß„ÄÇ</span></span><br><span class="line">      <span class="type">Alias</span>(<span class="keyword">new</span> <span class="type">First</span>(attr).toAggregateExpression(), attr.name)(exprId = attr.exprId)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">Aggregate</span>(groupCols, aggCols, logicalPlan)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset with duplicate rows removed, considering only</span></span><br><span class="line"><span class="comment">  * the subset of columns.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Âè™ÈíàÂØπÁâπÂÆöÂàóÂÅöÂéªÈáç</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropDuplicates</span></span>(colNames: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Dataset</span>[<span class="type">T</span>] = dropDuplicates(colNames.toSeq)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns a new [[Dataset]] with duplicate rows removed, considering only</span></span><br><span class="line"><span class="comment">  * the subset of columns.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Âè™ÈíàÂØπÁâπÂÆöÂ§öÂàóÂÅöÂéªÈáç</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 2.0.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@scala</span>.annotation.varargs</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropDuplicates</span></span>(col1: <span class="type">String</span>, cols: <span class="type">String</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> colNames: <span class="type">Seq</span>[<span class="type">String</span>] = col1 +: cols</span><br><span class="line">  dropDuplicates(colNames)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="transform-Ëá™ÂÆö‰πâËΩ¨Êç¢"><a href="#transform-Ëá™ÂÆö‰πâËΩ¨Êç¢" class="headerlink" title="transform-Ëá™ÂÆö‰πâËΩ¨Êç¢"></a>transform-Ëá™ÂÆö‰πâËΩ¨Êç¢</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Concise syntax for chaining custom transformations.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Áî®‰∫éÈìæÊé•Ëá™ÂÆö‰πâËΩ¨Êç¢ÁöÑÁÆÄÊòéËØ≠Ê≥ï„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &#123;&#123;&#123;</span></span><br><span class="line"><span class="comment">  *   def featurize(ds: Dataset[T]): Dataset[U] = ...</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *   ds</span></span><br><span class="line"><span class="comment">  *     .transform(featurize)</span></span><br><span class="line"><span class="comment">  *     .transform(...)</span></span><br><span class="line"><span class="comment">  * &#125;&#125;&#125;</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">transform</span></span>[<span class="type">U</span>](t: <span class="type">Dataset</span>[<span class="type">T</span>] =&gt; <span class="type">Dataset</span>[<span class="type">U</span>]): <span class="type">Dataset</span>[<span class="type">U</span>] = t(<span class="keyword">this</span>)</span><br></pre></td></tr></table></figure>
<h3 id="filter-ËøáÊª§"><a href="#filter-ËøáÊª§" class="headerlink" title="filter-ËøáÊª§"></a>filter-ËøáÊª§</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * :: Experimental ::</span></span><br><span class="line"><span class="comment">    * (Scala-specific)</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset that only contains elements where `func` returns `true`.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ËØ•Êï∞ÊçÆÈõÜÂè™ÂåÖÂê´‚Äúfunc‚ÄùËøîÂõû‚Äútrue‚ÄùÁöÑÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Experimental</span></span><br><span class="line">  <span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>(func: <span class="type">T</span> =&gt; <span class="type">Boolean</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">    withTypedPlan(<span class="type">TypedFilter</span>(func, logicalPlan))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * :: Experimental ::</span></span><br><span class="line"><span class="comment">    * (Java-specific)</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset that only contains elements where `func` returns `true`.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ËøîÂõû‰∏Ä‰∏™Êñ∞Êï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂè™ÂåÖÂê´‚Äúfunc‚ÄùËøîÂõû‚Äútrue‚ÄùÁöÑÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@Experimental</span></span><br><span class="line">  <span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">filter</span></span>(func: <span class="type">FilterFunction</span>[<span class="type">T</span>]): <span class="type">Dataset</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">    withTypedPlan(<span class="type">TypedFilter</span>(func, logicalPlan))</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Scala-specific)</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset that contains the result of applying `func` to each element.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ÂØπÊØè‰∏™ÂÖÉÁ¥†Â∫îÁî®‚Äúfunc‚ÄùÁöÑÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">map</span></span>[<span class="type">U</span>: <span class="type">Encoder</span>](func: <span class="type">T</span> =&gt; <span class="type">U</span>): <span class="type">Dataset</span>[<span class="type">U</span>] = withTypedPlan &#123;</span><br><span class="line">  <span class="type">MapElements</span>[<span class="type">T</span>, <span class="type">U</span>](func, logicalPlan)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Java-specific)</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset that contains the result of applying `func` to each element.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ÂØπÊØè‰∏™ÂÖÉÁ¥†Â∫îÁî®‚Äúfunc‚ÄùÁöÑÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">map</span></span>[<span class="type">U</span>](func: <span class="type">MapFunction</span>[<span class="type">T</span>, <span class="type">U</span>], encoder: <span class="type">Encoder</span>[<span class="type">U</span>]): <span class="type">Dataset</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> uEnc = encoder</span><br><span class="line">  withTypedPlan(<span class="type">MapElements</span>[<span class="type">T</span>, <span class="type">U</span>](func, logicalPlan))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mapPartitions"><a href="#mapPartitions" class="headerlink" title="mapPartitions"></a>mapPartitions</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Scala-specific)</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset that contains the result of applying `func` to each partition.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ÂØπÊØè‰∏™ÂàÜÂå∫Â∫îÁî®‚Äúfunc‚ÄùÁöÑÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitions</span></span>[<span class="type">U</span>: <span class="type">Encoder</span>](func: <span class="type">Iterator</span>[<span class="type">T</span>] =&gt; <span class="type">Iterator</span>[<span class="type">U</span>]): <span class="type">Dataset</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="type">Dataset</span>[<span class="type">U</span>](</span><br><span class="line">    sparkSession,</span><br><span class="line">    <span class="type">MapPartitions</span>[<span class="type">T</span>, <span class="type">U</span>](func, logicalPlan),</span><br><span class="line">    implicitly[<span class="type">Encoder</span>[<span class="type">U</span>]])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Java-specific)</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset that contains the result of applying `f` to each partition.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ÂØπÊØè‰∏™ÂàÜÂå∫Â∫îÁî®‚Äúf‚ÄùÁöÑÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitions</span></span>[<span class="type">U</span>](f: <span class="type">MapPartitionsFunction</span>[<span class="type">T</span>, <span class="type">U</span>], encoder: <span class="type">Encoder</span>[<span class="type">U</span>]): <span class="type">Dataset</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> func: (<span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; <span class="type">Iterator</span>[<span class="type">U</span>] = x =&gt; f.call(x.asJava).asScala</span><br><span class="line">  mapPartitions(func)(encoder)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="flatMap-Â∞ÜmapÁªìÊûúflatÊâÅÂπ≥Âåñ"><a href="#flatMap-Â∞ÜmapÁªìÊûúflatÊâÅÂπ≥Âåñ" class="headerlink" title="flatMap-Â∞ÜmapÁªìÊûúflatÊâÅÂπ≥Âåñ"></a>flatMap-Â∞ÜmapÁªìÊûúflatÊâÅÂπ≥Âåñ</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Scala-specific)</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset by first applying a function to all elements of this Dataset,</span></span><br><span class="line"><span class="comment">  * and then flattening the results.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÈ¶ñÂÖàÂØπËØ•Êï∞ÊçÆÈõÜÁöÑÊâÄÊúâÂÖÉÁ¥†Â∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatMap</span></span>[<span class="type">U</span>: <span class="type">Encoder</span>](func: <span class="type">T</span> =&gt; <span class="type">TraversableOnce</span>[<span class="type">U</span>]): <span class="type">Dataset</span>[<span class="type">U</span>] =</span><br><span class="line">  mapPartitions(_.flatMap(func))</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * :: Experimental ::</span></span><br><span class="line"><span class="comment">  * (Java-specific)</span></span><br><span class="line"><span class="comment">  * Returns a new Dataset by first applying a function to all elements of this Dataset,</span></span><br><span class="line"><span class="comment">  * and then flattening the results.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÈ¶ñÂÖàÂØπËØ•Êï∞ÊçÆÈõÜÁöÑÊâÄÊúâÂÖÉÁ¥†Â∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @group typedrel</span></span><br><span class="line"><span class="comment">  * @since 1.6.0</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="meta">@Experimental</span></span><br><span class="line"><span class="meta">@InterfaceStability</span>.<span class="type">Evolving</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatMap</span></span>[<span class="type">U</span>](f: <span class="type">FlatMapFunction</span>[<span class="type">T</span>, <span class="type">U</span>], encoder: <span class="type">Encoder</span>[<span class="type">U</span>]): <span class="type">Dataset</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> func: (<span class="type">T</span>) =&gt; <span class="type">Iterator</span>[<span class="type">U</span>] = x =&gt; f.call(x).asScala</span><br><span class="line">  flatMap(func)(encoder)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="repartition-ÈáçÂàÜÂå∫"><a href="#repartition-ÈáçÂàÜÂå∫" class="headerlink" title="repartition-ÈáçÂàÜÂå∫"></a>repartition-ÈáçÂàÜÂå∫</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset that has exactly `numPartitions` partitions.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ËøîÂõû‰∏Ä‰∏™ ÁªôÂÆöÂàÜÂå∫Êï∞ÈáèÁöÑÊñ∞DataSet</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">repartition</span></span>(numPartitions: <span class="type">Int</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">    <span class="type">Repartition</span>(numPartitions, shuffle = <span class="literal">true</span>, logicalPlan)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset partitioned by the given partitioning expressions into</span></span><br><span class="line"><span class="comment">    * `numPartitions`. The resulting Dataset is hash partitioned.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ËøîÂõû‰∏Ä‰∏™Áî±ÁªôÂÆöÁöÑÂàÜÂå∫Ë°®ËææÂºèÂàíÂàÜ‰∏∫‚ÄúnumÂàÜÂå∫‚ÄùÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ</span></span><br><span class="line"><span class="comment">    * ÁîüÊàêÁöÑDatasetÊòØÂìàÂ∏åÂàÜÂå∫ÁöÑ„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * This is the same operation as "DISTRIBUTE BY" in SQL (Hive QL).</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Âíå SQL (Hive QL) ‰∏≠ÁöÑ "DISTRIBUTE BY" ‰ΩúÁî®Áõ∏Âêå</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">repartition</span></span>(numPartitions: <span class="type">Int</span>, partitionExprs: <span class="type">Column</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">    <span class="type">RepartitionByExpression</span>(partitionExprs.map(_.expr), logicalPlan, <span class="type">Some</span>(numPartitions))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset partitioned by the given partitioning expressions, using</span></span><br><span class="line"><span class="comment">    * `spark.sql.shuffle.partitions` as number of partitions.</span></span><br><span class="line"><span class="comment">    * The resulting Dataset is hash partitioned.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Ê†πÊçÆÊåáÂÆöÁöÑÂàÜÂå∫Ë°®ËææÂºèËøõË°åÈáçÂàÜÂå∫„ÄÇ</span></span><br><span class="line"><span class="comment">    * ÂàÜÂå∫Êï∞ÈáèÁî±`spark.sql.shuffle.partitions` Ëé∑Âæó„ÄÇ</span></span><br><span class="line"><span class="comment">    * ÁªìÊûúDataset ÊòØÂìàÂ∏åÂàÜÂå∫ÁöÑ„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * This is the same operation as "DISTRIBUTE BY" in SQL (Hive QL).</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * Âíå SQL (Hive QL) ‰∏≠ÁöÑ "DISTRIBUTE BY" ‰ΩúÁî®Áõ∏Âêå</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="meta">@scala</span>.annotation.varargs</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">repartition</span></span>(partitionExprs: <span class="type">Column</span>*): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">    <span class="type">RepartitionByExpression</span>(partitionExprs.map(_.expr), logicalPlan, numPartitions = <span class="type">None</span>)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="coalesce-ÂêàÂπ∂ÂàÜÂå∫"><a href="#coalesce-ÂêàÂπ∂ÂàÜÂå∫" class="headerlink" title="coalesce-ÂêàÂπ∂ÂàÜÂå∫"></a>coalesce-ÂêàÂπ∂ÂàÜÂå∫</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset that has exactly `numPartitions` partitions.</span></span><br><span class="line"><span class="comment">    * Similar to coalesce defined on an `RDD`, this operation results in a narrow dependency, e.g.</span></span><br><span class="line"><span class="comment">    * if you go from 1000 partitions to 100 partitions, there will not be a shuffle, instead each of</span></span><br><span class="line"><span class="comment">    * the 100 new partitions will claim 10 of the current partitions.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ÂêàÂπ∂„ÄÇ</span></span><br><span class="line"><span class="comment">    * ËøîÂõûÁ°ÆÂÆöÂàÜÂå∫Êï∞ÈáèÁöÑDataset„ÄÇ</span></span><br><span class="line"><span class="comment">    * ÂíåRDD‰∏≠ÁöÑÂêàÂπ∂ÊñπÊ≥ïÁ±ª‰ººÔºåËøô‰∏™Êìç‰ΩúÂØºËá¥‰∫Ü‰∏Ä‰∏™Á™Ñ‰æùËµñ„ÄÇ</span></span><br><span class="line"><span class="comment">    * ‰æãÂ¶ÇÔºöÂ∞Ü1000‰∏™ÂàÜÂå∫ÂêàÂπ∂‰∏∫100‰∏™ÂàÜÂå∫ÔºåËøô‰∏™ËøáÁ®ãÊ≤°ÊúâshuffleÔºåËÄåÊòØ100‰∏™Êñ∞ÂàÜÂå∫‰∏≠ÁöÑÊØè‰∏™ÂàÜÂå∫Â∞ÜÂ£∞ÊòéÂΩìÂâçÁöÑ10‰∏™ÂàÜÂå∫„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 1.6.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">coalesce</span></span>(numPartitions: <span class="type">Int</span>): <span class="type">Dataset</span>[<span class="type">T</span>] = withTypedPlan &#123;</span><br><span class="line">    <span class="type">Repartition</span>(numPartitions, shuffle = <span class="literal">false</span>, logicalPlan)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h3 id="distinct-ÂéªÈáç"><a href="#distinct-ÂéªÈáç" class="headerlink" title="distinct-ÂéªÈáç"></a>distinct-ÂéªÈáç</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Returns a new Dataset that contains only the unique rows from this Dataset.</span></span><br><span class="line"><span class="comment">    * This is an alias for `dropDuplicates`.</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * ÂéªÈáç„ÄÇ</span></span><br><span class="line"><span class="comment">    * ËøîÂõûÂéªÈáçÂêéÁöÑDataset„ÄÇ</span></span><br><span class="line"><span class="comment">    * Âíå `dropDuplicates` ÊñπÊ≥ï‰∏ÄËá¥„ÄÇ</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * @note Equality checking is performed directly on the encoded representation of the data</span></span><br><span class="line"><span class="comment">    *       and thus is not affected by a custom `equals` function defined on `T`.</span></span><br><span class="line"><span class="comment">    * @group typedrel</span></span><br><span class="line"><span class="comment">    * @since 2.0.0</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">distinct</span></span>(): <span class="type">Dataset</span>[<span class="type">T</span>] = dropDuplicates()</span><br></pre></td></tr></table></figure>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
            <tag> Ê∫êÁ†Å </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[JavaRDDLike.scala]]></title>
      <url>https://stanxia.github.io/2017/11/21/JavaRDDLike-scala/</url>
      <content type="html"><![CDATA[<div class="note info"><p>‰ΩøÁî®JavaÂºÄÂèëSparkÁ®ãÂ∫èÔºåJavaRDDÁöÑÂäüËÉΩÁÆóÂ≠ê‰∏≠Ëã±ÊñáÊ≥®Èáä<br>JavaRDDLikeÁöÑÂÆûÁé∞Â∫îËØ•Êâ©Â±ïËøô‰∏™ËôöÊãüÊäΩË±°Á±ªÔºåËÄå‰∏çÊòØÁõ¥Êé•ÁªßÊâøËøô‰∏™ÁâπÊÄß„ÄÇ</p></div>
<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<h2 id="JavaRDD"><a href="#JavaRDD" class="headerlink" title="JavaRDD"></a>JavaRDD</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.apache.spark.api.java</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>[spark] <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractJavaRDDLike</span>[<span class="type">T</span>, <span class="type">This</span> &lt;: <span class="type">JavaRDDLike</span>[<span class="type">T</span>, <span class="type">This</span>]]</span></span><br><span class="line"><span class="class">  <span class="keyword">extends</span> <span class="title">JavaRDDLike</span>[<span class="type">T</span>, <span class="type">This</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class"><span class="title">/**</span></span></span><br><span class="line"><span class="class">  <span class="title">*</span> <span class="title">Defines</span> <span class="title">operations</span> <span class="title">common</span> <span class="title">to</span> <span class="title">several</span> <span class="title">Java</span> <span class="title">RDD</span> <span class="title">implementations</span>.</span></span><br><span class="line"><span class="class">  <span class="title">*</span></span></span><br><span class="line"><span class="class">  <span class="title">*</span> <span class="title">ÂÆö‰πâÂá†‰∏™Java</span> <span class="title">RDDÂÆûÁé∞ÁöÑÂ∏∏ËßÅÊìç‰Ωú„ÄÇ</span></span></span><br><span class="line"><span class="class">  <span class="title">*</span></span></span><br><span class="line"><span class="class">  <span class="title">*</span> <span class="title">@note</span> <span class="title">This</span> <span class="title">trait</span> <span class="title">is</span> <span class="title">not</span> <span class="title">intended</span> <span class="title">to</span> <span class="title">be</span> <span class="title">implemented</span> <span class="title">by</span> <span class="title">user</span> <span class="title">code</span>.</span></span><br><span class="line"><span class="class">  <span class="title">*</span></span></span><br><span class="line"><span class="class">  <span class="title">*</span>       <span class="title">ËØ•ÁâπÊÄß‰∏çÊâìÁÆóÁî±Áî®Êà∑‰ª£Á†ÅÂÆûÁé∞„ÄÇ</span></span></span><br><span class="line"><span class="class">  <span class="title">*/</span></span></span><br><span class="line"><span class="class"><span class="title">trait</span> <span class="title">JavaRDDLike</span>[<span class="type">T</span>, <span class="type">This</span> &lt;: <span class="type">JavaRDDLike</span>[<span class="type">T</span>, <span class="type">This</span>]] <span class="keyword">extends</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">wrapRDD</span></span>(rdd: <span class="type">RDD</span>[<span class="type">T</span>]): <span class="type">This</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> classTag: <span class="type">ClassTag</span>[<span class="type">T</span>]</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">rdd</span></span>: <span class="type">RDD</span>[<span class="type">T</span>]</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h3 id="partitions"><a href="#partitions" class="headerlink" title="partitions"></a>partitions</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Set of partitions in this RDD.</span></span><br><span class="line"><span class="comment">  * Âú®Ëøô‰∏™RDD‰∏≠ËÆæÁΩÆÁöÑÂàÜÂå∫„ÄÇ</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">partitions</span></span>: <span class="type">JList</span>[<span class="type">Partition</span>] = rdd.partitions.toSeq.asJava</span><br></pre></td></tr></table></figure>
<h3 id="getNumPartitions"><a href="#getNumPartitions" class="headerlink" title="getNumPartitions"></a>getNumPartitions</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Return the number of partitions in this RDD.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûËØ•RDD‰∏≠ÁöÑÂàÜÂå∫Êï∞„ÄÇ</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"><span class="meta">@Since</span>(<span class="string">"1.6.0"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getNumPartitions</span></span>: <span class="type">Int</span> = rdd.getNumPartitions</span><br></pre></td></tr></table></figure>
<h3 id="partitioner"><a href="#partitioner" class="headerlink" title="partitioner"></a>partitioner</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** The partitioner of this RDD.</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏™RDDÁöÑÂàÜÂå∫„ÄÇ</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">partitioner</span></span>: <span class="type">Optional</span>[<span class="type">Partitioner</span>] = <span class="type">JavaUtils</span>.optionToOptional(rdd.partitioner)</span><br></pre></td></tr></table></figure>
<h3 id="context"><a href="#context" class="headerlink" title="context"></a>context</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** The [[org.apache.spark.SparkContext]] that this RDD was created on.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏™RDDÊòØÂú®[[org.apache.spark.SparkContext]]‰∏äÈù¢ÂàõÂª∫ÁöÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">context</span></span>: <span class="type">SparkContext</span> = rdd.context</span><br></pre></td></tr></table></figure>
<h3 id="id"><a href="#id" class="headerlink" title="id"></a>id</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** A unique ID for this RDD (within its SparkContext).</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏™RDDÁöÑÊÉü‰∏ÄID(Âú®ÂÆÉÁöÑSparkContextÂÜÖ)„ÄÇ</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">id</span></span>: <span class="type">Int</span> = rdd.id</span><br></pre></td></tr></table></figure>
<h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">name</span></span>(): <span class="type">String</span> = rdd.name</span><br></pre></td></tr></table></figure>
<h3 id="getStorageLevel"><a href="#getStorageLevel" class="headerlink" title="getStorageLevel"></a>getStorageLevel</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** Get the RDD's current storage level, or StorageLevel.NONE if none is set.</span></span><br><span class="line"><span class="comment">  * Ëé∑ÂèñRDDÁöÑÂΩìÂâçÂ≠òÂÇ®Á∫ßÂà´ÔºåÊàñStorageLevel„ÄÇÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÂ∞±Ê≤°Êúâ„ÄÇ</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getStorageLevel</span></span>: <span class="type">StorageLevel</span> = rdd.getStorageLevel</span><br></pre></td></tr></table></figure>
<h3 id="iterator"><a href="#iterator" class="headerlink" title="iterator"></a>iterator</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Internal method to this RDD; will read from cache if applicable, or otherwise compute it.</span></span><br><span class="line"><span class="comment">  * This should ''not'' be called by users directly, but is available for implementors of custom</span></span><br><span class="line"><span class="comment">  * subclasses of RDD.</span></span><br><span class="line"><span class="comment">  * ÂÜÖÈÉ®ÊñπÊ≥ïÁöÑRDD;Â∞Ü‰ªéÁºìÂ≠òËØªÂèñÔºåÂ¶ÇÊûúÈÄÇÁî®ÁöÑËØùÔºåÊàñËÄÖËÆ°ÁÆóÂÆÉ„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËøôÂ∫îËØ•‚Äú‰∏çÊòØ‚ÄùÁõ¥Êé•Áî±Áî®Êà∑Ë∞ÉÁî®ÔºåËÄåÊòØÁî®‰∫éRDDÁöÑËá™ÂÆö‰πâÂ≠êÁ±ªÁöÑÂÆûÁé∞ËÄÖ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">iterator</span></span>(split: <span class="type">Partition</span>, taskContext: <span class="type">TaskContext</span>): <span class="type">JIterator</span>[<span class="type">T</span>] =</span><br><span class="line">  rdd.iterator(split, taskContext).asJavs</span><br></pre></td></tr></table></figure>
<h2 id="Transformations-return-a-new-RDD"><a href="#Transformations-return-a-new-RDD" class="headerlink" title="Transformations (return a new RDD)"></a>Transformations (return a new RDD)</h2><h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to all elements of this RDD.</span></span><br><span class="line"><span class="comment">  * Â∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">map</span></span>[<span class="type">R</span>](f: <span class="type">JFunction</span>[<span class="type">T</span>, <span class="type">R</span>]): <span class="type">JavaRDD</span>[<span class="type">R</span>] =</span><br><span class="line">  <span class="keyword">new</span> <span class="type">JavaRDD</span>(rdd.map(f)(fakeClassTag))(fakeClassTag)</span><br></pre></td></tr></table></figure>
<h3 id="mapPartitionsWithIndex"><a href="#mapPartitionsWithIndex" class="headerlink" title="mapPartitionsWithIndex"></a>mapPartitionsWithIndex</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to each partition of this RDD, while tracking the index</span></span><br><span class="line"><span class="comment">  * of the original partition.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÂú®RDDÁöÑÊØè‰∏™ÂàÜÂå∫‰∏äÂ∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞Êù•ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÔºåÂêåÊó∂Ë∑üË∏™ÂéüÂßãÂàÜÂå∫ÁöÑÁ¥¢Âºï„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitionsWithIndex</span></span>[<span class="type">R</span>](</span><br><span class="line">                               f: <span class="type">JFunction2</span>[jl.<span class="type">Integer</span>, <span class="type">JIterator</span>[<span class="type">T</span>], <span class="type">JIterator</span>[<span class="type">R</span>]],</span><br><span class="line">                               preservesPartitioning: <span class="type">Boolean</span> = <span class="literal">false</span>): <span class="type">JavaRDD</span>[<span class="type">R</span>] =</span><br><span class="line">  <span class="keyword">new</span> <span class="type">JavaRDD</span>(rdd.mapPartitionsWithIndex((a, b) =&gt; f.call(a, b.asJava).asScala,</span><br><span class="line">    preservesPartitioning)(fakeClassTag))(fakeClassTag)</span><br></pre></td></tr></table></figure>
<h3 id="mapToDouble"><a href="#mapToDouble" class="headerlink" title="mapToDouble"></a>mapToDouble</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to all elements of this RDD.</span></span><br><span class="line"><span class="comment">  * Â∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapToDouble</span></span>[<span class="type">R</span>](f: <span class="type">DoubleFunction</span>[<span class="type">T</span>]): <span class="type">JavaDoubleRDD</span> = &#123;</span><br><span class="line">  <span class="keyword">new</span> <span class="type">JavaDoubleRDD</span>(rdd.map(f.call(_).doubleValue()))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mapToPair"><a href="#mapToPair" class="headerlink" title="mapToPair"></a>mapToPair</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to all elements of this RDD.</span></span><br><span class="line"><span class="comment">  * Â∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapToPair</span></span>[<span class="type">K2</span>, <span class="type">V2</span>](f: <span class="type">PairFunction</span>[<span class="type">T</span>, <span class="type">K2</span>, <span class="type">V2</span>]): <span class="type">JavaPairRDD</span>[<span class="type">K2</span>, <span class="type">V2</span>] = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">cm</span></span>: <span class="type">ClassTag</span>[(<span class="type">K2</span>, <span class="type">V2</span>)] = implicitly[<span class="type">ClassTag</span>[(<span class="type">K2</span>, <span class="type">V2</span>)]]</span><br><span class="line">  <span class="keyword">new</span> <span class="type">JavaPairRDD</span>(rdd.map[(<span class="type">K2</span>, <span class="type">V2</span>)](f)(cm))(fakeClassTag[<span class="type">K2</span>], fakeClassTag[<span class="type">V2</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *  Return a new RDD by first applying a function to all elements of this</span></span><br><span class="line"><span class="comment">  *  RDD, and then flattening the results.</span></span><br><span class="line"><span class="comment">  *  ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÔºåÈ¶ñÂÖàÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatMap</span></span>[<span class="type">U</span>](f: <span class="type">FlatMapFunction</span>[<span class="type">T</span>, <span class="type">U</span>]): <span class="type">JavaRDD</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">T</span>) =&gt; <span class="type">Iterator</span>[<span class="type">U</span>] = (x: <span class="type">T</span>) =&gt; f.call(x).asScala</span><br><span class="line">  <span class="type">JavaRDD</span>.fromRDD(rdd.flatMap(fn)(fakeClassTag[<span class="type">U</span>]))(fakeClassTag[<span class="type">U</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="flatMapToDouble"><a href="#flatMapToDouble" class="headerlink" title="flatMapToDouble"></a>flatMapToDouble</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *  Return a new RDD by first applying a function to all elements of this</span></span><br><span class="line"><span class="comment">  *  RDD, and then flattening the results.</span></span><br><span class="line"><span class="comment">  *  ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÔºåÈ¶ñÂÖàÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatMapToDouble</span></span>(f: <span class="type">DoubleFlatMapFunction</span>[<span class="type">T</span>]): <span class="type">JavaDoubleRDD</span> = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">T</span>) =&gt; <span class="type">Iterator</span>[jl.<span class="type">Double</span>] = (x: <span class="type">T</span>) =&gt; f.call(x).asScala</span><br><span class="line">  <span class="keyword">new</span> <span class="type">JavaDoubleRDD</span>(rdd.flatMap(fn).map(_.doubleValue()))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="flatMapToPair"><a href="#flatMapToPair" class="headerlink" title="flatMapToPair"></a>flatMapToPair</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  *  Return a new RDD by first applying a function to all elements of this</span></span><br><span class="line"><span class="comment">  *  RDD, and then flattening the results.</span></span><br><span class="line"><span class="comment">  *  ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÔºåÈ¶ñÂÖàÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flatMapToPair</span></span>[<span class="type">K2</span>, <span class="type">V2</span>](f: <span class="type">PairFlatMapFunction</span>[<span class="type">T</span>, <span class="type">K2</span>, <span class="type">V2</span>]): <span class="type">JavaPairRDD</span>[<span class="type">K2</span>, <span class="type">V2</span>] = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">T</span>) =&gt; <span class="type">Iterator</span>[(<span class="type">K2</span>, <span class="type">V2</span>)] = (x: <span class="type">T</span>) =&gt; f.call(x).asScala</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">cm</span></span>: <span class="type">ClassTag</span>[(<span class="type">K2</span>, <span class="type">V2</span>)] = implicitly[<span class="type">ClassTag</span>[(<span class="type">K2</span>, <span class="type">V2</span>)]]</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(rdd.flatMap(fn)(cm))(fakeClassTag[<span class="type">K2</span>], fakeClassTag[<span class="type">V2</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mapPartitions"><a href="#mapPartitions" class="headerlink" title="mapPartitions"></a>mapPartitions</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to each partition of this RDD.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitions</span></span>[<span class="type">U</span>](f: <span class="type">FlatMapFunction</span>[<span class="type">JIterator</span>[<span class="type">T</span>], <span class="type">U</span>]): <span class="type">JavaRDD</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; <span class="type">Iterator</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">    (x: <span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; f.call(x.asJava).asScala</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">JavaRDD</span>.fromRDD(rdd.mapPartitions(fn)(fakeClassTag[<span class="type">U</span>]))(fakeClassTag[<span class="type">U</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to each partition of this RDD.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitions</span></span>[<span class="type">U</span>](f: <span class="type">FlatMapFunction</span>[<span class="type">JIterator</span>[<span class="type">T</span>], <span class="type">U</span>],</span><br><span class="line">                     preservesPartitioning: <span class="type">Boolean</span>): <span class="type">JavaRDD</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; <span class="type">Iterator</span>[<span class="type">U</span>] = &#123;</span><br><span class="line">    (x: <span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; f.call(x.asJava).asScala</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">JavaRDD</span>.fromRDD(</span><br><span class="line">    rdd.mapPartitions(fn, preservesPartitioning)(fakeClassTag[<span class="type">U</span>]))(fakeClassTag[<span class="type">U</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mapPartitionsToDouble"><a href="#mapPartitionsToDouble" class="headerlink" title="mapPartitionsToDouble"></a>mapPartitionsToDouble</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to each partition of this RDD.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitionsToDouble</span></span>(f: <span class="type">DoubleFlatMapFunction</span>[<span class="type">JIterator</span>[<span class="type">T</span>]]): <span class="type">JavaDoubleRDD</span> = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; <span class="type">Iterator</span>[jl.<span class="type">Double</span>] = &#123;</span><br><span class="line">    (x: <span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; f.call(x.asJava).asScala</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">new</span> <span class="type">JavaDoubleRDD</span>(rdd.mapPartitions(fn).map(_.doubleValue()))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to each partition of this RDD.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitionsToDouble</span></span>(f: <span class="type">DoubleFlatMapFunction</span>[<span class="type">JIterator</span>[<span class="type">T</span>]],</span><br><span class="line">                          preservesPartitioning: <span class="type">Boolean</span>): <span class="type">JavaDoubleRDD</span> = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; <span class="type">Iterator</span>[jl.<span class="type">Double</span>] = &#123;</span><br><span class="line">    (x: <span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; f.call(x.asJava).asScala</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">new</span> <span class="type">JavaDoubleRDD</span>(rdd.mapPartitions(fn, preservesPartitioning)</span><br><span class="line">    .map(_.doubleValue()))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="mapPartitionsToPair"><a href="#mapPartitionsToPair" class="headerlink" title="mapPartitionsToPair"></a>mapPartitionsToPair</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to each partition of this RDD.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitionsToPair</span></span>[<span class="type">K2</span>, <span class="type">V2</span>](f: <span class="type">PairFlatMapFunction</span>[<span class="type">JIterator</span>[<span class="type">T</span>], <span class="type">K2</span>, <span class="type">V2</span>]):</span><br><span class="line"><span class="type">JavaPairRDD</span>[<span class="type">K2</span>, <span class="type">V2</span>] = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; <span class="type">Iterator</span>[(<span class="type">K2</span>, <span class="type">V2</span>)] = &#123;</span><br><span class="line">    (x: <span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; f.call(x.asJava).asScala</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(rdd.mapPartitions(fn))(fakeClassTag[<span class="type">K2</span>], fakeClassTag[<span class="type">V2</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return a new RDD by applying a function to each partition of this RDD.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mapPartitionsToPair</span></span>[<span class="type">K2</span>, <span class="type">V2</span>](f: <span class="type">PairFlatMapFunction</span>[<span class="type">JIterator</span>[<span class="type">T</span>], <span class="type">K2</span>, <span class="type">V2</span>],</span><br><span class="line">                                preservesPartitioning: <span class="type">Boolean</span>): <span class="type">JavaPairRDD</span>[<span class="type">K2</span>, <span class="type">V2</span>] = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; <span class="type">Iterator</span>[(<span class="type">K2</span>, <span class="type">V2</span>)] = &#123;</span><br><span class="line">    (x: <span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; f.call(x.asJava).asScala</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(</span><br><span class="line">    rdd.mapPartitions(fn, preservesPartitioning))(fakeClassTag[<span class="type">K2</span>], fakeClassTag[<span class="type">V2</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="foreachPartition"><a href="#foreachPartition" class="headerlink" title="foreachPartition"></a>foreachPartition</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Applies a function f to each partition of this RDD.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÂáΩÊï∞fÂ∫îÁî®‰∫éËØ•RDDÁöÑÊØè‰∏™ÂàÜÂå∫„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreachPartition</span></span>(f: <span class="type">VoidFunction</span>[<span class="type">JIterator</span>[<span class="type">T</span>]]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  rdd.foreachPartition(x =&gt; f.call(x.asJava))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="glom"><a href="#glom" class="headerlink" title="glom"></a>glom</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an RDD created by coalescing all elements within each partition into an array.</span></span><br><span class="line"><span class="comment">  * ËøîÂõû‰∏Ä‰∏™RDDÔºåÂÆÉÂ∞ÜÊØè‰∏™ÂàÜÂå∫‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÂêàÂπ∂Âà∞‰∏Ä‰∏™Êï∞ÁªÑ‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">glom</span></span>(): <span class="type">JavaRDD</span>[<span class="type">JList</span>[<span class="type">T</span>]] =</span><br><span class="line">  <span class="keyword">new</span> <span class="type">JavaRDD</span>(rdd.glom().map(_.toSeq.asJava))</span><br></pre></td></tr></table></figure>
<h3 id="cartesian"><a href="#cartesian" class="headerlink" title="cartesian"></a>cartesian</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return the Cartesian product of this RDD and another one, that is, the RDD of all pairs of</span></span><br><span class="line"><span class="comment">  * elements (a, b) where a is in `this` and b is in `other`.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûËøô‰∏™RDDÂíåÂè¶‰∏Ä‰∏™ÁöÑÁ¨õÂç°Â∞î‰πòÁßØÔºåÂç≥ÊâÄÊúâÂÖÉÁ¥†ÂØπÁöÑRDD(a,b) ÔºöaÂú®ËØ•RDD‰∏≠ÔºåbÂú®Âè¶‰∏Ä‰∏™RDD‰∏≠</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">cartesian</span></span>[<span class="type">U</span>](other: <span class="type">JavaRDDLike</span>[<span class="type">U</span>, _]): <span class="type">JavaPairRDD</span>[<span class="type">T</span>, <span class="type">U</span>] =</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(rdd.cartesian(other.rdd)(other.classTag))(classTag, other.classTag)</span><br></pre></td></tr></table></figure>
<h3 id="groupBy"><a href="#groupBy" class="headerlink" title="groupBy"></a>groupBy</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an RDD of grouped elements. Each group consists of a key and a sequence of elements</span></span><br><span class="line"><span class="comment">  * mapping to that key.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂàÜÁªÑÂÖÉÁ¥†ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÊØè‰∏™ÁªÑÁî±‰∏Ä‰∏™ÈîÆÂíå‰∏Ä‰∏™Êò†Â∞ÑÂà∞ËØ•ÈîÆÁöÑÂÖÉÁ¥†Â∫èÂàóÁªÑÊàê„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">groupBy</span></span>[<span class="type">U</span>](f: <span class="type">JFunction</span>[<span class="type">T</span>, <span class="type">U</span>]): <span class="type">JavaPairRDD</span>[<span class="type">U</span>, <span class="type">JIterable</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line">  <span class="comment">// The type parameter is U instead of K in order to work around a compiler bug; see SPARK-4459</span></span><br><span class="line">  <span class="comment">// Á±ªÂûãÂèÇÊï∞ÊòØUËÄå‰∏çÊòØKÔºåÊòØ‰∏∫‰∫ÜÁªïËøáÁºñËØëÂô®ÈîôËØØ</span></span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> ctagK: <span class="type">ClassTag</span>[<span class="type">U</span>] = fakeClassTag</span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> ctagV: <span class="type">ClassTag</span>[<span class="type">JList</span>[<span class="type">T</span>]] = fakeClassTag</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(groupByResultToJava(rdd.groupBy(f)(fakeClassTag)))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an RDD of grouped elements. Each group consists of a key and a sequence of elements</span></span><br><span class="line"><span class="comment">  * mapping to that key.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂàÜÁªÑÂÖÉÁ¥†ÁöÑRDD„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÊØè‰∏™ÁªÑÁî±‰∏Ä‰∏™ÈîÆÂíå‰∏Ä‰∏™Êò†Â∞ÑÂà∞ËØ•ÈîÆÁöÑÂÖÉÁ¥†Â∫èÂàóÁªÑÊàê„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">groupBy</span></span>[<span class="type">U</span>](f: <span class="type">JFunction</span>[<span class="type">T</span>, <span class="type">U</span>], numPartitions: <span class="type">Int</span>): <span class="type">JavaPairRDD</span>[<span class="type">U</span>, <span class="type">JIterable</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line">  <span class="comment">// The type parameter is U instead of K in order to work around a compiler bug; see SPARK-4459</span></span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> ctagK: <span class="type">ClassTag</span>[<span class="type">U</span>] = fakeClassTag</span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> ctagV: <span class="type">ClassTag</span>[<span class="type">JList</span>[<span class="type">T</span>]] = fakeClassTag</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(groupByResultToJava(rdd.groupBy(f, numPartitions)(fakeClassTag[<span class="type">U</span>])))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="pipe"><a href="#pipe" class="headerlink" title="pipe"></a>pipe</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an RDD created by piping elements to a forked external process.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pipe</span></span>(command: <span class="type">String</span>): <span class="type">JavaRDD</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">  rdd.pipe(command)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an RDD created by piping elements to a forked external process.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pipe</span></span>(command: <span class="type">JList</span>[<span class="type">String</span>]): <span class="type">JavaRDD</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">  rdd.pipe(command.asScala)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an RDD created by piping elements to a forked external process.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pipe</span></span>(command: <span class="type">JList</span>[<span class="type">String</span>], env: <span class="type">JMap</span>[<span class="type">String</span>, <span class="type">String</span>]): <span class="type">JavaRDD</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">  rdd.pipe(command.asScala, env.asScala)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an RDD created by piping elements to a forked external process.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pipe</span></span>(command: <span class="type">JList</span>[<span class="type">String</span>],</span><br><span class="line">         env: <span class="type">JMap</span>[<span class="type">String</span>, <span class="type">String</span>],</span><br><span class="line">         separateWorkingDir: <span class="type">Boolean</span>,</span><br><span class="line">         bufferSize: <span class="type">Int</span>): <span class="type">JavaRDD</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">  rdd.pipe(command.asScala, env.asScala, <span class="literal">null</span>, <span class="literal">null</span>, separateWorkingDir, bufferSize)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an RDD created by piping elements to a forked external process.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pipe</span></span>(command: <span class="type">JList</span>[<span class="type">String</span>],</span><br><span class="line">         env: <span class="type">JMap</span>[<span class="type">String</span>, <span class="type">String</span>],</span><br><span class="line">         separateWorkingDir: <span class="type">Boolean</span>,</span><br><span class="line">         bufferSize: <span class="type">Int</span>,</span><br><span class="line">         encoding: <span class="type">String</span>): <span class="type">JavaRDD</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">  rdd.pipe(command.asScala, env.asScala, <span class="literal">null</span>, <span class="literal">null</span>, separateWorkingDir, bufferSize, encoding)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Zips this RDD with another one, returning key-value pairs with the first element in each RDD,</span></span><br><span class="line"><span class="comment">  * second element in each RDD, etc. Assumes that the two RDDs have the *same number of</span></span><br><span class="line"><span class="comment">  * partitions* and the *same number of elements in each partition* (e.g. one was made through</span></span><br><span class="line"><span class="comment">  * a map on the other).</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊ≠§RDD‰∏éÂè¶‰∏Ä‰∏™RDDËøõË°åZipsÔºåËøîÂõûÈîÆÂÄºÂØπÔºåÊØè‰∏™RDD‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÊØè‰∏™RDD‰∏≠ÁöÑÁ¨¨‰∫å‰∏™ÂÖÉÁ¥†ÔºåÁ≠âÁ≠â„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÂÅáËÆæ‰∏§‰∏™RDDsÊã•ÊúâÁõ∏ÂêåÊï∞ÈáèÁöÑÂàÜÂå∫ÂíåÊØè‰∏™ÂàÜÂå∫‰∏≠Áõ∏ÂêåÊï∞ÈáèÁöÑÂÖÉÁ¥†</span></span><br><span class="line"><span class="comment">  * (‰æãÂ¶ÇÔºå‰∏Ä‰∏™ÊòØÈÄöËøáÂè¶‰∏Ä‰∏™mapÁöÑ)„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zip</span></span>[<span class="type">U</span>](other: <span class="type">JavaRDDLike</span>[<span class="type">U</span>, _]): <span class="type">JavaPairRDD</span>[<span class="type">T</span>, <span class="type">U</span>] = &#123;</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(rdd.zip(other.rdd)(other.classTag))(classTag, other.classTag)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="zipPartitions"><a href="#zipPartitions" class="headerlink" title="zipPartitions"></a>zipPartitions</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Zip this RDD's partitions with one (or more) RDD(s) and return a new RDD by</span></span><br><span class="line"><span class="comment">  * applying a function to the zipped partitions. Assumes that all the RDDs have the</span></span><br><span class="line"><span class="comment">  * *same number of partitions*, but does *not* require them to have the same number</span></span><br><span class="line"><span class="comment">  * of elements in each partition.</span></span><br><span class="line"><span class="comment">  * Áî®‰∏Ä‰∏™(ÊàñÂ§ö‰∏™)RDD(ÊàñÂ§ö‰∏™)Êù•ÂéãÁº©Ëøô‰∏™RDDÁöÑÂàÜÂå∫ÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÂ∞ÜÂáΩÊï∞Â∫îÁî®‰∫éÂéãÁº©ÂàÜÂå∫„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÂÅáËÆæÊâÄÊúâRDDsÊã•ÊúâÁõ∏ÂêåÊï∞ÈáèÁöÑÂàÜÂå∫Ôºå‰ΩÜ‰∏çË¶ÅÊ±ÇÂÆÉ‰ª¨Âú®ÊØè‰∏™ÂàÜÂå∫‰∏≠Êã•ÊúâÁõ∏ÂêåÊï∞ÈáèÁöÑÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zipPartitions</span></span>[<span class="type">U</span>, <span class="type">V</span>](</span><br><span class="line">                         other: <span class="type">JavaRDDLike</span>[<span class="type">U</span>, _],</span><br><span class="line">                         f: <span class="type">FlatMapFunction2</span>[<span class="type">JIterator</span>[<span class="type">T</span>], <span class="type">JIterator</span>[<span class="type">U</span>], <span class="type">V</span>]): <span class="type">JavaRDD</span>[<span class="type">V</span>] = &#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">fn</span></span>: (<span class="type">Iterator</span>[<span class="type">T</span>], <span class="type">Iterator</span>[<span class="type">U</span>]) =&gt; <span class="type">Iterator</span>[<span class="type">V</span>] = &#123;</span><br><span class="line">    (x: <span class="type">Iterator</span>[<span class="type">T</span>], y: <span class="type">Iterator</span>[<span class="type">U</span>]) =&gt; f.call(x.asJava, y.asJava).asScala</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">JavaRDD</span>.fromRDD(</span><br><span class="line">    rdd.zipPartitions(other.rdd)(fn)(other.classTag, fakeClassTag[<span class="type">V</span>]))(fakeClassTag[<span class="type">V</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="zipWithUniqueId"><a href="#zipWithUniqueId" class="headerlink" title="zipWithUniqueId"></a>zipWithUniqueId</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Zips this RDD with generated unique Long ids. Items in the kth partition will get ids k, n+k,</span></span><br><span class="line"><span class="comment">  * 2*n+k, ..., where n is the number of partitions. So there may exist gaps, but this method</span></span><br><span class="line"><span class="comment">  * won't trigger a spark job, which is different from [[org.apache.spark.rdd.RDD#zipWithIndex]].</span></span><br><span class="line"><span class="comment">  * Áî®ÁîüÊàêÁöÑÂîØ‰∏ÄÈïøÁöÑidÊù•ÂéãÁº©Ëøô‰∏™RDD„ÄÇ</span></span><br><span class="line"><span class="comment">  * Á¨¨k‰∏™ÂàÜÂå∫ÁöÑÈ°πÂ∞ÜÂæóÂà∞id k,n + k,2 *n+ kÔºå‚Ä¶ÔºåÂÖ∂‰∏≠nÊòØÂàÜÂå∫Êï∞„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âõ†Ê≠§ÔºåÂèØËÉΩÂ≠òÂú®Â∑ÆË∑ùÔºå‰ΩÜËøôÁßçÊñπÊ≥ï‰∏ç‰ºöËß¶Âèëspark‰Ωú‰∏öÔºåÂÆÉ‰∏é[org .apache.spark. spark.rdd. rdd. rdd # zipWithIndex]‰∏çÂêå„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zipWithUniqueId</span></span>(): <span class="type">JavaPairRDD</span>[<span class="type">T</span>, jl.<span class="type">Long</span>] = &#123;</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(rdd.zipWithUniqueId()).asInstanceOf[<span class="type">JavaPairRDD</span>[<span class="type">T</span>, jl.<span class="type">Long</span>]]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="zipWithIndex"><a href="#zipWithIndex" class="headerlink" title="zipWithIndex"></a>zipWithIndex</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Zips this RDD with its element indices. The ordering is first based on the partition index</span></span><br><span class="line"><span class="comment"> * and then the ordering of items within each partition. So the first item in the first</span></span><br><span class="line"><span class="comment"> * partition gets index 0, and the last item in the last partition receives the largest index.</span></span><br><span class="line"><span class="comment"> * This is similar to Scala's zipWithIndex but it uses Long instead of Int as the index type.</span></span><br><span class="line"><span class="comment"> * This method needs to trigger a spark job when this RDD contains more than one partitions.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Áî®ÂÆÉÁöÑÂÖÉÁ¥†Á¥¢ÂºïÊù•ÂéãÁº©Ëøô‰∏™RDD„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÊéíÂ∫èÈ¶ñÂÖàÂü∫‰∫éÂàÜÂå∫Á¥¢ÂºïÔºåÁÑ∂ÂêéÊòØÊØè‰∏™ÂàÜÂå∫‰∏≠ÁöÑÊù°ÁõÆÁöÑÊéíÂ∫è„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âõ†Ê≠§ÔºåÁ¨¨‰∏Ä‰∏™ÂàÜÂå∫‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™È°πÁöÑÁ¥¢ÂºïÂÄº‰∏∫0ÔºåÊúÄÂêé‰∏Ä‰∏™ÂàÜÂå∫‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™È°πÂæóÂà∞ÊúÄÂ§ßÁöÑÁ¥¢Âºï„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËøôÁ±ª‰ºº‰∫éScalaÁöÑzipWithIndexÔºå‰ΩÜÂÆÉ‰ΩøÁî®ÁöÑÊòØLongËÄå‰∏çÊòØInt‰Ωú‰∏∫Á¥¢ÂºïÁ±ªÂûã„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÂΩìËøô‰∏™RDDÂåÖÂê´Â§ö‰∏™ÂàÜÂå∫Êó∂ÔºåËøô‰∏™ÊñπÊ≥ïÈúÄË¶ÅËß¶Âèë‰∏Ä‰∏™spark‰Ωú‰∏ö„ÄÇ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">zipWithIndex</span></span>(): <span class="type">JavaPairRDD</span>[<span class="type">T</span>, jl.<span class="type">Long</span>] = &#123;</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(rdd.zipWithIndex()).asInstanceOf[<span class="type">JavaPairRDD</span>[<span class="type">T</span>, jl.<span class="type">Long</span>]]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Actions-launch-a-job-to-return-a-value-to-the-user-program"><a href="#Actions-launch-a-job-to-return-a-value-to-the-user-program" class="headerlink" title="Actions (launch a job to return a value to the user program)"></a>Actions (launch a job to return a value to the user program)</h2><h3 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Applies a function f to all elements of this RDD.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÂáΩÊï∞fÂ∫îÁî®‰∫éËØ•RDDÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreach</span></span>(f: <span class="type">VoidFunction</span>[<span class="type">T</span>]) &#123;</span><br><span class="line">  rdd.foreach(x =&gt; f.call(x))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="collect"><a href="#collect" class="headerlink" title="collect"></a>collect</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an array that contains all of the elements in this RDD.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂåÖÂê´ËØ•RDD‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  * all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">collect</span></span>(): <span class="type">JList</span>[<span class="type">T</span>] =</span><br><span class="line">  rdd.collect().toSeq.asJava</span><br></pre></td></tr></table></figure>
<h3 id="toLocalIterator"><a href="#toLocalIterator" class="headerlink" title="toLocalIterator"></a>toLocalIterator</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an iterator that contains all of the elements in this RDD.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂåÖÂê´ËØ•RDD‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑËø≠‰ª£Âô®„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * The iterator will consume as much memory as the largest partition in this RDD.</span></span><br><span class="line"><span class="comment">  * Ëø≠‰ª£Âô®Â∞ÜÊ∂àËÄó‰∏éÊ≠§RDD‰∏≠ÊúÄÂ§ßÁöÑÂàÜÂå∫‰∏ÄÊ†∑Â§öÁöÑÂÜÖÂ≠ò„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toLocalIterator</span></span>(): <span class="type">JIterator</span>[<span class="type">T</span>] =</span><br><span class="line">  asJavaIteratorConverter(rdd.toLocalIterator).asJava</span><br></pre></td></tr></table></figure>
<h3 id="collectPartitions"><a href="#collectPartitions" class="headerlink" title="collectPartitions"></a>collectPartitions</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return an array that contains all of the elements in a specific partition of this RDD.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÂåÖÂê´ËØ•RDDÁöÑÁâπÂÆöÂàÜÂå∫‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">collectPartitions</span></span>(partitionIds: <span class="type">Array</span>[<span class="type">Int</span>]): <span class="type">Array</span>[<span class="type">JList</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line">  <span class="comment">// This is useful for implementing `take` from other language frontends</span></span><br><span class="line">  <span class="comment">// like Python where the data is serialized.</span></span><br><span class="line">  <span class="comment">// ËøôÊúâÂä©‰∫é‰ªéÂÖ∂‰ªñËØ≠Ë®ÄÁöÑÂâçÊ≤øÂÆûÁé∞‚Äútake‚ÄùÔºåÂ¶ÇPythonÔºåÊï∞ÊçÆË¢´Â∫èÂàóÂåñ„ÄÇ</span></span><br><span class="line">  <span class="keyword">val</span> res = context.runJob(rdd, (it: <span class="type">Iterator</span>[<span class="type">T</span>]) =&gt; it.toArray, partitionIds)</span><br><span class="line">  res.map(_.toSeq.asJava)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Reduces the elements of this RDD using the specified commutative and associative binary</span></span><br><span class="line"><span class="comment">  * operator.</span></span><br><span class="line"><span class="comment">  * ‰ΩøÁî®ÊåáÂÆöÁöÑ‰∫§Êç¢ÂíåÂÖ≥ËÅî‰∫åÂÖÉËøêÁÆóÁ¨¶Êù•ÂáèÂ∞ëËØ•RDDÁöÑÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">reduce</span></span>(f: <span class="type">JFunction2</span>[<span class="type">T</span>, <span class="type">T</span>, <span class="type">T</span>]): <span class="type">T</span> = rdd.reduce(f)</span><br></pre></td></tr></table></figure>
<h3 id="treeReduce"><a href="#treeReduce" class="headerlink" title="treeReduce"></a>treeReduce</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Reduces the elements of this RDD in a multi-level tree pattern.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊ≠§RDDÁöÑÂÖÉÁ¥†ÁÆÄÂåñ‰∏∫Â§öÂ±ÇÊ†ëÊ®°Âºè„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param depth suggested depth of the tree Âª∫ËÆÆÊ†ëÁöÑÊ∑±Â∫¶</span></span><br><span class="line"><span class="comment">  * @see [[org.apache.spark.api.java.JavaRDDLike#reduce]]</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">treeReduce</span></span>(f: <span class="type">JFunction2</span>[<span class="type">T</span>, <span class="type">T</span>, <span class="type">T</span>], depth: <span class="type">Int</span>): <span class="type">T</span> = rdd.treeReduce(f, depth)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * [[org.apache.spark.api.java.JavaRDDLike#treeReduce]] Âª∫ËÆÆÊ∑±Â∫¶ 2 .</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">treeReduce</span></span>(f: <span class="type">JFunction2</span>[<span class="type">T</span>, <span class="type">T</span>, <span class="type">T</span>]): <span class="type">T</span> = treeReduce(f, <span class="number">2</span>)</span><br></pre></td></tr></table></figure>
<h3 id="fold"><a href="#fold" class="headerlink" title="fold"></a>fold</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Aggregate the elements of each partition, and then the results for all the partitions, using a</span></span><br><span class="line"><span class="comment">  * given associative function and a neutral "zero value". The function</span></span><br><span class="line"><span class="comment">  * op(t1, t2) is allowed to modify t1 and return it as its result value to avoid object</span></span><br><span class="line"><span class="comment">  * allocation; however, it should not modify t2.</span></span><br><span class="line"><span class="comment">  * ÂØπÊØè‰∏™ÂàÜÂå∫ÁöÑÂÖÉÁ¥†ËøõË°åËÅöÂêàÔºåÁÑ∂Âêé‰ΩøÁî®ÁªôÂÆöÁöÑÂÖ≥ËÅîÂáΩÊï∞Âíå‰∏≠Á´ãÁöÑ‚ÄúÈõ∂ÂÄº‚ÄùÔºåÂØπÊâÄÊúâÂàÜÂå∫ËøõË°åÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÂáΩÊï∞op(t1,t2)Ë¢´ÂÖÅËÆ∏‰øÆÊîπt1ÔºåÂπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫ÂÖ∂ÁªìÊûúÂÄºËøîÂõûÔºå‰ª•ÈÅøÂÖçÂØπË±°ÂàÜÈÖç;‰ΩÜÊòØÔºåÂÆÉ‰∏çÂ∫îËØ•‰øÆÊîπt2„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * This behaves somewhat differently from fold operations implemented for non-distributed</span></span><br><span class="line"><span class="comment">  * collections in functional languages like Scala. This fold operation may be applied to</span></span><br><span class="line"><span class="comment">  * partitions individually, and then fold those results into the final result, rather than</span></span><br><span class="line"><span class="comment">  * apply the fold to each element sequentially in some defined ordering. For functions</span></span><br><span class="line"><span class="comment">  * that are not commutative, the result may differ from that of a fold applied to a</span></span><br><span class="line"><span class="comment">  * non-distributed collection.</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏éÂú®ScalaÁ≠âÂáΩÊï∞ÂºèËØ≠Ë®Ä‰∏≠ÂÆûÁé∞ÈùûÂàÜÂ∏ÉÂºèÈõÜÂêàÁöÑÊäòÂè†Êìç‰ΩúÊúâ‰∏ÄÂÆöÁöÑ‰∏çÂêå„ÄÇ</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏™ÊäòÂè†Êìç‰ΩúÂèØ‰ª•ÂçïÁã¨Â∫îÁî®‰∫éÂàÜÂå∫ÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∫õÁªìÊûúÊäòÂè†Âà∞ÊúÄÁªàÁªìÊûú‰∏≠ÔºåËÄå‰∏çÊòØÂú®Êüê‰∫õÂÆö‰πâÁöÑÊéíÂ∫è‰∏≠È°∫Â∫èÂú∞ÂØπÊØè‰∏™ÂÖÉÁ¥†ËøõË°åÊäòÂè†„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÂØπ‰∫éÈùû‰∫§Êç¢ÁöÑÂáΩÊï∞ÔºåÁªìÊûúÂèØËÉΩ‰∏éÂ∫îÁî®‰∫éÈùûÂàÜÂ∏ÉÂºèÈõÜÂêàÁöÑÂáΩÊï∞‰∏çÂêå„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fold</span></span>(zeroValue: <span class="type">T</span>)(f: <span class="type">JFunction2</span>[<span class="type">T</span>, <span class="type">T</span>, <span class="type">T</span>]): <span class="type">T</span> =</span><br><span class="line">  rdd.fold(zeroValue)(f)</span><br></pre></td></tr></table></figure>
<h3 id="aggregate"><a href="#aggregate" class="headerlink" title="aggregate"></a>aggregate</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Aggregate the elements of each partition, and then the results for all the partitions, using</span></span><br><span class="line"><span class="comment">  * given combine functions and a neutral "zero value". This function can return a different result</span></span><br><span class="line"><span class="comment">  * type, U, than the type of this RDD, T. Thus, we need one operation for merging a T into an U</span></span><br><span class="line"><span class="comment">  * and one operation for merging two U's, as in scala.TraversableOnce. Both of these functions are</span></span><br><span class="line"><span class="comment">  * allowed to modify and return their first argument instead of creating a new U to avoid memory</span></span><br><span class="line"><span class="comment">  * allocation.</span></span><br><span class="line"><span class="comment">  * ÂØπÊØè‰∏™ÂàÜÂå∫ÁöÑÂÖÉÁ¥†ËøõË°åËÅöÂêàÔºåÁÑ∂Âêé‰ΩøÁî®ÁªôÂÆöÁöÑÁªÑÂêàÂáΩÊï∞Âíå‰∏Ä‰∏™‰∏≠Á´ãÁöÑ‚ÄúÈõ∂ÂÄº‚ÄùÔºåÂØπÊâÄÊúâÂàÜÂå∫ËøõË°åÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏™ÂáΩÊï∞ÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™‰∏çÂêåÁöÑÁªìÊûúÁ±ªÂûãUÔºåËÄå‰∏çÊòØËøô‰∏™RDDÁöÑÁ±ªÂûã„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âõ†Ê≠§ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™Êìç‰ΩúÊù•Â∞Ü‰∏Ä‰∏™TÂêàÂπ∂Âà∞‰∏Ä‰∏™UÂíå‰∏Ä‰∏™ÂêàÂπ∂‰∏§‰∏™UÁöÑÊìç‰ΩúÔºåÂ∞±ÂÉèÂú®scala . traversableonce‰∏≠ÈÇ£Ê†∑„ÄÇ</span></span><br><span class="line"><span class="comment">  * Ëøô‰∏§‰∏™ÂáΩÊï∞ÈÉΩÂèØ‰ª•‰øÆÊîπÂíåËøîÂõûÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºåËÄå‰∏çÊòØÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑUÔºå‰ª•ÈÅøÂÖçÂÜÖÂ≠òÂàÜÈÖç„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">aggregate</span></span>[<span class="type">U</span>](zeroValue: <span class="type">U</span>)(seqOp: <span class="type">JFunction2</span>[<span class="type">U</span>, <span class="type">T</span>, <span class="type">U</span>],</span><br><span class="line">                               combOp: <span class="type">JFunction2</span>[<span class="type">U</span>, <span class="type">U</span>, <span class="type">U</span>]): <span class="type">U</span> =</span><br><span class="line">  rdd.aggregate(zeroValue)(seqOp, combOp)(fakeClassTag[<span class="type">U</span>])</span><br></pre></td></tr></table></figure>
<h3 id="treeAggregate"><a href="#treeAggregate" class="headerlink" title="treeAggregate"></a>treeAggregate</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Aggregates the elements of this RDD in a multi-level tree pattern.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊ≠§RDDÁöÑÂÖÉÁ¥†ËÅöÈõÜÂú®Â§öÂ±ÇÊ†ëÊ®°Âºè‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param depth suggested depth of the tree  Âª∫ËÆÆÁöÑÊ†ëÁöÑÊ∑±Â∫¶</span></span><br><span class="line"><span class="comment">  * @see [[org.apache.spark.api.java.JavaRDDLike#aggregate]]</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">treeAggregate</span></span>[<span class="type">U</span>](</span><br><span class="line">                      zeroValue: <span class="type">U</span>,</span><br><span class="line">                      seqOp: <span class="type">JFunction2</span>[<span class="type">U</span>, <span class="type">T</span>, <span class="type">U</span>],</span><br><span class="line">                      combOp: <span class="type">JFunction2</span>[<span class="type">U</span>, <span class="type">U</span>, <span class="type">U</span>],</span><br><span class="line">                      depth: <span class="type">Int</span>): <span class="type">U</span> = &#123;</span><br><span class="line">  rdd.treeAggregate(zeroValue)(seqOp, combOp, depth)(fakeClassTag[<span class="type">U</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * [[org.apache.spark.api.java.JavaRDDLike#treeAggregate]] with suggested depth 2.</span></span><br><span class="line"><span class="comment">  * Âª∫ËÆÆÁöÑÊ†ëÁöÑÊ∑±Â∫¶‰∏∫ 2</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">treeAggregate</span></span>[<span class="type">U</span>](</span><br><span class="line">                      zeroValue: <span class="type">U</span>,</span><br><span class="line">                      seqOp: <span class="type">JFunction2</span>[<span class="type">U</span>, <span class="type">T</span>, <span class="type">U</span>],</span><br><span class="line">                      combOp: <span class="type">JFunction2</span>[<span class="type">U</span>, <span class="type">U</span>, <span class="type">U</span>]): <span class="type">U</span> = &#123;</span><br><span class="line">  treeAggregate(zeroValue, seqOp, combOp, <span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="count"><a href="#count" class="headerlink" title="count"></a>count</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return the number of elements in the RDD.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûRDD‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞Èáè„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">count</span></span>(): <span class="type">Long</span> = rdd.count()</span><br></pre></td></tr></table></figure>
<h3 id="countApprox"><a href="#countApprox" class="headerlink" title="countApprox"></a>countApprox</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Approximate version of count() that returns a potentially incomplete result</span></span><br><span class="line"><span class="comment">  * within a timeout, even if not all tasks have finished.</span></span><br><span class="line"><span class="comment">  * Ëøë‰ººÁâàÊú¨ÁöÑcount()ÔºåÂç≥‰Ωø‰∏çÊòØÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩÂÆåÊàê‰∫ÜÔºå‰πü‰ºöÂú®‰∏Ä‰∏™Ë∂ÖÊó∂‰∏≠ËøîÂõû‰∏Ä‰∏™ÊΩúÂú®ÁöÑ‰∏çÂÆåÊï¥ÁöÑÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * The confidence is the probability that the error bounds of the result will</span></span><br><span class="line"><span class="comment">  * contain the true value. That is, if countApprox were called repeatedly</span></span><br><span class="line"><span class="comment">  * with confidence 0.9, we would expect 90% of the results to contain the</span></span><br><span class="line"><span class="comment">  * true count. The confidence must be in the range [0,1] or an exception will</span></span><br><span class="line"><span class="comment">  * be thrown.</span></span><br><span class="line"><span class="comment">  * ÁΩÆ‰ø°ÂÄºÊòØÁªìÊûúÁöÑËØØÂ∑ÆËæπÁïåÂåÖÂê´ÁúüÂÆûÂÄºÁöÑÊ¶ÇÁéá„ÄÇ</span></span><br><span class="line"><span class="comment">  * ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúcountApproxË¢´ÂèçÂ§çË∞ÉÁî®Ôºåconfidence 0.9ÔºåÊàë‰ª¨Â∞ÜÊúüÊúõ90%ÁöÑÁªìÊûúÂåÖÂê´ÁúüÂÆûÁöÑËÆ°Êï∞„ÄÇ</span></span><br><span class="line"><span class="comment">  * confidenceÂøÖÈ°ªÂú®ËåÉÂõ¥[0,1]‰∏≠ÔºåÂê¶ÂàôÂ∞ÜÊäõÂá∫ÂºÇÂ∏∏„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param timeout maximum time to wait for the job, in milliseconds</span></span><br><span class="line"><span class="comment">  *                Á≠âÂæÖÂ∑•‰ΩúÁöÑÊúÄÂ§ßÊó∂Èó¥Ôºå‰ª•ÊØ´Áßí‰∏∫Âçï‰Ωç</span></span><br><span class="line"><span class="comment">  * @param confidence the desired statistical confidence in the result</span></span><br><span class="line"><span class="comment">  *                   ÂØπÁªìÊûúÁöÑÊúüÊúõÁöÑÁªüËÆ°‰ø°ÂøÉ</span></span><br><span class="line"><span class="comment">  * @return a potentially incomplete result, with error bounds</span></span><br><span class="line"><span class="comment">  *         ‰∏Ä‰∏™ÂèØËÉΩ‰∏çÂÆåÊï¥ÁöÑÁªìÊûúÔºåÊúâÈîôËØØÁïåÈôê</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countApprox</span></span>(timeout: <span class="type">Long</span>, confidence: <span class="type">Double</span>): <span class="type">PartialResult</span>[<span class="type">BoundedDouble</span>] =</span><br><span class="line">  rdd.countApprox(timeout, confidence)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Approximate version of count() that returns a potentially incomplete result</span></span><br><span class="line"><span class="comment">  * within a timeout, even if not all tasks have finished.</span></span><br><span class="line"><span class="comment">  * Ëøë‰ººÁâàÊú¨ÁöÑcount()ÔºåÂç≥‰Ωø‰∏çÊòØÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩÂÆåÊàê‰∫ÜÔºå‰πü‰ºöÂú®‰∏Ä‰∏™Ë∂ÖÊó∂‰∏≠ËøîÂõû‰∏Ä‰∏™ÊΩúÂú®ÁöÑ‰∏çÂÆåÊï¥ÁöÑÁªìÊûú„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param timeout maximum time to wait for the job, in milliseconds</span></span><br><span class="line"><span class="comment">  *                Á≠âÂæÖÂ∑•‰ΩúÁöÑÊúÄÂ§ßÊó∂Èó¥Ôºå‰ª•ÊØ´Áßí‰∏∫Âçï‰Ωç</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countApprox</span></span>(timeout: <span class="type">Long</span>): <span class="type">PartialResult</span>[<span class="type">BoundedDouble</span>] =</span><br><span class="line">  rdd.countApprox(timeout)</span><br></pre></td></tr></table></figure>
<h3 id="countByValue"><a href="#countByValue" class="headerlink" title="countByValue"></a>countByValue</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return the count of each unique value in this RDD as a map of (value, count) pairs. The final</span></span><br><span class="line"><span class="comment">  * combine step happens locally on the master, equivalent to running a single reduce task.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊ≠§RDD‰∏≠ÁöÑÊØè‰∏™ÊÉü‰∏ÄÂÄºÁöÑËÆ°Êï∞‰Ωú‰∏∫(ÂÄº„ÄÅËÆ°Êï∞)ÂØπÁöÑÊò†Â∞Ñ„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÊúÄÂêéÁöÑËÅîÂêàÊ≠•È™§Âú®masterÁöÑÊú¨Âú∞ÂèëÁîüÔºåÁõ∏ÂΩì‰∫éËøêË°å‰∏Ä‰∏™reduce‰ªªÂä°„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countByValue</span></span>(): <span class="type">JMap</span>[<span class="type">T</span>, jl.<span class="type">Long</span>] =</span><br><span class="line">  mapAsSerializableJavaMap(rdd.countByValue()).asInstanceOf[<span class="type">JMap</span>[<span class="type">T</span>, jl.<span class="type">Long</span>]]</span><br></pre></td></tr></table></figure>
<h3 id="countByValueApprox"><a href="#countByValueApprox" class="headerlink" title="countByValueApprox"></a>countByValueApprox</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Approximate version of countByValue().</span></span><br><span class="line"><span class="comment">  * countByValue()Ëøë‰ººÁöÑÁâàÊú¨„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * The confidence is the probability that the error bounds of the result will</span></span><br><span class="line"><span class="comment">  * contain the true value. That is, if countApprox were called repeatedly</span></span><br><span class="line"><span class="comment">  * with confidence 0.9, we would expect 90% of the results to contain the</span></span><br><span class="line"><span class="comment">  * true count. The confidence must be in the range [0,1] or an exception will</span></span><br><span class="line"><span class="comment">  * be thrown.</span></span><br><span class="line"><span class="comment">  * ÁΩÆ‰ø°ÂÄºÊòØÁªìÊûúÁöÑËØØÂ∑ÆËæπÁïåÂåÖÂê´ÁúüÂÆûÂÄºÁöÑÊ¶ÇÁéá„ÄÇ</span></span><br><span class="line"><span class="comment">  * ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúcountApproxË¢´ÂèçÂ§çË∞ÉÁî®Ôºåconfidence 0.9ÔºåÊàë‰ª¨Â∞ÜÊúüÊúõ90%ÁöÑÁªìÊûúÂåÖÂê´ÁúüÂÆûÁöÑËÆ°Êï∞„ÄÇ</span></span><br><span class="line"><span class="comment">  * confidenceÂøÖÈ°ªÂú®ËåÉÂõ¥[0,1]‰∏≠ÔºåÂê¶ÂàôÂ∞ÜÊäõÂá∫ÂºÇÂ∏∏„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param timeout maximum time to wait for the job, in milliseconds</span></span><br><span class="line"><span class="comment">  *                Á≠âÂæÖÂ∑•‰ΩúÁöÑÊúÄÂ§ßÊó∂Èó¥ÔºåÊØ´Áßí‰∏∫Âçï‰Ωç„ÄÇ</span></span><br><span class="line"><span class="comment">  * @param confidence the desired statistical confidence in the result</span></span><br><span class="line"><span class="comment">  *                   ÂØπÁªìÊûúÁöÑÊúüÊúõÁöÑÁªüËÆ°‰ø°ÂøÉ</span></span><br><span class="line"><span class="comment">  * @return a potentially incomplete result, with error bounds</span></span><br><span class="line"><span class="comment">  *         ‰∏Ä‰∏™ÂèØËÉΩ‰∏çÂÆåÊï¥ÁöÑÁªìÊûúÔºåÊúâÈîôËØØÁïåÈôê</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countByValueApprox</span></span>(</span><br><span class="line">                        timeout: <span class="type">Long</span>,</span><br><span class="line">                        confidence: <span class="type">Double</span></span><br><span class="line">                      ): <span class="type">PartialResult</span>[<span class="type">JMap</span>[<span class="type">T</span>, <span class="type">BoundedDouble</span>]] =</span><br><span class="line">  rdd.countByValueApprox(timeout, confidence).map(mapAsSerializableJavaMap)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Approximate version of countByValue().</span></span><br><span class="line"><span class="comment">  * countByValue().ÁöÑËøë‰ººÁâàÊú¨.</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param timeout maximum time to wait for the job, in milliseconds</span></span><br><span class="line"><span class="comment">  *                Á≠âÂæÖÂ∑•‰ΩúÁöÑÊúÄÂ§ßÊó∂Èó¥ÔºåÊØ´Áßí‰∏∫Âçï‰Ωç„ÄÇ</span></span><br><span class="line"><span class="comment">  * @return a potentially incomplete result, with error bounds</span></span><br><span class="line"><span class="comment">  *         ‰∏Ä‰∏™ÂèØËÉΩ‰∏çÂÆåÊï¥ÁöÑÁªìÊûúÔºåÊúâÈîôËØØÁïåÈôê</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countByValueApprox</span></span>(timeout: <span class="type">Long</span>): <span class="type">PartialResult</span>[<span class="type">JMap</span>[<span class="type">T</span>, <span class="type">BoundedDouble</span>]] =</span><br><span class="line">  rdd.countByValueApprox(timeout).map(mapAsSerializableJavaMap)</span><br></pre></td></tr></table></figure>
<h3 id="take"><a href="#take" class="headerlink" title="take"></a>take</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Take the first num elements of the RDD. This currently scans the partitions *one by one*, so</span></span><br><span class="line"><span class="comment">  * it will be slow if a lot of partitions are required. In that case, use collect() to get the</span></span><br><span class="line"><span class="comment">  * whole RDD instead.</span></span><br><span class="line"><span class="comment">  * Ëé∑ÂèñRDDÁöÑÁ¨¨‰∏Ä‰∏™numÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">  * ËøôÂ∞Ü‰ºö‰∏ÄÊ¨°‰∏Ä‰∏™Âú∞Êâ´ÊèèÂàÜÂå∫ÔºåÊâÄ‰ª•Â¶ÇÊûúÈúÄË¶ÅÂæàÂ§öÂàÜÂå∫ÔºåÂÆÉÂ∞Ü‰ºöÂæàÊÖ¢„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰ΩøÁî®collect()Êù•Ëé∑ÂæóÊï¥‰∏™RDD„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  * all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">take</span></span>(num: <span class="type">Int</span>): <span class="type">JList</span>[<span class="type">T</span>] =</span><br><span class="line">  rdd.take(num).toSeq.asJava</span><br></pre></td></tr></table></figure>
<h3 id="takeSample"><a href="#takeSample" class="headerlink" title="takeSample"></a>takeSample</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeSample</span></span>(withReplacement: <span class="type">Boolean</span>, num: <span class="type">Int</span>): <span class="type">JList</span>[<span class="type">T</span>] =</span><br><span class="line">  takeSample(withReplacement, num, <span class="type">Utils</span>.random.nextLong)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeSample</span></span>(withReplacement: <span class="type">Boolean</span>, num: <span class="type">Int</span>, seed: <span class="type">Long</span>): <span class="type">JList</span>[<span class="type">T</span>] =</span><br><span class="line">  rdd.takeSample(withReplacement, num, seed).toSeq.asJava</span><br></pre></td></tr></table></figure>
<h3 id="first"><a href="#first" class="headerlink" title="first"></a>first</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return the first element in this RDD.</span></span><br><span class="line"><span class="comment">  * ËøîÂõûËøô‰∏™RDD‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">first</span></span>(): <span class="type">T</span> = rdd.first()</span><br></pre></td></tr></table></figure>
<h3 id="isEmpty"><a href="#isEmpty" class="headerlink" title="isEmpty"></a>isEmpty</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * @return true if and only if the RDD contains no elements at all. Note that an RDD</span></span><br><span class="line"><span class="comment">  *         may be empty even when it has at least 1 partition.</span></span><br><span class="line"><span class="comment">  *         ÂΩì‰∏î‰ªÖÂΩìRDD‰∏çÂåÖÂê´‰ªª‰ΩïÂÖÉÁ¥†ÔºåÂàô‰∏∫Áúü„ÄÇ</span></span><br><span class="line"><span class="comment">  *         ËØ∑Ê≥®ÊÑèÔºåÂç≥‰ΩøÂú®Ëá≥Â∞ëÊúâ‰∏Ä‰∏™ÂàÜÂå∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåRDD‰πüÂèØËÉΩÊòØÁ©∫ÁöÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isEmpty</span></span>(): <span class="type">Boolean</span> = rdd.isEmpty()</span><br></pre></td></tr></table></figure>
<h3 id="saveAsTextFile"><a href="#saveAsTextFile" class="headerlink" title="saveAsTextFile"></a>saveAsTextFile</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Save this RDD as a text file, using string representations of elements.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊ≠§RDD‰øùÂ≠ò‰∏∫ÊñáÊú¨Êñá‰ª∂Ôºå‰ΩøÁî®ÂÖÉÁ¥†ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÂΩ¢Âºè„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saveAsTextFile</span></span>(path: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">  rdd.saveAsTextFile(path)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Save this RDD as a compressed text file, using string representations of elements.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊ≠§RDD‰øùÂ≠ò‰∏∫‰∏Ä‰∏™ÂéãÁº©ÊñáÊú¨Êñá‰ª∂Ôºå‰ΩøÁî®ÂÖÉÁ¥†ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÂΩ¢Âºè„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saveAsTextFile</span></span>(path: <span class="type">String</span>, codec: <span class="type">Class</span>[_ &lt;: <span class="type">CompressionCodec</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">  rdd.saveAsTextFile(path, codec)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="saveAsObjectFile"><a href="#saveAsObjectFile" class="headerlink" title="saveAsObjectFile"></a>saveAsObjectFile</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Save this RDD as a SequenceFile of serialized objects.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊ≠§RDD‰øùÂ≠ò‰∏∫Â∫èÂàóÂåñÂØπË±°ÁöÑÂ∫èÂàóÊñá‰ª∂„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">saveAsObjectFile</span></span>(path: <span class="type">String</span>): <span class="type">Unit</span> = &#123;</span><br><span class="line">  rdd.saveAsObjectFile(path)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="keyBy"><a href="#keyBy" class="headerlink" title="keyBy"></a>keyBy</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Creates tuples of the elements in this RDD by applying `f`.</span></span><br><span class="line"><span class="comment">  * ÈÄöËøáÂ∫îÁî®‚Äúf‚ÄùÂàõÂª∫Ëøô‰∏™RDD‰∏≠ÂÖÉÁ¥†ÁöÑÂÖÉÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">keyBy</span></span>[<span class="type">U</span>](f: <span class="type">JFunction</span>[<span class="type">T</span>, <span class="type">U</span>]): <span class="type">JavaPairRDD</span>[<span class="type">U</span>, <span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="comment">// The type parameter is U instead of K in order to work around a compiler bug; see SPARK-4459</span></span><br><span class="line">  <span class="comment">// Á±ªÂûãÂèÇÊï∞Áî®UÊõø‰ª£KÔºå‰∏∫‰∫ÜÁªïËøáÁºñËØëÂô®ÈîôËØØ;</span></span><br><span class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> ctag: <span class="type">ClassTag</span>[<span class="type">U</span>] = fakeClassTag</span><br><span class="line">  <span class="type">JavaPairRDD</span>.fromRDD(rdd.keyBy(f))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="checkpoint"><a href="#checkpoint" class="headerlink" title="checkpoint"></a>checkpoint</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Mark this RDD for checkpointing. It will be saved to a file inside the checkpoint</span></span><br><span class="line"><span class="comment">  * directory set with SparkContext.setCheckpointDir() and all references to its parent</span></span><br><span class="line"><span class="comment">  * RDDs will be removed. This function must be called before any job has been</span></span><br><span class="line"><span class="comment">  * executed on this RDD. It is strongly recommended that this RDD is persisted in</span></span><br><span class="line"><span class="comment">  * memory, otherwise saving it on a file will require recomputation.</span></span><br><span class="line"><span class="comment">  * Â∞ÜÊ≠§RDDÊ†áËÆ∞‰∏∫Ê£ÄÊü•ÁÇπ„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÂÆÉÂ∞ÜË¢´‰øùÂ≠òÂà∞Áî±SparkContext.setCheckpointDir()ËÆæÁΩÆÁöÑÊ£ÄÊü•ÁÇπÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  * ÊâÄÊúâÂØπÂÖ∂Áà∂RDDsÁöÑÂºïÁî®Â∞ÜË¢´Âà†Èô§„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âú®Ê≠§RDD‰∏äÊâßË°å‰ªª‰Ωï‰Ωú‰∏ö‰πãÂâçÔºåÂøÖÈ°ªË∞ÉÁî®Ê≠§ÂáΩÊï∞„ÄÇ</span></span><br><span class="line"><span class="comment">  * Âº∫ÁÉàÂª∫ËÆÆÂ∞ÜÊ≠§RDD‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂê¶ÂàôÂ∞ÜÂÖ∂‰øùÂ≠òÂú®Êñá‰ª∂‰∏≠ÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">checkpoint</span></span>(): <span class="type">Unit</span> = &#123;</span><br><span class="line">  rdd.checkpoint()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="isCheckpointed"><a href="#isCheckpointed" class="headerlink" title="isCheckpointed"></a>isCheckpointed</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Return whether this RDD has been checkpointed or not</span></span><br><span class="line"><span class="comment">  * ËøîÂõû  RDDÊòØÂê¶Â∑≤Ë¢´Ê£ÄÊü•Ëøá</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isCheckpointed</span></span>: <span class="type">Boolean</span> = rdd.isCheckpointed</span><br></pre></td></tr></table></figure>
<h3 id="getCheckpointFile"><a href="#getCheckpointFile" class="headerlink" title="getCheckpointFile"></a>getCheckpointFile</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Gets the name of the file to which this RDD was checkpointed</span></span><br><span class="line"><span class="comment">  * Ëé∑ÂèñËØ•RDDÊâÄÊåáÂêëÁöÑcheckpointedÊñá‰ª∂ÁöÑÂêçÁß∞</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getCheckpointFile</span></span>(): <span class="type">Optional</span>[<span class="type">String</span>] = &#123;</span><br><span class="line">  <span class="type">JavaUtils</span>.optionToOptional(rdd.getCheckpointFile)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="toDebugString"><a href="#toDebugString" class="headerlink" title="toDebugString"></a>toDebugString</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** A description of this RDD and its recursive dependencies for debugging.</span></span><br><span class="line"><span class="comment">  * ÂØπËØ•RDDÂèäÂÖ∂ÂØπË∞ÉËØïÁöÑÈÄíÂΩí‰æùËµñÁöÑÊèèËø∞„ÄÇ</span></span><br><span class="line"><span class="comment">  * */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">toDebugString</span></span>(): <span class="type">String</span> = &#123;</span><br><span class="line">  rdd.toDebugString</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the top k (largest) elements from this RDD as defined by</span></span><br><span class="line"><span class="comment">  * the specified Comparator[T] and maintains the order.</span></span><br><span class="line"><span class="comment">  * Ê†πÊçÆÊåáÂÆöÁöÑÊØîËæÉÂô®[T]Ôºå‰ªéËøô‰∏™RDD‰∏≠ËøîÂõûÊúÄÂ§ßÁöÑk(ÊúÄÂ§ß)ÂÖÉÁ¥†ÔºåÂπ∂Áª¥Êä§È°∫Â∫è„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  * all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param num k, the number of top elements to return  ËøîÂõûÁöÑÂÖÉÁ¥†Êï∞Èáè</span></span><br><span class="line"><span class="comment">  * @param comp the comparator that defines the order  ÂÆö‰πâÊéíÂ∫èÁöÑÊØîËæÉÂô®</span></span><br><span class="line"><span class="comment">  * @return an array of top elements  ËøîÂõûÊúÄÂ§ßÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">top</span></span>(num: <span class="type">Int</span>, comp: <span class="type">Comparator</span>[<span class="type">T</span>]): <span class="type">JList</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  rdd.top(num)(<span class="type">Ordering</span>.comparatorToOrdering(comp)).toSeq.asJava</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the top k (largest) elements from this RDD using the</span></span><br><span class="line"><span class="comment">  * natural ordering for T and maintains the order.</span></span><br><span class="line"><span class="comment">  * ‰ΩøÁî®TÁöÑËá™ÁÑ∂È°∫Â∫èÔºå‰ªéËøô‰∏™RDD‰∏≠ËøîÂõûÊúÄÂ§ßÁöÑk(ÊúÄÂ§ß)ÂÖÉÁ¥†ÔºåÂπ∂Áª¥Êä§È°∫Â∫è„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  * all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param num k, the number of top elements to return  ËøîÂõûÁöÑÂÖÉÁ¥†Êï∞Èáè</span></span><br><span class="line"><span class="comment">  * @return an array of top elements ÊúÄÂ§ßÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">top</span></span>(num: <span class="type">Int</span>): <span class="type">JList</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> comp = com.google.common.collect.<span class="type">Ordering</span>.natural().asInstanceOf[<span class="type">Comparator</span>[<span class="type">T</span>]]</span><br><span class="line">  top(num, comp)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="takeOrdered"><a href="#takeOrdered" class="headerlink" title="takeOrdered"></a>takeOrdered</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the first k (smallest) elements from this RDD as defined by</span></span><br><span class="line"><span class="comment">  * the specified Comparator[T] and maintains the order.</span></span><br><span class="line"><span class="comment">  * ‰ªéËøô‰∏™RDD‰∏≠ËøîÂõûÁ¨¨‰∏Ä‰∏™k(ÊúÄÂ∞è)ÂÖÉÁ¥†ÔºåÁî±ÊåáÂÆöÁöÑComparator[T]ÂÆö‰πâÔºåÂπ∂Áª¥Êä§ËØ•È°∫Â∫è„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  * all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param num k, the number of elements to return  ËøîÂõûÁöÑÂÖÉÁ¥†Êï∞Èáè</span></span><br><span class="line"><span class="comment">  * @param comp the comparator that defines the order  ÊéíÂ∫èÊØîËæÉÂô®</span></span><br><span class="line"><span class="comment">  * @return an array of top elements  ÂÖÉÁ¥†Êï∞ÁªÑ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeOrdered</span></span>(num: <span class="type">Int</span>, comp: <span class="type">Comparator</span>[<span class="type">T</span>]): <span class="type">JList</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  rdd.takeOrdered(num)(<span class="type">Ordering</span>.comparatorToOrdering(comp)).toSeq.asJava</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the first k (smallest) elements from this RDD using the</span></span><br><span class="line"><span class="comment">  * natural ordering for T while maintain the order.</span></span><br><span class="line"><span class="comment">  * ‰ΩøÁî®ÂéüÁîüÁöÑ TÊéíÂ∫èÊØîËæÉÂô®ÔºåËøîÂõû k‰∏™ ÊúÄÂ∞èÂÄºÔºåÂπ∂Áª¥Êä§Ëøô‰∏™È°∫Â∫è</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  * all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  * Â∞ΩÈáèÂ∫îÁî®‰∫éÂ∞èÁöÑÊï∞ÁªÑÔºåÂõ†‰∏∫‰ºöÂä†ËΩΩÂà∞driverÂÜÖÂ≠ò‰∏≠„ÄÇ</span></span><br><span class="line"><span class="comment">  * @param num k, the number of top elements to return</span></span><br><span class="line"><span class="comment">  * @return an array of top elements</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeOrdered</span></span>(num: <span class="type">Int</span>): <span class="type">JList</span>[<span class="type">T</span>] = &#123;</span><br><span class="line">  <span class="keyword">val</span> comp = com.google.common.collect.<span class="type">Ordering</span>.natural().asInstanceOf[<span class="type">Comparator</span>[<span class="type">T</span>]]</span><br><span class="line">  takeOrdered(num, comp)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="max"><a href="#max" class="headerlink" title="max"></a>max</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the maximum element from this RDD as defined by the specified</span></span><br><span class="line"><span class="comment">  * Comparator[T].</span></span><br><span class="line"><span class="comment">  * ÊåâÁÖßÊåáÂÆöÊØîËæÉÂô®[T]ÂÆö‰πâÁöÑRDDÔºå</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÊúÄÂ§ßÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param comp the comparator that defines ordering  ÊåáÂÆöÁöÑÊØîËæÉÂô®</span></span><br><span class="line"><span class="comment">  * @return the maximum of the RDD  ÊúÄÂ§ßÂÄº</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max</span></span>(comp: <span class="type">Comparator</span>[<span class="type">T</span>]): <span class="type">T</span> = &#123;</span><br><span class="line">  rdd.max()(<span class="type">Ordering</span>.comparatorToOrdering(comp))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="min"><a href="#min" class="headerlink" title="min"></a>min</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Returns the minimum element from this RDD as defined by the specified</span></span><br><span class="line"><span class="comment">  * Comparator[T].</span></span><br><span class="line"><span class="comment">  * ÊåâÁÖßÊåáÂÆöÊØîËæÉÂô®[T]ÂÆö‰πâÁöÑRDDÔºå</span></span><br><span class="line"><span class="comment">  * ËøîÂõûÊúÄÂ∞èÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param comp the comparator that defines ordering   ÊåáÂÆöÁöÑÊØîËæÉÂô®</span></span><br><span class="line"><span class="comment">  * @return the minimum of the RDD  ÊúÄÂ∞èÂÄº</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">min</span></span>(comp: <span class="type">Comparator</span>[<span class="type">T</span>]): <span class="type">T</span> = &#123;</span><br><span class="line">  rdd.min()(<span class="type">Ordering</span>.comparatorToOrdering(comp))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="countApproxDistinct"><a href="#countApproxDistinct" class="headerlink" title="countApproxDistinct"></a>countApproxDistinct</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Return approximate number of distinct elements in the RDD.</span></span><br><span class="line"><span class="comment">* ËøîÂõûRDD‰∏≠‰∏çÈáçÂ§çÂÖÉÁ¥†ÁöÑÊï∞ÈáèËøë‰ººÊï∞„ÄÇ</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* The algorithm used is based on streamlib's implementation of "HyperLogLog in Practice:</span></span><br><span class="line"><span class="comment">* Algorithmic Engineering of a State of The Art Cardinality Estimation Algorithm", available</span></span><br><span class="line"><span class="comment">  * &lt;a href="http://dx.doi.org/10.1145/2452376.2452456"&gt;here&lt;/a&gt;.</span></span><br><span class="line"><span class="comment">  * ÊâÄ‰ΩøÁî®ÁöÑÁÆóÊ≥ïÊòØÂü∫‰∫éstreamlibÂú®ÂÆûË∑µ‰∏≠ÁöÑ‚ÄúHyperLogLog‚ÄùÁöÑÂÆûÁé∞:</span></span><br><span class="line"><span class="comment">  * ‚Äú‰∏ÄÁßçËâ∫ÊúØÂü∫Êï∞‰º∞ËÆ°ÁÆóÊ≥ïÁä∂ÊÄÅÁöÑÁÆóÊ≥ïÂ∑•Á®ã‚ÄùÔºå</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @param relativeSD Relative accuracy. Smaller values create counters that require more space.</span></span><br><span class="line"><span class="comment">  *                   It must be greater than 0.000017.</span></span><br><span class="line"><span class="comment">  *                   Áõ∏ÂØπÁ≤æÂ∫¶„ÄÇ</span></span><br><span class="line"><span class="comment">  *                   ËæÉÂ∞èÁöÑÂÄºÂàõÂª∫ÈúÄË¶ÅÊõ¥Â§öÁ©∫Èó¥ÁöÑËÆ°Êï∞Âô®„ÄÇ</span></span><br><span class="line"><span class="comment">  *                   ÂÆÉÂøÖÈ°ªÂ§ß‰∫é0.000017„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">countApproxDistinct</span></span>(relativeSD: <span class="type">Double</span>): <span class="type">Long</span> = rdd.countApproxDistinct(relativeSD)</span><br></pre></td></tr></table></figure>
<h3 id="countAsync"><a href="#countAsync" class="headerlink" title="countAsync"></a>countAsync</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The asynchronous version of `count`, which returns a</span></span><br><span class="line"><span class="comment">  * future for counting the number of elements in this RDD.</span></span><br><span class="line"><span class="comment">  * ‚Äúcount‚ÄùÁöÑÂºÇÊ≠•ÁâàÊú¨ÔºåÂÆÉ‰∏∫ËÆ°ÁÆóËøô‰∏™RDD‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞ÈáèËøîÂõû‰∏Ä‰∏™Êú™Êù•„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">countAsync</span></span>(): <span class="type">JavaFutureAction</span>[jl.<span class="type">Long</span>] = &#123;</span><br><span class="line"><span class="keyword">new</span> <span class="type">JavaFutureActionWrapper</span>[<span class="type">Long</span>, jl.<span class="type">Long</span>](rdd.countAsync(), jl.<span class="type">Long</span>.valueOf)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="collectAsync"><a href="#collectAsync" class="headerlink" title="collectAsync"></a>collectAsync</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The asynchronous version of `collect`, which returns a future for</span></span><br><span class="line"><span class="comment">  * retrieving an array containing all of the elements in this RDD.</span></span><br><span class="line"><span class="comment">  * ‚Äúcollect‚ÄùÁöÑÂºÇÊ≠•ÁâàÊú¨Ôºå</span></span><br><span class="line"><span class="comment">  * ÂÆÉËøîÂõû‰∏Ä‰∏™Áî®‰∫éÊ£ÄÁ¥¢ÂåÖÂê´ËØ•RDD‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÁöÑÊú™Êù•„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  * all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  * Â∞ΩÈáèÂ∫îÁî®‰∫éÂ∞èÊï∞ÈáèÊï∞ÁªÑ„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">collectAsync</span></span>(): <span class="type">JavaFutureAction</span>[<span class="type">JList</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line"><span class="keyword">new</span> <span class="type">JavaFutureActionWrapper</span>(rdd.collectAsync(), (x: <span class="type">Seq</span>[<span class="type">T</span>]) =&gt; x.asJava)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="takeAsync"><a href="#takeAsync" class="headerlink" title="takeAsync"></a>takeAsync</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The asynchronous version of the `take` action, which returns a</span></span><br><span class="line"><span class="comment">  * future for retrieving the first `num` elements of this RDD.</span></span><br><span class="line"><span class="comment">  * ‚Äútake‚ÄùÊìç‰ΩúÁöÑÂºÇÊ≠•ÁâàÊú¨Ôºå</span></span><br><span class="line"><span class="comment">  * ÂÆÉÂ∞ÜËøîÂõûÁî®‰∫éÊ£ÄÁ¥¢Ê≠§RDDÁöÑÁ¨¨‰∏Ä‰∏™‚Äúnum‚ÄùÂÖÉÁ¥†ÁöÑÊú™Êù•„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * @note this method should only be used if the resulting array is expected to be small, as</span></span><br><span class="line"><span class="comment">  * all the data is loaded into the driver's memory.</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">takeAsync</span></span>(num: <span class="type">Int</span>): <span class="type">JavaFutureAction</span>[<span class="type">JList</span>[<span class="type">T</span>]] = &#123;</span><br><span class="line"><span class="keyword">new</span> <span class="type">JavaFutureActionWrapper</span>(rdd.takeAsync(num), (x: <span class="type">Seq</span>[<span class="type">T</span>]) =&gt; x.asJava)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="foreachAsync"><a href="#foreachAsync" class="headerlink" title="foreachAsync"></a>foreachAsync</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The asynchronous version of the `foreach` action, which</span></span><br><span class="line"><span class="comment">  * applies a function f to all the elements of this RDD.</span></span><br><span class="line"><span class="comment">  * ‚Äúforeach‚ÄùÊìç‰ΩúÁöÑÂºÇÊ≠•ÁâàÊú¨Ôºå</span></span><br><span class="line"><span class="comment">  * ÂÆÉÂ∞ÜÂáΩÊï∞fÂ∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreachAsync</span></span>(f: <span class="type">VoidFunction</span>[<span class="type">T</span>]): <span class="type">JavaFutureAction</span>[<span class="type">Void</span>] = &#123;</span><br><span class="line"><span class="keyword">new</span> <span class="type">JavaFutureActionWrapper</span>[<span class="type">Unit</span>, <span class="type">Void</span>](rdd.foreachAsync(x =&gt; f.call(x)),</span><br><span class="line">&#123; x =&gt; <span class="literal">null</span>.asInstanceOf[<span class="type">Void</span>] &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="foreachPartitionAsync"><a href="#foreachPartitionAsync" class="headerlink" title="foreachPartitionAsync"></a>foreachPartitionAsync</h3><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * The asynchronous version of the `foreachPartition` action, which</span></span><br><span class="line"><span class="comment">  * applies a function f to each partition of this RDD.</span></span><br><span class="line"><span class="comment">  * ‚ÄúforeachPartition‚ÄùÊìç‰ΩúÁöÑÂºÇÊ≠•ÁâàÊú¨Ôºå</span></span><br><span class="line"><span class="comment">  * ÂÆÉÂ∞ÜÂáΩÊï∞fÂ∫îÁî®‰∫éËØ•RDDÁöÑÊØè‰∏™ÂàÜÂå∫„ÄÇ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foreachPartitionAsync</span></span>(f: <span class="type">VoidFunction</span>[<span class="type">JIterator</span>[<span class="type">T</span>]]): <span class="type">JavaFutureAction</span>[<span class="type">Void</span>] = &#123;</span><br><span class="line"><span class="keyword">new</span> <span class="type">JavaFutureActionWrapper</span>[<span class="type">Unit</span>, <span class="type">Void</span>](rdd.foreachPartitionAsync(x =&gt; f.call(x.asJava)),</span><br><span class="line">&#123; x =&gt; <span class="literal">null</span>.asInstanceOf[<span class="type">Void</span>] &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
            <tag> Ê∫êÁ†Å </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sparkÊ∫êÁ†ÅÊ≥®ÈáäÁøªËØë]]></title>
      <url>https://stanxia.github.io/2017/11/06/spark%E6%BA%90%E7%A0%81%E6%B3%A8%E9%87%8A%E7%BF%BB%E8%AF%91/</url>
      <content type="html"><![CDATA[<div class="note info"><p>ÁâàÊú¨Ôºöspark2.1.1<br>ÁõÆÁöÑÔºöÊñπ‰æø‰∏≠ÊñáÁî®Êà∑ÈòÖËØªÊ∫êÁ†ÅÔºåÊääÊó∂Èó¥Ëä±Âú®ÁêÜËß£ËÄå‰∏çÊòØÁøªËØë‰∏ä</p></div>
<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<h2 id="ÂàùË°∑"><a href="#ÂàùË°∑" class="headerlink" title="ÂàùË°∑"></a>ÂàùË°∑</h2><p>ÂºÄÂßãÁ´ãÈ°πËøõË°åÁøªËØëÔºå‰∏ÄÊñπÈù¢Êñπ‰æøÊó•ÂêéÈòÖËØªÊ∫êÁ†ÅÔºåÂè¶‰∏ÄÊñπÈù¢ÂÖàÁ≤óÁ≤íÂ∫¶ÁöÑÁÜüÊÇâ‰∏ãsparkÊ°ÜÊû∂ÂíåÁªÑ‰ª∂„ÄÇ‰ºòÂåñÂÆå‰πãÂêéÂ∏åÊúõËÉΩÂ∏ÆÂä©Êõ¥Â§öÁöÑ‰∏≠ÊñáÁî®Êà∑ÔºåËäÇÁúÅÁøªËØëÊó∂Èó¥„ÄÇ</p>
<a id="more"></a>
<h2 id="ËøõÂ∫¶"><a href="#ËøõÂ∫¶" class="headerlink" title="ËøõÂ∫¶"></a>ËøõÂ∫¶</h2><p>Â∑≤ÂÆåÊàêÔºö</p>
<p>Ê≠£Âú®‰ΩúÔºöspark coreÊ®°Âùó</p>
<table>
<thead>
<tr>
<th style="text-align:center">Ê®°ÂùóÂêç</th>
<th style="text-align:center">Ê®°Âùó‰ªãÁªç</th>
<th style="text-align:center">ÂÆåÊàêÂ∫¶</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">api</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">broadcast</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">deploy</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">executor</td>
<td style="text-align:center">ÊâßË°åÂô®ÔºöÁî®‰∫éÂêØÂä®Á∫øÁ®ãÊ±†ÔºåÊòØÁúüÊ≠£Ë¥üË¥£ÊâßË°åtaskÁöÑÈÉ®‰ª∂</td>
<td style="text-align:center">Â∑≤ÂÆåÊàê</td>
</tr>
<tr>
<td style="text-align:center">input</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">internal</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">io</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">launcher</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">mapred</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">memory</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">metrics</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">network</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">partial</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">rdd</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">rpc</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">scheduler</td>
<td style="text-align:center">Ë∞ÉÂ∫¶Âô®ÔºösparkÂ∫îÁî®Á®ãÂ∫èÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶Âô®</td>
<td style="text-align:center">Ê≠£Âú®‰Ωú</td>
</tr>
<tr>
<td style="text-align:center">security</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">serializer</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">shuffle</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">status.api.v1</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">storage</td>
<td style="text-align:center"></td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">util</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sparkÂÖ≥‰∫éparquetÁöÑ‰ºòÂåñ]]></title>
      <url>https://stanxia.github.io/2017/11/01/spark%E5%85%B3%E4%BA%8Eparquet%E7%9A%84%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<div class="note info"><p>parquetÊòØ‰∏ÄÁßçÂàóÂºèÂ≠òÂÇ®„ÄÇÂèØ‰ª•Êèê‰æõÈù¢ÂêëÂàóÁöÑÂ≠òÂÇ®ÂíåÊü•ËØ¢„ÄÇ</p></div>
<h2 id="ParquetÁöÑ‰ºòÂäø"><a href="#ParquetÁöÑ‰ºòÂäø" class="headerlink" title="ParquetÁöÑ‰ºòÂäø"></a>ParquetÁöÑ‰ºòÂäø</h2><p>Âú®sparkSQLÁ®ãÂ∫è‰∏≠‰ΩøÁî®parquetÊ†ºÂºèÂ≠òÂÇ®Êñá‰ª∂ÔºåÂú®Â≠òÂÇ®Á©∫Èó¥ÂíåÊü•ËØ¢ÊÄßËÉΩÊñπÈù¢ÈÉΩÊúâÂæàÈ´òÁöÑÊïàÁéá„ÄÇ</p>
<h3 id="Â≠òÂÇ®ÊñπÈù¢"><a href="#Â≠òÂÇ®ÊñπÈù¢" class="headerlink" title="Â≠òÂÇ®ÊñπÈù¢"></a>Â≠òÂÇ®ÊñπÈù¢</h3><p>Âõ†‰∏∫ÊòØÈù¢ÂêëÂàóÁöÑÂ≠òÂÇ®ÔºåÂêå‰∏ÄÂàóÁöÑÁ±ªÂûãÁõ∏ÂêåÔºåÂõ†ËÄåÂú®Â≠òÂÇ®ÁöÑËøáÁ®ã‰∏≠ÂèØ‰ª•‰ΩøÁî®Êõ¥È´òÊïàÁöÑÂéãÁº©ÊñπÊ°àÔºåÂèØ‰ª•ËäÇÁúÅÂ§ßÈáèÁöÑÂ≠òÂÇ®Á©∫Èó¥„ÄÇ</p>
<h3 id="Êü•ËØ¢ÊñπÈù¢"><a href="#Êü•ËØ¢ÊñπÈù¢" class="headerlink" title="Êü•ËØ¢ÊñπÈù¢"></a>Êü•ËØ¢ÊñπÈù¢</h3><p>Âú®ÊâßË°åÊü•ËØ¢‰ªªÂä°Êó∂ÔºåÂè™‰ºöÊâ´ÊèèÈúÄË¶ÅÁöÑÂàóÔºåËÄå‰∏çÊòØÂÖ®ÈÉ®ÔºåÈ´òÂ∫¶ÁÅµÊ¥ªÊÄß‰ΩøÊü•ËØ¢ÂèòÂæóÈùûÂ∏∏È´òÊïà„ÄÇ<br><a id="more"></a></p>
<h3 id="ÂÆû‰æãÊµãËØï"><a href="#ÂÆû‰æãÊµãËØï" class="headerlink" title="ÂÆû‰æãÊµãËØï"></a>ÂÆû‰æãÊµãËØï</h3><table>
<thead>
<tr>
<th>ÊµãËØïÊï∞ÊçÆÂ§ßÂ∞è</th>
<th>Â≠òÂÇ®Á±ªÂûã</th>
<th>Â≠òÂÇ®ÊâÄÂç†Á©∫Èó¥</th>
<th>Êü•ËØ¢ÊÄßËÉΩ</th>
</tr>
</thead>
<tbody>
<tr>
<td>1T</td>
<td>TEXTFILE</td>
<td>897.9G</td>
<td>698s</td>
</tr>
<tr>
<td>1T</td>
<td>Parquet</td>
<td>231.4G</td>
<td>21s</td>
</tr>
</tbody>
</table>
<h2 id="ParquetÁöÑ‰ΩøÁî®"><a href="#ParquetÁöÑ‰ΩøÁî®" class="headerlink" title="ParquetÁöÑ‰ΩøÁî®"></a>ParquetÁöÑ‰ΩøÁî®</h2><p>‰ΩøÁî®parquetÁöÑÁÆÄÂçïdemoÔºö</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Encoders for most common types are automatically provided by importing spark.implicits._</span></span><br><span class="line"><span class="keyword">import</span> spark.implicits._</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> peopleDF = spark.read.json(<span class="string">"examples/src/main/resources/people.json"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// DataFrames can be saved as Parquet files, maintaining the schema information</span></span><br><span class="line">peopleDF.write.parquet(<span class="string">"people.parquet"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Read in the parquet file created above</span></span><br><span class="line"><span class="comment">// Parquet files are self-describing so the schema is preserved</span></span><br><span class="line"><span class="comment">// The result of loading a Parquet file is also a DataFrame</span></span><br><span class="line"><span class="keyword">val</span> parquetFileDF = spark.read.parquet(<span class="string">"people.parquet"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Parquet files can also be used to create a temporary view and then used in SQL statements</span></span><br><span class="line">parquetFileDF.createOrReplaceTempView(<span class="string">"parquetFile"</span>)</span><br><span class="line"><span class="keyword">val</span> namesDF = spark.sql(<span class="string">"SELECT name FROM parquetFile WHERE age BETWEEN 13 AND 19"</span>)</span><br><span class="line">namesDF.map(attributes =&gt; <span class="string">"Name: "</span> + attributes(<span class="number">0</span>)).show()</span><br><span class="line"><span class="comment">// +------------+</span></span><br><span class="line"><span class="comment">// |       value|</span></span><br><span class="line"><span class="comment">// +------------+</span></span><br><span class="line"><span class="comment">// |Name: Justin|</span></span><br><span class="line"><span class="comment">// +------------+</span></span><br></pre></td></tr></table></figure>
<h2 id="Parquet-ÁöÑÈóÆÈ¢ò"><a href="#Parquet-ÁöÑÈóÆÈ¢ò" class="headerlink" title="Parquet ÁöÑÈóÆÈ¢ò"></a>Parquet ÁöÑÈóÆÈ¢ò</h2><p> spark ÂÜôÂÖ•Êï∞ÊçÆÂà∞ hive ‰∏≠Ôºå‰ΩøÁî® Parquet Â≠òÂÇ®Ê†ºÂºèÔºåÊü•ËØ¢ËØ•Ë°®Êó∂Êä•ÈîôÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Error</span>: java.io.<span class="type">IOException</span>: org.apache.parquet.io.<span class="type">ParquetDecodingException</span>: <span class="type">Can</span> not read value at <span class="number">0</span> in block <span class="number">-1</span> in file</span><br></pre></td></tr></table></figure>
<p>ÂΩìÊó∂ËÆæÁΩÆÁöÑÂ≠óÊÆµÂ±ûÊÄß‰∏∫Ôºö<br><img src="http://oliji9s3j.bkt.clouddn.com/15118606648730.jpg" alt></p>
<p>ÁªèËøáÊØîÂØπÔºåÂèëÁé∞ÊòØ decimal Á±ªÂûãÂá∫‰∫ÜÈóÆÈ¢òÔºåÊü•ËØ¢ decimal ÁöÑÂ≠óÊÆµÊó∂ÂÄôÂ∞±‰ºöÊä•ÈîôÔºåËÄåÊü•ËØ¢ÂÖ∂‰ªñÁöÑÂπ∂‰∏ç‰ºöÊä•Èîô„ÄÇÔºàËøôÂ∫îËØ•ÊòØ spark ÂºïËµ∑ÁöÑÔºåÂõ†‰∏∫Âú® hive ÂÆ¢Êà∑Á´ØÊâßË°å decimal Á±ªÂûãÁöÑÊìç‰ΩúÊó∂Âπ∂‰∏ç‰ºöÂá∫Èîô„ÄÇÔºâ</p>
<p>Êü•ÈòÖÁΩë‰∏äÔºå‰πüÊúâ‰∫õÊúãÂèãÈÅáÂà∞‰∫ÜÁ±ª‰ººÁöÑ‰∫ãÊÉÖÔºåÂ∫îËØ•ÊòØÂÆòÊñπÁöÑ bug ÔºåÊöÇÊó∂ÁöÑËß£ÂÜ≥ÂäûÊ≥ïÊòØ:</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> Â∞Ü <span class="type">Parquet</span> ÁöÑÂ≠òÂÇ®Ê†ºÂºèËΩ¨Êç¢‰∏∫ <span class="type">ORC</span> </span><br><span class="line"><span class="number">2.</span> ÊàñÂ∞Ü decimal Êç¢‰∏∫ double Á±ªÂûãÂ≠òÂÇ®Â≠óÊÆµ</span><br></pre></td></tr></table></figure>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
            <tag> parquet </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[‰∏âÊ≠•Ëµ∞ÊàòÁï•]]></title>
      <url>https://stanxia.github.io/2017/11/01/%E4%B8%89%E6%AD%A5%E8%B5%B0%E6%88%98%E7%95%A5/</url>
      <content type="html"><![CDATA[<div class="note info"><p>ËÆæÂÆö‰∏≠ÈïøÊúüËßÑÂàí<br>Á®≥ÊâéÁ®≥ÊâìÔºåÈÄê‰∏™ÂáªÁ†¥ÔºåÂÆûÁé∞ÊäÄÊúØ‰∏äÁöÑÈáçÂ§ßÁ™ÅÁ†¥</p></div>
<a id="more"></a>
<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<h2 id="Á¨¨‰∏ÄÊ≠•Ê∑±Âàª‰∫ÜËß£sparkËøêË°åÊú∫Âà∂"><a href="#Á¨¨‰∏ÄÊ≠•Ê∑±Âàª‰∫ÜËß£sparkËøêË°åÊú∫Âà∂" class="headerlink" title="Á¨¨‰∏ÄÊ≠•Ê∑±Âàª‰∫ÜËß£sparkËøêË°åÊú∫Âà∂"></a>Á¨¨‰∏ÄÊ≠•Ê∑±Âàª‰∫ÜËß£sparkËøêË°åÊú∫Âà∂</h2><h2 id="Á¨¨‰∫åÊ≠•Ê∑±Â∫¶ÂâñÊûêsparkSQLÂíåsparkStreaming"><a href="#Á¨¨‰∫åÊ≠•Ê∑±Â∫¶ÂâñÊûêsparkSQLÂíåsparkStreaming" class="headerlink" title="Á¨¨‰∫åÊ≠•Ê∑±Â∫¶ÂâñÊûêsparkSQLÂíåsparkStreaming"></a>Á¨¨‰∫åÊ≠•Ê∑±Â∫¶ÂâñÊûêsparkSQLÂíåsparkStreaming</h2><h2 id="Á¨¨‰∏âÊ≠•ÂÆûÁé∞ÂØπsparkÊú∫Âô®Â≠¶‰π†ÁöÑÊ∑±Â∫¶ÊéåÊè°"><a href="#Á¨¨‰∏âÊ≠•ÂÆûÁé∞ÂØπsparkÊú∫Âô®Â≠¶‰π†ÁöÑÊ∑±Â∫¶ÊéåÊè°" class="headerlink" title="Á¨¨‰∏âÊ≠•ÂÆûÁé∞ÂØπsparkÊú∫Âô®Â≠¶‰π†ÁöÑÊ∑±Â∫¶ÊéåÊè°"></a>Á¨¨‰∏âÊ≠•ÂÆûÁé∞ÂØπsparkÊú∫Âô®Â≠¶‰π†ÁöÑÊ∑±Â∫¶ÊéåÊè°</h2><!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> ËßÑÂàí </category>
            
        </categories>
        
        
        <tags>
            
            <tag> ËßÑÂàí </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ÊâãÊääÊâãÊê≠Âª∫vpsÂíåshadowsocks]]></title>
      <url>https://stanxia.github.io/2017/10/31/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%90%AD%E5%BB%BAvps%E5%92%8Cshadowsocks/</url>
      <content type="html"><![CDATA[<div class="note info"><p>ËÆ∞ÊÄß‰∏çÂ•ΩÔºåÂÅö‰∏™ËÆ∞ÂΩïÔºåÊó•ÂêéÊúâÈúÄË¶ÅÊó∂ÈöæÂæóË¥πÁ•û„ÄÇ</p></div>
<h2 id="ÂêçËØçËß£Èáä"><a href="#ÂêçËØçËß£Èáä" class="headerlink" title="ÂêçËØçËß£Èáä"></a>ÂêçËØçËß£Èáä</h2><p>‰∫ÜËß£‰∏Ä‰∫õÂéüÁêÜÔºåÁÜüÊÇâ‰∏Ä‰∫õÂêçËØçÔºå‰πüÊñπ‰æøÁêÜËß£Êé•‰∏ãÊù•ÂÆâË£ÖËøáÁ®ã‰∏≠ÁöÑÊìç‰Ωú„ÄÇ</p>
<h3 id="vps"><a href="#vps" class="headerlink" title="vps"></a>vps</h3><p>VPS(Virtual private server) ËØë‰ΩúËôöÊãü‰∏ìÁî®‰º∫ÊúçÂô®„ÄÇ‰Ω†ÂèØ‰ª•ÊääÂÆÉÁÆÄÂçïÂú∞ÁêÜËß£‰∏∫‰∏ÄÂè∞Âú®ËøúÁ´ØÁöÑÂº∫Âä≤ÁîµËÑë„ÄÇÂΩì‰Ω†ÁßüÁî®‰∫ÜÂÆÉ‰ª•ÂêéÔºåÂèØ‰ª•ÁªôÂÆÉÂÆâË£ÖÊìç‰ΩúÁ≥ªÁªü„ÄÅËΩØ‰ª∂ÔºåÂπ∂ÈÄöËøá‰∏Ä‰∫õÂ∑•ÂÖ∑ËøûÊé•ÂíåËøúÁ®ãÊìçÊéßÂÆÉ„ÄÇ</p>
<h3 id="vultr"><a href="#vultr" class="headerlink" title="vultr"></a>vultr</h3><p><a href="https://www.vultr.com/" target="_blank" rel="noopener">Vultr</a> ÊòØ‰∏ÄÂÆ∂ VPS ÊúçÂä°Âô®Êèê‰æõÂïÜÔºåÊúâÁæéÂõΩ„ÄÅ‰∫öÊ¥≤„ÄÅÊ¨ßÊ¥≤Á≠âÂ§öÂú∞ÁöÑ VPS„ÄÇÂÆÉÂÆ∂ÁöÑÊúçÂä°Âô®‰ª•ÊÄß‰ª∑ÊØîÈ´òÈóªÂêçÔºåÊåâÊó∂Èó¥ËÆ°Ë¥πÔºåÊúÄ‰ΩéÁöÑËµÑË¥π‰∏∫ÊØèÊúà $2.5„ÄÇ</p>
<h3 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h3><p>Linux ÊòØÂÖçË¥πÂºÄÊ∫êÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåÂ§ßÊ¶ÇË¢´‰∏ñÁïå‰∏äËøáÂçäÊúçÂä°Âô®ÊâÄÈááÁî®„ÄÇÊúâÂ§ßÈáè‰ºòÁßÄÁöÑÂºÄÊ∫êËΩØ‰ª∂ÂèØ‰ª•ÂÆâË£ÖÔºå‰∏äËø∞ Shadowsocks Â∞±ÊòØÂÖ∂‰∏Ä„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Ë°åÊù•Áõ¥Êé•Áªô Linux Êìç‰ΩúÁ≥ªÁªü„Äå‰∏ãÂëΩ‰ª§„ÄçÔºåÊØîÂ¶Ç $ cd ~/Desktop Â∞±ÊòØËøõÂÖ•‰Ω†Ê†πÁõÆÂΩï‰∏ãÁöÑ Desktop Êñá‰ª∂Â§π„ÄÇ</p>
<h3 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h3><p> SSH ÊòØ‰∏ÄÁßçÁΩëÁªúÂçèËÆÆÔºå‰Ωú‰∏∫ÊØè‰∏ÄÂè∞ Linux ÁîµËÑëÁöÑÊ†áÂáÜÈÖçÁΩÆÔºåÁî®‰∫éËÆ°ÁÆóÊú∫‰πãÈó¥ÁöÑÂä†ÂØÜÁôªÂΩï„ÄÇÂΩì‰Ω†‰∏∫ÁßüÁî®ÁöÑ VPS ÂÆâË£Ö Linux Á≥ªÁªüÂêéÔºåÂè™Ë¶ÅÂÄüÂä©‰∏Ä‰∫õÂ∑•ÂÖ∑ÔºåÂ∞±ÂèØ‰ª•Áî® SSH Âú®‰Ω†Ëá™Â∑±ÁöÑ Mac/PC ÁîµËÑë‰∏äËøúÁ®ãÁôªÂΩïËØ• VPS ‰∫Ü„ÄÇ</p>
<h3 id="shadowsocks"><a href="#shadowsocks" class="headerlink" title="shadowsocks"></a>shadowsocks</h3><p>Shadowsocks(ss) ÊòØÁî± <a href="https://github.com/Clowwindy" target="_blank" rel="noopener">Clowwindy</a> ÂºÄÂèëÁöÑ‰∏ÄÊ¨æËΩØ‰ª∂ÔºåÂÖ∂‰ΩúÁî®Êú¨Êù•ÊòØÂä†ÂØÜ‰º†ËæìËµÑÊñô„ÄÇÂΩìÁÑ∂Ôºå‰πüÊ≠£Âõ†‰∏∫ÂÆÉÂä†ÂØÜ‰º†ËæìËµÑÊñôÁöÑÁâπÊÄßÔºå‰ΩøÂæó GFW Ê≤°Ê≥ïÂ∞ÜÁî±ÂÆÉ‰º†ËæìÁöÑËµÑÊñôÂíåÂÖ∂‰ªñÊôÆÈÄöËµÑÊñôÂå∫ÂàÜÂºÄÊù•Ôºå‰πüÂ∞±‰∏çËÉΩÂπ≤Êâ∞Êàë‰ª¨ËÆøÈóÆÈÇ£‰∫õ„Äå‰∏çÂ≠òÂú®„ÄçÁöÑÁΩëÁ´ô‰∫Ü„ÄÇ<br><a id="more"></a><br><img src="/images/pic/1.png" alt="121"></p>
<h2 id="Êê≠Âª∫vps"><a href="#Êê≠Âª∫vps" class="headerlink" title="Êê≠Âª∫vps"></a>Êê≠Âª∫vps</h2><p>ÁõÆÁöÑÂ∞±ÊòØÊê≠Âª∫Ê¢ØÂ≠ê„ÄÇÊó†Âª∫Á´ôÁöÑÈúÄÊ±Ç„ÄÇÊé®ËçêvultrÔºåÊúÄ‰æøÂÆúÁöÑÊúâ2.5ÁæéÂÖÉ‰∏Ä‰∏™Êúà„ÄÇ500gÊµÅÈáèÂÆåÂÖ®Â§üÁî®‰∫Ü„ÄÇ‰∏îÁé∞Âú®ÊîØÊåÅÊîØ‰ªòÂÆù‰ªòÊ¨æÔºåÈ¢á‰∏∫Êñπ‰æø„ÄÇÁé∞Èò∂ÊÆµÁöÑ‰ºòÊÉ†Ê¥ªÂä®ÊòØÊñ∞Ê≥®ÂÜåÁöÑÁî®Êà∑ÂÆåÊàêÊåáÂÆöÁöÑ‰ªªÂä°‰ºöËé∑Âæó3ÁæéÂÖÉÁöÑÂ•ñÂä±„ÄÇÔºàËØ¶ÁªÜÊÉÖÂÜµÂèØ‰æùÂèÇËßÅÂÆòÁΩë„ÄÇÔºâ</p>
<h3 id="Ê≥®ÂÜå"><a href="#Ê≥®ÂÜå" class="headerlink" title="Ê≥®ÂÜå"></a>Ê≥®ÂÜå</h3><p>È¶ñÂÖàÁÇπÂáªÂè≥‰æßÊ≥®ÂÜåÈìæÊé•Ôºö<a href="https://www.vultr.com/?ref=7008162" target="_blank" rel="noopener">https://www.vultr.com/2017Promo</a>ÔºåÁÑ∂Âêé‰ºöÊù•Âà∞‰∏ãÂõæÊâÄÁ§∫ÁöÑÊ≥®ÂÜåÈ°µÈù¢„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-01.png" alt="11"></p>
<p>Á¨¨‰∏Ä‰∏™Ê°Ü‰∏≠Â°´ÂÜôÊ≥®ÂÜåÈÇÆÁÆ±ÔºåÁ¨¨‰∫å‰∏™Ê°Ü‰∏≠Â°´ÂÜôÊ≥®ÂÜåÂØÜÁ†ÅÔºàËá≥Â∞ëÂåÖÂê´1‰∏™Â∞èÂÜôÂ≠óÊØç„ÄÅ1‰∏™Â§ßÂÜôÂ≠óÊØçÂíå1‰∏™Êï∞Â≠óÔºâÔºåÊúÄÂêéÁÇπÂáªCreate AccountÂàõÂª∫Ë¥¶Êà∑„ÄÇ</p>
<p>ÂàõÂª∫Ë¥¶Êà∑ÂêéÊ≥®ÂÜåÈÇÆÁÆ±‰ºöÊî∂Âà∞‰∏ÄÂ∞ÅÈ™åËØÅÈÇÆ‰ª∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÁÇπÂáªVerify Your E-mailÊù•È™åËØÅÈÇÆÁÆ±„ÄÇ</p>
<p>Â¶ÇÊûúÊ≥®ÂÜåÈÇÆÁÆ±Êî∂‰∏çÂà∞È™åËØÅÈÇÆ‰ª∂ËØ∑Êõ¥Êç¢Ê≥®ÂÜåÈÇÆÁÆ±ÂêéÈáçÂ§çÁ¨¨‰∏ÄÊ≠•„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-02.png" alt="12"></p>
<p>È™åËØÅÈÇÆÁÆ±ÂêéÊàë‰ª¨‰ºöÊù•Âà∞‰∏ãÂõæÊâÄÁ§∫ÁöÑÁôªÂΩïÁïåÈù¢ÔºåÊåâ‰∏ãÂõæ‰∏≠ÊåáÁ§∫Â°´ÂÜô‰ø°ÊÅØÔºåÁÑ∂ÂêéÁÇπÂáªLoginÁôªÂΩï„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-03.png" alt="13"></p>
<p>ÁôªÈôÜÂêéÊàë‰ª¨‰ºöÊù•Âà∞ÂÖÖÂÄºÁïåÈù¢„ÄÇVultrË¶ÅÊ±ÇÊñ∞Ë¥¶Êà∑ÂÖÖÂÄºÂêéÊâçÂèØ‰ª•Ê≠£Â∏∏ÂàõÂª∫ÊúçÂä°Âô®„ÄÇVultrÂ∑≤ÁªèÊîØÊåÅÊîØ‰ªòÂÆù‰∫ÜÔºåÂú®ËøôÈáåÊé®ËçêÂ§ßÂÆ∂‰ΩøÁî®ÊîØ‰ªòÂÆùÂÖÖÂÄºÔºåÊúÄ‰ΩéÈáëÈ¢ù‰∏∫10ÁæéÂÖÉ„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-04.png" alt="14"></p>
<h3 id="Ë¥≠‰π∞"><a href="#Ë¥≠‰π∞" class="headerlink" title="Ë¥≠‰π∞"></a>Ë¥≠‰π∞</h3><p>ÂÖÖÂÄºÂÆåÊØïÂêéÁÇπÂáªÂè≥‰∏äËßíÁöÑËìùËâ≤Âä†Âè∑ÊåâÈíÆËøõÂÖ•ÂàõÂª∫ÊúçÂä°Âô®ÁïåÈù¢„ÄÇ</p>
<p>È¶ñÂÖàÈúÄË¶ÅÈÄâÊã©Server LocationÂç≥Êú∫Êàø‰ΩçÁΩÆÔºå‰ªéÂ∑¶Âà∞Âè≥„ÄÅ‰ªé‰∏äÂà∞‰∏ã‰æùÊ¨°‰∏∫‰∏ú‰∫¨„ÄÅÊñ∞Âä†Âù°„ÄÅ‰º¶Êï¶„ÄÅÊ≥ïÂÖ∞ÂÖãÁ¶è„ÄÅÂ∑¥Èªé„ÄÅÈòøÂßÜÊñØÁâπ‰∏π„ÄÅËøàÈòøÂØÜ„ÄÅ‰∫öÁâπÂÖ∞Â§ß„ÄÅËäùÂä†Âì•„ÄÅÁ°ÖË∞∑„ÄÅËææÊãâÊñØ„ÄÅÊ¥õÊùâÁü∂„ÄÅÁ∫ΩÁ∫¶„ÄÅË•øÈõÖÂõæ„ÄÅÊÇâÂ∞º„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-06.png" alt="16"></p>
<p>ÁÑ∂ÂêéÈúÄË¶ÅÈÄâÊã©Server TypeÂç≥ÊúçÂä°Á±ªÂûãÔºåËøôÈáåÂ§ßÂÆ∂ÈúÄË¶ÅÈÄâÊã©ÂÆâË£ÖDebian 7 x64Á≥ªÁªüÔºåÂõ†‰∏∫Ëøô‰∏™Á≥ªÁªüÊäòËÖæËµ∑Êù•ÊØîËæÉÂÆπÊòìÔºåÊê≠Âª∫‰∏úË•ø‰πüÁÆÄÂçï‰æøÊç∑„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-07.png" alt="17"></p>
<p>ÁÑ∂ÂêéÈúÄË¶ÅÈÄâÊã©Server SizeÂç≥ÊñπÊ°àÁ±ªÂûãÔºåËøôÈáåÂ§ßÂÆ∂ÂèØ‰ª•ÊåâÁÖßÈúÄË¶ÅËá™Ë°åÈÄâÊã©ÔºåÂ¶ÇÊûúÂè™ÊòØÊôÆÈÄö‰ΩøÁî®ÈÇ£‰πàÈÄâÊã©Á¨¨‰∫å‰∏™5ÁæéÂÖÉÊñπÊ°àÂç≥ÂèØ„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-08.png" alt="111"></p>
<p>ÁÑ∂ÂêéAdditional Features„ÄÅStartup Script„ÄÅSSH Keys‰ª•ÂèäServer Hostname &amp; LabelÁ≠âÂõõÈÉ®ÂàÜÂ§ßÂÆ∂‰øùÊåÅÈªòËÆ§Âç≥ÂèØÔºåÊúÄÂêéÁÇπÂáªÂè≥‰∏ãÊñπÁöÑËìùËâ≤Deploy NowÊåâÈíÆÁ°ÆËÆ§ÂàõÂª∫ÊúçÂä°Âô®„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-09.png" alt="222"></p>
<p>ÂàõÂª∫ÊúçÂä°Âô®ÂêéÊàë‰ª¨‰ºöÁúãÂà∞‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-10.png" alt="22"></p>
<p>‰∏äÂõæ‰∏≠Êàë‰ª¨ÈúÄË¶ÅËÄêÂøÉÁ≠âÂæÖ3~4ÂàÜÈíüÔºåÁ≠âÁ∫¢Ëâ≤InstallingÂ≠óÂèò‰∏∫ÁªøËâ≤RunningÂ≠óÂêéÔºåÁÇπÂáªCloud InstanceÂç≥ÂèØËøõÂÖ•ÊúçÂä°Âô®ËØ¶ÁªÜ‰ø°ÊÅØÁïåÈù¢ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/goumai-11.png" alt="33"></p>
<p>Â∑¶‰æßÁ∫¢Ê°ÜÂÜÖÂõõË°å‰ø°ÊÅØ‰æùÊ¨°‰∏∫Êú∫Êàø‰ΩçÁΩÆ„ÄÅIPÂú∞ÂùÄ„ÄÅÁôªÂΩïÁî®Êà∑Âêç„ÄÅÁôªÂΩïÂØÜÁ†Å„ÄÇIPÂú∞ÂùÄÂêéÈù¢ÁöÑÊåâÈíÆ‰∏∫Â§çÂà∂IPÂú∞ÂùÄÔºåÁôªÂΩïÂØÜÁ†ÅÂêéÈù¢ÁöÑÊåâÈíÆ‰∏∫Â§çÂà∂ÂØÜÁ†ÅÂèäÊòæÁ§∫/ÈöêËóèÂØÜÁ†Å„ÄÇÂè≥‰∏äËßíÁ∫¢Ê°ÜÂÜÖÂêéÈù¢Âõõ‰∏™ÊåâÈíÆÂàÜÂà´ÊòØÂÖ≥Èó≠ÊúçÂä°Âô®„ÄÅÈáçÂêØÊúçÂä°Âô®„ÄÅÈáçË£ÖÁ≥ªÁªü„ÄÅÂà†Èô§ÊúçÂä°Âô®„ÄÇ</p>
<h2 id="ËøúÁ®ãÁôªÂΩï"><a href="#ËøúÁ®ãÁôªÂΩï" class="headerlink" title="ËøúÁ®ãÁôªÂΩï"></a>ËøúÁ®ãÁôªÂΩï</h2><p>ÂÆâË£ÖËøúÁ®ãÁôªÂΩïËΩØ‰ª∂„ÄÇËøôÈáå‰ª•windosÁ´ØÁöÑxshell‰∏∫‰æã„ÄÇ‰ΩøÁî®macÁöÑÂêåÂ≠¶ÂèØ‰ª•‰∏ãËΩΩiTerm„ÄÇ</p>
<p>‰∏ãËΩΩÂÆâË£ÖÂêéÊâìÂºÄËΩØ‰ª∂„ÄÇÊ†πÊçÆ‰∏ãÂõæ‰∏≠ÁöÑÊåáÁ§∫ÔºåÊàë‰ª¨ÁÇπÂáª‰ºöËØùÊ°Ü‰∏≠ÁöÑÊñ∞Âª∫ÊåâÈíÆ„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssh-001.png" alt="111"></p>
<p>ÁÇπÂáªÊñ∞Âª∫ÊåâÈíÆÂêé‰ºöÂºπÂá∫‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨È¶ñÂÖàÂ°´ÂÜôIPÂú∞ÂùÄÔºåÁÑ∂ÂêéÁÇπÂáªÁ°ÆÂÆöÊåâÈíÆ„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssh-002.png" alt="333"></p>
<p>ÁÇπÂáªÁ°ÆÂÆöÊåâÈíÆÂêéÊàë‰ª¨‰ºöÂõûÂà∞‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨ÂèåÂáªÊâìÂºÄÊñ∞Âª∫‰ºöËØùÊàñËÄÖÁÇπÂáª‰∏ãÊñπËøûÊé•ÊåâÈíÆÊâìÂºÄÊñ∞Âª∫‰ºöËØù„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssh-003.png" alt="444"></p>
<p>ÂºÄÊñ∞Âª∫‰ºöËØùÂêé‰ºöÂºπÂá∫‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨ÁÇπÂáªÊé•ÂèóÂπ∂‰øùÂ≠òÊåâÈíÆ„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssh-004.png" alt="555"></p>
<p>ÁÇπÂáªÊé•ÂèóÂπ∂‰øùÂ≠òÊåâÈíÆ‰ºöÂºπÂá∫‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨È¶ñÂÖàÂ°´ÂÜôSSHËøûÊé•ÂØÜÁ†ÅÔºåÁÑ∂ÂêéÊâìÈí©ËÆ∞‰ΩèÂØÜÁ†ÅÔºåÊúÄÂêéÁÇπÂáªÁ°ÆÂÆöÊåâÈíÆ„ÄÇ</p>
<p>Â¶ÇÊûúÊèêÁ§∫ÈúÄË¶ÅËæìÂÖ•Áî®Êà∑ÂêçÔºàÁôªÂΩïÂêçÔºâÔºåÈÇ£‰πàËØ∑ËæìÂÖ•rootÔºÅ</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssh-005.png" alt="56"></p>
<p>ÁÇπÂáªÁ°ÆÂÆöÊåâÈíÆÂêéÊúçÂä°Âô®‰ºöËá™Âä®ËøûÊé•ÔºåËøûÊé•ÂÆåÊØïÂêéÊàë‰ª¨‰ºöÊù•Âà∞‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssh-006.png" alt="7"></p>
<h2 id="ÈÉ®ÁΩ≤shadowsocks"><a href="#ÈÉ®ÁΩ≤shadowsocks" class="headerlink" title="ÈÉ®ÁΩ≤shadowsocks"></a>ÈÉ®ÁΩ≤shadowsocks</h2><p>ËøôÈáåÈááÁî®ÁΩë‰∏äÊï¥ÁêÜÁöÑ‰∏ÄÈîÆÈÉ®ÁΩ≤ÁöÑÊñπÊ°à„ÄÇÁÆÄÂçïÊñπ‰æøÊìç‰Ωú„ÄÇ </p>
<p>È¶ñÂÖàÂ§çÂà∂‰ª•‰∏ãÂÜÖÂÆπÔºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://0123.cool/download/55r.sh &amp;&amp; chmod +x 55r.sh &amp;&amp; ./55r.sh</span><br></pre></td></tr></table></figure>
<p>ÁÑ∂ÂêéÂõûÂà∞XshellËΩØ‰ª∂ÔºåÂè≥ÂáªÈÄâÊã©Á≤òË¥¥ÔºåÁ≤òË¥¥ÂÆåÊØïÂêéÂõûËΩ¶ÁªßÁª≠„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssr-001.png" alt="i"></p>
<p>ÂõûËΩ¶ÂêéÁ≥ªÁªü‰ºöËá™Ë°å‰∏ãËΩΩËÑöÊú¨Êñá‰ª∂Âπ∂ËøêË°å„ÄÇÊ†πÊçÆ‰∏ãÂõæÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨‰æùÊ¨°ËæìÂÖ•SSRÁöÑÂêÑÈ°πËøûÊé•‰ø°ÊÅØÔºåÊúÄÂêéÂõûËΩ¶ÁªßÁª≠„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssr-002.png" alt="2"></p>
<p>ÂÆâË£ÖÂÆåÊàêÂêé‰ºöÂá∫Áé∞‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨Â∞ÜÁ∫¢Ê°ÜÂúà‰∏≠ÁöÑ‰ø°ÊÅØ‰øùÂ≠òÂà∞ËÆ∞‰∫ãÊú¨ÂÜÖ„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/ssr-003.png" alt="3"></p>
<h2 id="ÈÖçÁΩÆÈîêÊÑèÂä†ÈÄü"><a href="#ÈÖçÁΩÆÈîêÊÑèÂä†ÈÄü" class="headerlink" title="ÈÖçÁΩÆÈîêÊÑèÂä†ÈÄü"></a>ÈÖçÁΩÆÈîêÊÑèÂä†ÈÄü</h2><p>Ê†πÊçÆ‰∏ãÂõæÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨ÁªßÁª≠Â§çÂà∂‰∏ãÂàó‰ø°ÊÅØÔºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://0123.cool/download/rs.sh &amp;&amp; bash rs.sh install</span><br></pre></td></tr></table></figure>
<p>ÁÑ∂ÂêéÂõûÂà∞XshellËΩØ‰ª∂ÔºåÂè≥ÂáªÈÄâÊã©Á≤òË¥¥ÔºåÁ≤òË¥¥ÂÆåÊØïÂêéÂõûËΩ¶ÁªßÁª≠„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/rs-001-2.png" alt="4"></p>
<p>ÂõûËΩ¶ÂêéÁ≥ªÁªü‰ºöËá™Ë°å‰∏ãËΩΩËÑöÊú¨Êñá‰ª∂Âπ∂ËøêË°å„ÄÇÊ†πÊçÆ‰∏ãÂõæÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨‰æùÊ¨°ËæìÂÖ•ÈîêÈÄüÁöÑÂêÑÈ°πÈÖçÁΩÆ‰ø°ÊÅØÔºåÊúÄÂêéÂõûËΩ¶ÁªßÁª≠„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/rs-002.png" alt="5"></p>
<p>ÂõûËΩ¶ÂêéÔºåÁ≥ªÁªüËá™Âä®ÊâßË°åÂëΩ‰ª§ÂÆåÊàêÁ†¥Ëß£ÁâàÈîêÈÄüÂÆâË£ÖÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ</p>
<p><img src="https://www.vultr.net.cn/resources/images/rs-003.png" alt="6"></p>
<p>Êàë‰ª¨È¶ñÂÖàËæìÂÖ•Ôºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>
<p>ÁÑ∂ÂêéÂõûËΩ¶ÔºåXshell‰ºöÊñ≠ÂºÄËøûÊé•ÔºåÁ≥ªÁªü‰ºöÂú®1ÂàÜÈíüÂêéÈáçÂêØÂÆåÊØïÔºåÊ≠§Êó∂ÂèØ‰ª•ÂÖ≥Èó≠XshellËΩØ‰ª∂‰∫Ü„ÄÇ</p>
<p>Êê≠Âª∫ÊïôÁ®ãÂà∞Ê≠§ÁªìÊùüÔºå‰∫≤ÊµãÊàêÂäü„ÄÇÂ¶ÇÊûú‰∏çËÉΩËøûÊé•ÁöÑÔºåËØ∑Ê£ÄÊü•Ëá™Â∑±ÁöÑÊØè‰∏ÄÊ≠•Êìç‰Ωú„ÄÇ</p>
<!--ËßÜÈ¢ëend-->
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> vps </category>
            
        </categories>
        
        
        <tags>
            
            <tag> vps </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[sparkÊä•ÈîôÈõÜ]]></title>
      <url>https://stanxia.github.io/2017/10/30/spark%E6%8A%A5%E9%94%99%E9%9B%86/</url>
      <content type="html"><![CDATA[<h2 id="ÊúâËØùË¶ÅËØ¥"><a href="#ÊúâËØùË¶ÅËØ¥" class="headerlink" title="ÊúâËØùË¶ÅËØ¥"></a>ÊúâËØùË¶ÅËØ¥</h2><p>ÈíàÂØπ‰∏Ä‰∏™ËÄÅÊØõÁóÖÔºöÊúâ‰∫õÈîôËØØÂ±°ÁäØÂ±°ÊîπÔºåÂ±°ÊîπÂ±°ÁäØÔºåÊ≤°ÊúâÂºïËµ∑Ê†πÊú¨‰∏äÁöÑÊ≥®ÊÑèÔºåÊàñËÄÖÊ≤°Êúâ‰ªéÊ∫êÂ§¥ÁêÜËß£ÈîôËØØÂèëÁîüÁöÑÂ∫ïÂ±ÇÂéüÁêÜÔºåÂØºËá¥ÂÅöÂæàÂ§öÊó†Áî®Âäü„ÄÇ</p>
<p>ÊÄªÁªìÂéÜÂè≤ÔºåÂπ∂‰ªé‰∏≠Âê∏ÂèñÊïôËÆ≠ÔºåÂáèÂ∞ëÊó†Áî®ÂäüÈÄ†ÊàêÁöÑÊó∂Èó¥Êµ™Ë¥π„ÄÇÁâπÊ≠§Â∞Ü‰ªéÁõÆÂâçÈÅáÂà∞ÁöÑsparkÈóÆÈ¢òÂÖ®ÈÉ®ËÆ∞ÂΩïÂú®ËøôÈáåÔºåÊêûÊ∏ÖÊ•öÈóÆÈ¢òÔºåËá™‰ø°ÂêëÂâç„ÄÇ<br><a id="more"></a></p>
<h2 id="ÈóÆÈ¢òÊ±áÊÄª"><a href="#ÈóÆÈ¢òÊ±áÊÄª" class="headerlink" title="ÈóÆÈ¢òÊ±áÊÄª"></a>ÈóÆÈ¢òÊ±áÊÄª</h2><h3 id="ÈóÆÈ¢ò1Ôºöspark-hive-classes-are-not-found"><a href="#ÈóÆÈ¢ò1Ôºöspark-hive-classes-are-not-found" class="headerlink" title="ÈóÆÈ¢ò1Ôºöspark-hive classes are not found"></a>ÈóÆÈ¢ò1Ôºöspark-hive classes are not found</h3><h4 id="Ê¶ÇËø∞Ôºö"><a href="#Ê¶ÇËø∞Ôºö" class="headerlink" title="Ê¶ÇËø∞Ôºö"></a>Ê¶ÇËø∞Ôºö</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Unable to instantiate SparkSession with Hive support because Hive classes are not found.</span><br></pre></td></tr></table></figure>
<h4 id="Âú∫ÊôØÔºö"><a href="#Âú∫ÊôØÔºö" class="headerlink" title="Âú∫ÊôØÔºö"></a>Âú∫ÊôØÔºö</h4><p>Âú®Êú¨Âú∞Ë∞ÉËØïsparkÁ®ãÂ∫èÔºåËøûÊé•ËôöÊãüÊú∫‰∏äÁöÑÈõÜÁæ§ÔºåÂ∞ùËØïÊâßË°åsparkSQLÊó∂ÔºåÂêØÂä®‰ªªÂä°Â∞±Êä•Èîô„ÄÇ</p>
<h4 id="ÂéüÁêÜÔºö"><a href="#ÂéüÁêÜÔºö" class="headerlink" title="ÂéüÁêÜÔºö"></a>ÂéüÁêÜÔºö</h4><p>Áº∫Â∞ësparkSQLËøûÊé•hiveÁöÑÂøÖË¶ÅÂíå‰æùËµñjarÂåÖÔºåÊ∑ªÂä†Áõ∏Â∫îÁöÑ‰æùËµñÂåÖÂç≥ÂèØ„ÄÇ</p>
<h4 id="ÂäûÊ≥ïÔºö"><a href="#ÂäûÊ≥ïÔºö" class="headerlink" title="ÂäûÊ≥ïÔºö"></a>ÂäûÊ≥ïÔºö</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Âú®È°πÁõÆÔºèÊ®°ÂùóÁöÑpom.xml‰∏≠Ê∑ªÂä†Áõ∏ÂÖ≥ÁöÑspark-hive‰æùËµñjarÂåÖ„ÄÇ</span><br><span class="line">&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-hive_2.11 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spark-hive_2.11&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.1.1&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;provided&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line">ÈáçÊñ∞ÁºñËØëÈ°πÁõÆÔºèÊ®°ÂùóÂç≥ÂèØ„ÄÇ</span><br></pre></td></tr></table></figure>
<h3 id="ÈóÆÈ¢ò2ÔºöSpark-Local-Ê®°ÂºèÂÜô-HiveÔºåuser-xialinsheng"><a href="#ÈóÆÈ¢ò2ÔºöSpark-Local-Ê®°ÂºèÂÜô-HiveÔºåuser-xialinsheng" class="headerlink" title="ÈóÆÈ¢ò2ÔºöSpark Local Ê®°ÂºèÂÜô HiveÔºåuser=xialinsheng"></a>ÈóÆÈ¢ò2ÔºöSpark Local Ê®°ÂºèÂÜô HiveÔºåuser=xialinsheng</h3><h4 id="Ê¶ÇËø∞Ôºö-1"><a href="#Ê¶ÇËø∞Ôºö-1" class="headerlink" title="Ê¶ÇËø∞Ôºö"></a>Ê¶ÇËø∞Ôºö</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: org.apache.hadoop.security.AccessControlException: Permission denied: user=xialinsheng, access=WRITE, inode=&quot;/user/hive/warehouse/xls002&quot;:hadoop:supergroup:drwxr-xr-x</span><br></pre></td></tr></table></figure>
<h4 id="Âú∫ÊôØÔºö-1"><a href="#Âú∫ÊôØÔºö-1" class="headerlink" title="Âú∫ÊôØÔºö"></a>Âú∫ÊôØÔºö</h4><p>Spark Local Ê®°ÂºèËøûÊé•ÈõÜÁæ§ÔºåÂØπ Hadoop Êó†Êìç‰ΩúÊùÉÈôê„ÄÇ</p>
<h4 id="ÂéüÁêÜÔºö-1"><a href="#ÂéüÁêÜÔºö-1" class="headerlink" title="ÂéüÁêÜÔºö"></a>ÂéüÁêÜÔºö</h4><p>Spark Âú® Local Ê®°ÂºèÊó∂ÔºåÂ¶ÇÊûúÂú®Êú¨Âú∞Êú∫Âô®Ê≤°ÊúâËÆæÂÆö HADOOP_USER_NAME ÔºåÁ®ãÂ∫è‰ºö‰ΩøÁî®Êú¨Âú∞ÁöÑÊú∫Âô®Âêç‰Ωú‰∏∫ HADOOP_USER_NAME ÔºåËøôÂ∞±ÂØºËá¥Âú® Hadoop ÈõÜÁæ§‰∏≠Êó†Ê≥ïËØÜÂà´ËØ•Áî®Êà∑ÂêçÔºå‰ªéËÄåÊ≤°ÊùÉÈôêÊìç‰Ωú Hadoop „ÄÇ</p>
<p>Ëé∑Âèñ HADOOP_USER_NAME ÁöÑÊ†∏ÂøÉÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!isSecurityEnabled() &amp;&amp; (user == <span class="keyword">null</span>)) &#123;</span><br><span class="line">  String envUser = System.getenv(HADOOP_USER_NAME);</span><br><span class="line">  <span class="keyword">if</span> (envUser == <span class="keyword">null</span>) &#123;</span><br><span class="line">    envUser = System.getProperty(HADOOP_USER_NAME);</span><br><span class="line">  &#125;</span><br><span class="line">  user = envUser == <span class="keyword">null</span> ? <span class="keyword">null</span> : <span class="keyword">new</span> User(envUser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>‰ªéÊ∫êÁ†ÅÂèØÁü•ÔºåË¶ÅÊÉ≥Ëß£ÂÜ≥ËØ•ÈóÆÈ¢òÔºåÂè™Ë¶ÅÂú®Êú¨Êú∫ÁöÑÁéØÂ¢ÉÂèòÈáè‰∏≠Ê∑ªÂä† <em>HADOOP_USER_NAME = Hadoop</em> ÔºàÂØπ Hadoop ÈõÜÁæ§ÊúâÊìç‰ΩúÊùÉÈôêÁöÑÁî®Êà∑ÔºåÂÖ∑‰ΩìËßÜËá™Ë∫´ÊÉÖÂÜµËÄåÂÆö„ÄÇÔºâ<br><a href="http://www.huqiwen.com/2013/07/18/hdfs-permission-denied/" target="_blank" rel="noopener">ÂèÇËÄÉÂçöÂÆ¢ÔºöÁÇπÊàë‰∫ÜËß£Êõ¥Â§ö</a></p>
<h4 id="Ëß£ÂÜ≥Ôºö"><a href="#Ëß£ÂÜ≥Ôºö" class="headerlink" title="Ëß£ÂÜ≥Ôºö"></a>Ëß£ÂÜ≥Ôºö</h4><p>Âõ†‰∏∫ÊàëÁöÑÈúÄÊ±ÇÂè™ÊòØÂú®ÊµãËØïÁöÑÊó∂ÂÄô‰ºö‰ΩøÁî® Local Ê®°ÂºèËøûÊé•ÈõÜÁæ§‰∏äÁöÑ Hive Ë°®ÔºåÂõ†ËÄåÊàëÁöÑÂ§ÑÁêÜÊñπÂºèÂàôÊòØÂú®Á®ãÂ∫è‰ª£Á†Å‰∏≠ÊåáÂÆö Ôºö</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.setProperty(<span class="string">"HADOOP_USER_NAME"</span>,<span class="string">"HadoopÊúâÊùÉÈôêÁöÑÁî®Êà∑Âêç"</span>);</span><br></pre></td></tr></table></figure>
<h3 id="ÈóÆÈ¢ò3Ôºöjavax-servlet-FilterRegistration"><a href="#ÈóÆÈ¢ò3Ôºöjavax-servlet-FilterRegistration" class="headerlink" title="ÈóÆÈ¢ò3Ôºöjavax.servlet.FilterRegistration"></a>ÈóÆÈ¢ò3Ôºöjavax.servlet.FilterRegistration</h3><h4 id="Ê¶ÇËø∞Ôºö-2"><a href="#Ê¶ÇËø∞Ôºö-2" class="headerlink" title="Ê¶ÇËø∞Ôºö"></a>Ê¶ÇËø∞Ôºö</h4><p>Âú®idea‰∏äËøêË°åsparkÁ®ãÂ∫èÊó∂ÔºåÂá∫Áé∞‰ª•‰∏ã‰ø°ÊÅØÔºö</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spark error class &quot;javax.servlet.FilterRegistration&quot;&apos;s signer information does not match signer information of other classes in the same package</span><br></pre></td></tr></table></figure>
<p>Â¶ÇÂõæÔºö</p>
<p><img src="http://wx3.sinaimg.cn/mw1024/6aae3cf3gy1fd5a3imie6j21kw09oq96.jpg" alt="1"></p>
<h4 id="ÂéüÁêÜÔºö-2"><a href="#ÂéüÁêÜÔºö-2" class="headerlink" title="ÂéüÁêÜÔºö"></a>ÂéüÁêÜÔºö</h4><p>ÂåÖÂÜ≤Á™ÅÂØºËá¥„ÄÇ</p>
<h4 id="Ëß£ÂÜ≥Ôºö-1"><a href="#Ëß£ÂÜ≥Ôºö-1" class="headerlink" title="Ëß£ÂÜ≥Ôºö"></a>Ëß£ÂÜ≥Ôºö</h4><p>ÊåâÁÖß‰ª•‰∏ãÊ≠•È™§Êìç‰ΩúÔºö</p>
<ol>
<li>Âè≥ÈîÆÊ®°ÂùóÈ°πÁõÆ</li>
<li>Open Module Settings</li>
<li>ÈÄâÊã©Dependencies</li>
<li>ÊâæÂà∞ javax.servlet:servlet-api:xx</li>
<li>ÁßªÂä®Âà∞ÂàóË°®ÁöÑÊúÄÊú´Á´Ø</li>
<li>ApplyÔºåOk</li>
</ol>
<p>Â¶Ç‰∏ãÂõæÔºö</p>
<p><img src="http://wx4.sinaimg.cn/mw1024/6aae3cf3gy1fd5amqp9jcj21ak0hu425.jpg" alt="2"></p>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> spark </category>
            
        </categories>
        
        
        <tags>
            
            <tag> spark </tag>
            
            <tag> Êä•ÈîôÈõÜ </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[life]]></title>
      <url>https://stanxia.github.io/2017/10/29/life/</url>
      <content type="html"><![CDATA[<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<!--ËßÜÈ¢ëstart-->
<div id="dplayer0" class="dplayer" style="margin-bottom: 20px;"></div><script>var dplayer0 = new DPlayer({"element":document.getElementById("dplayer0"),"autoplay":0,"theme":"#FADFA3","loop":1,"video":{"url":"http://oliji9s3j.bkt.clouddn.com/Unbroken%20-%20Motivational%20Video.mp4","pic":"/images/pic/life.jpeg"}});</script><!-- dplayer used1 -->
<div class="note info"><p>Life is simple &amp;&amp; funny.</p></div>
<a id="more"></a>
<!--ËßÜÈ¢ëend-->
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> movie </category>
            
        </categories>
        
        
        <tags>
            
            <tag> movie </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[ÊùÇ‰π±Êó†Á´†]]></title>
      <url>https://stanxia.github.io/2017/10/29/%E6%9D%82%E4%B9%B1%E6%97%A0%E7%AB%A0/</url>
      <content type="html"><![CDATA[<div class="note info"><p>Êó∂ÂÖâÁöÑÊú∫Âô®ÔºåÂä†Ë∂≥È©¨ÂäõÂÜ≤ÂõûËøáÂéª</p>
<p>ÂéÜÂè≤ÁöÑÈïøÊ≤≥Ôºå‰∏ù‰∏ùÊ∂üÊº™Ê∂åÂêëÊú™Êù•</p></div>
<a id="more"></a>
<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<p>ÈÅì‰∏çÊ∏ÖÊ•öÔºåËØ¥‰∏çÊòéÁôΩÔºåÂ§úÊ∑±‰∫∫ÈùôÁöÑÊó∂ÂÄôÔºåËØ¥‰∏Ä‰∫õÊÉ≥Âà∞ÁöÑÂ∫üËØù„ÄÇÁ™óÂ§ñÈöÜÈöÜ‰ΩúÂìçÔºå‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÊú∫Âô®‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÊâßË°åÁùÄ‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÂä®‰Ωú„ÄÇÁ™óÂÜÖÂ±èÂπïÊöóÊ∑°ÔºåÂèåÁúºÂπ≤Ê∂©ÔºåÊÄùÁ¥¢ÁùÄÂÆáÂÆôÂ§ñÁöÑÂõûÊÉ≥„ÄÇ</p>
<p>Â∞èÊó∂ÂÄôÔºåÊúõÂêëÊòüÁ©∫ÔºåÈÇ£Êó∂ÁöÑÂ§©Á©∫Áæ§ÊòüÈó™ÁÉÅÔºåÂì™ÂÉèÁé∞Âú®ÔºåÂòøÔºå‰∫´Âèó‰∫ÜÂ§ßÂüéÂ∏ÇÁöÑÈúìËôπÔºåÂì™ÈáåÂÜçÁªô‰Ω†Êó†Âû†ÁöÑÊòüÁ©∫ÔºåË¥™„ÄÇ</p>
<p>Ë∫∫Âú®ËçâÂú∞ÔºåÂæÆÈ£éËΩªÊãÇËÑ∏È¢äÔºåÂàùÁßãÁöÑÂ§úÊôöÔºåÊúâÁÇπÂæÆÂáâ„ÄÇ</p>
<p>‰ª∞ÊúõÊòüÊ≤≥Ôºå‰πüÊÉ≥ÁùÄÂ§ñÈù¢ÁöÑ‰∏ñÁïåÔºåÂ§öÁ≤æÂΩ©„ÄÇ</p>
<p>Êè£Êë©ÁùÄÊó†Âû†ÁöÑÂÆáÂÆôÔºåÁøªËøáÂú∞ÁêÉÔºåË∂äËøáÈì∂Ê≤≥ÔºåÈ©∂ÂêëÊó†ÈôêÊãìÂ±ïÁöÑÊòüÈôÖÔºåË∫´‰∏äÁöÑÁÉ¶ÊÅºÔºåÂæÆÈ£é‰∏ÄÂêπÔºåÂÖ®Êï£‰∫Ü„ÄÇ</p>
<p>È£éËΩªÊãÇÔºåÈùôÈùôÊúõÁùÄÂ§©Á©∫ÔºåÊÄùËÄÉÁùÄÂ§ñÈù¢ÁöÑÊúãÂèãÊàñËÆ∏‰πüÂú®Ê∏¥ÊúõÁùÄËøúÊñπÁöÑÊàëÔºå‰º∏ÊâãËß¶Êë∏ËøôÂ§©Á©∫ÔºåÊäì‰∏ÄÊääÊòüËæ∞Ë¥™Â©™ÁöÑÊîæÂÖ•Ê¢¶„ÄÇ</p>
<p>Ê∑±ÈÇÉÁöÑÂ§úÁ©∫ÔºåÊúõ‰∏çÂ∞ΩÁöÑËøúÊñπÔºåÊòØÂÖâÊòé‰∏≠ÁöÑÊó†Â∞ΩÈªëÊöóÔºå‰πü‰ººÈªëÊöóÈÅìË∑ØÁöÑ‰∏ÄÊùü‰∫ÆÂÖâÔºåÊ¥íÂêëÊàëÔºåÊÄùÁª™Ë∑üÁùÄÈÅ®Ê∏∏ÔºåÂëµÔºå‰∏ñÁïå‰∏éÊàë‰∏áÂçÉÁæéÂ•ΩÔºåÊàë‰∏é‰∏ñÁïåÂç¥ÂøµÂøµÂè®Âè®ÔºåÁêêÁêêÁ¢éÁ¢éÔºåÈ∫ªÈ∫ªÁÉ¶ÁÉ¶„ÄÇÂøÉÈáåÊòØÊÉ≥ÊîæÈ£ûÁöÑ„ÄÇ</p>
<p>Â§úÊ∑±ÔºåËΩ¶Ê∞¥ÂëºÂï∏ÔºåËØâËØ¥ÁùÄÂüéÂ∏ÇÁöÑ‰∏çÁú†ÔºåÂèØÊàëÂõ∞ÔºåÂÖ≥Á™óÔºåÈó∑„ÄÇÂºÄÁ™óÔºåÂòøÔºå‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÊú∫Âô®ÂèàÂºÄÂßã‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÊâßË°å‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÂä®‰Ωú„ÄÇËøôÊ†∑ÁöÑÂ§úÊôöÔºåÁú†Èöæ„ÄÇ</p>
<p>Ê∑±Â§úÊÄùËÄÉÔºåÂÜô‰Ωú„ÄÇÂ§ú‰ΩøÊàëÂÆÅÈùôÔºåÂÜÖÂøÉÁöÑÂÆÅÈùôÔºåËøôÁôΩÂ§©ÁöÑÂ§ßÂüéÂ∏ÇÁªô‰∫à‰∏ç‰∫Ü„ÄÇÊÑüË∞¢Â§úÁöÑÈ¶àËµ†ÔºåÊé•Êî∂ËøôÊó†‰∏äÁöÑÂä†ÂÜïÔºåÈ©∞È™ãÂú®ÊÄùÁª™ÁöÑÊòüÁ©∫ÔºåÁóõÂø´ÔºåÁ≤æÂΩ©ÔºåÁ≤æÂΩ©„ÄÇ</p>
<p>ÊùÇ‰π±Êó†Á´†ÔºåÂëµÔºåÂèØ‰ª•„ÄÇ</p>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> think </category>
            
        </categories>
        
        
        <tags>
            
            <tag> think </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Èó≤Ë∞à]]></title>
      <url>https://stanxia.github.io/2017/10/28/%E9%97%B2%E8%B0%88/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="Êò•ÂõûÂ§ßÂú∞"><a href="#Êò•ÂõûÂ§ßÂú∞" class="headerlink" title="Êò•ÂõûÂ§ßÂú∞"></a>Êò•ÂõûÂ§ßÂú∞</h2></div>
<a id="more"></a>
]]></content>
      
        <categories>
            
            <category> think </category>
            
        </categories>
        
        
        <tags>
            
            <tag> think </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[Ëøô‰∏™ÊùÄÊâã‰∏çÂ§™ÂÜ∑]]></title>
      <url>https://stanxia.github.io/2017/10/28/%E8%BF%99%E4%B8%AA%E6%9D%80%E6%89%8B%E4%B8%8D%E5%A4%AA%E5%86%B7/</url>
      <content type="html"><![CDATA[<div class="note info"><p>Is life always this hard,or is it just when you‚Äôre a kid?<br>Always like this.</p></div>
<p><img src="http://oliji9s3j.bkt.clouddn.com/15114113550802.jpg" alt></p>
<a id="more"></a>
<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> movie </category>
            
        </categories>
        
        
        <tags>
            
            <tag> movie </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[mac‰ΩøÁî®Â∞èÊäÄÂ∑ß]]></title>
      <url>https://stanxia.github.io/2017/10/28/mac%E4%BD%BF%E7%94%A8%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<div class="note info"><h2 id="ÂâçË®Ä"><a href="#ÂâçË®Ä" class="headerlink" title="ÂâçË®Ä"></a>ÂâçË®Ä</h2></div>
<p>ËÆ∞ÂΩïmac‰ΩøÁî®ÁöÑÂ∞èÊäÄÂ∑ßÂíå‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇ‰∏çÂÆöÊúüÊõ¥Êñ∞ing<br><div class="note info"><h2 id="Êñá‰ª∂ÊçüÂùèÁöÑËß£ÂÜ≥ÂäûÊ≥ï"><a href="#Êñá‰ª∂ÊçüÂùèÁöÑËß£ÂÜ≥ÂäûÊ≥ï" class="headerlink" title="Êñá‰ª∂ÊçüÂùèÁöÑËß£ÂÜ≥ÂäûÊ≥ï"></a>Êñá‰ª∂ÊçüÂùèÁöÑËß£ÂÜ≥ÂäûÊ≥ï</h2></div><br>Âú®ÂÆâË£Ö‰∏Ä‰∫õÁΩë‰∏ä‰∏ãËΩΩÁöÑÂ∫îÁî®Êó∂ÔºåÂ¶ÇÊûúÊä•ÈîôÊòæÁ§∫Ôºö<font color="red">Êñá‰ª∂Â∑≤ÁªèÊçüÂùèÔºåËØ∑ÁßªËá≥Â∫üÁ∫∏ÁØì</font>„ÄÇËØ∑‰∏çË¶ÅÊÉäÊÖåÔºåÂÖ∂ÂÆûÂà´‰∏çÊòØÊñá‰ª∂ÁúüÁöÑÊçüÂùè‰∫ÜÔºåÊ†πÊú¨ÂéüÂõ†ÊòØ mac Á≥ªÁªüÁöÑÂÆâÂÖ®È™åËØÅÊú∫Âà∂ÔºåÈªòËÆ§ÊòØ‰∏çÂÖÅËÆ∏Êüê‰∫õÂ∫îÁî®ÁöÑÂÆâË£Ö„ÄÇË¶ÅÊÉ≥ÈÅøÂºÄËØ•ÂÆâÂÖ®ËÆ§ËØÅÔºåÂÖ∂ÂÆûÊñπÊ≥ï‰πüÂæàÁÆÄÂçïÔºåÂ¶Ç‰∏ãÔºö</p>
<p>Á¨¨‰∏ÄÊ≠•ÔºöÊâìÂºÄÁ≥ªÁªüÂÅèÂ•ΩËÆæÁΩÆ‰∏≠ÁöÑ <code>ÂÆâÂÖ®ÊÄß‰∏éÈöêÁßÅ</code> Ôºå<code>Ëß£ÂºÄÈîÅ</code>ÔºåÈÄâÊã© <code>‰ªª‰ΩïÊù•Ê∫ê</code> ÔºåÂÆåÊàê„ÄÇ</p>
<p>Á¨¨‰∫åÊ≠•ÔºöÂú®ËøôÈáåÂÖ≥ÈîÆÊòØÂæàÂ§öÊúãÂèãÊ≤°ÊâæÂà∞Ëøô‰∏™ <code>‰ªª‰ΩïÊù•Ê∫ê</code> Ôºå‰∏çË¶ÅÁùÄÊÄ•ÔºåÂí±‰ª¨Êé•ÁùÄÂæÄÊù•‰∏ãÔºåÊâìÂºÄ <code>ÁªàÁ´Ø</code>ÔºåËæìÂÖ•Â¶Ç‰∏ãÂëΩ‰ª§Ôºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure>
<p>ÊàêÂäüËæìÂÖ•‰ª•‰∏äÂëΩ‰ª§ÔºåÂÜçÂéªÊâßË°åÁ¨¨‰∏ÄÊ≠•Êìç‰ΩúÔºåÂÆåÊàêÔºåÁé∞Âú®ÂèØ‰ª•ÂéªÂºÄÂøÉÁöÑÂÆâË£ÖÂ∫îÁî®‰∫Ü„ÄÇ<br><img src="http://oliji9s3j.bkt.clouddn.com/aqwt.png" alt="aqwt"><br><a id="more"></a><br><div class="note info"><h2 id="ÁªàÁ´Ø-command-not-found-ÈóÆÈ¢ò"><a href="#ÁªàÁ´Ø-command-not-found-ÈóÆÈ¢ò" class="headerlink" title="ÁªàÁ´Ø command not found ÈóÆÈ¢ò"></a>ÁªàÁ´Ø command not found ÈóÆÈ¢ò</h2></div><br>Âú®ÂàùÊ¨°‰ΩøÁî® mac ÁªàÁ´ØÁöÑÊó∂ÂÄôÔºåÁªàÁ´ØÈô§‰∫ÜËÉΩÊâßË°å <code>cd</code> ÂëΩ‰ª§ÔºåÂÖ∂‰ΩôÁöÑË≤å‰ººÈÉΩ‰∏çÂæóË°åÔºå‰ºöÊä• <code>command not found</code> ÁöÑÈóÆÈ¢òÔºå‰∏ãÈù¢ÁªôÂá∫Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>ÂéüÂõ†ÔºöÂá∫Áé∞ËØ•ÈóÆÈ¢òÁöÑÂéüÂõ†ÊòØÊ≤°ÊúâÂ∞ÜËøô‰∫õÂëΩ‰ª§Ê∑ªÂä†ËøõÁéØÂ¢ÉÂèòÈáè‰∏≠ÔºåÂØºËá¥Á≥ªÁªüÊó†Ê≥ïËØÜÂà´„ÄÇ</p>
<p>Á¨¨‰∏ÄÊ≠•ÔºöÂÖàËÆæÁΩÆ‰∏¥Êó∂ÁöÑÁéØÂ¢ÉÂèòÈáèÔºå‰ª•‰ΩøÊàë‰ª¨ËÉΩÁªßÁª≠ËøõË°å‰∏ãÈù¢ÁöÑÊìç‰Ωú„ÄÇ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/bin:/usr/sbin:/bin:/sbin</span><br></pre></td></tr></table></figure>
<p>Á¨¨‰∫åÊ≠•ÔºöËøõÂÖ•Âà∞Áî®Êà∑ÁöÑÁõÆÂΩïÔºåÂπ∂ÊâìÂºÄÂ≠òÂÇ®ÁéØÂ¢ÉÂèòÈáèÁöÑÊñá‰ª∂ <code>.bash_profile</code> , <code>vi</code> ÊòØÊìç‰ΩúÊñá‰ª∂ÁöÑÂà©Âô®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊñá‰ª∂‰ºöÊñ∞Âª∫Êñá‰ª∂„ÄÇ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">vi .bash_profile</span><br></pre></td></tr></table></figure>
<p>Á¨¨‰∏âÊ≠•ÔºöÂú®ÊâìÂºÄÁöÑÊñá‰ª∂È°µÈù¢ÔºåËæìÂÖ• <code>i</code>  ÊâßË°åÁºñËæëÊìç‰ΩúÔºåÂèØÁúãÂà∞È°µÈù¢ÁöÑÂ∑¶‰∏ãËßíÊúâ‰∏™ <code>insert</code> ÁöÑÂ≠óÊ†∑Âç≥ÂèØÔºåÁÑ∂ÂêéÊ∑ªÂä†ÁéØÂ¢ÉÂèòÈáè‰ø°ÊÅØÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/usr/bin:/usr/sbin:/bin:/sbin</span><br></pre></td></tr></table></figure>
<p>Ê∑ªÂä†ÂÆå‰ª•‰∏ä‰ø°ÊÅØ‰πãÂêéÔºåÊåâ <code>esc</code> ÈîÆÈÄÄÂá∫ÁºñËæëÊ®°ÂºèÔºåÁÑ∂ÂêéËæìÂÖ• <code>:wq</code> ‰øùÂ≠òÂπ∂ÈÄÄÂá∫ÁºñËæëÈ°µÈù¢„ÄÇ</p>
<p>Á¨¨ÂõõÊ≠•Ôºö‰ΩøÂàöÊâçÁºñËæëÁöÑÁéØÂ¢ÉÂèòÈáèÊñá‰ª∂ÁîüÊïà„ÄÇ <code>source</code> ÂëΩ‰ª§Âç≥ÂèØ„ÄÇ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure>
<p>ÂÆåÊàê‰πãÂêéÂàôÂèØ‰ª•ÈáçÂêØ <code>ÁªàÁ´Ø</code> ÔºåÂπ∂ÊâßË°åÂ¶Ç <code>ls</code> Á≠â Linux Êìç‰ΩúÔºåÈ™åËØÅÊòØÂê¶ÊàêÂäü„ÄÇ<br><div class="note info"><h2 id="ÂºÄÂêØÂÖÖÁîµÊèêÁ§∫Èü≥ÔºàÁ±ª‰ºº‰∫éiphoneÂÖÖÁîµÊèêÁ§∫Èü≥ÔºåÈªòËÆ§ÂÖ≥Èó≠Ôºâ"><a href="#ÂºÄÂêØÂÖÖÁîµÊèêÁ§∫Èü≥ÔºàÁ±ª‰ºº‰∫éiphoneÂÖÖÁîµÊèêÁ§∫Èü≥ÔºåÈªòËÆ§ÂÖ≥Èó≠Ôºâ" class="headerlink" title="ÂºÄÂêØÂÖÖÁîµÊèêÁ§∫Èü≥ÔºàÁ±ª‰ºº‰∫éiphoneÂÖÖÁîµÊèêÁ§∫Èü≥ÔºåÈªòËÆ§ÂÖ≥Èó≠Ôºâ"></a>ÂºÄÂêØÂÖÖÁîµÊèêÁ§∫Èü≥ÔºàÁ±ª‰ºº‰∫éiphoneÂÖÖÁîµÊèêÁ§∫Èü≥ÔºåÈªòËÆ§ÂÖ≥Èó≠Ôºâ</h2></div><br>ÁªàÁ´ØËæìÂÖ•ÔºàÂºÄÂêØÔºâÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.PowerChime ChimeOnAllHardware -bool true; open /System/Library/CoreServices/PowerChime.app &amp;</span><br></pre></td></tr></table></figure>
<p>ÂÖ≥Èó≠Ôºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.PowerChime ChimeOnAllHardware -bool false;killall PowerChime</span><br></pre></td></tr></table></figure>
<div class="note info"><h2 id="ÈöêËóèÊñá‰ª∂Â§π"><a href="#ÈöêËóèÊñá‰ª∂Â§π" class="headerlink" title="ÈöêËóèÊñá‰ª∂Â§π"></a>ÈöêËóèÊñá‰ª∂Â§π</h2></div>
<p>Êõ¥Â•ΩÁöÑ‰øùÊä§Â≠¶‰π†ËµÑÊñôÔºåÊúâÊó∂ÂÄôÈúÄË¶ÅËÆæÁΩÆÈöêËóèÊñá‰ª∂Â§πÔºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv foldername .foldername</span><br></pre></td></tr></table></figure>
<div class="note info"><h2 id="Êü•ÁúãÈöêËóèÊñá‰ª∂Â§π"><a href="#Êü•ÁúãÈöêËóèÊñá‰ª∂Â§π" class="headerlink" title="Êü•ÁúãÈöêËóèÊñá‰ª∂Â§π"></a>Êü•ÁúãÈöêËóèÊñá‰ª∂Â§π</h2></div>
<p>macÊúÄÊñ∞ÁâàÊú¨Ôºö</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">‚åò‚áß.(Command + Shift + .)  #ÈöêËóè ÂíåÊòæÁ§∫</span><br></pre></td></tr></table></figure>
<div class="note info"><h2 id="Macbook-Pro-Áî®Â§ñÊé•ÊòæÁ§∫Âô®Êó∂ÔºåÂ¶Ç‰ΩïÂÖ≥Èó≠Á¨îËÆ∞Êú¨Â±èÂπïÔºåÂêåÊó∂ÂºÄÁõñ‰ΩøÁî®"><a href="#Macbook-Pro-Áî®Â§ñÊé•ÊòæÁ§∫Âô®Êó∂ÔºåÂ¶Ç‰ΩïÂÖ≥Èó≠Á¨îËÆ∞Êú¨Â±èÂπïÔºåÂêåÊó∂ÂºÄÁõñ‰ΩøÁî®" class="headerlink" title="Macbook Pro Áî®Â§ñÊé•ÊòæÁ§∫Âô®Êó∂ÔºåÂ¶Ç‰ΩïÂÖ≥Èó≠Á¨îËÆ∞Êú¨Â±èÂπïÔºåÂêåÊó∂ÂºÄÁõñ‰ΩøÁî®"></a>Macbook Pro Áî®Â§ñÊé•ÊòæÁ§∫Âô®Êó∂ÔºåÂ¶Ç‰ΩïÂÖ≥Èó≠Á¨îËÆ∞Êú¨Â±èÂπïÔºåÂêåÊó∂ÂºÄÁõñ‰ΩøÁî®</h2></div>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nvram boot-args="iog=0x0" #(10.10‰ª•ÂâçÁâàÊú¨)</span><br><span class="line">sudo nvram boot-args="niog=1" #(10.10Âèä‰ª•ÂêéÁâàÊú¨)Ëøô‰∏™ÂëΩ‰ª§ÁöÑÊÑèÊÄùÂ∞±ÊòØÂ§ñÊé•ÊòæÁ§∫Âô®Êó∂ÂÖ≥Èó≠Ëá™Ë∫´Â±èÂπïÔºåÈáçÂêØÁîüÊïà</span><br></pre></td></tr></table></figure>
<p>ÂºÄÊú∫ÊµÅÁ®ãÔºöËøû‰∏äÁîµÊ∫êÂíåÂ§ñÊé•ÊòæÁ§∫Âô®ÔºåÊåâÂºÄÊú∫ÈîÆÔºåÁ´ãÂç≥ÂêàÁõñÔºåÁ≠âÂ§ñÊé•ÊòæÁ§∫Âô®Êúâ‰ø°Âè∑Êó∂ÂºÄÁõñÂç≥ÂèØÂ¶ÇÊûúÊä•Èîô (Â∑≤Áü• 10.11/10.12 ‰ºöÊä•Èîô)<br>nvram: Error setting variable - ‚Äòboot-args‚Äô: (iokit/common) general error<br><div class="note info"><ol>
<li>ÈáçÂêØÔºåÊåâ‰Ωècommand + r ËøõÂÖ•ÊÅ¢Â§çÁïåÈù¢</li>
<li>Â∑¶‰∏äËßíËèúÂçïÈáåÈù¢ÊâæÂà∞ÁªàÁ´ØÔºåËæìÂÖ•nvram boot-args=‚Äùniog=1‚ÄùÔºåÂõûËΩ¶ÈóÆÈ¢òËß£ÂÜ≥„ÄÇÈáçÂêØÁîüÊïà</li>
</ol></div></p>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> mac </category>
            
        </categories>
        
        
        <tags>
            
            <tag> mac </tag>
            
        </tags>
        
    </entry>
    
    <entry>
      <title><![CDATA[photo]]></title>
      <url>https://stanxia.github.io/1999/10/27/photo/</url>
      <content type="html"><![CDATA[<!--ËØ∑ÂºÄÂßãË£ÖÈÄº-->
<div class="group-picture"><div class="group-picture-container"><div class="group-picture-row"><div class="group-picture-column" style="width: 33.333333333333336%;"><img src="http://oliji9s3j.bkt.clouddn.com/%E4%B8%80%E8%B7%AF%E9%80%86%E9%A3%8E.png" alt></div><div class="group-picture-column" style="width: 33.333333333333336%;"><img src="http://oliji9s3j.bkt.clouddn.com/%E5%86%8D%E8%A7%81mtv.png" alt></div><div class="group-picture-column" style="width: 33.333333333333336%;"><img src="http://oliji9s3j.bkt.clouddn.com/%E6%96%B0%E7%9A%84%E5%BF%83%E8%B7%B3.png" alt></div></div><div class="group-picture-row"><div class="group-picture-column" style="width: 50%;"><img src="http://oliji9s3j.bkt.clouddn.com/15120957661673.jpg" alt></div><div class="group-picture-column" style="width: 50%;"><img src="http://oliji9s3j.bkt.clouddn.com/15120957755072.jpg" alt></div></div><div class="group-picture-row"></div></div></div>
<!--ÂØπ‰∏çËµ∑ÔºåÂà∞Êó∂Èó¥‰∫ÜÔºåËØ∑ÂÅúÊ≠¢Ë£ÖÈÄº-->
]]></content>
      
        <categories>
            
            <category> photo </category>
            
        </categories>
        
        
        <tags>
            
            <tag> photo </tag>
            
        </tags>
        
    </entry>
    
  
  
</search>
