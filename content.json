{"meta":{"title":"‰∏úÁØ±‰∏ã","subtitle":"Èó≤Â∫≠ËàûÈîÆ","description":"ÊäÄÊúØÊîπÂèò‰∏ñÁïåÔºåÈòÖËØªÂ°ëÈÄ†‰∫∫Áîü","author":"ËàíÊúç‰∏ÄÂ§è","url":"https://stanxia.github.io"},"posts":[{"title":"ÁÅ´‰πãÊÑèÂøó","slug":"ÁÅ´‰πãÊÑèÂøó","date":"2022-10-27T00:54:07.000Z","updated":"2020-02-05T15:12:18.123Z","comments":false,"path":"2022/10/27/ÁÅ´‰πãÊÑèÂøó/","link":"","permalink":"https://stanxia.github.io/2022/10/27/ÁÅ´‰πãÊÑèÂøó/","excerpt":"","text":"","raw":null,"content":null,"categories":[{"name":"photo","slug":"photo","permalink":"https://stanxia.github.io/categories/photo/"}],"tags":[{"name":"photo","slug":"photo","permalink":"https://stanxia.github.io/tags/photo/"}]},{"title":"","slug":"Have Arthur Miller‚Äôs plays lost their edge","date":"2020-02-05T15:12:18.092Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2020/02/05/Have Arthur Miller‚Äôs plays lost their edge/","link":"","permalink":"https://stanxia.github.io/2020/02/05/Have Arthur Miller‚Äôs plays lost their edge/","excerpt":"","text":"title: Have Arthur Miller‚Äôs plays lost their edge date: 2019-04-16 23:16:48 tags: economist categories: economist The problem often lies in the staging, not the works themselves Prospero | Apr 15th 2019 ARTHUR MILLER did not aim to please his audiences. He reckoned that new ideas were a ‚Äúhumiliation‚Äù and an ‚Äúaffront‚Äù not only to people‚Äôs sensibilities but to their convictions, too. Like the ancient Greeks, Miller thought of drama as a ‚Äúcivic art‚Äù, a discipline that could contribute towards a state‚Äôs social and political progress. Unlike his contemporaries, he was not commercially minded. He said what no one else had the courage to, and his audiences would weep, or sit with their heads bowed. Irate patriots picketed theatres, and producers shied away from his work. Actors who appeared in his plays were shunned by their friends. Miller‚Äôs observations hold true in the 21st century, particularly about the fallacy of the American Dream. Many still think of material wealth and status as essential to happiness, as Willy Loman does in ‚ÄúDeath of a Salesman‚Äù. ‚ÄúThe American Clock‚Äù, which reflects on the Wall Street Crash and the Great Depression, is a reminder of the perils of short-termism. ‚ÄúThe Price‚Äù, set 30 years later, focuses on the longer-term repercussions. In ‚ÄúAll My Sons‚Äù Miller questions individualist thinking. ‚ÄúThe Crucible‚Äù examines the destructive allure of ideologies. Those insights, far from alienating today‚Äôs audiences, are now Miller‚Äôs selling points. Productions of his work have increased since his death in 2005, according to Susan Abbotson, the president of the Arthur Miller Society. He has been among the ten most-performed playwrights in American theatres for the past four years. Six productions of his work are currently being staged in London, an unusually high number for any playwright other than William Shakespeare. Tickets in the West End sell for as much as ¬£142 ($186), a sum Miller would no doubt have been uncomfortable with given his belief that theatre should be affordable. Does this popularity suggest that his plays have lost their subversive edge? Perhaps‚Äîtime can dull even radical ideas. It is no longer shocking to hear that humans are doomed to repeat their mistakes. But Miller‚Äôs fashionableness also suggests that directors have stopped confronting their audiences, and have started pandering to them. A recent production at the Union Theatre of ‚ÄúAn Enemy of the People‚Äù, Miller‚Äôs adaptation of Henrik Ibsen‚Äôs play, had an image of President Donald Trump on its poster. The action was set in a contemporary ‚Äúsmall-town Republican‚Äù community. Mayor Stockmann, a manipulative politician, dresses in a red suit, grinning and waving to chants of ‚ÄúUSA! USA!‚Äù Miller never assigned a political persuasion to the play‚Äôs characters‚Äîhe saw himself as a mediator, showing disparate groups what they have in common‚Äîbut the suggestion here was that only Republicans can succumb to populist rhetoric and misinformation. This version of ‚ÄúAn Enemy of the People‚Äù reinforced divisions, and allowed its audience to leave feeling smug. Productions can also be too reverent of the source material. ‚ÄúThe Price‚Äù (at Wyndham‚Äôs Theatre) strives for a historically accurate depiction of New York in the 1960s. The audience sees Gregory Solomon, a Russian-Jewish √©migr√©, blessing his meagre lunch‚Äîa hard-boiled egg‚Äîin Hebrew. When the play was first performed in 1968, such details invited audiences to reflect on their city‚Äôs recent past, particularly the emotional fall-out from the boom and busts of the ‚Äò20s and ‚Äò30s. Now heightened for comic effect, they seem alien and strange. Miller wanted his plays to be relatable, not preserved in aspic‚Äî‚Äúthere are museums for such activities,‚Äù he said‚Äîand so the setting must be familiar. In 2012 a production in Mumbai turned Solomon into a Muslim nonagenarian to great effect. Miller‚Äôs plays provoked because they were about the audience as much as for them. ‚ÄúThe Crucible‚Äù (pictured, at the Yard Theatre) opens with the townspeople of Salem dressed in the same style of clothing‚Äîbeanie hats, baggy t-shirts, cargo trousers‚Äîas the audience of this edgy North London theatre. They are invited to confront an uncomfortable truth: any society, no matter how educated or tolerant it believes itself to be, can submit to hysteria. Reactions ranged from brow-furrowed confusion to wide-eyed fascination. It is difficult for Miller‚Äôs plays to have the same effect today as when their themes were still unfamiliar, even taboo. Perhaps contemporary playwrights are better placed to touch modern nerves. But thoughtful stagings can continue to make audiences reflect on their own prejudices and shortcomings.","raw":null,"content":null,"categories":[],"tags":[]},{"title":"Why British wage growth is picking up at last","slug":"new page","date":"2020-02-05T00:24:00.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2020/02/05/new page/","link":"","permalink":"https://stanxia.github.io/2020/02/05/new page/","excerpt":"","text":"Ê¨¢ËøéüëèÈòîÂà´","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"}]},{"title":"A big week for American banks","slug":"A-big-week-for-American-banks","date":"2019-04-17T14:06:36.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2019/04/17/A-big-week-for-American-banks/","link":"","permalink":"https://stanxia.github.io/2019/04/17/A-big-week-for-American-banks/","excerpt":"","text":"Our weekly podcast on the markets, the economy and the world of business Podcasts | Apr 16th 2019 AMERICA‚ÄôS LARGEST banks reported earnings this week. Bank of America‚Äôs chief executive, Brian Moynihan, tells Anne McElvoy why he is bullish about the American economy and justifies his pay package. Also, can Goldman Sachs reinvent itself in the shadow of a scandal? And Tiger Woods‚Äôs stroke of genius‚Äîfor the business of golf. Simon Long hosts. Listen on: Apple Podcasts | Spotify | Google | Stitcher | TuneIn","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"India‚Äôs enormous election, and more from our daily podcast","slug":"India‚Äôs-enormous-election,-and-more-from-our-daily-podcast-","date":"2019-04-17T01:32:52.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2019/04/17/India‚Äôs-enormous-election,-and-more-from-our-daily-podcast-/","link":"","permalink":"https://stanxia.github.io/2019/04/17/India‚Äôs-enormous-election,-and-more-from-our-daily-podcast-/","excerpt":"","text":"Also, moderating social media and pole-dancing‚Äôs sporting ambitions Podcasts | Apr 15th 2019 THE WORLD‚ÄôS largest democratic exercise is under way in India. The prime minister, Narendra Modi, looks likely to win on a divisive platform of Hindu nationalism and aggression towards Pakistan, even if those are not voters‚Äô biggest concerns. Social-media companies are increasingly under the microscope of regulators; we take a look at the seemingly intractable problem of policing online content. And pole-dancing is trying to shed its seedy image. But can it develop into a global sport? Runtime: 21 min. Listen on: Apple Podcasts | Spotify | Google | Stitcher | TuneIn","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Lessons of the Mueller report","slug":"Lessons of the Mueller report","date":"2019-04-17T01:16:19.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2019/04/17/Lessons of the Mueller report/","link":"","permalink":"https://stanxia.github.io/2019/04/17/Lessons of the Mueller report/","excerpt":"","text":"Every political scandal sets a precedent for the next Mar 28th 2019 ROBERT MUELLER toiled over his report for two years, slightly longer than it took Herman Melville to write ‚ÄúMoby Dick‚Äù. Going by a summary provided by the attorney-general, though, the endings are the same: the whale gets away. The special counsel did not find that members of the Trump campaign conspired with the Russian government when it interfered in the 2016 election. The president is crowing. Democrats in Congress point out that Mr Mueller did not exonerate the president over obstruction of justice, which is also true. But make no mistake: this is as good an outcome as Donald Trump could have wished for. For the rest of his first term, and perhaps long into his second, he will be able to point to an exhaustive investigation and say he was right all along. The president thrives on grievance‚Äîagainst the media, the federal bureaucracy, or anyone he suspects of feeling superior. The outcome of the Mueller report will feed that. As a result, the silver harpoon that some Americans hoped would finish off Mr Trump may in fact strengthen him. A few lessons can be drawn from this episode. The first is not to confuse a legal process with a political one. Ever since Mr Trump won power, those Americans who could not bear the idea of him as president have dreamed of some non-political way to erase the result‚Äîof a jurist who could simply declare it all over. Mr Mueller seemed the likeliest candidate for this role, just as Kenneth Starr did in the campaign to remove Bill Clinton. In fact the fate of Mr Trump‚Äôs presidency will depend on politics, probably through the ballot box in 2020. Even those Democrats who cling to the fantasy of using Congress to impeach and remove him need to understand just how political this process would be. The fevered speculation during the two years of the Mueller investigation has often masked that. The other lesson Democrats should heed is to keep quiet about a legal process until it is over. That is worth bearing in mind as House committees under Democratic control pursue their own investigations, and courts and prosecutors look into allegations about Mr Trump and his family. Some of his opponents have prejudged these investigations. If it turns out that he did not commit the crimes they expect, they risk not just having distracted voters from the real agenda, but also giving him a boost. They should not make the same mistake twice. The Mueller investigation also holds lessons for those Republicans emboldened to seek vengeance for what they say was treason against their president. Thanks to Mr Mueller, the president‚Äôs campaign manager and personal lawyer are both heading to prison. His national security adviser pleaded guilty to lying to the FBI about his conversations with the Russian ambassador. Since Watergate, nothing like this has happened in American politics. By revealing duplicitous and corrupt behaviour among Mr Trump‚Äôs team, and by bringing prosecutions, Mr Mueller has helped cleanse political campaigning. The investigation also revealed that the president misled voters about his business interests in Russia. While the candidate was rewriting orthodox Republican Party policy towards Vladimir Putin, his company was trying to build a skyscraper in Moscow. His retrospective justification was that he might have lost the election, in which case it would have been a shame to give up on a deal. This conflict of interest did not amount to criminal collusion or conspiracy, in the special counsel‚Äôs view. It is nevertheless the sort of transgression that America‚Äôs political system would not have tolerated before Mr Trump came along. There is a last reason to be thankful to Mr Mueller. Each time America‚Äôs political system goes through an upheaval, it sets a precedent for how its institutions will handle the next one. Mr Mueller‚Äôs conduct was exemplary. If widespread misconduct once again occurs in an American presidential election, the expectation will be that a special counsel will investigate. Though Mr Trump repeatedly denounced the investigation as a witch-hunt, he did not fire the witch-finder. Mr Mueller was able to finish his work. For that, at least, Mr Trump deserves credit.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Binyamin Netanyahu a parable of modern populism","slug":"Binyamin Netanyahu a parable of modern populism","date":"2019-04-17T00:26:21.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2019/04/17/Binyamin Netanyahu a parable of modern populism/","link":"","permalink":"https://stanxia.github.io/2019/04/17/Binyamin Netanyahu a parable of modern populism/","excerpt":"","text":"In Israel, as elsewhere, politics is a perplexing mix of sound policy and the cynical erosion of institutions Mar 30th 2019 HIS DEVOTEES call him ‚ÄúThe Magician‚Äù, ‚ÄúThe Winner‚Äù and‚Äîthe ultimate accolade‚Äîmelekh yisrael, ‚ÄúKing of Israel‚Äù. Binyamin Netanyahu is Israel‚Äôs most gifted politician in a generation. He is his country‚Äôs second-longest-serving prime minister and, if he wins his fifth election on April 9th, may beat the record of the country‚Äôs founding father, David Ben Gurion. ‚ÄúBibi‚Äù, as he is known by all, is important beyond Israel, too, and not only because he speaks in perfect soundbites in both Hebrew and English and stands tall in today‚Äôs chaotic Middle East. He matters because he embodied the politics of muscular nationalism, chauvinism and the resentment of elites long before such populism became a global force. Mr Netanyahu counts among his friends and allies such nationalists as Donald Trump and Narendra Modi, not to mention European ones from Viktor Orban in Hungary to Matteo Salvini in Italy. The reign of King Bibi is thus a parable of modern politics: the rise of a talented politician and a long success based on a perplexing mixture of carrying out sound policy and cynically sowing division. As his power is threatened, he has turned to railing more loudly against the free press, the judiciary and shadowy forces. Now Bibi faces his greatest danger, in the form of criminal charges for corruption. In a different age he would have had to resign, and would now be defending himself as an ordinary citizen. But he is intent on remaining in office, and hopes that voters will yet save him from the policemen, prosecutors and judges. Israeli politics is turning into a contest between genuine achievement and demagoguery on one side and the rule of law on the other. All who care about democracy should watch closely. Little Israel commands attention because it has a big history: biblical romance and technological talent; the slaughter of the Holocaust and military prowess; energetic democracy and the long occupation of land claimed and inhabited by Palestinians. That said, Mr Netanyahu is a big figure in his own right (see article). He is more intelligent and capable than many populists, and can claim plenty of successes. By shrinking the bloated state he has helped Israel‚Äôs economy flourish, particularly its tech startups. With deft use of diplomacy and the mostly cautious use of military force, he has boosted security without being sucked into disastrous wars. Thanks to that and a shared hostility to Iran, relations with many Arab rulers are better than at any time in Israel‚Äôs history. Yet Mr Netanyahu is also worryingly dogmatic. He has paid lip service to peace with Palestinians but has taken no meaningful steps towards it. He has denounced any Western co-operation with Iran, even if it served to limit Iran‚Äôs nuclear programme. In Bibi‚Äôs pessimistic view, Israel is surrounded by wolves in sheep‚Äôs clothing and wolves in wolves‚Äô clothing. Israel can only manage conflicts, not solve them, he believes, so it must rely on an iron wall and the passage of time. Such ‚Äúanti-solutionism‚Äù risks storing trouble for the future. It increases the danger of war with Iran, or of its hardliners making a dash for nukes. The more Israel entrenches itself in the West Bank, the more its ‚Äútemporary‚Äù military occupation looks like the permanent subjugation of Palestinians under a separate law, even apartheid. This is made worse by the absence of America‚Äôs restraining influence. Mr Netanyahu has warmly embraced Mr Trump, who in turn has showered him with gifts, most recently his endorsement of Israel‚Äôs annexation of the Golan Heights. Might Mr Trump also back Israel‚Äôs annexation of bits of the West Bank, so denying Palestinians the hope of statehood? In the long run Bibi‚Äôs overt alignment with America‚Äôs Republicans and the evangelical right endangers the bipartisan pro-Israeli consensus in Washington that is the foundation of Israel‚Äôs security. But the greatest threat from Bibi‚Äôs reign has been at home. He has kept power not just on the strength of his record but also by seeking political advantage at the cost of eroding Israel‚Äôs democratic norms. In claiming that no peace with Palestinians is possible (or desirable), members of his right-wing coalition outbid each other to pass measures asserting Jewish supremacy. Mr Netanyahu pushed for an electoral pact with the hitherto untouchable far-right Jewish Power group, which wants to annex all the occupied territories and ‚Äúencourage‚Äù Arabs, including Israeli citizens, to leave. He has played us-and-them politics for so long that he has exacerbated the country‚Äôs many schisms‚Äîbetween Jews and Arabs, diaspora Jews and Israelis, western Ashkenazi and eastern Mizrahi Jews, and secular and religious ones. By casting himself as uniquely able to protect Israel against its enemies, he often treats those who say otherwise as wimps or traitors. Mr Netanyahu and his friends denounce as backstabbers any Jews who stand in their way. The free press peddles fake news. Political opponents, even the generals who pack the new Blue and White opposition party, are in cahoots with the Arabs. Bibi has flirted with the conspiracy theory beloved of anti-Semites that George Soros, a Jewish billionaire, is plotting to undermine nationalist governments around the world. The corruption charges against him, says Mr Netanyahu, amount to a ‚Äúblood libel‚Äù‚Äîa vile medieval canard that accused Jews of mixing the blood of murdered Christian children in their Passover bread. Yet the police chief who investigated the charges, and the attorney-general who ordered his indictment, were both hand-picked by Mr Netanyahu. His allies want a law that would grant a prime minister immunity from prosecution. Israel is an outlier among Western democracies. It was born as the state of the Jews; Zionism and Palestinian nationalism claim the same land. Israel must contend with a genuine ‚Äúother‚Äù and existential threats, not the bogeymen invented by populists elsewhere. The left, in disarray in many countries, suffered a body-blow in Israel because its attempt to negotiate a land-for-peace deal with Palestinians collapsed into bloodshed. Yet precisely because of these pressures, Israel offers an important test of the resilience of democracy. On April 9th Israeli voters face a fateful choice. Re-elect Mr Netanyahu and reward him for subverting the independence of Israel‚Äôs institutions. Or turf him out in the hope of rebuilding trust in democracy‚Äîand aspiring to be ‚Äúa light unto the nations‚Äù.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"America must stop Binyamin Netanyahu from annexing Palestinian land","slug":"America must stop Binyamin Netanyahu from annexing Palestinian land","date":"2019-04-17T00:18:03.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2019/04/17/America must stop Binyamin Netanyahu from annexing Palestinian land/","link":"","permalink":"https://stanxia.github.io/2019/04/17/America must stop Binyamin Netanyahu from annexing Palestinian land/","excerpt":"","text":"Some of his election pledges would kill the chance of a two-state solution Apr 11th 2019 MAKE IT OFFICIAL: henceforth, the Hebrew word for magician is Bibi. This is not just because Binyamin Netanyahu, Israel‚Äôs prime minister, appears to have won a record fifth term in office on April 9th. It is also because he pulled off the trick with corruption charges hanging over him, and in the face of a tough challenge from a new party packed with generals. Bibi, as he is known, made some parties vanish by taking their supporters, and conjured more seats for his own Likud party. He may soon surpass David Ben-Gurion, the country‚Äôs founding father, as Israel‚Äôs longest-serving leader (see article). His victory has come at a cost. His potion‚Äîmixing muscular nationalism with Jewish chauvinism and anti-elitism‚Äîhas helped poison Israel‚Äôs politics. He claims he is innocent, blaming the charges against him on shadowy plots and sowing distrust of institutions: the police, the judiciary and the media. Mr Netanyahu may do yet more lasting damage. In the final days of the campaign he vowed to annex parts of the West Bank beyond Jerusalem, something no previous leader has thought prudent. This risks killing any chance of peace based on a two-state solution‚Äîwhich involves the creation of a Palestinian state‚Äîand of thus turning Israel into a rogue nation. Fear not, say the optimists: Mr Netanyahu was just throwing out sweets to win over right-wing voters; he knows full well that annexation of the occupied territories would breach international law, cause an outcry in Europe and alienate Arab states that have been moving closer to Israel. The problem with this view is that it ignores the changing political and strategic landscape. Mr Netanyahu must still form a government, which means making concessions to his likely allies on the right, who feel more strongly about annexation than he does. The prime minister‚Äôs legal troubles‚Äîhe faces indictment on three cases of alleged corruption‚Äîleave him vulnerable. What will be the price when the Knesset considers a bill that would shield him from prosecution? If it is annexation, the process may begin with Maale Adumim, a large settlement on the outskirts of Jerusalem which the prime minister specifically promised to bring under Israeli sovereignty. But as Mr Netanyahu himself has said, it is unlikely to end there. America‚Äôs role has changed, too. For decades its presidents acted as a counterweight to Israeli annexationists (and gave cover to prime ministers fearful of standing up to them). President Donald Trump, though, has taken America‚Äôs finger off the scales. He has emboldened the right by recognising Israel‚Äôs annexation of the Golan Heights, which it captured from Syria in 1967, and moving the embassy to Jerusalem, a contested city. Mr Netanyahu made good use of these moves in his campaign. Even if he does not feel the need to go further by formally annexing territory, there is nothing to stop the creeping sort: the expansion of Jewish settlements and their infrastructure. That is happening with barely a peep from the world, let alone the divided Palestinians. The Trump administration says it is about to release a plan for the ‚Äúultimate deal‚Äù between Israelis and Palestinians. If this is to have any hope of success, or even of starting a process, the president must rule out unilateral annexation‚Äîwhether or not the Palestinians participate. If Israelis can grab land at a whim, they will have little incentive to negotiate. If Palestinians see parts of their future state taken away willy-nilly, neither will they. In the end, Israel faces a stark choice. Jews and Arabs count roughly equal numbers between the Mediterranean and the Jordan river. So Israel cannot permanently hold on to all the land without sacrificing either its Jewish majority or the ideal of a proper democracy that does not discriminate against Arabs. The more Mr Netanyahu abandons land-for-peace, the more the choice will be annexation-for-apartheid. That dilemma is something even Bibi cannot conjure away.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"‚ÄúFosse/Verdon‚Äù is a compelling examination of a creative partnership","slug":"‚ÄúFosse-Verdon‚Äù is a compelling examination of a creative partnership","date":"2019-04-16T23:54:24.000Z","updated":"2020-02-05T15:12:18.123Z","comments":true,"path":"2019/04/16/‚ÄúFosse-Verdon‚Äù is a compelling examination of a creative partnership/","link":"","permalink":"https://stanxia.github.io/2019/04/16/‚ÄúFosse-Verdon‚Äù is a compelling examination of a creative partnership/","excerpt":"","text":"Bob Fosse and Gwen Verdon were integral to some of the 20th century‚Äôs biggest musicals Prospero | Apr 16th 2019 ‚ÄúFOSSE/VERDON‚Äù, a new mini-series about two Broadway legends, could have been a simple paean to the magic of the stage. Bob Fosse (Sam Rockwell), a director, and his wife Gwen Verdon (Michelle Williams), a dancer, helped to create hits such as ‚ÄúDamn Yankees!‚Äù, ‚ÄúChicago‚Äù and ‚ÄúCabaret‚Äù. There is plenty of exquisite choreography, as legs kick in perfect time and dazzling costumes shimmer on twisting bodies, plus a sparkling rendition of ‚ÄúBig Spender‚Äù. Elsewhere, in a fantasy scene, Fosse twirls effortlessly down a corridor, surrounded by colourful dancers. But the show turns out to be a surprisingly moving examination of the characters of Fosse and Verdon, as well as their extraordinary careers. It opens with the build-up to ‚ÄúCabaret‚Äù, Fosse‚Äôs best-known film, which he directed and choreographed in 1971. The viewer is transported from Hollywood to damp, dark Munich, where it was shot, and the pressure is palpable. The film cannot afford to be ‚Äúanother $20m fiasco‚Äù, a producer warns, referring to one of Fosse‚Äôs previous misses. Fosse, in turn, takes it out on his crew. ‚ÄúI wanna see every muscle, every tendon,‚Äù he barks during exhausting rehearsals for ‚ÄúMein Herr‚Äù, one of the nightclub songs. After seeing the first cut, he moans to his assistant that ‚Äúit‚Äôs unwatchable‚Äù. On the night of the premiere, he paces in the auditorium rather than watching the film (it was a box-office triumph and would go on to win eight Oscars). His personal torment, and abject terror of failure, is clear. The programme dances back and forth in time. Title cards, such as ‚ÄúHollywood: 19 years left‚Äù and ‚ÄúGwen Verdon: 14 years after her last Tony award‚Äù, contextualise the scenes, which range across five decades. It allows the viewer to see patterns emerge. A flashback to Fosse‚Äôs childhood dance classes, for example‚Äî‚Äúdon‚Äôt show me the effort, Bobby, don‚Äôt show me the sweat. All they wanna see is that smile‚Äù‚Äîhelps to explain Fosse‚Äôs treatment of his own dancers. Depictions of his career highs jar with his descent into depression and alcoholism, as well as scenes of childhood abuse. His wild lifestyle of pills, sex, parties and more pills, is juxtaposed with images of Verdon feeding their daughter dinner and arranging child care. The effect is troubling, and powerful. Mr Rockwell‚Äôs thoughtful and pained performance elicits a surprising amount of sympathy for Fosse, even as he behaves appallingly. One excruciating scene shows a lead dancer refusing his sexual advances; she is subsequently fired. But the decision to give Verdon equal billing in the production was a wise one (the series was originally adapted from ‚ÄúFosse‚Äù, a biography written in 2013, but the producers realised that this would result in a narrow, uneven story). She emerges as a quiet kind of hero, helped by an elegant performance by Ms Williams. Verdon, as well as being Fosse‚Äôs long-suffering wife, was his creative collaborator. Her career peaked in the 1950s, when she won a string of Tony awards, but she gradually lost her hold over Hollywood and was eventually eclipsed by her husband. Yet when ‚ÄúCabaret‚Äù hits a crisis‚Äîthe endless rehearsals are ruining the shooting schedule, and the budget‚Äîit is Verdon that Fosse needs, begging her to come and join him in Germany. She sweeps in, taking charge of hair and make-up and fine-tuning the dancing. Where Fosse had used the dancers as moving props, Verdon makes them into fleshed-out characters with backstories. As such, ‚ÄúFosse/Verdon‚Äù reminds viewers that great feats are rarely accomplished alone (a theme that Lin-Manuel Miranda, an executive producer of the series, touched upon in ‚ÄúHamilton‚Äù, his own musical hit). Tributes to Tinseltown and Broadway, such as ‚ÄúLa La Land‚Äù, often focus on the glamour and romanticism of it all. ‚ÄúFosse/Verdon‚Äù is all the better for lifting the stage curtain to look at the people behind it. The series understands that while show business projects an image of human perfection, its masters are as flawed as they are brilliant. ‚ÄúFosse/Verdon‚Äù is showing on FX in America now. It will be released in Britain on BBC Two later this year","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Chevron is buying Anadarko for $33bn","slug":"Chevron is buying Anadarko for $33bn","date":"2019-04-16T23:16:56.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2019/04/16/Chevron is buying Anadarko for $33bn/","link":"","permalink":"https://stanxia.github.io/2019/04/16/Chevron is buying Anadarko for $33bn/","excerpt":"","text":"The deal signals greater consolidation in the shale business Apr 13th 2019 IN RECENT MONTHS a question has been hanging over the plains of Texas: what would be the next big shale deal? The logic for consolidation seemed clear. Texas‚Äôs Permian basin is America‚Äôs most productive oilfield, despite a patchwork of plots with hundreds of owners. Shale companies looked cheap, with investors sceptical about firms‚Äô ability to produce both oil and profits. On April 12th the curious got their answer. Chevron, a giant oil company, will pay $33bn in cash and shares to buy Anadarko, an independent producer with rich holdings in the Permian. It will also assume Anadarko‚Äôs $16bn debt. The deal transforms Chevron into the world‚Äôs second-biggest publicly traded oil-producer, behind only ExxonMobil. It is the latest sign of shale‚Äôs growing importance to the world‚Äôs biggest energy firms. Oil majors have arrived relatively late to fracking. Small, independent companies were first to set about coaxing oil from shale. They developed ways to drill not just down but horizontally, then assault shale with water and sand until the rock gave up its hydrocarbon riches. But the industry titans have warmed to the idea. Unlike, say, a complex deepwater project in a distant jurisdiction, shale offers quick drilling times, predictable cashflow and favourable American regulation. Smaller companies have often fracked frenetically, eager to reinvest proceeds and chase growth. Too frenetically at times; some took on more debt than they could handle. Giant companies have less experience with the technique. But their diversified revenue and larger balance-sheets allow them to accumulate acreage even as they drill at a more measured pace. Last year BP, a British firm, paid $10.5bn to acquire the shale assets of BHP, a giant miner. ExxonMobil and Chevron have placed the biggest bets. Chevron‚Äôs shale holdings were vast even before the Anadarko deal. The company controlled 1.7m acres (690,000 hectares) in two of the Permian‚Äôs most productive regions. In March ExxonMobil said it expects production in the Permian to exceed 1m barrels a day within five years. With Anadarko, Chevron‚Äôs Permian production may be 60% higher than ExxonMobil‚Äôs, according to Rystad Energy, a research firm. Anadarko gives Chevron more than just shale. Its assets include a liquefied-natural-gas project in Mozambique and holdings in the Gulf of Mexico. Still, Anadarko‚Äôs Permian plots would have been the main lure. With them, Chevron can drill more wells, more efficiently. Adjacent plots will let the company move farther sideways through the rock and simplify the transport of equipment and other inputs, such as the millions of gallons of water required to wrest oil from each well. Chevron reckons that the deal will bring $2bn in savings, all told. Some investors hope that, as shale companies consolidate, they will mature and their performance will improve. Independent producers may now bulk up, following the lead of Concho Resources. Last year it bought RSP Permian, a rival, for $9.5bn. Meanwhile, the supermajors‚Äô holdings look poised to expand. ExxonMobil has said it would consider additional shale acquisitions. Royal Dutch Shell is rumoured to be weighing the purchase of Endeavor Energy, whose headquarters sit in the heart of the Permian. Not all investors are sold on the attractions of shale. Follow This, a group of them concerned about climate change, expressed disappointment that Chevron would spend $33bn on Anadarko, rather than on renewable energy. At its annual meeting next month, Chevron‚Äôs shareholders will vote on a resolution that would compel the company to disclose how it can reduce its carbon footprint in line with the Paris climate agreement. Chevron insists that it is ‚Äúpositioned to win in any environment‚Äù. An environmentally friendlier one may be an exception.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Tiger Woods wins his fifth Masters in a comeback for the ages","slug":"Tiger Woods wins his fifth Masters in a comeback for the ages","date":"2019-04-16T23:16:55.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2019/04/16/Tiger Woods wins his fifth Masters in a comeback for the ages/","link":"","permalink":"https://stanxia.github.io/2019/04/16/Tiger Woods wins his fifth Masters in a comeback for the ages/","excerpt":"","text":"But if history is any guide, he is running out of time to beat Jack Nicklaus‚Äôs 18 major victories Game theory | Apr 15th 2019 JUST A YEAR and a half ago, the most common question about Tiger Woods‚Äôs future was not whether he would win another major tournament, but whether he would ever play competitively again. After an unprecedented run of glory in which he won 14 majors in just over 12 years, Mr Woods saw his career derailed by an infidelity scandal, injuries and over-use of prescription drugs. Already on the wrong side of 40 years old, Mr Woods‚Äôs legacy appeared to be fixed: a star that burned brighter than any other but was extinguished far too soon, a victim of the hubris caused by too much success at too young an age. That was then. On April 14th Tiger unleashed his roar once again‚Äîliterally. After winning the Masters Tournament for the fifth time and a major championship for the 15th, he screamed at the top of his lungs while lofting his arms and putter high into the air, before embracing his caddy, family members and vanquished rivals as he seemed to fight back tears of joy. Much like the broader narrative of his career, it was also the first time he had come from behind to secure a major: in all of his previous victories, he had led at the start of the final round. Mr Woods‚Äôs title is not only a personal triumph, but also a welcome boon to golf as a game. Only the presence of its biggest star atop the leaderboards enables it to compete with the most popular team sports for viewership and cultural relevance. No one would confuse the play of the grizzled, 43-year old Mr Woods with that of the 21-year-old phenom who won the Masters by a record 12 strokes in 1997. Whereas the young Mr Woods was so dominant that he barely seemed to be playing the same sport as his competitors were, this version seemed all too human. He frequently sprayed drives into the trees and misfired on straightforward putts, turning birdies into pars and pars into bogeys. He trailed by four strokes after the first round, by one at the cut and by two on Sunday morning. But just as Mr Woods has learned how to deal with adversity in his personal life, so too has he mastered how to limit the cost of mistakes on the golf course. Time and again, Mr Woods found a window through trees or a path around hazards, recovering from an errant tee shot with a pinpoint approach. (His driving accuracy of 62.5% was among the worst in the tournament, while his 81% rate of reaching greens in regulation was the best.) On the par-four ninth hole on the final day, his second shot landed at the far end of a long, downward-sloping green‚Äîa predicament in which the younger Mr Woods rarely found himself, where escaping with a par would feel like an eagle. Now a wily veteran, Mr Woods uncorked a lag putt for the ages. He aimed the ball on a line far above the straight path to the hole, and barely tapped it despite the vast distance. It almost stopped short as it approached the ridge‚Äîand then veered hard towards the hole, gaining speed as it plunged downhill, before coming to rest just inches from its target. The stroke he saved after tapping in for par wound up constituting his entire margin of victory, encapsulating the story of the tournament: unlike his rivals, Mr Woods refused to beat himself. Even after that par save, Mr Woods trailed Francesco Molinari by a stroke‚Äîa deficit that doubled after he bogeyed the tenth hole. EAGLE, The Economist‚Äôs statistical win-probability model for golf tournaments, gave Mr Molinari a 65% chance of victory heading into the 12th hole, while Mr Woods languished at 16% (see chart). Just last July, Mr Molinari got the better of Mr Woods, when they were in the same playing group on the final day of the Open Championship in Scotland and Mr Molinari went on to win. This time, however, Mr Molinari succumbed to the demons that have undone so many a contender on the back nine on Sunday at Augusta National Golf Club. He left his tee shot short on the par-three 12th, seeing it disappear into the waters of Rae‚Äôs Creek, and then failed to make his putt for bogey. Mr Woods, in contrast, played it safe and made par. Three holes later, Mr Molinari saw his hopes of trying on his first Masters victor‚Äôs green jacket dashed for good. A poor drive on the par-five 15th forced Mr Molinari into an awkward approach shot, which bounced off a tree and wound up in the water as well. Mr Woods, meanwhile, displayed the steely resolve that made him an icon a decade ago. On the same hole that finished Mr Molinari, Mr Woods secured a birdie with a dead-centre drive, a meticulous approach to the green, and a clean two-putt. And on the next hole, the par-three 16th, he delighted the fans with a taste of his magic of yesteryear. His high-arcing tee shot first hit the green beyond one-putt range. But it then rolled sideways towards the hole like a heat-seeking missile, until he was assured of a tap-in birdie and a two-stroke lead. Even then, Mr Woods wound up needing stumbles from his rivals to compensate for his own. Both Dustin Johnson, who by most statistical measures is currently the best player in the world, and Brooks Koepka, who had won three of the past six majors he had entered, reached the 18th green at 12 under par with achievable, if challenging, birdie putts. Both missed‚Äîbarely, in Mr Johnson‚Äôs case. That wound up making the difference in the tournament, as Mr Woods muffed both his approach shot on the 18th and his putt for par. No one dreams about winning the Masters with a bogey, but it was a fitting end to a gritty triumph. Must it be St Nicklaus? Mr Woods‚Äôs victory gives him a long-overdue 15th major title, leaving him three behind Jack Nicklaus‚Äôs all-time record of 18. Mr Nicklaus won his last at the age of 46, suggesting that Mr Woods has at least three more years to bridge the gap. Now that Mr Woods has rediscovered his form, might golf‚Äôs most treasured record now be within reach? The afterglow of Mr Woods‚Äôs win is probably not the best time to preach faith in statistical golf models. EAGLE gave him just a 2.2% chance of winning the Masters, less than half the probability implied by pricing in betting markets. Although such odds might appear uncommonly long, they were no knock on Mr Woods‚Äôs game: most major victors start the tournament with less than a one-in-20 chance. In EAGLE‚Äôs estimation, Mr Woods was playing sufficiently well before the Masters began that he was already one of the top ten players in the world. Instead, the daunting odds were merely a reflection of how much good fortune is required, in addition to elite skill, to beat a field containing all of the world‚Äôs best players over just 72 holes. Even Mr Johnson, whom the model anointed as the favourite and finished tied for second, had less than a 10% shot to win. The brutal arithmetic of large golf tournaments suggests that if Mr Woods is now a top-five player, he would be expected to win another major roughly once every 3.5 years. As a ‚Äúmere‚Äù top-ten competitor, that frequency would fall to around one every six years. From this perspective, Mr Nicklaus should only feel threatened if Mr Woods manages to regain his former status as the unquestioned world number one despite his advanced age. That would mean following up this Masters victory with a steady drumbeat of scores in the 60s and finishes in the top 5 and 10 of PGA Tour events. (Mr Woods‚Äôs Masters performance alone has improved EAGLE‚Äôs estimate of his expected score on a typical course by over a tenth of a stroke per round). Otherwise, the smart money will probably remain on Mr Woods‚Äôs major-championship tally remaining at 15. However, statistical models rely on extrapolating historical patterns into the future. And since no one has ever played golf as well as Mr Woods did at his best, there is no precedent on which to train a model for the second act of such a career. As the crowds roared following his every birdie and his rivals‚Äô every misstep, distracting players two or three holes away, a victory that was still statistically improbable already felt inevitable in the heart of every fan who had seen Mr Woods in his heyday. Much to the delight of the lords of golf, even the most casual of observers will make sure to tune in the next time Mr Woods strides to the tee box with a major on the line.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"A new era at Goldman Sachs starts in the shadow of a scandal","slug":"A new era at Goldman Sachs starts in the shadow of a scandal","date":"2019-04-16T23:16:54.000Z","updated":"2020-02-05T15:12:18.077Z","comments":true,"path":"2019/04/16/A new era at Goldman Sachs starts in the shadow of a scandal/","link":"","permalink":"https://stanxia.github.io/2019/04/16/A new era at Goldman Sachs starts in the shadow of a scandal/","excerpt":"","text":"Can the bank reinvent itself? Apr 15th 2019 NO ONE IS more aware of the value of a brand than Goldman Sachs. The investment bank, founded in 1869, has advised the biggest and best American companies on the value of theirs for the past 150 years. It helped F.W. Woolworth, a pioneering department store, with its initial public offering in 1912. It took Ford and Disney public in the 1950s, helped Amazon buy Whole Foods in 2017 and will take Uber public later this year. Yet these are troubling times for its own brand, tarnished by association with a fraud-ridden Malaysian state-run fund, 1MDB, and hurt by the bank‚Äôs failure to adapt after the global financial crisis. These issues were echoed in the firm‚Äôs first-quarter results, released on April 15th. Revenues came in below expectations‚Äî13% lower than for the first quarter of 2018‚Äîlargely as the result of lower trading revenues. The share price fell more than 3% and the earnings call was peppered with analysts asking questions about 1MDB. The first task for David Solomon, who took over as chief executive last October, is to clean up Goldman‚Äôs reputation. In 2012 and 2013 it helped 1MDB raise $6.5bn across three bond offerings, earning $600m in fees‚Äîway above the norm for such work. American and Malaysian authorities have alleged that much of the money raised was stolen in a scheme masterminded by Jho Low, a Malaysian financier. He has denied wrongdoing (and vanished). Last November America‚Äôs Department of Justice (DoJ) announced that a former senior partner at Goldman, Tim Leissner, had pleaded guilty to conspiracy to launder money and to violate foreign bribery laws. And they indicted Mr Low and another former Goldman banker, Roger Ng, who has also denied wrongdoing. Goldman claims that Mr Ng and Mr Leissner, who transferred embezzled funds into his personal bank account, kept the bank in the dark about their actions. But criminal charges have been filed against the firm in Malaysia. Though Goldman is contesting the case, it is spooking shareholders, who worry about both onerous fines and what it implies about oversight at the bank. Since November its share price has under-performed an index of other bank stocks by 10.3 percentage points, suggesting that the scandal may have wiped as much as $9.1bn off its value. It is against these headwinds that Mr Solomon must try to convince investors that Goldman can reinvent itself. Its peers have already digested the fact that Wall Street‚Äôs traditional model, in which banks advise on huge corporate deals and make bold trades on their own behalf, has become less profitable. According to Michael Spellacy of Accenture, a consultancy, 90% of the economic profit made in the capital-markets industry is now earned on the buy side‚Äîthat is, by those who manage assets or investments‚Äîand just 10% from sell-side investment-banking activities. A decade ago, he says, that split was closer to 50-50. Goldman‚Äôs slowness in reacting to these structural changes has allowed its competitors to catch up. In 2010 its return on equity (ROE) was 11%, easily beating the 8% average for ‚Äúbulge-bracket‚Äù American investment banks, a group including JP Morgan and Morgan Stanley. But last year that group averaged an ROE of 11.2%, placing Goldman, at 12%, near the middle of the pack. And investors are becoming concerned about the way it earns its returns. Volatile profits, like those from trading businesses, mergers and acquisitions, are considered less valuable than steady fee-based income, for example from wealth management. In 2016 Mr Solomon‚Äôs predecessor, Lloyd Blankfein, took the first steps towards a new strategy by launching a consumer bank, Marcus. In 2017 Goldman announced a target of increasing yearly revenues by $5bn by 2020. But the focus on expanding consumer lending, which offers a relatively low return on investment, did not impress shareholders. They have had a rough ride. Holding shares in the firm since 2010 would have earned just 13% (without adjusting for inflation), compared with an average of 71% for its bulge-bracket peers and 152% for the S&amp;P 500. Goldman continues to trade at just 0.9 times its tangible book value, a measure of the money that might be returned to shareholders if it were liquidated. The average ratio of price to tangible book value for a bulge-bracket bank is 1.15. As far as 1MDB is concerned, the big worry for shareholders is the size and scope of the penalties. A large fine is all but inevitable. It could be based on the $600m Goldman earned from the bond issuance‚Äîor the $2.7bn American authorities say was stolen from the proceeds. That will be multiplied by anything up to four, depending on the degree to which the firm is found culpable. That Goldman is co-operating with the DoJ will bring the multiplier down; if the DoJ decides the firm‚Äôs oversight of compliance procedures was inadequate, it will be towards the higher end. Steven Chubak of Wolfe Research, an equity-research firm, thinks the total will be somewhere between $1bn and $4bn. When it comes to the required shift in strategy, however, Goldman‚Äôs efforts may soon start to bear fruit. Its expansion into consumer businesses is continuing apace. In 2018 it acquired Clarity Money, a personal-finance app. Last month Tim Cook, Apple‚Äôs chief executive, announced that it will launch a credit card with Goldman this summer. When Marcus launched it was as a consumer lender; since then it has added deposit-taking. Though it offers market-leading rates, deposits are still a cheap source of funding. In 2012 just 8% of Goldman‚Äôs funding came from deposits. Last year that share had risen to 19%. If it can keep replacing wholesale funding with deposits at the pace of the past five years, says Mr Chubak, it will have reduced funding costs by $500m by 2022. The consumer space is not the only place Goldman is rolling out new technology. More than a quarter of Goldman‚Äôs employees are now engineers, says Heather Kennedy Miner, the bank‚Äôs head of investor relations. The firm has deployed a new platform, called Marquee, for institutional investors and will expand into corporate cash management in 2020, which will further increase low-cost deposits. The firm also seems to be planning an overdue restructuring of its fixed-income, currency and commodities (FICC) business. Revenues earned from FICC have fallen from $13.6bn in 2010, accounting for more than a third of Goldman‚Äôs revenues, to $5.9bn now, or just a sixth. Last October Stephen Scherr, Goldman‚Äôs newly appointed chief financial officer, announced a review of all its business lines, which will be published early next year. In February the Wall Street Journal reported that the commodities business would be scaled back. (Mr Scherr emphasises that Goldman has no plans to abandon commodities entirely, as some of its competitors, including JP Morgan and Morgan Stanley, have.) In March Mr Solomon announced plans to cut the number of staff in sales and trading by 5% this year. Its new strategy will mean Goldman is competing on less familiar territory. Consumer deposits and corporate cash management are competitive markets that JP Morgan and Bank of America have dominated for decades. But they are also huge markets. Even a small slice could have a big impact on Goldman‚Äôs profits, says Mr Scherr. Compared with established banks, Goldman is able to develop and deploy new technology easily; but unlike startup digital competitors, its innovations are backed by a $925bn balance-sheet. America‚Äôs financial-services industry has been slow to adapt to technological change. An old bank with a new direction might be well-placed to disrupt it.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"A terrible blaze devastates Notre Dame cathedral","slug":"A terrible blaze devastates Notre Dame cathedral","date":"2019-04-16T23:16:53.000Z","updated":"2020-02-05T15:12:18.077Z","comments":true,"path":"2019/04/16/A terrible blaze devastates Notre Dame cathedral/","link":"","permalink":"https://stanxia.github.io/2019/04/16/A terrible blaze devastates Notre Dame cathedral/","excerpt":"","text":"Stunned Parisians watch centuries of history dissolve in flames Apr 15th 2019 THEY GATHERED on the bridges over the Seine to watch in disbelief. Some Parisians were in tears; most watched in eerie silence. The devastating fire that broke out in the wood-timbered roof of the gothic cathedral of Notre Dame in the early evening of April 15th rapidly spread before their eyes, consuming the central spire and defeating the efforts of fire-fighters to bring the flames under control. President Emmanuel Macron, spoke for many across France when he tweeted that he was witnessing ‚Äúpart of us burn.‚Äù By midnight in Paris the worst seemed to be over. The main stone structure appeared to have been saved, and the prompt action of hundreds of fire-fighters had rescued many works of art and relics from the burning building. But as well as the medieval oak-beamed roof and the later-built spire, the damage to the interior has been immense. The 850-year-old edifice had survived war, revolution and Nazi occupation, an emblem of resistance in the face of a constantly disrupted history. It was the site of Napoleon‚Äôs coronation in 1804 and the inspiration for literary works, most famously Victor Hugo‚Äôs ‚ÄúThe Hunchback of Notre-Dame‚Äù, and one of the city‚Äôs most iconic landmarks, visited by 13m tourists each year. Notre Dame was at once a living place of worship for the French Catholic church and the property of the French secular state: a symbol in itself of the country‚Äôs history and its present, in all its glorious contradictions. The heartbreak felt by many as they watched nine centuries of history dissolve in flames was profound. Bertrand Delano√´, the former mayor of Paris, called the cathedral a ‚Äújewel of the heritage of humanity‚Äù. Mr Macron, who had been preparing to give a televised address to the nation at the end of his ‚Äúgreat national debate‚Äù, cancelled the speech and went straight to the site of the disaster. It will take time and a full investigation before the exact cause of the fire is established. Early reports from the Paris fire service suggested that it was not a work of arson but an accident that broke out in the central roof, where building works were underway to renovate the 19th-century spire. But already questions are being asked about disaster-planning for a monument of this scale and national importance, situated amid narrow streets on an inaccessible island in the centre of the city. The search for somebody to blame will absorb France for weeks and months to come. The public prosecutor has opened an inquiry. When shock and disbelief turns to anger, many will want to know exactly what precautions were taken by those working on the renovation, and why it was so difficult for fire-fighters to stop the blaze spreading. Five hundred were deployed, but it took them ages to get there. Some will look to Anne Hidalgo, the mayor of Paris, who tweeted that she had ‚Äúno words for the pain‚Äù she felt. Others still will look to Mr Macron. The unpopular president already had his hands full dealing with the gilets jaunes (yellow jackets) protests, which have dragged on since last November. This evening was supposed to mark the moment that he reconnected with the French people, and put his reputation for haughty rule behind him. Now he has a different challenge. Paris, and all of France, is hurting. The tragic devastation of Notre Dame will touch the country for a long time‚Äîand put the head of state‚Äôs capacity to touch the French with the right words of consolation to a severe test. He made a good start last night, visiting the scene and pledging that ‚Äúwe will rebuild‚Äù the cathedral. It is a task that will take many, many years.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Right-wing populist parties are polling well in Britain","slug":"Right-wing populist parties are polling well in Britain","date":"2019-04-16T23:16:52.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2019/04/16/Right-wing populist parties are polling well in Britain/","link":"","permalink":"https://stanxia.github.io/2019/04/16/Right-wing populist parties are polling well in Britain/","excerpt":"","text":"Recent opinion surveys show the new Brexit Party is gathering support Apr 15th 2019 BRITAIN‚ÄôS NEW Brexit party has gathered support with remarkable speed. Formed in January 2019, it is already registering double-digit support in opinion polls and has nearly caught up with the UK Independence Party (UKIP), from which it split. The new party is headed by Nigel Farage, the former leader of UKIP, who successfully pushed the Conservative party to call a referendum on Britain‚Äôs membership of the European Union in 2016‚Äîand helped the Leave campaign to victory. It was a stunning achievement for what had been regarded as a fringe party, and Mr Farage announced his retirement from politics. Now he is back. Without Mr Farage, UKIP has drifted ever farther to the xenophobic far right under successive leaders. The Brexit Party, for its part, says it aims to draw support from across the political spectrum, from both Conservatives and Labour Brexiteers, to ensure that Britain leaves the EU. The referendum marked UKIP‚Äôs high point. In the general election held in 2017 it received just 1.8% of the votes, down from 12.6% in 2015. Even as it became clear that Brexit‚Äîat least as hardline Brexiteers had imagined it‚Äîwas running into trouble, UKIP still polled only about 4% on average in 2018. But populist parties have regained momentum since the beginning of this year. The government lost one vote after another on its deal with the EU, and Brexit has been repeatedly delayed. The original deadline of March 29th has been pushed back to October 31st. Unless an agreement is reached soon, Britain will have to hold elections to the European Parliament next month, which will be another humiliation for Theresa May, the prime minister. Populists and hard Brexiteers accuse members of Parliament of betraying Brexit. The latest survey gives populist parties a combined vote of 21%. The Brexit Party, which Mr Farage recently described as ‚Äúa virtual‚Äù party, consisting of little more than a website, is just behind UKIP on 10%. Both are ahead of the pro-Remain Liberal Democrats on 8% and not far behind the Conservatives on 14%. The contrast between the Brexit party and its mirror-image, Change UK, a new party made up of Remainers drawn from Labour and the Conservatives, is striking. Change UK barely figures in the polls despite having lots of favourable press coverage and several prominent MPs. It suffers from a serious branding problem: it faffed around with its name, does not have a leader and failed to present itself as a full-throated anti-Brexit Party. It could learn a lesson or two from the astute Mr Farage.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Sudan‚Äôs protesters stand firm for civilian rule","slug":"Sudan‚Äôs protesters stand firm for civilian rule","date":"2019-04-16T23:16:50.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2019/04/16/Sudan‚Äôs protesters stand firm for civilian rule/","link":"","permalink":"https://stanxia.github.io/2019/04/16/Sudan‚Äôs protesters stand firm for civilian rule/","excerpt":"","text":"The generals have blinked and replaced one of their own Apr 15th 2019 AWAD IBN AUF was leader of Sudan for just over a day. In his brief spell as head of state the former vice-president and defence chief declared a three-month state of emergency, suspended the constitution, arrested a few senior officials and announced a curfew. ‚ÄúThe people asked us to take over‚Ä¶and we did,‚Äù he said in a stony-faced televised address on April 11th, shortly after placing his boss, Omar al-Bashir, under house arrest. It looked as if four months of nationwide protests against Mr Bashir and his 30-year-old autocracy had culminated in a coup. Sudan‚Äôs demonstrators, who have been camped outside the headquarters of the armed forces in central Khartoum since April 6th, were having none of it. Though they had called on the army to side with them in order to topple Mr Bashir, who has ruled since 1989, his bloodstained deputy was far from the replacement they had in mind. Mr Auf has had sanctions placed on him by America for his role in war crimes (his former boss has been indicted by the International Criminal Court for genocide in Sudan‚Äôs Darfur region). Faced with a storm of popular outrage, the short-lived autocrat stepped down on April 12th. He was replaced by another general, Abdel-Fattah Burhan, then head of the army. Mr Burhan is said to be more popular with rank-and-file soldiers, many of whom are sympathetic to the demonstrators. Mr Burhan has so far made a better fist of the job. His speech on April 13th was less tone-deaf than that of his predecessor. He commended the revolution, particularly noting the prominent role played by women in the protests that began in December in response to rising food prices. He paid tribute to the civilians who have been killed by security forces in the past four months. More concretely, he promised to hand over power to civilians after a transition period of no more than two years. On April 13th the opposition nominated delegates to begin negotiating with a military council headed by Mr Burhan. In the first meeting the council promised to repeal all repressive laws and to oversee a predominantly civilian administration, according to the Sudanese Professionals‚Äô Association (SPA), which organised many of the protests. Alongside this, the military council moved to weaken the power of the former tyrant. It replaced Salah Abdallah Gosh, the intelligence chief widely regarded as the second most powerful man in the country after Mr Bashir. On April 14th the military council said it had arrested members of Mr Bashir‚Äôs National Congress Party (NCP) and would begin seizing the party‚Äôs assets. It also promised to restructure Mr Gosh‚Äôs notorious intelligence agency and to allow the opposition to choose a new prime minister. But the protesters remain dissatisfied. ‚ÄúWe can‚Äôt live on promises,‚Äù says Hamid Murtada, an activist. The SPA has called for the sit-in outside the defence ministry to continue until the ‚Äúdeep state‚Äù is fully dismantled. Many people are particularly worried by the appointment of Mohamed Hamdan Dagalo (known as Hemeti) as the military council‚Äôs deputy leader. A paramilitary unit he was in charge of, the Rapid Support Forces, with links to the notorious Janjaweed militia, was involved in the mass rape and butchery of civilians while battling rebels in Darfur. He and others in the junta‚Äôs top ranks are close to Saudi Arabia and the United Arab Emirates, both of which welcomed developments over the weekend. Saudi Arabia has promised aid to help ease the country‚Äôs economic woes. Whether the junta will actually relinquish power remains to be seen. ‚ÄúIt‚Äôs very possible the military said all that just to end the sit-in,‚Äù says Mohammed Osman, an analyst in Khartoum. Indeed, on the morning of April 15th it tried again to disband the protest, this time asking demonstrators to help clear roadblocks. After a brief stand-off the soldiers retreated. ‚ÄúClean up the regime and we‚Äôll clean up the square,‚Äù shouted protesters as they departed. The generals had better put their aprons on.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Why British wage growth is picking up at last","slug":"Why British wage growth is picking up at last","date":"2019-04-16T23:16:47.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2019/04/16/Why British wage growth is picking up at last/","link":"","permalink":"https://stanxia.github.io/2019/04/16/Why British wage growth is picking up at last/","excerpt":"","text":"A tight labour market, better jobs and higher productivity are rewarding workers at last Apr 16th 2019 The obvious cause of strengthening pay is the tight labour market. When unemployment hit its post-crisis high of 8.5% in 2011, employers knew that they could get away with offering meagre or no pay rises. Workers‚Äô bargaining power has since grown, as joblessness has fallen. Unemployment is just 3.9%, the lowest in four decades. Britain has about three vacancies for each 100 employee jobs, the highest ratio since the data began in 2001, meaning bosses have to try harder to fill posts. Nominal pay in the hospitality sector, which has a particularly high number of job postings, is growing at 5% a year. A hot jobs market is not the only cause of rising average pay. Another relates to the mix of jobs in the economy. Following the financial crisis, posts in low-productivity, low-paying sectors such as agriculture proliferated. Having more poorly paid positions dragged down the average. Yet lately Britain has created relatively more high-paying jobs‚Äîstrawberry-pickers have made way for stock-pickers. In the year to September 2018 the changing composition of the workforce boosted average nominal wage growth by 0.5 percentage points. Stronger pay may also owe something to rising productivity. How much workers produce ultimately determines how much they earn. After stagnating in 2007-14, more recently output per hour has grown by about 1% a year in real terms. Silvana Tenreyro of the Bank of England has floated the idea that some of these gains might not have yet shown up in the statistics. The question is whether wage growth will accelerate further. Workers will hope that it does: at its current rate real pay will not return to its pre-crisis peak until 2022. Yet few economists believe Britain will soon resume the healthy productivity growth of the post-war period, which was consistent with real-terms pay rises of some 3% a year. Most economic forecasts have productivity growing at an annual rate of about 1% this year and next. Already there are signs that firms are struggling to afford the modest pay settlements that their workers are demanding. The cost of staffing per unit of output, a measure of domestically generated inflation, grew by 1.7% in 2017 but by 2.7% last year. To absorb these extra costs some firms are accepting lower profits. Other firms are passing them on to customers, stoking consumer-price inflation, which hovers around the Bank of England‚Äôs 2% target. For now there is little need for the bank to raise interest rates, which would bring down inflation. Uncertainty over Brexit, which is likely to continue until October and perhaps beyond, argues in favour of holding fire. Yet the difficult truth is that Britain‚Äôs current rate of wage growth, modest by historical standards, is about as high as it can go without pushing inflation above target. It will be some time before Britons‚Äô pay squeeze is truly over.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Big carmakers are placing vast bets on battery power","slug":"Big carmakers are placing vast bets on battery power","date":"2019-04-16T23:16:46.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2019/04/16/Big carmakers are placing vast bets on battery power/","link":"","permalink":"https://stanxia.github.io/2019/04/16/Big carmakers are placing vast bets on battery power/","excerpt":"","text":"From GM and Geely to Mitsubishi and Mercedes, giants of the industry are revving up their electric plans Apr 16th 2019 IN 1900 ONE in three cars on American roads ran on volts. Then oil began gushing out of Texas. Cheaper than batteries, and easier to top up, petrol fuelled the rise of mass-produced automobiles. Cost and worries about limited range have kept electric vehices (EVs) in a niche ever since. Tesla, which has made battery power sexy again in the past decade, produced just 250,000 units last year, a fraction of what Volkswagen or Toyota churn out each year. For every one of the 2m or so pure EVs and plug-in hybrids, which combine batteries and internal-combustion engines (ICEs), sold in 2018, the world‚Äôs carmakers shifted 50 petrol or diesel cars. EV sales are, however, accelerating as quickly as electric motors. Some industry-watchers reckon that they will account for nearly 15% of the global total by 2025. One in five new cars in China will run on batteries then, according to Bloomberg New Energy Finance, a consultancy. The chief reason such optimistic forecasts no longer look outlandish is the entry into the electric race of the car industry‚Äôs juggernauts. A survey by Reuters in January put the industry‚Äôs total planned EV-related spending worldwide (including on batteries) at around $300bn over the next five to ten years. From GM and Geely to Mercedes and Nissan, big carmakers all want to turn out millions of such cars‚Äîand turn a profit doing so. Their strategies range from cautious to aggressive. Making a profitable, mass-produced EV has proved elusive. A battery powertrain can be three times the price of an ICE. But a combination of better technology and greater scale may soon allow EVs to compete on price with petrol vehicles, and enable motorists to drive long distances without the fear of running out of juice. They had better, carmakers are hoping. Worries about climate change and air pollution are prompting authorities around the world to consider phasing out new petrol and diesel engines in the coming decade. In the absence of federal regulations under America‚Äôs climate-sceptical president, Donald Trump, some progressive cities and states are tightening local rules. Fiat Chrysler (whose chairman, John Elkann, sits on the board of The Economist‚Äôs parent company) has just agreed to pay Tesla hundreds of millions of euros to count the Californian marque as part of its fleet, and thus avoid steep fines for exceeding average CO2-emissions standards for carmakers due to come into force in the European Union next year. In China, where half the world‚Äôs EVs are already sold, the government sees electrification of transport as a way to combat choking urban smog‚Äîand to lap the West technologically. Western premium brands appear best positioned to take an early lead. While batteries remain pricey, fancy marques can offset the cost with the higher prices that their vehicles command. Jaguar and Audi have already broken Tesla‚Äôs monopoly at the lucrative top end of the market. Daimler, which owns Mercedes, has committed ‚Ç¨10bn ($11.3bn) to its EQ range and wants 20% of its cars to be fully electric by 2025. Daimler and BMW, which has been bruised by losses on its poorly selling i3 electric hatchback, are hedging their bets by backing platforms (as the basic architecture of a car is known in the business) that are able to accommodate petrol and diesel engines as well as electric motors. This should help them contain costs, but at the expense of compromises over battery size and layout. Sacrificing range and interior space in this way may dent brands built on luxury and technological prowess, says Patrick Hummel of UBS, a bank. Many mass-market firms are likewise proceeding cautiously. Their thinner margins leave less room to absorb the cost of batteries. Renault of France and South Korea‚Äôs Hyundai are nevertheless toying with the idea of a dedicated electric-only platform. PSA Group has said it plans to electrify more Peugeots, Citro√´ns and Opels. Fiat Chrysler has made similar noises, though the Tesla tie-up suggests its near-term plans are less ambitious. Toyota‚Äôs early bet on hydrogen fuel cells, which lag behind batteries on the road to widespread adoption, had long been a distraction. The Japanese giant has now acknowledged that buyers want battery-power. It is planning ten models by the early 2020s. The most daring by a long way is VW. The German group‚Äôs heft‚Äîit produces 10m cars a year‚Äîaffords it economies of scale only Toyota could hope to match. The ‚Ç¨30bn VW plans to spend on developing EVs over the next five years, plus ‚Ç¨50bn to fit them with batteries, leaves all other carmakers in the dust. In March Herbert Diess, its chief executive, promised 70 new electric models by 2028, rather than 50 as previously pledged, and 22m EVS delivered over the next ten years. The company is contemplating a huge investment in a ‚Äúgigafactory‚Äù to supply its own batteries rather than depending on outside suppliers. VW is already developing a dedicated platform and converting entire factories to EV production. The first, at Zwickau in Germany, will eventually turn out 330,000 cars a year for the VW brand as well as Audi and SEAT. Its medium-sized ID hatchback, to be shipped next year, will cost around ‚Ç¨30,000, similar to an equivalent diesel-powered Golf, and travel 400-600km (250-370 miles) on a single charge. On April 14th in Shanghai Mr Diess unveiled a sport-utility vehicle to compete with Tesla‚Äôs snazzy Model X in China from 2021. Once the range of EVs reaches full production in 2022, VW believes, such models will start breaking even. By 2025, when it hopes one-quarter of its output will be electric, they should be as profitable as petrol cars. As Mike Manley, boss of Fiat Chrysler, observers, it is no longer a question of whether carmakers can deliver a fleet of EVs but whether people will pay for them. If governments withdraw generous subsidies which EV-owners have enjoyed, charging infrastructure fails to materialise or electric cars‚Äô pitiful resale value does not increase, motorists may be reluctant to abandon their tried and tested petrol wheels. Poor sales, combined with the large upfront investments, would hit carmakers‚Äô margins, which for mass-market brands are already about as exciting as a Soviet-era Trabant in mud brown. The financial consequences could be ‚Äúugly‚Äù, warns Bernstein, an equity-research firm. Electric fieldAt the same time, the big carmakers can expect more competition from rivals unburdened by complex ICE supply chains and large workforces. VW has 40,000 suppliers worldwide and directly employs 660,000 people. Lower capital intensity, and the relative simplicity of EVs, which use many fewer parts than petrol vehicles and are easier to assemble, is drawing in upstarts. They include Dyson, a British maker of vacuum cleaners, and a raft of Chinese Tesla-wannabes, such as NIO and Byton. Bigger Chinese carmakers, such as Geely and JAC, have also developed expertise in EVs. With domestic sales stalling, they are beginning to eye export markets. Other technological bumps are meanwhile beginning to test the industry‚Äôs chassis. Self-driving cars and ride-sharing are forcing car companies to rethink their established business model. If carmakers miss the electric turn now, they will find it harder to find their way in these futuristic areas. The electric race may prove to be a practice lap for wider disruption.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"The fire in Notre Dame cathedral, and more from our daily podcast","slug":"The fire in Notre Dame cathedral, and more from our daily podcast","date":"2019-04-16T23:16:44.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2019/04/16/The fire in Notre Dame cathedral, and more from our daily podcast/","link":"","permalink":"https://stanxia.github.io/2019/04/16/The fire in Notre Dame cathedral, and more from our daily podcast/","excerpt":"","text":"Also, counting civilian casualties and Cuba‚Äôs sporting export Podcasts | Apr 16th 2019 EMMANUEL MACRON, the president of France, was already dealing with national protests when a massive fire broke out at the Notre Dame cathedral, an 850-year old Parisian landmark. Can the tragedy, and Mr Macron‚Äôs leadership, bring the country together? America‚Äôs armed forces often don‚Äôt know how many civilians are killed in its air-strike campaigns‚Äîbut that‚Äôs changing, thanks to pressure from the Pentagon‚Äôs loudest critics. And, though the Trump administration has cancelled a deal for Cuban baseball players, that won‚Äôt stop them making their way to the big leagues. Runtime: TK min. Listen on: Apple Podcasts | Spotify | Google | Stitcher | TuneIn","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Cathedrals are neglected in much of Europe","slug":"Cathedrals are neglected in much of Europe","date":"2019-04-16T23:16:41.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2019/04/16/Cathedrals are neglected in much of Europe/","link":"","permalink":"https://stanxia.github.io/2019/04/16/Cathedrals are neglected in much of Europe/","excerpt":"","text":"Ancient churches are the greatest glory of Europe‚Äôs cities, and a headache for those trying to look after them Erasmus | Apr 16th 2019 THE CATHEDRAL of Notre Dame in Paris, and the vast outpouring of sorrow over its semi-destruction by fire on April 15th, epitomises the power of great houses of prayer to touch and inspire people. More palpably than any other kind of monument, they connect visitors with another world: one in which the finest composers, singers, sculptors, glass-makers, embroiderers and craft-workers of a given era joyfully mixed their energies in a vast, disinterested enterprise. To some degree, that enterprise continues as long as the building stands. That alone makes great historic churches a source of fascination, even for those with little interest in Christian worship. People want them to be there, even if they don‚Äôt wish to share the cost or join the prayers. In almost every country in Europe, that creates an acute problem. The cost of maintaining the delicate stone fabric of a cathedral seems to rise geometrically, far out-stripping the ability of small congregations to sustain them. Governments and other secular bodies are minded to help but they also feel compelled, in most places, to respect the independence of the buildings‚Äô historic stewards, in other words the churches. In England, the established church boasts 42 cathedrals (technically defined as the seat of a bishop), of which 39 are listed as historic buildings whose preservation is both mandated by law and entitled to some public help. (About 12,000 of the 16,000 other places of worship controlled by the Church of England are also listed.) The Church of England likes to call the cathedrals one of its ‚Äúsuccess stories‚Äù with rising numbers of worshippers and visitors, and growing revenue. But as a recent report led by a bishop delicately put it, ‚Äúrecent failures of governance and management within a small number of cathedrals have highlighted vulnerabilities across the sector‚Ä¶‚Äù In plain language, at least two cathedrals have run into severe financial difficulties, which better stewardship might have avoided. English cathedrals are relatively independent bodies, run by a cleric known as a dean who relies on a group of advisers known as a chapter. They are free to raise money in many ways, from concerts to exhibitions to simply charging an admission fee, as about a quarter of them do. In recent weeks Derby Cathedral raised eyebrows by hosting films that included graphic sex scenes and depictions of paganism. Churches in Germany have an advantage. The system of religious taxes (under which people of Catholic or Lutheran heritage pay a levy to their respective denominations) has ensured an ample income stream. Germany‚Äôs religious masters have done better at hauling in revenue than at retaining worshippers, the figures would suggest. But a massive fund-raising effort, drawing in generous private-sector donors and ordinary well-wishers in Germany and Britain, was needed for one of the biggest church reconstruction projects of modern times: the rebuilding of the Frauenkirche in Dresden. This showpiece of German Baroque was destroyed, along with much of the city, in a British bombing raid in February 1945. The project, completed in 2005, was a complement to the erection in 1962 of a new cathedral in Coventry, replacing the one wrecked by a German air raid on the English Midlands. Most European states subsidise their historically dominant Christian denominations, directly or indirectly, while also leaving the sects‚Äô religious masters relatively autonomous. In Italy, despite the notional separation of Catholic church and state, the two are deeply intertwined, through tax breaks and state help for maintaining the artistic heritage which is one of Italy‚Äôs greatest tourist draws. Belgium offers generous help to all its main religions, but Catholic cathedrals still charge stiff admission fees as though they were museums. In church-state relations, France is an outlier. Under the regime of la√Øcit√©, or strict secularism, municipalities took over formal responsibility for Catholic churches; clerics and their congregations are merely users. And clerics, in particular, are thin on the ground. In rural France, it is common for a priest to look after 30 old churches. That paucity of active users prompts municipal authorities to assign a low priority to conserving church buildings. In 2013 a huge neo-Gothic church in the northern French town of Abbeville was dramatically demolished by municipal leaders, who said the place was a safety hazard and too expensive to repair. Hundreds of other French churches may soon have a similar fate. Nor have France‚Äôs state authorities done very well at protecting houses of prayer from a wave of vandalism, including arson and desecration, that has afflicted them this year. Indeed, all over western Europe, churches are closing for lack of worshippers. In the Netherlands, a cardinal predicted in 2013 that two-thirds of the Roman Catholic churches in the country would shut by 2025. But a diametrically opposing trend is at work further east in Europe. Perhaps the most spectacular act of church reconstruction of recent times was the re-erection of Moscow‚Äôs Cathedral of Christ the Saviour, which was dynamited by Stalin in 1931 and thrown back up over five years starting in 1995. It was rebuilt in about a tenth of the time needed for the original construction. Elsewhere in Russia, under a crash building programme decreed by the Russian Orthodox church, at least three new churches are said to be opening per day. And in other parts of central and eastern Europe, from Serbia to Georgia, vast new Orthodox churches now adorn capital cities which were already endowed with many places of prayer. Indeed, the Russian church building spree extends far beyond the borders of the motherland. Anyone who takes a short walk along the banks of the Seine from the wreckage of Notre Dame will soon see a boldly modernistic structure, topped with onion domes: this ‚Äúspiritual and cultural‚Äù centre, opened in 2016, was a pet project of President Vladimir Putin‚Äôs. It competes hard with an older Russian-style cathedral in Paris which the Muscovite authorities, to their frustration, do not control. As the Russian state media were eager to point out, western Europe is gaining some new Christian places of worship even as many others are destroyed, accidentally or otherwise. See alsoA terrible blaze devastates Notre Dame cathedral (April 15th 2019)","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"Fire in the heart of Paris","slug":"Politics this week","date":"2019-04-16T18:15:21.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2019/04/16/Politics this week/","link":"","permalink":"https://stanxia.github.io/2019/04/16/Politics this week/","excerpt":"","text":"Fire in the heart of ParisPolitics this week Apr 11th 2019 Following months of mass protests in Sudan, it appeared that Omar al-Bashir had been ousted as president by the army. Mr al-Bashir had misruled since taking power in a coup in 1989. His civil war against non-Muslim black Africans ended with the secession of South Sudan. Separately, the International Criminal Court charged him with overseeing genocide in Darfur. See article. Binyamin Netanyahu won a record fifth term as prime minister of Israel. His Likud party tied with Blue and White, a centrist rival. But the right-wing and religious bloc, of which Likud is a part, won a majority of seats in the Knesset. In the final days of the campaign Mr Netanyahu vowed to begin annexing parts of the West Bank, further dimming the prospect of any peace with the Palestinians based on a two-state solution. See here and here. Khalifa Haftar, Libya‚Äôs most powerful warlord, attacked Tripoli, which is controlled by the UN-backed government. Dozens of people were killed in the fighting, as militias allied to the government rallied to defend the capital. A UN peace conference, scheduled for this month, was postponed. See article. Protests continued in Algeria, where crowds called for the resignation of Abdelkader Bensalah, the interim president. Mr Bensalah succeeded Abdelaziz Bouteflika, who resigned amid widespread anger at his regime after 20 years in charge. For the first time police used tear-gas to disperse the demonstrators. Mr Bensalah said the country would hold a presidential election on July 4th. Theresa May, Britain‚Äôs prime minister, attended a summit in Brussels to discuss another delay to Brexit. The European Union offered Britain six more months, pushing the deadline to October 31st, Halloween. That means Britain faces having to vote in elections to the European Parliament next month, though British MEPs will have to step down if Brexit actually happens. The president of the European Commission, Jean-Claude Juncker, joked that if there was another late-night meeting on the last day of the talks he might have to leave at midnight; his term ends on November 1st. See article. Julian Assange, a founder of WikiLeaks, was arrested by British police in the Ecuadorean embassy in London. Ecuador had granted Mr Assange refuge in 2012 after he had jumped bail while facing rape allegations. His relationship with his hosts soured after a change of government in Ecuador, where a leftist president was replaced by a more moderate one. Mr Assange has said he fears extradition to the United States, where WikiLeaks is not popular, having published reams of leaked American military secrets. Turkey‚Äôs ruling party demanded a fresh vote in Istanbul, where it narrowly lost the mayoralty in elections on March 31st. Italy‚Äôs deputy prime minister, Matteo Salvini, announced the formation of a new nationalist group within the European Parliament, to be called the European Alliance for People and Nations. However, none of the party leaders he hoped would attend from other countries turned up. The Trump administration cancelled a four-month-old agreement under which Cuban baseball players could join Major League teams in America without defecting from their country. The administration said the agreement would encourage human trafficking and help enrich Cuba‚Äôs communist government. See article. Jair Bolsonaro, Brazil‚Äôs president, sacked the education minister, Ricardo V√©lez, who shared his socially conservative views. Mr V√©lez had courted controversy by instructing schools to film classes singing the national anthem and repeating Mr Bolsonaro‚Äôs campaign slogan. His replacement, Abraham Weintraub, an economist, has said that crack cocaine was introduced to Brazil deliberately by the left. See here. Thanathorn Juangroongruangkit, the leader of the Future Forward party, was charged with sedition in relation to a protest against Thailand‚Äôs military junta in 2015. It is one of several repressive steps that has marred the country‚Äôs supposed return to democracy after an election last month. See article. Kassym Jomart Tokayev, Kazakhstan‚Äôs interim president following the sudden resignation of Nursultan Nazarbayev after three decades in power, called a snap election for June 9th. See article. South Korea‚Äôs constitutional court ruled that the government must end the country‚Äôs ban on abortion, in place since 1953, before the end of 2020. Doctors can currently be imprisoned if they perform the procedure. However, tens of thousands of abortions are carried out each year. Voting began in India‚Äôs seven-stage election. The final phase will take place on May 19th and the results for all seven stages will be announced on May 23rd. Polls suggest the ruling Bharatiya Janata Party will remain the biggest party. See article. A court in Hong Kong found nine people guilty of ‚Äúpublic nuisance‚Äù charges relating to their leading roles in the Umbrella Movement of 2014, which involved weeks of sit-ins and demonstrations in busy commercial districts in support of democratic reform. Among the defendants were three founders of a group involved in the unrest. Kirstjen Nielsen resigned as the secretary of America‚Äôs Department of Homeland Security. Donald Trump is trying to replace the department‚Äôs top officials with people who will try harder to keep Mexicans out of the United States. Mr Trump has threatened to close the border entirely, despite advice that this would cause economic chaos. See article. Randolph Alles, the head of America‚Äôs Secret Service, is quitting. He had reportedly been asked to go before the recent security breach at Mr Trump‚Äôs private club, involving a Chinese woman with several thumb drives. Amnesty International‚Äôs annual report on the death penalty recorded a drop of nearly a third in known executions worldwide last year. There were 690 in 2018, down from 1,061 in 2015. The number of death sentences passed by courts also declined slightly, though in the Middle East and north Africa death sentences nearly doubled to 1,170. The region is responsible for two-thirds of the world‚Äôs known executions. (China is also thought to execute thousands of people every year, but keeps its figures secret.) Of the countries that release figures, Iran is by far the most avid executioner, putting 409 people to death each year on average for the past decade.","raw":null,"content":null,"categories":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/categories/economist/"}],"tags":[{"name":"economist","slug":"economist","permalink":"https://stanxia.github.io/tags/economist/"}]},{"title":"IDEA ‰ΩøÁî®ÊäÄÂ∑ß","slug":"IDEA ‰ΩøÁî®ÊäÄÂ∑ß","date":"2017-12-28T09:34:44.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/12/28/IDEA ‰ΩøÁî®ÊäÄÂ∑ß/","link":"","permalink":"https://stanxia.github.io/2017/12/28/IDEA ‰ΩøÁî®ÊäÄÂ∑ß/","excerpt":"","text":"ÂâçË®Ä Âú®Áîü‰∫ß‰∏≠‰∏ªÂäõÊòØ‰ΩøÁî® IDEA ÔºåÂ∑•Ê¨≤ÂñÑÂÖ∂‰∫ãÔºåÂøÖÂÖàÂà©ÂÖ∂Âô®„ÄÇÂõ†ËÄåÊÄªÁªì‰∏Ä‰∏ãÂú®‰ΩøÁî®ËøáÁ®ã‰∏≠ÁöÑÁªèÈ™åÔºå‰∏∫Êñπ‰æøÂàùÂ≠¶ËÄÖÊõ¥Âø´ÁöÑÊéåÊè°Ëøô‰∏™Á•ûÂô®„ÄÇ ÈÖçÁΩÆÈòøÈáå‰∫ëÈÖçÁΩÆ ÈòøÈáå‰∫ë ‰Ωú‰∏∫ maven ÁöÑ‰ªìÂ∫ìÊù•Ê∫êÔºåÂéüÂõ†Â§ßÂÆ∂ÈÉΩÊáÇÂæóÔºåÂõΩÂ§ñÁöÑ‰ªìÂ∫ìÈÄüÂ∫¶ÊúâÊó∂ÂÄôÂæàÂëµÂëµÔºåÂõΩÂÜÖÁöÑËøôÊñπÈù¢ËøòÊòØÈù†Ë∞±ÁÇπ„ÄÇ Á¨¨‰∏ÄÊ≠•ÔºöÊâìÂºÄ IDEA Â∑¶‰∏äËßíÁöÑÂÅèÂ•ΩËÆæÁΩÆ PreferencesÔºåÊé•ËøûÁÇπÂáª Build &gt;&gt; Build Tools &gt;&gt; Maven ÔºåÂú® Maven home directory Â§ÑÈÄâÊã© IDEA Ëá™Â∏¶ÁöÑ maven ÁâàÊú¨ÔºåÂú®Êú¨Âú∞Êñá‰ª∂Á≥ªÁªü‰∏≠ÊâæÂà∞ËØ•Ë∑ØÂæÑÔºåÊâæÂà∞Âπ∂ËøõÂÖ• conf ÁõÆÂΩïÔºåÊâìÂºÄÁºñËæë settings.xml „ÄÇ Á¨¨‰∫åÊ≠•ÔºöÂú® settings.xml ‰∏≠ÊêúÁ¥¢ mirrors ,Â∞Ü‰ª•‰∏ãÈÖçÁΩÆÂÜôÂÖ•ËØ•Â§ÑÔºö1234567&lt;!-- ÈòøÈáåamvenÂ∫ì --&gt;&lt;mirror&gt; &lt;id&gt;alimaven&lt;/id&gt; &lt;name&gt;aliyun maven&lt;/name&gt; &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt; &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;&lt;/mirror&gt; NOTE:Ê≥®ÊÑèÂ∞Ü‰∏äËø∞‰ª£Á†ÅÊîæÂÖ• &lt;mirrors&gt;ËøôÈáåÈù¢&lt;/mirrors&gt; „ÄÇ Á¨¨‰∏âÊ≠•ÔºöÂõûÂà∞ Maven ÁöÑÈÖçÁΩÆÁïåÈù¢ÔºåUser settings file Â§ÑÁÇπÂáª Override ,ÈÄâÊã©ÂàöÊâçÁºñËæëÁöÑ settings.xml Êñá‰ª∂ÂÖ®Ë∑ØÂæÑ„ÄÇ Á¨¨ÂõõÊ≠•ÔºöApply ,OK,ÂÆåÊ¥ª„ÄÇÁé∞Âú®ÂèØ‰ª•È™åËØÅÊòØÂê¶ÊàêÂäü„ÄÇ","raw":null,"content":null,"categories":[{"name":"idea","slug":"idea","permalink":"https://stanxia.github.io/categories/idea/"}],"tags":[{"name":"idea","slug":"idea","permalink":"https://stanxia.github.io/tags/idea/"},{"name":"mac","slug":"mac","permalink":"https://stanxia.github.io/tags/mac/"}]},{"title":"Phoenix Secondary Indexing","slug":"Phoenix-Secondary-Indexing","date":"2017-12-27T16:48:35.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/12/27/Phoenix-Secondary-Indexing/","link":"","permalink":"https://stanxia.github.io/2017/12/27/Phoenix-Secondary-Indexing/","excerpt":"‰∫åÁ∫ßÁ¥¢ÂºïÊòØ‰ªé‰∏ªËÆøÈóÆË∑ØÂæÑËÆøÈóÆÊï∞ÊçÆÁöÑÊ≠£‰∫§ÊñπÂºè„ÄÇÂú® HBase ‰∏≠ÔºåÊÇ®Êúâ‰∏Ä‰∏™Á¥¢ÂºïÊåâÂ≠óÂÖ∏È°∫Â∫èÊéíÂ∫èÂú®‰∏ªÈîÆË°å‰∏ä„ÄÇ‰ª•‰∏çÂêå‰∫é‰∏ªË¶ÅË°åÁöÑÊñπÂºèËÆøÈóÆËÆ∞ÂΩïÈúÄË¶ÅÊâ´ÊèèË°®‰∏≠ÁöÑÊâÄÊúâË°åÔºå‰ª•ÈíàÂØπÊÇ®ÁöÑËøáÊª§Âô®ÂØπÂÖ∂ËøõË°åÊµãËØï„ÄÇÈÄöËøá‰∫åÁ∫ßÁ¥¢ÂºïÔºåÊÇ®Á¥¢ÂºïÁöÑÂàóÊàñË°®ËææÂºèÂΩ¢Êàê‰∏Ä‰∏™Â§áÁî®Ë°åÈîÆÔºå‰ª•ÂÖÅËÆ∏Ê≤øÁùÄËøô‰∏™Êñ∞ËΩ¥ËøõË°åÁÇπÊü•ÊâæÂíåËåÉÂõ¥Êâ´Êèè„ÄÇ\nCovered Indexes Ë¶ÜÁõñÁ¥¢Âºï\nPhoenix ÊòØÁâπÂà´Âº∫Â§ßÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Êèê‰æõË¶ÜÁõñÁ¥¢Âºï - ‰∏ÄÊó¶ÊâæÂà∞Á¥¢ÂºïÊù°ÁõÆÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅËøîÂõû‰∏ªË°®„ÄÇÁõ∏ÂèçÔºåÊàë‰ª¨Â∞ÜÊàë‰ª¨ÂÖ≥ÂøÉÁöÑÊï∞ÊçÆÁªëÂÆöÂà∞Á¥¢ÂºïË°åÔºåËäÇÁúÅ‰∫ÜËØªÂèñÊó∂Èó¥ÁöÑÂºÄÈîÄ„ÄÇ\n‰æãÂ¶ÇÔºå‰ª•‰∏ãÂÜÖÂÆπÂ∞ÜÂú®v1Âíåv2Âàó‰∏äÂàõÂª∫Á¥¢ÂºïÔºåÂπ∂Âú®Á¥¢Âºï‰∏≠ÂåÖÂê´v3Âàó‰ª•Èò≤Ê≠¢‰ªéÊï∞ÊçÆË°®‰∏≠Ëé∑ÂèñËØ•ÂàóÔºö\n1CREATE INDEX my_index ON my_table (v1,v2) INCLUDE(v3)","text":"‰∫åÁ∫ßÁ¥¢ÂºïÊòØ‰ªé‰∏ªËÆøÈóÆË∑ØÂæÑËÆøÈóÆÊï∞ÊçÆÁöÑÊ≠£‰∫§ÊñπÂºè„ÄÇÂú® HBase ‰∏≠ÔºåÊÇ®Êúâ‰∏Ä‰∏™Á¥¢ÂºïÊåâÂ≠óÂÖ∏È°∫Â∫èÊéíÂ∫èÂú®‰∏ªÈîÆË°å‰∏ä„ÄÇ‰ª•‰∏çÂêå‰∫é‰∏ªË¶ÅË°åÁöÑÊñπÂºèËÆøÈóÆËÆ∞ÂΩïÈúÄË¶ÅÊâ´ÊèèË°®‰∏≠ÁöÑÊâÄÊúâË°åÔºå‰ª•ÈíàÂØπÊÇ®ÁöÑËøáÊª§Âô®ÂØπÂÖ∂ËøõË°åÊµãËØï„ÄÇÈÄöËøá‰∫åÁ∫ßÁ¥¢ÂºïÔºåÊÇ®Á¥¢ÂºïÁöÑÂàóÊàñË°®ËææÂºèÂΩ¢Êàê‰∏Ä‰∏™Â§áÁî®Ë°åÈîÆÔºå‰ª•ÂÖÅËÆ∏Ê≤øÁùÄËøô‰∏™Êñ∞ËΩ¥ËøõË°åÁÇπÊü•ÊâæÂíåËåÉÂõ¥Êâ´Êèè„ÄÇ Covered Indexes Ë¶ÜÁõñÁ¥¢Âºï Phoenix ÊòØÁâπÂà´Âº∫Â§ßÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Êèê‰æõË¶ÜÁõñÁ¥¢Âºï - ‰∏ÄÊó¶ÊâæÂà∞Á¥¢ÂºïÊù°ÁõÆÔºåÊàë‰ª¨‰∏çÈúÄË¶ÅËøîÂõû‰∏ªË°®„ÄÇÁõ∏ÂèçÔºåÊàë‰ª¨Â∞ÜÊàë‰ª¨ÂÖ≥ÂøÉÁöÑÊï∞ÊçÆÁªëÂÆöÂà∞Á¥¢ÂºïË°åÔºåËäÇÁúÅ‰∫ÜËØªÂèñÊó∂Èó¥ÁöÑÂºÄÈîÄ„ÄÇ ‰æãÂ¶ÇÔºå‰ª•‰∏ãÂÜÖÂÆπÂ∞ÜÂú®v1Âíåv2Âàó‰∏äÂàõÂª∫Á¥¢ÂºïÔºåÂπ∂Âú®Á¥¢Âºï‰∏≠ÂåÖÂê´v3Âàó‰ª•Èò≤Ê≠¢‰ªéÊï∞ÊçÆË°®‰∏≠Ëé∑ÂèñËØ•ÂàóÔºö 1CREATE INDEX my_index ON my_table (v1,v2) INCLUDE(v3) Functional Indexes ÂáΩÊï∞Á¥¢Âºï ÂáΩÊï∞Á¥¢ÂºïÔºàÂú®4.3ÂíåÊõ¥È´òÁâàÊú¨‰∏≠ÂèØÁî®ÔºâÂÖÅËÆ∏ÊÇ®‰∏ç‰ªÖÂú®Âàó‰∏äËÄå‰∏îÂú®‰ªªÊÑèË°®ËææÂºè‰∏äÂàõÂª∫Á¥¢Âºï„ÄÇÁÑ∂ÂêéÔºåÂΩì‰∏Ä‰∏™Êü•ËØ¢‰ΩøÁî®ËØ•Ë°®ËææÂºèÊó∂ÔºåÁ¥¢ÂºïÂèØ‰ª•Áî®Êù•Ê£ÄÁ¥¢ÁªìÊûúËÄå‰∏çÊòØÊï∞ÊçÆË°®„ÄÇ‰æãÂ¶ÇÔºåÊÇ®ÂèØ‰ª•Âú® UPPERÔºàFIRST_NAME ||‚Äô‚Äô|| LAST_NAMEÔºâ‰∏äÂàõÂª∫‰∏Ä‰∏™Á¥¢ÂºïÔºå‰ª•ÂÖÅËÆ∏ÊÇ®ÂØπÁªÑÂêàÁöÑÂêçÂ≠óÂíåÂßìÊ∞èËøõË°å‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÁöÑÊêúÁ¥¢„ÄÇ ‰æãÂ¶ÇÔºå‰∏ãÈù¢Â∞ÜÂàõÂª∫Ëøô‰∏™ÂäüËÉΩÁ¥¢ÂºïÔºö 1CREATE INDEX UPPER_NAME_IDX ON EMP (UPPER(FIRST_NAME||' '||LAST_NAME)) Êúâ‰∫ÜËøô‰∏™Á¥¢ÂºïÔºåÂèëÂá∫‰∏ãÈù¢ÁöÑÊü•ËØ¢Êó∂ÔºåÂ∞Ü‰ΩøÁî®Á¥¢ÂºïËÄå‰∏çÊòØÊï∞ÊçÆË°®Êù•Ê£ÄÁ¥¢ÁªìÊûúÔºö1SELECT EMP_ID FROM EMP WHERE UPPER(FIRST_NAME||' '||LAST_NAME)='JOHN DOE' Phoenix ÊîØÊåÅ‰∏§ÁßçÁ¥¢ÂºïÊäÄÊúØÔºöÂÖ®Â±ÄÁ¥¢ÂºïÂíåÊú¨Âú∞Á¥¢Âºï„ÄÇÊØè‰∏™Âú®‰∏çÂêåÁöÑÊÉÖÂÜµ‰∏ãÈÉΩÂæàÊúâÁî®ÔºåÂπ∂‰∏îÊúâËá™Â∑±ÁöÑÊïÖÈöúÊ¶ÇÂÜµÂíåÊÄßËÉΩÁâπÁÇπ„ÄÇ Global Indexes ÂÖ®Â±ÄÁ¥¢Âºï ÂÖ®Â±ÄÁ¥¢ÂºïÁõÆÊ†áÊòØÈáçÂ∫¶ËØªÊìç‰ΩúÁî®‰æã„ÄÇ‰ΩøÁî®ÂÖ®Â±ÄÁ¥¢ÂºïÔºåÁ¥¢ÂºïÁöÑÊâÄÊúâÊÄßËÉΩÊçüÂ§±ÈÉΩÊòØÂú®ÂÜôÂÖ•Êó∂ÂèëÁîüÁöÑ„ÄÇÊàë‰ª¨Êã¶Êà™Êï∞ÊçÆË°®Êõ¥Êñ∞ÂÜôÔºàDELETEÔºåUPSERT VALUESÂíåUPSERT SELECTÔºâÔºåÂª∫Á´ãÁ¥¢ÂºïÊõ¥Êñ∞ÔºåÁÑ∂ÂêéÂèëÈÄÅ‰ªª‰ΩïÂøÖË¶ÅÁöÑÊõ¥Êñ∞Âà∞ÊâÄÊúâÊÑüÂÖ¥Ë∂£ÁöÑÁ¥¢ÂºïË°®„ÄÇÂú®ËØªÁöÑÊó∂ÂÄôÔºåPhoenix ‰ºöÈÄâÊã©‰ΩøÁî®ÁöÑÁ¥¢ÂºïË°®ÔºåËøôÂ∞Ü‰∫ßÁîüÊúÄÂø´ÁöÑÊü•ËØ¢Êó∂Èó¥ÔºåÂπ∂Áõ¥Êé•Êâ´ÊèèÂÆÉÔºåÂ∞±ÂÉè‰ªª‰ΩïÂÖ∂‰ªñÁöÑ HBase Ë°®‰∏ÄÊ†∑„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÈô§ÈùûÊöóÁ§∫ÔºåÂê¶ÂàôÁ¥¢Âºï‰∏ç‰ºöÁî®‰∫éÂºïÁî®‰∏çÂ±û‰∫éÁ¥¢ÂºïÁöÑÂàóÁöÑÊü•ËØ¢„ÄÇ Local Indexes Êú¨Âú∞Á¥¢Âºï Êú¨Âú∞Á¥¢ÂºïÁõÆÊ†áÈíàÂØπÈáçÂ∫¶ÂÜôÊìç‰ΩúÔºåÁ©∫Èó¥ÂèóÈôêÁöÑÁî®‰æã„ÄÇÂ∞±ÂÉèÂÖ®Â±ÄÁ¥¢Âºï‰∏ÄÊ†∑ÔºåPhoenix ‰ºöÂú®Êü•ËØ¢Êó∂Ëá™Âä®ÈÄâÊã©ÊòØÂê¶‰ΩøÁî®Êú¨Âú∞Á¥¢Âºï„ÄÇ‰ΩøÁî®Êú¨Âú∞Á¥¢ÂºïÔºåÁ¥¢ÂºïÊï∞ÊçÆÂíåË°®Êï∞ÊçÆÂÖ±ÂêåÈ©ªÁïôÂú®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÔºåÈò≤Ê≠¢ÂÜôÂÖ•ÊúüÈó¥ÁöÑ‰ªª‰ΩïÁΩëÁªúÂºÄÈîÄ„ÄÇÂç≥‰ΩøÊü•ËØ¢Ê≤°ÊúâÂÆåÂÖ®Ë¶ÜÁõñÔºå‰πüÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Á¥¢ÂºïÔºàÂç≥ÔºåPhoenix Ëá™Âä®Ê£ÄÁ¥¢‰∏çÂú®Á¥¢Âºï‰∏≠ÁöÑÂàóÔºåÈÄöËøá‰∏éÊï∞ÊçÆË°®Áõ∏ÂØπÂ∫îÁöÑÁ¥¢ÂºïÔºâ„ÄÇ‰∏éÂÖ®Â±ÄÁ¥¢Âºï‰∏çÂêåÔºåË°®‰∏≠ÁöÑÊâÄÊúâÊú¨Âú∞Á¥¢ÂºïÈÉΩÂ≠òÂÇ®Âú®4.8.0Áâà‰πãÂâçÁöÑÂçïÁã¨ÁöÑÂÖ±‰∫´Ë°®‰∏≠„ÄÇ‰ªé4.8.0ÂºÄÂßãÔºåÊàë‰ª¨Â∞ÜÊâÄÊúâÊú¨Âú∞Á¥¢ÂºïÊï∞ÊçÆÂ≠òÂÇ®Âú®Áõ∏ÂêåÊï∞ÊçÆË°®‰∏≠ÁöÑÂçïÁã¨ÁöÑÂΩ±Â≠êÂàóÊóè‰∏≠„ÄÇÂú®ËØªÂèñÊú¨Âú∞Á¥¢ÂºïÊó∂ÔºåÁî±‰∫é‰∏çËÉΩÁ°ÆÂÆöÁ¥¢ÂºïÊï∞ÊçÆÁöÑÁ°ÆÂàáÂå∫Âüü‰ΩçÁΩÆÔºåÊâÄ‰ª•ÂøÖÈ°ªÊ£ÄÊü•ÊØè‰∏™Âå∫ÂüüÁöÑÊï∞ÊçÆ„ÄÇÂõ†Ê≠§Âú®ËØªÂèñÊó∂‰ºöÂèëÁîü‰∏Ä‰∫õÂºÄÈîÄ„ÄÇ Index Population ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂàõÂª∫Á¥¢ÂºïÊó∂Ôºå‰ºöÂú® CREATE INDEX Ë∞ÉÁî®ÊúüÈó¥ÂêåÊ≠•Â°´ÂÖÖËØ•Á¥¢Âºï„ÄÇÊ†πÊçÆÊï∞ÊçÆË°®ÁöÑÂΩìÂâçÂ§ßÂ∞èÔºåËøôÂèØËÉΩÊòØ‰∏çÂèØË°åÁöÑ„ÄÇ‰ªé4.5ÂºÄÂßãÔºåÂèØ‰ª•ÈÄöËøáÂú®Á¥¢ÂºïÂàõÂª∫ DDL ËØ≠Âè•‰∏≠ÂåÖÂê´ ASYNC ÂÖ≥ÈîÆÂ≠óÊù•ÂºÇÊ≠•ÂÆåÊàêÁ¥¢ÂºïÁöÑÂ°´ÂÖÖÔºö1CREATE INDEX async_index ON my_schema.my_table (v) ASYNC ÂøÖÈ°ªÈÄöËøá HBase ÂëΩ‰ª§Ë°åÂçïÁã¨ÂêØÂä®Â°´ÂÖÖÁ¥¢ÂºïË°®ÁöÑ map-reduce ‰Ωú‰∏öÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö123$&#123;HBASE_HOME&#125;/bin/hbase org.apache.phoenix.mapreduce.index.IndexTool --schema MY_SCHEMA --data-table MY_TABLE --index-table ASYNC_IDX --output-path ASYNC_IDX_HFILES Âè™Êúâ map-reduce ‰Ωú‰∏öÂÆåÊàêÂêéÔºåÁ¥¢ÂºïÊâç‰ºöË¢´ÊøÄÊ¥ªÂπ∂ÂºÄÂßãÂú®Êü•ËØ¢‰∏≠‰ΩøÁî®„ÄÇËøôÈ°πÂ∑•‰ΩúÂØπ‰∫éÈÄÄÂá∫ÁöÑÂÆ¢Êà∑Á´ØÊòØÊúâÂºπÊÄßÁöÑ„ÄÇËæìÂá∫Ë∑ØÂæÑÈÄâÈ°πÁî®‰∫éÊåáÂÆöÁî®‰∫éÂÜôÂÖ• HFile ÁöÑ HDFS ÁõÆÂΩï„ÄÇ Index Usage Á¥¢Âºï‰ΩøÁî® Phoenix Ëá™Âä®‰ΩøÁî®Á¥¢ÂºïÊù•ÊúçÂä°‰∏Ä‰∏™Êü•ËØ¢ÔºåÂΩìÂÆÉÁ°ÆÂÆöÊõ¥ÊúâÊïàÁöÑÊó∂ÂÄô„ÄÇ‰ΩÜÊòØÔºåÈô§ÈùûÊü•ËØ¢‰∏≠ÂºïÁî®ÁöÑÊâÄÊúâÂàóÈÉΩÂåÖÂê´Âú®Á¥¢Âºï‰∏≠ÔºåÂê¶Âàô‰∏ç‰ºö‰ΩøÁî®ÂÖ®Â±ÄÁ¥¢Âºï„ÄÇ‰æãÂ¶ÇÔºå‰ª•‰∏ãÊü•ËØ¢‰∏ç‰ºö‰ΩøÁî®Á¥¢ÂºïÔºåÂõ†‰∏∫Âú®Êü•ËØ¢‰∏≠ÂºïÁî®‰∫Üv2Ôºå‰ΩÜÊú™ÂåÖÂê´Âú®Á¥¢Âºï‰∏≠Ôºö1SELECT v2 FROM my_table WHERE v1 = 'foo' Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊúâ‰∏âÁßçËé∑ÂèñÁ¥¢ÂºïÁöÑÊñπÊ≥ïÔºö 1.ÈÄöËøáÂú®Á¥¢Âºï‰∏≠ÂåÖÂê´v2Êù•ÂàõÂª∫‰∏Ä‰∏™Ë¶ÜÁõñÁ¥¢ÂºïÔºö1CREATE INDEX my_index ON my_table (v1) INCLUDE (v2) ËøôÂ∞ÜÂØºËá¥v2ÂàóÂÄºË¢´Â§çÂà∂Âà∞Á¥¢Âºï‰∏≠ÔºåÂπ∂ÈöèÁùÄÊõ¥ÊîπËÄå‰øùÊåÅÂêåÊ≠•„ÄÇËøôÊòæÁÑ∂‰ºöÂ¢ûÂä†Á¥¢ÂºïÁöÑÂ§ßÂ∞è„ÄÇ 2.ÊèêÁ§∫Êü•ËØ¢Âº∫Âà∂ÂÆÉ‰ΩøÁî®Á¥¢ÂºïÔºö1SELECT /*+ INDEX(my_table my_index) */ v2 FROM my_table WHERE v1 = 'foo' ËøôÂ∞ÜÂØºËá¥Âú®ÈÅçÂéÜÁ¥¢ÂºïÊó∂ÊâæÂà∞ÊØè‰∏™Êï∞ÊçÆË°å‰ª•ÊâæÂà∞Áº∫Â∞ëÁöÑv2ÂàóÂÄº„ÄÇËøô‰∏™ÊèêÁ§∫Âè™ÊúâÂú®‰Ω†Áü•ÈÅìÁ¥¢ÂºïÊúâÂæàÂ•ΩÁöÑÈÄâÊã©ÊÄßÁöÑÊó∂ÂÄôÊâçÂèØ‰ª•‰ΩøÁî®Ôºà‰æãÂ¶ÇÔºåÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÊúâÂ∞ëÈáèÁöÑË°®Ê†ºË°åÁöÑÂÄºÊòØ‚Äôfoo‚ÄôÔºâÔºåÂê¶Âàô‰Ω†ÂèØ‰ª•ÈÄöËøáÈªòËÆ§ÁöÑË°å‰∏∫Êù•Ëé∑ÂæóÊõ¥Â•ΩÁöÑÊÄßËÉΩÂÖ®Ë°®Êâ´Êèè„ÄÇ 3.ÂàõÂª∫‰∏Ä‰∏™Êú¨Âú∞Á¥¢ÂºïÔºö1CREATE LOCAL INDEX my_index ON my_table (v1) ‰∏éÂÖ®Â±ÄÁ¥¢Âºï‰∏çÂêåÔºåÂç≥‰ΩøÊü•ËØ¢‰∏≠ÂºïÁî®ÁöÑÊâÄÊúâÂàóÈÉΩ‰∏çÂåÖÂê´Âú®Á¥¢Âºï‰∏≠ÔºåÊú¨Âú∞Á¥¢Âºï‰πüÂ∞Ü‰ΩøÁî®Á¥¢Âºï„ÄÇËøôÊòØÈªòËÆ§‰∏∫Êú¨Âú∞Á¥¢ÂºïÂÆåÊàêÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Áü•ÈÅìÂú®Âêå‰∏Ä‰∏™Âå∫ÂüüÊúçÂä°Âô®‰∏äÁöÑË°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆcoresideÁ°Æ‰øùÊü•ÊâæÊòØÊú¨Âú∞ÁöÑ„ÄÇ Index Removal Á¥¢ÂºïÁßªÈô§ Ë¶ÅÂà†Èô§Á¥¢ÂºïÔºå‰ΩøÁî®‰ª•‰∏ãËØ≠Âè•Ôºö1DROP INDEX my_index ON my_table Â¶ÇÊûúÁ¥¢ÂºïÂàóÂú®Êï∞ÊçÆË°®‰∏≠Ë¢´Âà†Èô§ÔºåÁ¥¢ÂºïÂ∞ÜËá™Âä®Ë¢´Âà†Èô§„ÄÇÂè¶Â§ñÔºåÂ¶ÇÊûúÂú®Êï∞ÊçÆË°®‰∏≠Âà†Èô§‰∏Ä‰∏™Ë¢´Ë¶ÜÁõñÁöÑÂàóÔºåÂÆÉ‰πü‰ºöËá™Âä®‰ªéÁ¥¢Âºï‰∏≠Âà†Èô§„ÄÇ Index Properties Á¥¢ÂºïÂ±ûÊÄß Â∞±ÂÉè‰ΩøÁî®CREATE TABLEËØ≠Âè•‰∏ÄÊ†∑ÔºåCREATE INDEXËØ≠Âè•ÂèØ‰ª•ÈÄöËøáÂ±ûÊÄßÂ∫îÁî®Âà∞Â∫ïÂ±ÇÁöÑHBaseË°®ÔºåÂåÖÊã¨ÂØπÂÖ∂ËøõË°åÈôêÂà∂ÁöÑËÉΩÂäõ:12CREATE INDEX my_index ON my_table (v2 DESC, v1) INCLUDE (v3) SALT_BUCKETS=10, DATA_BLOCK_ENCODING='NONE' ËØ∑Ê≥®ÊÑèÔºåÂ¶ÇÊûú‰∏ªË°®ÊòØÂä†ÁõêÁöÑÔºåÂàôÂØπ‰∫éÂÖ®Â±ÄÁ¥¢ÂºïÔºåËØ•Á¥¢ÂºïÂ∞Ü‰ª•Áõ∏ÂêåÁöÑÊñπÂºèËá™Âä®Ë¢´Âä†Áõê„ÄÇÂè¶Â§ñÔºåÁõ∏ÂØπ‰∫é‰∏ªÁ¥¢ÂºïË°®‰∏éÁ¥¢ÂºïË°®ÁöÑÂ§ßÂ∞èÔºåÁ¥¢ÂºïÁöÑMAX_FILESIZEÂêë‰∏ãË∞ÉÊï¥„ÄÇÊ¨≤‰∫ÜËß£Êõ¥Â§ö‰ø°ÊÅØÔºåËØ∑ÂèÇÈòÖËøôÈáå„ÄÇÂè¶‰∏ÄÊñπÈù¢Ôºå‰ΩøÁî®Êú¨Âú∞Á¥¢ÂºïÊó∂Ôºå‰∏çÂÖÅËÆ∏ÊåáÂÆöSALT_BUCKETS„ÄÇ Consistency Guarantees ‰∏ÄËá¥ÊÄß‰øùËØÅ Âú®Êèê‰∫§ÂêéÊàêÂäüËøîÂõûÂà∞ÂÆ¢Êà∑Á´ØÔºåÊâÄÊúâÊï∞ÊçÆ‰øùËØÅÂÜôÂÖ•ÊâÄÊúâÁõ∏ÂÖ≥ÁöÑÁ¥¢ÂºïÂíå‰∏ªË°®„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÁ¥¢ÂºïÊõ¥Êñ∞‰∏éHBaseÊèê‰æõÁöÑÁõ∏ÂêåÂº∫‰∏ÄËá¥ÊÄß‰øùËØÅÊòØÂêåÊ≠•ÁöÑ„ÄÇ ‰ΩÜÊòØÔºåÁî±‰∫éÁ¥¢ÂºïÂ≠òÂÇ®Âú®‰∏éÊï∞ÊçÆË°®‰∏çÂêåÁöÑË°®‰∏≠ÔºåÂõ†Ê≠§Ê†πÊçÆË°®ÁöÑÂ±ûÊÄßÂíåÁ¥¢ÂºïÁöÑÁ±ªÂûãÔºåË°®ÂíåÁ¥¢Âºï‰πãÈó¥ÁöÑ‰∏ÄËá¥ÊÄß‰ºöÂõ†ÊúçÂä°Âô®Á´ØÂ¥©Ê∫ÉËÄåÂ§±Ë¥•„ÄÇËøôÊòØÊÇ®ÁöÑÈúÄÊ±ÇÂíå‰ΩøÁî®Ê°à‰æãÈ©±Âä®ÁöÑÈáçË¶ÅËÆæËÆ°ËÄÉËôëÂõ†Á¥†„ÄÇ ‰∏ãÈù¢Ê¶ÇËø∞‰∫ÜÂêÑÁßç‰∏ÄËá¥ÊÄß‰øùËØÅÁöÑ‰∏çÂêåÈÄâÈ°π„ÄÇ Transactional Tables ‰∫ãÂä°Ë°®ÈÄöËøáÂ∞ÜÊÇ®ÁöÑË°®Â£∞Êòé‰∏∫‰∫ãÂä°ÊÄßÁöÑÔºåÊÇ®ÂèØ‰ª•ÂÆûÁé∞Ë°®ÂíåÁ¥¢Âºï‰πãÈó¥ÊúÄÈ´òÁ∫ßÂà´ÁöÑ‰∏ÄËá¥ÊÄß‰øùËØÅ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊÇ®ÁöÑË°®Á™ÅÂèòÂíåÁõ∏ÂÖ≥Á¥¢ÂºïÊõ¥Êñ∞ÁöÑÊèê‰∫§ÊòØÂÖ∑ÊúâÂº∫ ACID ‰øùËØÅÁöÑÂéüÂ≠ê„ÄÇÂ¶ÇÊûúÊèê‰∫§Â§±Ë¥•ÔºåÈÇ£‰πàÊÇ®ÁöÑÊï∞ÊçÆÔºàË°®ÊàñÁ¥¢ÂºïÔºâÈÉΩ‰∏ç‰ºöÊõ¥Êñ∞Ôºå‰ªéËÄåÁ°Æ‰øùÊÇ®ÁöÑË°®ÂíåÁ¥¢ÂºïÂßãÁªà‰øùÊåÅÂêåÊ≠•„ÄÇ ‰∏∫‰ªÄ‰πà‰∏çÊÄªÊòØÊää‰Ω†ÁöÑË°®Â£∞Êòé‰∏∫‰∫ãÂä°ÊÄßÁöÑÔºüËøôÂèØËÉΩÂæàÂ•ΩÔºåÁâπÂà´ÊòØÂ¶ÇÊûú‰Ω†ÁöÑË°®Ë¢´Â£∞Êòé‰∏∫‰∏çÂèØÂèòÁöÑÔºåÂõ†‰∏∫Âú®ËøôÁßçÊÉÖÂÜµ‰∏ã‰∫ãÂä°ÂºÄÈîÄÈùûÂ∏∏Â∞è„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊÇ®ÁöÑÊï∞ÊçÆÊòØÂèØÂèòÁöÑÔºåËØ∑Á°Æ‰øù‰∏é‰∫ãÂä°ÊÄßË°®ÂèëÁîüÂÜ≤Á™ÅÊ£ÄÊµãÁõ∏ÂÖ≥ÁöÑÂºÄÈîÄÂíåËøêË°å‰∫ãÂä°ÁÆ°ÁêÜÂô®ÁöÑËøêË°åÂºÄÈîÄÊòØÂèØ‰ª•Êé•ÂèóÁöÑ„ÄÇÊ≠§Â§ñÔºåÂÖ∑Êúâ‰∫åÁ∫ßÁ¥¢ÂºïÁöÑ‰∫ãÂä°Ë°®ÂèØËÉΩ‰ºöÈôç‰ΩéÂÜôÂÖ•Êï∞ÊçÆË°®ÁöÑÂèØÁî®ÊÄßÔºåÂõ†‰∏∫Êï∞ÊçÆË°®ÂèäÂÖ∂ËæÖÂä©Á¥¢ÂºïË°®ÂøÖÈ°ªÂèØÁî®ÔºåÂê¶ÂàôÂÜôÂÖ•Â∞ÜÂ§±Ë¥•„ÄÇ Immutable Tables ‰∏çÂèØÂèòË°®ÂØπ‰∫éÂÖ∂‰∏≠Êï∞ÊçÆÂè™ÂÜôÂÖ•‰∏ÄÊ¨°ËÄå‰ªé‰∏çÊõ¥Êñ∞ÁöÑË°®ÔºåÂèØ‰ª•ËøõË°åÊüê‰∫õ‰ºòÂåñ‰ª•ÂáèÂ∞ëÂ¢ûÈáèÁª¥Êä§ÁöÑÂÜôÂÖ•Êó∂Èó¥ÂºÄÈîÄ„ÄÇËøôÊòØÂ∏∏ËßÅÁöÑÊó∂Èó¥Â∫èÂàóÊï∞ÊçÆÔºåÂ¶ÇÊó•ÂøóÊàñ‰∫ã‰ª∂Êï∞ÊçÆÔºå‰∏ÄÊó¶ÂÜôÂÖ•Ë°åÔºåÂÆÉÂ∞ÜÊ∞∏Ëøú‰∏ç‰ºöË¢´Êõ¥Êñ∞„ÄÇË¶ÅÂà©Áî®Ëøô‰∫õ‰ºòÂåñÔºåÈÄöËøáÂ∞Ü IMMUTABLE_ROWS = true Â±ûÊÄßÊ∑ªÂä†Âà∞ÊÇ®ÁöÑ DDL ËØ≠Âè•‰∏≠ÔºåÂ∞ÜÊÇ®ÁöÑË°®Â£∞Êòé‰∏∫‰∏çÂèØÂèòÔºö1CREATE TABLE my_table (k VARCHAR PRIMARY KEY, v VARCHAR) IMMUTABLE_ROWS=true ‰ΩøÁî® IMMUTABLE_ROWS = true Â£∞ÊòéÁöÑË°®‰∏äÁöÑÊâÄÊúâÁ¥¢ÂºïÈÉΩË¢´ËÆ§‰∏∫ÊòØ‰∏çÂèØÂèòÁöÑÔºàËØ∑Ê≥®ÊÑèÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãË°®Ë¢´ËÆ§‰∏∫ÊòØÂèØÂèòÁöÑÔºâ„ÄÇÂØπ‰∫éÂÖ®Â±Ä‰∏çÂèØÂèòÁ¥¢ÂºïÔºåÁ¥¢ÂºïÂÆåÂÖ®Âú®ÂÆ¢Êà∑Á´ØÁª¥Êä§ÔºåÁ¥¢ÂºïË°®ÊòØÂú®Êï∞ÊçÆË°®ÂèëÁîüÊõ¥ÊîπÊó∂ÁîüÊàêÁöÑ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÊú¨Âú∞‰∏çÂèØÂèòÁ¥¢ÂºïÂú®ÊúçÂä°Âô®Á´Ø‰øùÊåÅ‰∏çÂèò„ÄÇËØ∑Ê≥®ÊÑèÔºåÊ≤°Êúâ‰ªª‰Ωï‰øùÊä§Êé™ÊñΩÂèØ‰ª•Âº∫Âà∂ÊâßË°åÔºåÂ£∞Êòé‰∏∫‰∏çÂèØÂèòÁöÑË°®ÂÆûÈôÖ‰∏ä‰∏ç‰ºöÊîπÂèòÊï∞ÊçÆÔºàÂõ†‰∏∫Ëøô‰ºöÂê¶ÂÆöÊâÄËææÂà∞ÁöÑÊÄßËÉΩÂ¢ûÁõäÔºâ„ÄÇÂ¶ÇÊûúÂèëÁîüËøôÁßçÊÉÖÂÜµÔºåÁ¥¢ÂºïÂ∞Ü‰∏çÂÜç‰∏éË°®ÂêåÊ≠•„ÄÇ Â¶ÇÊûúÊÇ®Êúâ‰∏Ä‰∏™Áé∞ÊúâÁöÑË°®ÔºåÊÇ®ÊÉ≥‰ªé‰∏çÂèØÂèòÁ¥¢ÂºïÂàáÊç¢Âà∞ÂèØÂèòÁ¥¢ÂºïÔºåËØ∑‰ΩøÁî®ALTER TABLEÂëΩ‰ª§ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö1ALTER TABLE my_table SET IMMUTABLE_ROWS=false Èùû‰∫ãÂä°ÊÄßÔºå‰∏çÂèØÂèòË°®ÁöÑÁ¥¢ÂºïÊ≤°ÊúâËá™Âä®Â§ÑÁêÜÊèê‰∫§Â§±Ë¥•ÁöÑÊú∫Âà∂„ÄÇ‰øùÊåÅË°®ÂíåÁ¥¢Âºï‰πãÈó¥ÁöÑ‰∏ÄËá¥ÊÄßÁïôÁªôÂÆ¢Êà∑Á´ØÂ§ÑÁêÜ„ÄÇÂõ†‰∏∫Êõ¥Êñ∞ÊòØÂπÇÁ≠âÁöÑÔºåÊâÄ‰ª•ÊúÄÁÆÄÂçïÁöÑËß£ÂÜ≥ÊñπÊ°àÊòØÂÆ¢Êà∑Á´ØÁªßÁª≠ÈáçËØï‰∏ÄÊâπÁ™ÅÂèòÔºåÁõ¥Âà∞ÂÆÉ‰ª¨ÊàêÂäü„ÄÇ Mutable Tables ÂèØÂèòË°®ÂØπ‰∫éÈùû‰∫ãÂä°ÊÄßÂèØÂèòË°®ÔºåÊàë‰ª¨ÈÄöËøáÂ∞ÜÁ¥¢ÂºïÊõ¥Êñ∞Ê∑ªÂä†Âà∞‰∏ªË°®Ë°åÁöÑÈ¢ÑÂÜôÊó•ÂøóÔºàWALÔºâÊù°ÁõÆÊù•Áª¥Êä§Á¥¢ÂºïÊõ¥Êñ∞ÊåÅ‰πÖÊÄß„ÄÇÂè™ÊúâÂú®WALÊù°ÁõÆÊàêÂäüÂêåÊ≠•Âà∞Á£ÅÁõòÂêéÔºåÊàë‰ª¨Êâç‰ºöÂ∞ùËØïÊõ¥Êñ∞Á¥¢Âºï/‰∏ªË°®„ÄÇÊàë‰ª¨ÈªòËÆ§Âπ∂Ë°åÁºñÂÜôÁ¥¢ÂºïÊõ¥Êñ∞Ôºå‰ªéËÄåÂØºËá¥ÈùûÂ∏∏È´òÁöÑÂêûÂêêÈáè„ÄÇÂ¶ÇÊûúÊúçÂä°Âô®Âú®Êàë‰ª¨ÂÜôÁ¥¢ÂºïÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÂ¥©Ê∫É‰∫ÜÔºåÊàë‰ª¨‰ºöÈáçÊí≠ÊâÄÊúâÁ¥¢ÂºïÊõ¥Êñ∞Âà∞WALÊÅ¢Â§çËøáÁ®ã‰∏≠ÁöÑÁ¥¢ÂºïË°®ÔºåÂπ∂‰æùËµñÊõ¥Êñ∞ÁöÑÂπÇÁ≠âÊÄßÊù•Á°Æ‰øùÊ≠£Á°ÆÊÄß„ÄÇÂõ†Ê≠§ÔºåÈùû‰∫ãÂä°ÊÄßÂèØÂèòË°®‰∏äÁöÑÁ¥¢ÂºïÂè™ÊòØ‰∏ªË°®ËÉåÂêéÁöÑ‰∏ÄÊâπÁºñËæë„ÄÇ ÈáçË¶ÅÁöÑÊòØË¶ÅÊ≥®ÊÑèÂá†ÁÇπÔºö ÂØπ‰∫éÈùû‰∫ãÂä°ÊÄßË°®ÔºåÊÇ®ÂèØ‰ª•ÁúãÂà∞Á¥¢ÂºïË°®‰∏é‰∏ªË°®‰∏çÂêåÊ≠•„ÄÇ Â¶Ç‰∏äÊâÄËø∞ÔºåËøôÊòØÂèØ‰ª•ÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Âú®ÂæàÁü≠ÁöÑÊó∂Èó¥ÂÜÖÂè™ÊúâÂæàÂ∞èÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂπ∂‰∏î‰∏çÂêåÊ≠• ÊØè‰∏™Êï∞ÊçÆË°åÂèäÂÖ∂Á¥¢ÂºïË°åÈÉΩ‰øùËØÅË¢´ÂÜôÂÖ•Êàñ‰∏¢Â§± - Êàë‰ª¨‰ªéÊù•Ê≤°ÊúâÁúãÂà∞ÈÉ®ÂàÜÊõ¥Êñ∞ÔºåÂõ†‰∏∫ËøôÊòØHBaseÂéüÂ≠êÊÄß‰øùËØÅÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ È¶ñÂÖàÂ∞ÜÊï∞ÊçÆÂÜôÂÖ•Ë°®‰∏≠ÔºåÁÑ∂ÂêéÂÜôÂÖ•Á¥¢ÂºïË°®ÔºàÂ¶ÇÊûúÁ¶ÅÁî®WALÔºåÂàôÂèç‰πã‰∫¶ÁÑ∂Ôºâ„ÄÇ Singular Write PathÊúâ‰∏Ä‰∏™‰øùËØÅÂ§±Ë¥•Â±ûÊÄßÁöÑÂÜôÂÖ•Ë∑ØÂæÑ„ÄÇÊâÄÊúâÂÜôÂÖ•HRegionÁöÑÂÜÖÂÆπÈÉΩË¢´Êàë‰ª¨ÁöÑÂçèÂ§ÑÁêÜÂô®Êã¶Êà™„ÄÇÁÑ∂ÂêéÔºåÊàë‰ª¨Ê†πÊçÆÊåÇËµ∑Êõ¥Êñ∞ÔºàÊàñÊõ¥Êñ∞ÔºåÂ¶ÇÊûúÊòØÊâπÂ§ÑÁêÜÔºâÊûÑÂª∫Á¥¢ÂºïÊõ¥Êñ∞„ÄÇÁÑ∂ÂêéËøô‰∫õÊõ¥Êñ∞Ë¢´ÈôÑÂä†Âà∞ÂéüÂßãÊõ¥Êñ∞ÁöÑWALÊù°ÁõÆ„ÄÇ Â¶ÇÊûúÂú®Ê≠§‰πãÂâçÊàë‰ª¨ÈÅáÂà∞‰ªª‰ΩïÈóÆÈ¢òÔºåÊàë‰ª¨‰ºöÂ∞ÜÂ§±Ë¥•ËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåÂπ∂‰∏îÊ≤°Êúâ‰ªª‰ΩïÊï∞ÊçÆË¢´ÊåÅ‰πÖÂåñÊàñËÄÖ‰∏çÂèØËßÅ„ÄÇ ‰∏ÄÊó¶WALË¢´ÂÜôÂÖ•ÔºåÊàë‰ª¨Á°Æ‰øùÂç≥‰ΩøÂú®Â§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ¥¢ÂºïÂíå‰∏ªË°®Êï∞ÊçÆ‰πüÂ∞ÜÂèòÂæóÂèØËßÅ„ÄÇ Â¶ÇÊûúÊúçÂä°Âô®ÂèëÁîüÂ¥©Ê∫ÉÔºåÊàë‰ª¨‰ºö‰ΩøÁî®ÈÄöÂ∏∏ÁöÑWALÈáçÊí≠Êú∫Âà∂ÈáçÊí≠Á¥¢ÂºïÊõ¥Êñ∞„ÄÇ Â¶ÇÊûúÊúçÂä°Âô®Ê≤°ÊúâÂ¥©Ê∫ÉÔºåÊàë‰ª¨Âè™ÊòØÂ∞ÜÁ¥¢ÂºïÊõ¥Êñ∞ÊèíÂÖ•Âà∞ÂÆÉ‰ª¨ÂêÑËá™ÁöÑË°®‰∏≠„ÄÇ Â¶ÇÊûúÁ¥¢ÂºïÊõ¥Êñ∞Â§±Ë¥•Ôºå‰∏ãÈù¢Ê¶ÇËø∞‰∫Ü‰øùÊåÅ‰∏ÄËá¥ÊÄßÁöÑÂêÑÁßçÊñπÊ≥ï„ÄÇ Â¶ÇÊûúPhoenixÁ≥ªÁªüÁõÆÂΩïË°®ÂèëÁîüÊïÖÈöúÊó∂Êó†Ê≥ïÂà∞ËææÔºåÊàë‰ª¨Âº∫Âà∂ÊúçÂä°Âô®Á´ãÂç≥‰∏≠Ê≠¢Âπ∂Â§±Ë¥•ÔºåËØ∑Âú®JVM‰∏äË∞ÉÁî®System.exitÔºåÂº∫Âà∂ÊúçÂä°Âô®Ê≠ªÊú∫„ÄÇÈÄöËøáÊùÄÊ≠ªÊúçÂä°Âô®ÔºåÊàë‰ª¨Á°Æ‰øùWALÂ∞ÜÂú®ÊÅ¢Â§çÊó∂ÈáçÊí≠ÔºåÂ∞ÜÁ¥¢ÂºïÊõ¥Êñ∞ÈáçÊí≠Âà∞Áõ∏Â∫îÁöÑË°®‰∏≠„ÄÇËøôÁ°Æ‰øù‰∫Ü‰∫åÁ∫ßÁ¥¢ÂºïÂú®Áü•ÈÅìÊó†ÊïàÁä∂ÊÄÅÊó∂‰∏ç‰ºöÁªßÁª≠‰ΩøÁî®„ÄÇ Á¶ÅÊ≠¢Ë°®ÂÜôÂÖ•ÔºåÁõ¥Âà∞ÂèØÂèòÁöÑÁ¥¢ÂºïÊòØ‰∏ÄËá¥ÁöÑÂú®Èùû‰∫ãÂä°ÊÄßË°®ÂíåÁ¥¢Âºï‰πãÈó¥‰øùÊåÅ‰∏ÄËá¥ÊÄßÁöÑÊúÄÈ´òÁ∫ßÂà´ÊòØÂ£∞ÊòéÂú®Êõ¥Êñ∞Á¥¢ÂºïÂ§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÂ∫îÊöÇÊó∂Á¶ÅÊ≠¢ÂÜôÂÖ•Êï∞ÊçÆË°®„ÄÇÂú®Ê≠§‰∏ÄËá¥ÊÄßÊ®°Âºè‰∏ãÔºåË°®ÂíåÁ¥¢ÂºïÂ∞Ü‰øùÁïôÂú®ÂèëÁîüÊïÖÈöú‰πãÂâçÁöÑÊó∂Èó¥Êà≥ÔºåÂÜôÂÖ•Êï∞ÊçÆË°®Â∞ÜË¢´Á¶ÅÊ≠¢ÔºåÁõ¥Âà∞Á¥¢ÂºïÈáçÊñ∞ËÅîÊú∫Âπ∂‰∏éÊï∞ÊçÆË°®ÂêåÊ≠•„ÄÇËØ•Á¥¢ÂºïÂ∞Ü‰øùÊåÅÊ¥ªÂä®Áä∂ÊÄÅÔºåÂπ∂ÂÉèÂæÄÂ∏∏‰∏ÄÊ†∑ÁªßÁª≠‰ΩøÁî®Êü•ËØ¢„ÄÇ ‰ª•‰∏ãÊúçÂä°Âô®Á´ØÈÖçÁΩÆÊéßÂà∂Ê≠§Ë°å‰∏∫Ôºö phoenix.index.failure.block.writeÂøÖÈ°ª‰∏∫trueÔºå‰ª•‰æøÂú®ÂèëÁîüÊèê‰∫§Â§±Ë¥•Êó∂ÂÜôÂÖ•Êï∞ÊçÆË°®‰ª•Â§±Ë¥•ÔºåÁõ¥Âà∞ÂèØ‰ª•‰ΩøÁî®Êï∞ÊçÆË°®ËøΩ‰∏äÁ¥¢Âºï„ÄÇ phoenix.index.failure.handling.rebuildÂøÖÈ°ª‰∏∫trueÔºàÈªòËÆ§ÂÄºÔºâÔºå‰ª•‰æøÂú®ÂèëÁîüÊèê‰∫§Â§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÂú®ÂêéÂè∞ÈáçÂª∫ÂèØÂèòÁ¥¢Âºï„ÄÇ ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÁõ¥Âà∞‰∏ÄËá¥ÊÄßÊÅ¢Â§çÂ¶ÇÊûúÂú®Êèê‰∫§Êó∂ÂÜôÂÖ•Â§±Ë¥•ÔºåÂÖ∑ÊúâÂèØÂèòÁ¥¢ÂºïÁöÑÈªòËÆ§Ë°å‰∏∫ÊòØÂ∞ÜÁ¥¢ÂºïÊ†áËÆ∞‰∏∫Á¶ÅÁî®,Âú®ÂêéÂè∞ÈÉ®ÂàÜÈáçÂª∫ÂÆÉ‰ª¨ÔºåÁÑ∂ÂêéÂú®ÊÅ¢Â§ç‰∏ÄËá¥ÊÄßÊó∂ÂÜçÊ¨°Â∞ÜÂÖ∂Ê†áËÆ∞‰∏∫Ê¥ªÂä®Áä∂ÊÄÅ„ÄÇÂú®ËøôÁßç‰∏ÄËá¥ÊÄßÊ®°Âºè‰∏ãÔºåÂú®ÈáçÂª∫‰∫åÁ∫ßÁ¥¢ÂºïÊó∂ÔºåÂÜôÂÖ•Êï∞ÊçÆË°®‰∏ç‰ºöË¢´ÈòªÂ°û„ÄÇ‰ΩÜÊòØÔºåÂú®ÈáçÂª∫ËøáÁ®ã‰∏≠Ôºå‰∫åÁ∫ßÁ¥¢Âºï‰∏ç‰ºöË¢´Êü•ËØ¢‰ΩøÁî®„ÄÇ ‰ª•‰∏ãÊúçÂä°Âô®Á´ØÈÖçÁΩÆÊéßÂà∂Ê≠§Ë°å‰∏∫Ôºö phoenix.index.failure.handling.rebuildÂøÖÈ°ª‰∏∫trueÔºàÁº∫ÁúÅÂÄºÔºâÔºå‰ª•‰æøÂú®ÂèëÁîüÊèê‰∫§Â§±Ë¥•ÁöÑÊÉÖÂÜµ‰∏ãÂú®ÂêéÂè∞ÈáçÂª∫ÂèØÂèòÁ¥¢Âºï„ÄÇ phoenix.index.failure.handling.rebuild.intervalÊéßÂà∂ÊúçÂä°Âô®Ê£ÄÊü•ÊòØÂê¶ÈúÄË¶ÅÈÉ®ÂàÜÈáçÂª∫ÂèØÂèòÁ¥¢Âºï‰ª•Ëµ∂‰∏äÊï∞ÊçÆË°®Êõ¥Êñ∞ÁöÑÊØ´ÁßíÈ¢ëÁéá„ÄÇÈªòËÆ§ÂÄºÊòØ10000Êàñ10Áßí„ÄÇ phoenix.index.failure.handling.rebuild.overlap.timeÊéßÂà∂ÊâßË°åÈÉ®ÂàÜÈáçÂª∫Êó∂‰ªéÂèëÁîüÊïÖÈöúÁöÑÊó∂Èó¥Êà≥ÂºÄÂßãËøîÂõûÁöÑÊØ´ÁßíÊï∞„ÄÇÈªòËÆ§ÂÄºÊòØ1„ÄÇ ÂÜôÂÖ•Â§±Ë¥•Êó∂Á¶ÅÁî®ÂèØÂèòÁ¥¢ÂºïÔºåÈúÄË¶ÅÊâãÂä®ÈáçÂª∫ËøôÊòØÂèØÂèò‰∫åÁ∫ßÁ¥¢ÂºïÁöÑÊúÄ‰Ωé‰∏ÄËá¥ÊÄßÊ∞¥Âπ≥„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂΩìÂÜôÂÖ•‰∫åÁ∫ßÁ¥¢ÂºïÂ§±Ë¥•Êó∂ÔºåÁ¥¢ÂºïÂ∞ÜË¢´Ê†áËÆ∞‰∏∫Á¶ÅÁî®ÔºåÂπ∂‰∏îÊâãÂä®ÈáçÂª∫ÊâÄÈúÄÁöÑÁ¥¢Âºï‰ª•‰ΩøÂÖ∂ÂÜçÊ¨°Ë¢´Êü•ËØ¢‰ΩøÁî®„ÄÇ ‰ª•‰∏ãÊúçÂä°Âô®Á´ØÈÖçÁΩÆÊéßÂà∂Ê≠§Ë°å‰∏∫Ôºö Â¶ÇÊûúÊèê‰∫§Â§±Ë¥•Ôºåphoenix.index.failure.handling.rebuildÂøÖÈ°ªËÆæÁΩÆ‰∏∫falseÔºå‰ª•Á¶ÅÊ≠¢Âú®ÂêéÂè∞ÈáçÂª∫ÂèØÂèòÁ¥¢Âºï„ÄÇ Setup ËÆæÁΩÆ Èùû‰∫ãÂä°ÊÄßÔºåÂèØÂèòÁ¥¢ÂºïÈúÄË¶ÅÂú®Âå∫ÂüüÊúçÂä°Âô®Âíå‰∏ªÊúçÂä°Âô®‰∏äËøêË°åÁâπÊÆäÁöÑÈÖçÁΩÆÈÄâÈ°π - PhoenixÁ°Æ‰øùÂú®Ë°®‰∏äÂêØÁî®ÂèØÂèòÁ¥¢ÂºïÊó∂ÔºåÂÆÉ‰ª¨Â∑≤Ê≠£Á°ÆËÆæÁΩÆ;Â¶ÇÊûúÊú™ËÆæÁΩÆÊ≠£Á°ÆÁöÑÂ±ûÊÄßÔºåÂàôÂ∞ÜÊó†Ê≥ï‰ΩøÁî®ËæÖÂä©Á¥¢Âºï„ÄÇÂ∞ÜËøô‰∫õËÆæÁΩÆÊ∑ªÂä†Âà∞ÊÇ®ÁöÑhbase-site.xmlÂêéÔºåÊÇ®ÈúÄË¶ÅÈáçÂêØÈõÜÁæ§„ÄÇ ÊÇ®Â∞ÜÈúÄË¶ÅÂ∞Ü‰ª•‰∏ãÂèÇÊï∞Ê∑ªÂä†Âà∞ÊØè‰∏™Âå∫ÂüüÊúçÂä°Âô®‰∏äÁöÑhbase-site.xmlÔºö1234&lt;property&gt; &lt;name&gt;hbase.regionserver.wal.codec&lt;/name&gt; &lt;value&gt;org.apache.hadoop.hbase.regionserver.wal.IndexedWALEditCodec&lt;/value&gt;&lt;/property&gt; ‰∏äÈù¢ÁöÑÂ±ûÊÄß‰ΩøÂÆöÂà∂ÁöÑWALÁºñËæëËÉΩÂ§üË¢´ÂÜôÂÖ•ÔºåÁ°Æ‰øùÁ¥¢ÂºïÊõ¥Êñ∞ÁöÑÊ≠£Á°ÆÂÜôÂÖ•/ÈáçÊí≠„ÄÇËøô‰∏™ÁºñËß£Á†ÅÂô®ÊîØÊåÅÈÄöÂ∏∏ÁöÑ‰∏ªÊú∫WALEditÈÄâÈ°πÔºåÊúÄÊòæÁùÄÁöÑÊòØWALEditÂéãÁº©„ÄÇ12345678910&lt;property&gt; &lt;name&gt;hbase.region.server.rpc.scheduler.factory.class&lt;/name&gt; &lt;value&gt;org.apache.hadoop.hbase.ipc.PhoenixRpcSchedulerFactory&lt;/value&gt; &lt;description&gt;Factory to create the Phoenix RPC Scheduler that uses separate queues for index and metadata updates&lt;/description&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hbase.rpc.controllerfactory.class&lt;/name&gt; &lt;value&gt;org.apache.hadoop.hbase.ipc.controller.ServerRpcControllerFactory&lt;/value&gt; &lt;description&gt;Factory to create the Phoenix RPC Scheduler that uses separate queues for index and metadata updates&lt;/description&gt;&lt;/property&gt; ÈÄöËøáÁ°Æ‰øùÁ¥¢ÂºïÊõ¥Êñ∞ÁöÑ‰ºòÂÖàÁ∫ßÈ´ò‰∫éÊï∞ÊçÆÊõ¥Êñ∞Ôºå‰∏äËø∞Â±ûÊÄßÂèØÈò≤Ê≠¢Âú®ÂÖ®Â±ÄÁ¥¢ÂºïÔºàHBase 0.98.4+ÂíåPhoenix 4.3.1+ÔºâÁöÑÁ¥¢ÂºïÁª¥Êä§ËøáÁ®ã‰∏≠ÂèëÁîüÊ≠ªÈîÅ„ÄÇÂÆÉËøòÈÄöËøáÁ°Æ‰øùÂÖÉÊï∞ÊçÆrpcË∞ÉÁî®ÊØîÊï∞ÊçÆrpcË∞ÉÁî®ÂÖ∑ÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ßÊù•Èò≤Ê≠¢Ê≠ªÈîÅ„ÄÇ ‰ªéPhoenix 4.8.0ÂºÄÂßãÔºå‰∏çÈúÄË¶ÅÊõ¥ÊîπÈÖçÁΩÆÂ∞±ÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Á¥¢Âºï„ÄÇÂú®Phoenix 4.7ÂèäÊõ¥‰ΩéÁâàÊú¨‰∏≠Ôºå‰∏ªÊúçÂä°Âô®ËäÇÁÇπÂíåÂå∫ÂüüÊúçÂä°Âô®ËäÇÁÇπ‰∏äÁöÑÊúçÂä°Âô®Á´Øhbase-site.xmlÈúÄË¶ÅËøõË°å‰ª•‰∏ãÈÖçÁΩÆÊõ¥ÊîπÔºö123456789101112&lt;property&gt; &lt;name&gt;hbase.master.loadbalancer.class&lt;/name&gt; &lt;value&gt;org.apache.phoenix.hbase.index.balancer.IndexLoadBalancer&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hbase.coprocessor.master.classes&lt;/name&gt; &lt;value&gt;org.apache.phoenix.hbase.index.master.IndexMasterObserver&lt;/value&gt;&lt;/property&gt;&lt;property&gt; &lt;name&gt;hbase.coprocessor.regionserver.classes&lt;/name&gt; &lt;value&gt;org.apache.hadoop.hbase.regionserver.LocalIndexMerger&lt;/value&gt;&lt;/property&gt; ÂçáÁ∫ß4.8.0‰πãÂâçÂàõÂª∫ÁöÑÊú¨Âú∞Á¥¢ÂºïÂú®ÊúçÂä°Âô®‰∏äÂ∞ÜPhoenixÂçáÁ∫ßÂà∞4.8.0‰ª•‰∏äÁâàÊú¨Êó∂ÔºåÂ¶ÇÊûúÂ≠òÂú®ÔºåËØ∑‰ªéhbase-site.xml‰∏≠Èô§Âéª‰ª•‰∏ä‰∏â‰∏™‰∏éÊú¨Âú∞Á¥¢ÂºïÁõ∏ÂÖ≥ÁöÑÈÖçÁΩÆ„ÄÇ‰ªéÂÆ¢Êà∑Á´ØÔºåÊàë‰ª¨ÊîØÊåÅÂú®Á∫øÔºàÂú®ÂàùÂßãÂåñÊù•Ëá™4.8.0+ÁâàÊú¨ÁöÑphoenixÂÆ¢Êà∑Á´ØÁöÑËøûÊé•Êó∂ÔºâÂíåÁ¶ªÁ∫øÔºà‰ΩøÁî®psqlÂ∑•ÂÖ∑ÔºâÂú®4.8.0‰πãÂâçÂàõÂª∫ÁöÑÊú¨Âú∞Á¥¢ÂºïÁöÑÂçáÁ∫ß„ÄÇ‰Ωú‰∏∫ÂçáÁ∫ßÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÊàë‰ª¨‰ª•ASYNCÊ®°ÂºèÈáçÊñ∞ÂàõÂª∫Êú¨Âú∞Á¥¢Âºï„ÄÇÂçáÁ∫ßÂêéÁî®Êà∑ÈúÄË¶Å‰ΩøÁî®IndexToolÂª∫Á´ãÁ¥¢Âºï„ÄÇ Âú®ÂçáÁ∫ß‰πãÂêé‰ΩøÁî®ÂÆ¢Êà∑Á´ØÈÖçÁΩÆ„ÄÇ phoenix.client.localIndexUpgrade ÂÄº‰∏∫ true ÂàôË°®Á§∫Âú®Á∫øÂçáÁ∫ß, false Ë°®Á§∫Á¶ªÁ∫øÂçáÁ∫ß„ÄÇ ÈªòËÆ§‰∏∫ true „ÄÇ ÂëΩ‰ª§‰ΩøÁî®psqlÂ∑•ÂÖ∑$ psql [zookeeper] -lËøêË°åÁ¶ªÁ∫øÂçáÁ∫ß„ÄÇ Tuning Á¥¢ÂºïÊòØÁõ∏ÂΩìÂø´ÁöÑ„ÄÇ‰ΩÜÊòØÔºåË¶Å‰ºòÂåñÊÇ®ÁöÑÁâπÂÆöÁéØÂ¢ÉÂíåÂ∑•‰ΩúË¥üËΩΩÔºåÂèØ‰ª•Ë∞ÉÊï¥‰∏Ä‰∫õÂ±ûÊÄß„ÄÇ ‰ª•‰∏ãÊâÄÊúâÂèÇÊï∞ÂøÖÈ°ªÂú®hbase-site.xml‰∏≠ËÆæÁΩÆ - ÂØπ‰∫éÊï¥‰∏™ÈõÜÁæ§ÂíåÊâÄÊúâÁ¥¢ÂºïË°®Ôºå‰ª•ÂèäÂú®Âêå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÁöÑÊâÄÊúâÂå∫Âüü‰∏äÈÉΩÊòØÂ¶ÇÊ≠§Ôºà‰æãÂ¶ÇÔºå‰∏ÄÂè∞ÊúçÂä°Âô®‰πü‰∏ç‰ºö‰∏ÄÊ¨°ÂÜôÂÖ•ËÆ∏Â§ö‰∏çÂêåÁöÑÁ¥¢ÂºïË°®Ôºâ„ÄÇ index.builder.threads.max Áî®‰∫é‰ªé‰∏ªË°®Êõ¥Êñ∞ÊûÑÂª∫Á¥¢ÂºïÊõ¥Êñ∞ÁöÑÁ∫øÁ®ãÊï∞ Â¢ûÂä†Ê≠§ÂÄºÂÖãÊúç‰∫Ü‰ªéÂ∫ïÂ±ÇHRegionËØªÂèñÂΩìÂâçË°åÁä∂ÊÄÅÁöÑÁì∂È¢à„ÄÇË∞ÉÊï¥Ëøô‰∏™ÂÄºÂ§™È´òÔºåÂè™‰ºöÂ¢ûÂä†HRegionÁì∂È¢àÔºåÂõ†‰∏∫ÂÆÉÂ∞ÜÊó†Ê≥ïÂ§ÑÁêÜÂ§™Â§öÁöÑÂπ∂ÂèëÊâ´ÊèèËØ∑Ê±ÇÔºå‰ª•Âèä‰∏ÄËà¨ÁöÑÁ∫øÁ®ã‰∫§Êç¢ÈóÆÈ¢ò„ÄÇ Default: 10 index.builder.threads.keepalivetime Âú®ÊûÑÂª∫Âô®Á∫øÁ®ãÊ±†‰∏≠‰ΩøÁ∫øÁ®ãËøáÊúüÂêéÁöÑÊó∂Èó¥Ôºà‰ª•Áßí‰∏∫Âçï‰ΩçÔºâ„ÄÇ Êú™‰ΩøÁî®ÁöÑÁ∫øÁ®ã‰ºöÂú®ËøôÊÆµÊó∂Èó¥ÂêéÁ´ãÂç≥ÈáäÊîæÔºåËÄå‰∏ç‰ºö‰øùÁïôÊ†∏ÂøÉÁ∫øÁ®ã Default: 60 index.writer.threads.max Number of threads to use when writing to the target index tables. The first level of parallelization, on a per-table basis - it should roughly correspond to the number of index tables Default: 10 index.writer.threads.keepalivetime Amount of time in seconds after we expire threads in the writer thread pool. Unused threads are immediately released after this amount of time and not core threads are retained (though this last is a small concern as tables are expected to sustain a fairly constant write load), but simultaneously allows us to drop threads if we are not seeing the expected load. Default: 60 hbase.htable.threads.max Number of threads each index HTable can use for writes. Increasing this allows more concurrent index updates (for instance across batches), leading to high overall throughput. Default: 2,147,483,647 hbase.htable.threads.keepalivetime Amount of time in seconds after we expire threads in the HTable‚Äôs thread pool. Using the ‚Äúdirect handoff‚Äù approach, new threads will only be created if it is necessary and will grow unbounded. This could be bad but HTables only create as many Runnables as there are region servers; therefore, it also scales when new region servers are added. Default: 60 index.tablefactory.cache.size Number of index HTables we should keep in cache. Increasing this number ensures that we do not need to recreate an HTable for each attempt to write to an index table. Conversely, you could see memory pressure if this value is set too high. Default: 10 org.apache.phoenix.regionserver.index.priority.min Value to specify to bottom (inclusive) of the range in which index priority may lie. Default: 1000 org.apache.phoenix.regionserver.index.priority.max Value to specify to top (exclusive) of the range in which index priority may lie. Higher priorites within the index min/max range do not means updates are processed sooner. Default: 1050 org.apache.phoenix.regionserver.index.handler.count Number of threads to use when serving index write requests for global index maintenance. Though the actual number of threads is dictated by the Max(number of call queues, handler count), where the number of call queues is determined by standard HBase configuration. To further tune the queues, you can adjust the standard rpc queue length parameters (currently, there are no special knobs for the index queues), specifically ipc.server.max.callqueue.length and ipc.server.callqueue.handler.factor. See the HBase Reference Guide for more details. Default: 30 Performance We track secondary index performance via our performance framework. This is a generic test of performance based on defaults - your results will vary based on hardware specs as well as you individual configuration. That said, we have seen secondary indexing (both immutable and mutable) go as quickly as &lt; 2x the regular write path on a small, (3 node) desktop-based cluster. This is actually pretty reasonable as we have to write to multiple tables as well as build the index update. Index Scrutiny Tool With Phoenix 4.12, there is now a tool to run a MapReduce job to verify that an index table is valid against its data table. The only way to find orphaned rows in either table is to scan over all rows in the table and do a lookup in the other table for the corresponding row. For that reason, the tool can run with either the data or index table as the ‚Äúsource‚Äù table, and the other as the ‚Äútarget‚Äù table. The tool writes all invalid rows it finds either to file or to an output table PHOENIX_INDEX_SCRUTINY. An invalid row is a source row that either has no corresponding row in the target table, or has an incorrect value in the target table (i.e. covered column value). The tool has job counters that track its status. VALID_ROW_COUNT, INVALID_ROW_COUNT, BAD_COVERED_COL_VAL_COUNT. Note that invalid rows - bad col val rows = number of orphaned rows. These counters are written to the table PHOENIX_INDEX_SCRUTINY_METADATA, along with other job metadata. The Index Scrutiny Tool can be launched via the hbase command (in hbase/bin) as follows: 1hbase org.apache.phoenix.mapreduce.index.IndexScrutinyTool -dt my_table -it my_index -o It can also be run from Hadoop using either the phoenix-core or phoenix-server jar as follows: 1HADOOP_CLASSPATH=$(hbase mapredcp) hadoop jar phoenix-&lt;version&gt;-server.jar org.apache.phoenix.mapreduce.index.IndexScrutinyTool -dt my_table -it my_index -o By default two mapreduce jobs are launched, one with the data table as the source table and one with the index table as the source table. The following parameters can be used with the Index Scrutiny Tool: ÁøªËØëËá™:secondary_indexing","raw":null,"content":null,"categories":[{"name":"phoenix","slug":"phoenix","permalink":"https://stanxia.github.io/categories/phoenix/"}],"tags":[{"name":"phoenix","slug":"phoenix","permalink":"https://stanxia.github.io/tags/phoenix/"}]},{"title":"Google Bigtable ‰∏≠ÊñáÁâà","slug":"Google-Bigtable-‰∏≠ÊñáÁâà","date":"2017-12-25T16:48:35.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/25/Google-Bigtable-‰∏≠ÊñáÁâà/","link":"","permalink":"https://stanxia.github.io/2017/12/25/Google-Bigtable-‰∏≠ÊñáÁâà/","excerpt":"ÊëòË¶Å\nBigtable ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÁªìÊûÑÂåñÊï∞ÊçÆÂ≠òÂÇ®Á≥ªÁªüÔºåÂÆÉË¢´ËÆæËÆ°Áî®Êù•Â§ÑÁêÜÊµ∑ÈáèÊï∞ÊçÆ:ÈÄöÂ∏∏ÊòØÂàÜÂ∏ÉÂú®Êï∞ÂçÉÂè∞ÊôÆÈÄöÊúçÂä°Âô®‰∏äÁöÑ PB Á∫ßÁöÑÊï∞ÊçÆ„ÄÇ\nGoogle ÁöÑÂæàÂ§öÈ°πÁõÆ‰ΩøÁî® Bigtable Â≠òÂÇ®Êï∞ÊçÆÔºåÂåÖÊã¨ Web Á¥¢Âºï„ÄÅGoogle Earth„ÄÅGoogle Finance„ÄÇËøô‰∫õÂ∫îÁî®ÂØπ Bigtable ÊèêÂá∫ÁöÑË¶ÅÊ±ÇÂ∑ÆÂºÇÈùûÂ∏∏Â§ßÔºåÊó†ËÆ∫ÊòØÂú®Êï∞ÊçÆÈáè‰∏ä(‰ªé URL Âà∞ÁΩëÈ°µÂà∞Âç´ÊòüÂõæÂÉè)ËøòÊòØÂú®ÂìçÂ∫îÈÄüÂ∫¶‰∏ä(‰ªéÂêéÁ´ØÁöÑÊâπÈáèÂ§ÑÁêÜÂà∞ÂÆûÊó∂Êï∞ÊçÆÊúçÂä°)„ÄÇÂ∞ΩÁÆ°Â∫îÁî®ÈúÄÊ±ÇÂ∑ÆÂºÇÂæàÂ§ßÔºå‰ΩÜÊòØÔºåÈíàÂØπ Google ÁöÑËøô‰∫õ‰∫ßÂìÅÔºåBigtable ËøòÊòØÊàêÂäüÁöÑÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÁÅµÊ¥ªÁöÑ„ÄÅÈ´òÊÄßËÉΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ\nÊú¨ËÆ∫ÊñáÊèèËø∞‰∫Ü Bigtable Êèê‰æõÁöÑÁÆÄÂçïÁöÑÊï∞ÊçÆÊ®°Âûã„ÄÇÂà©Áî®Ëøô‰∏™Ê®°ÂûãÔºåÁî®Êà∑ÂèØ‰ª•Âä®ÊÄÅÁöÑÊéßÂà∂Êï∞ÊçÆÁöÑÂàÜÂ∏ÉÂíåÊ†ºÂºè„ÄÇ Êàë‰ª¨ËøòÂ∞ÜÊèèËø∞ Bigtable ÁöÑËÆæËÆ°ÂíåÂÆûÁé∞„ÄÇ","text":"ÊëòË¶Å Bigtable ÊòØ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÁªìÊûÑÂåñÊï∞ÊçÆÂ≠òÂÇ®Á≥ªÁªüÔºåÂÆÉË¢´ËÆæËÆ°Áî®Êù•Â§ÑÁêÜÊµ∑ÈáèÊï∞ÊçÆ:ÈÄöÂ∏∏ÊòØÂàÜÂ∏ÉÂú®Êï∞ÂçÉÂè∞ÊôÆÈÄöÊúçÂä°Âô®‰∏äÁöÑ PB Á∫ßÁöÑÊï∞ÊçÆ„ÄÇ Google ÁöÑÂæàÂ§öÈ°πÁõÆ‰ΩøÁî® Bigtable Â≠òÂÇ®Êï∞ÊçÆÔºåÂåÖÊã¨ Web Á¥¢Âºï„ÄÅGoogle Earth„ÄÅGoogle Finance„ÄÇËøô‰∫õÂ∫îÁî®ÂØπ Bigtable ÊèêÂá∫ÁöÑË¶ÅÊ±ÇÂ∑ÆÂºÇÈùûÂ∏∏Â§ßÔºåÊó†ËÆ∫ÊòØÂú®Êï∞ÊçÆÈáè‰∏ä(‰ªé URL Âà∞ÁΩëÈ°µÂà∞Âç´ÊòüÂõæÂÉè)ËøòÊòØÂú®ÂìçÂ∫îÈÄüÂ∫¶‰∏ä(‰ªéÂêéÁ´ØÁöÑÊâπÈáèÂ§ÑÁêÜÂà∞ÂÆûÊó∂Êï∞ÊçÆÊúçÂä°)„ÄÇÂ∞ΩÁÆ°Â∫îÁî®ÈúÄÊ±ÇÂ∑ÆÂºÇÂæàÂ§ßÔºå‰ΩÜÊòØÔºåÈíàÂØπ Google ÁöÑËøô‰∫õ‰∫ßÂìÅÔºåBigtable ËøòÊòØÊàêÂäüÁöÑÊèê‰æõ‰∫Ü‰∏Ä‰∏™ÁÅµÊ¥ªÁöÑ„ÄÅÈ´òÊÄßËÉΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ Êú¨ËÆ∫ÊñáÊèèËø∞‰∫Ü Bigtable Êèê‰æõÁöÑÁÆÄÂçïÁöÑÊï∞ÊçÆÊ®°Âûã„ÄÇÂà©Áî®Ëøô‰∏™Ê®°ÂûãÔºåÁî®Êà∑ÂèØ‰ª•Âä®ÊÄÅÁöÑÊéßÂà∂Êï∞ÊçÆÁöÑÂàÜÂ∏ÉÂíåÊ†ºÂºè„ÄÇ Êàë‰ª¨ËøòÂ∞ÜÊèèËø∞ Bigtable ÁöÑËÆæËÆ°ÂíåÂÆûÁé∞„ÄÇ‰ªãÁªçÂú®ËøáÂéª‰∏§Âπ¥ÂçäÊó∂Èó¥ÈáåÔºåÊàë‰ª¨ËÆæËÆ°„ÄÅÂÆûÁé∞Âπ∂ÈÉ®ÁΩ≤‰∫Ü‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÁªìÊûÑÂåñÊï∞ÊçÆÂ≠òÂÇ®Á≥ªÁªü ‚Äî Âú® GoogleÔºåÊàë‰ª¨Áß∞‰πã‰∏∫ Bigtable„ÄÇBigtable ÁöÑËÆæËÆ°ÁõÆÁöÑÊòØÂèØÈù†ÁöÑÂ§ÑÁêÜ PB Á∫ßÂà´ÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏îËÉΩÂ§üÈÉ®ÁΩ≤Âà∞‰∏äÂçÉÂè∞Êú∫Âô®‰∏ä„ÄÇBigtable Â∑≤ÁªèÂÆûÁé∞‰∫Ü‰∏ãÈù¢ÁöÑÂá†‰∏™ÁõÆÊ†á:ÈÄÇÁî®ÊÄßÂπøÊ≥õ„ÄÅÂèØÊâ©Â±ï„ÄÅÈ´òÊÄßËÉΩÂíåÈ´òÂèØÁî®ÊÄß„ÄÇ Bigtable Â∑≤ÁªèÂú®Ë∂ÖËøá 60 ‰∏™ Google ÁöÑ‰∫ßÂìÅÂíåÈ°πÁõÆ‰∏äÂæóÂà∞‰∫ÜÂ∫îÁî®ÔºåÂåÖÊã¨ Google Analytics„ÄÅGoogle Finance„ÄÅ Orkut„ÄÅPersonalized Search„ÄÅWritely Âíå Google Earth„ÄÇËøô‰∫õ‰∫ßÂìÅÂØπ Bigtable ÊèêÂá∫‰∫ÜËø•ÂºÇÁöÑÈúÄÊ±ÇÔºåÊúâÁöÑÈúÄË¶ÅÈ´òÂêûÂêêÈáèÁöÑÊâπÂ§ÑÁêÜÔºåÊúâÁöÑÂàôÈúÄË¶ÅÂèäÊó∂ÂìçÂ∫îÔºåÂø´ÈÄüËøîÂõûÊï∞ÊçÆÁªôÊúÄÁªàÁî®Êà∑„ÄÇÂÆÉ‰ª¨‰ΩøÁî®ÁöÑ Bigtable ÈõÜÁæ§ÁöÑÈÖçÁΩÆ‰πüÊúâÂæàÂ§ßÁöÑÂ∑ÆÂºÇÔºåÊúâÁöÑÈõÜÁæ§Âè™ÊúâÂá†Âè∞ÊúçÂä°Âô®ÔºåËÄåÊúâÁöÑÂàôÈúÄË¶Å‰∏äÂçÉÂè∞ÊúçÂä°Âô®„ÄÅÂ≠òÂÇ®Âá†Áôæ TB ÁöÑÊï∞ÊçÆ„ÄÇ Âú®ÂæàÂ§öÊñπÈù¢ÔºåBigtable ÂíåÊï∞ÊçÆÂ∫ìÂæàÁ±ª‰ºº:ÂÆÉ‰ΩøÁî®‰∫ÜÂæàÂ§öÊï∞ÊçÆÂ∫ìÁöÑÂÆûÁé∞Á≠ñÁï•„ÄÇÂπ∂Ë°åÊï∞ÊçÆÂ∫ìÂíåÂÜÖÂ≠òÊï∞ÊçÆÂ∫ìÂ∑≤ÁªèÂÖ∑Â§áÂèØÊâ©Â±ïÊÄßÂíåÈ´òÊÄßËÉΩÔºå‰ΩÜÊòØ Bigtable Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂíåËøô‰∫õÁ≥ªÁªüÂÆåÂÖ®‰∏çÂêåÁöÑÊé•Âè£„ÄÇBigtable ‰∏çÊîØÊåÅÂÆåÊï¥ÁöÑÂÖ≥Á≥ªÊï∞ÊçÆÊ®°Âûã;‰∏é‰πãÁõ∏ÂèçÔºåBigtable ‰∏∫ÂÆ¢Êà∑Êèê‰æõ‰∫ÜÁÆÄÂçïÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÂà©Áî®Ëøô‰∏™Ê®°ÂûãÔºåÂÆ¢Êà∑ÂèØ‰ª•Âä®ÊÄÅÊéßÂà∂Êï∞ÊçÆÁöÑÂàÜÂ∏ÉÂíåÊ†ºÂºèÔºåÁî®Êà∑‰πüÂèØ‰ª•Ëá™Â∑±Êé®ÊµãÂ∫ïÂ±ÇÂ≠òÂÇ®Êï∞ÊçÆÁöÑ‰ΩçÁΩÆÁõ∏ÂÖ≥ÊÄß„ÄÇÊï∞ÊçÆÁöÑ‰∏ãÊ†áÊòØË°åÂíåÂàóÁöÑÂêçÂ≠óÔºåÂêçÂ≠óÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇBigtable Â∞ÜÂ≠òÂÇ®ÁöÑÊï∞ÊçÆÈÉΩËßÜ‰∏∫Â≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØ Bigtable Êú¨Ë∫´‰∏çÂéªËß£ÊûêËøô‰∫õÂ≠óÁ¨¶‰∏≤ÔºåÂÆ¢Êà∑Á®ãÂ∫èÈÄöÂ∏∏‰ºöÂú®ÊääÂêÑÁßçÁªìÊûÑÂåñÊàñËÄÖÂçäÁªìÊûÑÂåñÁöÑÊï∞ÊçÆ‰∏≤Ë°åÂåñÂà∞Ëøô‰∫õÂ≠óÁ¨¶‰∏≤Èáå„ÄÇÈÄöËøá‰ªîÁªÜÈÄâÊã©Êï∞ÊçÆÁöÑÊ®°ÂºèÔºåÂÆ¢Êà∑ÂèØ‰ª•ÊéßÂà∂Êï∞ÊçÆÁöÑ‰ΩçÁΩÆÁõ∏ÂÖ≥ÊÄß„ÄÇÊúÄÂêéÔºåÂèØ‰ª•ÈÄöËøá BigTable ÁöÑÊ®°ÂºèÂèÇÊï∞Êù•ÊéßÂà∂Êï∞ÊçÆÊòØÂ≠òÊîæÂú®ÂÜÖÂ≠ò‰∏≠ËøòÊòØÁ°¨Áõò‰∏ä„ÄÇ Á¨¨ 3 ËäÇÊèèËø∞ÂÖ≥‰∫éÊï∞ÊçÆÊ®°ÂûãÊõ¥Â§öÁªÜËäÇÊñπÈù¢ÁöÑ‰∏úË•ø; Á¨¨ 4 ËäÇÊ¶ÇË¶Å‰ªãÁªç‰∫ÜÂÆ¢Êà∑Á´Ø API; Á¨¨ 5 ËäÇÁÆÄË¶Å‰ªãÁªç‰∫Ü BigTable Â∫ïÂ±Ç‰ΩøÁî®ÁöÑ Google ÁöÑÂü∫Á°ÄÊ°ÜÊû∂; Á¨¨ 6 ËäÇÊèèËø∞‰∫Ü BigTable ÂÆûÁé∞ÁöÑÂÖ≥ÈîÆÈÉ®ÂàÜ; Á¨¨ 7 ËäÇÊèèËø∞‰∫ÜÊàë‰ª¨‰∏∫‰∫ÜÊèêÈ´ò BigTable ÁöÑÊÄßËÉΩÈááÁî®ÁöÑ‰∏Ä‰∫õÁ≤æÁªÜÁöÑË∞É‰ºòÊñπÊ≥ï; Á¨¨ 8 ËäÇÊèê‰æõ‰∫Ü BigTable ÁöÑÊÄßËÉΩÊï∞ÊçÆ; Á¨¨ 9 ËäÇËÆ≤Ëø∞‰∫ÜÂá†‰∏™ Google ÂÜÖÈÉ®‰ΩøÁî® BigTable ÁöÑ‰æãÂ≠ê; Á¨¨ 10 ËäÇÊòØÊàë‰ª¨Âú®ËÆæËÆ°ÂíåÂêéÊúüÊîØÊåÅËøáÁ®ã‰∏≠ÂæóÂà∞‰∏Ä‰∫õÁªèÈ™åÂíåÊïôËÆ≠; ÊúÄÂêéÔºåÂú®Á¨¨ 11 ËäÇÂàóÂá∫Êàë‰ª¨ÁöÑÁõ∏ÂÖ≥Á†îÁ©∂Â∑•‰ΩúÔºåÁ¨¨ 12 ËäÇÊòØÊàë‰ª¨ÁöÑÁªìËÆ∫„ÄÇÊï∞ÊçÆÊ®°ÂûãBigtable ÊòØ‰∏Ä‰∏™Á®ÄÁñèÁöÑ„ÄÅÂàÜÂ∏ÉÂºèÁöÑ„ÄÅÊåÅ‰πÖÂåñÂ≠òÂÇ®ÁöÑÂ§öÁª¥Â∫¶ÊéíÂ∫è Map„ÄÇMap ÁöÑÁ¥¢ÂºïÊòØË°åÂÖ≥ÈîÆÂ≠ó„ÄÅÂàóÂÖ≥ÈîÆÂ≠ó‰ª•ÂèäÊó∂Èó¥Êà≥;Map ‰∏≠ÁöÑÊØè‰∏™ value ÈÉΩÊòØ‰∏Ä‰∏™Êú™ÁªèËß£ÊûêÁöÑ byte Êï∞ÁªÑ„ÄÇ(row:string, column:string,time:int64)-&gt;stringÊàë‰ª¨Âú®‰ªîÁªÜÂàÜÊûê‰∫Ü‰∏Ä‰∏™Á±ª‰ºº Bigtable ÁöÑÁ≥ªÁªüÁöÑÁßçÁßçÊΩúÂú®Áî®ÈÄî‰πãÂêéÔºåÂÜ≥ÂÆö‰ΩøÁî®Ëøô‰∏™Êï∞ÊçÆÊ®°Âûã„ÄÇÊàë‰ª¨ÂÖà‰∏æ‰∏™ÂÖ∑‰ΩìÁöÑ‰æãÂ≠êÔºåËøô‰∏™‰æãÂ≠ê‰øÉ‰ΩøÊàë‰ª¨ÂÅö‰∫ÜÂæàÂ§öËÆæËÆ°ÂÜ≥Á≠ñ;ÂÅáËÆæÊàë‰ª¨ÊÉ≥Ë¶ÅÂ≠òÂÇ®Êµ∑ÈáèÁöÑÁΩëÈ°µÂèäÁõ∏ÂÖ≥‰ø°ÊÅØÔºåËøô‰∫õÊï∞ÊçÆÂèØ‰ª•Áî®‰∫éÂæàÂ§ö‰∏çÂêåÁöÑÈ°πÁõÆÔºåÊàë‰ª¨Âßë‰∏îÁß∞Ëøô‰∏™ÁâπÊÆäÁöÑË°®‰∏∫ Webtable„ÄÇÂú® Webtable ÈáåÔºåÊàë‰ª¨‰ΩøÁî® URL ‰Ωú‰∏∫Ë°åÂÖ≥ÈîÆÂ≠óÔºå‰ΩøÁî®ÁΩëÈ°µÁöÑÊüê‰∫õÂ±ûÊÄß‰Ωú‰∏∫ÂàóÂêçÔºåÁΩëÈ°µÁöÑÂÜÖÂÆπÂ≠òÂú®‚Äúcontents:‚ÄùÂàó‰∏≠ÔºåÂπ∂Áî®Ëé∑ÂèñËØ•ÁΩëÈ°µÁöÑÊó∂Èó¥Êà≥‰Ωú‰∏∫Ê†áËØÜ,Â¶ÇÂõæ‰∏ÄÊâÄÁ§∫„ÄÇË°åÂêçÊòØ‰∏Ä‰∏™ÂèçÂêë URL„ÄÇcontents ÂàóÊóèÂ≠òÊîæÁöÑÊòØÁΩëÈ°µÁöÑÂÜÖÂÆπÔºåanchor ÂàóÊóèÂ≠òÊîæÂºïÁî®ËØ•ÁΩëÈ°µÁöÑÈîöÈìæÊé•ÊñáÊú¨„ÄÇ CNN ÁöÑ‰∏ªÈ°µË¢´ Sports Illustrator Âíå MY-look ÁöÑ‰∏ªÈ°µÂºïÁî®ÔºåÂõ†Ê≠§ËØ•Ë°åÂåÖÂê´‰∫ÜÂêç‰∏∫‚Äúanchor:cnnsi.com‚ÄùÂíå ‚Äúanchhor:my.look.ca‚ÄùÁöÑÂàó„ÄÇÊØè‰∏™ÈîöÈìæÊé•Âè™Êúâ‰∏Ä‰∏™ÁâàÊú¨;ËÄå contents ÂàóÂàôÊúâ‰∏â‰∏™ÁâàÊú¨ÔºåÂàÜÂà´Áî±Êó∂Èó¥Êà≥ t3Ôºåt5ÔºåÂíå t6 Ê†áËØÜ„ÄÇ Ë°åË°®‰∏≠ÁöÑË°åÂÖ≥ÈîÆÂ≠óÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑÂ≠óÁ¨¶‰∏≤(ÁõÆÂâçÊîØÊåÅÊúÄÂ§ß 64KB ÁöÑÂ≠óÁ¨¶‰∏≤Ôºå‰ΩÜÊòØÂØπÂ§ßÂ§öÊï∞Áî®Êà∑Ôºå10-100 ‰∏™Â≠ó ËäÇÂ∞±Ë∂≥Â§ü‰∫Ü)„ÄÇÂØπÂêå‰∏Ä‰∏™Ë°åÂÖ≥ÈîÆÂ≠óÁöÑËØªÊàñËÄÖÂÜôÊìç‰ΩúÈÉΩÊòØÂéüÂ≠êÁöÑ(‰∏çÁÆ°ËØªÊàñËÄÖÂÜôËøô‰∏ÄË°åÈáåÂ§öÂ∞ë‰∏™‰∏çÂêåÂàó)ÔºåËøô‰∏™ ËÆæËÆ°ÂÜ≥Á≠ñËÉΩÂ§ü‰ΩøÁî®Êà∑ÂæàÂÆπÊòìÁöÑÁêÜËß£Á®ãÂ∫èÂú®ÂØπÂêå‰∏Ä‰∏™Ë°åËøõË°åÂπ∂ÂèëÊõ¥Êñ∞Êìç‰ΩúÊó∂ÁöÑË°å‰∏∫„ÄÇ Bigtable ÈÄöËøáË°åÂÖ≥ÈîÆÂ≠óÁöÑÂ≠óÂÖ∏È°∫Â∫èÊù•ÁªÑÁªáÊï∞ÊçÆ„ÄÇË°®‰∏≠ÁöÑÊØè‰∏™Ë°åÈÉΩÂèØ‰ª•Âä®ÊÄÅÂàÜÂå∫„ÄÇÊØè‰∏™ÂàÜÂå∫Âè´ÂÅö‰∏Ä‰∏™‚ÄùTablet‚ÄùÔºå Tablet ÊòØÊï∞ÊçÆÂàÜÂ∏ÉÂíåË¥üËΩΩÂùáË°°Ë∞ÉÊï¥ÁöÑÊúÄÂ∞èÂçï‰Ωç„ÄÇËøôÊ†∑ÂÅöÁöÑÁªìÊûúÊòØÔºåÂΩìÊìç‰ΩúÂè™ËØªÂèñË°å‰∏≠ÂæàÂ∞ëÂá†ÂàóÁöÑÊï∞ÊçÆÊó∂ÊïàÁéáÂæà È´òÔºåÈÄöÂ∏∏Âè™ÈúÄË¶ÅÂæàÂ∞ëÂá†Ê¨°Êú∫Âô®Èó¥ÁöÑÈÄö‰ø°Âç≥ÂèØÂÆåÊàê„ÄÇÁî®Êà∑ÂèØ‰ª•ÈÄöËøáÈÄâÊã©ÂêàÈÄÇÁöÑË°åÂÖ≥ÈîÆÂ≠óÔºåÂú®Êï∞ÊçÆËÆøÈóÆÊó∂ÊúâÊïàÂà© Áî®Êï∞ÊçÆÁöÑ‰ΩçÁΩÆÁõ∏ÂÖ≥ÊÄßÔºå‰ªéËÄåÊõ¥Â•ΩÁöÑÂà©Áî®Ëøô‰∏™ÁâπÊÄß„ÄÇ‰∏æ‰æãÊù•ËØ¥ÔºåÂú® Webtable ÈáåÔºåÈÄöËøáÂèçËΩ¨ URL ‰∏≠‰∏ªÊú∫ÂêçÁöÑÊñπ ÂºèÔºåÂèØ‰ª•ÊääÂêå‰∏Ä‰∏™ÂüüÂêç‰∏ãÁöÑÁΩëÈ°µËÅöÈõÜËµ∑Êù•ÁªÑÁªáÊàêËøûÁª≠ÁöÑË°å„ÄÇÂÖ∑‰ΩìÊù•ËØ¥ÔºåÊàë‰ª¨ÂèØ‰ª•Êää maps.google.com/index.html ÁöÑÊï∞ÊçÆÂ≠òÊîæÂú®ÂÖ≥ÈîÆÂ≠ó com.google.maps/index.html ‰∏ã„ÄÇÊääÁõ∏ÂêåÁöÑÂüü‰∏≠ÁöÑÁΩëÈ°µÂ≠òÂÇ®Âú®ËøûÁª≠ÁöÑÂå∫ÂüüÂèØ‰ª•ËÆ©Âü∫‰∫é‰∏ªÊú∫ ÂíåÂüüÂêçÁöÑÂàÜÊûêÊõ¥Âä†ÊúâÊïà„ÄÇ ÂàóÊóèÂàóÂÖ≥ÈîÆÂ≠óÁªÑÊàêÁöÑÈõÜÂêàÂè´ÂÅö‚ÄúÂàóÊóè‚ÄúÔºåÂàóÊóèÊòØËÆøÈóÆÊéßÂà∂ÁöÑÂü∫Êú¨Âçï‰Ωç„ÄÇÂ≠òÊîæÂú®Âêå‰∏ÄÂàóÊóè‰∏ãÁöÑÊâÄÊúâÊï∞ÊçÆÈÄöÂ∏∏ÈÉΩ Â±û‰∫éÂêå‰∏Ä‰∏™Á±ªÂûã(Êàë‰ª¨ÂèØ‰ª•ÊääÂêå‰∏Ä‰∏™ÂàóÊóè‰∏ãÁöÑÊï∞ÊçÆÂéãÁº©Âú®‰∏ÄËµ∑)„ÄÇÂàóÊóèÂú®‰ΩøÁî®‰πãÂâçÂøÖÈ°ªÂÖàÂàõÂª∫ÔºåÁÑ∂ÂêéÊâçËÉΩÂú®Âàó Êóè‰∏≠‰ªª‰ΩïÁöÑÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÂ≠òÊîæÊï∞ÊçÆ;ÂàóÊóèÂàõÂª∫ÂêéÔºåÂÖ∂‰∏≠ÁöÑ‰ªª‰Ωï‰∏Ä‰∏™ÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÈÉΩÂèØ‰ª•Â≠òÊîæÊï∞ÊçÆ„ÄÇÊ†πÊçÆÊàë‰ª¨ÁöÑËÆæ ËÆ°ÊÑèÂõæÔºå‰∏ÄÂº†Ë°®‰∏≠ÁöÑÂàóÊóè‰∏çËÉΩÂ§™Â§ö(ÊúÄÂ§öÂá†Áôæ‰∏™)ÔºåÂπ∂‰∏îÂàóÊóèÂú®ËøêË°åÊúüÈó¥ÂæàÂ∞ëÊîπÂèò„ÄÇ‰∏é‰πãÁõ∏ÂØπÂ∫îÁöÑÔºå‰∏ÄÂº†Ë°®ÂèØ ‰ª•ÊúâÊó†ÈôêÂ§ö‰∏™Âàó„ÄÇ ÂàóÂÖ≥ÈîÆÂ≠óÁöÑÂëΩÂêçËØ≠Ê≥ïÂ¶Ç‰∏ã:ÂàóÊóè:ÈôêÂÆöËØç„ÄÇ ÂàóÊóèÁöÑÂêçÂ≠óÂøÖÈ°ªÊòØÂèØÊâìÂç∞ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËÄåÈôêÂÆöËØçÁöÑÂêçÂ≠óÂèØ‰ª•ÊòØ ‰ªªÊÑèÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÊØîÂ¶ÇÔºåWebtable Êúâ‰∏™ÂàóÊóè languageÔºålanguage ÂàóÊóèÁî®Êù•Â≠òÊîæÊí∞ÂÜôÁΩëÈ°µÁöÑËØ≠Ë®Ä„ÄÇÊàë‰ª¨Âú® language ÂàóÊóè‰∏≠Âè™‰ΩøÁî®‰∏Ä‰∏™ÂàóÂÖ≥ÈîÆÂ≠óÔºåÁî®Êù•Â≠òÊîæÊØè‰∏™ÁΩëÈ°µÁöÑËØ≠Ë®ÄÊ†áËØÜ ID„ÄÇWebtable ‰∏≠Âè¶‰∏Ä‰∏™ÊúâÁî®ÁöÑÂàóÊóèÊòØ anchor;Ëøô ‰∏™ÂàóÊóèÁöÑÊØè‰∏Ä‰∏™ÂàóÂÖ≥ÈîÆÂ≠ó‰ª£Ë°®‰∏Ä‰∏™ÈîöÈìæÊé•ÔºåÂ¶ÇÂõæ‰∏ÄÊâÄÁ§∫„ÄÇAnchor ÂàóÊóèÁöÑÈôêÂÆöËØçÊòØÂºïÁî®ËØ•ÁΩëÈ°µÁöÑÁ´ôÁÇπÂêç;Anchor ÂàóÊóèÊØèÂàóÁöÑÊï∞ÊçÆÈ°πÂ≠òÊîæÁöÑÊòØÈìæÊé•ÊñáÊú¨„ÄÇ ËÆøÈóÆÊéßÂà∂„ÄÅÁ£ÅÁõòÂíåÂÜÖÂ≠òÁöÑ‰ΩøÁî®ÁªüËÆ°ÈÉΩÊòØÂú®ÂàóÊóèÂ±ÇÈù¢ËøõË°åÁöÑ„ÄÇÂú®Êàë‰ª¨ÁöÑ Webtable ÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰∏äËø∞ÁöÑÊéßÂà∂ÊùÉ ÈôêËÉΩÂ∏ÆÂä©Êàë‰ª¨ÁÆ°ÁêÜ‰∏çÂêåÁ±ªÂûãÁöÑÂ∫îÁî®:Êàë‰ª¨ÂÖÅËÆ∏‰∏Ä‰∫õÂ∫îÁî®ÂèØ‰ª•Ê∑ªÂä†Êñ∞ÁöÑÂü∫Êú¨Êï∞ÊçÆ„ÄÅ‰∏Ä‰∫õÂ∫îÁî®ÂèØ‰ª•ËØªÂèñÂü∫Êú¨Êï∞ÊçÆÂπ∂ÂàõÂª∫ÁªßÊâøÁöÑÂàóÊóè„ÄÅ‰∏Ä‰∫õÂ∫îÁî®ÂàôÂè™ÂÖÅËÆ∏ÊµèËßàÊï∞ÊçÆ(ÁîöËá≥ÂèØËÉΩÂõ†‰∏∫ÈöêÁßÅÁöÑÂéüÂõ†‰∏çËÉΩÊµèËßàÊâÄÊúâÊï∞ÊçÆ)„ÄÇ Êó∂Èó¥Êà≥Âú® Bigtable ‰∏≠ÔºåË°®ÁöÑÊØè‰∏Ä‰∏™Êï∞ÊçÆÈ°πÈÉΩÂèØ‰ª•ÂåÖÂê´Âêå‰∏Ä‰ªΩÊï∞ÊçÆÁöÑ‰∏çÂêåÁâàÊú¨;‰∏çÂêåÁâàÊú¨ÁöÑÊï∞ÊçÆÈÄöËøáÊó∂Èó¥Êà≥Êù•Á¥¢ Âºï„ÄÇBigtable Êó∂Èó¥Êà≥ÁöÑÁ±ªÂûãÊòØ 64 ‰ΩçÊï¥Âûã„ÄÇBigtable ÂèØ‰ª•ÁªôÊó∂Èó¥Êà≥ËµãÂÄºÔºåÁî®Êù•Ë°®Á§∫Á≤æÁ°ÆÂà∞ÊØ´ÁßíÁöÑ‚ÄúÂÆûÊó∂‚ÄùÊó∂Èó¥; Áî®Êà∑Á®ãÂ∫è‰πüÂèØ‰ª•ÁªôÊó∂Èó¥Êà≥ËµãÂÄº„ÄÇÂ¶ÇÊûúÂ∫îÁî®Á®ãÂ∫èÈúÄË¶ÅÈÅøÂÖçÊï∞ÊçÆÁâàÊú¨ÂÜ≤Á™ÅÔºåÈÇ£‰πàÂÆÉÂøÖÈ°ªËá™Â∑±ÁîüÊàêÂÖ∑ÊúâÂîØ‰∏ÄÊÄßÁöÑÊó∂ Èó¥Êà≥„ÄÇÊï∞ÊçÆÈ°π‰∏≠Ôºå‰∏çÂêåÁâàÊú¨ÁöÑÊï∞ÊçÆÊåâÁÖßÊó∂Èó¥Êà≥ÂÄíÂ∫èÊéíÂ∫èÔºåÂç≥ÊúÄÊñ∞ÁöÑÊï∞ÊçÆÊéíÂú®ÊúÄÂâçÈù¢„ÄÇ ‰∏∫‰∫ÜÂáèËΩªÂ§ö‰∏™ÁâàÊú¨Êï∞ÊçÆÁöÑÁÆ°ÁêÜË¥üÊãÖÔºåÊàë‰ª¨ÂØπÊØè‰∏Ä‰∏™ÂàóÊóèÈÖçÊúâ‰∏§‰∏™ËÆæÁΩÆÂèÇÊï∞ÔºåBigtable ÈÄöËøáËøô‰∏§‰∏™ÂèÇÊï∞ÂèØ‰ª• ÂØπÂ∫üÂºÉÁâàÊú¨ÁöÑÊï∞ÊçÆËá™Âä®ËøõË°åÂûÉÂúæÊî∂ÈõÜ„ÄÇÁî®Êà∑ÂèØ‰ª•ÊåáÂÆöÂè™‰øùÂ≠òÊúÄÂêé n ‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆÔºåÊàñËÄÖÂè™‰øùÂ≠ò‚ÄúË∂≥Â§üÊñ∞‚ÄùÁöÑ ÁâàÊú¨ÁöÑÊï∞ÊçÆ(ÊØîÂ¶ÇÔºåÂè™‰øùÂ≠òÊúÄËøë 7 Â§©ÁöÑÂÜÖÂÆπÂÜôÂÖ•ÁöÑÊï∞ÊçÆ)„ÄÇ Âú® Webtable ÁöÑ‰∏æ‰æãÈáåÔºåcontents:ÂàóÂ≠òÂÇ®ÁöÑÊó∂Èó¥Êà≥‰ø°ÊÅØÊòØÁΩëÁªúÁà¨Ëô´ÊäìÂèñ‰∏Ä‰∏™È°µÈù¢ÁöÑÊó∂Èó¥„ÄÇ‰∏äÈù¢ÊèêÂèäÁöÑÂûÉÂúæ Êî∂ÈõÜÊú∫Âà∂ÂèØ‰ª•ËÆ©Êàë‰ª¨Âè™‰øùÁïôÊúÄËøë‰∏â‰∏™ÁâàÊú¨ÁöÑÁΩëÈ°µÊï∞ÊçÆ„ÄÇAPIBigtable Êèê‰æõ‰∫ÜÂª∫Á´ãÂíåÂà†Èô§Ë°®‰ª•ÂèäÂàóÊóèÁöÑ API ÂáΩÊï∞„ÄÇBigtable ËøòÊèê‰æõ‰∫Ü‰øÆÊîπÈõÜÁæ§„ÄÅË°®ÂíåÂàóÊóèÁöÑÂÖÉÊï∞ÊçÆÁöÑ API ÔºåÊØîÂ¶Ç‰øÆÊîπËÆøÈóÆÊùÉÈôê„ÄÇ // Open the table Table *T = OpenOrDie(‚Äú/bigtable/web/webtable‚Äù); // Write a new anchor and delete an old anchor RowMutation r1(T, ‚Äúcom.cnn.www‚Äù); r1.Set(‚Äúanchor:www.c-span.org‚Äù, ‚ÄúCNN‚Äù); r1.Delete(‚Äúanchor:www.abc.com‚Äù); Operation op; Apply(&amp;op, &amp;r1); ÂÆ¢Êà∑Á®ãÂ∫èÂèØ‰ª•ÂØπ Bigtable ËøõË°åÂ¶Ç‰∏ãÁöÑÊìç‰Ωú:ÂÜôÂÖ•ÊàñËÄÖÂà†Èô§ Bigtable ‰∏≠ÁöÑÂÄº„ÄÅ‰ªéÊØè‰∏™Ë°å‰∏≠Êü•ÊâæÂÄº„ÄÅÊàñËÄÖÈÅçÂéÜË°®‰∏≠ÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÂ≠êÈõÜ„ÄÇÂõæ 2 ‰∏≠ÁöÑC++‰ª£Á†Å‰ΩøÁî® RowMutation ÊäΩË±°ÂØπË±°ËøõË°å‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÊõ¥Êñ∞Êìç‰Ωú„ÄÇ(‰∏∫‰∫Ü‰øùÊåÅ Á§∫‰æã‰ª£Á†ÅÁöÑÁÆÄÊ¥ÅÔºåÊàë‰ª¨ÂøΩÁï•‰∫Ü‰∏Ä‰∫õÁªÜËäÇÁõ∏ÂÖ≥‰ª£Á†Å)„ÄÇË∞ÉÁî® Apply ÂáΩÊï∞ÂØπWebtable ËøõË°å‰∫Ü‰∏Ä‰∏™ÂéüÂ≠ê‰øÆÊîπÊìç‰Ωú:ÂÆÉ‰∏∫ www.cnn.com Â¢ûÂä†‰∫Ü‰∏Ä‰∏™ÈîöÁÇπÔºåÂêåÊó∂Âà†Èô§‰∫ÜÂè¶Â§ñ‰∏Ä‰∏™ÈîöÁÇπ„ÄÇ Scanner scanner(T); ScanStream *stream; stream = scanner.FetchColumnFamily(‚Äúanchor‚Äù); stream-&gt;SetReturnAllVersions(); scanner.Lookup(‚Äúcom.cnn.www‚Äù); for (; !stream-&gt;Done(); stream-&gt;Next()) { printf(‚Äú%s %s %lld %s\\n‚Äù, scanner.RowName(), stream-&gt;ColumnName(), stream-&gt;MicroTimestamp(), stream-&gt;Value()); } ÂõæË°® 3 Reading from Bigtable.Âõæ 3 ‰∏≠ÁöÑ C++‰ª£Á†Å‰ΩøÁî® Scanner ÊäΩË±°ÂØπË±°ÈÅçÂéÜ‰∏Ä‰∏™Ë°åÂÜÖÁöÑÊâÄÊúâÈîöÁÇπ„ÄÇÂÆ¢Êà∑Á®ãÂ∫èÂèØ‰ª•ÈÅçÂéÜÂ§ö‰∏™ÂàóÊóèÔºåÊúâÂá†ÁßçÊñπÊ≥ïÂèØ‰ª•ÂØπÊâ´ÊèèËæìÂá∫ÁöÑË°å„ÄÅÂàóÂíåÊó∂Èó¥Êà≥ËøõË°åÈôêÂà∂„ÄÇ‰æãÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÈôêÂà∂‰∏äÈù¢ÁöÑÊâ´ÊèèÔºåËÆ©ÂÆÉÂè™ËæìÂá∫ÈÇ£‰∫õÂåπÈÖç Ê≠£ÂàôË°®ËææÂºè*.cnn.com ÁöÑÈîöÁÇπÔºåÊàñËÄÖÈÇ£‰∫õÊó∂Èó¥Êà≥Âú®ÂΩìÂâçÊó∂Èó¥Ââç 10 Â§©ÁöÑÈîöÁÇπ„ÄÇ Bigtable ËøòÊîØÊåÅ‰∏Ä‰∫õÂÖ∂ÂÆÉÁöÑÁâπÊÄßÔºåÂà©Áî®Ëøô‰∫õÁâπÊÄßÔºåÁî®Êà∑ÂèØ‰ª•ÂØπÊï∞ÊçÆËøõË°åÊõ¥Â§çÊùÇÁöÑÂ§ÑÁêÜ„ÄÇÈ¶ñÂÖàÔºåBigtable ÊîØ ÊåÅÂçïË°å‰∏äÁöÑ‰∫ãÂä°Â§ÑÁêÜÔºåÂà©Áî®Ëøô‰∏™ÂäüËÉΩÔºåÁî®Êà∑ÂèØ‰ª•ÂØπÂ≠òÂÇ®Âú®‰∏Ä‰∏™Ë°åÂÖ≥ÈîÆÂ≠ó‰∏ãÁöÑÊï∞ÊçÆËøõË°åÂéüÂ≠êÊÄßÁöÑËØª-Êõ¥Êñ∞-ÂÜôÊìç‰Ωú„ÄÇ ËôΩÁÑ∂ Bigtable Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÖÅËÆ∏Áî®Êà∑Ë∑®Ë°åÊâπÈáèÂÜôÂÖ•Êï∞ÊçÆÁöÑÊé•Âè£Ôºå‰ΩÜÊòØÔºåBigtable ÁõÆÂâçËøò‰∏çÊîØÊåÅÈÄöÁî®ÁöÑË∑®Ë°å‰∫ãÂä°Â§Ñ ÁêÜ„ÄÇÂÖ∂Ê¨°ÔºåBigtable ÂÖÅËÆ∏ÊääÊï∞ÊçÆÈ°πÁî®ÂÅöÊï¥Êï∞ËÆ°Êï∞Âô®„ÄÇÊúÄÂêéÔºåBigtable ÂÖÅËÆ∏Áî®Êà∑Âú®ÊúçÂä°Âô®ÁöÑÂú∞ÂùÄÁ©∫Èó¥ÂÜÖÊâßË°åËÑöÊú¨ Á®ãÂ∫è„ÄÇËÑöÊú¨Á®ãÂ∫è‰ΩøÁî® Google ÂºÄÂèëÁöÑ SawzallÊï∞ÊçÆÂ§ÑÁêÜËØ≠Ë®Ä„ÄÇËôΩÁÑ∂ÁõÆÂâçÊàë‰ª¨Âü∫‰∫éÁöÑ Sawzall ËØ≠Ë®ÄÁöÑ API ÂáΩÊï∞Ëøò‰∏çÂÖÅËÆ∏ÂÆ¢Êà∑ÁöÑËÑöÊú¨Á®ãÂ∫èÂÜôÂÖ•Êï∞ÊçÆÂà∞ BigtableÔºå‰ΩÜÊòØÂÆÉÂÖÅËÆ∏Â§öÁßçÂΩ¢ÂºèÁöÑÊï∞ÊçÆËΩ¨Êç¢„ÄÅÂü∫‰∫é‰ªªÊÑèË°®ËææÂºèÁöÑÊï∞ÊçÆ ËøáÊª§„ÄÅ‰ª•Âèä‰ΩøÁî®Â§öÁßçÊìç‰ΩúÁ¨¶ÁöÑËøõË°åÊï∞ÊçÆÊ±áÊÄª„ÄÇ Bigtable ÂèØ‰ª•Âíå MapReduce ‰∏ÄËµ∑‰ΩøÁî®ÔºåMapReduce ÊòØ Google ÂºÄÂèëÁöÑÂ§ßËßÑÊ®°Âπ∂Ë°åËÆ°ÁÆóÊ°ÜÊû∂„ÄÇÊàë‰ª¨Â∑≤ ÁªèÂºÄÂèë‰∫Ü‰∏Ä‰∫õ Wrapper Á±ªÔºåÈÄöËøá‰ΩøÁî®Ëøô‰∫õ Wrapper Á±ªÔºåBigtable ÂèØ‰ª•‰Ωú‰∏∫ MapReduce Ê°ÜÊû∂ÁöÑËæìÂÖ•ÂíåËæìÂá∫„ÄÇBigTable ÊûÑ‰ª∂BigtableÊòØÂª∫Á´ãÂú®ÂÖ∂ÂÆÉÁöÑÂá†‰∏™GoogleÂü∫Á°ÄÊûÑ‰ª∂‰∏äÁöÑ„ÄÇBigTable‰ΩøÁî®GoogleÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü(GFSÂ≠òÂÇ®Êó•ÂøóÊñá‰ª∂ÂíåÊï∞ÊçÆÊñá‰ª∂„ÄÇBigTable ÈõÜÁæ§ÈÄöÂ∏∏ËøêË°åÂú®‰∏Ä‰∏™ÂÖ±‰∫´ÁöÑÊú∫Âô®Ê±†‰∏≠ÔºåÊ±†‰∏≠ÁöÑÊú∫Âô®Ëøò‰ºöËøêË°åÂÖ∂ÂÆÉÁöÑÂêÑÁßçÂêÑÊ†∑ÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®Á®ãÂ∫èÔºåBigTable ÁöÑËøõÁ®ãÁªèÂ∏∏Ë¶ÅÂíåÂÖ∂ÂÆÉÂ∫îÁî®ÁöÑËøõÁ®ãÂÖ±‰∫´Êú∫Âô®„ÄÇBigTable ‰æùËµñÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüÊù•Ë∞ÉÂ∫¶‰ªªÂä°„ÄÅÁÆ°ÁêÜÂÖ±‰∫´ÁöÑÊú∫Âô®‰∏äÁöÑËµÑÊ∫ê„ÄÅÂ§ÑÁêÜÊú∫Âô®ÁöÑÊïÖÈöú„ÄÅ‰ª•ÂèäÁõëËßÜÊú∫Âô®ÁöÑÁä∂ÊÄÅ„ÄÇ BigTable ÂÜÖÈÉ®Â≠òÂÇ®Êï∞ÊçÆÁöÑÊñá‰ª∂ÊòØ Google SSTable Ê†ºÂºèÁöÑ„ÄÇSSTable ÊòØ‰∏Ä‰∏™ÊåÅ‰πÖÂåñÁöÑ„ÄÅÊéíÂ∫èÁöÑ„ÄÅ‰∏çÂèØÊõ¥ÊîπÁöÑ Map ÁªìÊûÑÔºåËÄå Map ÊòØ‰∏Ä‰∏™ key-value Êò†Â∞ÑÁöÑÊï∞ÊçÆÁªìÊûÑÔºåkey Âíå value ÁöÑÂÄºÈÉΩÊòØ‰ªªÊÑèÁöÑ Byte ‰∏≤„ÄÇÂèØ‰ª•ÂØπ SSTable ËøõË°åÂ¶Ç‰∏ãÁöÑÊìç‰Ωú:Êü•ËØ¢‰∏é‰∏Ä‰∏™ key ÂÄºÁõ∏ÂÖ≥ÁöÑ valueÔºåÊàñËÄÖÈÅçÂéÜÊüê‰∏™ key ÂÄºËåÉÂõ¥ÂÜÖÁöÑÊâÄÊúâÁöÑ key-value ÂØπ„ÄÇ‰ªéÂÜÖ ÈÉ®ÁúãÔºåSSTable ÊòØ‰∏ÄÁ≥ªÂàóÁöÑÊï∞ÊçÆÂùó(ÈÄöÂ∏∏ÊØè‰∏™ÂùóÁöÑÂ§ßÂ∞èÊòØ 64KBÔºåËøô‰∏™Â§ßÂ∞èÊòØÂèØ‰ª•ÈÖçÁΩÆÁöÑ)„ÄÇSSTable ‰ΩøÁî®ÂùóÁ¥¢ Âºï(ÈÄöÂ∏∏Â≠òÂÇ®Âú® SSTable ÁöÑÊúÄÂêé)Êù•ÂÆö‰ΩçÊï∞ÊçÆÂùó;Âú®ÊâìÂºÄ SSTable ÁöÑÊó∂ÂÄôÔºåÁ¥¢ÂºïË¢´Âä†ËΩΩÂà∞ÂÜÖÂ≠ò„ÄÇÊØèÊ¨°Êü•ÊâæÈÉΩÂèØ ‰ª•ÈÄöËøá‰∏ÄÊ¨°Á£ÅÁõòÊêúÁ¥¢ÂÆåÊàê:È¶ñÂÖà‰ΩøÁî®‰∫åÂàÜÊü•ÊâæÊ≥ïÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÁ¥¢ÂºïÈáåÊâæÂà∞Êï∞ÊçÆÂùóÁöÑ‰ΩçÁΩÆÔºåÁÑ∂ÂêéÂÜç‰ªéÁ°¨ÁõòËØªÂèñÁõ∏ Â∫îÁöÑÊï∞ÊçÆÂùó„ÄÇ‰πüÂèØ‰ª•ÈÄâÊã©ÊääÊï¥‰∏™ SSTable ÈÉΩÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåËøôÊ†∑Â∞±‰∏çÂøÖËÆøÈóÆÁ°¨Áõò‰∫Ü„ÄÇ BigTable Ëøò‰æùËµñ‰∏Ä‰∏™È´òÂèØÁî®ÁöÑ„ÄÅÂ∫èÂàóÂåñÁöÑÂàÜÂ∏ÉÂºèÈîÅÊúçÂä°ÁªÑ‰ª∂ÔºåÂè´ÂÅö Chubby„Äê8„Äë„ÄÇ‰∏Ä‰∏™ Chubby ÊúçÂä°ÂåÖÊã¨ ‰∫Ü 5 ‰∏™Ê¥ªÂä®ÁöÑÂâØÊú¨ÔºåÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÂâØÊú¨Ë¢´ÈÄâ‰∏∫ MasterÔºåÂπ∂‰∏îÂ§ÑÁêÜËØ∑Ê±Ç„ÄÇÂè™ÊúâÂú®Â§ßÂ§öÊï∞ÂâØÊú¨ÈÉΩÊòØÊ≠£Â∏∏ËøêË°åÁöÑÔºåÂπ∂ ‰∏îÂΩºÊ≠§‰πãÈó¥ËÉΩÂ§ü‰∫íÁõ∏ÈÄö‰ø°ÁöÑÊÉÖÂÜµ‰∏ãÔºåChubby ÊúçÂä°ÊâçÊòØÂèØÁî®ÁöÑ„ÄÇÂΩìÊúâÂâØÊú¨Â§±ÊïàÁöÑÊó∂ÂÄôÔºåChubby ‰ΩøÁî® Paxos ÁÆóÊ≥ï „Äê9,23„ÄëÊù•‰øùËØÅÂâØÊú¨ÁöÑ‰∏ÄËá¥ÊÄß„ÄÇChubby Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂêçÂ≠óÁ©∫Èó¥ÔºåÈáåÈù¢ÂåÖÊã¨‰∫ÜÁõÆÂΩïÂíåÂ∞èÊñá‰ª∂„ÄÇÊØè‰∏™ÁõÆÂΩïÊàñËÄÖÊñá‰ª∂ ÂèØ‰ª•ÂΩìÊàê‰∏Ä‰∏™ÈîÅÔºåËØªÂÜôÊñá‰ª∂ÁöÑÊìç‰ΩúÈÉΩÊòØÂéüÂ≠êÁöÑ„ÄÇChubby ÂÆ¢Êà∑Á®ãÂ∫èÂ∫ìÊèê‰æõÂØπ Chubby Êñá‰ª∂ÁöÑ‰∏ÄËá¥ÊÄßÁºìÂ≠ò„ÄÇÊØè‰∏™ Chubby ÂÆ¢Êà∑Á®ãÂ∫èÈÉΩÁª¥Êä§‰∏Ä‰∏™‰∏é Chubby ÊúçÂä°ÁöÑ‰ºöËØù„ÄÇÂ¶ÇÊûúÂÆ¢Êà∑Á®ãÂ∫è‰∏çËÉΩÂú®ÁßüÁ∫¶Âà∞ÊúüÁöÑÊó∂Èó¥ÂÜÖÈáçÊñ∞Á≠æËÆ¢‰ºöËØùÁöÑ ÁßüÁ∫¶ÔºåËøô‰∏™‰ºöËØùÂ∞±ËøáÊúüÂ§±Êïà‰∫Ü9„ÄÇÂΩì‰∏Ä‰∏™‰ºöËØùÂ§±ÊïàÊó∂ÔºåÂÆÉÊã•ÊúâÁöÑÈîÅÂíåÊâìÂºÄÁöÑÊñá‰ª∂Âè•ÊüÑÈÉΩÂ§±Êïà‰∫Ü„ÄÇChubby ÂÆ¢Êà∑ Á®ãÂ∫èÂèØ‰ª•Âú®Êñá‰ª∂ÂíåÁõÆÂΩï‰∏äÊ≥®ÂÜåÂõûË∞ÉÂáΩÊï∞ÔºåÂΩìÊñá‰ª∂ÊàñÁõÆÂΩïÊîπÂèò„ÄÅÊàñËÄÖ‰ºöËØùËøáÊúüÊó∂ÔºåÂõûË∞ÉÂáΩÊï∞‰ºöÈÄöÁü•ÂÆ¢Êà∑Á®ãÂ∫è„ÄÇ Bigtable ‰ΩøÁî® Chubby ÂÆåÊàê‰ª•‰∏ãÁöÑÂá†‰∏™‰ªªÂä°: Á°Æ‰øùÂú®‰ªª‰ΩïÁªôÂÆöÁöÑÊó∂Èó¥ÂÜÖÊúÄÂ§öÂè™Êúâ‰∏Ä‰∏™Ê¥ªÂä®ÁöÑ Master ÂâØÊú¨; Â≠òÂÇ® BigTable Êï∞ÊçÆÁöÑËá™ÂºïÂØºÊåá‰ª§ÁöÑ‰ΩçÁΩÆ(ÂèÇËÄÉ 5.1 ËäÇ); Êü•Êâæ Tablet ÊúçÂä°Âô®Ôºå‰ª•ÂèäÂú® Tablet ÊúçÂä°Âô®Â§±ÊïàÊó∂ËøõË°åÂñÑÂêé(5.2 ËäÇ); Â≠òÂÇ® BigTable ÁöÑÊ®°Âºè‰ø°ÊÅØ(ÊØèÂº†Ë°®ÁöÑÂàóÊóè‰ø°ÊÅØ); ‰ª•ÂèäÂ≠òÂÇ®ËÆøÈóÆÊéßÂà∂ÂàóË°®„ÄÇ Â¶ÇÊûú Chubby ÈïøÊó∂Èó¥Êó†Ê≥ïËÆøÈóÆÔºåBigTable Â∞±‰ºöÂ§±Êïà„ÄÇÊúÄËøëÊàë‰ª¨Âú®‰ΩøÁî® 11 ‰∏™ Chubby ÊúçÂä°ÂÆû‰æãÁöÑ 14 ‰∏™ BigTableÈõÜÁæ§‰∏äÊµãÈáè‰∫ÜËøô‰∏™ÂΩ±Âìç„ÄÇÁî±‰∫é Chubby ‰∏çÂèØÁî®ËÄåÂØºËá¥ BigTable ‰∏≠ÁöÑÈÉ®ÂàÜÊï∞ÊçÆ‰∏çËÉΩËÆøÈóÆÁöÑÂπ≥ÂùáÊØîÁéáÊòØ 0.0047% (Chubby ‰∏çËÉΩËÆøÈóÆÁöÑÂéüÂõ†ÂèØËÉΩÊòØ Chubby Êú¨Ë∫´Â§±ÊïàÊàñËÄÖÁΩëÁªúÈóÆÈ¢ò)„ÄÇÂçï‰∏™ÈõÜÁæ§ÈáåÔºåÂèó Chubby Â§±ÊïàÂΩ±ÂìçÊúÄÂ§ßÁöÑ ÁôæÂàÜÊØîÊòØ 0.0326%10„ÄÇ‰ªãÁªçBigtable ÂåÖÊã¨‰∫Ü‰∏â‰∏™‰∏ªË¶ÅÁöÑÁªÑ‰ª∂:ÈìæÊé•Âà∞ÂÆ¢Êà∑Á®ãÂ∫è‰∏≠ÁöÑÂ∫ì„ÄÅ‰∏Ä‰∏™ Master ÊúçÂä°Âô®ÂíåÂ§ö‰∏™ Tablet ÊúçÂä°Âô®„ÄÇÈíà ÂØπÁ≥ªÁªüÂ∑•‰ΩúË¥üËΩΩÁöÑÂèòÂåñÊÉÖÂÜµÔºåBigTable ÂèØ‰ª•Âä®ÊÄÅÁöÑÂêëÈõÜÁæ§‰∏≠Ê∑ªÂä†(ÊàñËÄÖÂà†Èô§)Tablet ÊúçÂä°Âô®„ÄÇ Master ÊúçÂä°Âô®‰∏ªË¶ÅË¥üË¥£‰ª•‰∏ãÂ∑•‰Ωú:‰∏∫ Tablet ÊúçÂä°Âô®ÂàÜÈÖç Tablets„ÄÅÊ£ÄÊµãÊñ∞Âä†ÂÖ•ÁöÑÊàñËÄÖËøáÊúüÂ§±ÊïàÁöÑ Table Êúç Âä°Âô®„ÄÅÂØπ Tablet ÊúçÂä°Âô®ËøõË°åË¥üËΩΩÂùáË°°„ÄÅ‰ª•ÂèäÂØπ‰øùÂ≠òÂú® GFS ‰∏äÁöÑÊñá‰ª∂ËøõË°åÂûÉÂúæÊî∂ÈõÜ„ÄÇÈô§Ê≠§‰πãÂ§ñÔºåÂÆÉËøòÂ§ÑÁêÜÂØπÊ®° ÂºèÁöÑÁõ∏ÂÖ≥‰øÆÊîπÊìç‰ΩúÔºå‰æãÂ¶ÇÂª∫Á´ãË°®ÂíåÂàóÊóè„ÄÇ ÊØè‰∏™ Tablet ÊúçÂä°Âô®ÈÉΩÁÆ°ÁêÜ‰∏Ä‰∏™ Tablet ÁöÑÈõÜÂêà(ÈÄöÂ∏∏ÊØè‰∏™ÊúçÂä°Âô®ÊúâÂ§ßÁ∫¶Êï∞ÂçÅ‰∏™Ëá≥‰∏äÂçÉ‰∏™ Tablet)„ÄÇÊØè‰∏™ Tablet ÊúçÂä°Âô®Ë¥üË¥£Â§ÑÁêÜÂÆÉÊâÄÂä†ËΩΩÁöÑ Tablet ÁöÑËØªÂÜôÊìç‰ΩúÔºå‰ª•ÂèäÂú® Tablets ËøáÂ§ßÊó∂ÔºåÂØπÂÖ∂ËøõË°åÂàÜÂâ≤„ÄÇ ÂíåÂæàÂ§ö Single-Master Á±ªÂûãÁöÑÂàÜÂ∏ÉÂºèÂ≠òÂÇ®Á≥ªÁªü„Äê17.21„ÄëÁ±ª‰ººÔºåÂÆ¢Êà∑Á´ØËØªÂèñÁöÑÊï∞ÊçÆÈÉΩ‰∏çÁªèËøá Master ÊúçÂä°Âô®: ÂÆ¢Êà∑Á®ãÂ∫èÁõ¥Êé•Âíå Tablet ÊúçÂä°Âô®ÈÄö‰ø°ËøõË°åËØªÂÜôÊìç‰Ωú„ÄÇÁî±‰∫é BigTable ÁöÑÂÆ¢Êà∑Á®ãÂ∫è‰∏çÂøÖÈÄöËøá Master ÊúçÂä°Âô®Êù•Ëé∑Âèñ Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÔºåÂõ†Ê≠§ÔºåÂ§ßÂ§öÊï∞ÂÆ¢Êà∑Á®ãÂ∫èÁîöËá≥ÂÆåÂÖ®‰∏çÈúÄË¶ÅÂíå Master ÊúçÂä°Âô®ÈÄö‰ø°„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåMaster Êúç Âä°Âô®ÁöÑË¥üËΩΩÊòØÂæàËΩªÁöÑ„ÄÇ ‰∏Ä‰∏™ BigTable ÈõÜÁæ§Â≠òÂÇ®‰∫ÜÂæàÂ§öË°®ÔºåÊØè‰∏™Ë°®ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ Tablet ÁöÑÈõÜÂêàÔºåËÄåÊØè‰∏™ Tablet ÂåÖÂê´‰∫ÜÊüê‰∏™ËåÉÂõ¥ÂÜÖÁöÑ Ë°åÁöÑÊâÄÊúâÁõ∏ÂÖ≥Êï∞ÊçÆ„ÄÇÂàùÂßãÁä∂ÊÄÅ‰∏ãÔºå‰∏Ä‰∏™Ë°®Âè™Êúâ‰∏Ä‰∏™ Tablet„ÄÇÈöèÁùÄË°®‰∏≠Êï∞ÊçÆÁöÑÂ¢ûÈïøÔºåÂÆÉË¢´Ëá™Âä®ÂàÜÂâ≤ÊàêÂ§ö‰∏™ TabletÔºå Áº∫ÁúÅÊÉÖÂÜµ‰∏ãÔºåÊØè‰∏™ Tablet ÁöÑÂ∞∫ÂØ∏Â§ßÁ∫¶ÊòØ 100MB Âà∞ 200MB„ÄÇ Tablet ÁöÑ‰ΩçÁΩÆÊàë‰ª¨‰ΩøÁî®‰∏Ä‰∏™‰∏âÂ±ÇÁöÑ„ÄÅÁ±ª‰ººB+Ê†ë[10]ÁöÑÁªìÊûÑÂ≠òÂÇ® Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ(Â¶ÇÂõæ 4)„ÄÇÁ¨¨‰∏ÄÂ±ÇÊòØ‰∏Ä‰∏™Â≠òÂÇ®Âú® Chubby ‰∏≠ÁöÑÊñá‰ª∂ÔºåÂÆÉÂåÖÂê´‰∫Ü Root Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇRoot Tablet ÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÁâπÊÆä ÁöÑ METADATA Ë°®ÈáåÊâÄÊúâÁöÑ Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇMETADATA Ë°®ÁöÑÊØè‰∏™ Tablet ÂåÖÂê´‰∫Ü‰∏Ä‰∏™Áî®Êà∑ Tablet ÁöÑÈõÜÂêà„ÄÇ Root Tablet ÂÆûÈôÖ‰∏äÊòØ METADATA Ë°®ÁöÑÁ¨¨‰∏Ä‰∏™ TabletÔºåÂè™‰∏çËøáÂØπÂÆÉÁöÑÂ§ÑÁêÜÊØîËæÉÁâπÊÆä ‚Äî Root Tablet Ê∞∏Ëøú‰∏ç‰ºöË¢´ ÂàÜÂâ≤ ‚Äî ËøôÂ∞±‰øùËØÅ‰∫Ü Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÂ≠òÂÇ®ÁªìÊûÑ‰∏ç‰ºöË∂ÖËøá‰∏âÂ±Ç„ÄÇ Âú® METADATA Ë°®ÈáåÈù¢ÔºåÊØè‰∏™ Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÈÉΩÂ≠òÊîæÂú®‰∏Ä‰∏™Ë°åÂÖ≥ÈîÆÂ≠ó‰∏ãÈù¢ÔºåËÄåËøô‰∏™Ë°åÂÖ≥ÈîÆÂ≠óÊòØÁî± Tablet ÊâÄÂú®ÁöÑË°®ÁöÑÊ†áËØÜÁ¨¶Âíå Tablet ÁöÑÊúÄÂêé‰∏ÄË°åÁºñÁ†ÅËÄåÊàêÁöÑ„ÄÇMETADATA ÁöÑÊØè‰∏ÄË°åÈÉΩÂ≠òÂÇ®‰∫ÜÂ§ßÁ∫¶ 1KB ÁöÑÂÜÖÂ≠òÊï∞ÊçÆ„ÄÇ Âú®‰∏Ä‰∏™Â§ßÂ∞èÈÄÇ‰∏≠ÁöÑ„ÄÅÂÆπÈáèÈôêÂà∂‰∏∫ 128MB ÁöÑ METADATA Tablet ‰∏≠ÔºåÈááÁî®ËøôÁßç‰∏âÂ±ÇÁªìÊûÑÁöÑÂ≠òÂÇ®Ê®°ÂºèÔºåÂèØ‰ª•Ê†áËØÜ 2^34 ‰∏™ Tablet ÁöÑÂú∞ÂùÄ(Â¶ÇÊûúÊØè‰∏™ Tablet Â≠òÂÇ® 128MB Êï∞ÊçÆÔºåÈÇ£‰πà‰∏ÄÂÖ±ÂèØ‰ª•Â≠òÂÇ® 2^61 Â≠óËäÇÊï∞ÊçÆ)„ÄÇ ÂÆ¢Êà∑Á®ãÂ∫è‰ΩøÁî®ÁöÑÂ∫ì‰ºöÁºìÂ≠ò Tablet ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúÂÆ¢Êà∑Á®ãÂ∫èÊ≤°ÊúâÁºìÂ≠òÊüê‰∏™ Tablet ÁöÑÂú∞ÂùÄ‰ø°ÊÅØÔºåÊàñËÄÖÂèëÁé∞ ÂÆÉÁºìÂ≠òÁöÑÂú∞ÂùÄ‰ø°ÊÅØ‰∏çÊ≠£Á°ÆÔºåÂÆ¢Êà∑Á®ãÂ∫èÂ∞±Âú®Ê†ëÁä∂ÁöÑÂ≠òÂÇ®ÁªìÊûÑ‰∏≠ÈÄíÂΩíÁöÑÊü•ËØ¢ Tablet ‰ΩçÁΩÆ‰ø°ÊÅØ;Â¶ÇÊûúÂÆ¢Êà∑Á´ØÁºìÂ≠òÊòØ Á©∫ÁöÑÔºåÈÇ£‰πàÂØªÂùÄÁÆóÊ≥ïÈúÄË¶ÅÈÄöËøá‰∏âÊ¨°ÁΩëÁªúÊù•ÂõûÈÄö‰ø°ÂØªÂùÄÔºåËøôÂÖ∂‰∏≠ÂåÖÊã¨‰∫Ü‰∏ÄÊ¨° Chubby ËØªÊìç‰Ωú;Â¶ÇÊûúÂÆ¢Êà∑Á´ØÁºìÂ≠òÁöÑ Âú∞ÂùÄ‰ø°ÊÅØËøáÊúü‰∫ÜÔºåÈÇ£‰πàÂØªÂùÄÁÆóÊ≥ïÂèØËÉΩÈúÄË¶ÅÊúÄÂ§ö6Ê¨°ÁΩëÁªúÊù•ÂõûÈÄö‰ø°ÊâçËÉΩÊõ¥Êñ∞Êï∞ÊçÆÔºåÂõ†‰∏∫Âè™ÊúâÂú®ÁºìÂ≠ò‰∏≠Ê≤°ÊúâÊü•Âà∞ Êï∞ÊçÆÁöÑÊó∂ÂÄôÊâçËÉΩÂèëÁé∞Êï∞ÊçÆËøáÊúü11„ÄÇÂ∞ΩÁÆ° Tablet ÁöÑÂú∞ÂùÄ‰ø°ÊÅØÊòØÂ≠òÊîæÂú®ÂÜÖÂ≠òÈáåÁöÑÔºåÂØπÂÆÉÁöÑÊìç‰Ωú‰∏çÂøÖËÆøÈóÆ GFS Êñá‰ª∂ Á≥ªÁªüÔºå‰ΩÜÊòØÔºåÈÄöÂ∏∏Êàë‰ª¨‰ºöÈÄöËøáÈ¢ÑÂèñ Tablet Âú∞ÂùÄÊù•Ëøõ‰∏ÄÊ≠•ÁöÑÂáèÂ∞ëËÆøÈóÆÁöÑÂºÄÈîÄ:ÊØèÊ¨°ÈúÄË¶Å‰ªé METADATA Ë°®‰∏≠ËØªÂèñ‰∏Ä‰∏™ Tablet ÁöÑÂÖÉÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂÆÉÈÉΩ‰ºöÂ§öËØªÂèñÂá†‰∏™ Tablet ÁöÑÂÖÉÊï∞ÊçÆ„ÄÇ Âú® METADATA Ë°®‰∏≠ËøòÂ≠òÂÇ®‰∫ÜÊ¨°Á∫ß‰ø°ÊÅØ12ÔºåÂåÖÊã¨ÊØè‰∏™ Tablet ÁöÑ‰∫ã‰ª∂Êó•Âøó(‰æãÂ¶ÇÔºå‰ªÄ‰πàÊó∂ÂÄô‰∏Ä‰∏™ÊúçÂä°Âô®ÂºÄÂßã‰∏∫ËØ• Tablet Êèê‰æõÊúçÂä°)„ÄÇËøô‰∫õ‰ø°ÊÅØÊúâÂä©‰∫éÊéíÊü•ÈîôËØØÂíåÊÄßËÉΩÂàÜÊûê„ÄÇ Tablet ÂàÜÈÖçÂú®‰ªª‰Ωï‰∏Ä‰∏™Êó∂ÂàªÔºå‰∏Ä‰∏™ Tablet Âè™ËÉΩÂàÜÈÖçÁªô‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®„ÄÇMaster ÊúçÂä°Âô®ËÆ∞ÂΩï‰∫ÜÂΩìÂâçÊúâÂì™‰∫õÊ¥ªË∑ÉÁöÑ Tablet ÊúçÂä°Âô®„ÄÅÂì™‰∫õ Tablet ÂàÜÈÖçÁªô‰∫ÜÂì™‰∫õ Tablet ÊúçÂä°Âô®„ÄÅÂì™‰∫õ Tablet ËøòÊ≤°ÊúâË¢´ÂàÜÈÖç„ÄÇÂΩì‰∏Ä‰∏™ Tablet ËøòÊ≤°ÊúâË¢´ÂàÜÈÖç„ÄÅ Âπ∂‰∏îÂàöÂ•ΩÊúâ‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÊúâË∂≥Â§üÁöÑÁ©∫Èó≤Á©∫Èó¥Ë£ÖËΩΩËØ• Tablet Êó∂ÔºåMaster ÊúçÂä°Âô®‰ºöÁªôËøô‰∏™ Tablet ÊúçÂä°Âô®ÂèëÈÄÅ ‰∏Ä‰∏™Ë£ÖËΩΩËØ∑Ê±ÇÔºåÊää Tablet ÂàÜÈÖçÁªôËøô‰∏™ÊúçÂä°Âô®„ÄÇ BigTable ‰ΩøÁî® Chubby Ë∑üË∏™ËÆ∞ÂΩï Tablet ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅ„ÄÇÂΩì‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÂêØÂä®Êó∂ÔºåÂÆÉÂú® Chubby ÁöÑ‰∏Ä‰∏™ ÊåáÂÆöÁõÆÂΩï‰∏ãÂª∫Á´ã‰∏Ä‰∏™ÊúâÂîØ‰∏ÄÊÄßÂêçÂ≠óÁöÑÊñá‰ª∂ÔºåÂπ∂‰∏îËé∑ÂèñËØ•Êñá‰ª∂ÁöÑÁã¨Âç†ÈîÅ„ÄÇMaster ÊúçÂä°Âô®ÂÆûÊó∂ÁõëÊéßÁùÄËøô‰∏™ÁõÆÂΩï(Êúç Âä°Âô®ÁõÆÂΩï)ÔºåÂõ†Ê≠§ Master ÊúçÂä°Âô®ËÉΩÂ§üÁü•ÈÅìÊúâÊñ∞ÁöÑ Tablet ÊúçÂä°Âô®Âä†ÂÖ•‰∫Ü„ÄÇÂ¶ÇÊûú Tablet ÊúçÂä°Âô®‰∏¢Â§±‰∫Ü Chubby ‰∏äÁöÑ Áã¨Âç†ÈîÅ ‚Äî ÊØîÂ¶ÇÁî±‰∫éÁΩëÁªúÊñ≠ÂºÄÂØºËá¥ Tablet ÊúçÂä°Âô®Âíå Chubby ÁöÑ‰ºöËØù‰∏¢Â§± ‚Äî ÂÆÉÂ∞±ÂÅúÊ≠¢ÂØπ Tablet Êèê‰æõÊúçÂä°„ÄÇ (Chubby Êèê‰æõ‰∫Ü‰∏ÄÁßçÈ´òÊïàÁöÑÊú∫Âà∂ÔºåÂà©Áî®ËøôÁßçÊú∫Âà∂ÔºåTablet ÊúçÂä°Âô®ËÉΩÂ§üÂú®‰∏çÂ¢ûÂä†ÁΩëÁªúË¥üÊãÖÁöÑÊÉÖÂÜµ‰∏ãÁü•ÈÅìÂÆÉÊòØÂê¶ ËøòÊåÅÊúâÈîÅ)„ÄÇÂè™Ë¶ÅÊñá‰ª∂ËøòÂ≠òÂú®ÔºåTablet ÊúçÂä°Âô®Â∞±‰ºöËØïÂõæÈáçÊñ∞Ëé∑ÂæóÂØπËØ•Êñá‰ª∂ÁöÑÁã¨Âç†ÈîÅ;Â¶ÇÊûúÊñá‰ª∂‰∏çÂ≠òÂú®‰∫ÜÔºåÈÇ£‰πà Tablet ÊúçÂä°Âô®Â∞±‰∏çËÉΩÂÜçÊèê‰æõÊúçÂä°‰∫ÜÔºåÂÆÉ‰ºöËá™Ë°åÈÄÄÂá∫13„ÄÇÂΩì Tablet ÊúçÂä°Âô®ÁªàÊ≠¢Êó∂(ÊØîÂ¶ÇÔºåÈõÜÁæ§ÁöÑÁÆ°ÁêÜÁ≥ªÁªüÂ∞ÜËøêË°å ËØ• Tablet ÊúçÂä°Âô®ÁöÑ‰∏ªÊú∫‰ªéÈõÜÁæ§‰∏≠ÁßªÈô§)ÔºåÂÆÉ‰ºöÂ∞ùËØïÈáäÊîæÂÆÉÊåÅÊúâÁöÑÊñá‰ª∂ÈîÅÔºåËøôÊ†∑‰∏ÄÊù•ÔºåMaster ÊúçÂä°Âô®Â∞±ËÉΩÂ∞ΩÂø´Êää Tablet ÂàÜÈÖçÂà∞ÂÖ∂ÂÆÉÁöÑ Tablet ÊúçÂä°Âô®„ÄÇ Master ÊúçÂä°Âô®Ë¥üË¥£Ê£ÄÊü•‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÊòØÂê¶Â∑≤Áªè‰∏çÂÜç‰∏∫ÂÆÉÁöÑ Tablet Êèê‰æõÊúçÂä°‰∫ÜÔºåÂπ∂‰∏îË¶ÅÂ∞ΩÂø´ÈáçÊñ∞ÂàÜÈÖç ÂÆÉÂä†ËΩΩÁöÑ Tablet„ÄÇMaster ÊúçÂä°Âô®ÈÄöËøáËΩÆËØ¢ Tablet ÊúçÂä°Âô®Êñá‰ª∂ÈîÅÁöÑÁä∂ÊÄÅÊù•Ê£ÄÊµã‰ΩïÊó∂ Tablet ÊúçÂä°Âô®‰∏çÂÜç‰∏∫ Tablet Êèê‰æõÊúçÂä°„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®Êä•ÂëäÂÆÉ‰∏¢Â§±‰∫ÜÊñá‰ª∂ÈîÅÔºåÊàñËÄÖ Master ÊúçÂä°Âô®ÊúÄËøëÂá†Ê¨°Â∞ùËØïÂíåÂÆÉÈÄö‰ø°ÈÉΩÊ≤°ÊúâÂæóÂà∞ÂìçÂ∫îÔºåMaster ÊúçÂä°Âô®Â∞±‰ºöÂ∞ùËØïËé∑ÂèñËØ• Tablet ÊúçÂä°Âô®Êñá‰ª∂ÁöÑÁã¨Âç†ÈîÅ;Â¶ÇÊûú Master ÊúçÂä°Âô®ÊàêÂäüËé∑Âèñ‰∫ÜÁã¨Âç†ÈîÅÔºå ÈÇ£‰πàÂ∞±ËØ¥Êòé Chubby ÊòØÊ≠£Â∏∏ËøêË°åÁöÑÔºåËÄå Tablet ÊúçÂä°Âô®Ë¶Å‰πàÊòØÂÆïÊú∫‰∫Ü„ÄÅË¶Å‰πàÊòØ‰∏çËÉΩÂíå Chubby ÈÄö‰ø°‰∫ÜÔºåÂõ†Ê≠§ÔºåMaster ÊúçÂä°Âô®Â∞±Âà†Èô§ËØ• Tablet ÊúçÂä°Âô®Âú® Chubby ‰∏äÁöÑÊúçÂä°Âô®Êñá‰ª∂‰ª•Á°Æ‰øùÂÆÉ‰∏çÂÜçÁªô Tablet Êèê‰æõÊúçÂä°„ÄÇ‰∏ÄÊó¶ Tablet ÊúçÂä°Âô® Âú® Chubby ‰∏äÁöÑÊúçÂä°Âô®Êñá‰ª∂Ë¢´Âà†Èô§‰∫ÜÔºåMaster ÊúçÂä°Âô®Â∞±Êää‰πãÂâçÂàÜÈÖçÁªôÂÆÉÁöÑÊâÄÊúâÁöÑ Tablet ÊîæÂÖ•Êú™ÂàÜÈÖçÁöÑ Tablet ÈõÜÂêà‰∏≠„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øù Bigtable ÈõÜÁæ§Âú® Master ÊúçÂä°Âô®Âíå Chubby ‰πãÈó¥ÁΩëÁªúÂá∫Áé∞ÊïÖÈöúÁöÑÊó∂ÂÄô‰ªçÁÑ∂ÂèØ‰ª•‰ΩøÁî®ÔºåMaster ÊúçÂä°Âô®Âú®ÂÆÉÁöÑ Chubby ‰ºöËØùËøáÊúüÂêé‰∏ªÂä®ÈÄÄÂá∫„ÄÇ‰ΩÜÊòØ‰∏çÁÆ°ÊÄéÊ†∑ÔºåÂ¶ÇÂêåÊàë‰ª¨ÂâçÈù¢ÊâÄÊèèËø∞ÁöÑÔºåMaster ÊúçÂä°Âô®ÁöÑÊïÖÈöú‰∏ç ‰ºöÊîπÂèòÁé∞Êúâ Tablet Âú® Tablet ÊúçÂä°Âô®‰∏äÁöÑÂàÜÈÖçÁä∂ÊÄÅ„ÄÇ ÂΩìÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüÂêØÂä®‰∫Ü‰∏Ä‰∏™ Master ÊúçÂä°Âô®‰πãÂêéÔºåMaster ÊúçÂä°Âô®È¶ñÂÖàË¶Å‰∫ÜËß£ÂΩìÂâç Tablet ÁöÑÂàÜÈÖçÁä∂ÊÄÅÔºå‰πãÂêé ÊâçËÉΩÂ§ü‰øÆÊîπÂàÜÈÖçÁä∂ÊÄÅ„ÄÇMaster ÊúçÂä°Âô®Âú®ÂêØÂä®ÁöÑÊó∂ÂÄôÊâßË°å‰ª•‰∏ãÊ≠•È™§: Master ÊúçÂä°Âô®‰ªé Chubby Ëé∑Âèñ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ Master ÈîÅÔºåÁî®Êù•ÈòªÊ≠¢ÂàõÂª∫ÂÖ∂ÂÆÉÁöÑ Master ÊúçÂä°Âô®ÂÆû‰æã; Master ÊúçÂä°Âô®Êâ´Êèè Chubby ÁöÑÊúçÂä°Âô®Êñá‰ª∂ÈîÅÂ≠òÂÇ®ÁõÆÂΩïÔºåËé∑ÂèñÂΩìÂâçÊ≠£Âú®ËøêË°åÁöÑÊúçÂä°Âô®ÂàóË°®; Master ÊúçÂä°Âô®ÂíåÊâÄÊúâÁöÑÊ≠£Âú®ËøêË°åÁöÑ Tablet Ë°®ÊúçÂä°Âô®ÈÄö‰ø°ÔºåËé∑ÂèñÊØè‰∏™ Tablet ÊúçÂä°Âô®‰∏ä Tablet ÁöÑÂàÜÈÖç‰ø°ÊÅØ; Master ÊúçÂä°Âô®Êâ´Êèè METADATA Ë°®Ëé∑ÂèñÊâÄÊúâÁöÑ Tablet ÁöÑÈõÜÂêà„ÄÇ Âú®Êâ´ÊèèÁöÑËøáÁ®ã‰∏≠ÔºåÂΩì Master ÊúçÂä°Âô®ÂèëÁé∞‰∫Ü‰∏Ä‰∏™ËøòÊ≤°ÊúâÂàÜÈÖçÁöÑ TabletÔºåMaster ÊúçÂä°Âô®Â∞±Â∞ÜËøô‰∏™ Tablet Âä†ÂÖ•Êú™ÂàÜÈÖçÁöÑ Tablet ÈõÜÂêàÁ≠âÂæÖÂêàÈÄÇÁöÑÊó∂Êú∫ÂàÜÈÖç„ÄÇ ÂèØËÉΩ‰ºöÈÅáÂà∞‰∏ÄÁßçÂ§çÊùÇÁöÑÊÉÖÂÜµ:Âú® METADATA Ë°®ÁöÑ Tablet ËøòÊ≤°ÊúâË¢´ÂàÜÈÖç‰πãÂâçÊòØ‰∏çËÉΩÂ§üÊâ´ÊèèÂÆÉÁöÑ„ÄÇÂõ†Ê≠§ÔºåÂú®ÂºÄÂßãÊâ´Êèè‰πãÂâç(Ê≠•È™§ 4)ÔºåÂ¶ÇÊûúÂú®Á¨¨‰∏âÊ≠•ÁöÑÊâ´ÊèèËøáÁ®ã‰∏≠ÂèëÁé∞ Root Tablet ËøòÊ≤°ÊúâÂàÜÈÖçÔºåMaster ÊúçÂä°Âô®Â∞±Êää Root Tablet Âä†ÂÖ•Âà∞Êú™ÂàÜÈÖçÁöÑ Tablet ÈõÜÂêà„ÄÇËøô‰∏™ÈôÑÂä†Êìç‰ΩúÁ°Æ‰øù‰∫Ü Root Tablet ‰ºöË¢´ÂàÜÈÖç„ÄÇÁî±‰∫é Root Tablet ÂåÖÊã¨‰∫ÜÊâÄÊúâ METADATA ÁöÑ Tablet ÁöÑÂêçÂ≠óÔºåÂõ†Ê≠§ Master ÊúçÂä°Âô®Êâ´ÊèèÂÆå Root Tablet ‰ª•ÂêéÔºåÂ∞±ÂæóÂà∞‰∫ÜÊâÄÊúâÁöÑ METADATA Ë°® ÁöÑ Tablet ÁöÑÂêçÂ≠ó‰∫Ü„ÄÇ ‰øùÂ≠òÁé∞Êúâ Tablet ÁöÑÈõÜÂêàÂè™ÊúâÂú®‰ª•‰∏ã‰∫ã‰ª∂ÂèëÁîüÊó∂Êâç‰ºöÊîπÂèò:Âª∫Á´ã‰∫Ü‰∏Ä‰∏™Êñ∞Ë°®ÊàñËÄÖÂà†Èô§‰∫Ü‰∏Ä‰∏™ÊóßË°®„ÄÅ‰∏§‰∏™ Tablet Ë¢´ÂêàÂπ∂‰∫Ü„ÄÅÊàñËÄÖ‰∏Ä‰∏™ Tablet Ë¢´ÂàÜÂâ≤Êàê‰∏§‰∏™Â∞èÁöÑ Tablet„ÄÇMaster ÊúçÂä°Âô®ÂèØ‰ª•Ë∑üË∏™ËÆ∞ÂΩïÊâÄÊúâËøô‰∫õ‰∫ã‰ª∂ÔºåÂõ†‰∏∫ Èô§‰∫ÜÊúÄÂêé‰∏Ä‰∏™‰∫ã‰ª∂Â§ñÁöÑ‰∏§‰∏™‰∫ã‰ª∂ÈÉΩÊòØÁî±ÂÆÉÂêØÂä®ÁöÑ„ÄÇTablet ÂàÜÂâ≤‰∫ã‰ª∂ÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜÔºåÂõ†‰∏∫ÂÆÉÊòØÁî± Tablet ÊúçÂä°Âô®ÂêØ Âä®„ÄÇÂú®ÂàÜÂâ≤Êìç‰ΩúÂÆåÊàê‰πãÂêéÔºåTablet ÊúçÂä°Âô®ÈÄöËøáÂú® METADATA Ë°®‰∏≠ËÆ∞ÂΩïÊñ∞ÁöÑ Tablet ÁöÑ‰ø°ÊÅØÊù•Êèê‰∫§Ëøô‰∏™Êìç‰Ωú;ÂΩì ÂàÜÂâ≤Êìç‰ΩúÊèê‰∫§‰πãÂêéÔºåTablet ÊúçÂä°Âô®‰ºöÈÄöÁü• Master ÊúçÂä°Âô®„ÄÇÂ¶ÇÊûúÂàÜÂâ≤Êìç‰ΩúÂ∑≤Êèê‰∫§ÁöÑ‰ø°ÊÅØÊ≤°ÊúâÈÄöÁü•Âà∞ Master ÊúçÂä° Âô®(ÂèØËÉΩ‰∏§‰∏™ÊúçÂä°Âô®‰∏≠Êúâ‰∏Ä‰∏™ÂÆïÊú∫‰∫Ü)ÔºåMaster ÊúçÂä°Âô®Âú®Ë¶ÅÊ±Ç Tablet ÊúçÂä°Âô®Ë£ÖËΩΩÂ∑≤ÁªèË¢´ÂàÜÂâ≤ÁöÑÂ≠êË°®ÁöÑÊó∂ÂÄô‰ºöÂèëÁé∞‰∏Ä‰∏™Êñ∞ÁöÑ Tablet„ÄÇÈÄöËøáÂØπÊØî METADATA Ë°®‰∏≠ Tablet ÁöÑ‰ø°ÊÅØÔºåTablet ÊúçÂä°Âô®‰ºöÂèëÁé∞ Master ÊúçÂä°Âô®Ë¶ÅÊ±ÇÂÖ∂Ë£ÖËΩΩÁöÑ Tablet Âπ∂‰∏çÂÆåÊï¥ÔºåÂõ†Ê≠§ÔºåTablet ÊúçÂä°Âô®‰ºöÈáçÊñ∞Âêë Master ÊúçÂä°Âô®ÂèëÈÄÅÈÄöÁü•‰ø°ÊÅØ„ÄÇ Tablet ÊúçÂä°Â¶ÇÂõæ 5 ÊâÄÁ§∫ÔºåTablet ÁöÑÊåÅ‰πÖÂåñÁä∂ÊÄÅ‰ø°ÊÅØ‰øùÂ≠òÂú® GFS ‰∏ä„ÄÇÊõ¥Êñ∞Êìç‰ΩúÊèê‰∫§Âà∞ REDO Êó•Âøó‰∏≠14„ÄÇÂú®Ëøô‰∫õÊõ¥Êñ∞Êìç ‰Ωú‰∏≠ÔºåÊúÄËøëÊèê‰∫§ÁöÑÈÇ£‰∫õÂ≠òÊîæÂú®‰∏Ä‰∏™ÊéíÂ∫èÁöÑÁºìÂ≠ò‰∏≠ÔºåÊàë‰ª¨Áß∞Ëøô‰∏™ÁºìÂ≠ò‰∏∫ memtable;ËæÉÊó©ÁöÑÊõ¥Êñ∞Â≠òÊîæÂú®‰∏ÄÁ≥ªÂàó SSTable ‰∏≠„ÄÇ‰∏∫‰∫ÜÊÅ¢Â§ç‰∏Ä‰∏™ TabletÔºåTablet ÊúçÂä°Âô®È¶ñÂÖà‰ªé METADATA Ë°®‰∏≠ËØªÂèñÂÆÉÁöÑÂÖÉÊï∞ÊçÆ„ÄÇTablet ÁöÑÂÖÉÊï∞ÊçÆÂåÖ Âê´‰∫ÜÁªÑÊàêËøô‰∏™ Tablet ÁöÑ SSTable ÁöÑÂàóË°®Ôºå‰ª•Âèä‰∏ÄÁ≥ªÂàóÁöÑ Redo Point15ÔºåËøô‰∫õ Redo Point ÊåáÂêëÂèØËÉΩÂê´ÊúâËØ• Tablet Êï∞ÊçÆÁöÑÂ∑≤Êèê‰∫§ÁöÑÊó•ÂøóËÆ∞ÂΩï„ÄÇTablet ÊúçÂä°Âô®Êää SSTable ÁöÑÁ¥¢ÂºïËØªËøõÂÜÖÂ≠òÔºå‰πãÂêéÈÄöËøáÈáçÂ§ç Redo Point ‰πãÂêéÊèê‰∫§ÁöÑÊõ¥ Êñ∞Êù•ÈáçÂª∫ memtable„ÄÇ ÂΩìÂØπ Tablet ÊúçÂä°Âô®ËøõË°åÂÜôÊìç‰ΩúÊó∂ÔºåTablet ÊúçÂä°Âô®È¶ñÂÖàË¶ÅÊ£ÄÊü•Ëøô‰∏™Êìç‰ΩúÊ†ºÂºèÊòØÂê¶Ê≠£Á°Æ„ÄÅÊìç‰ΩúÂèëËµ∑ËÄÖÊòØÂê¶ÊúâÊâß Ë°åËøô‰∏™Êìç‰ΩúÁöÑÊùÉÈôê„ÄÇÊùÉÈôêÈ™åËØÅÁöÑÊñπÊ≥ïÊòØÈÄöËøá‰ªé‰∏Ä‰∏™ Chubby Êñá‰ª∂ÈáåËØªÂèñÂá∫Êù•ÁöÑÂÖ∑ÊúâÂÜôÊùÉÈôêÁöÑÊìç‰ΩúËÄÖÂàóË°®Êù•ËøõË°å È™åËØÅ(Ëøô‰∏™Êñá‰ª∂Âá†‰πé‰∏ÄÂÆö‰ºöÂ≠òÊîæÂú® Chubby ÂÆ¢Êà∑ÁºìÂ≠òÈáå)„ÄÇÊàêÂäüÁöÑ‰øÆÊîπÊìç‰Ωú‰ºöËÆ∞ÂΩïÂú®Êèê‰∫§Êó•ÂøóÈáå„ÄÇÂèØ‰ª•ÈááÁî®Êâπ ÈáèÊèê‰∫§ÊñπÂºè16Êù•ÊèêÈ´òÂåÖÂê´Â§ßÈáèÂ∞èÁöÑ‰øÆÊîπÊìç‰ΩúÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÂêûÂêêÈáè„Äê13Ôºå16„Äë„ÄÇÂΩì‰∏Ä‰∏™ÂÜôÊìç‰ΩúÊèê‰∫§ÂêéÔºåÂÜôÁöÑÂÜÖÂÆπ ÊèíÂÖ•Âà∞ memtable ÈáåÈù¢„ÄÇ ÂΩìÂØπ Tablet ÊúçÂä°Âô®ËøõË°åËØªÊìç‰ΩúÊó∂ÔºåTablet ÊúçÂä°Âô®‰ºö‰ΩúÁ±ª‰ººÁöÑÂÆåÊï¥ÊÄßÂíåÊùÉÈôêÊ£ÄÊü•„ÄÇ‰∏Ä‰∏™ÊúâÊïàÁöÑËØªÊìç‰ΩúÂú®‰∏Ä‰∏™ Áî±‰∏ÄÁ≥ªÂàó SSTable Âíå memtable ÂêàÂπ∂ÁöÑËßÜÂõæÈáåÊâßË°å„ÄÇÁî±‰∫é SSTable Âíå memtable ÊòØÊåâÂ≠óÂÖ∏ÊéíÂ∫èÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂõ†Ê≠§ ÂèØ‰ª•È´òÊïàÁîüÊàêÂêàÂπ∂ËßÜÂõæ„ÄÇ ÂΩìËøõË°å Tablet ÁöÑÂêàÂπ∂ÂíåÂàÜÂâ≤Êó∂ÔºåÊ≠£Âú®ËøõË°åÁöÑËØªÂÜôÊìç‰ΩúËÉΩÂ§üÁªßÁª≠ËøõË°å„ÄÇ Á©∫Èó¥Êî∂Áº©ÈöèÁùÄÂÜôÊìç‰ΩúÁöÑÊâßË°åÔºåmemtable ÁöÑÂ§ßÂ∞è‰∏çÊñ≠Â¢ûÂä†„ÄÇÂΩì memtable ÁöÑÂ∞∫ÂØ∏Âà∞Ëææ‰∏Ä‰∏™Èó®ÈôêÂÄºÁöÑÊó∂ÂÄôÔºåËøô‰∏™ memtable Â∞±‰ºöË¢´ÂÜªÁªìÔºåÁÑ∂ÂêéÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ memtable;Ë¢´ÂÜªÁªì‰Ωè memtable ‰ºöË¢´ËΩ¨Êç¢Êàê SSTableÔºåÁÑ∂ÂêéÂÜôÂÖ• GFS18„ÄÇMinor Compaction ËøáÁ®ãÊúâ‰∏§‰∏™ÁõÆÁöÑ:shrink 19Tablet ÊúçÂä°Âô®‰ΩøÁî®ÁöÑÂÜÖÂ≠òÔºå‰ª•ÂèäÂú®ÊúçÂä°Âô®ÁÅæÈöæÊÅ¢Â§çËøáÁ®ã‰∏≠ÔºåÂáèÂ∞ëÂøÖÈ°ª‰ªé Êèê‰∫§Êó•ÂøóÈáåËØªÂèñÁöÑÊï∞ÊçÆÈáè„ÄÇÂú® Compaction ËøáÁ®ã‰∏≠ÔºåÊ≠£Âú®ËøõË°åÁöÑËØªÂÜôÊìç‰Ωú‰ªçËÉΩÁªßÁª≠„ÄÇ ÊØè‰∏ÄÊ¨° Minor Compaction ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ SSTable„ÄÇÂ¶ÇÊûú Minor Compaction ËøáÁ®ã‰∏çÂÅúÊªûÁöÑÊåÅÁª≠ËøõË°å‰∏ã ÂéªÔºåËØªÊìç‰ΩúÂèØËÉΩÈúÄË¶ÅÂêàÂπ∂Êù•Ëá™Â§ö‰∏™ SSTable ÁöÑÊõ¥Êñ∞;Âê¶ÂàôÔºåÊàë‰ª¨ÈÄöËøáÂÆöÊúüÂú®ÂêéÂè∞ÊâßË°å Merging Compaction Ëøá Á®ãÂêàÂπ∂Êñá‰ª∂ÔºåÈôêÂà∂ËøôÁ±ªÊñá‰ª∂ÁöÑÊï∞Èáè„ÄÇMerging Compaction ËøáÁ®ãËØªÂèñ‰∏Ä‰∫õ SSTable Âíå memtable ÁöÑÂÜÖÂÆπÔºåÂêàÂπ∂Êàê ‰∏Ä‰∏™Êñ∞ÁöÑ SSTable„ÄÇÂè™Ë¶Å Merging Compaction ËøáÁ®ãÂÆåÊàê‰∫ÜÔºåËæìÂÖ•ÁöÑËøô‰∫õ SSTable Âíå memtable Â∞±ÂèØ‰ª•Âà†Èô§‰∫Ü„ÄÇ ÂêàÂπ∂ÊâÄÊúâÁöÑ SSTable Âπ∂ÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑ SSTable ÁöÑ Merging Compaction ËøáÁ®ãÂè´‰Ωú Major Compaction„ÄÇÁî±Èùû Major Compaction ‰∫ßÁîüÁöÑ SSTable ÂèØËÉΩÂê´ÊúâÁâπÊÆäÁöÑÂà†Èô§Êù°ÁõÆÔºåËøô‰∫õÂà†Èô§Êù°ÁõÆËÉΩÂ§üÈöêËóèÂú®ÊóßÁöÑ„ÄÅ‰ΩÜÊòØ‰æùÁÑ∂ÊúâÊïàÁöÑ SSTable ‰∏≠Â∑≤ÁªèÂà†Èô§ÁöÑÊï∞ÊçÆ20„ÄÇËÄå Major Compaction ËøáÁ®ãÁîüÊàêÁöÑ SSTable ‰∏çÂåÖÂê´Â∑≤ÁªèÂà†Èô§ÁöÑ‰ø°ÊÅØÊàñÊï∞ÊçÆ„ÄÇBigtable Âæ™ÁéØÊâ´ÊèèÂÆÉÊâÄÊúâÁöÑ TabletÔºåÂπ∂‰∏îÂÆöÊúüÂØπÂÆÉ‰ª¨ÊâßË°å Major Compaction„ÄÇMajor Compaction Êú∫Âà∂ÂÖÅËÆ∏ Bigtable ÂõûÊî∂ Â∑≤ÁªèÂà†Èô§ÁöÑÊï∞ÊçÆÂç†ÊúâÁöÑËµÑÊ∫êÔºåÂπ∂‰∏îÁ°Æ‰øù BigTable ËÉΩÂèäÊó∂Ê∏ÖÈô§Â∑≤ÁªèÂà†Èô§ÁöÑÊï∞ÊçÆ21ÔºåËøôÂØπÂ≠òÊîæÊïèÊÑüÊï∞ÊçÆÁöÑÊúçÂä°ÊòØ ÈùûÂ∏∏ÈáçË¶Å„ÄÇ‰ºòÂåñ‰∏ä‰∏ÄÁ´†Êàë‰ª¨ÊèèËø∞‰∫Ü Bigtable ÁöÑÂÆûÁé∞ÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÂæàÂ§ö‰ºòÂåñÂ∑•‰ΩúÊâçËÉΩ‰Ωø Bigtable Âà∞ËææÁî®Êà∑Ë¶ÅÊ±ÇÁöÑÈ´òÊÄßËÉΩ„ÄÅ È´òÂèØÁî®ÊÄßÂíåÈ´òÂèØÈù†ÊÄß„ÄÇÊú¨Á´†ÊèèËø∞‰∫Ü Bigtable ÂÆûÁé∞ÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜÔºå‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÂº∫Ë∞ÉËøô‰∫õ‰ºòÂåñÂ∑•‰ΩúÔºåÊàë‰ª¨Â∞ÜÊ∑±ÂÖ•ÁªÜ ËäÇ„ÄÇ Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÂÆ¢Êà∑Á®ãÂ∫èÂèØ‰ª•Â∞ÜÂ§ö‰∏™ÂàóÊóèÁªÑÂêàÊàê‰∏Ä‰∏™Â±ÄÈÉ®ÊÄßÁæ§Êóè„ÄÇÂØπ Tablet ‰∏≠ÁöÑÊØè‰∏™Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™ÂçïÁã¨ÁöÑSSTable„ÄÇÂ∞ÜÈÄöÂ∏∏‰∏ç‰ºö‰∏ÄËµ∑ËÆøÈóÆÁöÑÂàóÊóèÂàÜÂâ≤Êàê‰∏çÂêåÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑÂèØ‰ª•ÊèêÈ´òËØªÂèñÊìç‰ΩúÁöÑÊïàÁéá„ÄÇ‰æãÂ¶ÇÔºåÂú® WebtableË°®‰∏≠ÔºåÁΩëÈ°µÁöÑÂÖÉÊï∞ÊçÆ(ÊØîÂ¶ÇËØ≠Ë®ÄÂíå Checksum)ÂèØ‰ª•Âú®‰∏Ä‰∏™Â±ÄÈÉ®ÊÄßÁæ§ÁªÑ‰∏≠ÔºåÁΩëÈ°µÁöÑÂÜÖÂÆπÂèØ‰ª•Âú®Âè¶Â§ñ‰∏Ä‰∏™Áæ§ÁªÑ: ÂΩì‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èË¶ÅËØªÂèñÁΩëÈ°µÁöÑÂÖÉÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÂÆÉÊ≤°ÊúâÂøÖË¶ÅÂéªËØªÂèñÊâÄÊúâÁöÑÈ°µÈù¢ÂÜÖÂÆπ„ÄÇ Ê≠§Â§ñÔºåÂèØ‰ª•‰ª•Â±ÄÈÉ®ÊÄßÁæ§ÁªÑ‰∏∫Âçï‰ΩçËÆæÂÆö‰∏Ä‰∫õÊúâÁî®ÁöÑË∞ÉËØïÂèÇÊï∞„ÄÇÊØîÂ¶ÇÔºåÂèØ‰ª•Êää‰∏Ä‰∏™Â±ÄÈÉ®ÊÄßÁæ§ÁªÑËÆæÂÆö‰∏∫ÂÖ®ÈÉ®Â≠ò ÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠„ÄÇTablet ÊúçÂä°Âô®‰æùÁÖßÊÉ∞ÊÄßÂä†ËΩΩÁöÑÁ≠ñÁï•Â∞ÜËÆæÂÆö‰∏∫ÊîæÂÖ•ÂÜÖÂ≠òÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑ SSTable Ë£ÖËΩΩËøõÂÜÖÂ≠ò„ÄÇÂä†ËΩΩ ÂÆåÊàê‰πãÂêéÔºåËÆøÈóÆÂ±û‰∫éËØ•Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑÂàóÊóèÁöÑÊó∂ÂÄôÂ∞±‰∏çÂøÖËØªÂèñÁ°¨Áõò‰∫Ü„ÄÇËøô‰∏™ÁâπÊÄßÂØπ‰∫éÈúÄË¶ÅÈ¢ëÁπÅËÆøÈóÆÁöÑÂ∞èÂùóÊï∞ÊçÆ ÁâπÂà´ÊúâÁî®:Âú® Bigtable ÂÜÖÈÉ®ÔºåÊàë‰ª¨Âà©Áî®Ëøô‰∏™ÁâπÊÄßÊèêÈ´ò METADATA Ë°®‰∏≠ÂÖ∑Êúâ‰ΩçÁΩÆÁõ∏ÂÖ≥ÊÄßÁöÑÂàóÊóèÁöÑËÆøÈóÆÈÄüÂ∫¶„ÄÇ ÂéãÁº©ÂÆ¢Êà∑Á®ãÂ∫èÂèØ‰ª•ÊéßÂà∂‰∏Ä‰∏™Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑ SSTable ÊòØÂê¶ÈúÄË¶ÅÂéãÁº©;Â¶ÇÊûúÈúÄË¶ÅÂéãÁº©ÔºåÈÇ£‰πà‰ª•‰ªÄ‰πàÊ†ºÂºèÊù•ÂéãÁº©„ÄÇ ÊØè‰∏™ SSTable ÁöÑÂùó(ÂùóÁöÑÂ§ßÂ∞èÁî±Â±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑ‰ºòÂåñÂèÇÊï∞ÊåáÂÆö)ÈÉΩ‰ΩøÁî®Áî®Êà∑ÊåáÂÆöÁöÑÂéãÁº©Ê†ºÂºèÊù•ÂéãÁº©„ÄÇËôΩÁÑ∂ÂàÜÂùó ÂéãÁº©Êµ™Ë¥π‰∫ÜÂ∞ëÈáèÁ©∫Èó¥22Ôºå‰ΩÜÊòØÔºåÊàë‰ª¨Âú®Âè™ËØªÂèñ SSTable ÁöÑ‰∏ÄÂ∞èÈÉ®ÂàÜÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ∞±‰∏çÂøÖËß£ÂéãÊï¥‰∏™Êñá‰ª∂‰∫Ü„ÄÇÂæàÂ§öÂÆ¢ Êà∑Á®ãÂ∫è‰ΩøÁî®‰∫Ü‚Äú‰∏§ÈÅç‚ÄùÁöÑ„ÄÅÂèØÂÆöÂà∂ÁöÑÂéãÁº©ÊñπÂºè„ÄÇÁ¨¨‰∏ÄÈÅçÈááÁî® Bentley and McIlroy‚Äôs ÊñπÂºè[6]ÔºåËøôÁßçÊñπÂºèÂú®‰∏Ä‰∏™ ÂæàÂ§ßÁöÑÊâ´ÊèèÁ™óÂè£ÈáåÂØπÂ∏∏ËßÅÁöÑÈïøÂ≠óÁ¨¶‰∏≤ËøõË°åÂéãÁº©;Á¨¨‰∫åÈÅçÊòØÈááÁî®Âø´ÈÄüÂéãÁº©ÁÆóÊ≥ïÔºåÂç≥Âú®‰∏Ä‰∏™ 16KB ÁöÑÂ∞èÊâ´ÊèèÁ™óÂè£ ‰∏≠ÂØªÊâæÈáçÂ§çÊï∞ÊçÆ„ÄÇ‰∏§‰∏™ÂéãÁº©ÁöÑÁÆóÊ≥ïÈÉΩÂæàÂø´ÔºåÂú®Áé∞Âú®ÁöÑÊú∫Âô®‰∏äÔºåÂéãÁº©ÁöÑÈÄüÁéáËææÂà∞ 100-200MB/sÔºåËß£ÂéãÁöÑÈÄüÁéáËææ Âà∞ 400-1000MB/s„ÄÇ ËôΩÁÑ∂Êàë‰ª¨Âú®ÈÄâÊã©ÂéãÁº©ÁÆóÊ≥ïÁöÑÊó∂ÂÄôÈáçÁÇπËÄÉËôëÁöÑÊòØÈÄüÂ∫¶ËÄå‰∏çÊòØÂéãÁº©ÁöÑÁ©∫Èó¥Ôºå‰ΩÜÊòØËøôÁßç‰∏§ÈÅçÁöÑÂéãÁº©ÊñπÂºèÂú®Á©∫Èó¥ ÂéãÁº©Áéá‰∏äÁöÑË°®Áé∞‰πüÊòØ‰ª§‰∫∫ÊÉäÂèπ„ÄÇÊØîÂ¶ÇÔºåÂú® Webtable ÁöÑ‰æãÂ≠êÈáåÔºåÊàë‰ª¨‰ΩøÁî®ËøôÁßçÂéãÁº©ÊñπÂºèÊù•Â≠òÂÇ®ÁΩëÈ°µÂÜÖÂÆπ„ÄÇÂú®‰∏Ä Ê¨°ÊµãËØï‰∏≠ÔºåÊàë‰ª¨Âú®‰∏Ä‰∏™ÂéãÁº©ÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑ‰∏≠Â≠òÂÇ®‰∫ÜÂ§ßÈáèÁöÑÁΩëÈ°µ„ÄÇÈíàÂØπÂÆûÈ™åÁöÑÁõÆÁöÑÔºåÊàë‰ª¨Ê≤°ÊúâÂ≠òÂÇ®ÊØè‰∏™ÊñáÊ°£ÊâÄ ÊúâÁâàÊú¨ÁöÑÊï∞ÊçÆÔºåÊàë‰ª¨‰ªÖ‰ªÖÂ≠òÂÇ®‰∫Ü‰∏Ä‰∏™ÁâàÊú¨ÁöÑÊï∞ÊçÆ„ÄÇËØ•Ê®°ÂºèÁöÑÁ©∫Èó¥ÂéãÁº©ÊØîËææÂà∞‰∫Ü 10:1„ÄÇËøôÊØî‰º†ÁªüÁöÑ Gzip Âú®ÂéãÁº© HTML È°µÈù¢Êó∂ 3:1 ÊàñËÄÖ 4:1 ÁöÑÁ©∫Èó¥ÂéãÁº©ÊØîÂ•ΩÁöÑÂ§ö;‚Äú‰∏§ÈÅç‚ÄùÁöÑÂéãÁº©Ê®°ÂºèÂ¶ÇÊ≠§È´òÊïàÁöÑÂéüÂõ†ÊòØÁî±‰∫é Webtable ÁöÑË°åÁöÑ Â≠òÊîæÊñπÂºè:‰ªéÂêå‰∏Ä‰∏™‰∏ªÊú∫Ëé∑ÂèñÁöÑÈ°µÈù¢ÈÉΩÂ≠òÂú®‰∏¥ËøëÁöÑÂú∞Êñπ„ÄÇÂà©Áî®Ëøô‰∏™ÁâπÊÄßÔºåBentley-McIlroy ÁÆóÊ≥ïÂèØ‰ª•‰ªéÊù•Ëá™Âêå ‰∏Ä‰∏™‰∏ªÊú∫ÁöÑÈ°µÈù¢ÈáåÊâæÂà∞Â§ßÈáèÁöÑÈáçÂ§çÂÜÖÂÆπ„ÄÇ‰∏ç‰ªÖ‰ªÖÊòØ WebtableÔºåÂÖ∂ÂÆÉÁöÑÂæàÂ§öÂ∫îÁî®Á®ãÂ∫è‰πüÈÄöËøáÈÄâÊã©ÂêàÈÄÇÁöÑË°åÂêçÊù• Â∞ÜÁõ∏‰ººÁöÑÊï∞ÊçÆËÅöÁ∞áÂú®‰∏ÄËµ∑Ôºå‰ª•Ëé∑ÂèñËæÉÈ´òÁöÑÂéãÁº©Áéá„ÄÇÂΩìÊàë‰ª¨Âú® Bigtable ‰∏≠Â≠òÂÇ®Âêå‰∏Ä‰ªΩÊï∞ÊçÆÁöÑÂ§ö‰∏™ÁâàÊú¨ÁöÑÊó∂ÂÄôÔºå ÂéãÁº©ÊïàÁéá‰ºöÊõ¥È´ò„ÄÇ ÈÄöËøáÁºìÂ≠òÊèêÈ´òËØªÊìç‰ΩúÁöÑÊÄßËÉΩ‰∏∫‰∫ÜÊèêÈ´òËØªÊìç‰ΩúÁöÑÊÄßËÉΩÔºåTablet ÊúçÂä°Âô®‰ΩøÁî®‰∫åÁ∫ßÁºìÂ≠òÁöÑÁ≠ñÁï•„ÄÇÊâ´ÊèèÁºìÂ≠òÊòØÁ¨¨‰∏ÄÁ∫ßÁºìÂ≠òÔºå‰∏ªË¶ÅÁºìÂ≠ò TabletÊúçÂä°Âô®ÈÄöËøá SSTable Êé•Âè£Ëé∑ÂèñÁöÑ Key-Value ÂØπ;Block ÁºìÂ≠òÊòØ‰∫åÁ∫ßÁºìÂ≠òÔºåÁºìÂ≠òÁöÑÊòØ‰ªé GFS ËØªÂèñÁöÑ SSTable ÁöÑ Block„ÄÇÂØπ‰∫éÁªèÂ∏∏Ë¶ÅÈáçÂ§çËØªÂèñÁõ∏ÂêåÊï∞ÊçÆÁöÑÂ∫îÁî®Á®ãÂ∫èÊù•ËØ¥ÔºåÊâ´ÊèèÁºìÂ≠òÈùûÂ∏∏ÊúâÊïà;ÂØπ‰∫éÁªèÂ∏∏Ë¶ÅËØªÂèñÂàöÂàöËØªËøáÁöÑÊï∞ÊçÆ ÈôÑËøëÁöÑÊï∞ÊçÆÁöÑÂ∫îÁî®Á®ãÂ∫èÊù•ËØ¥ÔºåBlock ÁºìÂ≠òÊõ¥ÊúâÁî®(‰æãÂ¶ÇÔºåÈ°∫Â∫èËØªÔºåÊàñËÄÖÂú®‰∏Ä‰∏™ÁÉ≠ÁÇπÁöÑË°åÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑ‰∏≠ÈöèÊú∫ËØªÂèñ‰∏çÂêåÁöÑÂàó)„ÄÇ Bloom ËøáÊª§Âô®Â¶Ç 6.3 ËäÇÊâÄËø∞Ôºå‰∏Ä‰∏™ËØªÊìç‰ΩúÂøÖÈ°ªËØªÂèñÊûÑÊàê Tablet Áä∂ÊÄÅÁöÑÊâÄÊúâ SSTable ÁöÑÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúËøô‰∫õ SSTable ‰∏çÂú®ÂÜÖÂ≠ò ‰∏≠ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÂ§öÊ¨°ËÆøÈóÆÁ°¨Áõò„ÄÇÊàë‰ª¨ÈÄöËøáÂÖÅËÆ∏ÂÆ¢Êà∑Á®ãÂ∫èÂØπÁâπÂÆöÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑÁöÑ SSTable ÊåáÂÆö Bloom ËøáÊª§Âô®„Äê7„ÄëÔºå Êù•ÂáèÂ∞ëÁ°¨ÁõòËÆøÈóÆÁöÑÊ¨°Êï∞„ÄÇÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® Bloom ËøáÊª§Âô®Êü•ËØ¢‰∏Ä‰∏™ SSTable ÊòØÂê¶ÂåÖÂê´‰∫ÜÁâπÂÆöË°åÂíåÂàóÁöÑÊï∞ÊçÆ„ÄÇÂØπ‰∫é Êüê‰∫õÁâπÂÆöÂ∫îÁî®Á®ãÂ∫èÔºåÊàë‰ª¨Âè™‰ªòÂá∫‰∫ÜÂ∞ëÈáèÁöÑ„ÄÅÁî®‰∫éÂ≠òÂÇ® Bloom ËøáÊª§Âô®ÁöÑÂÜÖÂ≠òÁöÑ‰ª£‰ª∑ÔºåÂ∞±Êç¢Êù•‰∫ÜËØªÊìç‰ΩúÊòæËëóÂáèÂ∞ë ÁöÑÁ£ÅÁõòËÆøÈóÆÁöÑÊ¨°Êï∞„ÄÇ‰ΩøÁî® Bloom ËøáÊª§Âô®‰πüÈöêÂºèÁöÑËææÂà∞‰∫ÜÂΩìÂ∫îÁî®Á®ãÂ∫èËÆøÈóÆ‰∏çÂ≠òÂú®ÁöÑË°åÊàñÂàóÊó∂ÔºåÂ§ßÂ§öÊï∞Êó∂ÂÄôÊàë‰ª¨ ÈÉΩ‰∏çÈúÄË¶ÅËÆøÈóÆÁ°¨ÁõòÁöÑÁõÆÁöÑ„ÄÇ Commit Êó•ÂøóÁöÑÂÆûÁé∞Â¶ÇÊûúÊàë‰ª¨ÊääÂØπÊØè‰∏™ Tablet ÁöÑÊìç‰ΩúÁöÑ Commit Êó•ÂøóÈÉΩÂ≠òÂú®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂ÁöÑËØùÔºåÈÇ£‰πàÂ∞±‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑÊñá‰ª∂Ôºå Âπ∂‰∏îËøô‰∫õÊñá‰ª∂‰ºöÂπ∂Ë°åÁöÑÂÜôÂÖ• GFS„ÄÇÊ†πÊçÆ GFS ÊúçÂä°Âô®Â∫ïÂ±ÇÊñá‰ª∂Á≥ªÁªüÂÆûÁé∞ÁöÑÊñπÊ°àÔºåË¶ÅÊääËøô‰∫õÊñá‰ª∂ÂÜôÂÖ•‰∏çÂêåÁöÑÁ£ÅÁõò Êó•ÂøóÊñá‰ª∂Êó∂24Ôºå‰ºöÊúâÂ§ßÈáèÁöÑÁ£ÅÁõò Seek Êìç‰Ωú„ÄÇÂè¶Â§ñÔºåÁî±‰∫éÊâπÈáèÊèê‰∫§25‰∏≠Êìç‰ΩúÁöÑÊï∞ÁõÆ‰∏ÄËà¨ÊØîËæÉÂ∞ëÔºåÂõ†Ê≠§ÔºåÂØπÊØè‰∏™ Tablet ËÆæÁΩÆÂçïÁã¨ÁöÑÊó•ÂøóÊñá‰ª∂‰πü‰ºöÁªôÊâπÈáèÊèê‰∫§Êú¨Â∫îÂÖ∑ÊúâÁöÑ‰ºòÂåñÊïàÊûúÂ∏¶Êù•ÂæàÂ§ßÁöÑË¥üÈù¢ÂΩ±Âìç„ÄÇ‰∏∫‰∫ÜÈÅøÂÖçËøô‰∫õÈóÆÈ¢òÔºåÊàë ‰ª¨ËÆæÁΩÆÊØè‰∏™ Tablet ÊúçÂä°Âô®‰∏Ä‰∏™ Commit Êó•ÂøóÊñá‰ª∂ÔºåÊää‰øÆÊîπÊìç‰ΩúÁöÑÊó•Âøó‰ª•ËøΩÂä†ÊñπÂºèÂÜôÂÖ•Âêå‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂ÔºåÂõ†Ê≠§ ‰∏Ä‰∏™ÂÆûÈôÖÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠Ê∑∑Âêà‰∫ÜÂØπÂ§ö‰∏™ Tablet ‰øÆÊîπÁöÑÊó•ÂøóËÆ∞ÂΩï„ÄÇ ‰ΩøÁî®Âçï‰∏™Êó•ÂøóÊòæËëóÊèêÈ´ò‰∫ÜÊôÆÈÄöÊìç‰ΩúÁöÑÊÄßËÉΩÔºå‰ΩÜÊòØÂ∞ÜÊÅ¢Â§çÁöÑÂ∑•‰ΩúÂ§çÊùÇÂåñ‰∫Ü„ÄÇÂΩì‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÂÆïÊú∫Êó∂Ôºå ÂÆÉÂä†ËΩΩÁöÑ Tablet Â∞Ü‰ºöË¢´ÁßªÂà∞ÂæàÂ§öÂÖ∂ÂÆÉÁöÑ Tablet ÊúçÂä°Âô®‰∏ä:ÊØè‰∏™ Tablet ÊúçÂä°Âô®ÈÉΩË£ÖËΩΩÂæàÂ∞ëÁöÑÂá†‰∏™ÂéüÊù•ÁöÑÊúçÂä°Âô® ÁöÑ Tablet„ÄÇÂΩìÊÅ¢Â§ç‰∏Ä‰∏™ Tablet ÁöÑÁä∂ÊÄÅÁöÑÊó∂ÂÄôÔºåÊñ∞ÁöÑ Tablet ÊúçÂä°Âô®Ë¶Å‰ªéÂéüÊù•ÁöÑ Tablet ÊúçÂä°Âô®ÂÜôÁöÑÊó•Âøó‰∏≠ÊèêÂèñ‰øÆÊîπ Êìç‰ΩúÁöÑ‰ø°ÊÅØÔºåÂπ∂ÈáçÊñ∞ÊâßË°å„ÄÇÁÑ∂ËÄåÔºåËøô‰∫õ Tablet ‰øÆÊîπÊìç‰ΩúÁöÑÊó•ÂøóËÆ∞ÂΩïÈÉΩÊ∑∑ÂêàÂú®Âêå‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂‰∏≠ÁöÑ„ÄÇ‰∏ÄÁßçÊñπÊ≥ï Êñ∞ÁöÑ Tablet ÊúçÂä°Âô®ËØªÂèñÂÆåÊï¥ÁöÑ Commit Êó•ÂøóÊñá‰ª∂ÔºåÁÑ∂ÂêéÂè™ÈáçÂ§çÊâßË°åÂÆÉÈúÄË¶ÅÊÅ¢Â§çÁöÑ Tablet ÁöÑÁõ∏ÂÖ≥‰øÆÊîπÊìç‰Ωú„ÄÇ‰Ωø Áî®ËøôÁßçÊñπÊ≥ïÔºåÂÅáÂ¶ÇÊúâ 100 Âè∞ Tablet ÊúçÂä°Âô®ÔºåÊØèÂè∞ÈÉΩÂä†ËΩΩ‰∫ÜÂ§±ÊïàÁöÑ Tablet ÊúçÂä°Âô®‰∏äÁöÑ‰∏Ä‰∏™ TabletÔºåÈÇ£‰πàÔºåËøô‰∏™Êó• ÂøóÊñá‰ª∂Â∞±Ë¶ÅË¢´ËØªÂèñ 100 Ê¨°(ÊØè‰∏™ÊúçÂä°Âô®ËØªÂèñ‰∏ÄÊ¨°)„ÄÇ ‰∏∫‰∫ÜÈÅøÂÖçÂ§öÊ¨°ËØªÂèñÊó•ÂøóÊñá‰ª∂ÔºåÊàë‰ª¨È¶ñÂÖàÊääÊó•ÂøóÊåâÁÖßÂÖ≥ÈîÆÂ≠ó(tableÔºårow nameÔºålog sequence number)ÊéíÂ∫è„ÄÇ ÊéíÂ∫è‰πãÂêéÔºåÂØπÂêå‰∏Ä‰∏™ Tablet ÁöÑ‰øÆÊîπÊìç‰ΩúÁöÑÊó•ÂøóËÆ∞ÂΩïÂ∞±ËøûÁª≠Â≠òÊîæÂú®‰∫Ü‰∏ÄËµ∑ÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨Âè™Ë¶Å‰∏ÄÊ¨°Á£ÅÁõò Seek Êìç‰Ωú„ÄÅ‰πãÂêéÈ°∫Â∫èËØªÂèñÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ‰∏∫‰∫ÜÂπ∂Ë°åÊéíÂ∫èÔºåÊàë‰ª¨ÂÖàÂ∞ÜÊó•ÂøóÂàÜÂâ≤Êàê 64MB ÁöÑÊÆµÔºå‰πãÂêéÂú®‰∏çÂêåÁöÑ Tablet ÊúçÂä°Âô®ÂØπÊÆµ ËøõË°åÂπ∂Ë°åÊéíÂ∫è„ÄÇËøô‰∏™ÊéíÂ∫èÂ∑•‰ΩúÁî± Master ÊúçÂä°Âô®Êù•ÂçèÂêåÂ§ÑÁêÜÔºåÂπ∂‰∏îÂú®‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®Ë°®ÊòéËá™Â∑±ÈúÄË¶Å‰ªé Commit Êó•ÂøóÊñá‰ª∂ÊÅ¢Â§ç Tablet Êó∂ÂºÄÂßãÊâßË°å„ÄÇ Âú®Âêë GFS ‰∏≠ÂÜô Commit Êó•ÂøóÁöÑÊó∂ÂÄôÂèØËÉΩ‰ºöÂºïËµ∑Á≥ªÁªüÈ¢†Á∞∏ÔºåÂéüÂõ†ÊòØÂ§öÁßçÂ§öÊ†∑ÁöÑ(ÊØîÂ¶ÇÔºåÂÜôÊìç‰ΩúÊ≠£Âú®ËøõË°åÁöÑÊó∂ÂÄôÔºå‰∏Ä‰∏™ GFS ÊúçÂä°Âô®ÂÆïÊú∫‰∫Ü;ÊàñËÄÖËøûÊé•‰∏â‰∏™ GFS ÂâØÊú¨ÊâÄÂú®ÁöÑÊúçÂä°Âô®ÁöÑÁΩëÁªúÊã•Â°ûÊàñËÄÖËøáËΩΩ‰∫Ü)„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øùÂú® GFS Ë¥üËΩΩÈ´òÂ≥∞Êó∂‰øÆÊîπÊìç‰ΩúËøòËÉΩÈ°∫Âà©ËøõË°åÔºåÊØè‰∏™ Tablet ÊúçÂä°Âô®ÂÆûÈôÖ‰∏äÊúâ‰∏§‰∏™Êó•ÂøóÂÜôÂÖ•Á∫øÁ®ãÔºåÊØè‰∏™Á∫øÁ®ãÈÉΩÂÜôËá™Â∑± ÁöÑÊó•ÂøóÊñá‰ª∂ÔºåÂπ∂‰∏îÂú®‰ªª‰ΩïÊó∂ÂàªÔºåÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÊòØÂ∑•‰ΩúÁöÑ„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Á∫øÁ®ãÁöÑÂú®ÂÜôÂÖ•ÁöÑÊó∂ÂÄôÊïàÁéáÂæà‰ΩéÔºåTablet ÊúçÂä° Âô®Â∞±ÂàáÊç¢Âà∞Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÔºå‰øÆÊîπÊìç‰ΩúÁöÑÊó•ÂøóËÆ∞ÂΩïÂ∞±ÂÜôÂÖ•Âà∞Ëøô‰∏™Á∫øÁ®ãÂØπÂ∫îÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠„ÄÇÊØè‰∏™Êó•ÂøóËÆ∞ÂΩïÈÉΩÊúâ‰∏Ä ‰∏™Â∫èÂàóÂè∑ÔºåÂõ†Ê≠§ÔºåÂú®ÊÅ¢Â§çÁöÑÊó∂ÂÄôÔºåTablet ÊúçÂä°Âô®ËÉΩÂ§üÊ£ÄÊµãÂá∫Âπ∂ÂøΩÁï•ÊéâÈÇ£‰∫õÁî±‰∫éÁ∫øÁ®ãÂàáÊç¢ËÄåÂØºËá¥ÁöÑÈáçÂ§çÁöÑËÆ∞ÂΩï„ÄÇ Tablet ÊÅ¢Â§çÊèêÈÄüÂΩì Master ÊúçÂä°Âô®Â∞Ü‰∏Ä‰∏™ Tablet ‰ªé‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÁßªÂà∞Âè¶Â§ñ‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®Êó∂ÔºåÊ∫ê Tablet ÊúçÂä°Âô®‰ºöÂØπ Ëøô‰∏™ Tablet ÂÅö‰∏ÄÊ¨° Minor Compaction„ÄÇËøô‰∏™ Compaction Êìç‰ΩúÂáèÂ∞ë‰∫Ü Tablet ÊúçÂä°Âô®ÁöÑÊó•ÂøóÊñá‰ª∂‰∏≠Ê≤°ÊúâÂΩíÂπ∂ÁöÑËÆ∞ ÂΩïÔºå‰ªéËÄåÂáèÂ∞ë‰∫ÜÊÅ¢Â§çÁöÑÊó∂Èó¥„ÄÇCompaction ÂÆåÊàê‰πãÂêéÔºåËØ•ÊúçÂä°Âô®Â∞±ÂÅúÊ≠¢‰∏∫ËØ• Tablet Êèê‰æõÊúçÂä°„ÄÇÂú®Âç∏ËΩΩ Tablet ‰πã ÂâçÔºåÊ∫ê Tablet ÊúçÂä°Âô®Ëøò‰ºöÂÜçÂÅö‰∏ÄÊ¨°(ÈÄöÂ∏∏‰ºöÂæàÂø´)Minor CompactionÔºå‰ª•Ê∂àÈô§ÂâçÈù¢Âú®‰∏ÄÊ¨°ÂéãÁº©ËøáÁ®ã‰∏≠Âèà‰∫ßÁîüÁöÑ Êú™ÂΩíÂπ∂ÁöÑËÆ∞ÂΩï„ÄÇÁ¨¨‰∫åÊ¨° Minor Compaction ÂÆåÊàê‰ª•ÂêéÔºåTablet Â∞±ÂèØ‰ª•Ë¢´Ë£ÖËΩΩÂà∞Êñ∞ÁöÑ Tablet ÊúçÂä°Âô®‰∏ä‰∫ÜÔºåÂπ∂‰∏î‰∏ç ÈúÄË¶Å‰ªéÊó•Âøó‰∏≠ËøõË°åÊÅ¢Â§ç„ÄÇ Âà©Áî®‰∏çÂèòÊÄßÊàë‰ª¨Âú®‰ΩøÁî® Bigtable Êó∂ÔºåÈô§‰∫Ü SSTable ÁºìÂ≠ò‰πãÂ§ñÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜ‰∫ßÁîüÁöÑ SSTable ÈÉΩÊòØ‰∏çÂèòÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•Âà©Áî®Ëøô ‰∏ÄÁÇπÂØπÁ≥ªÁªüËøõË°åÁÆÄÂåñ„ÄÇ‰æãÂ¶ÇÔºåÂΩì‰ªé SSTable ËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨‰∏çÂøÖÂØπÊñá‰ª∂Á≥ªÁªüËÆøÈóÆÊìç‰ΩúËøõË°åÂêåÊ≠•„ÄÇËøôÊ†∑ ‰∏ÄÊù•ÔºåÂ∞±ÂèØ‰ª•ÈùûÂ∏∏È´òÊïàÁöÑÂÆûÁé∞ÂØπË°åÁöÑÂπ∂Ë°åÊìç‰Ωú„ÄÇmemtable ÊòØÂîØ‰∏Ä‰∏Ä‰∏™ËÉΩË¢´ËØªÂíåÂÜôÊìç‰ΩúÂêåÊó∂ËÆøÈóÆÁöÑÂèØÂèòÊï∞ÊçÆÁªì ÊûÑ„ÄÇ‰∏∫‰∫ÜÂáèÂ∞ëÂú®ËØªÊìç‰ΩúÊó∂ÁöÑÁ´û‰∫âÔºåÊàë‰ª¨ÂØπÂÜÖÂ≠òË°®ÈááÁî® COW(Copy-on-write)Êú∫Âà∂ÔºåËøôÊ†∑Â∞±ÂÖÅËÆ∏ËØªÂÜôÊìç‰ΩúÂπ∂Ë°åÊâß Ë°å„ÄÇ Âõ†‰∏∫ SSTable ÊòØ‰∏çÂèòÁöÑÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÊ∞∏‰πÖÂà†Èô§Ë¢´Ê†áËÆ∞‰∏∫‚ÄúÂà†Èô§‚ÄùÁöÑÊï∞ÊçÆÁöÑÈóÆÈ¢òÔºåËΩ¨Êç¢ÊàêÂØπÂ∫üÂºÉÁöÑ SSTable ËøõË°åÂûÉÂúæÊî∂ÈõÜÁöÑÈóÆÈ¢ò‰∫Ü„ÄÇÊØè‰∏™ Tablet ÁöÑ SSTable ÈÉΩÂú® METADATA Ë°®‰∏≠Ê≥®ÂÜå‰∫Ü„ÄÇMaster ÊúçÂä°Âô®ÈááÁî®‚ÄúÊ†á ËÆ∞-Âà†Èô§‚ÄùÁöÑÂûÉÂúæÂõûÊî∂ÊñπÂºèÂà†Èô§ SSTable ÈõÜÂêà‰∏≠Â∫üÂºÉÁöÑ SSTable„Äê25„ÄëÔºåMETADATA Ë°®Âàô‰øùÂ≠ò‰∫Ü Root SSTable ÁöÑÈõÜÂêà„ÄÇ ÊúÄÂêéÔºåSSTable ÁöÑ‰∏çÂèòÊÄß‰ΩøÂæóÂàÜÂâ≤ Tablet ÁöÑÊìç‰ΩúÈùûÂ∏∏Âø´Êç∑„ÄÇÊàë‰ª¨‰∏çÂøÖ‰∏∫ÊØè‰∏™ÂàÜÂâ≤Âá∫Êù•ÁöÑ Tablet Âª∫Á´ãÊñ∞ÁöÑ SSTable ÈõÜÂêàÔºåËÄåÊòØÂÖ±‰∫´ÂéüÊù•ÁöÑ Tablet ÁöÑ SSTable ÈõÜÂêà„ÄÇÊÄßËÉΩËØÑ‰º∞‰∏∫‰∫ÜÊµãËØï Bigtable ÁöÑÊÄßËÉΩÂíåÂèØÊâ©Â±ïÊÄßÔºåÊàë‰ª¨Âª∫Á´ã‰∫Ü‰∏Ä‰∏™ÂåÖÊã¨ N Âè∞ Tablet ÊúçÂä°Âô®ÁöÑ Bigtable ÈõÜÁæ§ÔºåËøôÈáå N ÊòØÂèØÂèòÁöÑ„ÄÇÊØèÂè∞ Tablet ÊúçÂä°Âô®ÈÖçÁΩÆ‰∫Ü 1GB ÁöÑÂÜÖÂ≠òÔºåÊï∞ÊçÆÂÜôÂÖ•Âà∞‰∏Ä‰∏™ÂåÖÊã¨ 1786 Âè∞Êú∫Âô®„ÄÅÊØèÂè∞Êú∫Âô®Êúâ 2 ‰∏™ IDE Á°¨ÁõòÁöÑ GFS ÈõÜÁæ§‰∏ä„ÄÇÊàë‰ª¨‰ΩøÁî® N Âè∞ÂÆ¢Êà∑Êú∫ÁîüÊàêÂ∑•‰ΩúË¥üËΩΩÊµãËØï Bigtable„ÄÇ(Êàë‰ª¨‰ΩøÁî®Âíå Tablet ÊúçÂä°Âô®Áõ∏ÂêåÊï∞ÁõÆÁöÑ ÂÆ¢Êà∑Êú∫‰ª•Á°Æ‰øùÂÆ¢Êà∑Êú∫‰∏ç‰ºöÊàê‰∏∫Áì∂È¢à„ÄÇ) ÊØèÂè∞ÂÆ¢Êà∑Êú∫ÈÖçÁΩÆ 2GZ ÂèåÊ†∏ Opteron Â§ÑÁêÜÂô®ÔºåÈÖçÁΩÆ‰∫ÜË∂≥‰ª•ÂÆπÁ∫≥ÊâÄÊúâËøõÁ®ã Â∑•‰ΩúÊï∞ÊçÆÈõÜÁöÑÁâ©ÁêÜÂÜÖÂ≠òÔºå‰ª•Âèä‰∏ÄÂº† Gigabit ÁöÑ‰ª•Â§™ÁΩëÂç°„ÄÇËøô‰∫õÊú∫Âô®ÈÉΩËøûÂÖ•‰∏Ä‰∏™‰∏§Â±ÇÁöÑ„ÄÅÊ†ëÁä∂ÁöÑ‰∫§Êç¢ÁΩëÁªúÈáåÔºåÂú® Ê†πËäÇÁÇπ‰∏äÁöÑÂ∏¶ÂÆΩÂä†Ëµ∑Êù•ÊúâÂ§ßÁ∫¶ 100-200Gbps„ÄÇÊâÄÊúâÁöÑÊú∫Âô®ÈááÁî®Áõ∏ÂêåÁöÑËÆæÂ§áÔºåÂõ†Ê≠§Ôºå‰ªª‰Ωï‰∏§Âè∞Êú∫Âô®Èó¥ÁΩëÁªúÊù•Âõû‰∏Ä Ê¨°ÁöÑÊó∂Èó¥ÈÉΩÂ∞è‰∫é 1ms„ÄÇ Tablet ÊúçÂä°Âô®„ÄÅMaster ÊúçÂä°Âô®„ÄÅÊµãËØïÊú∫„ÄÅ‰ª•Âèä GFS ÊúçÂä°Âô®ÈÉΩËøêË°åÂú®Âêå‰∏ÄÁªÑÊú∫Âô®‰∏ä„ÄÇÊØèÂè∞Êú∫Âô®ÈÉΩËøêË°å‰∏Ä‰∏™ GFS ÁöÑÊúçÂä°Âô®„ÄÇÂÖ∂ÂÆÉÁöÑÊú∫Âô®Ë¶Å‰πàËøêË°å Tablet ÊúçÂä°Âô®„ÄÅË¶Å‰πàËøêË°åÂÆ¢Êà∑Á®ãÂ∫è„ÄÅË¶Å‰πàËøêË°åÂú®ÊµãËØïËøáÁ®ã‰∏≠Ôºå‰ΩøÁî®ËøôÁªÑ Êú∫Âô®ÁöÑÂÖ∂ÂÆÉÁöÑ‰ªªÂä°ÂêØÂä®ÁöÑËøõÁ®ã„ÄÇ R ÊòØÊµãËØïËøáÁ®ã‰∏≠ÔºåBigtable ÂåÖÂê´ÁöÑ‰∏çÂêåÁöÑÂàóÂÖ≥ÈîÆÂ≠óÁöÑÊï∞Èáè„ÄÇÊàë‰ª¨Á≤æÂøÉÈÄâÊã© R ÁöÑÂÄºÔºå‰øùËØÅÊØèÊ¨°Âü∫ÂáÜÊµãËØïÂØπÊØè Âè∞ Tablet ÊúçÂä°Âô®ËØª/ÂÜôÁöÑÊï∞ÊçÆÈáèÈÉΩÂú® 1GB Â∑¶Âè≥„ÄÇ Âú®Â∫èÂàóÂÜôÁöÑÂü∫ÂáÜÊµãËØï‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑÂàóÂÖ≥ÈîÆÂ≠óÁöÑËåÉÂõ¥ÊòØ 0 Âà∞ R-1„ÄÇËøô‰∏™ËåÉÂõ¥ÂèàË¢´ÂàíÂàÜ‰∏∫ 10N ‰∏™Â§ßÂ∞èÁõ∏Âêå ÁöÑÂå∫Èó¥„ÄÇÊ†∏ÂøÉË∞ÉÂ∫¶Á®ãÂ∫èÊääËøô‰∫õÂå∫Èó¥ÂàÜÈÖçÁªô N ‰∏™ÂÆ¢Êà∑Á´ØÔºåÂàÜÈÖçÊñπÂºèÊòØ:Âè™Ë¶ÅÂÆ¢Êà∑Á®ãÂ∫èÂ§ÑÁêÜÂÆå‰∏ä‰∏Ä‰∏™Âå∫Èó¥ÁöÑÊï∞ÊçÆÔºå Ë∞ÉÂ∫¶Á®ãÂ∫èÂ∞±ÊääÂêéÁª≠ÁöÑ„ÄÅÂ∞öÊú™Â§ÑÁêÜÁöÑÂå∫Èó¥ÂàÜÈÖçÁªôÂÆÉ„ÄÇËøôÁßçÂä®ÊÄÅÂàÜÈÖçÁöÑÊñπÂºèÊúâÂä©‰∫éÂáèÂ∞ëÂÆ¢Êà∑Êú∫‰∏äÂêåÊó∂ËøêË°åÁöÑÂÖ∂ÂÆÉ ËøõÁ®ãÂØπÊÄßËÉΩÁöÑÂΩ±Âìç„ÄÇÊàë‰ª¨Âú®ÊØè‰∏™ÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÂÜôÂÖ•‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÊØè‰∏™Â≠óÁ¨¶‰∏≤ÈÉΩÊòØÈöèÊú∫ÁîüÊàêÁöÑ„ÄÅÂõ†Ê≠§‰πüÊ≤° ÊúâË¢´ÂéãÁº©26„ÄÇÂè¶Â§ñÔºå‰∏çÂêåÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÁöÑÂ≠óÁ¨¶‰∏≤‰πüÊòØ‰∏çÂêåÁöÑÔºåÂõ†Ê≠§‰πüÂ∞±‰∏çÂ≠òÂú®Ë∑®Ë°åÁöÑÂéãÁº©„ÄÇÈöèÊú∫ÂÜôÂÖ•Âü∫ÂáÜÊµãËØïÈáá Áî®Á±ª‰ººÁöÑÊñπÊ≥ïÔºåÈô§‰∫ÜË°åÂÖ≥ÈîÆÂ≠óÂú®ÂÜôÂÖ•ÂâçÂÖàÂÅö HashÔºåHash ÈááÁî®Êåâ R ÂèñÊ®°ÁöÑÊñπÂºèÔºåËøôÊ†∑Â∞±‰øùËØÅ‰∫ÜÂú®Êï¥‰∏™Âü∫ÂáÜÊµã ËØïÊåÅÁª≠ÁöÑÊó∂Èó¥ÂÜÖÔºåÂÜôÂÖ•ÁöÑÂ∑•‰ΩúË¥üËΩΩÂùáÂåÄÁöÑÂàÜÂ∏ÉÂú®ÂàóÂ≠òÂÇ®Á©∫Èó¥ÂÜÖ„ÄÇ Â∫èÂàóËØªÁöÑÂü∫ÂáÜÊµãËØïÁîüÊàêÂàóÂÖ≥ÈîÆÂ≠óÁöÑÊñπÂºè‰∏éÂ∫èÂàóÂÜôÁõ∏ÂêåÔºå‰∏çÂêå‰∫éÂ∫èÂàóÂÜôÂú®ÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÂÜôÂÖ•Â≠óÁ¨¶‰∏≤ÁöÑÊòØÔºåÂ∫è ÂàóËØªÊòØËØªÂèñÂàóÂÖ≥ÈîÆÂ≠ó‰∏ãÁöÑÂ≠óÁ¨¶‰∏≤(Ëøô‰∫õÂ≠óÁ¨¶‰∏≤Áî±‰πãÂâçÂ∫èÂàóÂÜôÂü∫ÂáÜÊµãËØïÁ®ãÂ∫èÂÜôÂÖ•)„ÄÇÂêåÊ†∑ÁöÑÔºåÈöèÊú∫ËØªÁöÑÂü∫ÂáÜÊµãËØï ÂíåÈöèÊú∫ÂÜôÊòØÁ±ª‰ººÁöÑ„ÄÇ Êâ´ÊèèÂü∫ÂáÜÊµãËØïÂíåÂ∫èÂàóËØªÁ±ª‰ººÔºå‰ΩÜÊòØ‰ΩøÁî®ÁöÑÊòØ BigTable Êèê‰æõÁöÑ„ÄÅ‰ªé‰∏Ä‰∏™ÂàóËåÉÂõ¥ÂÜÖÊâ´ÊèèÊâÄÊúâÁöÑ value ÂÄºÁöÑ API„ÄÇ Áî±‰∫é‰∏ÄÊ¨° RPC Ë∞ÉÁî®Â∞±‰ªé‰∏Ä‰∏™ Tablet ÊúçÂä°Âô®ÂèñÂõû‰∫ÜÂ§ßÈáèÁöÑ Value ÂÄºÔºåÂõ†Ê≠§Ôºå‰ΩøÁî®Êâ´ÊèèÊñπÂºèÁöÑÂü∫ÂáÜÊµãËØïÁ®ãÂ∫èÂèØ‰ª• ÂáèÂ∞ë RPC Ë∞ÉÁî®ÁöÑÊ¨°Êï∞„ÄÇ ÈöèÊú∫ËØª(ÂÜÖÂ≠ò)Âü∫ÂáÜÊµãËØïÂíåÈöèÊú∫ËØªÁ±ª‰ººÔºåÈô§‰∫ÜÂåÖÂê´Âü∫ÂáÜÊµãËØïÊï∞ÊçÆÁöÑÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑË¢´ËÆæÁΩÆ‰∏∫‚Äúin-memory‚ÄùÔºå Âõ†Ê≠§ÔºåËØªÊìç‰ΩúÁõ¥Êé•‰ªé Tablet ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠ò‰∏≠ËØªÂèñÊï∞ÊçÆÔºå‰∏çÈúÄË¶Å‰ªé GFS ËØªÂèñÊï∞ÊçÆ„ÄÇÈíàÂØπËøô‰∏™ÊµãËØïÔºåÊàë‰ª¨ÊääÊØèÂè∞Tablet ÊúçÂä°Âô®Â≠òÂÇ®ÁöÑÊï∞ÊçÆ‰ªé 1GB ÂáèÂ∞ëÂà∞ 100MBÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÊääÊï∞ÊçÆÂÖ®ÈÉ®Âä†ËΩΩÂà∞ Tablet ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠ò‰∏≠‰∫Ü„ÄÇÂõæ 6 ‰∏≠Êúâ‰∏§‰∏™ËßÜÂõæÔºåÊòæÁ§∫‰∫ÜÊàë‰ª¨ÁöÑÂü∫ÂáÜÊµãËØïÁöÑÊÄßËÉΩ;Âõæ‰∏≠ÁöÑÊï∞ÊçÆÂíåÊõ≤Á∫øÊòØËØª/ÂÜô 1000-byte value ÂÄºÊó∂ÂèñÂæó ÁöÑ„ÄÇÂõæ‰∏≠ÁöÑË°®Ê†ºÊòæÁ§∫‰∫ÜÊØè‰∏™ Tablet ÊúçÂä°Âô®ÊØèÁßíÈíüËøõË°åÁöÑÊìç‰ΩúÁöÑÊ¨°Êï∞;Âõæ‰∏≠ÁöÑÊõ≤Á∫øÊòæÁ§∫‰∫ÜÊØèÁßíÁßçÊâÄÊúâÁöÑ Tablet ÊúçÂä°Âô®‰∏äÊìç‰ΩúÊ¨°Êï∞ÁöÑÊÄªÂíå„ÄÇ Âçï‰∏™ Tablet ÊúçÂä°Âô®ÁöÑÊÄßËÉΩÊàë‰ª¨È¶ñÂÖàÂàÜÊûê‰∏ãÂçï‰∏™ Tablet ÊúçÂä°Âô®ÁöÑÊÄßËÉΩ„ÄÇÈöèÊú∫ËØªÁöÑÊÄßËÉΩÊØîÂÖ∂ÂÆÉÊìç‰ΩúÊÖ¢‰∏Ä‰∏™Êï∞ÈáèÁ∫ßÊàñ‰ª•‰∏ä27„ÄÇ ÊØè‰∏™ÈöèÊú∫ ËØªÊìç‰ΩúÈÉΩË¶ÅÈÄöËøáÁΩëÁªú‰ªé GFS ‰º†Ëæì 64KB ÁöÑ SSTable Âà∞ Tablet ÊúçÂä°Âô®ÔºåËÄåÊàë‰ª¨Âè™‰ΩøÁî®ÂÖ∂‰∏≠Â§ßÂ∞èÊòØ 1000 byte ÁöÑ‰∏Ä ‰∏™ value ÂÄº„ÄÇTablet ÊúçÂä°Âô®ÊØèÁßíÂ§ßÁ∫¶ÊâßË°å 1200 Ê¨°ËØªÊìç‰ΩúÔºå‰πüÂ∞±ÊòØÊØèÁßíÂ§ßÁ∫¶‰ªé GFS ËØªÂèñ 75MB ÁöÑÊï∞ÊçÆ„ÄÇËøô‰∏™‰º† ËæìÂ∏¶ÂÆΩË∂≥‰ª•Âç†Êª° Tablet ÊúçÂä°Âô®ÁöÑ CPU Êó∂Èó¥ÔºåÂõ†‰∏∫ÂÖ∂‰∏≠ÂåÖÊã¨‰∫ÜÁΩëÁªúÂçèËÆÆÊ†àÁöÑÊ∂àËÄó„ÄÅSSTable Ëß£Êûê„ÄÅ‰ª•Âèä BigTable ‰ª£Á†ÅÊâßË°å;Ëøô‰∏™Â∏¶ÂÆΩ‰πüË∂≥‰ª•Âç†Êª°Êàë‰ª¨Á≥ªÁªü‰∏≠ÁΩëÁªúÁöÑÈìæÊé•Â∏¶ÂÆΩ„ÄÇÂ§ßÂ§öÊï∞ÈááÁî®ËøôÁßçËÆøÈóÆÊ®°Âºè BigTable Â∫îÁî®Á®ãÂ∫è‰ºö ÂáèÂ∞è Block ÁöÑÂ§ßÂ∞èÔºåÈÄöÂ∏∏‰ºöÂáèÂà∞ 8KB„ÄÇ ÂÜÖÂ≠ò‰∏≠ÁöÑÈöèÊú∫ËØªÊìç‰ΩúÈÄüÂ∫¶Âø´ÂæàÂ§öÔºåÂéüÂõ†ÊòØÔºåÊâÄÊúâ 1000-byte ÁöÑËØªÊìç‰ΩúÈÉΩÊòØ‰ªé Tablet ÊúçÂä°Âô®ÁöÑÊú¨Âú∞ÂÜÖÂ≠ò‰∏≠ËØª ÂèñÊï∞ÊçÆÔºå‰∏çÈúÄË¶Å‰ªé GFS ËØªÂèñ 64KB ÁöÑ Block„ÄÇ ÈöèÊú∫ÂíåÂ∫èÂàóÂÜôÊìç‰ΩúÁöÑÊÄßËÉΩÊØîÈöèÊú∫ËØªË¶ÅÂ•Ω‰∫õÔºåÂéüÂõ†ÊòØÊØè‰∏™ Tablet ÊúçÂä°Âô®Áõ¥Êé•ÊääÂÜôÂÖ•Êìç‰ΩúÁöÑÂÜÖÂÆπËøΩÂä†Âà∞‰∏Ä‰∏™ Commit Êó•ÂøóÊñá‰ª∂ÁöÑÂ∞æÈÉ®ÔºåÂπ∂‰∏îÈááÁî®ÊâπÈáèÊèê‰∫§ÁöÑÊñπÂºèÔºåÈÄöËøáÊääÊï∞ÊçÆ‰ª•ÊµÅÁöÑÊñπÂºèÂÜôÂÖ•Âà∞ GFS Êù•ÊèêÈ´òÊÄßËÉΩ„ÄÇÈöèÊú∫ ÂÜôÂíåÂ∫èÂàóÂÜôÂú®ÊÄßËÉΩ‰∏äÊ≤°ÊúâÂ§™Â§ßÁöÑÂ∑ÆÂºÇÔºåËøô‰∏§ÁßçÊñπÂºèÁöÑÂÜôÊìç‰ΩúÂÆûÈôÖ‰∏äÈÉΩÊòØÊääÊìç‰ΩúÂÜÖÂÆπËÆ∞ÂΩïÂà∞Âêå‰∏Ä‰∏™ Tablet ÊúçÂä° Âô®ÁöÑ Commit Êó•ÂøóÊñá‰ª∂‰∏≠„ÄÇ Â∫èÂàóËØªÁöÑÊÄßËÉΩÂ•Ω‰∫éÈöèÊú∫ËØªÔºåÂõ†‰∏∫ÊØèÂèñÂá∫ 64KB ÁöÑ SSTable ÁöÑ Block ÂêéÔºåËøô‰∫õÊï∞ÊçÆ‰ºöÁºìÂ≠òÂà∞ Block ÁºìÂ≠ò‰∏≠Ôºå ÂêéÁª≠ÁöÑ 64 Ê¨°ËØªÊìç‰ΩúÁõ¥Êé•‰ªéÁºìÂ≠òËØªÂèñÊï∞ÊçÆ„ÄÇ Êâ´ÊèèÁöÑÊÄßËÉΩÊõ¥È´òÔºåËøôÊòØÁî±‰∫éÂÆ¢Êà∑Á®ãÂ∫èÊØè‰∏ÄÊ¨° RPC Ë∞ÉÁî®ÈÉΩ‰ºöËøîÂõûÂ§ßÈáèÁöÑ value ÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•ÔºåRPC Ë∞ÉÁî®ÁöÑ Ê∂àËÄóÂü∫Êú¨ÊäµÊ∂à‰∫Ü„ÄÇ ÊÄßËÉΩÊèêÂçáÈöèÁùÄÊàë‰ª¨Â∞ÜÁ≥ªÁªü‰∏≠ÁöÑ Tablet ÊúçÂä°Âô®‰ªé 1 Âè∞Â¢ûÂä†Âà∞ 500 Âè∞ÔºåÁ≥ªÁªüÁöÑÊï¥‰ΩìÂêûÂêêÈáèÊúâ‰∫ÜÊ¢¶ÂπªËà¨ÁöÑÂ¢ûÈïøÔºåÂ¢ûÈïøÁöÑ ÂÄçÁéáË∂ÖËøá‰∫Ü 100„ÄÇÊØîÂ¶ÇÔºåÈöèÁùÄ Tablet ÊúçÂä°Âô®ÁöÑÊï∞ÈáèÂ¢ûÂä†‰∫Ü 500 ÂÄçÔºåÂÜÖÂ≠ò‰∏≠ÁöÑÈöèÊú∫ËØªÊìç‰ΩúÁöÑÊÄßËÉΩÂ¢ûÂä†‰∫Ü 300 ÂÄç„ÄÇ ‰πãÊâÄ‰ª•‰ºöÊúâËøôÊ†∑ÁöÑÊÄßËÉΩÊèêÂçáÔºå‰∏ªË¶ÅÊòØÂõ†‰∏∫Ëøô‰∏™Âü∫ÂáÜÊµãËØïÁöÑÁì∂È¢àÊòØÂçïÂè∞ Tablet ÊúçÂä°Âô®ÁöÑ CPU„ÄÇ Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÊÄßËÉΩÁöÑÊèêÂçáËøò‰∏çÊòØÁ∫øÊÄßÁöÑ„ÄÇÂú®Â§ßÂ§öÊï∞ÁöÑÂü∫ÂáÜÊµãËØï‰∏≠Êàë‰ª¨ÁúãÂà∞ÔºåÂΩì Tablet ÊúçÂä°Âô®ÁöÑÊï∞Èáè‰ªé 1 Âè∞ Â¢ûÂä†Âà∞ 50 Âè∞Êó∂ÔºåÊØèÂè∞ÊúçÂä°Âô®ÁöÑÂêûÂêêÈáè‰ºöÊúâ‰∏Ä‰∏™ÊòéÊòæÁöÑ‰∏ãÈôç„ÄÇËøôÊòØÁî±‰∫éÂ§öÂè∞ÊúçÂä°Âô®Èó¥ÁöÑË¥üËΩΩ‰∏çÂùáË°°ÈÄ†ÊàêÁöÑÔºåÂ§ß Â§öÊï∞ÊÉÖÂÜµ‰∏ãÊòØÁî±‰∫éÂÖ∂ÂÆÉÁöÑÁ®ãÂ∫èÊä¢Âç†‰∫Ü CPU„ÄÇ Êàë‰ª¨Ë¥üËΩΩÂùáË°°ÁöÑÁÆóÊ≥ï‰ºöÂ∞ΩÈáèÈÅøÂÖçËøôÁßç‰∏çÂùáË°°Ôºå‰ΩÜÊòØÂü∫‰∫é‰∏§‰∏™‰∏ªË¶Å ÂéüÂõ†ÔºåËøô‰∏™ÁÆóÊ≥ïÂπ∂‰∏çËÉΩÂÆåÁæéÁöÑÂ∑•‰Ωú:‰∏Ä‰∏™ÊòØÂ∞ΩÈáèÂáèÂ∞ë Tablet ÁöÑÁßªÂä®ÂØºËá¥ÈáçÊñ∞Ë¥üËΩΩÂùáË°°ËÉΩÂäõÂèóÈôê(Â¶ÇÊûú Tablet Ë¢´ÁßªÂä®‰∫ÜÔºåÈÇ£‰πàÂú®Áü≠Êó∂Èó¥ÂÜÖ ‚Äî ‰∏ÄËà¨ÊòØ 1 ÁßíÂÜÖ ‚Äî Ëøô‰∏™ Tablet ÊòØ‰∏çÂèØÁî®ÁöÑ)ÔºåÂè¶‰∏Ä‰∏™ÊòØÊàë‰ª¨ÁöÑÂü∫ÂáÜÊµãËØïÁ®ãÂ∫è‰∫ß ÁîüÁöÑË¥üËΩΩ‰ºöÊúâÊ≥¢Âä®28„ÄÇ ÈöèÊú∫ËØªÂü∫ÂáÜÊµãËØïÁöÑÊµãËØïÁªìÊûúÊòæÁ§∫ÔºåÈöèÊú∫ËØªÁöÑÊÄßËÉΩÈöè Tablet ÊúçÂä°Âô®Êï∞ÈáèÂ¢ûÂä†ÁöÑÊèêÂçáÂπÖÂ∫¶ÊúÄÂ∞è(Êï¥‰ΩìÂêûÂêêÈáè Âè™ÊèêÂçá‰∫Ü 100 ÂÄçÔºåËÄåÊúçÂä°Âô®ÁöÑÊï∞ÈáèÂç¥Â¢ûÂä†‰∫Ü 500 ÂÄç)„ÄÇËøôÊòØÂõ†‰∏∫ÊØè‰∏™ 1000-byte ÁöÑËØªÊìç‰ΩúÈÉΩ‰ºöÂØºËá¥‰∏Ä‰∏™ 64KB Â§ßÁöÑ Block Âú®ÁΩëÁªú‰∏ä‰º†Ëæì„ÄÇËøôÊ†∑ÁöÑÁΩëÁªú‰º†ËæìÈáèÊ∂àËÄó‰∫ÜÊàë‰ª¨ÁΩëÁªú‰∏≠ÂêÑÁßçÂÖ±‰∫´ÁöÑ 1GB ÁöÑÈìæË∑ØÔºåÁªìÊûúÂØºËá¥ÈöèÁùÄÊàë‰ª¨ Â¢ûÂä†ÊúçÂä°Âô®ÁöÑÊï∞ÈáèÔºåÊØèÂè∞ÊúçÂä°Âô®‰∏äÁöÑÂêûÂêêÈáèÊÄ•Ââß‰∏ãÈôç„ÄÇÂÆûÈôÖÂ∫îÁî®Êà™Ê≠¢Âà∞ 2006 Âπ¥ 8 ÊúàÔºåGoogle ÂÜÖÈÉ®‰∏ÄÂÖ±Êúâ 388 ‰∏™ÈùûÊµãËØïÁî®ÁöÑ Bigtable ÈõÜÁæ§ËøêË°åÂú®ÂêÑÁßçÂêÑÊ†∑ÁöÑÊúçÂä°Âô®ÈõÜÁæ§‰∏äÔºå ÂêàËÆ°Â§ßÁ∫¶Êúâ 24500 ‰∏™ Tablet ÊúçÂä°Âô®„ÄÇË°® 1 ÊòæÁ§∫‰∫ÜÊØè‰∏™ÈõÜÁæ§‰∏ä Tablet ÊúçÂä°Âô®ÁöÑÂ§ßËá¥ÂàÜÂ∏ÉÊÉÖÂÜµ„ÄÇËøô‰∫õÈõÜÁæ§‰∏≠ÔºåËÆ∏ Â§öÁî®‰∫éÂºÄÂèëÁõÆÁöÑÔºåÂõ†Ê≠§‰ºöÊúâ‰∏ÄÊÆµÊó∂ÊúüÊØîËæÉÁ©∫Èó≤„ÄÇÈÄöËøáËßÇÂØü‰∏Ä‰∏™Áî± 14 ‰∏™ÈõÜÁæ§„ÄÅ8069 ‰∏™ Tablet ÊúçÂä°Âô®ÁªÑÊàêÁöÑÈõÜÁæ§ ÁªÑÔºåÊàë‰ª¨ÁúãÂà∞Êï¥‰ΩìÁöÑÂêûÂêêÈáèË∂ÖËøá‰∫ÜÊØèÁßí 1200000 Ê¨°ËØ∑Ê±ÇÔºåÂèëÈÄÅÂà∞Á≥ªÁªüÁöÑ RPC ËØ∑Ê±ÇÂØºËá¥ÁöÑÁΩëÁªúË¥üËΩΩËææÂà∞‰∫Ü 741MB/sÔºåÁ≥ªÁªüÂèëÂá∫ÁöÑ RPC ËØ∑Ê±ÇÁΩëÁªúË¥üËΩΩÂ§ßÁ∫¶ÊòØ 16GB/s„ÄÇË°® 2 Êèê‰æõ‰∫Ü‰∏Ä‰∫õÁõÆÂâçÊ≠£Âú®‰ΩøÁî®ÁöÑË°®ÁöÑÁõ∏ÂÖ≥Êï∞ÊçÆ„ÄÇ‰∏Ä‰∫õË°®Â≠òÂÇ®ÁöÑÊòØÁî®Êà∑Áõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÔºåÂè¶Â§ñ‰∏Ä‰∫õÂ≠òÂÇ®ÁöÑÂàôÊòØ Áî®‰∫éÊâπÂ§ÑÁêÜÁöÑÊï∞ÊçÆ;Ëøô‰∫õË°®Âú®ÊÄªÁöÑÂ§ßÂ∞è„ÄÅ ÊØè‰∏™Êï∞ÊçÆÈ°πÁöÑÂπ≥ÂùáÂ§ßÂ∞è„ÄÅ‰ªéÂÜÖÂ≠ò‰∏≠ËØªÂèñÁöÑÊï∞ÊçÆÁöÑÊØî‰æã„ÄÅË°®ÁöÑ Schema ÁöÑÂ§çÊùÇÁ®ãÂ∫¶‰∏äÈÉΩÊúâÂæàÂ§ßÁöÑÂ∑ÆÂà´„ÄÇÊú¨ËäÇÁöÑÂÖ∂‰ΩôÈÉ®ÂàÜÔºåÊàë‰ª¨Â∞Ü‰∏ªË¶ÅÊèèËø∞‰∏â‰∏™‰∫ßÂìÅÁ†îÂèëÂõ¢ÈòüÂ¶Ç‰Ωï‰ΩøÁî® Bigtable ÁöÑ„ÄÇ Google AnalyticsGoogle Analytics ÊòØÁî®Êù•Â∏ÆÂä© Web Á´ôÁÇπÁöÑÁÆ°ÁêÜÂëòÂàÜÊûê‰ªñ‰ª¨ÁΩëÁ´ôÁöÑÊµÅÈáèÊ®°ÂºèÁöÑÊúçÂä°„ÄÇÂÆÉÊèê‰æõ‰∫ÜÊï¥‰ΩìÁä∂ÂÜµÁöÑÁªü ËÆ°Êï∞ÊçÆÔºåÊØîÂ¶ÇÊØèÂ§©ÁöÑÁã¨Á´ãËÆøÈóÆÁöÑÁî®Êà∑Êï∞Èáè„ÄÅÊØèÂ§©ÊØè‰∏™ URL ÁöÑÊµèËßàÊ¨°Êï∞;ÂÆÉËøòÊèê‰æõ‰∫ÜÁî®Êà∑‰ΩøÁî®ÁΩëÁ´ôÁöÑË°å‰∏∫Êä•ÂëäÔºå ÊØîÂ¶ÇÊ†πÊçÆÁî®Êà∑‰πãÂâçËÆøÈóÆÁöÑÊüê‰∫õÈ°µÈù¢ÔºåÁªüËÆ°Âá∫Âá†ÊàêÁöÑÁî®Êà∑Ë¥≠‰π∞‰∫ÜÂïÜÂìÅ„ÄÇ ‰∏∫‰∫Ü‰ΩøÁî®Ëøô‰∏™ÊúçÂä°ÔºåWeb Á´ôÁÇπÁöÑÁÆ°ÁêÜÂëòÂè™ÈúÄË¶ÅÂú®‰ªñ‰ª¨ÁöÑ Web È°µÈù¢‰∏≠ÂµåÂÖ•‰∏ÄÂ∞èÊÆµ JavaScript ËÑöÊú¨Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ Ëøô‰∏™ Javascript Á®ãÂ∫èÂú®È°µÈù¢Ë¢´ËÆøÈóÆÁöÑÊó∂ÂÄôË∞ÉÁî®„ÄÇÂÆÉËÆ∞ÂΩï‰∫ÜÂêÑÁßç Google Analytics ÈúÄË¶Å‰ΩøÁî®ÁöÑ‰ø°ÊÅØÔºåÊØîÂ¶ÇÁî®Êà∑ÁöÑ Ê†áËØÜ„ÄÅËé∑ÂèñÁöÑÁΩëÈ°µÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇGoogle Analytics Ê±áÊÄªËøô‰∫õÊï∞ÊçÆÔºå‰πãÂêéÊèê‰æõÁªô Web Á´ôÁÇπÁöÑÁÆ°ÁêÜÂëò„ÄÇ Êàë‰ª¨Á≤óÁï•ÁöÑÊèèËø∞‰∏Ä‰∏ã Google Analytics ‰ΩøÁî®ÁöÑ‰∏§‰∏™Ë°®„ÄÇRow Click Ë°®(Â§ßÁ∫¶Êúâ 200TB Êï∞ÊçÆ)ÁöÑÊØè‰∏ÄË°åÂ≠òÊîæ ‰∫Ü‰∏Ä‰∏™ÊúÄÁªàÁî®Êà∑ÁöÑ‰ºöËØù„ÄÇË°åÁöÑÂêçÂ≠óÊòØ‰∏Ä‰∏™ÂåÖÂê´ Web Á´ôÁÇπÂêçÂ≠ó‰ª•ÂèäÁî®Êà∑‰ºöËØùÂàõÂª∫Êó∂Èó¥ÁöÑÂÖÉÁªÑ„ÄÇËøôÁßçÊ®°Âºè‰øùËØÅ‰∫Ü ÂØπÂêå‰∏Ä‰∏™ Web Á´ôÁÇπÁöÑËÆøÈóÆ‰ºöËØùÊòØÈ°∫Â∫èÁöÑÔºå‰ºöËØùÊåâÊó∂Èó¥È°∫Â∫èÂ≠òÂÇ®„ÄÇËøô‰∏™Ë°®ÂèØ‰ª•ÂéãÁº©Âà∞ÂéüÊù•Â∞∫ÂØ∏ÁöÑ 14%„ÄÇ Summary Ë°®(Â§ßÁ∫¶Êúâ 20TB ÁöÑÊï∞ÊçÆ)ÂåÖÂê´‰∫ÜÂÖ≥‰∫éÊØè‰∏™ Web Á´ôÁÇπÁöÑ„ÄÅÂêÑÁßçÁ±ªÂûãÁöÑÈ¢ÑÂÆö‰πâÊ±áÊÄª‰ø°ÊÅØ„ÄÇ‰∏Ä‰∏™Âë® ÊúüÊÄßËøêË°åÁöÑ MapReduce ‰ªªÂä°Ê†πÊçÆ Raw Click Ë°®ÁöÑÊï∞ÊçÆÁîüÊàê Summary Ë°®ÁöÑÊï∞ÊçÆ„ÄÇÊØè‰∏™ MapReduce Â∑•‰ΩúËøõÁ®ãÈÉΩ ‰ªé Raw Click Ë°®‰∏≠ÊèêÂèñÊúÄÊñ∞ÁöÑ‰ºöËØùÊï∞ÊçÆ„ÄÇÁ≥ªÁªüÁöÑÊï¥‰ΩìÂêûÂêêÈáèÂèóÈôê‰∫é GFS ÁöÑÂêûÂêêÈáè„ÄÇËøô‰∏™Ë°®ÁöÑËÉΩÂ§üÂéãÁº©Âà∞ÂéüÊúâ Â∞∫ÂØ∏ÁöÑ 29%„ÄÇ Google EarthGoogle ÈÄöËøá‰∏ÄÁªÑÊúçÂä°‰∏∫Áî®Êà∑Êèê‰æõ‰∫ÜÈ´òÂàÜËæ®ÁéáÁöÑÂú∞ÁêÉË°®Èù¢Âç´ÊòüÂõæÂÉèÔºåËÆøÈóÆÁöÑÊñπÂºèÂèØ‰ª•‰ΩøÈÄöËøáÂü∫‰∫é Web ÁöÑ Google Maps ËÆøÈóÆÊé•Âè£(maps.google.com)Ôºå‰πüÂèØ‰ª•ÈÄöËøá Google Earth ÂÆöÂà∂ÁöÑÂÆ¢Êà∑Á´ØËΩØ‰ª∂ËÆøÈóÆ„ÄÇËøô‰∫õËΩØ‰ª∂‰∫ßÂìÅ ÂÖÅËÆ∏Áî®Êà∑ÊµèËßàÂú∞ÁêÉË°®Èù¢ÁöÑÂõæÂÉè:Áî®Êà∑ÂèØ‰ª•Âú®‰∏çÂêåÁöÑÂàÜËæ®Áéá‰∏ãÂπ≥Áßª„ÄÅÊü•ÁúãÂíåÊ≥®ÈáäËøô‰∫õÂç´ÊòüÂõæÂÉè„ÄÇËøô‰∏™Á≥ªÁªü‰ΩøÁî®‰∏Ä‰∏™Ë°®Â≠òÂÇ®È¢ÑÂ§ÑÁêÜÊï∞ÊçÆÔºå‰ΩøÁî®Âè¶Â§ñ‰∏ÄÁªÑË°®Â≠òÂÇ®Áî®Êà∑Êï∞ÊçÆ„ÄÇ Êï∞ÊçÆÈ¢ÑÂ§ÑÁêÜÊµÅÊ∞¥Á∫ø‰ΩøÁî®‰∏Ä‰∏™Ë°®Â≠òÂÇ®ÂéüÂßãÂõæÂÉè„ÄÇÂú®È¢ÑÂ§ÑÁêÜËøáÁ®ã‰∏≠ÔºåÂõæÂÉèË¢´Ê∏ÖÈô§ÔºåÂõæÂÉèÊï∞ÊçÆÂêàÂπ∂Âà∞ÊúÄÁªàÁöÑÊúçÂä°Êï∞ÊçÆ‰∏≠„ÄÇËøô‰∏™Ë°®ÂåÖÂê´‰∫ÜÂ§ßÁ∫¶ 70TB ÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•ÈúÄË¶Å‰ªéÁ£ÅÁõòËØªÂèñÊï∞ÊçÆ„ÄÇÂõæÂÉèÂ∑≤ÁªèË¢´È´òÊïàÂéãÁº©Ëøá‰∫ÜÔºåÂõ†Ê≠§Â≠ò ÂÇ®Âú® Bigtable Âêé‰∏çÈúÄË¶ÅÂÜçÂéãÁº©‰∫Ü„ÄÇ Imagery Ë°®ÁöÑÊØè‰∏ÄË°åÈÉΩ‰ª£Ë°®‰∫Ü‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂú∞ÁêÜÂå∫Âüü„ÄÇË°åÈÉΩÊúâÂêçÁß∞Ôºå‰ª•Á°Æ‰øùÊØóÈÇªÁöÑÂå∫ÂüüÂ≠òÂÇ®Âú®‰∫Ü‰∏ÄËµ∑„ÄÇ Imagery Ë°®‰∏≠Êúâ‰∏Ä‰∏™ÂàóÊóèÁî®Êù•ËÆ∞ÂΩïÊØè‰∏™Âå∫ÂüüÁöÑÊï∞ÊçÆÊ∫ê„ÄÇËøô‰∏™ÂàóÊóèÂåÖÂê´‰∫ÜÂ§ßÈáèÁöÑÂàó:Âü∫Êú¨‰∏äÂ∏ÇÊØè‰∏™ÂàóÂØπÂ∫î‰∏Ä‰∏™Âéü ÂßãÂõæÁâáÁöÑÊï∞ÊçÆ„ÄÇÁî±‰∫éÊØè‰∏™Âú∞ÁêÜÂå∫ÂüüÈÉΩÊòØÁî±ÂæàÂ∞ëÁöÑÂá†Âº†ÂõæÁâáÊûÑÊàêÁöÑÔºåÂõ†Ê≠§Ëøô‰∏™ÂàóÊóèÊòØÈùûÂ∏∏Á®ÄÁñèÁöÑ„ÄÇ Êï∞ÊçÆÈ¢ÑÂ§ÑÁêÜÊµÅÊ∞¥Á∫øÈ´òÂ∫¶‰æùËµñËøêË°åÂú® Bigtable ‰∏äÁöÑ MapReduce ‰ªªÂä°‰º†ËæìÊï∞ÊçÆ„ÄÇÂú®ËøêË°åÊüê‰∫õ MapReduce ‰ªªÂä° ÁöÑÊó∂ÂÄôÔºåÊï¥‰∏™Á≥ªÁªü‰∏≠ÊØèÂè∞ Tablet ÊúçÂä°Âô®ÁöÑÊï∞ÊçÆÂ§ÑÁêÜÈÄüÂ∫¶ÊòØ 1MB/s„ÄÇ Ëøô‰∏™ÊúçÂä°Á≥ªÁªü‰ΩøÁî®‰∏Ä‰∏™Ë°®Êù•Á¥¢Âºï GFS ‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇËøô‰∏™Ë°®Áõ∏ÂØπËæÉÂ∞è(Â§ßÁ∫¶ÊòØ 500GB)Ôºå‰ΩÜÊòØËøô‰∏™Ë°®ÂøÖÈ°ªÂú® ‰øùËØÅËæÉ‰ΩéÁöÑÂìçÂ∫îÂª∂Êó∂ÁöÑÂâçÊèê‰∏ãÔºåÈíàÂØπÊØè‰∏™Êï∞ÊçÆ‰∏≠ÂøÉÔºåÊØèÁßíÂ§ÑÁêÜÂá†‰∏á‰∏™Êü•ËØ¢ËØ∑Ê±Ç„ÄÇ Âõ†Ê≠§ÔºåËøô‰∏™Ë°®ÂøÖÈ°ªÂú®‰∏äÁôæ‰∏™ Tablet ÊúçÂä°Âô®‰∏äÂ≠òÂÇ®Êï∞ÊçÆÔºåÂπ∂‰∏î‰ΩøÁî® in-memory ÁöÑÂàóÊóè„ÄÇ ‰∏™ÊÄßÂåñÊü•ËØ¢‰∏™ÊÄßÂåñÊü•ËØ¢(www.google.com/psearch)ÊòØ‰∏Ä‰∏™ÂèåÂêëÊúçÂä°;Ëøô‰∏™ÊúçÂä°ËÆ∞ÂΩïÁî®Êà∑ÁöÑÊü•ËØ¢ÂíåÁÇπÂáªÔºåÊ∂âÂèäÂà∞ÂêÑÁßç Google ÁöÑÊúçÂä°ÔºåÊØîÂ¶Ç Web Êü•ËØ¢„ÄÅÂõæÂÉèÂíåÊñ∞Èóª„ÄÇÁî®Êà∑ÂèØ‰ª•ÊµèËßà‰ªñ‰ª¨Êü•ËØ¢ÁöÑÂéÜÂè≤ÔºåÈáçÂ§ç‰ªñ‰ª¨‰πãÂâçÁöÑÊü•ËØ¢ÂíåÁÇπÂáª; Áî®Êà∑‰πüÂèØ‰ª•ÂÆöÂà∂Âü∫‰∫é Google ÂéÜÂè≤‰ΩøÁî®‰π†ÊÉØÊ®°ÂºèÁöÑ‰∏™ÊÄßÂåñÊü•ËØ¢ÁªìÊûú„ÄÇ ‰∏™ÊÄßÂåñÊü•ËØ¢‰ΩøÁî® Bigtable Â≠òÂÇ®ÊØè‰∏™Áî®Êà∑ÁöÑÊï∞ÊçÆ„ÄÇÊØè‰∏™Áî®Êà∑ÈÉΩÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÁî®Êà∑ idÔºåÊØè‰∏™Áî®Êà∑ id Âíå‰∏Ä‰∏™Âàó ÂêçÁªëÂÆö„ÄÇ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂàóÊóèË¢´Áî®Êù•Â≠òÂÇ®ÂêÑÁßçÁ±ªÂûãÁöÑË°å‰∏∫(ÊØîÂ¶ÇÔºåÊúâ‰∏™ÂàóÊóèÂèØËÉΩÊòØÁî®Êù•Â≠òÂÇ®ÊâÄÊúâÁöÑ Web Êü•ËØ¢ÁöÑ)„ÄÇ ÊØè‰∏™Êï∞ÊçÆÈ°πÈÉΩË¢´Áî®‰Ωú Bigtable ÁöÑÊó∂Èó¥Êà≥ÔºåËÆ∞ÂΩï‰∫ÜÁõ∏Â∫îÁöÑÁî®Êà∑Ë°å‰∏∫ÂèëÁîüÁöÑÊó∂Èó¥„ÄÇ‰∏™ÊÄßÂåñÊü•ËØ¢‰ΩøÁî®‰ª• Bigtable ‰∏∫ Â≠òÂÇ®ÁöÑ MapReduce ‰ªªÂä°ÁîüÊàêÁî®Êà∑ÁöÑÊï∞ÊçÆÂõæË°®„ÄÇËøô‰∫õÁî®Êà∑Êï∞ÊçÆÂõæË°®Áî®Êù•‰∏™ÊÄßÂåñÂΩìÂâçÁöÑÊü•ËØ¢ÁªìÊûú„ÄÇ ‰∏™ÊÄßÂåñÊü•ËØ¢ÁöÑÊï∞ÊçÆ‰ºöÂ§çÂà∂Âà∞Âá†‰∏™ Bigtable ÁöÑÈõÜÁæ§‰∏äÔºåËøôÊ†∑Â∞±Â¢ûÂº∫‰∫ÜÊï∞ÊçÆÂèØÁî®ÊÄßÔºåÂêåÊó∂ÂáèÂ∞ë‰∫ÜÁî±ÂÆ¢Êà∑Á´ØÂíå Bigtable ÈõÜÁæ§Èó¥ÁöÑ‚ÄúË∑ùÁ¶ª‚ÄùÈÄ†ÊàêÁöÑÂª∂Êó∂„ÄÇ‰∏™ÊÄßÂåñÊü•ËØ¢ÁöÑÂºÄÂèëÂõ¢ÈòüÊúÄÂàùÂª∫Á´ã‰∫Ü‰∏Ä‰∏™Âü∫‰∫é Bigtable ÁöÑ„ÄÅ‚ÄúÂÆ¢Êà∑‰æß‚Äù ÁöÑÂ§çÂà∂Êú∫Âà∂‰∏∫ÊâÄÊúâÁöÑÂ§çÂà∂ËäÇÁÇπÊèê‰æõ‰∏ÄËá¥ÊÄß‰øùÈöú„ÄÇÁé∞Âú®ÁöÑÁ≥ªÁªüÂàô‰ΩøÁî®‰∫ÜÂÜÖÂª∫ÁöÑÂ§çÂà∂Â≠êÁ≥ªÁªü„ÄÇ ‰∏™ÊÄßÂåñÊü•ËØ¢Â≠òÂÇ®Á≥ªÁªüÁöÑËÆæËÆ°ÂÖÅËÆ∏ÂÖ∂ÂÆÉÁöÑÂõ¢ÈòüÂú®ÂÆÉ‰ª¨Ëá™Â∑±ÁöÑÂàó‰∏≠Âä†ÂÖ•Êñ∞ÁöÑÁî®Êà∑Êï∞ÊçÆÔºåÂõ†Ê≠§ÔºåÂæàÂ§ö Google Êúç Âä°‰ΩøÁî®‰∏™ÊÄßÂåñÊü•ËØ¢Â≠òÂÇ®Á≥ªÁªü‰øùÂ≠òÁî®Êà∑Á∫ßÁöÑÈÖçÁΩÆÂèÇÊï∞ÂíåËÆæÁΩÆ„ÄÇÂú®Â§ö‰∏™Âõ¢Èòü‰πãÈó¥ÂàÜ‰∫´Êï∞ÊçÆÁöÑÁªìÊûúÊòØ‰∫ßÁîü‰∫ÜÂ§ßÈáèÁöÑ ÂàóÊóè„ÄÇ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÊîØÊåÅÊï∞ÊçÆÂÖ±‰∫´ÔºåÊàë‰ª¨Âä†ÂÖ•‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑÈÖçÈ¢ùÊú∫Âà∂29ÈôêÂà∂Áî®Êà∑Âú®ÂÖ±‰∫´Ë°®‰∏≠‰ΩøÁî®ÁöÑÁ©∫Èó¥;ÈÖçÈ¢ù‰πü ‰∏∫‰ΩøÁî®‰∏™ÊÄßÂåñÊü•ËØ¢Á≥ªÁªüÂ≠òÂÇ®Áî®Êà∑Á∫ß‰ø°ÊÅØÁöÑ‰∫ßÂìÅÂõ¢‰ΩìÊèê‰æõ‰∫ÜÈöîÁ¶ªÊú∫Âà∂„ÄÇ ÁªèÈ™åÊïôËÆ≠ Âú®ËÆæËÆ°„ÄÅÂÆûÁé∞„ÄÅÁª¥Êä§ÂíåÊîØÊåÅ Bigtable ÁöÑËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÂæóÂà∞‰∫ÜÂæàÂ§öÊúâÁî®ÁöÑÁªèÈ™åÂíå‰∏Ä‰∫õÊúâË∂£ÁöÑÊïôËÆ≠„ÄÇ‰∏Ä‰∏™ÊïôËÆ≠ÊòØÔºåÊàë‰ª¨ÂèëÁé∞ÔºåÂæàÂ§öÁ±ªÂûãÁöÑÈîôËØØÈÉΩ‰ºöÂØºËá¥Â§ßÂûãÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂèóÊçüÔºåËøô‰∫õÈîôËØØ‰∏ç‰ªÖ‰ªÖÊòØÈÄöÂ∏∏ÁöÑÁΩëÁªú ‰∏≠Êñ≠„ÄÅÊàñËÄÖÂæàÂ§öÂàÜÂ∏ÉÂºèÂçèËÆÆ‰∏≠ËÆæÊÉ≥ÁöÑ fail-stop Á±ªÂûãÁöÑÈîôËØØ30„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÈÅáÂà∞Ëøá‰∏ãÈù¢Ëøô‰∫õÁ±ªÂûãÁöÑÈîôËØØÂØºËá¥ÁöÑÈóÆ È¢ò:ÂÜÖÂ≠òÊï∞ÊçÆÊçüÂùè„ÄÅÁΩëÁªú‰∏≠Êñ≠„ÄÅÊó∂ÈíüÂÅèÂ∑Æ„ÄÅÊú∫Âô®ÊåÇËµ∑„ÄÅÊâ©Â±ïÁöÑÂíåÈùûÂØπÁß∞ÁöÑÁΩëÁªúÂàÜÂå∫31„ÄÅÊàë‰ª¨‰ΩøÁî®ÁöÑÂÖ∂ÂÆÉÁ≥ªÁªüÁöÑ Bug(ÊØîÂ¶Ç Chubby)„ÄÅGFS ÈÖçÈ¢ùÊ∫¢Âá∫„ÄÅËÆ°ÂàíÂÜÖÂíåËÆ°ÂàíÂ§ñÁöÑÁ°¨‰ª∂Áª¥Êä§„ÄÇÊàë‰ª¨Âú®Ëß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢òÁöÑËøáÁ®ã‰∏≠Â≠¶Âà∞‰∫ÜÂæàÂ§ö ÁªèÈ™åÔºåÊàë‰ª¨ÈÄöËøá‰øÆÊîπÂçèËÆÆÊù•Ëß£ÂÜ≥Ëøô‰∫õÈóÆÈ¢ò„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨Âú®Êàë‰ª¨ÁöÑ RPC Êú∫Âà∂‰∏≠Âä†ÂÖ•‰∫Ü Checksum„ÄÇÊàë‰ª¨Âú®ËÆæËÆ° Á≥ªÁªüÁöÑÈÉ®ÂàÜÂäüËÉΩÊó∂Ôºå‰∏çÂØπÂÖ∂ÂÆÉÈÉ®ÂàÜÂäüËÉΩÂÅö‰ªª‰ΩïÁöÑÂÅáËÆæÔºåËøôÊ†∑ÁöÑÂÅöÊ≥ïËß£ÂÜ≥‰∫ÜÂÖ∂ÂÆÉÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨‰∏çÂÜç ÂÅáËÆæ‰∏Ä‰∏™ÁâπÂÆöÁöÑ Chubby Êìç‰ΩúÂè™ËøîÂõûÈîôËØØÁ†ÅÈõÜÂêà‰∏≠ÁöÑ‰∏Ä‰∏™ÂÄº„ÄÇ Âè¶Â§ñ‰∏Ä‰∏™ÊïôËÆ≠ÊòØÔºåÊàë‰ª¨ÊòéÁôΩ‰∫ÜÂú®ÂΩªÂ∫ï‰∫ÜËß£‰∏Ä‰∏™Êñ∞ÁâπÊÄß‰ºöË¢´Â¶Ç‰Ωï‰ΩøÁî®‰πãÂêéÔºåÂÜçÂÜ≥ÂÆöÊòØÂê¶Ê∑ªÂä†Ëøô‰∏™Êñ∞ÁâπÊÄßÊòØ ÈùûÂ∏∏ÈáçË¶ÅÁöÑ„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÂºÄÂßãËÆ°ÂàíÂú®Êàë‰ª¨ÁöÑ API ‰∏≠ÊîØÊåÅÈÄöÂ∏∏ÊñπÂºèÁöÑ‰∫ãÂä°Â§ÑÁêÜ„ÄÇ‰ΩÜÊòØÁî±‰∫éÊàë‰ª¨Ëøò‰∏ç‰ºöÈ©¨‰∏äÁî®Âà∞ Ëøô‰∏™ÂäüËÉΩÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨Âπ∂Ê≤°ÊúâÂéªÂÆûÁé∞ÂÆÉ„ÄÇÁé∞Âú®ÔºåBigtable ‰∏äÂ∑≤ÁªèÊúâ‰∫ÜÂæàÂ§öÁöÑÂÆûÈôÖÂ∫îÁî®ÔºåÊàë‰ª¨ÂèØ‰ª•Ê£ÄÊü•ÂÆÉ‰ª¨ÁúüÂÆû ÁöÑÈúÄÊ±Ç;Êàë‰ª¨ÂèëÁé∞ÔºåÂ§ßÂ§öÊòØÂ∫îÁî®Á®ãÂ∫èÈÉΩÂè™ÊòØÈúÄË¶ÅÂçï‰∏™Ë°å‰∏äÁöÑ‰∫ãÂä°ÂäüËÉΩ„ÄÇÊúâ‰∫õÂ∫îÁî®ÈúÄË¶ÅÂàÜÂ∏ÉÂºèÁöÑ‰∫ãÂä°ÂäüËÉΩÔºåÂàÜ Â∏ÉÂºè‰∫ãÂä°Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÁî®‰∫éÁª¥Êä§‰∫åÁ∫ßÁ¥¢ÂºïÔºåÂõ†Ê≠§Êàë‰ª¨Â¢ûÂä†‰∫Ü‰∏Ä‰∏™ÁâπÊÆäÁöÑÊú∫Âà∂ÂéªÊª°Ë∂≥Ëøô‰∏™ÈúÄÊ±Ç„ÄÇÊñ∞ÁöÑÊú∫Âà∂Âú®ÈÄö Áî®ÊÄß‰∏äÊØîÂàÜÂ∏ÉÂºè‰∫ãÂä°Â∑ÆÂæàÂ§öÔºå‰ΩÜÊòØÂÆÉÊõ¥ÊúâÊïà(ÁâπÂà´ÊòØÂú®Êõ¥Êñ∞Êìç‰ΩúÁöÑÊ∂âÂèä‰∏äÁôæË°åÊï∞ÊçÆÁöÑÊó∂ÂÄô)ÔºåËÄå‰∏îÈùûÂ∏∏Á¨¶ÂêàÊàë ‰ª¨ÁöÑ‚ÄúË∑®Êï∞ÊçÆ‰∏≠ÂøÉ‚ÄùÂ§çÂà∂ÊñπÊ°àÁöÑ‰ºòÂåñÁ≠ñÁï•„ÄÇ ËøòÊúâ‰∏Ä‰∏™ÂÖ∑ÊúâÂÆûË∑µÊÑè‰πâÁöÑÁªèÈ™å:Êàë‰ª¨ÂèëÁé∞Á≥ªÁªüÁ∫ßÁöÑÁõëÊéßÂØπ Bigtable ÈùûÂ∏∏ÈáçË¶Å(ÊØîÂ¶ÇÔºåÁõëÊéß Bigtable Ëá™Ë∫´ ‰ª•Âèä‰ΩøÁî® Bigtable ÁöÑÂÆ¢Êà∑Á®ãÂ∫è)„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨Êâ©Â±ï‰∫ÜÊàë‰ª¨ÁöÑ RPC Á≥ªÁªüÔºåÂõ†Ê≠§ÂØπ‰∫é‰∏Ä‰∏™ RPC Ë∞ÉÁî®ÁöÑ‰æãÂ≠êÔºåÂÆÉÂèØ ‰ª•ËØ¶ÁªÜËÆ∞ÂΩï‰ª£Ë°®‰∫Ü RPC Ë∞ÉÁî®ÁöÑÂæàÂ§öÈáçË¶ÅÊìç‰Ωú„ÄÇËøô‰∏™ÁâπÊÄßÂÖÅËÆ∏Êàë‰ª¨Ê£ÄÊµãÂíå‰øÆÊ≠£ÂæàÂ§öÁöÑÈóÆÈ¢òÔºåÊØîÂ¶Ç Tablet Êï∞ÊçÆÁªì ÊûÑ‰∏äÁöÑÈîÅÁöÑÂÜÖÂÆπ„ÄÅÂú®‰øÆÊîπÊìç‰ΩúÊèê‰∫§Êó∂ÂØπ GFS ÁöÑÂÜôÂÖ•ÈùûÂ∏∏ÊÖ¢ÁöÑÈóÆÈ¢ò„ÄÅ‰ª•ÂèäÂú® METADATA Ë°®ÁöÑ Tablet ‰∏çÂèØÁî®Êó∂Ôºå ÂØπ METADATA Ë°®ÁöÑËÆøÈóÆÊåÇËµ∑ÁöÑÈóÆÈ¢ò„ÄÇÂÖ≥‰∫éÁõëÊéßÁöÑÁî®ÈÄîÁöÑÂè¶Â§ñ‰∏Ä‰∏™‰æãÂ≠êÊòØÔºåÊØè‰∏™ Bigtable ÈõÜÁæ§ÈÉΩÂú® Chubby ‰∏≠ Ê≥®ÂÜå‰∫Ü„ÄÇËøôÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Ë∑üË∏™ÊâÄÊúâÁöÑÈõÜÁæ§Áä∂ÊÄÅ„ÄÅÁõëÊéßÂÆÉ‰ª¨ÁöÑÂ§ßÂ∞è„ÄÅÊ£ÄÊü•ÈõÜÁæ§ËøêË°åÁöÑÊàë‰ª¨ËΩØ‰ª∂ÁöÑÁâàÊú¨„ÄÅÁõëÊéßÈõÜ Áæ§ÊµÅÂÖ•Êï∞ÊçÆÁöÑÊµÅÈáèÔºå‰ª•ÂèäÊ£ÄÊü•ÊòØÂê¶ÊúâÂºïÂèëÈõÜÁæ§È´òÂª∂Êó∂ÁöÑÊΩúÂú®Âõ†Á¥†„ÄÇ ÂØπÊàë‰ª¨Êù•ËØ¥ÔºåÊúÄÂÆùË¥µÁöÑÁªèÈ™åÊòØÁÆÄÂçïËÆæËÆ°ÁöÑ‰ª∑ÂÄº„ÄÇËÄÉËôëÂà∞Êàë‰ª¨Á≥ªÁªüÁöÑ‰ª£Á†ÅÈáè(Â§ßÁ∫¶ 100000 Ë°åÁîü‰∫ß‰ª£Á†Å32)Ôºå ‰ª•ÂèäÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºåÊñ∞ÁöÑ‰ª£Á†Å‰ª•ÂêÑÁßçÈöæ‰ª•È¢ÑÊñôÁöÑÊñπÂºèÂä†ÂÖ•Á≥ªÁªüÔºåÊàë‰ª¨ÂèëÁé∞ÁÆÄÊ¥ÅÁöÑËÆæËÆ°ÂíåÁºñÁ†ÅÁªôÁª¥Êä§ÂíåË∞ÉËØï Â∏¶Êù•ÁöÑÂ∑®Â§ßÂ•ΩÂ§Ñ„ÄÇËøôÊñπÈù¢ÁöÑ‰∏Ä‰∏™‰æãÂ≠êÊòØÊàë‰ª¨ÁöÑ Tablet ÊúçÂä°Âô®ÊàêÂëòÂçèËÆÆ„ÄÇÊàë‰ª¨Á¨¨‰∏ÄÁâàÁöÑÂçèËÆÆÂæàÁÆÄÂçï:Master ÊúçÂä°Âô®Âë®ÊúüÊÄßÁöÑÂíå Tablet ÊúçÂä°Âô®Á≠æËÆ¢ÁßüÁ∫¶ÔºåTablet ÊúçÂä°Âô®Âú®ÁßüÁ∫¶ËøáÊúüÁöÑÊó∂ÂÄô Kill ÊéâËá™Â∑±ÁöÑËøõÁ®ã„ÄÇ‰∏çÂπ∏ÁöÑÊòØÔºåËøô ‰∏™ÂçèËÆÆÂú®ÈÅáÂà∞ÁΩëÁªúÈóÆÈ¢òÊó∂‰ºöÂ§ßÂ§ßÈôç‰ΩéÁ≥ªÁªüÁöÑÂèØÁî®ÊÄßÔºå‰πü‰ºöÂ§ßÂ§ßÂ¢ûÂä† Master ÊúçÂä°Âô®ÊÅ¢Â§çÁöÑÊó∂Èó¥„ÄÇÊàë‰ª¨Â§öÊ¨°ÈáçÊñ∞ ËÆæËÆ°Ëøô‰∏™ÂçèËÆÆÔºåÁõ¥Âà∞ÂÆÉËÉΩÂ§üÂæàÂ•ΩÁöÑÂ§ÑÁêÜ‰∏äËø∞ÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÔºåÊõ¥‰∏çÂπ∏ÁöÑÊòØÔºåÊúÄÁªàÁöÑÂçèËÆÆËøá‰∫éÂ§çÊùÇ‰∫ÜÔºåÂπ∂‰∏î‰æùËµñ‰∏Ä ‰∫õ Chubby ÂæàÂ∞ëË¢´Áî®Âà∞ÁöÑÁâπÊÄß„ÄÇÊàë‰ª¨ÂèëÁé∞Êàë‰ª¨Êµ™Ë¥π‰∫ÜÂ§ßÈáèÁöÑÊó∂Èó¥Âú®Ë∞ÉËØï‰∏Ä‰∫õÂè§ÊÄ™ÁöÑÈóÆÈ¢ò33ÔºåÊúâ‰∫õÊòØ Bigtable ‰ª£ Á†ÅÁöÑÈóÆÈ¢òÔºåÊúâ‰∫õÊòØ Chubby ‰ª£Á†ÅÁöÑÈóÆÈ¢ò„ÄÇÊúÄÂêéÔºåÊàë‰ª¨Âè™Â•ΩÂ∫üÂºÉ‰∫ÜËøô‰∏™ÂçèËÆÆÔºåÈáçÊñ∞Âà∂ËÆ¢‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑ„ÄÅÊõ¥ÁÆÄÂçï„ÄÅÂè™‰ΩøÁî® Chubby ÊúÄÂπøÊ≥õ‰ΩøÁî®ÁöÑÁâπÊÄßÁöÑÂçèËÆÆ„ÄÇÁõ∏ÂÖ≥Â∑•‰ΩúBoxwood È°πÁõÆÁöÑÊúâ‰∫õÁªÑ‰ª∂Âú®Êüê‰∫õÊñπÈù¢Âíå Chubby„ÄÅGFS ‰ª•Âèä Bigtable Á±ª‰ººÔºåÂõ†‰∏∫ÂÆÉ‰πüÊèê‰æõ‰∫ÜËØ∏Â¶ÇÂàÜ Â∏ÉÂºèÂçèËÆÆ„ÄÅÈîÅ„ÄÅÂàÜÂ∏ÉÂºè Chunk Â≠òÂÇ®‰ª•ÂèäÂàÜÂ∏ÉÂºè B-tree Â≠òÂÇ®„ÄÇBoxwood ‰∏é Google ÁöÑÊüê‰∫õÁªÑ‰ª∂Â∞ΩÁÆ°ÂäüËÉΩÁ±ª‰ººÔºå ‰ΩÜÊòØ Boxwood ÁöÑÁªÑ‰ª∂Êèê‰æõÊõ¥Â∫ïÂ±ÇÁöÑÊúçÂä°„ÄÇBoxwood È°πÁõÆÁöÑÁõÆÁöÑÊòØÊèê‰æõÂàõÂª∫Á±ª‰ººÊñá‰ª∂Á≥ªÁªü„ÄÅÊï∞ÊçÆÂ∫ìÁ≠âÈ´òÁ∫ßÊúçÂä° ÁöÑÂü∫Á°ÄÊûÑ‰ª∂ÔºåËÄå Bigtable ÁöÑÁõÆÁöÑÊòØÁõ¥Êé•‰∏∫ÂÆ¢Êà∑Á®ãÂ∫èÁöÑÊï∞ÊçÆÂ≠òÂÇ®ÈúÄÊ±ÇÊèê‰æõÊîØÊåÅ„ÄÇ Áé∞Âú®Êúâ‰∏çÂ∞ëÈ°πÁõÆÂ∑≤ÁªèÊîªÂÖã‰∫ÜÂæàÂ§öÈöæÈ¢òÔºåÂÆûÁé∞‰∫ÜÂú®ÂπøÂüüÁΩë‰∏äÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ≠òÂÇ®ÊàñËÄÖÈ´òÁ∫ßÊúçÂä°ÔºåÈÄöÂ∏∏ÊòØ ‚ÄúInternet ËßÑÊ®°‚ÄùÁöÑ„ÄÇËøôÂÖ∂‰∏≠ÂåÖÊã¨‰∫ÜÂàÜÂ∏ÉÂºèÁöÑ Hash Ë°®ÔºåËøôÈ°πÂ∑•‰ΩúÁî±‰∏Ä‰∫õÁ±ª‰ºº CAN„Äê29„Äë„ÄÅChord„Äê32„Äë„ÄÅTapestry „Äê37„ÄëÂíå Pastry„Äê30„ÄëÁöÑÈ°πÁõÆÁéáÂÖàÂèëËµ∑„ÄÇËøô‰∫õÁ≥ªÁªüÁöÑ‰∏ªË¶ÅÂÖ≥Ê≥®ÁÇπÂíå Bigtable ‰∏çÂêåÔºåÊØîÂ¶ÇÂ∫îÂØπÂêÑÁßç‰∏çÂêåÁöÑ‰º†ËæìÂ∏¶ ÂÆΩ„ÄÅ‰∏çÂèØ‰ø°ÁöÑÂçè‰ΩúËÄÖ„ÄÅÈ¢ëÁπÅÁöÑÊõ¥ÊîπÈÖçÁΩÆÁ≠â;Âè¶Â§ñÔºåÂéª‰∏≠ÂøÉÂåñÂíå Byzantine ÁÅæÈöæÂÜó‰Ωô‰πü‰∏çÊòØ Bigtable ÁöÑÁõÆÁöÑ„ÄÇ Â∞±Êèê‰æõÁªôÂ∫îÁî®Á®ãÂ∫èÂºÄÂèëËÄÖÁöÑÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ≠òÂÇ®Ê®°ÂûãËÄåË®ÄÔºåÊàë‰ª¨Áõ∏‰ø°ÔºåÂàÜÂ∏ÉÂºè B-Tree ÊàñËÄÖÂàÜÂ∏ÉÂºè Hash Ë°®Êèê ‰æõÁöÑ Key-value pair ÊñπÂºèÁöÑÊ®°ÂûãÊúâÂæàÂ§ßÁöÑÂ±ÄÈôêÊÄß„ÄÇKey-value pair Ê®°ÂûãÊòØÂæàÊúâÁî®ÁöÑÁªÑ‰ª∂Ôºå‰ΩÜÊòØÂÆÉ‰ª¨‰∏çÂ∫îËØ•ÊòØÊèê‰æõÁªôÂºÄÂèëËÄÖÂîØ‰∏ÄÁöÑÁªÑ‰ª∂„ÄÇÊàë‰ª¨ÈÄâÊã©ÁöÑÊ®°ÂûãÊèê‰æõÁöÑÁªÑ‰ª∂ÊØîÁÆÄÂçïÁöÑ Key-value pair ‰∏∞ÂØåÁöÑÂ§öÔºåÂÆÉÊîØÊåÅÁ®ÄÁñèÁöÑ„ÄÅÂçäÁªìÊûÑ ÂåñÁöÑÊï∞ÊçÆ„ÄÇÂè¶Â§ñÔºåÂÆÉ‰πüË∂≥Â§üÁÆÄÂçïÔºåËÉΩÂ§üÈ´òÊïàÁöÑÂ§ÑÁêÜÂπ≥Èù¢Êñá‰ª∂;ÂÆÉ‰πüÊòØÈÄèÊòéÁöÑ(ÈÄöËøáÂ±ÄÈÉ®ÊÄßÁæ§ÁªÑ)ÔºåÂÖÅËÆ∏Êàë‰ª¨ÁöÑ ‰ΩøÁî®ËÄÖÂØπÁ≥ªÁªüÁöÑÈáçË¶ÅË°å‰∏∫ËøõË°åË∞ÉÊï¥„ÄÇ Êúâ‰∫õÊï∞ÊçÆÂ∫ìÂéÇÂïÜÂ∑≤ÁªèÂºÄÂèëÂá∫‰∫ÜÂπ∂Ë°åÁöÑÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÔºåËÉΩÂ§üÂ≠òÂÇ®Êµ∑ÈáèÁöÑÊï∞ÊçÆ„ÄÇOracle ÁöÑ RAC„Äê27„Äë‰ΩøÁî®ÂÖ±‰∫´ Á£ÅÁõòÂ≠òÂÇ®Êï∞ÊçÆ(Bigtable ‰ΩøÁî® GFS)ÔºåÂπ∂‰∏îÊúâ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÈîÅÁÆ°ÁêÜÁ≥ªÁªü(Bigtable ‰ΩøÁî® Chubby)„ÄÇIBM Âπ∂Ë°åÁâà Êú¨ÁöÑ DB2„Äê4„ÄëÂü∫‰∫é‰∏ÄÁßçÁ±ª‰ºº‰∫é Bigtable ÁöÑ„ÄÅ‰∏çÂÖ±‰∫´‰ªª‰Ωï‰∏úË•øÁöÑÊû∂ÊûÑ35„Äê33„Äë„ÄÇÊØè‰∏™ DB2 ÁöÑÊúçÂä°Âô®ÈÉΩË¥üË¥£Â§ÑÁêÜ Â≠òÂÇ®Âú®‰∏Ä‰∏™ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®‰∏≠ÁöÑË°åÁöÑ‰∏Ä‰∏™Â≠êÈõÜ„ÄÇËøô‰∫õ‰∫ßÂìÅÈÉΩÊèê‰æõ‰∫Ü‰∏Ä‰∏™Â∏¶Êúâ‰∫ãÂä°ÂäüËÉΩÁöÑÂÆåÊï¥ÁöÑÂÖ≥Á≥ªÊ®°Âûã„ÄÇ Bigtable ÈááÁî® memtable Âíå SSTable Â≠òÂÇ®ÂØπË°®ÁöÑÊõ¥Êñ∞ÁöÑÊñπÊ≥ï‰∏é Log-Structured Merge Tree„Äê26„ÄëÂ≠òÂÇ®Á¥¢ÂºïÊï∞ÊçÆÊõ¥Êñ∞ÁöÑÊñπÊ≥ïÁ±ª‰ºº„ÄÇËøô‰∏§‰∏™Á≥ªÁªü‰∏≠ÔºåÊéíÂ∫èÁöÑÊï∞ÊçÆÂú®ÂÜôÂÖ•Âà∞Á£ÅÁõòÂâçÈÉΩÂÖàÂ≠òÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåËØªÂèñÊìç‰ΩúÂøÖÈ°ª‰ªéÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏≠ÂêàÂπ∂Êï∞ÊçÆ‰∫ßÁîüÊúÄÁªàÁöÑÁªìÊûúÈõÜ„ÄÇ C-Store Âíå Bigtable ÊúâÂæàÂ§öÁõ∏‰ººÁÇπ:‰∏§‰∏™Á≥ªÁªüÈÉΩÈááÁî® Shared-nothing Êû∂ÊûÑÔºåÈÉΩÊúâ‰∏§Áßç‰∏çÂêåÁöÑÊï∞ÊçÆÁªìÊûÑÔºå‰∏Ä ÁßçÁî®‰∫éÂΩìÂâçÁöÑÂÜôÊìç‰ΩúÔºåÂè¶Â§ñ‰∏ÄÁßçÂ≠òÊîæ‚ÄúÈïøÊó∂Èó¥‰ΩøÁî®‚ÄùÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏îÊèê‰æõ‰∏ÄÁßçÊú∫Âà∂Âú®‰∏§‰∏™Â≠òÂÇ®ÁªìÊûÑÈó¥Êê¨ËøêÊï∞ÊçÆ„ÄÇ ‰∏§‰∏™Á≥ªÁªüÂú® API Êé•Âè£ÂáΩÊï∞‰∏äÊúâÂæàÂ§ßÁöÑ‰∏çÂêå:C-Store Êìç‰ΩúÊõ¥ÂÉèÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºåËÄå Bigtable Êèê‰æõ‰∫Ü‰ΩéÂ±ÇÊ¨°ÁöÑËØªÂÜô Êìç‰ΩúÊé•Âè£ÔºåÂπ∂‰∏îËÆæËÆ°ÁöÑÁõÆÊ†áÊòØËÉΩÂ§üÊîØÊåÅÊØèÂè∞ÊúçÂä°Âô®ÊØèÁßíÊï∞ÂçÉÊ¨°Êìç‰Ωú„ÄÇC-Store ÂêåÊó∂‰πüÊòØ‰∏™‚ÄúËØªÊÄßËÉΩ‰ºòÂåñÁöÑÂÖ≥Á≥ª ÂûãÊï∞ÊçÆÂ∫ì‚ÄùÔºåËÄå Bigtable ÂØπËØªÂíåÂÜôÂØÜÈõÜÂûãÂ∫îÁî®ÈÉΩÊèê‰æõ‰∫ÜÂæàÂ•ΩÁöÑÊÄßËÉΩ„ÄÇ Bigtable ‰πüÂøÖÈ°ªËß£ÂÜ≥ÊâÄÊúâÁöÑ Shared-nothing Êï∞ÊçÆÂ∫ìÈúÄË¶ÅÈù¢ÂØπÁöÑ„ÄÅÁ±ªÂûãÁõ∏‰ººÁöÑ‰∏Ä‰∫õË¥üËΩΩÂíåÂÜÖÂ≠òÂùáË°°ÊñπÈù¢ÁöÑÈöæ È¢ò(ÊØîÂ¶ÇÔºå„Äê11Ôºå35„Äë)„ÄÇÊàë‰ª¨ÁöÑÈóÆÈ¢òÂú®ÊüêÁßçÁ®ãÂ∫¶‰∏äÁÆÄÂçï‰∏Ä‰∫õ: Êàë‰ª¨‰∏çÈúÄË¶ÅËÄÉËôëÂêå‰∏Ä‰ªΩÊï∞ÊçÆÂèØËÉΩÊúâÂ§ö‰∏™Êã∑Ë¥ùÁöÑÈóÆÈ¢òÔºåÂêå‰∏Ä‰ªΩÊï∞ÊçÆÂèØËÉΩÁî±‰∫éËßÜÂõæÊàñÁ¥¢ÂºïÁöÑÂéüÂõ†‰ª•‰∏çÂêå ÁöÑÂΩ¢ÂºèË°®Áé∞Âá∫Êù•; Êàë‰ª¨ËÆ©Áî®Êà∑ÂÜ≥ÂÆöÂì™‰∫õÊï∞ÊçÆÂ∫îËØ•ÊîæÂú®ÂÜÖÂ≠òÈáå„ÄÅÂì™‰∫õÊîæÂú®Á£ÅÁõò‰∏äÔºåËÄå‰∏çÊòØÁî±Á≥ªÁªüÂä®ÊÄÅÁöÑÂà§Êñ≠; 3. Êàë‰ª¨ÁöÑÁ≥ªÁªü‰∏≠Ê≤°ÊúâÂ§çÊùÇÁöÑÊü•ËØ¢ÊâßË°åÊàñ‰ºòÂåñÂ∑•‰Ωú„ÄÇ ÁªìËÆ∫ Êàë‰ª¨Â∑≤ÁªèËÆ≤Ëø∞ÂÆå‰∫Ü BigtableÔºåGoogle ÁöÑ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÁªìÊûÑÂåñÊï∞ÊçÆÂ≠òÂÇ®Á≥ªÁªü„ÄÇBigtable ÁöÑÈõÜÁæ§‰ªé 2005 Âπ¥ 4 ÊúàÂºÄÂßãÂ∑≤ÁªèÊäïÂÖ•‰ΩøÁî®‰∫ÜÔºåÂú®Ê≠§‰πãÂâçÔºåÊàë‰ª¨Ëä±‰∫ÜÂ§ßÁ∫¶ 7 ‰∫∫Âπ¥ËÆæËÆ°ÂíåÂÆûÁé∞Ëøô‰∏™Á≥ªÁªü„ÄÇÊà™Ê≠¢Âà∞ 2006 Âπ¥ 4 ÊúàÔºåÂ∑≤ÁªèÊúâ Ë∂ÖËøá 60 ‰∏™È°πÁõÆ‰ΩøÁî® Bigtable ‰∫Ü„ÄÇÊàë‰ª¨ÁöÑÁî®Êà∑ÂØπ Bigtable Êèê‰æõÁöÑÈ´òÊÄßËÉΩÂíåÈ´òÂèØÁî®ÊÄßÂæàÊª°ÊÑèÔºåÈöèÁùÄÊó∂Èó¥ÁöÑÊé®ÁßªÔºå ‰ªñ‰ª¨ÂèØ‰ª•Ê†πÊçÆËá™Â∑±ÁöÑÁ≥ªÁªüÂØπËµÑÊ∫êÁöÑÈúÄÊ±ÇÂ¢ûÂä†ÊÉÖÂÜµÔºåÈÄöËøáÁÆÄÂçïÁöÑÂ¢ûÂä†Êú∫Âô®ÔºåÊâ©Â±ïÁ≥ªÁªüÁöÑÊâøËΩΩËÉΩÂäõ„ÄÇ Áî±‰∫é Bigtable Êèê‰æõÁöÑÁºñÁ®ãÊé•Âè£Âπ∂‰∏çÂ∏∏ËßÅÔºå‰∏Ä‰∏™ÊúâË∂£ÁöÑÈóÆÈ¢òÊòØ:Êàë‰ª¨ÁöÑÁî®Êà∑ÈÄÇÂ∫îÊñ∞ÁöÑÊé•Âè£ÊúâÂ§öÈöæ?Êñ∞ÁöÑ‰Ωø Áî®ËÄÖÊúâÊó∂‰∏çÂ§™Á°ÆÂÆö‰ΩøÁî® Bigtable Êé•Âè£ÁöÑÊúÄ‰Ω≥ÊñπÊ≥ïÔºåÁâπÂà´ÊòØÂú®‰ªñ‰ª¨Â∑≤Áªè‰π†ÊÉØ‰∫é‰ΩøÁî®ÊîØÊåÅÈÄöÁî®‰∫ãÂä°ÁöÑÂÖ≥Á≥ªÂûãÊï∞ÊçÆ Â∫ìÁöÑÊé•Âè£ÁöÑÊÉÖÂÜµ‰∏ã„ÄÇ‰ΩÜÊòØÔºåGoogle ÂÜÖÈÉ®ÂæàÂ§ö‰∫ßÂìÅÈÉΩÊàêÂäüÁöÑ‰ΩøÁî®‰∫Ü Bigtable ÁöÑ‰∫ãÂÆûËØÅÊòé‰∫ÜÔºåÊàë‰ª¨ÁöÑËÆæËÆ°Âú®ÂÆûË∑µ ‰∏≠Ë°å‰πãÊúâÊïà„ÄÇ Êàë‰ª¨Áé∞Âú®Ê≠£Âú®ÂØπ Bigtable Âä†ÂÖ•‰∏Ä‰∫õÊñ∞ÁöÑÁâπÊÄßÔºåÊØîÂ¶ÇÊîØÊåÅ‰∫åÁ∫ßÁ¥¢ÂºïÔºå‰ª•ÂèäÊîØÊåÅÂ§ö Master ËäÇÁÇπÁöÑ„ÄÅË∑®Êï∞ÊçÆ‰∏≠ÂøÉÂ§çÂà∂ÁöÑ Bigtable ÁöÑÂü∫Á°ÄÊûÑ‰ª∂„ÄÇÊàë‰ª¨Áé∞Âú®Â∑≤ÁªèÂºÄÂßãÂ∞Ü Bigtable ÈÉ®ÁΩ≤‰∏∫ÊúçÂä°‰æõÂÖ∂ÂÆÉÁöÑ‰∫ßÂìÅÂõ¢Èòü‰ΩøÁî®ÔºåËøôÊ†∑‰∏çÂêå ÁöÑ‰∫ßÂìÅÂõ¢ÈòüÂ∞±‰∏çÈúÄË¶ÅÁª¥Êä§‰ªñ‰ª¨Ëá™Â∑±ÁöÑ Bigtable ÈõÜÁæ§‰∫Ü„ÄÇÈöèÁùÄÊúçÂä°ÈõÜÁæ§ÁöÑÊâ©Â±ïÔºåÊàë‰ª¨ÈúÄË¶ÅÂú® Bigtable Á≥ªÁªüÂÜÖÈÉ®Â§ÑÁêÜÊõ¥Â§öÁöÑÂÖ≥‰∫éËµÑÊ∫êÂÖ±‰∫´ÁöÑÈóÆÈ¢ò‰∫Ü„Äê3Ôºå5„Äë„ÄÇ ÊúÄÂêéÔºåÊàë‰ª¨ÂèëÁé∞ÔºåÂª∫ËÆæ Google Ëá™Â∑±ÁöÑÂ≠òÂÇ®Ëß£ÂÜ≥ÊñπÊ°àÂ∏¶Êù•‰∫ÜÂæàÂ§ö‰ºòÂäø„ÄÇÈÄöËøá‰∏∫ Bigtable ËÆæËÆ°Êàë‰ª¨Ëá™Â∑±ÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÊòØÊàë‰ª¨ÁöÑÁ≥ªÁªüÊûÅÂÖ∑ÁÅµÊ¥ªÊÄß„ÄÇÂè¶Â§ñÔºåÁî±‰∫éÊàë‰ª¨ÂÖ®Èù¢ÊéßÂà∂ÁùÄ Bigtable ÁöÑÂÆûÁé∞ËøáÁ®ãÔºå‰ª•Âèä Bigtable ‰ΩøÁî®Âà∞ ÁöÑÂÖ∂ÂÆÉÁöÑ Google ÁöÑÂü∫Á°ÄÊûÑ‰ª∂ÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÊàë‰ª¨Âú®Á≥ªÁªüÂá∫Áé∞Áì∂È¢àÊàñÊïàÁéá‰Ωé‰∏ãÁöÑÊÉÖÂÜµÊó∂ÔºåËÉΩÂ§üÂø´ÈÄüÁöÑËß£ÂÜ≥Ëøô‰∫õÈóÆ È¢ò„ÄÇAcknowledgementsWe thank the anonymous reviewers, David Nagle, and our shepherd Brad Calder, for their feedback on this paper.The Bigtable system has benefited greatly from the feedback of our many users within Google. In addition,we thank the following people for their contributions to Bigtable: Dan Aguayo, Sameer Ajmani, Zhifeng Chen,Bill Coughran, Mike Epstein, Healfdene Goguen, Robert Griesemer, Jeremy Hylton, Josh Hyman, Alex Khesin,Joanna Kulik, Alberto Lerner, Sherry Listgarten, Mike Maloney, Eduardo Pinheiro, Kathy Polizzi, Frank Yellin,and Arthur Zwiegincew.References[1] ABADI, D. J., MADDEN, S. R., AND FERREIRA, M. C. Integrating compression and execution in columnoriented database systems. Proc. of SIGMOD (2006).[2] AILAMAKI, A., DEWITT, D. J., HILL, M. D., AND SKOUNAKIS, M. Weaving relations for cache performance.In The VLDB Journal (2001), pp. 169-180.[3] BANGA, G., DRUSCHEL, P., AND MOGUL, J. C. Resource containers: A new facility for resource management in server systems. In Proc. of the 3rd OSDI (Feb. 1999), pp. 45-58.[4] BARU, C. K., FECTEAU, G., GOYAL, A., HSIAO, H., JHINGRAN, A., PADMANABHAN, S., COPELAND,G. P., AND WILSON, W. G. DB2 parallel edition. IBM Systems Journal 34, 2 (1995), 292-322.[5] BAVIER, A., BOWMAN, M., CHUN, B., CULLER, D., KARLIN, S., PETERSON, L., ROSCOE, T., SPALINK, T., AND WAWRZONIAK, M. Operating system support for planetary-scale network services. In Proc. of the 1st NSDI(Mar. 2004), pp. 253-266.[6] BENTLEY, J. L., AND MCILROY, M. D. Data compression using long common strings. In Data Compression Conference (1999), pp. 287-295.[7] BLOOM, B. H. Space/time trade-offs in hash coding with allowable errors. CACM 13, 7 (1970), 422-426.[8] BURROWS, M. The Chubby lock service for looselycoupled distributed systems. In Proc. of the 7th OSDI (Nov. 2006).[9] CHANDRA, T., GRIESEMER, R., AND REDSTONE, J.Paxos made live ? An engineering perspective. In Proc. of PODC (2007).[10] COMER, D. Ubiquitous B-tree. Computing Surveys 11, 2 (June 1979), 121-137.[11] COPELAND, G. P., ALEXANDER, W., BOUGHTER, E. E., AND KELLER, T. W. Data placement in Bubba. In Proc. of SIGMOD (1988), pp. 99-108.[12] DEAN, J., AND GHEMAWAT, S. MapReduce: Simplified data processing on large clusters. In Proc. of the 6th OSDI (Dec. 2004), pp. 137-150.[13] DEWITT, D., KATZ, R., OLKEN, F., SHAPIRO, L., STONEBRAKER, M., AND WOOD, D. Implementation techniques for main memory database systems. In Proc. of SIGMOD (June 1984), pp. 1-8.[14] DEWITT, D. J., AND GRAY, J. Parallel database systems: The future of high performance database systems. CACM 35, 6 (June 1992), 85-98.[15] FRENCH, C. D. One size ts all database architectures do not work for DSS. In Proc. of SIGMOD (May 1995), pp. 449-450.[16] GAWLICK, D., AND KINKADE, D. Varieties of concurrency control in IMS/VS fast path. Database Engineering Bulletin 8, 2 (1985), 3-10.[17] GHEMAWAT, S., GOBIOFF, H., AND LEUNG, S.-T. The Google file system. In Proc. of the 19th ACM SOSP (Dec.2003), pp. 29-43.[18] GRAY, J. Notes on database operating systems. In Operating Systems ? An Advanced Course, vol. 60 of Lecture Notes in Computer Science. Springer-Verlag, 1978.[19] GREER, R. Daytona and the fourth-generation language Cymbal. In Proc. of SIGMOD (1999), pp. 525-526.[20] HAGMANN, R. Reimplementing the Cedar file system using logging and group commit. In Proc. of the 11th SOSP (Dec. 1987), pp. 155-162.[21] HARTMAN, J. H., AND OUSTERHOUT, J. K. The Zebra striped network file system. In Proc. of the 14th SOSP(Asheville, NC, 1993), pp. 29-43.[22] KX.COM. kx.com/products/database.php. Product page.[23] LAMPORT, L. The part-time parliament. ACM TOCS 16,2 (1998), 133-169.[24] MACCORMICK, J., MURPHY, N., NAJORK, M., THEKKATH, C. A., AND ZHOU, L.Boxwood:Abstractions as the foundation for storage infrastructure. In Proc. of the 6th OSDI (Dec. 2004), pp. 105-120.[25] MCCARTHY, J. Recursive functions of symbolic expressions and their computation by machine. CACM 3,4 (Apr. 1960), 184-195.[26] O‚ÄôNEIL, P., CHENG, E., GAWLICK, D., AND O‚ÄôNEIL, E. The log-structured merge-tree (LSM-tree).Acta Inf. 33, 4 (1996), 351-385.[27] ORACLE.COM. www.oracle.com/technology/products/database/clustering/index.html. Product page.[28] PIKE, R., DORWARD, S., GRIESEMER, R., AND QUINLAN, S. Interpreting the data: Parallel analysiswith Sawzall. Scientific Programming Journal 13, 4 (2005), 227-298.[29] RATNASAMY, S., FRANCIS, P., HANDLEY, M., KARP, R., AND SHENKER, S. A scalablecontent-addressable network. In Proc. of SIGCOMM (Aug. 2001), pp. 161-172.[30] ROWSTRON, A., AND DRUSCHEL, P. Pastry: Scalable, distributed object location and routing forlargescale peer-to-peer systems. In Proc. of Middleware 2001(Nov. 2001), pp. 329-350.[31] SENSAGE.COM. sensage.com/products-sensage.htm. Product page.[32] STOICA, I., MORRIS, R., KARGER, D., KAASHOEK, M. F., AND BALAKRISHNAN, H. Chord: Ascalable peer-to-peer lookup service for Internet applications. In Proc. of SIGCOMM (Aug. 2001), pp. 149-160.[33] STONEBRAKER, M. The case for shared nothing. Database Engineering Bulletin 9, 1 (Mar. 1986), 4-9. [34] STONEBRAKER,M., ABADI, D. J., BATKIN, A., CHEN, X., CHERNIACK, M., FERREIRA, M., LAU,E., LIN, A., MADDEN, S., O‚ÄôNEIL, E., O‚ÄôNEIL, P., RASIN, A., TRAN, N., AND ZDONIK, S. C-Store: A columnoriented DBMS. In Proc. of VLDB (Aug. 2005), pp. 553-564.[35] STONEBRAKER, M., AOKI, P. M., DEVINE, R., LITWIN, W., AND OLSON, M. A. Mariposa: A new architecture for distributed data. In Proc. of the Tenth ICDE(1994), IEEE Computer Society, pp. 54-65.[36] SYBASE.COM. www.sybase.com/products/databaseservers/sybaseiq. Product page.[37] ZHAO, B. Y., KUBIATOWICZ, J., AND JOSEPH, A. D. Tapestry: An infrastructure for fault-tolerant wide-area location and routing. Tech. Rep. UCB/CSD-01-1141, CS Division, UC Berkeley, Apr. 2001.[38] ZUKOWSKI, M., BONCZ, P. A., NES, N., AND HEMAN, S. MonetDB/X100 ?A DBMS in the CPU cache. IEEE Data Eng. Bull. 28, 2 (2005), 17-22.","raw":null,"content":null,"categories":[{"name":"paper","slug":"paper","permalink":"https://stanxia.github.io/categories/paper/"}],"tags":[{"name":"paper","slug":"paper","permalink":"https://stanxia.github.io/tags/paper/"}]},{"title":"Google MapReduce ‰∏≠ÊñáÁâà","slug":"Google-MapReduce-‰∏≠ÊñáÁâà","date":"2017-12-16T10:06:41.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/16/Google-MapReduce-‰∏≠ÊñáÁâà/","link":"","permalink":"https://stanxia.github.io/2017/12/16/Google-MapReduce-‰∏≠ÊñáÁâà/","excerpt":"ÊëòË¶Å\nMapReduce ÊòØ‰∏Ä‰∏™ÁºñÁ®ãÊ®°ÂûãÔºå‰πüÊòØ‰∏Ä‰∏™Â§ÑÁêÜÂíåÁîüÊàêË∂ÖÂ§ßÊï∞ÊçÆÈõÜÁöÑÁÆóÊ≥ïÊ®°ÂûãÁöÑÁõ∏ÂÖ≥ÂÆûÁé∞„ÄÇÁî®Êà∑È¶ñÂÖàÂàõÂª∫‰∏Ä ‰∏™ Map ÂáΩÊï∞Â§ÑÁêÜ‰∏Ä‰∏™Âü∫‰∫é key/value pair ÁöÑÊï∞ÊçÆÈõÜÂêàÔºåËæìÂá∫‰∏≠Èó¥ÁöÑÂü∫‰∫é key/value pair ÁöÑÊï∞ÊçÆÈõÜÂêà;ÁÑ∂ÂêéÂÜçÂàõÂª∫ ‰∏Ä‰∏™ Reduce ÂáΩÊï∞Áî®Êù•ÂêàÂπ∂ÊâÄÊúâÁöÑÂÖ∑ÊúâÁõ∏Âêå‰∏≠Èó¥ key ÂÄºÁöÑ‰∏≠Èó¥ value ÂÄº„ÄÇÁé∞ÂÆû‰∏ñÁïå‰∏≠ÊúâÂæàÂ§öÊª°Ë∂≥‰∏äËø∞Â§ÑÁêÜÊ®°Âûã ÁöÑ‰æãÂ≠êÔºåÊú¨ËÆ∫ÊñáÂ∞ÜËØ¶ÁªÜÊèèËø∞Ëøô‰∏™Ê®°Âûã„ÄÇ\nMapReduce Êû∂ÊûÑÁöÑÁ®ãÂ∫èËÉΩÂ§üÂú®Â§ßÈáèÁöÑÊôÆÈÄöÈÖçÁΩÆÁöÑËÆ°ÁÆóÊú∫‰∏äÂÆûÁé∞Âπ∂Ë°åÂåñÂ§ÑÁêÜ„ÄÇËøô‰∏™Á≥ªÁªüÂú®ËøêË°åÊó∂Âè™ÂÖ≥ÂøÉ: Â¶Ç‰ΩïÂàÜÂâ≤ËæìÂÖ•Êï∞ÊçÆÔºåÂú®Â§ßÈáèËÆ°ÁÆóÊú∫ÁªÑÊàêÁöÑÈõÜÁæ§‰∏äÁöÑË∞ÉÂ∫¶ÔºåÈõÜÁæ§‰∏≠ËÆ°ÁÆóÊú∫ÁöÑÈîôËØØÂ§ÑÁêÜÔºåÁÆ°ÁêÜÈõÜÁæ§‰∏≠ËÆ°ÁÆóÊú∫‰πãÈó¥ ÂøÖË¶ÅÁöÑÈÄö‰ø°„ÄÇÈááÁî® MapReduce Êû∂ÊûÑÂèØ‰ª•‰ΩøÈÇ£‰∫õÊ≤°ÊúâÂπ∂Ë°åËÆ°ÁÆóÂíåÂàÜÂ∏ÉÂºèÂ§ÑÁêÜÁ≥ªÁªüÂºÄÂèëÁªèÈ™åÁöÑÁ®ãÂ∫èÂëòÊúâÊïàÂà©Áî®ÂàÜ Â∏ÉÂºèÁ≥ªÁªüÁöÑ‰∏∞ÂØåËµÑÊ∫ê„ÄÇ\nÊàë‰ª¨ÁöÑ MapReduce ÂÆûÁé∞ËøêË°åÂú®ËßÑÊ®°ÂèØ‰ª•ÁÅµÊ¥ªË∞ÉÊï¥ÁöÑÁî±ÊôÆÈÄöÊú∫Âô®ÁªÑÊàêÁöÑÈõÜÁæ§‰∏ä:‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ MapReduce ËÆ°ÁÆóÂæÄÂæÄÁî±Âá†ÂçÉÂè∞Êú∫Âô®ÁªÑÊàê„ÄÅÂ§ÑÁêÜ‰ª• TB ËÆ°ÁÆóÁöÑÊï∞ÊçÆ„ÄÇÁ®ãÂ∫èÂëòÂèëÁé∞Ëøô‰∏™Á≥ªÁªüÈùûÂ∏∏Â•ΩÁî®:Â∑≤ÁªèÂÆûÁé∞‰∫ÜÊï∞‰ª•ÁôæËÆ° ÁöÑ MapReduce Á®ãÂ∫èÔºåÂú® Google ÁöÑÈõÜÁæ§‰∏äÔºåÊØèÂ§©ÈÉΩÊúâ 1000 Â§ö‰∏™ MapReduce Á®ãÂ∫èÂú®ÊâßË°å„ÄÇ","text":"ÊëòË¶Å MapReduce ÊòØ‰∏Ä‰∏™ÁºñÁ®ãÊ®°ÂûãÔºå‰πüÊòØ‰∏Ä‰∏™Â§ÑÁêÜÂíåÁîüÊàêË∂ÖÂ§ßÊï∞ÊçÆÈõÜÁöÑÁÆóÊ≥ïÊ®°ÂûãÁöÑÁõ∏ÂÖ≥ÂÆûÁé∞„ÄÇÁî®Êà∑È¶ñÂÖàÂàõÂª∫‰∏Ä ‰∏™ Map ÂáΩÊï∞Â§ÑÁêÜ‰∏Ä‰∏™Âü∫‰∫é key/value pair ÁöÑÊï∞ÊçÆÈõÜÂêàÔºåËæìÂá∫‰∏≠Èó¥ÁöÑÂü∫‰∫é key/value pair ÁöÑÊï∞ÊçÆÈõÜÂêà;ÁÑ∂ÂêéÂÜçÂàõÂª∫ ‰∏Ä‰∏™ Reduce ÂáΩÊï∞Áî®Êù•ÂêàÂπ∂ÊâÄÊúâÁöÑÂÖ∑ÊúâÁõ∏Âêå‰∏≠Èó¥ key ÂÄºÁöÑ‰∏≠Èó¥ value ÂÄº„ÄÇÁé∞ÂÆû‰∏ñÁïå‰∏≠ÊúâÂæàÂ§öÊª°Ë∂≥‰∏äËø∞Â§ÑÁêÜÊ®°Âûã ÁöÑ‰æãÂ≠êÔºåÊú¨ËÆ∫ÊñáÂ∞ÜËØ¶ÁªÜÊèèËø∞Ëøô‰∏™Ê®°Âûã„ÄÇ MapReduce Êû∂ÊûÑÁöÑÁ®ãÂ∫èËÉΩÂ§üÂú®Â§ßÈáèÁöÑÊôÆÈÄöÈÖçÁΩÆÁöÑËÆ°ÁÆóÊú∫‰∏äÂÆûÁé∞Âπ∂Ë°åÂåñÂ§ÑÁêÜ„ÄÇËøô‰∏™Á≥ªÁªüÂú®ËøêË°åÊó∂Âè™ÂÖ≥ÂøÉ: Â¶Ç‰ΩïÂàÜÂâ≤ËæìÂÖ•Êï∞ÊçÆÔºåÂú®Â§ßÈáèËÆ°ÁÆóÊú∫ÁªÑÊàêÁöÑÈõÜÁæ§‰∏äÁöÑË∞ÉÂ∫¶ÔºåÈõÜÁæ§‰∏≠ËÆ°ÁÆóÊú∫ÁöÑÈîôËØØÂ§ÑÁêÜÔºåÁÆ°ÁêÜÈõÜÁæ§‰∏≠ËÆ°ÁÆóÊú∫‰πãÈó¥ ÂøÖË¶ÅÁöÑÈÄö‰ø°„ÄÇÈááÁî® MapReduce Êû∂ÊûÑÂèØ‰ª•‰ΩøÈÇ£‰∫õÊ≤°ÊúâÂπ∂Ë°åËÆ°ÁÆóÂíåÂàÜÂ∏ÉÂºèÂ§ÑÁêÜÁ≥ªÁªüÂºÄÂèëÁªèÈ™åÁöÑÁ®ãÂ∫èÂëòÊúâÊïàÂà©Áî®ÂàÜ Â∏ÉÂºèÁ≥ªÁªüÁöÑ‰∏∞ÂØåËµÑÊ∫ê„ÄÇ Êàë‰ª¨ÁöÑ MapReduce ÂÆûÁé∞ËøêË°åÂú®ËßÑÊ®°ÂèØ‰ª•ÁÅµÊ¥ªË∞ÉÊï¥ÁöÑÁî±ÊôÆÈÄöÊú∫Âô®ÁªÑÊàêÁöÑÈõÜÁæ§‰∏ä:‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑ MapReduce ËÆ°ÁÆóÂæÄÂæÄÁî±Âá†ÂçÉÂè∞Êú∫Âô®ÁªÑÊàê„ÄÅÂ§ÑÁêÜ‰ª• TB ËÆ°ÁÆóÁöÑÊï∞ÊçÆ„ÄÇÁ®ãÂ∫èÂëòÂèëÁé∞Ëøô‰∏™Á≥ªÁªüÈùûÂ∏∏Â•ΩÁî®:Â∑≤ÁªèÂÆûÁé∞‰∫ÜÊï∞‰ª•ÁôæËÆ° ÁöÑ MapReduce Á®ãÂ∫èÔºåÂú® Google ÁöÑÈõÜÁæ§‰∏äÔºåÊØèÂ§©ÈÉΩÊúâ 1000 Â§ö‰∏™ MapReduce Á®ãÂ∫èÂú®ÊâßË°å„ÄÇ ‰ªãÁªçÂú®ËøáÂéªÁöÑ 5 Âπ¥ÈáåÔºåÂåÖÊã¨Êú¨Êñá‰ΩúËÄÖÂú®ÂÜÖÁöÑ Google ÁöÑÂæàÂ§öÁ®ãÂ∫èÂëòÔºå‰∏∫‰∫ÜÂ§ÑÁêÜÊµ∑ÈáèÁöÑÂéüÂßãÊï∞ÊçÆÔºåÂ∑≤ÁªèÂÆûÁé∞‰∫ÜÊï∞ ‰ª•ÁôæËÆ°ÁöÑ„ÄÅ‰∏ìÁî®ÁöÑËÆ°ÁÆóÊñπÊ≥ï„ÄÇËøô‰∫õËÆ°ÁÆóÊñπÊ≥ïÁî®Êù•Â§ÑÁêÜÂ§ßÈáèÁöÑÂéüÂßãÊï∞ÊçÆÔºåÊØîÂ¶ÇÔºåÊñáÊ°£ÊäìÂèñ(Á±ª‰ººÁΩëÁªúÁà¨Ëô´ÁöÑÁ®ã Â∫è)„ÄÅWeb ËØ∑Ê±ÇÊó•ÂøóÁ≠âÁ≠â;‰πü‰∏∫‰∫ÜËÆ°ÁÆóÂ§ÑÁêÜÂêÑÁßçÁ±ªÂûãÁöÑË°çÁîüÊï∞ÊçÆÔºåÊØîÂ¶ÇÂÄíÊéíÁ¥¢Âºï„ÄÅWeb ÊñáÊ°£ÁöÑÂõæÁªìÊûÑÁöÑÂêÑÁßçË°® Á§∫ÂΩ¢Âäø„ÄÅÊØèÂè∞‰∏ªÊú∫‰∏äÁΩëÁªúÁà¨Ëô´ÊäìÂèñÁöÑÈ°µÈù¢Êï∞ÈáèÁöÑÊ±áÊÄª„ÄÅÊØèÂ§©Ë¢´ËØ∑Ê±ÇÁöÑÊúÄÂ§öÁöÑÊü•ËØ¢ÁöÑÈõÜÂêàÁ≠âÁ≠â„ÄÇÂ§ßÂ§öÊï∞ËøôÊ†∑ÁöÑ Êï∞ÊçÆÂ§ÑÁêÜËøêÁÆóÂú®Ê¶ÇÂøµ‰∏äÂæàÂÆπÊòìÁêÜËß£„ÄÇÁÑ∂ËÄåÁî±‰∫éËæìÂÖ•ÁöÑÊï∞ÊçÆÈáèÂ∑®Â§ßÔºåÂõ†Ê≠§Ë¶ÅÊÉ≥Âú®ÂèØÊé•ÂèóÁöÑÊó∂Èó¥ÂÜÖÂÆåÊàêËøêÁÆóÔºåÂè™ ÊúâÂ∞ÜËøô‰∫õËÆ°ÁÆóÂàÜÂ∏ÉÂú®ÊàêÁôæ‰∏äÂçÉÁöÑ‰∏ªÊú∫‰∏ä„ÄÇÂ¶Ç‰ΩïÂ§ÑÁêÜÂπ∂Ë°åËÆ°ÁÆó„ÄÅÂ¶Ç‰ΩïÂàÜÂèëÊï∞ÊçÆ„ÄÅÂ¶Ç‰ΩïÂ§ÑÁêÜÈîôËØØ?ÊâÄÊúâËøô‰∫õÈóÆÈ¢ò ÁªºÂêàÂú®‰∏ÄËµ∑ÔºåÈúÄË¶ÅÂ§ßÈáèÁöÑ‰ª£Á†ÅÂ§ÑÁêÜÔºåÂõ†Ê≠§‰πü‰ΩøÂæóÂéüÊú¨ÁÆÄÂçïÁöÑËøêÁÆóÂèòÂæóÈöæ‰ª•Â§ÑÁêÜ„ÄÇ ‰∏∫‰∫ÜËß£ÂÜ≥‰∏äËø∞Â§çÊùÇÁöÑÈóÆÈ¢òÔºåÊàë‰ª¨ËÆæËÆ°‰∏Ä‰∏™Êñ∞ÁöÑÊäΩË±°Ê®°ÂûãÔºå‰ΩøÁî®Ëøô‰∏™ÊäΩË±°Ê®°ÂûãÔºåÊàë‰ª¨Âè™Ë¶ÅË°®Ëø∞Êàë‰ª¨ÊÉ≥Ë¶ÅÊâß Ë°åÁöÑÁÆÄÂçïËøêÁÆóÂç≥ÂèØÔºåËÄå‰∏çÂøÖÂÖ≥ÂøÉÂπ∂Ë°åËÆ°ÁÆó„ÄÅÂÆπÈîô„ÄÅÊï∞ÊçÆÂàÜÂ∏É„ÄÅË¥üËΩΩÂùáË°°Á≠âÂ§çÊùÇÁöÑÁªÜËäÇÔºåËøô‰∫õÈóÆÈ¢òÈÉΩË¢´Â∞ÅË£ÖÂú® ‰∫Ü‰∏Ä‰∏™Â∫ìÈáåÈù¢„ÄÇËÆæËÆ°Ëøô‰∏™ÊäΩË±°Ê®°ÂûãÁöÑÁÅµÊÑüÊù•Ëá™ Lisp ÂíåËÆ∏Â§öÂÖ∂‰ªñÂáΩÊï∞ÂºèËØ≠Ë®ÄÁöÑ Map Âíå Reduce ÁöÑÂéüËØ≠„ÄÇÊàë‰ª¨ÊÑè ËØÜÂà∞Êàë‰ª¨Â§ßÂ§öÊï∞ÁöÑËøêÁÆóÈÉΩÂåÖÂê´ËøôÊ†∑ÁöÑÊìç‰Ωú:Âú®ËæìÂÖ•Êï∞ÊçÆÁöÑ‚ÄúÈÄªËæë‚ÄùËÆ∞ÂΩï‰∏äÂ∫îÁî® Map Êìç‰ΩúÂæóÂá∫‰∏Ä‰∏™‰∏≠Èó¥ key/value pair ÈõÜÂêàÔºåÁÑ∂ÂêéÂú®ÊâÄÊúâÂÖ∑ÊúâÁõ∏Âêå key ÂÄºÁöÑ value ÂÄº‰∏äÂ∫îÁî® Reduce Êìç‰ΩúÔºå‰ªéËÄåËææÂà∞ÂêàÂπ∂‰∏≠Èó¥ÁöÑÊï∞ÊçÆÔºåÂæóÂà∞‰∏Ä‰∏™ÊÉ≥Ë¶ÅÁöÑÁªìÊûúÁöÑÁõÆÁöÑ„ÄÇ‰ΩøÁî® MapReduce Ê®°ÂûãÔºåÂÜçÁªìÂêàÁî®Êà∑ÂÆûÁé∞ÁöÑ Map Âíå Reduce ÂáΩÊï∞ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÈùûÂ∏∏ÂÆπÊòìÁöÑ ÂÆûÁé∞Â§ßËßÑÊ®°Âπ∂Ë°åÂåñËÆ°ÁÆó;ÈÄöËøá MapReduce Ê®°ÂûãËá™Â∏¶ÁöÑ‚ÄúÂÜçÊ¨°ÊâßË°å‚Äù(re-execution)ÂäüËÉΩÔºå‰πüÊèê‰æõ‰∫ÜÂàùÁ∫ßÁöÑÂÆπÁÅæÂÆûÁé∞ÊñπÊ°à„ÄÇ Ëøô‰∏™Â∑•‰Ωú(ÂÆûÁé∞‰∏Ä‰∏™ MapReduce Ê°ÜÊû∂Ê®°Âûã)ÁöÑ‰∏ªË¶ÅË¥°ÁåÆÊòØÈÄöËøáÁÆÄÂçïÁöÑÊé•Âè£Êù•ÂÆûÁé∞Ëá™Âä®ÁöÑÂπ∂Ë°åÂåñÂíåÂ§ßËßÑÊ®°ÁöÑÂàÜÂ∏ÉÂºèËÆ°ÁÆóÔºåÈÄöËøá‰ΩøÁî® MapReduce Ê®°ÂûãÊé•Âè£ÂÆûÁé∞Âú®Â§ßÈáèÊôÆÈÄöÁöÑ PC Êú∫‰∏äÈ´òÊÄßËÉΩËÆ°ÁÆó„ÄÇ Á¨¨‰∫åÈÉ®ÂàÜÊèèËø∞Âü∫Êú¨ÁöÑÁºñÁ®ãÊ®°ÂûãÂíå‰∏Ä‰∫õ‰ΩøÁî®Ê°à‰æã„ÄÇ Á¨¨‰∏âÈÉ®ÂàÜÊèèËø∞‰∫Ü‰∏Ä‰∏™ÁªèËøáË£ÅÂâ™ÁöÑ„ÄÅÈÄÇÂêàÊàë‰ª¨ÁöÑÂü∫‰∫éÈõÜÁæ§ÁöÑËÆ°ÁÆóÁéØÂ¢ÉÁöÑ MapReduce ÂÆûÁé∞„ÄÇ Á¨¨ÂõõÈÉ®ÂàÜÊèèËø∞Êàë‰ª¨ËÆ§‰∏∫Âú® MapReduce ÁºñÁ®ãÊ®°Âûã‰∏≠‰∏Ä‰∫õÂÆûÁî®ÁöÑÊäÄÂ∑ß„ÄÇ Á¨¨‰∫îÈÉ®ÂàÜÂØπ‰∫éÂêÑÁßç‰∏çÂêåÁöÑ‰ªªÂä°ÔºåÊµãÈáèÊàë‰ª¨ MapReduce ÂÆûÁé∞ÁöÑÊÄßËÉΩ„ÄÇ Á¨¨ÂÖ≠ÈÉ®ÂàÜÊè≠Á§∫‰∫ÜÂú® Google ÂÜÖÈÉ®Â¶Ç‰Ωï‰ΩøÁî® MapReduce ‰Ωú‰∏∫Âü∫Á°ÄÈáçÂÜôÊàë‰ª¨ÁöÑÁ¥¢ÂºïÁ≥ªÁªü‰∫ßÂìÅÔºåÂåÖÊã¨ÂÖ∂ÂÆÉ‰∏Ä‰∫õ ‰ΩøÁî® MapReduce ÁöÑÁªèÈ™å„ÄÇ Á¨¨‰∏ÉÈÉ®ÂàÜËÆ®ËÆ∫Áõ∏ÂÖ≥ÁöÑÂíåÊú™Êù•ÁöÑÂ∑•‰Ωú„ÄÇ ÁºñÁ®ãÊ®°Âûã MapReduce ÁºñÁ®ãÊ®°ÂûãÁöÑÂéüÁêÜÊòØ:Âà©Áî®‰∏Ä‰∏™ËæìÂÖ• key/value pair ÈõÜÂêàÊù•‰∫ßÁîü‰∏Ä‰∏™ËæìÂá∫ÁöÑ key/value pair ÈõÜÂêà„ÄÇ MapReduce Â∫ìÁöÑÁî®Êà∑Áî®‰∏§‰∏™ÂáΩÊï∞Ë°®ËææËøô‰∏™ËÆ°ÁÆó:Map Âíå Reduce„ÄÇ Áî®Êà∑Ëá™ÂÆö‰πâÁöÑ Map ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™ËæìÂÖ•ÁöÑ key/value pair ÂÄºÔºåÁÑ∂Âêé‰∫ßÁîü‰∏Ä‰∏™‰∏≠Èó¥ key/value pair ÂÄºÁöÑÈõÜÂêà„ÄÇ MapReduce Â∫ìÊääÊâÄÊúâÂÖ∑ÊúâÁõ∏Âêå‰∏≠Èó¥ key ÂÄº I ÁöÑ‰∏≠Èó¥ value ÂÄºÈõÜÂêàÂú®‰∏ÄËµ∑Âêé‰º†ÈÄíÁªô reduce ÂáΩÊï∞„ÄÇ Áî®Êà∑Ëá™ÂÆö‰πâÁöÑ Reduce ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™‰∏≠Èó¥ key ÁöÑÂÄº I ÂíåÁõ∏ÂÖ≥ÁöÑ‰∏Ä‰∏™ value ÂÄºÁöÑÈõÜÂêà„ÄÇReduce ÂáΩÊï∞ÂêàÂπ∂Ëøô‰∫õ value ÂÄºÔºåÂΩ¢Êàê‰∏Ä‰∏™ËæÉÂ∞èÁöÑ value ÂÄºÁöÑÈõÜÂêà„ÄÇ‰∏ÄËà¨ÁöÑÔºåÊØèÊ¨° Reduce ÂáΩÊï∞Ë∞ÉÁî®Âè™‰∫ßÁîü 0 Êàñ 1 ‰∏™ËæìÂá∫ value ÂÄº„ÄÇÈÄö Â∏∏Êàë‰ª¨ÈÄöËøá‰∏Ä‰∏™Ëø≠‰ª£Âô®Êää‰∏≠Èó¥ value ÂÄºÊèê‰æõÁªô Reduce ÂáΩÊï∞ÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•Â§ÑÁêÜÊó†Ê≥ïÂÖ®ÈÉ®ÊîæÂÖ•ÂÜÖÂ≠ò‰∏≠ÁöÑÂ§ßÈáè ÁöÑ value ÂÄºÁöÑÈõÜÂêà„ÄÇ ‰æãÂ≠ê‰æãÂ¶ÇÔºåËÆ°ÁÆó‰∏Ä‰∏™Â§ßÁöÑÊñáÊ°£ÈõÜÂêà‰∏≠ÊØè‰∏™ÂçïËØçÂá∫Áé∞ÁöÑÊ¨°Êï∞Ôºå‰∏ãÈù¢ÊòØ‰º™‰ª£Á†ÅÊÆµ: `map(String key, String value): // key: document name // value: document contents for each word w in value: EmitIntermediate(w, ‚Äú1‚Ä≤‚Ä≤); reduce(String key, Iterator values): // key: a word // values: a list of counts int result = 0; for each v in values: result += ParseInt(v); Emit(AsString(result));12Map ÂáΩÊï∞ËæìÂá∫ÊñáÊ°£‰∏≠ÁöÑÊØè‰∏™ËØç„ÄÅ‰ª•ÂèäËøô‰∏™ËØçÁöÑÂá∫Áé∞Ê¨°Êï∞(Âú®Ëøô‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÈáåÂ∞±ÊòØ 1)„ÄÇReduce ÂáΩÊï∞Êää Map ÂáΩÊï∞‰∫ßÁîüÁöÑÊØè‰∏Ä‰∏™ÁâπÂÆöÁöÑËØçÁöÑËÆ°Êï∞Á¥ØÂä†Ëµ∑Êù•„ÄÇ Âè¶Â§ñÔºåÁî®Êà∑ÁºñÂÜô‰ª£Á†ÅÔºå‰ΩøÁî®ËæìÂÖ•ÂíåËæìÂá∫Êñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÅÂèØÈÄâÁöÑË∞ÉËäÇÂèÇÊï∞Êù•ÂÆåÊàê‰∏Ä‰∏™Á¨¶Âêà MapReduce Ê®°ÂûãËßÑ ËåÉÁöÑÂØπË±°ÔºåÁÑ∂ÂêéË∞ÉÁî® MapReduce ÂáΩÊï∞ÔºåÂπ∂ÊääËøô‰∏™ËßÑËåÉÂØπË±°‰º†ÈÄíÁªôÂÆÉ„ÄÇÁî®Êà∑ÁöÑ‰ª£Á†ÅÂíå MapReduce Â∫ìÈìæÊé•Âú®‰∏ÄËµ∑ (Áî® C++ÂÆûÁé∞)„ÄÇÈôÑÂΩï A ÂåÖÂê´‰∫ÜËøô‰∏™ÂÆû‰æãÁöÑÂÖ®ÈÉ®Á®ãÂ∫è‰ª£Á†Å„ÄÇ ### Á±ªÂûã Â∞ΩÁÆ°Âú®ÂâçÈù¢‰æãÂ≠êÁöÑ‰º™‰ª£Á†Å‰∏≠‰ΩøÁî®‰∫Ü‰ª•Â≠óÁ¨¶‰∏≤Ë°®Á§∫ÁöÑËæìÂÖ•ËæìÂá∫ÂÄºÔºå‰ΩÜÊòØÂú®Ê¶ÇÂøµ‰∏äÔºåÁî®Êà∑ÂÆö‰πâÁöÑ Map Âíå Reduce ÂáΩÊï∞ÈÉΩÊúâÁõ∏ÂÖ≥ËÅîÁöÑÁ±ªÂûã: map(k1,v1) -&gt;list(k2,v2)reduce(k2,list(v2)) -&gt;list(v2)1234567891011121314 ÊØîÂ¶ÇÔºåËæìÂÖ•ÁöÑ key Âíå value ÂÄº‰∏éËæìÂá∫ÁöÑ key Âíå value ÂÄºÂú®Á±ªÂûã‰∏äÊé®ÂØºÁöÑÂüü‰∏çÂêå„ÄÇÊ≠§Â§ñÔºå‰∏≠Èó¥ key Âíå value ÂÄº‰∏éËæìÂá∫ key Âíå value ÂÄºÂú®Á±ªÂûã‰∏äÊé®ÂØºÁöÑÂüüÁõ∏Âêå„ÄÇ Êàë‰ª¨ÁöÑ C++‰∏≠‰ΩøÁî®Â≠óÁ¨¶‰∏≤Á±ªÂûã‰Ωú‰∏∫Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÁöÑËæìÂÖ•ËæìÂá∫ÔºåÁî®Êà∑Âú®Ëá™Â∑±ÁöÑ‰ª£Á†Å‰∏≠ÂØπÂ≠óÁ¨¶‰∏≤ËøõË°åÈÄÇÂΩì ÁöÑÁ±ªÂûãËΩ¨Êç¢„ÄÇ ### Êõ¥Â§öÁöÑ‰æãÂ≠ê ËøôÈáåËøòÊúâ‰∏Ä‰∫õÊúâË∂£ÁöÑÁÆÄÂçï‰æãÂ≠êÔºåÂèØ‰ª•ÂæàÂÆπÊòìÁöÑ‰ΩøÁî® MapReduce Ê®°ÂûãÊù•Ë°®Á§∫: ÂàÜÂ∏ÉÂºèÁöÑ Grep:Map ÂáΩÊï∞ËæìÂá∫ÂåπÈÖçÊüê‰∏™Ê®°ÂºèÁöÑ‰∏ÄË°åÔºåReduce ÂáΩÊï∞ÊòØ‰∏Ä‰∏™ÊÅíÁ≠âÂáΩÊï∞ÔºåÂç≥Êää‰∏≠Èó¥Êï∞ÊçÆÂ§çÂà∂Âà∞ ËæìÂá∫„ÄÇ ËÆ°ÁÆó URL ËÆøÈóÆÈ¢ëÁéá:Map ÂáΩÊï∞Â§ÑÁêÜÊó•Âøó‰∏≠ web È°µÈù¢ËØ∑Ê±ÇÁöÑËÆ∞ÂΩïÔºåÁÑ∂ÂêéËæìÂá∫(URL,1)„ÄÇReduce ÂáΩÊï∞ÊääÁõ∏ÂêåURL ÁöÑ value ÂÄºÈÉΩÁ¥ØÂä†Ëµ∑Êù•Ôºå‰∫ßÁîü(URL,ËÆ∞ÂΩïÊÄªÊï∞)ÁªìÊûú„ÄÇ ÂÄíËΩ¨ÁΩëÁªúÈìæÊé•Âõæ:Map ÂáΩÊï∞Âú®Ê∫êÈ°µÈù¢(source)‰∏≠ÊêúÁ¥¢ÊâÄÊúâÁöÑÈìæÊé•ÁõÆÊ†á(target)Âπ∂ËæìÂá∫‰∏∫(target,source)„ÄÇReduce ÂáΩÊï∞ÊääÁªôÂÆöÈìæÊé•ÁõÆÊ†á(target)ÁöÑÈìæÊé•ÁªÑÂêàÊàê‰∏Ä‰∏™ÂàóË°®ÔºåËæìÂá∫(target,list(source))„ÄÇ ÊØè‰∏™‰∏ªÊú∫ÁöÑÊ£ÄÁ¥¢ËØçÂêëÈáè:Ê£ÄÁ¥¢ËØçÂêëÈáèÁî®‰∏Ä‰∏™(ËØç,È¢ëÁéá)ÂàóË°®Êù•Ê¶ÇËø∞Âá∫Áé∞Âú®ÊñáÊ°£ÊàñÊñáÊ°£ÈõÜ‰∏≠ÁöÑÊúÄÈáçË¶ÅÁöÑ‰∏Ä‰∫õ ËØç„ÄÇMap ÂáΩÊï∞‰∏∫ÊØè‰∏Ä‰∏™ËæìÂÖ•ÊñáÊ°£ËæìÂá∫(‰∏ªÊú∫Âêç,Ê£ÄÁ¥¢ËØçÂêëÈáè)ÔºåÂÖ∂‰∏≠‰∏ªÊú∫ÂêçÊù•Ëá™ÊñáÊ°£ÁöÑ URL„ÄÇReduce ÂáΩÊï∞Êé•Êî∂Áªô ÂÆö‰∏ªÊú∫ÁöÑÊâÄÊúâÊñáÊ°£ÁöÑÊ£ÄÁ¥¢ËØçÂêëÈáèÔºåÂπ∂ÊääËøô‰∫õÊ£ÄÁ¥¢ËØçÂêëÈáèÂä†Âú®‰∏ÄËµ∑Ôºå‰∏¢ÂºÉÊéâ‰ΩéÈ¢ëÁöÑÊ£ÄÁ¥¢ËØçÔºåËæìÂá∫‰∏Ä‰∏™ÊúÄÁªàÁöÑ(‰∏ª Êú∫Âêç,Ê£ÄÁ¥¢ËØçÂêëÈáè)„ÄÇ ÂÄíÊéíÁ¥¢Âºï:Map ÂáΩÊï∞ÂàÜÊûêÊØè‰∏™ÊñáÊ°£ËæìÂá∫‰∏Ä‰∏™(ËØç,ÊñáÊ°£Âè∑)ÁöÑÂàóË°®ÔºåReduce ÂáΩÊï∞ÁöÑËæìÂÖ•ÊòØ‰∏Ä‰∏™ÁªôÂÆöËØçÁöÑÊâÄÊúâ (ËØçÔºåÊñáÊ°£Âè∑)ÔºåÊéíÂ∫èÊâÄÊúâÁöÑÊñáÊ°£Âè∑ÔºåËæìÂá∫(ËØç,list(ÊñáÊ°£Âè∑))„ÄÇÊâÄÊúâÁöÑËæìÂá∫ÈõÜÂêàÂΩ¢Êàê‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂÄíÊéíÁ¥¢ÂºïÔºåÂÆÉ ‰ª•‰∏ÄÁßçÁÆÄÂçïÁöÑÁÆóÊ≥ïË∑üË∏™ËØçÂú®ÊñáÊ°£‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇ ÂàÜÂ∏ÉÂºèÊéíÂ∫è:Map ÂáΩÊï∞‰ªéÊØè‰∏™ËÆ∞ÂΩïÊèêÂèñ keyÔºåËæìÂá∫(key,record)„ÄÇReduce ÂáΩÊï∞‰∏çÊîπÂèò‰ªª‰ΩïÁöÑÂÄº„ÄÇËøô‰∏™ËøêÁÆó ‰æùËµñÂàÜÂå∫Êú∫Âà∂(Âú® 4.1 ÊèèËø∞)ÂíåÊéíÂ∫èÂ±ûÊÄß(Âú® 4.2 ÊèèËø∞)„ÄÇ &#123;% note info %&#125;## ÂÆûÁé∞ &#123;% endnote %&#125; MapReduce Ê®°ÂûãÂèØ‰ª•ÊúâÂ§öÁßç‰∏çÂêåÁöÑÂÆûÁé∞ÊñπÂºè„ÄÇÂ¶Ç‰ΩïÊ≠£Á°ÆÈÄâÊã©ÂèñÂÜ≥‰∫éÂÖ∑‰ΩìÁöÑÁéØÂ¢É„ÄÇ‰æãÂ¶ÇÔºå‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèÈÄÇ Áî®‰∫éÂ∞èÂûãÁöÑÂÖ±‰∫´ÂÜÖÂ≠òÊñπÂºèÁöÑÊú∫Âô®ÔºåÂè¶Â§ñ‰∏ÄÁßçÂÆûÁé∞ÊñπÂºèÂàôÈÄÇÁî®‰∫éÂ§ßÂûã NUMA Êû∂ÊûÑÁöÑÂ§öÂ§ÑÁêÜÂô®ÁöÑ‰∏ªÊú∫ÔºåËÄåÊúâÁöÑÂÆû Áé∞ÊñπÂºèÊõ¥ÈÄÇÂêàÂ§ßÂûãÁöÑÁΩëÁªúËøûÊé•ÈõÜÁæ§„ÄÇ Êú¨Á´†ËäÇÊèèËø∞‰∏Ä‰∏™ÈÄÇÁî®‰∫é Google ÂÜÖÈÉ®ÂπøÊ≥õ‰ΩøÁî®ÁöÑËøêÁÆóÁéØÂ¢ÉÁöÑÂÆûÁé∞:Áî®‰ª•Â§™ÁΩë‰∫§Êç¢Êú∫ËøûÊé•„ÄÅÁî±ÊôÆÈÄö PC Êú∫ÁªÑ ÊàêÁöÑÂ§ßÂûãÈõÜÁæ§„ÄÇÂú®Êàë‰ª¨ÁöÑÁéØÂ¢ÉÈáåÂåÖÊã¨: 1. x86 Êû∂ÊûÑ„ÄÅËøêË°å Linux Êìç‰ΩúÁ≥ªÁªü„ÄÅÂèåÂ§ÑÁêÜÂô®„ÄÅ2-4GB ÂÜÖÂ≠òÁöÑÊú∫Âô®„ÄÇ 2. ÊôÆÈÄöÁöÑÁΩëÁªúÁ°¨‰ª∂ËÆæÂ§áÔºåÊØè‰∏™Êú∫Âô®ÁöÑÂ∏¶ÂÆΩ‰∏∫ÁôæÂÖÜÊàñËÄÖÂçÉÂÖÜÔºå‰ΩÜÊòØËøúÂ∞è‰∫éÁΩëÁªúÁöÑÂπ≥ÂùáÂ∏¶ÂÆΩÁöÑ‰∏ÄÂçä„ÄÇ 3. ÈõÜÁæ§‰∏≠ÂåÖÂê´ÊàêÁôæ‰∏äÂçÉÁöÑÊú∫Âô®ÔºåÂõ†Ê≠§ÔºåÊú∫Âô®ÊïÖÈöúÊòØÂ∏∏ÊÄÅ„ÄÇ 4. Â≠òÂÇ®‰∏∫Âªâ‰ª∑ÁöÑÂÜÖÁΩÆ IDE Á°¨Áõò„ÄÇ‰∏Ä‰∏™ÂÜÖÈÉ®ÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÁî®Êù•ÁÆ°ÁêÜÂ≠òÂÇ®Âú®Ëøô‰∫õÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆ„ÄÇÊñá‰ª∂Á≥ª ÁªüÈÄöËøáÊï∞ÊçÆÂ§çÂà∂Êù•Âú®‰∏çÂèØÈù†ÁöÑÁ°¨‰ª∂‰∏ä‰øùËØÅÊï∞ÊçÆÁöÑÂèØÈù†ÊÄßÂíåÊúâÊïàÊÄß„ÄÇ 5. Áî®Êà∑Êèê‰∫§Â∑•‰Ωú(job)ÁªôË∞ÉÂ∫¶Á≥ªÁªü„ÄÇÊØè‰∏™Â∑•‰Ωú(job)ÈÉΩÂåÖÂê´‰∏ÄÁ≥ªÂàóÁöÑ‰ªªÂä°(task)ÔºåË∞ÉÂ∫¶Á≥ªÁªüÂ∞ÜËøô‰∫õ‰ªª Âä°Ë∞ÉÂ∫¶Âà∞ÈõÜÁæ§‰∏≠Â§öÂè∞ÂèØÁî®ÁöÑÊú∫Âô®‰∏ä„ÄÇ ### ÊâßË°åÊ¶ÇÊã¨ ÈÄöËøáÂ∞Ü Map Ë∞ÉÁî®ÁöÑËæìÂÖ•Êï∞ÊçÆËá™Âä®ÂàÜÂâ≤‰∏∫ M ‰∏™Êï∞ÊçÆÁâáÊÆµÁöÑÈõÜÂêàÔºåMap Ë∞ÉÁî®Ë¢´ÂàÜÂ∏ÉÂà∞Â§öÂè∞Êú∫Âô®‰∏äÊâßË°å„ÄÇËæì ÂÖ•ÁöÑÊï∞ÊçÆÁâáÊÆµËÉΩÂ§üÂú®‰∏çÂêåÁöÑÊú∫Âô®‰∏äÂπ∂Ë°åÂ§ÑÁêÜ„ÄÇ‰ΩøÁî®ÂàÜÂå∫ÂáΩÊï∞Â∞Ü Map Ë∞ÉÁî®‰∫ßÁîüÁöÑ‰∏≠Èó¥ key ÂÄºÂàÜÊàê R ‰∏™‰∏çÂêåÂàÜÂå∫(‰æãÂ¶ÇÔºåhash(key) mod R)ÔºåReduce Ë∞ÉÁî®‰πüË¢´ÂàÜÂ∏ÉÂà∞Â§öÂè∞Êú∫Âô®‰∏äÊâßË°å„ÄÇÂàÜÂå∫Êï∞Èáè(R)ÂíåÂàÜÂå∫ÂáΩÊï∞Áî±Áî®Êà∑Êù•ÊåáÂÆö„ÄÇ![](http://oliji9s3j.bkt.clouddn.com/15133908393351.jpg) Âõæ 1 Â±ïÁ§∫‰∫ÜÊàë‰ª¨ÁöÑ MapReduce ÂÆûÁé∞‰∏≠Êìç‰ΩúÁöÑÂÖ®ÈÉ®ÊµÅÁ®ã„ÄÇÂΩìÁî®Êà∑Ë∞ÉÁî® MapReduce ÂáΩÊï∞Êó∂ÔºåÂ∞ÜÂèëÁîü‰∏ãÈù¢ÁöÑ‰∏Ä Á≥ªÂàóÂä®‰Ωú(‰∏ãÈù¢ÁöÑÂ∫èÂè∑ÂíåÂõæ 1 ‰∏≠ÁöÑÂ∫èÂè∑‰∏Ä‰∏ÄÂØπÂ∫î): 1. Áî®Êà∑Á®ãÂ∫èÈ¶ñÂÖàË∞ÉÁî®ÁöÑ MapReduce Â∫ìÂ∞ÜËæìÂÖ•Êñá‰ª∂ÂàÜÊàê M ‰∏™Êï∞ÊçÆÁâáÂ∫¶ÔºåÊØè‰∏™Êï∞ÊçÆÁâáÊÆµÁöÑÂ§ßÂ∞è‰∏ÄËà¨‰ªé 16MB Âà∞ 64MB(ÂèØ‰ª•ÈÄöËøáÂèØÈÄâÁöÑÂèÇÊï∞Êù•ÊéßÂà∂ÊØè‰∏™Êï∞ÊçÆÁâáÊÆµÁöÑÂ§ßÂ∞è)„ÄÇÁÑ∂ÂêéÁî®Êà∑Á®ãÂ∫èÂú®Êú∫Áæ§‰∏≠ÂàõÂª∫Â§ßÈáè ÁöÑÁ®ãÂ∫èÂâØÊú¨„ÄÇ 2. Ëøô‰∫õÁ®ãÂ∫èÂâØÊú¨‰∏≠ÁöÑÊúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑÁ®ãÂ∫è‚Äìmaster„ÄÇÂâØÊú¨‰∏≠ÂÖ∂ÂÆÉÁöÑÁ®ãÂ∫èÈÉΩÊòØ worker Á®ãÂ∫èÔºåÁî± master ÂàÜÈÖç ‰ªªÂä°„ÄÇÊúâ M ‰∏™ Map ‰ªªÂä°Âíå R ‰∏™ Reduce ‰ªªÂä°Â∞ÜË¢´ÂàÜÈÖçÔºåmaster Â∞Ü‰∏Ä‰∏™ Map ‰ªªÂä°Êàñ Reduce ‰ªªÂä°ÂàÜÈÖç Áªô‰∏Ä‰∏™Á©∫Èó≤ÁöÑ worker„ÄÇ 3. Ë¢´ÂàÜÈÖç‰∫Ü map ‰ªªÂä°ÁöÑ worker Á®ãÂ∫èËØªÂèñÁõ∏ÂÖ≥ÁöÑËæìÂÖ•Êï∞ÊçÆÁâáÊÆµÔºå‰ªéËæìÂÖ•ÁöÑÊï∞ÊçÆÁâáÊÆµ‰∏≠Ëß£ÊûêÂá∫ key/value pairÔºåÁÑ∂ÂêéÊää key/value pair ‰º†ÈÄíÁªôÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Map ÂáΩÊï∞ÔºåÁî± Map ÂáΩÊï∞ÁîüÊàêÂπ∂ËæìÂá∫ÁöÑ‰∏≠Èó¥ key/value pairÔºåÂπ∂ÁºìÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ 4. ÁºìÂ≠ò‰∏≠ÁöÑ key/value pair ÈÄöËøáÂàÜÂå∫ÂáΩÊï∞ÂàÜÊàê R ‰∏™Âå∫ÂüüÔºå‰πãÂêéÂë®ÊúüÊÄßÁöÑÂÜôÂÖ•Âà∞Êú¨Âú∞Á£ÅÁõò‰∏ä„ÄÇÁºìÂ≠òÁöÑ key/value pair Âú®Êú¨Âú∞Á£ÅÁõò‰∏äÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÂ∞ÜË¢´Âõû‰º†Áªô masterÔºåÁî± master Ë¥üË¥£ÊääËøô‰∫õÂ≠òÂÇ®‰ΩçÁΩÆÂÜç‰º†ÈÄÅÁªô Reduce worker„ÄÇ 5. ÂΩì Reduce worker Á®ãÂ∫èÊé•Êî∂Âà∞ master Á®ãÂ∫èÂèëÊù•ÁöÑÊï∞ÊçÆÂ≠òÂÇ®‰ΩçÁΩÆ‰ø°ÊÅØÂêéÔºå‰ΩøÁî® RPC ‰ªé Map worker ÊâÄÂú® ‰∏ªÊú∫ÁöÑÁ£ÅÁõò‰∏äËØªÂèñËøô‰∫õÁºìÂ≠òÊï∞ÊçÆ„ÄÇÂΩì Reduce worker ËØªÂèñ‰∫ÜÊâÄÊúâÁöÑ‰∏≠Èó¥Êï∞ÊçÆÂêéÔºåÈÄöËøáÂØπ key ËøõË°åÊéíÂ∫èÂêé‰ΩøÂæóÂÖ∑ÊúâÁõ∏Âêå key ÂÄºÁöÑÊï∞ÊçÆËÅöÂêàÂú®‰∏ÄËµ∑„ÄÇÁî±‰∫éËÆ∏Â§ö‰∏çÂêåÁöÑ key ÂÄº‰ºöÊò†Â∞ÑÂà∞Áõ∏ÂêåÁöÑ Reduce ‰ªªÂä°‰∏äÔºåÂõ†Ê≠§ÂøÖÈ°ªËøõË°åÊéíÂ∫è„ÄÇÂ¶ÇÊûú‰∏≠Èó¥Êï∞ÊçÆÂ§™Â§ßÊó†Ê≥ïÂú®ÂÜÖÂ≠ò‰∏≠ÂÆåÊàêÊéíÂ∫èÔºåÈÇ£‰πàÂ∞±Ë¶ÅÂú®Â§ñÈÉ®ËøõË°åÊéíÂ∫è„ÄÇ 6. Reduce worker Á®ãÂ∫èÈÅçÂéÜÊéíÂ∫èÂêéÁöÑ‰∏≠Èó¥Êï∞ÊçÆÔºåÂØπ‰∫éÊØè‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ‰∏≠Èó¥ key ÂÄºÔºåReduce worker Á®ãÂ∫èÂ∞ÜËøô ‰∏™ key ÂÄºÂíåÂÆÉÁõ∏ÂÖ≥ÁöÑ‰∏≠Èó¥ value ÂÄºÁöÑÈõÜÂêà‰º†ÈÄíÁªôÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Reduce ÂáΩÊï∞„ÄÇReduce ÂáΩÊï∞ÁöÑËæìÂá∫Ë¢´ËøΩÂä†Âà∞ÊâÄÂ±ûÂàÜÂå∫ÁöÑËæìÂá∫Êñá‰ª∂„ÄÇ 7. ÂΩìÊâÄÊúâÁöÑ Map Âíå Reduce ‰ªªÂä°ÈÉΩÂÆåÊàê‰πãÂêéÔºåmaster Âî§ÈÜíÁî®Êà∑Á®ãÂ∫è„ÄÇÂú®Ëøô‰∏™Êó∂ÂÄôÔºåÂú®Áî®Êà∑Á®ãÂ∫èÈáåÁöÑÂØπMapReduce Ë∞ÉÁî®ÊâçËøîÂõû„ÄÇ Âú®ÊàêÂäüÂÆåÊàê‰ªªÂä°‰πãÂêéÔºåMapReduce ÁöÑËæìÂá∫Â≠òÊîæÂú® R ‰∏™ËæìÂá∫Êñá‰ª∂‰∏≠(ÂØπÂ∫îÊØè‰∏™ Reduce ‰ªªÂä°‰∫ßÁîü‰∏Ä‰∏™ËæìÂá∫ Êñá‰ª∂ÔºåÊñá‰ª∂ÂêçÁî±Áî®Êà∑ÊåáÂÆö)„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÁî®Êà∑‰∏çÈúÄË¶ÅÂ∞ÜËøô R ‰∏™ËæìÂá∫Êñá‰ª∂ÂêàÂπ∂Êàê‰∏Ä‰∏™Êñá‰ª∂‚Äì‰ªñ‰ª¨ÁªèÂ∏∏ÊääËøô‰∫õÊñá ‰ª∂‰Ωú‰∏∫Âè¶Â§ñ‰∏Ä‰∏™ MapReduce ÁöÑËæìÂÖ•ÔºåÊàñËÄÖÂú®Âè¶Â§ñ‰∏Ä‰∏™ÂèØ‰ª•Â§ÑÁêÜÂ§ö‰∏™ÂàÜÂâ≤Êñá‰ª∂ÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®‰∏≠‰ΩøÁî®„ÄÇ ### Master Êï∞ÊçÆÁªìÊûÑ Master ÊåÅÊúâ‰∏Ä‰∫õÊï∞ÊçÆÁªìÊûÑÔºåÂÆÉÂ≠òÂÇ®ÊØè‰∏Ä‰∏™ Map Âíå Reduce ‰ªªÂä°ÁöÑÁä∂ÊÄÅ(Á©∫Èó≤„ÄÅÂ∑•‰Ωú‰∏≠ÊàñÂÆåÊàê)Ôºå‰ª•Âèä Worker Êú∫Âô®(ÈùûÁ©∫Èó≤‰ªªÂä°ÁöÑÊú∫Âô®)ÁöÑÊ†áËØÜ„ÄÇ Master Â∞±ÂÉè‰∏Ä‰∏™Êï∞ÊçÆÁÆ°ÈÅìÔºå‰∏≠Èó¥Êñá‰ª∂Â≠òÂÇ®Âå∫ÂüüÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÈÄöËøáËøô‰∏™ÁÆ°ÈÅì‰ªé Map ‰º†ÈÄíÂà∞ Reduce„ÄÇÂõ†Ê≠§Ôºå ÂØπ‰∫éÊØè‰∏™Â∑≤ÁªèÂÆåÊàêÁöÑ Map ‰ªªÂä°Ôºåmaster Â≠òÂÇ®‰∫Ü Map ‰ªªÂä°‰∫ßÁîüÁöÑ R ‰∏™‰∏≠Èó¥Êñá‰ª∂Â≠òÂÇ®Âå∫ÂüüÁöÑÂ§ßÂ∞èÂíå‰ΩçÁΩÆ„ÄÇÂΩì Map ‰ªªÂä°ÂÆåÊàêÊó∂ÔºåMaster Êé•Êî∂Âà∞‰ΩçÁΩÆÂíåÂ§ßÂ∞èÁöÑÊõ¥Êñ∞‰ø°ÊÅØÔºåËøô‰∫õ‰ø°ÊÅØË¢´ÈÄêÊ≠•ÈÄíÂ¢ûÁöÑÊé®ÈÄÅÁªôÈÇ£‰∫õÊ≠£Âú®Â∑•‰ΩúÁöÑ Reduce ‰ªª Âä°„ÄÇ ### ÂÆπÈîô Âõ†‰∏∫ MapReduce Â∫ìÁöÑËÆæËÆ°ÂàùË°∑ÊòØ‰ΩøÁî®Áî±ÊàêÁôæ‰∏äÂçÉÁöÑÊú∫Âô®ÁªÑÊàêÁöÑÈõÜÁæ§Êù•Â§ÑÁêÜË∂ÖÂ§ßËßÑÊ®°ÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•ÔºåËøô‰∏™ Â∫ìÂøÖÈ°ªË¶ÅËÉΩÂæàÂ•ΩÁöÑÂ§ÑÁêÜÊú∫Âô®ÊïÖÈöú„ÄÇ #### worker ÊïÖÈöú master Âë®ÊúüÊÄßÁöÑ ping ÊØè‰∏™ worker„ÄÇÂ¶ÇÊûúÂú®‰∏Ä‰∏™Á∫¶ÂÆöÁöÑÊó∂Èó¥ËåÉÂõ¥ÂÜÖÊ≤°ÊúâÊî∂Âà∞ worker ËøîÂõûÁöÑ‰ø°ÊÅØÔºåmaster Â∞Ü ÊääËøô‰∏™ worker Ê†áËÆ∞‰∏∫Â§±Êïà„ÄÇÊâÄÊúâÁî±Ëøô‰∏™Â§±ÊïàÁöÑ worker ÂÆåÊàêÁöÑ Map ‰ªªÂä°Ë¢´ÈáçËÆæ‰∏∫ÂàùÂßãÁöÑÁ©∫Èó≤Áä∂ÊÄÅÔºå‰πãÂêéËøô‰∫õ ‰ªªÂä°Â∞±ÂèØ‰ª•Ë¢´ÂÆâÊéíÁªôÂÖ∂‰ªñÁöÑ worker„ÄÇÂêåÊ†∑ÁöÑÔºåworker Â§±ÊïàÊó∂Ê≠£Âú®ËøêË°åÁöÑ Map Êàñ Reduce ‰ªªÂä°‰πüÂ∞ÜË¢´ÈáçÊñ∞ÁΩÆ‰∏∫ Á©∫Èó≤Áä∂ÊÄÅÔºåÁ≠âÂæÖÈáçÊñ∞Ë∞ÉÂ∫¶„ÄÇ ÂΩì worker ÊïÖÈöúÊó∂ÔºåÁî±‰∫éÂ∑≤ÁªèÂÆåÊàêÁöÑ Map ‰ªªÂä°ÁöÑËæìÂá∫Â≠òÂÇ®Âú®ËøôÂè∞Êú∫Âô®‰∏äÔºåMap ‰ªªÂä°ÁöÑËæìÂá∫Â∑≤‰∏çÂèØËÆøÈóÆ‰∫Ü,Âõ†Ê≠§ÂøÖÈ°ªÈáçÊñ∞ÊâßË°å„ÄÇËÄåÂ∑≤ÁªèÂÆåÊàêÁöÑ Reduce ‰ªªÂä°ÁöÑËæìÂá∫Â≠òÂÇ®Âú®ÂÖ®Â±ÄÊñá‰ª∂Á≥ªÁªü‰∏äÔºåÂõ†Ê≠§‰∏çÈúÄË¶ÅÂÜçÊ¨°ÊâßË°å„ÄÇ ÂΩì‰∏Ä‰∏™ Map ‰ªªÂä°È¶ñÂÖàË¢´ worker A ÊâßË°åÔºå‰πãÂêéÁî±‰∫é worker A Â§±Êïà‰∫ÜÂèàË¢´Ë∞ÉÂ∫¶Âà∞ worker B ÊâßË°åÔºåËøô‰∏™‚ÄúÈáç Êñ∞ÊâßË°å‚ÄùÁöÑÂä®‰Ωú‰ºöË¢´ÈÄöÁü•ÁªôÊâÄÊúâÊâßË°å Reduce ‰ªªÂä°ÁöÑ worker„ÄÇ‰ªª‰ΩïËøòÊ≤°Êúâ‰ªé worker A ËØªÂèñÊï∞ÊçÆÁöÑ Reduce ‰ªªÂä° Â∞Ü‰ªé worker B ËØªÂèñÊï∞ÊçÆ„ÄÇ MapReduce ÂèØ‰ª•Â§ÑÁêÜÂ§ßËßÑÊ®° worker Â§±ÊïàÁöÑÊÉÖÂÜµ„ÄÇÊØîÂ¶ÇÔºåÂú®‰∏Ä‰∏™ MapReduce Êìç‰ΩúÊâßË°åÊúüÈó¥ÔºåÂú®Ê≠£Âú®ËøêË°å ÁöÑÈõÜÁæ§‰∏äËøõË°åÁΩëÁªúÁª¥Êä§ÂºïËµ∑ 80 Âè∞Êú∫Âô®Âú®Âá†ÂàÜÈíüÂÜÖ‰∏çÂèØËÆøÈóÆ‰∫ÜÔºåMapReduce master Âè™ÈúÄË¶ÅÁÆÄÂçïÁöÑÂÜçÊ¨°ÊâßË°åÈÇ£‰∫õ ‰∏çÂèØËÆøÈóÆÁöÑ worker ÂÆåÊàêÁöÑÂ∑•‰ΩúÔºå‰πãÂêéÁªßÁª≠ÊâßË°åÊú™ÂÆåÊàêÁöÑ‰ªªÂä°ÔºåÁõ¥Âà∞ÊúÄÁªàÂÆåÊàêËøô‰∏™ MapReduce Êìç‰Ωú„ÄÇ #### master Â§±Ë¥• ‰∏Ä‰∏™ÁÆÄÂçïÁöÑËß£ÂÜ≥ÂäûÊ≥ïÊòØËÆ© master Âë®ÊúüÊÄßÁöÑÂ∞Ü‰∏äÈù¢ÊèèËø∞ÁöÑÊï∞ÊçÆÁªìÊûÑ(alex Ê≥®:Êåá 3.2 ËäÇ)ÁöÑÂÜôÂÖ•Á£ÅÁõòÔºåÂç≥ Ê£ÄÊü•ÁÇπ(checkpoint)„ÄÇÂ¶ÇÊûúËøô‰∏™ master ‰ªªÂä°Â§±Êïà‰∫ÜÔºåÂèØ‰ª•‰ªéÊúÄÂêé‰∏Ä‰∏™Ê£ÄÊü•ÁÇπ(checkpoint)ÂºÄÂßãÂêØÂä®Âè¶‰∏Ä‰∏™ master ËøõÁ®ã„ÄÇÁÑ∂ËÄåÔºåÁî±‰∫éÂè™Êúâ‰∏Ä‰∏™ master ËøõÁ®ãÔºåmaster Â§±ÊïàÂêéÂÜçÊÅ¢Â§çÊòØÊØîËæÉÈ∫ªÁÉ¶ÁöÑÔºåÂõ†Ê≠§Êàë‰ª¨Áé∞Âú®ÁöÑÂÆûÁé∞ÊòØ Â¶ÇÊûú master Â§±ÊïàÔºåÂ∞±‰∏≠Ê≠¢ MapReduce ËøêÁÆó„ÄÇÂÆ¢Êà∑ÂèØ‰ª•Ê£ÄÊü•Âà∞Ëøô‰∏™Áä∂ÊÄÅÔºåÂπ∂‰∏îÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅÈáçÊñ∞ÊâßË°å MapReduce Êìç‰Ωú„ÄÇ #### Âú®Â§±ÊïàÊñπÈù¢ÁöÑÂ§ÑÁêÜÊú∫Âà∂ (Ê≥®:ÂéüÊñá‰∏∫‚Äùsemantics in the presence of failures‚Äù) ÂΩìÁî®Êà∑Êèê‰æõÁöÑ Map Âíå Reduce Êìç‰ΩúÊòØËæìÂÖ•Á°ÆÂÆöÊÄßÂáΩÊï∞(Âç≥Áõ∏ÂêåÁöÑËæìÂÖ•‰∫ßÁîüÁõ∏ÂêåÁöÑËæìÂá∫)Êó∂ÔºåÊàë‰ª¨ÁöÑÂàÜÂ∏É ÂºèÂÆûÁé∞Âú®‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÁöÑËæìÂá∫ÈÉΩÂíåÊâÄÊúâÁ®ãÂ∫èÊ≤°ÊúâÂá∫Áé∞‰ªª‰ΩïÈîôËØØ„ÄÅÈ°∫Â∫èÁöÑÊâßË°å‰∫ßÁîüÁöÑËæìÂá∫ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ Êàë‰ª¨‰æùËµñÂØπ Map Âíå Reduce ‰ªªÂä°ÁöÑËæìÂá∫ÊòØÂéüÂ≠êÊèê‰∫§ÁöÑÊù•ÂÆåÊàêËøô‰∏™ÁâπÊÄß„ÄÇÊØè‰∏™Â∑•‰Ωú‰∏≠ÁöÑ‰ªªÂä°ÊääÂÆÉÁöÑËæìÂá∫ÂÜô Âà∞ÁßÅÊúâÁöÑ‰∏¥Êó∂Êñá‰ª∂‰∏≠„ÄÇÊØè‰∏™ Reduce ‰ªªÂä°ÁîüÊàê‰∏Ä‰∏™ËøôÊ†∑ÁöÑÊñá‰ª∂ÔºåËÄåÊØè‰∏™ Map ‰ªªÂä°ÂàôÁîüÊàê R ‰∏™ËøôÊ†∑ÁöÑÊñá‰ª∂(‰∏Ä ‰∏™ Reduce ‰ªªÂä°ÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂)„ÄÇÂΩì‰∏Ä‰∏™ Map ‰ªªÂä°ÂÆåÊàêÁöÑÊó∂Ôºåworker ÂèëÈÄÅ‰∏Ä‰∏™ÂåÖÂê´ R ‰∏™‰∏¥Êó∂Êñá‰ª∂ÂêçÁöÑÂÆåÊàêÊ∂àÊÅØ Áªô master„ÄÇÂ¶ÇÊûú master ‰ªé‰∏Ä‰∏™Â∑≤ÁªèÂÆåÊàêÁöÑ Map ‰ªªÂä°ÂÜçÊ¨°Êé•Êî∂Âà∞Âà∞‰∏Ä‰∏™ÂÆåÊàêÊ∂àÊÅØÔºåmaster Â∞ÜÂøΩÁï•Ëøô‰∏™Ê∂àÊÅØ;Âê¶ ÂàôÔºåmaster Â∞ÜËøô R ‰∏™Êñá‰ª∂ÁöÑÂêçÂ≠óËÆ∞ÂΩïÂú®Êï∞ÊçÆÁªìÊûÑÈáå„ÄÇ ÂΩì Reduce ‰ªªÂä°ÂÆåÊàêÊó∂ÔºåReduce worker ËøõÁ®ã‰ª•ÂéüÂ≠êÁöÑÊñπÂºèÊää‰∏¥Êó∂Êñá‰ª∂ÈáçÂëΩÂêç‰∏∫ÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂„ÄÇÂ¶ÇÊûúÂêå ‰∏Ä‰∏™ Reduce ‰ªªÂä°Âú®Â§öÂè∞Êú∫Âô®‰∏äÊâßË°åÔºåÈíàÂØπÂêå‰∏Ä‰∏™ÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂Â∞ÜÊúâÂ§ö‰∏™ÈáçÂëΩÂêçÊìç‰ΩúÊâßË°å„ÄÇÊàë‰ª¨‰æùËµñÂ∫ïÂ±ÇÊñá ‰ª∂Á≥ªÁªüÊèê‰æõÁöÑÈáçÂëΩÂêçÊìç‰ΩúÁöÑÂéüÂ≠êÊÄßÊù•‰øùËØÅÊúÄÁªàÁöÑÊñá‰ª∂Á≥ªÁªüÁä∂ÊÄÅ‰ªÖ‰ªÖÂåÖÂê´‰∏Ä‰∏™ Reduce ‰ªªÂä°‰∫ßÁîüÁöÑÊï∞ÊçÆ„ÄÇ ‰ΩøÁî® MapReduce Ê®°ÂûãÁöÑÁ®ãÂ∫èÂëòÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÁêÜËß£‰ªñ‰ª¨Á®ãÂ∫èÁöÑË°å‰∏∫ÔºåÂõ†‰∏∫Êàë‰ª¨ÁªùÂ§ßÂ§öÊï∞ÁöÑ Map Âíå Reduce Êìç‰ΩúÊòØÁ°ÆÂÆöÊÄßÁöÑÔºåËÄå‰∏îÂ≠òÂú®ËøôÊ†∑ÁöÑ‰∏Ä‰∏™‰∫ãÂÆû:Êàë‰ª¨ÁöÑÂ§±ÊïàÂ§ÑÁêÜÊú∫Âà∂Á≠â‰ª∑‰∫é‰∏Ä‰∏™È°∫Â∫èÁöÑÊâßË°åÁöÑÊìç‰Ωú„ÄÇÂΩì Map Êàñ /Âíå Reduce Êìç‰ΩúÊòØ‰∏çÁ°ÆÂÆöÊÄßÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Êèê‰æõËôΩÁÑ∂ËæÉÂº±‰ΩÜÊòØ‰æùÁÑ∂ÂêàÁêÜÁöÑÂ§ÑÁêÜÊú∫Âà∂„ÄÇÂΩì‰ΩøÁî®ÈùûÁ°ÆÂÆöÊìç‰ΩúÁöÑÊó∂ÂÄôÔºå ‰∏Ä‰∏™ Reduce ‰ªªÂä° R1 ÁöÑËæìÂá∫Á≠â‰ª∑‰∫é‰∏Ä‰∏™ÈùûÁ°ÆÂÆöÊÄßÁ®ãÂ∫èÈ°∫Â∫èÊâßË°å‰∫ßÁîüÊó∂ÁöÑËæìÂá∫„ÄÇ‰ΩÜÊòØÔºåÂè¶‰∏Ä‰∏™ Reduce ‰ªªÂä° R2 ÁöÑËæìÂá∫‰πüËÆ∏Á¨¶Âêà‰∏Ä‰∏™‰∏çÂêåÁöÑÈùûÁ°ÆÂÆöÈ°∫Â∫èÁ®ãÂ∫èÊâßË°å‰∫ßÁîüÁöÑ R2 ÁöÑËæìÂá∫„ÄÇ ËÄÉËôë Map ‰ªªÂä° M Âíå Reduce ‰ªªÂä° R1„ÄÅR2 ÁöÑÊÉÖÂÜµ„ÄÇÊàë‰ª¨ËÆæÂÆö e(Ri)ÊòØ Ri Â∑≤ÁªèÊèê‰∫§ÁöÑÊâßË°åËøáÁ®ã(Êúâ‰∏î‰ªÖÊúâ‰∏Ä‰∏™ËøôÊ†∑ÁöÑÊâßË°åËøáÁ®ã)„ÄÇÂΩì e(R1)ËØªÂèñ‰∫ÜÁî± M ‰∏ÄÊ¨°ÊâßË°å‰∫ßÁîüÁöÑËæìÂá∫ÔºåËÄå e(R2)ËØªÂèñ‰∫ÜÁî± M ÁöÑÂè¶‰∏ÄÊ¨°ÊâßË°å‰∫ßÁîüÁöÑ ËæìÂá∫ÔºåÂØºËá¥‰∫ÜËæÉÂº±ÁöÑÂ§±ÊïàÂ§ÑÁêÜ„ÄÇ ### Â≠òÂÇ®‰ΩçÁΩÆ Âú®Êàë‰ª¨ÁöÑËÆ°ÁÆóËøêË°åÁéØÂ¢É‰∏≠ÔºåÁΩëÁªúÂ∏¶ÂÆΩÊòØ‰∏Ä‰∏™Áõ∏ÂΩìÂåÆ‰πèÁöÑËµÑÊ∫ê„ÄÇÊàë‰ª¨ÈÄöËøáÂ∞ΩÈáèÊääËæìÂÖ•Êï∞ÊçÆ(Áî± GFS ÁÆ°ÁêÜ)Â≠ò ÂÇ®Âú®ÈõÜÁæ§‰∏≠Êú∫Âô®ÁöÑÊú¨Âú∞Á£ÅÁõò‰∏äÊù•ËäÇÁúÅÁΩëÁªúÂ∏¶ÂÆΩ„ÄÇGFS ÊääÊØè‰∏™Êñá‰ª∂Êåâ 64MB ‰∏Ä‰∏™ Block ÂàÜÈöîÔºåÊØè‰∏™ Block ‰øùÂ≠ò Âú®Â§öÂè∞Êú∫Âô®‰∏äÔºåÁéØÂ¢É‰∏≠Â∞±Â≠òÊîæ‰∫ÜÂ§ö‰ªΩÊã∑Ë¥ù(‰∏ÄËà¨ÊòØ 3 ‰∏™Êã∑Ë¥ù)„ÄÇMapReduce ÁöÑ master Âú®Ë∞ÉÂ∫¶ Map ‰ªªÂä°Êó∂‰ºöËÄÉËôë ËæìÂÖ•Êñá‰ª∂ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÔºåÂ∞ΩÈáèÂ∞Ü‰∏Ä‰∏™ Map ‰ªªÂä°Ë∞ÉÂ∫¶Âú®ÂåÖÂê´Áõ∏ÂÖ≥ËæìÂÖ•Êï∞ÊçÆÊã∑Ë¥ùÁöÑÊú∫Âô®‰∏äÊâßË°å;Â¶ÇÊûú‰∏äËø∞Âä™ÂäõÂ§±Ë¥• ‰∫ÜÔºåmaster Â∞ÜÂ∞ùËØïÂú®‰øùÂ≠òÊúâËæìÂÖ•Êï∞ÊçÆÊã∑Ë¥ùÁöÑÊú∫Âô®ÈôÑËøëÁöÑÊú∫Âô®‰∏äÊâßË°å Map ‰ªªÂä°(‰æãÂ¶ÇÔºåÂàÜÈÖçÂà∞‰∏Ä‰∏™ÂíåÂåÖÂê´ËæìÂÖ•Êï∞ ÊçÆÁöÑÊú∫Âô®Âú®‰∏Ä‰∏™ switch ÈáåÁöÑ worker Êú∫Âô®‰∏äÊâßË°å)„ÄÇÂΩìÂú®‰∏Ä‰∏™Ë∂≥Â§üÂ§ßÁöÑ cluster ÈõÜÁæ§‰∏äËøêË°åÂ§ßÂûã MapReduce Êìç‰Ωú ÁöÑÊó∂ÂÄôÔºåÂ§ßÈÉ®ÂàÜÁöÑËæìÂÖ•Êï∞ÊçÆÈÉΩËÉΩ‰ªéÊú¨Âú∞Êú∫Âô®ËØªÂèñÔºåÂõ†Ê≠§Ê∂àËÄóÈùûÂ∏∏Â∞ëÁöÑÁΩëÁªúÂ∏¶ÂÆΩ„ÄÇ ### ‰ªªÂä°Á≤íÂ∫¶ Â¶ÇÂâçÊâÄËø∞ÔºåÊàë‰ª¨Êää Map ÊãÜÂàÜÊàê‰∫Ü M ‰∏™ÁâáÊÆµ„ÄÅÊää Reduce ÊãÜÂàÜÊàê R ‰∏™ÁâáÊÆµÊâßË°å„ÄÇÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÔºåM Âíå R Â∫îÂΩì ÊØîÈõÜÁæ§‰∏≠ worker ÁöÑÊú∫Âô®Êï∞ÈáèË¶ÅÂ§öÂæóÂ§ö„ÄÇÂú®ÊØèÂè∞ worker Êú∫Âô®ÈÉΩÊâßË°åÂ§ßÈáèÁöÑ‰∏çÂêå‰ªªÂä°ËÉΩÂ§üÊèêÈ´òÈõÜÁæ§ÁöÑÂä®ÊÄÅÁöÑË¥üËΩΩ ÂùáË°°ËÉΩÂäõÔºåÂπ∂‰∏îËÉΩÂ§üÂä†Âø´ÊïÖÈöúÊÅ¢Â§çÁöÑÈÄüÂ∫¶:Â§±ÊïàÊú∫Âô®‰∏äÊâßË°åÁöÑÂ§ßÈáè Map ‰ªªÂä°ÈÉΩÂèØ‰ª•ÂàÜÂ∏ÉÂà∞ÊâÄÊúâÂÖ∂‰ªñÁöÑ worker Êú∫Âô®‰∏äÂéªÊâßË°å„ÄÇ ‰ΩÜÊòØÂÆûÈôÖ‰∏äÔºåÂú®Êàë‰ª¨ÁöÑÂÖ∑‰ΩìÂÆûÁé∞‰∏≠ÂØπ M Âíå R ÁöÑÂèñÂÄºÈÉΩÊúâ‰∏ÄÂÆöÁöÑÂÆ¢ËßÇÈôêÂà∂ÔºåÂõ†‰∏∫ master ÂøÖÈ°ªÊâßË°å O(M+R) Ê¨°Ë∞ÉÂ∫¶ÔºåÂπ∂‰∏îÂú®ÂÜÖÂ≠ò‰∏≠‰øùÂ≠ò O(M*R)‰∏™Áä∂ÊÄÅ(ÂØπÂΩ±ÂìçÂÜÖÂ≠ò‰ΩøÁî®ÁöÑÂõ†Á¥†ËøòÊòØÊØîËæÉÂ∞èÁöÑ:O(M*R)ÂùóÁä∂ÊÄÅÔºåÂ§ßÊ¶ÇÊØè ÂØπ Map ‰ªªÂä°/Reduce ‰ªªÂä° 1 ‰∏™Â≠óËäÇÂ∞±ÂèØ‰ª•‰∫Ü)„ÄÇ Êõ¥Ëøõ‰∏ÄÊ≠•ÔºåR ÂÄºÈÄöÂ∏∏ÊòØÁî±Áî®Êà∑ÊåáÂÆöÁöÑÔºåÂõ†‰∏∫ÊØè‰∏™ Reduce ‰ªªÂä°ÊúÄÁªàÈÉΩ‰ºöÁîüÊàê‰∏Ä‰∏™Áã¨Á´ãÁöÑËæìÂá∫Êñá‰ª∂„ÄÇÂÆûÈôÖ‰Ωø Áî®Êó∂Êàë‰ª¨‰πüÂÄæÂêë‰∫éÈÄâÊã©ÂêàÈÄÇÁöÑ M ÂÄºÔºå‰ª•‰ΩøÂæóÊØè‰∏Ä‰∏™Áã¨Á´ã‰ªªÂä°ÈÉΩÊòØÂ§ÑÁêÜÂ§ßÁ∫¶ 16M Âà∞ 64M ÁöÑËæìÂÖ•Êï∞ÊçÆ(ËøôÊ†∑Ôºå ‰∏äÈù¢ÊèèÂÜôÁöÑËæìÂÖ•Êï∞ÊçÆÊú¨Âú∞Â≠òÂÇ®‰ºòÂåñÁ≠ñÁï•ÊâçÊúÄÊúâÊïà)ÔºåÂè¶Â§ñÔºåÊàë‰ª¨Êää R ÂÄºËÆæÁΩÆ‰∏∫Êàë‰ª¨ÊÉ≥‰ΩøÁî®ÁöÑ worker Êú∫Âô®Êï∞Èáè ÁöÑÂ∞èÁöÑÂÄçÊï∞„ÄÇÊàë‰ª¨ÈÄöÂ∏∏‰ºöÁî®ËøôÊ†∑ÁöÑÊØî‰æãÊù•ÊâßË°å MapReduce:M=200000ÔºåR=5000Ôºå‰ΩøÁî® 2000 Âè∞ worker Êú∫Âô®„ÄÇ ### Â§áÁî®‰ªªÂä° ÂΩ±Âìç‰∏Ä‰∏™ MapReduce ÁöÑÊÄªÊâßË°åÊó∂Èó¥ÊúÄÈÄöÂ∏∏ÁöÑÂõ†Á¥†ÊòØ‚ÄúËêΩ‰ºçËÄÖ‚Äù:Âú®ËøêÁÆóËøáÁ®ã‰∏≠ÔºåÂ¶ÇÊûúÊúâ‰∏ÄÂè∞Êú∫Âô®Ëä±‰∫ÜÂæà ÈïøÁöÑÊó∂Èó¥ÊâçÂÆåÊàêÊúÄÂêéÂá†‰∏™ Map Êàñ Reduce ‰ªªÂä°ÔºåÂØºËá¥ MapReduce Êìç‰ΩúÊÄªÁöÑÊâßË°åÊó∂Èó¥Ë∂ÖËøáÈ¢ÑÊúü„ÄÇÂá∫Áé∞‚ÄúËêΩ‰ºçËÄÖ‚Äù ÁöÑÂéüÂõ†ÈùûÂ∏∏Â§ö„ÄÇÊØîÂ¶Ç:Â¶ÇÊûú‰∏Ä‰∏™Êú∫Âô®ÁöÑÁ°¨ÁõòÂá∫‰∫ÜÈóÆÈ¢òÔºåÂú®ËØªÂèñÁöÑÊó∂ÂÄôË¶ÅÁªèÂ∏∏ÁöÑËøõË°åËØªÂèñÁ∫†ÈîôÊìç‰ΩúÔºåÂØºËá¥ËØªÂèñÊï∞ÊçÆÁöÑÈÄüÂ∫¶‰ªé 30M/s Èôç‰ΩéÂà∞ 1M/s„ÄÇÂ¶ÇÊûú cluster ÁöÑË∞ÉÂ∫¶Á≥ªÁªüÂú®ËøôÂè∞Êú∫Âô®‰∏äÂèàË∞ÉÂ∫¶‰∫ÜÂÖ∂‰ªñÁöÑ‰ªªÂä°ÔºåÁî±‰∫é CPU„ÄÅÂÜÖ Â≠ò„ÄÅÊú¨Âú∞Á°¨ÁõòÂíåÁΩëÁªúÂ∏¶ÂÆΩÁ≠âÁ´û‰∫âÂõ†Á¥†ÁöÑÂ≠òÂú®ÔºåÂØºËá¥ÊâßË°å MapReduce ‰ª£Á†ÅÁöÑÊâßË°åÊïàÁéáÊõ¥Âä†ÁºìÊÖ¢„ÄÇÊàë‰ª¨ÊúÄËøëÈÅáÂà∞ ÁöÑ‰∏Ä‰∏™ÈóÆÈ¢òÊòØÁî±‰∫éÊú∫Âô®ÁöÑÂàùÂßãÂåñ‰ª£Á†ÅÊúâ bugÔºåÂØºËá¥ÂÖ≥Èó≠‰∫ÜÁöÑÂ§ÑÁêÜÂô®ÁöÑÁºìÂ≠ò:Âú®Ëøô‰∫õÊú∫Âô®‰∏äÊâßË°å‰ªªÂä°ÁöÑÊÄßËÉΩÂíå Ê≠£Â∏∏ÊÉÖÂÜµÁõ∏Â∑Æ‰∏äÁôæÂÄç„ÄÇ Êàë‰ª¨Êúâ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÊú∫Âà∂Êù•ÂáèÂ∞ë‚ÄúËêΩ‰ºçËÄÖ‚ÄùÂá∫Áé∞ÁöÑÊÉÖÂÜµ„ÄÇÂΩì‰∏Ä‰∏™ MapReduce Êìç‰ΩúÊé•ËøëÂÆåÊàêÁöÑÊó∂ÂÄôÔºåmaster Ë∞ÉÂ∫¶Â§áÁî®(backup)‰ªªÂä°ËøõÁ®ãÊù•ÊâßË°åÂâ©‰∏ãÁöÑ„ÄÅÂ§Ñ‰∫éÂ§ÑÁêÜ‰∏≠Áä∂ÊÄÅ(in-progress)ÁöÑ‰ªªÂä°„ÄÇÊó†ËÆ∫ÊòØÊúÄÂàùÁöÑÊâßË°åËøõÁ®ã„ÄÅ ËøòÊòØÂ§áÁî®(backup)‰ªªÂä°ËøõÁ®ãÂÆåÊàê‰∫Ü‰ªªÂä°ÔºåÊàë‰ª¨ÈÉΩÊääËøô‰∏™‰ªªÂä°Ê†áËÆ∞Êàê‰∏∫Â∑≤ÁªèÂÆåÊàê„ÄÇÊàë‰ª¨Ë∞É‰ºò‰∫ÜËøô‰∏™Êú∫Âà∂ÔºåÈÄö Â∏∏Âè™‰ºöÂç†Áî®ÊØîÊ≠£Â∏∏Êìç‰ΩúÂ§öÂá†‰∏™ÁôæÂàÜÁÇπÁöÑËÆ°ÁÆóËµÑÊ∫ê„ÄÇÊàë‰ª¨ÂèëÁé∞ÈááÁî®ËøôÊ†∑ÁöÑÊú∫Âà∂ÂØπ‰∫éÂáèÂ∞ëË∂ÖÂ§ß MapReduce Êìç‰ΩúÁöÑ ÊÄªÂ§ÑÁêÜÊó∂Èó¥ÊïàÊûúÊòæËëó„ÄÇ‰æãÂ¶ÇÔºåÂú® 5.3 ËäÇÊèèËø∞ÁöÑÊéíÂ∫è‰ªªÂä°ÔºåÂú®ÂÖ≥Èó≠ÊéâÂ§áÁî®‰ªªÂä°ÁöÑÊÉÖÂÜµ‰∏ãË¶ÅÂ§öËä± 44%ÁöÑÊó∂Èó¥ÂÆåÊàê ÊéíÂ∫è‰ªªÂä°„ÄÇ &#123;% note info %&#125;## ÊäÄÂ∑ß &#123;% endnote %&#125; ËôΩÁÑ∂ÁÆÄÂçïÁöÑ Map Âíå Reduce ÂáΩÊï∞Êèê‰æõÁöÑÂü∫Êú¨ÂäüËÉΩÂ∑≤ÁªèËÉΩÂ§üÊª°Ë∂≥Â§ßÈÉ®ÂàÜÁöÑËÆ°ÁÆóÈúÄË¶ÅÔºåÊàë‰ª¨ËøòÊòØÂèëÊéòÂá∫‰∫Ü‰∏Ä ‰∫õÊúâ‰ª∑ÂÄºÁöÑÊâ©Â±ïÂäüËÉΩ„ÄÇÊú¨ËäÇÂ∞ÜÊèèËø∞Ëøô‰∫õÊâ©Â±ïÂäüËÉΩ„ÄÇ ### ÂàÜÂå∫ÂáΩÊï∞ MapReduce ÁöÑ‰ΩøÁî®ËÄÖÈÄöÂ∏∏‰ºöÊåáÂÆö Reduce ‰ªªÂä°Âíå Reduce ‰ªªÂä°ËæìÂá∫Êñá‰ª∂ÁöÑÊï∞Èáè(R)„ÄÇÊàë‰ª¨Âú®‰∏≠Èó¥ key ‰∏ä‰Ωø Áî®ÂàÜÂå∫ÂáΩÊï∞Êù•ÂØπÊï∞ÊçÆËøõË°åÂàÜÂå∫Ôºå‰πãÂêéÂÜçËæìÂÖ•Âà∞ÂêéÁª≠‰ªªÂä°ÊâßË°åËøõÁ®ã„ÄÇ‰∏Ä‰∏™Áº∫ÁúÅÁöÑÂàÜÂå∫ÂáΩÊï∞ÊòØ‰ΩøÁî® hash ÊñπÊ≥ï(ÊØîÂ¶ÇÔºå hash(key) mod R)ËøõË°åÂàÜÂå∫„ÄÇhash ÊñπÊ≥ïËÉΩ‰∫ßÁîüÈùûÂ∏∏Âπ≥Ë°°ÁöÑÂàÜÂå∫„ÄÇÁÑ∂ËÄåÔºåÊúâÁöÑÊó∂ÂÄôÔºåÂÖ∂ÂÆÉÁöÑ‰∏Ä‰∫õÂàÜÂå∫ÂáΩÊï∞ÂØπ key ÂÄºËøõË°åÁöÑÂàÜÂå∫Â∞ÜÈùûÂ∏∏ÊúâÁî®„ÄÇÊØîÂ¶ÇÔºåËæìÂá∫ÁöÑ key ÂÄºÊòØ URLsÔºåÊàë‰ª¨Â∏åÊúõÊØè‰∏™‰∏ªÊú∫ÁöÑÊâÄÊúâÊù°ÁõÆ‰øùÊåÅÂú®Âêå‰∏Ä‰∏™ËæìÂá∫Êñá ‰ª∂‰∏≠„ÄÇ‰∏∫‰∫ÜÊîØÊåÅÁ±ª‰ººÁöÑÊÉÖÂÜµÔºåMapReduce Â∫ìÁöÑÁî®Êà∑ÈúÄË¶ÅÊèê‰æõ‰∏ìÈó®ÁöÑÂàÜÂå∫ÂáΩÊï∞„ÄÇ‰æãÂ¶ÇÔºå‰ΩøÁî®‚Äúhash(Hostname(urlkey)) mod R‚Äù‰Ωú‰∏∫ÂàÜÂå∫ÂáΩÊï∞Â∞±ÂèØ‰ª•ÊääÊâÄÊúâÊù•Ëá™Âêå‰∏Ä‰∏™‰∏ªÊú∫ÁöÑ URLs ‰øùÂ≠òÂú®Âêå‰∏Ä‰∏™ËæìÂá∫Êñá‰ª∂‰∏≠„ÄÇ ### È°∫Â∫è‰øùËØÅ Êàë‰ª¨Á°Æ‰øùÂú®ÁªôÂÆöÁöÑÂàÜÂå∫‰∏≠Ôºå‰∏≠Èó¥ key/value pair Êï∞ÊçÆÁöÑÂ§ÑÁêÜÈ°∫Â∫èÊòØÊåâÁÖß key ÂÄºÂ¢ûÈáèÈ°∫Â∫èÂ§ÑÁêÜÁöÑ„ÄÇËøôÊ†∑ÁöÑÈ°∫ Â∫è‰øùËØÅÂØπÊØè‰∏™ÂàÜÊàêÁîüÊàê‰∏Ä‰∏™ÊúâÂ∫èÁöÑËæìÂá∫Êñá‰ª∂ÔºåËøôÂØπ‰∫éÈúÄË¶ÅÂØπËæìÂá∫Êñá‰ª∂Êåâ key ÂÄºÈöèÊú∫Â≠òÂèñÁöÑÂ∫îÁî®ÈùûÂ∏∏ÊúâÊÑè‰πâÔºå ÂØπÂú®ÊéíÂ∫èËæìÂá∫ÁöÑÊï∞ÊçÆÈõÜ‰πüÂæàÊúâÂ∏ÆÂä©„ÄÇ ### Combiner ÂáΩÊï∞ Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåMap ÂáΩÊï∞‰∫ßÁîüÁöÑ‰∏≠Èó¥ key ÂÄºÁöÑÈáçÂ§çÊï∞ÊçÆ‰ºöÂç†ÂæàÂ§ßÁöÑÊØîÈáçÔºåÂπ∂‰∏îÔºåÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Reduce ÂáΩ Êï∞Êª°Ë∂≥ÁªìÂêàÂæãÂíå‰∫§Êç¢Âæã„ÄÇÂú® 2.1 ËäÇÁöÑËØçÊï∞ÁªüËÆ°Á®ãÂ∫èÊòØ‰∏™ÂæàÂ•ΩÁöÑ‰æãÂ≠ê„ÄÇÁî±‰∫éËØçÈ¢ëÁéáÂÄæÂêë‰∫é‰∏Ä‰∏™ zipf ÂàÜÂ∏É(ÈΩêÂ§´ÂàÜÂ∏É)ÔºåÊØè‰∏™ Map ‰ªªÂä°Â∞Ü‰∫ßÁîüÊàêÂçÉ‰∏ä‰∏á‰∏™ËøôÊ†∑ÁöÑËÆ∞ÂΩï&lt;the,1&gt;„ÄÇÊâÄÊúâÁöÑËøô‰∫õËÆ∞ÂΩïÂ∞ÜÈÄöËøáÁΩëÁªúË¢´ÂèëÈÄÅÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑ Reduce ‰ªªÂä°ÔºåÁÑ∂ÂêéÁî±Ëøô‰∏™ Reduce ‰ªªÂä°ÊääÊâÄÊúâËøô‰∫õËÆ∞ÂΩïÁ¥ØÂä†Ëµ∑Êù•‰∫ßÁîü‰∏Ä‰∏™Êï∞Â≠ó„ÄÇÊàë‰ª¨ÂÖÅËÆ∏Áî®Êà∑ÊåáÂÆö‰∏Ä‰∏™ÂèØÈÄâ ÁöÑ combiner ÂáΩÊï∞Ôºåcombiner ÂáΩÊï∞È¶ñÂÖàÂú®Êú¨Âú∞Â∞ÜËøô‰∫õËÆ∞ÂΩïËøõË°å‰∏ÄÊ¨°ÂêàÂπ∂ÔºåÁÑ∂ÂêéÂ∞ÜÂêàÂπ∂ÁöÑÁªìÊûúÂÜçÈÄöËøáÁΩëÁªúÂèëÈÄÅÂá∫Âéª„ÄÇ Combiner ÂáΩÊï∞Âú®ÊØèÂè∞ÊâßË°å Map ‰ªªÂä°ÁöÑÊú∫Âô®‰∏äÈÉΩ‰ºöË¢´ÊâßË°å‰∏ÄÊ¨°„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåCombiner Âíå Reduce ÂáΩÊï∞ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇCombiner ÂáΩÊï∞Âíå Reduce ÂáΩÊï∞‰πãÈó¥ÂîØ‰∏ÄÁöÑÂå∫Âà´ÊòØ MapReduce Â∫ìÊÄéÊ†∑ÊéßÂà∂ÂáΩÊï∞ÁöÑËæìÂá∫„ÄÇReduce ÂáΩÊï∞ÁöÑ ËæìÂá∫Ë¢´‰øùÂ≠òÂú®ÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂ÈáåÔºåËÄå Combiner ÂáΩÊï∞ÁöÑËæìÂá∫Ë¢´ÂÜôÂà∞‰∏≠Èó¥Êñá‰ª∂ÈáåÔºåÁÑ∂ÂêéË¢´ÂèëÈÄÅÁªô Reduce ‰ªªÂä°„ÄÇ ÈÉ®ÂàÜÁöÑÂêàÂπ∂‰∏≠Èó¥ÁªìÊûúÂèØ‰ª•ÊòæËëóÁöÑÊèêÈ´ò‰∏Ä‰∫õ MapReduce Êìç‰ΩúÁöÑÈÄüÂ∫¶„ÄÇÈôÑÂΩï A ÂåÖÂê´‰∏Ä‰∏™‰ΩøÁî® combiner ÂáΩÊï∞ ÁöÑ‰æãÂ≠ê„ÄÇ ### ËæìÂÖ•ÂíåËæìÂá∫ÁöÑÁ±ªÂûã MapReduce Â∫ìÊîØÊåÅÂá†Áßç‰∏çÂêåÁöÑÊ†ºÂºèÁöÑËæìÂÖ•Êï∞ÊçÆ„ÄÇÊØîÂ¶ÇÔºåÊñáÊú¨Ê®°ÂºèÁöÑËæìÂÖ•Êï∞ÊçÆÁöÑÊØè‰∏ÄË°åË¢´ËßÜ‰∏∫ÊòØ‰∏Ä‰∏™ key/value pair„ÄÇkey ÊòØÊñá‰ª∂ÁöÑÂÅèÁßªÈáèÔºåvalue ÊòØÈÇ£‰∏ÄË°åÁöÑÂÜÖÂÆπ„ÄÇÂè¶Â§ñ‰∏ÄÁßçÂ∏∏ËßÅÁöÑÊ†ºÂºèÊòØ‰ª• key ËøõË°åÊéíÂ∫èÊù•Â≠òÂÇ® ÁöÑ key/value pair ÁöÑÂ∫èÂàó„ÄÇÊØèÁßçËæìÂÖ•Á±ªÂûãÁöÑÂÆûÁé∞ÈÉΩÂøÖÈ°ªËÉΩÂ§üÊääËæìÂÖ•Êï∞ÊçÆÂàÜÂâ≤ÊàêÊï∞ÊçÆÁâáÊÆµÔºåËØ•Êï∞ÊçÆÁâáÊÆµËÉΩÂ§üÁî±Âçï Áã¨ÁöÑ Map ‰ªªÂä°Êù•ËøõË°åÂêéÁª≠Â§ÑÁêÜ(‰æãÂ¶ÇÔºåÊñáÊú¨Ê®°ÂºèÁöÑËåÉÂõ¥ÂàÜÂâ≤ÂøÖÈ°ªÁ°Æ‰øù‰ªÖ‰ªÖÂú®ÊØèË°åÁöÑËæπÁïåËøõË°åËåÉÂõ¥ÂàÜÂâ≤)„ÄÇËôΩÁÑ∂ Â§ßÂ§öÊï∞ MapReduce ÁöÑ‰ΩøÁî®ËÄÖ‰ªÖ‰ªÖ‰ΩøÁî®ÂæàÂ∞ëÁöÑÈ¢ÑÂÆö‰πâËæìÂÖ•Á±ªÂûãÂ∞±Êª°Ë∂≥Ë¶ÅÊ±Ç‰∫ÜÔºå‰ΩÜÊòØ‰ΩøÁî®ËÄÖ‰æùÁÑ∂ÂèØ‰ª•ÈÄöËøáÊèê‰æõ‰∏Ä ‰∏™ÁÆÄÂçïÁöÑ Reader Êé•Âè£ÂÆûÁé∞Â∞±ËÉΩÂ§üÊîØÊåÅ‰∏Ä‰∏™Êñ∞ÁöÑËæìÂÖ•Á±ªÂûã„ÄÇ Reader Âπ∂Èùû‰∏ÄÂÆöË¶Å‰ªéÊñá‰ª∂‰∏≠ËØªÂèñÊï∞ÊçÆÔºåÊØîÂ¶ÇÔºåÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÂÆûÁé∞‰∏Ä‰∏™‰ªéÊï∞ÊçÆÂ∫ìÈáåËØªËÆ∞ÂΩïÁöÑ ReaderÔºå ÊàñËÄÖ‰ªéÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑËØªÂèñÊï∞ÊçÆÁöÑ Reader„ÄÇ Á±ª‰ººÁöÑÔºåÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∫õÈ¢ÑÂÆö‰πâÁöÑËæìÂá∫Êï∞ÊçÆÁöÑÁ±ªÂûãÔºåÈÄöËøáËøô‰∫õÈ¢ÑÂÆö‰πâÁ±ªÂûãËÉΩÂ§ü‰∫ßÁîü‰∏çÂêåÊ†ºÂºèÁöÑÊï∞ÊçÆ„ÄÇÁî® Êà∑ÈááÁî®Á±ª‰ººÊ∑ªÂä†Êñ∞ÁöÑËæìÂÖ•Êï∞ÊçÆÁ±ªÂûãÁöÑÊñπÂºèÂ¢ûÂä†Êñ∞ÁöÑËæìÂá∫Á±ªÂûã„ÄÇ ### ÂâØ‰ΩúÁî® Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåMapReduce ÁöÑ‰ΩøÁî®ËÄÖÂèëÁé∞ÔºåÂ¶ÇÊûúÂú® Map Âíå/Êàñ Reduce Êìç‰ΩúËøáÁ®ã‰∏≠Â¢ûÂä†ËæÖÂä©ÁöÑËæìÂá∫Êñá‰ª∂‰ºö ÊØîËæÉÁúÅ‰∫ã„ÄÇÊàë‰ª¨‰æùÈù†Á®ãÂ∫è writer ÊääËøôÁßç‚ÄúÂâØ‰ΩúÁî®‚ÄùÂèòÊàêÂéüÂ≠êÁöÑÂíåÂπÇÁ≠âÁöÑ3„ÄÇÈÄöÂ∏∏Â∫îÁî®Á®ãÂ∫èÈ¶ñÂÖàÊääËæìÂá∫ÁªìÊûúÂÜôÂà∞ ‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂‰∏≠ÔºåÂú®ËæìÂá∫ÂÖ®ÈÉ®Êï∞ÊçÆ‰πãÂêéÔºåÂú®‰ΩøÁî®Á≥ªÁªüÁ∫ßÁöÑÂéüÂ≠êÊìç‰Ωú rename ÈáçÊñ∞ÂëΩÂêçËøô‰∏™‰∏¥Êó∂Êñá‰ª∂„ÄÇ Â¶ÇÊûú‰∏Ä‰∏™‰ªªÂä°‰∫ßÁîü‰∫ÜÂ§ö‰∏™ËæìÂá∫Êñá‰ª∂ÔºåÊàë‰ª¨Ê≤°ÊúâÊèê‰æõÁ±ª‰ºº‰∏§Èò∂ÊÆµÊèê‰∫§ÁöÑÂéüÂ≠êÊìç‰ΩúÊîØÊåÅËøôÁßçÊÉÖÂÜµ„ÄÇÂõ†Ê≠§ÔºåÂØπ ‰∫é‰ºö‰∫ßÁîüÂ§ö‰∏™ËæìÂá∫Êñá‰ª∂„ÄÅÂπ∂‰∏îÂØπ‰∫éË∑®Êñá‰ª∂Êúâ‰∏ÄËá¥ÊÄßË¶ÅÊ±ÇÁöÑ‰ªªÂä°ÔºåÈÉΩÂøÖÈ°ªÊòØÁ°ÆÂÆöÊÄßÁöÑ‰ªªÂä°„ÄÇ‰ΩÜÊòØÂú®ÂÆûÈôÖÂ∫îÁî®Ëøá Á®ã‰∏≠ÔºåËøô‰∏™ÈôêÂà∂ËøòÊ≤°ÊúâÁªôÊàë‰ª¨Â∏¶Êù•ËøáÈ∫ªÁÉ¶„ÄÇ### Ë∑≥ËøáÊçüÂùèÁöÑËÆ∞ÂΩï ÊúâÊó∂ÂÄôÔºåÁî®Êà∑Á®ãÂ∫è‰∏≠ÁöÑ bug ÂØºËá¥ Map ÊàñËÄÖ Reduce ÂáΩÊï∞Âú®Â§ÑÁêÜÊüê‰∫õËÆ∞ÂΩïÁöÑÊó∂ÂÄô crash ÊéâÔºåMapReduce Êìç‰Ωú Êó†Ê≥ïÈ°∫Âà©ÂÆåÊàê„ÄÇÊÉØÂ∏∏ÁöÑÂÅöÊ≥ïÊòØ‰øÆÂ§ç bug ÂêéÂÜçÊ¨°ÊâßË°å MapReduce Êìç‰ΩúÔºå‰ΩÜÊòØÔºåÊúâÊó∂ÂÄôÊâæÂá∫Ëøô‰∫õ bug Âπ∂‰øÆÂ§çÂÆÉ‰ª¨ ‰∏çÊòØ‰∏Ä‰ª∂ÂÆπÊòìÁöÑ‰∫ãÊÉÖ;Ëøô‰∫õ bug ‰πüËÆ∏ÊòØÂú®Á¨¨‰∏âÊñπÂ∫ìÈáåËæπÔºåËÄåÊàë‰ª¨ÊâãÂ§¥Ê≤°ÊúâËøô‰∫õÂ∫ìÁöÑÊ∫ê‰ª£Á†Å„ÄÇËÄå‰∏îÂú®ÂæàÂ§öÊó∂ÂÄôÔºå ÂøΩÁï•‰∏Ä‰∫õÊúâÈóÆÈ¢òÁöÑËÆ∞ÂΩï‰πüÊòØÂèØ‰ª•Êé•ÂèóÁöÑÔºåÊØîÂ¶ÇÂú®‰∏Ä‰∏™Â∑®Â§ßÁöÑÊï∞ÊçÆÈõÜ‰∏äËøõË°åÁªüËÆ°ÂàÜÊûêÁöÑÊó∂ÂÄô„ÄÇÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏ÄÁßç ÊâßË°åÊ®°ÂºèÔºåÂú®ËøôÁßçÊ®°Âºè‰∏ãÔºå‰∏∫‰∫Ü‰øùËØÅ‰øùËØÅÊï¥‰∏™Â§ÑÁêÜËÉΩÁªßÁª≠ËøõË°åÔºåMapReduce ‰ºöÊ£ÄÊµãÂì™‰∫õËÆ∞ÂΩïÂØºËá¥Á°ÆÂÆöÊÄßÁöÑ crashÔºå Âπ∂‰∏îË∑≥ËøáËøô‰∫õËÆ∞ÂΩï‰∏çÂ§ÑÁêÜ„ÄÇ ÊØè‰∏™ worker ËøõÁ®ãÈÉΩËÆæÁΩÆ‰∫Ü‰ø°Âè∑Â§ÑÁêÜÂáΩÊï∞ÊçïËé∑ÂÜÖÂ≠òÊÆµÂºÇÂ∏∏(segmentation violation)ÂíåÊÄªÁ∫øÈîôËØØ(bus error)„ÄÇ Âú®ÊâßË°å Map ÊàñËÄÖ Reduce Êìç‰Ωú‰πãÂâçÔºåMapReduce Â∫ìÈÄöËøáÂÖ®Â±ÄÂèòÈáè‰øùÂ≠òËÆ∞ÂΩïÂ∫èÂè∑„ÄÇÂ¶ÇÊûúÁî®Êà∑Á®ãÂ∫èËß¶Âèë‰∫Ü‰∏Ä‰∏™Á≥ª Áªü‰ø°Âè∑ÔºåÊ∂àÊÅØÂ§ÑÁêÜÂáΩÊï∞Â∞ÜÁî®‚ÄúÊúÄÂêé‰∏ÄÂè£Ê∞î‚ÄùÈÄöËøá UDP ÂåÖÂêë master ÂèëÈÄÅÂ§ÑÁêÜÁöÑÊúÄÂêé‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÂ∫èÂè∑„ÄÇÂΩì master ÁúãÂà∞Âú®Â§ÑÁêÜÊüêÊù°ÁâπÂÆöËÆ∞ÂΩï‰∏çÊ≠¢Â§±Ë¥•‰∏ÄÊ¨°Êó∂Ôºåmaster Â∞±Ê†áÂøóÁùÄÊù°ËÆ∞ÂΩïÈúÄË¶ÅË¢´Ë∑≥ËøáÔºåÂπ∂‰∏îÂú®‰∏ãÊ¨°ÈáçÊñ∞ÊâßË°åÁõ∏ÂÖ≥ÁöÑ Map ÊàñËÄÖ Reduce ‰ªªÂä°ÁöÑÊó∂ÂÄôË∑≥ËøáËøôÊù°ËÆ∞ÂΩï„ÄÇ ### Êú¨Âú∞ÊâßË°å Ë∞ÉËØï Map Âíå Reduce ÂáΩÊï∞ÁöÑ bug ÊòØÈùûÂ∏∏Âõ∞ÈöæÁöÑÔºåÂõ†‰∏∫ÂÆûÈôÖÊâßË°åÊìç‰ΩúÊó∂‰∏ç‰ΩÜÊòØÂàÜÂ∏ÉÂú®Á≥ªÁªü‰∏≠ÊâßË°åÁöÑÔºåËÄå‰∏î ÈÄöÂ∏∏ÊòØÂú®Â•ΩÂá†ÂçÉÂè∞ËÆ°ÁÆóÊú∫‰∏äÊâßË°åÔºåÂÖ∑‰ΩìÁöÑÊâßË°å‰ΩçÁΩÆÊòØÁî± master ËøõË°åÂä®ÊÄÅË∞ÉÂ∫¶ÁöÑÔºåËøôÂèàÂ§ßÂ§ßÂ¢ûÂä†‰∫ÜË∞ÉËØïÁöÑÈöæÂ∫¶„ÄÇ ‰∏∫‰∫ÜÁÆÄÂåñË∞ÉËØï„ÄÅprofile ÂíåÂ∞èËßÑÊ®°ÊµãËØïÔºåÊàë‰ª¨ÂºÄÂèë‰∫Ü‰∏ÄÂ•ó MapReduce Â∫ìÁöÑÊú¨Âú∞ÂÆûÁé∞ÁâàÊú¨ÔºåÈÄöËøá‰ΩøÁî®Êú¨Âú∞ÁâàÊú¨ÁöÑ MapReduce Â∫ìÔºåMapReduce Êìç‰ΩúÂú®Êú¨Âú∞ËÆ°ÁÆóÊú∫‰∏äÈ°∫Â∫èÁöÑÊâßË°å„ÄÇÁî®Êà∑ÂèØ‰ª•ÊéßÂà∂ MapReduce Êìç‰ΩúÁöÑÊâßË°åÔºåÂèØ‰ª•Êää Êìç‰ΩúÈôêÂà∂Âà∞ÁâπÂÆöÁöÑ Map ‰ªªÂä°‰∏ä„ÄÇÁî®Êà∑ÈÄöËøáËÆæÂÆöÁâπÂà´ÁöÑÊ†áÂøóÊù•Âú®Êú¨Âú∞ÊâßË°å‰ªñ‰ª¨ÁöÑÁ®ãÂ∫èÔºå‰πãÂêéÂ∞±ÂèØ‰ª•ÂæàÂÆπÊòìÁöÑ‰Ωø Áî®Êú¨Âú∞Ë∞ÉËØïÂíåÊµãËØïÂ∑•ÂÖ∑(ÊØîÂ¶Ç gdb)„ÄÇ ### Áä∂ÊÄÅ‰ø°ÊÅØ master ‰ΩøÁî®ÂµåÂÖ•ÂºèÁöÑ HTTP ÊúçÂä°Âô®(Â¶Ç Jetty)ÊòæÁ§∫‰∏ÄÁªÑÁä∂ÊÄÅ‰ø°ÊÅØÈ°µÈù¢ÔºåÁî®Êà∑ÂèØ‰ª•ÁõëÊéßÂêÑÁßçÊâßË°åÁä∂ÊÄÅ„ÄÇÁä∂ ÊÄÅ‰ø°ÊÅØÈ°µÈù¢ÊòæÁ§∫‰∫ÜÂåÖÊã¨ËÆ°ÁÆóÊâßË°åÁöÑËøõÂ∫¶ÔºåÊØîÂ¶ÇÂ∑≤ÁªèÂÆåÊàê‰∫ÜÂ§öÂ∞ë‰ªªÂä°„ÄÅÊúâÂ§öÂ∞ë‰ªªÂä°Ê≠£Âú®Â§ÑÁêÜ„ÄÅËæìÂÖ•ÁöÑÂ≠óËäÇÊï∞„ÄÅ ‰∏≠Èó¥Êï∞ÊçÆÁöÑÂ≠óËäÇÊï∞„ÄÅËæìÂá∫ÁöÑÂ≠óËäÇÊï∞„ÄÅÂ§ÑÁêÜÁôæÂàÜÊØîÁ≠âÁ≠â„ÄÇÈ°µÈù¢ËøòÂåÖÂê´‰∫ÜÊåáÂêëÊØè‰∏™‰ªªÂä°ÁöÑ stderr Âíå stdout Êñá‰ª∂ÁöÑÈìæ Êé•„ÄÇÁî®Êà∑Ê†πÊçÆËøô‰∫õÊï∞ÊçÆÈ¢ÑÊµãËÆ°ÁÆóÈúÄË¶ÅÊâßË°åÂ§ßÁ∫¶Â§öÈïøÊó∂Èó¥„ÄÅÊòØÂê¶ÈúÄË¶ÅÂ¢ûÂä†È¢ùÂ§ñÁöÑËÆ°ÁÆóËµÑÊ∫ê„ÄÇËøô‰∫õÈ°µÈù¢‰πüÂèØ‰ª•Áî® Êù•ÂàÜÊûê‰ªÄ‰πàÊó∂ÂÄôËÆ°ÁÆóÊâßË°åÁöÑÊØîÈ¢ÑÊúüÁöÑË¶ÅÊÖ¢„ÄÇ Âè¶Â§ñÔºåÂ§Ñ‰∫éÊúÄÈ°∂Â±ÇÁöÑÁä∂ÊÄÅÈ°µÈù¢ÊòæÁ§∫‰∫ÜÂì™‰∫õ worker Â§±Êïà‰∫ÜÔºå‰ª•Âèä‰ªñ‰ª¨Â§±ÊïàÁöÑÊó∂ÂÄôÊ≠£Âú®ËøêË°åÁöÑ Map Âíå Reduce ‰ªªÂä°„ÄÇËøô‰∫õ‰ø°ÊÅØÂØπ‰∫éË∞ÉËØïÁî®Êà∑‰ª£Á†Å‰∏≠ÁöÑ bug ÂæàÊúâÂ∏ÆÂä©„ÄÇ### ËÆ°Êï∞Âô® MapReduce Â∫ì‰ΩøÁî®ËÆ°Êï∞Âô®ÁªüËÆ°‰∏çÂêå‰∫ã‰ª∂ÂèëÁîüÊ¨°Êï∞„ÄÇÊØîÂ¶ÇÔºåÁî®Êà∑ÂèØËÉΩÊÉ≥ÁªüËÆ°Â∑≤ÁªèÂ§ÑÁêÜ‰∫ÜÂ§öÂ∞ë‰∏™ÂçïËØç„ÄÅÂ∑≤Áªè Á¥¢ÂºïÁöÑÂ§öÂ∞ëÁØá German ÊñáÊ°£Á≠âÁ≠â„ÄÇ ‰∏∫‰∫Ü‰ΩøÁî®Ëøô‰∏™ÁâπÊÄßÔºåÁî®Êà∑Âú®Á®ãÂ∫è‰∏≠ÂàõÂª∫‰∏Ä‰∏™ÂëΩÂêçÁöÑËÆ°Êï∞Âô®ÂØπË±°ÔºåÂú® Map Âíå Reduce ÂáΩÊï∞‰∏≠Áõ∏Â∫îÁöÑÂ¢ûÂä†ËÆ° Êï∞Âô®ÁöÑÂÄº„ÄÇ‰æãÂ¶Ç: Counter* uppercase;uppercase = GetCounter(‚Äúuppercase‚Äù);map(String name, String contents): for each word w in contents: if (IsCapitalized(w)): uppercase-&gt;Increment(); EmitIntermediate(w, ‚Äú1‚Ä≤‚Ä≤);1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798 Ëøô‰∫õËÆ°Êï∞Âô®ÁöÑÂÄºÂë®ÊúüÊÄßÁöÑ‰ªéÂêÑ‰∏™ÂçïÁã¨ÁöÑ worker Êú∫Âô®‰∏ä‰º†ÈÄíÁªô maste(r ÈôÑÂä†Âú® ping ÁöÑÂ∫îÁ≠îÂåÖ‰∏≠‰º†ÈÄí)„ÄÇmaster ÊääÊâßË°åÊàêÂäüÁöÑ Map Âíå Reduce ‰ªªÂä°ÁöÑËÆ°Êï∞Âô®ÂÄºËøõË°åÁ¥ØËÆ°ÔºåÂΩì MapReduce Êìç‰ΩúÂÆåÊàê‰πãÂêéÔºåËøîÂõûÁªôÁî®Êà∑‰ª£Á†Å„ÄÇ ËÆ°Êï∞Âô®ÂΩìÂâçÁöÑÂÄº‰πü‰ºöÊòæÁ§∫Âú® master ÁöÑÁä∂ÊÄÅÈ°µÈù¢‰∏äÔºåËøôÊ†∑Áî®Êà∑Â∞±ÂèØ‰ª•ÁúãÂà∞ÂΩìÂâçËÆ°ÁÆóÁöÑËøõÂ∫¶„ÄÇÂΩìÁ¥ØÂä†ËÆ°Êï∞Âô® ÁöÑÂÄºÁöÑÊó∂ÂÄôÔºåmaster Ë¶ÅÊ£ÄÊü•ÈáçÂ§çËøêË°åÁöÑ Map ÊàñËÄÖ Reduce ‰ªªÂä°ÔºåÈÅøÂÖçÈáçÂ§çÁ¥ØÂä†(‰πãÂâçÊèêÂà∞ÁöÑÂ§áÁî®‰ªªÂä°ÂíåÂ§±Êïà ÂêéÈáçÊñ∞ÊâßË°å‰ªªÂä°Ëøô‰∏§ÁßçÊÉÖÂÜµ‰ºöÂØºËá¥Áõ∏ÂêåÁöÑ‰ªªÂä°Ë¢´Â§öÊ¨°ÊâßË°å)„ÄÇ Êúâ‰∫õËÆ°Êï∞Âô®ÁöÑÂÄºÊòØÁî± MapReduce Â∫ìËá™Âä®Áª¥ÊåÅÁöÑÔºåÊØîÂ¶ÇÂ∑≤ÁªèÂ§ÑÁêÜÁöÑËæìÂÖ•ÁöÑ key/value pair ÁöÑÊï∞Èáè„ÄÅËæìÂá∫ÁöÑ key/value pair ÁöÑÊï∞ÈáèÁ≠âÁ≠â„ÄÇ ËÆ°Êï∞Âô®Êú∫Âà∂ÂØπ‰∫é MapReduce Êìç‰ΩúÁöÑÂÆåÊï¥ÊÄßÊ£ÄÊü•ÈùûÂ∏∏ÊúâÁî®„ÄÇÊØîÂ¶ÇÔºåÂú®Êüê‰∫õ MapReduce Êìç‰Ωú‰∏≠ÔºåÁî®Êà∑ÈúÄË¶ÅÁ°Æ ‰øùËæìÂá∫ÁöÑ key value pair Á≤æÁ°ÆÁöÑÁ≠â‰∫éËæìÂÖ•ÁöÑ key value pairÔºåÊàñËÄÖÂ§ÑÁêÜÁöÑ German ÊñáÊ°£Êï∞ÈáèÂú®Â§ÑÁêÜÁöÑÊï¥‰∏™ÊñáÊ°£Êï∞ Èáè‰∏≠Â±û‰∫éÂêàÁêÜËåÉÂõ¥„ÄÇ &#123;% note info %&#125;## ÊÄßËÉΩ&#123;% endnote %&#125; Êú¨ËäÇÊàë‰ª¨Áî®Âú®‰∏Ä‰∏™Â§ßÂûãÈõÜÁæ§‰∏äËøêË°åÁöÑ‰∏§‰∏™ËÆ°ÁÆóÊù•Ë°°Èáè MapReduce ÁöÑÊÄßËÉΩ„ÄÇ‰∏Ä‰∏™ËÆ°ÁÆóÂú®Â§ßÁ∫¶ 1TB ÁöÑÊï∞ÊçÆ‰∏≠ ËøõË°åÁâπÂÆöÁöÑÊ®°ÂºèÂåπÈÖçÔºåÂè¶‰∏Ä‰∏™ËÆ°ÁÆóÂØπÂ§ßÁ∫¶ 1TB ÁöÑÊï∞ÊçÆËøõË°åÊéíÂ∫è„ÄÇ Ëøô‰∏§‰∏™Á®ãÂ∫èÂú®Â§ßÈáèÁöÑ‰ΩøÁî® MapReduce ÁöÑÂÆûÈôÖÂ∫îÁî®‰∏≠ÊòØÈùûÂ∏∏ÂÖ∏ÂûãÁöÑ ‚Äî ‰∏ÄÁ±ªÊòØÂØπÊï∞ÊçÆÊ†ºÂºèËøõË°åËΩ¨Êç¢Ôºå‰ªé‰∏Ä ÁßçË°®Áé∞ÂΩ¢ÂºèËΩ¨Êç¢‰∏∫Âè¶Â§ñ‰∏ÄÁßçË°®Áé∞ÂΩ¢Âºè;Âè¶‰∏ÄÁ±ªÊòØ‰ªéÊµ∑ÈáèÊï∞ÊçÆ‰∏≠ÊäΩÂèñÂ∞ëÈÉ®ÂàÜÁöÑÁî®Êà∑ÊÑüÂÖ¥Ë∂£ÁöÑÊï∞ÊçÆ„ÄÇ ### ÈõÜÁæ§ÈÖçÁΩÆ ÊâÄÊúâËøô‰∫õÁ®ãÂ∫èÈÉΩËøêË°åÂú®‰∏Ä‰∏™Â§ßÁ∫¶Áî± 1800 Âè∞Êú∫Âô®ÊûÑÊàêÁöÑÈõÜÁæ§‰∏ä„ÄÇÊØèÂè∞Êú∫Âô®ÈÖçÁΩÆ 2 ‰∏™ 2G ‰∏ªÈ¢ë„ÄÅÊîØÊåÅË∂ÖÁ∫øÁ®ã ÁöÑ Intel Xeon Â§ÑÁêÜÂô®Ôºå4GB ÁöÑÁâ©ÁêÜÂÜÖÂ≠òÔºå‰∏§‰∏™ 160GB ÁöÑ IDE Á°¨ÁõòÂíå‰∏Ä‰∏™ÂçÉÂÖÜ‰ª•Â§™ÁΩëÂç°„ÄÇËøô‰∫õÊú∫Âô®ÈÉ®ÁΩ≤Âú®‰∏Ä‰∏™ ‰∏§Â±ÇÁöÑÊ†ëÂΩ¢‰∫§Êç¢ÁΩëÁªú‰∏≠ÔºåÂú® root ËäÇÁÇπÂ§ßÊ¶ÇÊúâ 100-200GBPS ÁöÑ‰º†ËæìÂ∏¶ÂÆΩ„ÄÇÊâÄÊúâËøô‰∫õÊú∫Âô®ÈÉΩÈááÁî®Áõ∏ÂêåÁöÑÈÉ®ÁΩ≤(ÂØπ Á≠âÈÉ®ÁΩ≤)ÔºåÂõ†Ê≠§‰ªªÊÑè‰∏§ÁÇπ‰πãÈó¥ÁöÑÁΩëÁªúÊù•ÂõûÊó∂Èó¥Â∞è‰∫é 1 ÊØ´Áßí„ÄÇ Âú® 4GB ÂÜÖÂ≠òÈáåÔºåÂ§ßÊ¶ÇÊúâ 1-1.5G Áî®‰∫éËøêË°åÂú®ÈõÜÁæ§‰∏äÁöÑÂÖ∂‰ªñ‰ªªÂä°„ÄÇÊµãËØïÁ®ãÂ∫èÂú®Âë®Êú´‰∏ãÂçàÂºÄÂßãÊâßË°åÔºåËøôÊó∂‰∏ªÊú∫ ÁöÑ CPU„ÄÅÁ£ÅÁõòÂíåÁΩëÁªúÂü∫Êú¨‰∏äÂ§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅ„ÄÇ ### GREP Ëøô‰∏™ÂàÜÂ∏ÉÂºèÁöÑ grep Á®ãÂ∫èÈúÄË¶ÅÊâ´ÊèèÂ§ßÊ¶Ç 10 ÁöÑ 10 Ê¨°Êñπ‰∏™Áî± 100 ‰∏™Â≠óËäÇÁªÑÊàêÁöÑËÆ∞ÂΩïÔºåÊü•ÊâæÂá∫Áé∞Ê¶ÇÁéáËæÉÂ∞èÁöÑ 3 ‰∏™Â≠óÁ¨¶ÁöÑÊ®°Âºè(Ëøô‰∏™Ê®°ÂºèÂú® 92337 ‰∏™ËÆ∞ÂΩï‰∏≠Âá∫Áé∞)„ÄÇËæìÂÖ•Êï∞ÊçÆË¢´ÊãÜÂàÜÊàêÂ§ßÁ∫¶ 64M ÁöÑ Block(M=15000)ÔºåÊï¥‰∏™ ËæìÂá∫Êï∞ÊçÆÂ≠òÊîæÂú®‰∏Ä‰∏™Êñá‰ª∂‰∏≠(R=1)„ÄÇ![](http://oliji9s3j.bkt.clouddn.com/15133914679471.jpg) Âõæ 2 ÊòæÁ§∫‰∫ÜËøô‰∏™ËøêÁÆóÈöèÊó∂Èó¥ÁöÑÂ§ÑÁêÜËøáÁ®ã„ÄÇÂÖ∂‰∏≠ Y ËΩ¥Ë°®Á§∫ËæìÂÖ•Êï∞ÊçÆÁöÑÂ§ÑÁêÜÈÄüÂ∫¶„ÄÇÂ§ÑÁêÜÈÄüÂ∫¶ÈöèÁùÄÂèÇ‰∏é MapReduce ËÆ°ÁÆóÁöÑÊú∫Âô®Êï∞ÈáèÁöÑÂ¢ûÂä†ËÄåÂ¢ûÂä†ÔºåÂΩì 1764 Âè∞ worker ÂèÇ‰∏éËÆ°ÁÆóÁöÑÊó∂ÔºåÂ§ÑÁêÜÈÄüÂ∫¶ËææÂà∞‰∫Ü 30GB/s„ÄÇÂΩì Map ‰ªªÂä°ÁªìÊùüÁöÑÊó∂ÂÄôÔºåÂç≥Âú®ËÆ°ÁÆóÂºÄÂßãÂêé 80 ÁßíÔºåËæìÂÖ•ÁöÑÂ§ÑÁêÜÈÄüÂ∫¶ÈôçÂà∞ 0„ÄÇÊï¥‰∏™ËÆ°ÁÆóËøáÁ®ã‰ªéÂºÄÂßãÂà∞ÁªìÊùü‰∏ÄÂÖ±Ëä±‰∫Ü Â§ßÊ¶Ç 150 Áßí„ÄÇËøôÂåÖÊã¨‰∫ÜÂ§ßÁ∫¶‰∏ÄÂàÜÈíüÁöÑÂàùÂßãÂêØÂä®Èò∂ÊÆµ„ÄÇÂàùÂßãÂêØÂä®Èò∂ÊÆµÊ∂àËÄóÁöÑÊó∂Èó¥ÂåÖÊã¨‰∫ÜÊòØÊääËøô‰∏™Á®ãÂ∫è‰º†ÈÄÅÂà∞ÂêÑ ‰∏™ worker Êú∫Âô®‰∏äÁöÑÊó∂Èó¥„ÄÅÁ≠âÂæÖ GFS Êñá‰ª∂Á≥ªÁªüÊâìÂºÄ 1000 ‰∏™ËæìÂÖ•Êñá‰ª∂ÈõÜÂêàÁöÑÊó∂Èó¥„ÄÅËé∑ÂèñÁõ∏ÂÖ≥ÁöÑÊñá‰ª∂Êú¨Âú∞‰ΩçÁΩÆ‰ºò Âåñ‰ø°ÊÅØÁöÑÊó∂Èó¥„ÄÇ ### ÊéíÂ∫è ÊéíÂ∫èÁ®ãÂ∫èÂ§ÑÁêÜ 10 ÁöÑ 10 Ê¨°Êñπ‰∏™ 100 ‰∏™Â≠óËäÇÁªÑÊàêÁöÑËÆ∞ÂΩï(Â§ßÊ¶Ç 1TB ÁöÑÊï∞ÊçÆ)„ÄÇËøô‰∏™Á®ãÂ∫èÊ®°‰ªø TeraSort benchmark[10]„ÄÇ ÊéíÂ∫èÁ®ãÂ∫èÁî±‰∏çÂà∞ 50 Ë°å‰ª£Á†ÅÁªÑÊàê„ÄÇÂè™Êúâ‰∏âË°åÁöÑ Map ÂáΩÊï∞‰ªéÊñáÊú¨Ë°å‰∏≠Ëß£ÊûêÂá∫ 10 ‰∏™Â≠óËäÇÁöÑ key ÂÄº‰Ωú‰∏∫ÊéíÂ∫èÁöÑ keyÔºåÂπ∂‰∏îÊääËøô‰∏™ key ÂíåÂéüÂßãÊñáÊú¨Ë°å‰Ωú‰∏∫‰∏≠Èó¥ÁöÑ key/value pair ÂÄºËæìÂá∫„ÄÇÊàë‰ª¨‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂÜÖÁΩÆÁöÑÊÅíÁ≠âÂáΩÊï∞‰Ωú‰∏∫ Reduce Êìç‰ΩúÂáΩÊï∞„ÄÇËøô‰∏™ÂáΩÊï∞Êää‰∏≠Èó¥ÁöÑ key/value pair ÂÄº‰∏ç‰Ωú‰ªª‰ΩïÊîπÂèòËæìÂá∫„ÄÇÊúÄÁªàÊéíÂ∫èÁªìÊûúËæìÂá∫Âà∞‰∏§Ë∑ØÂ§çÂà∂ÁöÑGFS Êñá‰ª∂Á≥ªÁªü(‰πüÂ∞±ÊòØËØ¥ÔºåÁ®ãÂ∫èËæìÂá∫ 2TB ÁöÑÊï∞ÊçÆ)„ÄÇ Â¶ÇÂâçÊâÄËø∞ÔºåËæìÂÖ•Êï∞ÊçÆË¢´ÂàÜÊàê 64MB ÁöÑ Block(M=15000)„ÄÇÊàë‰ª¨ÊääÊéíÂ∫èÂêéÁöÑËæìÂá∫ÁªìÊûúÂàÜÂå∫ÂêéÂ≠òÂÇ®Âà∞ 4000 ‰∏™Êñá‰ª∂(R=4000)„ÄÇÂàÜÂå∫ÂáΩÊï∞‰ΩøÁî® key ÁöÑÂéüÂßãÂ≠óËäÇÊù•ÊääÊï∞ÊçÆÂàÜÂå∫Âà∞ R ‰∏™ÁâáÊÆµ‰∏≠„ÄÇ Âú®Ëøô‰∏™ benchmark ÊµãËØï‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑÂàÜÂå∫ÂáΩÊï∞Áü•ÈÅì key ÁöÑÂàÜÂå∫ÊÉÖÂÜµ„ÄÇÈÄöÂ∏∏ÂØπ‰∫éÊéíÂ∫èÁ®ãÂ∫èÊù•ËØ¥ÔºåÊàë‰ª¨‰ºö Â¢ûÂä†‰∏Ä‰∏™È¢ÑÂ§ÑÁêÜÁöÑ MapReduce Êìç‰ΩúÁî®‰∫éÈááÊ†∑ key ÂÄºÁöÑÂàÜÂ∏ÉÊÉÖÂÜµÔºåÈÄöËøáÈááÊ†∑ÁöÑÊï∞ÊçÆÊù•ËÆ°ÁÆóÂØπÊúÄÁªàÊéíÂ∫èÂ§ÑÁêÜÁöÑÂàÜ Âå∫ÁÇπ„ÄÇ![](http://oliji9s3j.bkt.clouddn.com/15133915176963.jpg) Âõæ‰∏â(a)ÊòæÁ§∫‰∫ÜËøô‰∏™ÊéíÂ∫èÁ®ãÂ∫èÁöÑÊ≠£Â∏∏ÊâßË°åËøáÁ®ã„ÄÇÂ∑¶‰∏äÁöÑÂõæÊòæÁ§∫‰∫ÜËæìÂÖ•Êï∞ÊçÆËØªÂèñÁöÑÈÄüÂ∫¶„ÄÇÊï∞ÊçÆËØªÂèñÈÄüÂ∫¶Â≥∞ ÂÄº‰ºöËææÂà∞ 13GB/sÔºåÂπ∂‰∏îÊâÄÊúâ Map ‰ªªÂä°ÂÆåÊàê‰πãÂêéÔºåÂç≥Â§ßÁ∫¶ 200 Áßí‰πãÂêéËøÖÈÄüÊªëËêΩÂà∞ 0„ÄÇÂÄºÂæóÊ≥®ÊÑèÁöÑÊòØÔºåÊéíÂ∫èÁ®ãÂ∫è ËæìÂÖ•Êï∞ÊçÆËØªÂèñÈÄüÂ∫¶Â∞è‰∫éÂàÜÂ∏ÉÂºè grep Á®ãÂ∫è„ÄÇËøôÊòØÂõ†‰∏∫ÊéíÂ∫èÁ®ãÂ∫èÁöÑ Map ‰ªªÂä°Ëä±‰∫ÜÂ§ßÁ∫¶‰∏ÄÂçäÁöÑÂ§ÑÁêÜÊó∂Èó¥Âíå I/O Â∏¶ÂÆΩ Êää‰∏≠Èó¥ËæìÂá∫ÁªìÊûúÂÜôÂà∞Êú¨Âú∞Á°¨Áõò„ÄÇÁõ∏Â∫îÁöÑÂàÜÂ∏ÉÂºè grep Á®ãÂ∫èÁöÑ‰∏≠Èó¥ÁªìÊûúËæìÂá∫Âá†‰πéÂèØ‰ª•ÂøΩÁï•‰∏çËÆ°„ÄÇ Â∑¶Ëæπ‰∏≠Èó¥ÁöÑÂõæÊòæÁ§∫‰∫Ü‰∏≠Èó¥Êï∞ÊçÆ‰ªé Map ‰ªªÂä°ÂèëÈÄÅÂà∞ Reduce ‰ªªÂä°ÁöÑÁΩëÁªúÈÄüÂ∫¶„ÄÇËøô‰∏™ËøáÁ®ã‰ªéÁ¨¨‰∏Ä‰∏™ Map ‰ªªÂä° ÂÆåÊàê‰πãÂêéÂ∞±ÂºÄÂßãÁºìÊÖ¢ÂêØÂä®‰∫Ü„ÄÇÂõæÁ§∫ÁöÑÁ¨¨‰∏Ä‰∏™È´òÂ≥∞ÊòØÂêØÂä®‰∫ÜÁ¨¨‰∏ÄÊâπÂ§ßÊ¶Ç 1700 ‰∏™ Reduce ‰ªªÂä°(Êï¥‰∏™ MapReduce ÂàÜÂ∏ÉÂà∞Â§ßÊ¶Ç 1700 Âè∞Êú∫Âô®‰∏äÔºåÊØèÂè∞Êú∫Âô® 1 Ê¨°ÊúÄÂ§öÊâßË°å 1 ‰∏™ Reduce ‰ªªÂä°)„ÄÇÊéíÂ∫èÁ®ãÂ∫èËøêË°åÂ§ßÁ∫¶ 300 ÁßíÂêéÔºåÁ¨¨‰∏ÄÊâπ ÂêØÂä®ÁöÑ Reduce ‰ªªÂä°Êúâ‰∫õÂÆåÊàê‰∫ÜÔºåÊàë‰ª¨ÂºÄÂßãÊâßË°åÂâ©‰∏ãÁöÑ Reduce ‰ªªÂä°„ÄÇÊâÄÊúâÁöÑÂ§ÑÁêÜÂú®Â§ßÁ∫¶ 600 ÁßíÂêéÁªìÊùü„ÄÇÂ∑¶‰∏ãÂõæË°®Á§∫ Reduce ‰ªªÂä°ÊääÊéíÂ∫èÂêéÁöÑÊï∞ÊçÆÂÜôÂà∞ÊúÄÁªàÁöÑËæìÂá∫Êñá‰ª∂ÁöÑÈÄüÂ∫¶„ÄÇÂú®Á¨¨‰∏Ä‰∏™ÊéíÂ∫èÈò∂ÊÆµÁªìÊùüÂíåÊï∞ÊçÆÂºÄÂßã ÂÜôÂÖ•Á£ÅÁõò‰πãÈó¥Êúâ‰∏Ä‰∏™Â∞èÁöÑÂª∂Êó∂ÔºåËøôÊòØÂõ†‰∏∫ worker Êú∫Âô®Ê≠£Âú®Âøô‰∫éÊéíÂ∫è‰∏≠Èó¥Êï∞ÊçÆ„ÄÇÁ£ÅÁõòÂÜôÂÖ•ÈÄüÂ∫¶Âú® 2-4GB/s ÊåÅÁª≠ ‰∏ÄÊÆµÊó∂Èó¥„ÄÇËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÂ§ßÁ∫¶ÊåÅÁª≠ 850 Áßí„ÄÇËÆ°ÂÖ•ÂàùÂßãÂêØÂä®ÈÉ®ÂàÜÁöÑÊó∂Èó¥ÔºåÊï¥‰∏™ËøêÁÆóÊ∂àËÄó‰∫Ü 891 Áßí„ÄÇËøô‰∏™ÈÄü Â∫¶Âíå TeraSort benchmark[18]ÁöÑÊúÄÈ´òÁ∫™ÂΩï 1057 ÁßíÁõ∏Â∑Æ‰∏çÂ§ö„ÄÇ ËøòÊúâ‰∏Ä‰∫õÂÄºÂæóÊ≥®ÊÑèÁöÑÁé∞Ë±°:ËæìÂÖ•Êï∞ÊçÆÁöÑËØªÂèñÈÄüÂ∫¶ÊØîÊéíÂ∫èÈÄüÂ∫¶ÂíåËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÈÄüÂ∫¶Ë¶ÅÈ´ò‰∏çÂ∞ëÔºåËøôÊòØÂõ† ‰∏∫Êàë‰ª¨ÁöÑËæìÂÖ•Êï∞ÊçÆÊú¨Âú∞Âåñ‰ºòÂåñÁ≠ñÁï•Ëµ∑‰∫Ü‰ΩúÁî® ‚Äî ÁªùÂ§ßÈÉ®ÂàÜÊï∞ÊçÆÈÉΩÊòØ‰ªéÊú¨Âú∞Á°¨ÁõòËØªÂèñÁöÑÔºå‰ªéËÄåËäÇÁúÅ‰∫ÜÁΩëÁªúÂ∏¶ÂÆΩ„ÄÇ ÊéíÂ∫èÈÄüÂ∫¶ÊØîËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Âà∞Á£ÅÁõòÁöÑÈÄüÂ∫¶Âø´ÔºåËøôÊòØÂõ†‰∏∫ËæìÂá∫Êï∞ÊçÆÂÜô‰∫Ü‰∏§‰ªΩ(Êàë‰ª¨‰ΩøÁî®‰∫Ü 2 Ë∑ØÁöÑ GFS Êñá‰ª∂Á≥ªÁªüÔºå ÂÜôÂÖ•Â§çÂà∂ËäÇÁÇπÁöÑÂéüÂõ†ÊòØ‰∏∫‰∫Ü‰øùËØÅÊï∞ÊçÆÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄß)„ÄÇÊàë‰ª¨ÊääËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Âà∞‰∏§‰∏™Â§çÂà∂ËäÇÁÇπÁöÑÂéüÂõ†ÊòØÂõ†‰∏∫Ëøô ÊòØÂ∫ïÂ±ÇÊñá‰ª∂Á≥ªÁªüÁöÑ‰øùËØÅÊï∞ÊçÆÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄßÁöÑÂÆûÁé∞Êú∫Âà∂„ÄÇÂ¶ÇÊûúÂ∫ïÂ±ÇÊñá‰ª∂Á≥ªÁªü‰ΩøÁî®Á±ª‰ººÂÆπÈîôÁºñÁ†Å[14](erasure coding)ÁöÑÊñπÂºèËÄå‰∏çÊòØÂ§çÂà∂ÁöÑÊñπÂºè‰øùËØÅÊï∞ÊçÆÁöÑÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄßÔºåÈÇ£‰πàÂú®ËæìÂá∫Êï∞ÊçÆÂÜôÂÖ•Á£ÅÁõòÁöÑÊó∂ÂÄôÔºåÂ∞±ÂèØ‰ª•Èôç‰Ωé ÁΩëÁªúÂ∏¶ÂÆΩÁöÑ‰ΩøÁî®„ÄÇ ### È´òÊïàÁöÑ backup ‰ªªÂä° Âõæ‰∏â(b)ÊòæÁ§∫‰∫ÜÂÖ≥Èó≠‰∫ÜÂ§áÁî®‰ªªÂä°ÂêéÊéíÂ∫èÁ®ãÂ∫èÊâßË°åÊÉÖÂÜµ„ÄÇÊâßË°åÁöÑËøáÁ®ãÂíåÂõæ 3(a)ÂæàÁõ∏‰ººÔºåÈô§‰∫ÜËæìÂá∫Êï∞ÊçÆÂÜô Á£ÅÁõòÁöÑÂä®‰ΩúÂú®Êó∂Èó¥‰∏äÊãñ‰∫Ü‰∏Ä‰∏™ÂæàÈïøÁöÑÂ∞æÂ∑¥ÔºåËÄå‰∏îÂú®ËøôÊÆµÊó∂Èó¥ÈáåÔºåÂá†‰πéÊ≤°Êúâ‰ªÄ‰πàÂÜôÂÖ•Âä®‰Ωú„ÄÇÂú® 960 ÁßíÂêéÔºåÂè™Êúâ 5 ‰∏™ Reduce ‰ªªÂä°Ê≤°ÊúâÂÆåÊàê„ÄÇËøô‰∫õÊãñÂêéËÖøÁöÑ‰ªªÂä°ÂèàÊâßË°å‰∫Ü 300 ÁßíÊâçÂÆåÊàê„ÄÇÊï¥‰∏™ËÆ°ÁÆóÊ∂àËÄó‰∫Ü 1283 ÁßíÔºåÂ§ö‰∫Ü 44% ÁöÑÊâßË°åÊó∂Èó¥„ÄÇ ### Â§±ÊïàÁöÑÊú∫Âô® Âú®Âõæ‰∏â(c)‰∏≠ÊºîÁ§∫ÁöÑÊéíÂ∫èÁ®ãÂ∫èÊâßË°åÁöÑËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨Âú®Á®ãÂ∫èÂºÄÂßãÂêéÂá†ÂàÜÈíüÊúâÊÑèÁöÑ kill ‰∫Ü 1746 ‰∏™ worker ‰∏≠ ÁöÑ 200 ‰∏™„ÄÇÈõÜÁæ§Â∫ïÂ±ÇÁöÑË∞ÉÂ∫¶Á´ãÂàªÂú®Ëøô‰∫õÊú∫Âô®‰∏äÈáçÊñ∞ÂºÄÂßãÊñ∞ÁöÑ worker Â§ÑÁêÜËøõÁ®ã(Âõ†‰∏∫Âè™ÊòØ worker Êú∫Âô®‰∏äÁöÑÂ§ÑÁêÜ ËøõÁ®ãË¢´ kill ‰∫ÜÔºåÊú∫Âô®Êú¨Ë∫´ËøòÂú®Â∑•‰Ωú)„ÄÇ Âõæ‰∏â(c)ÊòæÁ§∫Âá∫‰∫Ü‰∏Ä‰∏™‚ÄúË¥ü‚ÄùÁöÑËæìÂÖ•Êï∞ÊçÆËØªÂèñÈÄüÂ∫¶ÔºåËøôÊòØÂõ†‰∏∫‰∏Ä‰∫õÂ∑≤ÁªèÂÆåÊàêÁöÑ Map ‰ªªÂä°‰∏¢Â§±‰∫Ü(Áî±‰∫é Áõ∏Â∫îÁöÑÊâßË°å Map ‰ªªÂä°ÁöÑ worker ËøõÁ®ãË¢´ kill ‰∫Ü)ÔºåÈúÄË¶ÅÈáçÊñ∞ÊâßË°åËøô‰∫õ‰ªªÂä°„ÄÇÁõ∏ÂÖ≥ Map ‰ªªÂä°ÂæàÂø´Â∞±Ë¢´ÈáçÊñ∞ÊâßË°å‰∫Ü„ÄÇ Êï¥‰∏™ËøêÁÆóÂú® 933 ÁßíÂÜÖÂÆåÊàêÔºåÂåÖÊã¨‰∫ÜÂàùÂßãÂêØÂä®Êó∂Èó¥(Âè™ÊØîÊ≠£Â∏∏ÊâßË°åÂ§öÊ∂àËÄó‰∫Ü 5%ÁöÑÊó∂Èó¥)„ÄÇ &#123;% note info %&#125;## ÁªèÈ™å &#123;% endnote %&#125; Êàë‰ª¨Âú® 2003 Âπ¥ 1 ÊúàÂÆåÊàê‰∫ÜÁ¨¨‰∏Ä‰∏™ÁâàÊú¨ÁöÑ MapReduce Â∫ìÔºåÂú® 2003 Âπ¥ 8 ÊúàÁöÑÁâàÊú¨Êúâ‰∫ÜÊòæËëóÁöÑÂ¢ûÂº∫ÔºåËøôÂåÖÊã¨ ‰∫ÜËæìÂÖ•Êï∞ÊçÆÊú¨Âú∞‰ºòÂåñ„ÄÅworker Êú∫Âô®‰πãÈó¥ÁöÑÂä®ÊÄÅË¥üËΩΩÂùáË°°Á≠âÁ≠â„ÄÇ‰ªéÈÇ£‰ª•ÂêéÔºåÊàë‰ª¨ÊÉäÂñúÁöÑÂèëÁé∞ÔºåMapReduce Â∫ìËÉΩ ÂπøÊ≥õÂ∫îÁî®‰∫éÊàë‰ª¨Êó•Â∏∏Â∑•‰Ωú‰∏≠ÈÅáÂà∞ÁöÑÂêÑÁ±ªÈóÆÈ¢ò„ÄÇÂÆÉÁé∞Âú®Âú® Google ÂÜÖÈÉ®ÂêÑ‰∏™È¢ÜÂüüÂæóÂà∞ÂπøÊ≥õÂ∫îÁî®ÔºåÂåÖÊã¨: 1. Â§ßËßÑÊ®°Êú∫Âô®Â≠¶‰π†ÈóÆÈ¢ò2. Google News Âíå Froogle ‰∫ßÂìÅÁöÑÈõÜÁæ§ÈóÆÈ¢ò 3. ‰ªéÂÖ¨‰ºóÊü•ËØ¢‰∫ßÂìÅ(ÊØîÂ¶Ç Google ÁöÑ Zeitgeist)ÁöÑÊä•Âëä‰∏≠ÊäΩÂèñÊï∞ÊçÆ„ÄÇ 4. ‰ªéÂ§ßÈáèÁöÑÊñ∞Â∫îÁî®ÂíåÊñ∞‰∫ßÂìÅÁöÑÁΩëÈ°µ‰∏≠ÊèêÂèñÊúâÁî®‰ø°ÊÅØ(ÊØîÂ¶ÇÔºå‰ªéÂ§ßÈáèÁöÑ‰ΩçÁΩÆÊêúÁ¥¢ÁΩëÈ°µ‰∏≠ÊäΩÂèñÂú∞ÁêÜ‰ΩçÁΩÆ‰ø°ÊÅØ)„ÄÇ 5. Â§ßËßÑÊ®°ÁöÑÂõæÂΩ¢ËÆ°ÁÆó„ÄÇ![](http://oliji9s3j.bkt.clouddn.com/15133916089336.jpg) ÂõæÂõõÊòæÁ§∫‰∫ÜÂú®Êàë‰ª¨ÁöÑÊ∫ê‰ª£Á†ÅÁÆ°ÁêÜÁ≥ªÁªü‰∏≠ÔºåÈöèÁùÄÊó∂Èó¥Êé®ÁßªÔºåÁã¨Á´ãÁöÑ MapReduce Á®ãÂ∫èÊï∞ÈáèÁöÑÊòæËëóÂ¢ûÂä†„ÄÇ‰ªé 2003 Âπ¥Êó©‰∫õÊó∂ÂÄôÁöÑ 0 ‰∏™Â¢ûÈïøÂà∞ 2004 Âπ¥ 9 Êúà‰ªΩÁöÑÂ∑Æ‰∏çÂ§ö 900 ‰∏™‰∏çÂêåÁöÑÁ®ãÂ∫è„ÄÇMapReduce ÁöÑÊàêÂäüÂèñÂÜ≥‰∫éÈááÁî® MapReduce Â∫ìËÉΩÂ§üÂú®‰∏çÂà∞Âçä‰∏™Â∞èÊó∂Êó∂Èó¥ÂÜÖÂÜôÂá∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ®ãÂ∫èÔºåËøô‰∏™ÁÆÄÂçïÁöÑÁ®ãÂ∫èËÉΩÂ§üÂú®‰∏äÂçÉÂè∞Êú∫Âô®ÁöÑÁªÑÊàêÁöÑÈõÜÁæ§‰∏äÂÅöÂ§ß ËßÑÊ®°Âπ∂ÂèëÂ§ÑÁêÜÔºåËøôÊûÅÂ§ßÁöÑÂä†Âø´‰∫ÜÂºÄÂèëÂíåÂéüÂΩ¢ËÆæËÆ°ÁöÑÂë®Êúü„ÄÇÂè¶Â§ñÔºåÈááÁî® MapReduce Â∫ìÔºåÂèØ‰ª•ËÆ©ÂÆåÂÖ®Ê≤°ÊúâÂàÜÂ∏ÉÂºè Âíå/ÊàñÂπ∂Ë°åÁ≥ªÁªüÂºÄÂèëÁªèÈ™åÁöÑÁ®ãÂ∫èÂëòÂæàÂÆπÊòìÁöÑÂà©Áî®Â§ßÈáèÁöÑËµÑÊ∫êÔºåÂºÄÂèëÂá∫ÂàÜÂ∏ÉÂºèÂíå/ÊàñÂπ∂Ë°åÂ§ÑÁêÜÁöÑÂ∫îÁî®„ÄÇ![](http://oliji9s3j.bkt.clouddn.com/15133916531743.jpg) Âú®ÊØè‰∏™‰ªªÂä°ÁªìÊùüÁöÑÊó∂ÂÄôÔºåMapReduce Â∫ìÁªüËÆ°ËÆ°ÁÆóËµÑÊ∫êÁöÑ‰ΩøÁî®Áä∂ÂÜµ„ÄÇÂú®Ë°® 1ÔºåÊàë‰ª¨ÂàóÂá∫‰∫Ü 2004 Âπ¥ 8 Êúà‰ªΩ MapReduce ËøêË°åÁöÑ‰ªªÂä°ÊâÄÂç†Áî®ÁöÑÁõ∏ÂÖ≥ËµÑÊ∫ê„ÄÇ ### Â§ßËßÑÊ®°Á¥¢Âºï Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåMapReduce ÊúÄÊàêÂäüÁöÑÂ∫îÁî®Â∞±ÊòØÈáçÂÜô‰∫Ü Google ÁΩëÁªúÊêúÁ¥¢ÊúçÂä°ÊâÄ‰ΩøÁî®Âà∞ÁöÑ index Á≥ªÁªü„ÄÇÁ¥¢ÂºïÁ≥ª ÁªüÁöÑËæìÂÖ•Êï∞ÊçÆÊòØÁΩëÁªúÁà¨Ëô´ÊäìÂèñÂõûÊù•ÁöÑÊµ∑ÈáèÁöÑÊñáÊ°£ÔºåËøô‰∫õÊñáÊ°£Êï∞ÊçÆÈÉΩ‰øùÂ≠òÂú® GFS Êñá‰ª∂Á≥ªÁªüÈáå„ÄÇËøô‰∫õÊñáÊ°£ÂéüÂßãÂÜÖ ÂÆπ4ÁöÑÂ§ßÂ∞èË∂ÖËøá‰∫Ü 20TB„ÄÇÁ¥¢ÂºïÁ®ãÂ∫èÊòØÈÄöËøá‰∏ÄÁ≥ªÂàóÁöÑ MapReduce Êìç‰Ωú(Â§ßÁ∫¶ 5 Âà∞ 10 Ê¨°)Êù•Âª∫Á´ãÁ¥¢Âºï„ÄÇ‰ΩøÁî® MapReduce(ÊõøÊç¢‰∏ä‰∏Ä‰∏™ÁâπÂà´ËÆæËÆ°ÁöÑ„ÄÅÂàÜÂ∏ÉÂºèÂ§ÑÁêÜÁöÑÁ¥¢ÂºïÁ®ãÂ∫è)Â∏¶Êù•Ëøô‰∫õÂ•ΩÂ§Ñ: ÂÆûÁé∞Á¥¢ÂºïÈÉ®ÂàÜÁöÑ‰ª£Á†ÅÁÆÄÂçï„ÄÅÂ∞èÂ∑ß„ÄÅÂÆπÊòìÁêÜËß£ÔºåÂõ†‰∏∫ÂØπ‰∫éÂÆπÈîô„ÄÅÂàÜÂ∏ÉÂºè‰ª•ÂèäÂπ∂Ë°åËÆ°ÁÆóÁöÑÂ§ÑÁêÜÈÉΩÊòØ MapReduce Â∫ìÊèê‰æõÁöÑ„ÄÇÊØîÂ¶ÇÔºå‰ΩøÁî® MapReduce Â∫ìÔºåËÆ°ÁÆóÁöÑ‰ª£Á†ÅË°åÊï∞‰ªéÂéüÊù•ÁöÑ 3800 Ë°å C++‰ª£Á†ÅÂáèÂ∞ëÂà∞Â§ßÊ¶Ç 700 Ë°å‰ª£Á†Å„ÄÇ MapReduce Â∫ìÁöÑÊÄßËÉΩÂ∑≤ÁªèË∂≥Â§üÂ•Ω‰∫ÜÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•ÊääÂú®Ê¶ÇÂøµ‰∏ä‰∏çÁõ∏ÂÖ≥ÁöÑËÆ°ÁÆóÊ≠•È™§ÂàÜÂºÄÂ§ÑÁêÜÔºåËÄå‰∏çÊòØÊ∑∑Âú® ‰∏ÄËµ∑‰ª•ÊúüÂáèÂ∞ëÊï∞ÊçÆ‰º†ÈÄíÁöÑÈ¢ùÂ§ñÊ∂àËÄó„ÄÇÊ¶ÇÂøµ‰∏ä‰∏çÁõ∏ÂÖ≥ÁöÑËÆ°ÁÆóÊ≠•È™§ÁöÑÈöîÁ¶ª‰πü‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÊîπÂèòÁ¥¢ÂºïÂ§ÑÁêÜÊñπ Âºè„ÄÇÊØîÂ¶ÇÔºåÂØπ‰πãÂâçÁöÑÁ¥¢ÂºïÁ≥ªÁªüÁöÑ‰∏Ä‰∏™Â∞èÊõ¥ÊîπÂèØËÉΩË¶ÅËÄóË¥πÂ•ΩÂá†‰∏™ÊúàÁöÑÊó∂Èó¥Ôºå‰ΩÜÊòØÂú®‰ΩøÁî® MapReduce ÁöÑÊñ∞Á≥ªÁªü‰∏äÔºå ËøôÊ†∑ÁöÑÊõ¥ÊîπÂè™ÈúÄË¶ÅËä±Âá†Â§©Êó∂Èó¥Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ Á¥¢ÂºïÁ≥ªÁªüÁöÑÊìç‰ΩúÁÆ°ÁêÜÊõ¥ÂÆπÊòì‰∫Ü„ÄÇÂõ†‰∏∫Áî±Êú∫Âô®Â§±Êïà„ÄÅÊú∫Âô®Â§ÑÁêÜÈÄüÂ∫¶ÁºìÊÖ¢„ÄÅ‰ª•ÂèäÁΩëÁªúÁöÑÁû¨Èó¥ÈòªÂ°ûÁ≠âÂºïËµ∑ÁöÑÁªù Â§ßÈÉ®ÂàÜÈóÆÈ¢òÈÉΩÂ∑≤ÁªèÁî± MapReduce Â∫ìËß£ÂÜ≥‰∫ÜÔºå‰∏çÂÜçÈúÄË¶ÅÊìç‰Ωú‰∫∫ÂëòÁöÑ‰ªãÂÖ•‰∫Ü„ÄÇÂè¶Â§ñÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂú®Á¥¢ÂºïÁ≥ªÁªüÈõÜ Áæ§‰∏≠Â¢ûÂä†Êú∫Âô®ÁöÑÁÆÄÂçïÊñπÊ≥ïÊèêÈ´òÊï¥‰ΩìÂ§ÑÁêÜÊÄßËÉΩ„ÄÇ &#123;% note info %&#125;## Áõ∏ÂÖ≥Â∑•‰Ωú &#123;% endnote %&#125;ÂæàÂ§öÁ≥ªÁªüÈÉΩÊèê‰æõ‰∫Ü‰∏•Ê†ºÁöÑÁºñÁ®ãÊ®°ÂºèÔºåÂπ∂‰∏îÈÄöËøáÂØπÁºñÁ®ãÁöÑ‰∏•Ê†ºÈôêÂà∂Êù•ÂÆûÁé∞Âπ∂Ë°åËÆ°ÁÆó„ÄÇ‰æãÂ¶ÇÔºå‰∏Ä‰∏™ÁªìÂêàÂáΩÊï∞ÂèØ‰ª•ÈÄöËøáÊää N ‰∏™ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÁöÑÂâçÁºÄÂú® N ‰∏™Â§ÑÁêÜÂô®‰∏ä‰ΩøÁî®Âπ∂Ë°åÂâçÁºÄÁÆóÊ≥ïÔºåÂú® log N ÁöÑÊó∂Èó¥ÂÜÖËÆ°ÁÆóÂÆå[6Ôºå9Ôºå13]5„ÄÇ MapReduce ÂèØ‰ª•Áúã‰ΩúÊòØÊàë‰ª¨ÁªìÂêàÂú®ÁúüÂÆûÁéØÂ¢É‰∏ãÂ§ÑÁêÜÊµ∑ÈáèÊï∞ÊçÆÁöÑÁªèÈ™åÔºåÂØπËøô‰∫õÁªèÂÖ∏Ê®°ÂûãËøõË°åÁÆÄÂåñÂíåËêÉÂèñÁöÑÊàêÊûú„ÄÇ Êõ¥Âä†ÂÄºÂæóÈ™ÑÂÇ≤ÁöÑÊòØÔºåÊàë‰ª¨ËøòÂÆûÁé∞‰∫ÜÂü∫‰∫é‰∏äÂçÉÂè∞Â§ÑÁêÜÂô®ÁöÑÈõÜÁæ§ÁöÑÂÆπÈîôÂ§ÑÁêÜ„ÄÇÁõ∏ÊØîËÄåË®ÄÔºåÂ§ßÈÉ®ÂàÜÂπ∂ÂèëÂ§ÑÁêÜÁ≥ªÁªüÈÉΩ Âè™Âú®Â∞èËßÑÊ®°ÁöÑÈõÜÁæ§‰∏äÂÆûÁé∞ÔºåÂπ∂‰∏îÊääÂÆπÈîôÂ§ÑÁêÜ‰∫§Áªô‰∫ÜÁ®ãÂ∫èÂëò„ÄÇ Bulk Synchronous Programming[17]Âíå‰∏Ä‰∫õ MPI ÂéüËØ≠[11]Êèê‰æõ‰∫ÜÊõ¥È´òÁ∫ßÂà´ÁöÑÂπ∂Ë°åÂ§ÑÁêÜÊäΩË±°ÔºåÂèØ‰ª•Êõ¥ÂÆπÊòìÂÜô Âá∫Âπ∂Ë°åÂ§ÑÁêÜÁöÑÁ®ãÂ∫è„ÄÇMapReduce ÂíåËøô‰∫õÁ≥ªÁªüÁöÑÂÖ≥ÈîÆ‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÔºåMapReduce Âà©Áî®ÈôêÂà∂ÊÄßÁºñÁ®ãÊ®°ÂºèÂÆûÁé∞‰∫ÜÁî® Êà∑Á®ãÂ∫èÁöÑËá™Âä®Âπ∂ÂèëÂ§ÑÁêÜÔºåÂπ∂‰∏îÊèê‰æõ‰∫ÜÈÄèÊòéÁöÑÂÆπÈîôÂ§ÑÁêÜ„ÄÇ Êàë‰ª¨Êï∞ÊçÆÊú¨Âú∞‰ºòÂåñÁ≠ñÁï•ÁöÑÁÅµÊÑüÊù•Ê∫ê‰∫é active disks[12,15]Á≠âÊäÄÊúØÔºåÂú® active disks ‰∏≠ÔºåËÆ°ÁÆó‰ªªÂä°ÊòØÂ∞ΩÈáèÊé®ÈÄÅ Âà∞Êï∞ÊçÆÂ≠òÂÇ®ÁöÑËäÇÁÇπÂ§ÑÁêÜ6ÔºåËøôÊ†∑Â∞±ÂáèÂ∞ë‰∫ÜÁΩëÁªúÂíå IO Â≠êÁ≥ªÁªüÁöÑÂêûÂêêÈáè„ÄÇÊàë‰ª¨Âú®ÊåÇËΩΩÂá†‰∏™Á°¨ÁõòÁöÑÊôÆÈÄöÊú∫Âô®‰∏äÊâßË°å Êàë‰ª¨ÁöÑËøêÁÆóÔºåËÄå‰∏çÊòØÂú®Á£ÅÁõòÂ§ÑÁêÜÂô®‰∏äÊâßË°åÊàë‰ª¨ÁöÑÂ∑•‰ΩúÔºå‰ΩÜÊòØËææÂà∞ÁöÑÁõÆÁöÑ‰∏ÄÊ†∑ÁöÑ„ÄÇ Êàë‰ª¨ÁöÑÂ§áÁî®‰ªªÂä°Êú∫Âà∂Âíå Charlotte System[3]ÊèêÂá∫ÁöÑ eager Ë∞ÉÂ∫¶Êú∫Âà∂ÊØîËæÉÁ±ª‰ºº„ÄÇEager Ë∞ÉÂ∫¶Êú∫Âà∂ÁöÑ‰∏Ä‰∏™Áº∫ÁÇπÊòØ Â¶ÇÊûú‰∏Ä‰∏™‰ªªÂä°ÂèçÂ§çÂ§±ÊïàÔºåÈÇ£‰πàÊï¥‰∏™ËÆ°ÁÆóÂ∞±‰∏çËÉΩÂÆåÊàê„ÄÇÊàë‰ª¨ÈÄöËøáÂøΩÁï•ÂºïËµ∑ÊïÖÈöúÁöÑËÆ∞ÂΩïÁöÑÊñπÂºèÂú®ÊüêÁßçÁ®ãÂ∫¶‰∏äËß£ÂÜ≥ ‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇ MapReduce ÁöÑÂÆûÁé∞‰æùËµñ‰∫é‰∏Ä‰∏™ÂÜÖÈÉ®ÁöÑÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüÔºåËøô‰∏™ÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüË¥üË¥£Âú®‰∏Ä‰∏™Ë∂ÖÂ§ßÁöÑ„ÄÅÂÖ±‰∫´Êú∫Âô®ÁöÑ ÈõÜÁæ§‰∏äÂàÜÂ∏ÉÂíåËøêË°åÁî®Êà∑‰ªªÂä°„ÄÇËôΩÁÑ∂Ëøô‰∏™‰∏çÊòØÊú¨ËÆ∫ÊñáÁöÑÈáçÁÇπÔºå‰ΩÜÊòØÊúâÂøÖË¶ÅÊèê‰∏Ä‰∏ãÔºåËøô‰∏™ÈõÜÁæ§ÁÆ°ÁêÜÁ≥ªÁªüÂú®ÁêÜÂøµ‰∏ä ÂíåÂÖ∂ÂÆÉÁ≥ªÁªüÔºåÂ¶Ç Condor[16]ÊòØ‰∏ÄÊ†∑„ÄÇ MapReduce Â∫ìÁöÑÊéíÂ∫èÊú∫Âà∂Âíå NOW-Sort[1]ÁöÑÊìç‰Ωú‰∏äÂæàÁ±ª‰ºº„ÄÇËØªÂèñËæìÂÖ•Ê∫êÁöÑÊú∫Âô®(map workers)ÊääÂæÖÊéíÂ∫è ÁöÑÊï∞ÊçÆËøõË°åÂàÜÂå∫ÂêéÔºåÂèëÈÄÅÂà∞ R ‰∏™ Reduce worker ‰∏≠ÁöÑ‰∏Ä‰∏™ËøõË°åÂ§ÑÁêÜ„ÄÇÊØè‰∏™ Reduce worker Âú®Êú¨Âú∞ÂØπÊï∞ÊçÆËøõË°åÊéí Â∫è(Â∞ΩÂèØËÉΩÂú®ÂÜÖÂ≠ò‰∏≠ÊéíÂ∫è)„ÄÇÂΩìÁÑ∂ÔºåNOW-Sort Ê≤°ÊúâÁªôÁî®Êà∑Ëá™ÂÆö‰πâÁöÑ Map Âíå Reduce ÂáΩÊï∞ÁöÑÊú∫‰ºöÔºåÂõ†Ê≠§‰∏çÂÖ∑Â§á MapReduce Â∫ìÂπøÊ≥õÁöÑÂÆûÁî®ÊÄß„ÄÇ River[2]Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÁºñÁ®ãÊ®°Âûã:Â§ÑÁêÜËøõÁ®ãÈÄöËøáÂàÜÂ∏ÉÂºèÈòüÂàó‰º†ÈÄÅÊï∞ÊçÆÁöÑÊñπÂºèËøõË°å‰∫íÁõ∏ÈÄöËÆØ„ÄÇÂíå MapReduce Á±ª‰ººÔºåRiver Á≥ªÁªüÂ∞ùËØïÂú®‰∏çÂØπÁ≠âÁöÑÁ°¨‰ª∂ÁéØÂ¢É‰∏ãÔºåÊàñËÄÖÂú®Á≥ªÁªüÈ¢†Á∞∏ÁöÑÊÉÖÂÜµ‰∏ã‰πüËÉΩÊèê‰æõËøë‰ººÂπ≥ÂùáÁöÑÊÄßËÉΩ„ÄÇRiver ÊòØ ÈÄöËøáÁ≤æÂøÉË∞ÉÂ∫¶Á°¨ÁõòÂíåÁΩëÁªúÁöÑÈÄöËÆØÊù•Âπ≥Ë°°‰ªªÂä°ÁöÑÂÆåÊàêÊó∂Èó¥„ÄÇMapReduce Â∫ìÈááÁî®‰∫ÜÂÖ∂ÂÆÉÁöÑÊñπÊ≥ï„ÄÇÈÄöËøáÂØπÁºñÁ®ãÊ®°Âûã ËøõË°åÈôêÂà∂ÔºåMapReduce Ê°ÜÊû∂ÊääÈóÆÈ¢òÂàÜËß£Êàê‰∏∫Â§ßÈáèÁöÑ‚ÄúÂ∞è‚Äù‰ªªÂä°„ÄÇËøô‰∫õ‰ªªÂä°Âú®ÂèØÁî®ÁöÑ worker ÈõÜÁæ§‰∏äÂä®ÊÄÅÁöÑË∞ÉÂ∫¶Ôºå ËøôÊ†∑Âø´ÈÄüÁöÑ worker Â∞±ÂèØ‰ª•ÊâßË°åÊõ¥Â§öÁöÑ‰ªªÂä°„ÄÇÈÄöËøáÂØπÁºñÁ®ãÊ®°ÂûãËøõË°åÈôêÂà∂ÔºåÊàë‰ª¨ÂèØÁî®Âú®Â∑•‰ΩúÊé•ËøëÂÆåÊàêÁöÑÊó∂ÂÄôË∞ÉÂ∫¶ Â§áÁî®‰ªªÂä°ÔºåÁº©Áü≠Âú®Á°¨‰ª∂ÈÖçÁΩÆ‰∏çÂùáË°°ÁöÑÊÉÖÂÜµ‰∏ãÁº©Â∞èÊï¥‰∏™Êìç‰ΩúÂÆåÊàêÁöÑÊó∂Èó¥(ÊØîÂ¶ÇÊúâÁöÑÊú∫Âô®ÊÄßËÉΩÂ∑Æ„ÄÅÊàñËÄÖÊú∫Âô®Ë¢´Êüê ‰∫õÊìç‰ΩúÈòªÂ°û‰∫Ü)„ÄÇ BAD-FS[5]ÈááÁî®‰∫ÜÂíå MapReduce ÂÆåÂÖ®‰∏çÂêåÁöÑÁºñÁ®ãÊ®°ÂºèÔºåÂÆÉÊòØÈù¢ÂêëÂπøÂüüÁΩë(alex Ê≥®:wide-area network)ÁöÑ„ÄÇ‰∏çËøáÔºåËøô‰∏§‰∏™Á≥ªÁªüÊúâ‰∏§‰∏™Âü∫Á°ÄÂäüËÉΩÂæàÁ±ª‰ºº„ÄÇ1. ‰∏§‰∏™Á≥ªÁªüÈááÁî®ÈáçÊñ∞ÊâßË°åÁöÑÊñπÂºèÊù•Èò≤Ê≠¢Áî±‰∫éÂ§±ÊïàÂØºËá¥ÁöÑÊï∞ÊçÆ‰∏¢ Â§±„ÄÇ2. ‰∏§‰∏™ÈÉΩ‰ΩøÁî®Êï∞ÊçÆÊú¨Âú∞ÂåñË∞ÉÂ∫¶Á≠ñÁï•ÔºåÂáèÂ∞ëÁΩëÁªúÈÄöËÆØÁöÑÊï∞ÊçÆÈáè„ÄÇ TACC[7]ÊòØ‰∏Ä‰∏™Áî®‰∫éÁÆÄÂåñÊûÑÈÄ†È´òÂèØÁî®ÊÄßÁΩëÁªúÊúçÂä°ÁöÑÁ≥ªÁªü„ÄÇÂíå MapReduce ‰∏ÄÊ†∑ÔºåÂÆÉ‰πü‰æùÈù†ÈáçÊñ∞ÊâßË°åÊú∫Âà∂Êù• ÂÆûÁé∞ÁöÑÂÆπÈîôÂ§ÑÁêÜ„ÄÇ &#123;% note info %&#125;## ÁªìÊùüËØ≠ &#123;% endnote %&#125; MapReduce ÁºñÁ®ãÊ®°ÂûãÂú® Google ÂÜÖÈÉ®ÊàêÂäüÂ∫îÁî®‰∫éÂ§ö‰∏™È¢ÜÂüü„ÄÇÊàë‰ª¨ÊääËøôÁßçÊàêÂäüÂΩíÁªì‰∏∫Âá†‰∏™ÊñπÈù¢:È¶ñÂÖàÔºåÁî±‰∫é MapReduce Â∞ÅË£Ö‰∫ÜÂπ∂Ë°åÂ§ÑÁêÜ„ÄÅÂÆπÈîôÂ§ÑÁêÜ„ÄÅÊï∞ÊçÆÊú¨Âú∞Âåñ‰ºòÂåñ„ÄÅË¥üËΩΩÂùáË°°Á≠âÁ≠âÊäÄÊúØÈöæÁÇπÁöÑÁªÜËäÇÔºåËøô‰ΩøÂæó MapReduce Â∫ìÊòì‰∫é‰ΩøÁî®„ÄÇÂç≥‰æøÂØπ‰∫éÂÆåÂÖ®Ê≤°ÊúâÂπ∂Ë°åÊàñËÄÖÂàÜÂ∏ÉÂºèÁ≥ªÁªüÂºÄÂèëÁªèÈ™åÁöÑÁ®ãÂ∫èÂëòËÄåË®Ä;ÂÖ∂Ê¨°ÔºåÂ§ßÈáè‰∏çÂêåÁ±ªÂûãÁöÑÈóÆÈ¢òÈÉΩ ÂèØ‰ª•ÈÄöËøá MapReduce ÁÆÄÂçïÁöÑËß£ÂÜ≥„ÄÇÊØîÂ¶ÇÔºåMapReduce Áî®‰∫éÁîüÊàê Google ÁöÑÁΩëÁªúÊêúÁ¥¢ÊúçÂä°ÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆ„ÄÅÁî®Êù• ÊéíÂ∫è„ÄÅÁî®Êù•Êï∞ÊçÆÊåñÊéò„ÄÅÁî®‰∫éÊú∫Âô®Â≠¶‰π†Ôºå‰ª•ÂèäÂæàÂ§öÂÖ∂ÂÆÉÁöÑÁ≥ªÁªü;Á¨¨‰∏âÔºåÊàë‰ª¨ÂÆûÁé∞‰∫Ü‰∏Ä‰∏™Âú®Êï∞ÂçÉÂè∞ËÆ°ÁÆóÊú∫ÁªÑÊàêÁöÑ Â§ßÂûãÈõÜÁæ§‰∏äÁÅµÊ¥ªÈÉ®ÁΩ≤ËøêË°åÁöÑ MapReduce„ÄÇËøô‰∏™ÂÆûÁé∞‰ΩøÂæóÊúâÊïàÂà©Áî®Ëøô‰∫õ‰∏∞ÂØåÁöÑËÆ°ÁÆóËµÑÊ∫êÂèòÂæóÈùûÂ∏∏ÁÆÄÂçïÔºåÂõ†Ê≠§‰πü ÈÄÇÂêàÁî®Êù•Ëß£ÂÜ≥ Google ÈÅáÂà∞ÁöÑÂÖ∂‰ªñÂæàÂ§öÈúÄË¶ÅÂ§ßÈáèËÆ°ÁÆóÁöÑÈóÆÈ¢ò„ÄÇ Êàë‰ª¨‰πü‰ªé MapReduce ÂºÄÂèëËøáÁ®ã‰∏≠Â≠¶Âà∞‰∫Ü‰∏çÂ∞ë‰∏úË•ø„ÄÇÈ¶ñÂÖàÔºåÁ∫¶ÊùüÁºñÁ®ãÊ®°Âºè‰ΩøÂæóÂπ∂Ë°åÂíåÂàÜÂ∏ÉÂºèËÆ°ÁÆóÈùûÂ∏∏ÂÆπÊòìÔºå ‰πüÊòì‰∫éÊûÑÈÄ†ÂÆπÈîôÁöÑËÆ°ÁÆóÁéØÂ¢É;ÂÖ∂Ê¨°ÔºåÁΩëÁªúÂ∏¶ÂÆΩÊòØÁ®ÄÊúâËµÑÊ∫ê„ÄÇÂ§ßÈáèÁöÑÁ≥ªÁªü‰ºòÂåñÊòØÈíàÂØπÂáèÂ∞ëÁΩëÁªú‰º†ËæìÈáè‰∏∫ÁõÆÁöÑÁöÑ: Êú¨Âú∞‰ºòÂåñÁ≠ñÁï•‰ΩøÂ§ßÈáèÁöÑÊï∞ÊçÆ‰ªéÊú¨Âú∞Á£ÅÁõòËØªÂèñÔºå‰∏≠Èó¥Êñá‰ª∂ÂÜôÂÖ•Êú¨Âú∞Á£ÅÁõò„ÄÅÂπ∂‰∏îÂè™ÂÜô‰∏Ä‰ªΩ‰∏≠Èó¥Êñá‰ª∂‰πüËäÇÁ∫¶‰∫ÜÁΩëÁªú Â∏¶ÂÆΩ;Á¨¨‰∏âÔºåÂ§öÊ¨°ÊâßË°åÁõ∏ÂêåÁöÑ‰ªªÂä°ÂèØ‰ª•ÂáèÂ∞ëÊÄßËÉΩÁºìÊÖ¢ÁöÑÊú∫Âô®Â∏¶Êù•ÁöÑË¥üÈù¢ÂΩ±Âìç(alex Ê≥®:Âç≥Á°¨‰ª∂ÈÖçÁΩÆÁöÑ‰∏çÂπ≥Ë°°)Ôºå ÂêåÊó∂Ëß£ÂÜ≥‰∫ÜÁî±‰∫éÊú∫Âô®Â§±ÊïàÂØºËá¥ÁöÑÊï∞ÊçÆ‰∏¢Â§±ÈóÆÈ¢ò„ÄÇ &#123;% note info %&#125;## ÊÑüË∞¢ &#123;% endnote %&#125; Josh Levenberg has been instrumental in revising and extending the user-level MapReduce API with a number of new features based on his experience with using MapReduce and other people‚Äôs suggestions for enhancements. MapReduce reads its input from and writes its output to the Google File System [8]. We would like to thank Mohit Aron, Howard Gobioff, Markus Gutschke, David Kramer, Shun-Tak Leung, and Josh Redstone for their work in developing GFS. We would also like to thank Percy Liang and Olcan Sercinoglu for their work in developing the cluster management system used by MapReduce. Mike Burrows, Wilson Hsieh, Josh Levenberg, Sharon Perl, Rob Pike, and Debby Wallach provided helpful comments on earlier drafts of this paper.The anonymous OSDI reviewers, and our shepherd, Eric Brewer, provided many useful suggestions of areas where the paper could be improved. Finally, we thank all the users of MapReduce within Google‚Äôs engineering organization for providing helpful feedback, suggestions, and bug reports. &#123;% note info %&#125;## ÂèÇËÄÉËµÑÊñô &#123;% endnote %&#125; [1] Andrea C. Arpaci-Dusseau, Remzi H. Arpaci-Dusseau,David E. Culler, Joseph M. Hellerstein, and David A. Patterson.High-performance sorting on networks of workstations.In Proceedings of the 1997 ACM SIGMOD InternationalConference on Management of Data, Tucson,Arizona, May 1997. [2] Remzi H. Arpaci-Dusseau, Eric Anderson, NoahTreuhaft, David E. Culler, Joseph M. Hellerstein, David Patterson, and Kathy Yelick. Cluster I/O with River:Making the fast case common. In Proceedings of the Sixth Workshop on Input/Output in Parallel and Distributed Systems (IOPADS ‚Äô99), pages 10.22, Atlanta, Georgia, May 1999. [3] Arash Baratloo, Mehmet Karaul, Zvi Kedem, and Peter Wyckoff. Charlotte: Metacomputing on the web. In Proceedings of the 9th International Conference on Parallel and Distributed Computing Systems, 1996. [4] Luiz A. Barroso, Jeffrey Dean, and Urs H Ãàolzle. Web search for a planet: The Google cluster architecture. IEEE Micro, 23(2):22.28, April 2003. [5] John Bent, Douglas Thain, Andrea C.Arpaci-Dusseau, Remzi H. Arpaci-Dusseau, and Miron Livny. Explicit control in a batch-aware distributed file system. In Proceedings of the 1st USENIX Symposium on Networked Systems Design and Implementation NSDI, March 2004. [6] Guy E. Blelloch. Scans as primitive parallel operations.IEEE Transactions on Computers, C-38(11), November 1989. [7] Armando Fox, Steven D. Gribble, Yatin Chawathe, Eric A. Brewer, and Paul Gauthier. Cluster-based scalable network services. In Proceedings of the 16th ACM Symposium on Operating System Principles, pages 78. 91, Saint-Malo, France, 1997. [8] Sanjay Ghemawat, Howard Gobioff, and Shun-Tak Leung. The Google file system. In 19th Symposium on Operating Systems Principles, pages 29.43, Lake George, New York, 2003. To appear in OSDI 2004 12 [9] S. Gorlatch. Systematic efficient parallelization of scan and other list homomorphisms. In L. Bouge, P. Fraigniaud, A. Mignotte, and Y. Robert, editors, Euro-Par‚Äô96. Parallel Processing, Lecture Notes in Computer Science 1124, pages 401.408. Springer-Verlag, 1996. [10] Jim Gray. Sort benchmark home page. http://research.microsoft.com/barc/SortBenchmark/. [11] William Gropp, Ewing Lusk, and Anthony Skjellum. Using MPI: Portable Parallel Programming with the Message-Passing Interface. MIT Press, Cambridge, MA, 1999. [12] L. Huston, R. Sukthankar, R.Wickremesinghe, M. Satyanarayanan, G. R. Ganger, E. Riedel, and A. Ailamaki. Diamond: A storage architecture for early discard in interactive search. In Proceedings of the 2004USENIX File and Storage Technologies FAST Conference, April 2004. [13] Richard E. Ladner and Michael J. Fischer. Parallel prefix computation. Journal of the ACM, 27(4):831.838, 1980. [14] Michael O. Rabin. Efficient dispersal of information for security, load balancing and fault tolerance. Journal of the ACM, 36(2):335.348, 1989. [15] Erik Riedel, Christos Faloutsos, Garth A. Gibson, and David Nagle. Active disks for large-scale data processing. IEEE Computer, pages 68.74, June 2001. [16] Douglas Thain, Todd Tannenbaum, and Miron Livny. Distributed computing in practice: The Condor experience. Concurrency and Computation: Practice and Experience, 2004. [17] L. G. Valiant. A bridging model for parallel computation. Communications of the ACM, 33(8):103.111, 1997. [18] Jim Wyllie. Spsort: How to sort a terabyte quickly. http://alme1.almaden.ibm.com/cs/spsort.pdf.&#123;% note info %&#125;## ÈôÑÂΩï A-ÂçïËØçÈ¢ëÁéáÁªüËÆ° &#123;% endnote %&#125;Êú¨ËäÇÂåÖÂê´‰∫Ü‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÁ®ãÂ∫èÔºåÁî®‰∫éÁªüËÆ°Âú®‰∏ÄÁªÑÂëΩ‰ª§Ë°åÊåáÂÆöÁöÑËæìÂÖ•Êñá‰ª∂‰∏≠ÔºåÊØè‰∏Ä‰∏™‰∏çÂêåÁöÑÂçïËØçÂá∫Áé∞È¢ëÁéá„ÄÇ```python#include ‚Äúmapreduce/mapreduce.h‚Äù // User‚Äôs map functionclass WordCounter :public Mapper&#123;public: virtual void Map(const MapInput&amp;input)&#123; const string&amp;text=input.value(); const int n=text.size(); for(int i=0;i&lt;n; )&#123;// Skip past leading whitespace while((i&lt;n)&amp;&amp;isspace(text[i]))i++;// Find word end int start=i; while((i&lt;n)&amp;&amp;!isspace(text[i]))i++; if(start&lt;i)Emit(text.substr(start,i-start),‚Äù1‚Ä≤‚Ä≤); &#125;&#125; &#125;; REGISTER_MAPPER(WordCounter);// User‚Äôs reduce functionclass Adder :public Reducer&#123; virtual void Reduce(ReduceInput*input)&#123; // Iterate over all entries with the// same key and add the values int64 value=0; while(!input-&gt;done())&#123; value+=StringToInt(input-&gt;value());input-&gt;NextValue(); &#125;// Emit sum for input-&gt;key() Emit(IntToString(value));&#125; &#125;; REGISTER_REDUCER(Adder); int main(int argc,char**argv)&#123;ParseCommandLineFlags(argc,argv); MapReduceSpecification spec;// Store list of input files into ‚Äúspec‚Äù for(int i=1;i&lt;argc; i++)&#123; MapReduceInput*input=spec.add_input(); input-&gt;set_format(‚Äútext‚Äù); input-&gt;set_filepattern(argv[i]); input-&gt;set_mapper_class(‚ÄúWordCounter‚Äù); &#125;// Specify the output files:// /gfs/test/freq-00000-of-00100// /gfs/test/freq-00001-of-00100// ... MapReduceOutput*out=spec.output(); out-&gt;set_filebase(‚Äú/gfs/test/freq‚Äù); out-&gt;set_num_tasks(100); out-&gt;set_format(‚Äútext‚Äù); out-&gt;set_reducer_class(‚ÄúAdder‚Äù);// Optional: do partial sums within map tasks to save network bandwidth out-&gt;set_combiner_class(‚ÄúAdder‚Äù);// Tuning parameters: use at most 2000// machines and 100 MB of memory per task spec.set_machines(2000); spec.set_map_megabytes(100); spec.set_reduce_megabytes(100);// Now run it MapReduceResult result; if(!MapReduce(spec,&amp;result))abort();// Done: ‚Äòresult‚Äô structure contains info about counters, time taken, number of machines used, etc. return 0; &#125;","raw":null,"content":null,"categories":[{"name":"paper","slug":"paper","permalink":"https://stanxia.github.io/categories/paper/"}],"tags":[{"name":"paper","slug":"paper","permalink":"https://stanxia.github.io/tags/paper/"}]},{"title":"Google File System ‰∏≠ÊñáÁâà","slug":"Google-File-System-‰∏≠ÊñáÁâà","date":"2017-12-14T12:38:00.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/14/Google-File-System-‰∏≠ÊñáÁâà/","link":"","permalink":"https://stanxia.github.io/2017/12/14/Google-File-System-‰∏≠ÊñáÁâà/","excerpt":"ÊëòË¶Å\nÊàë‰ª¨ËÆæËÆ°Âπ∂ÂÆûÁé∞‰∫Ü Google GFS Êñá‰ª∂Á≥ªÁªüÔºå‰∏Ä‰∏™Èù¢ÂêëÂ§ßËßÑÊ®°Êï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®ÁöÑ„ÄÅÂèØ‰º∏Áº©ÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü„ÄÇGFS ËôΩÁÑ∂ËøêË°åÂú®Âªâ‰ª∑ÁöÑÊôÆÈÅçÁ°¨‰ª∂ËÆæÂ§á‰∏äÔºå‰ΩÜÊòØÂÆÉ‰æùÁÑ∂‰∫ÜÊèê‰æõÁÅæÈöæÂÜó‰ΩôÁöÑËÉΩÂäõÔºå‰∏∫Â§ßÈáèÂÆ¢Êà∑Êú∫Êèê‰æõ‰∫ÜÈ´òÊÄßËÉΩÁöÑÊúçÂä°„ÄÇ\nËôΩÁÑ∂ GFS ÁöÑËÆæËÆ°ÁõÆÊ†á‰∏éËÆ∏Â§ö‰º†ÁªüÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÊúâÂæàÂ§öÁõ∏Âêå‰πãÂ§ÑÔºå‰ΩÜÊòØÔºåÊàë‰ª¨ÁöÑËÆæËÆ°ËøòÊòØ‰ª•Êàë‰ª¨ÂØπËá™Â∑±ÁöÑÂ∫îÁî®ÁöÑË¥üËΩΩÊÉÖÂÜµÂíåÊäÄÊúØÁéØÂ¢ÉÁöÑÂàÜÊûê‰∏∫Âü∫Á°ÄÁöÑÔºå‰∏çÁÆ°Áé∞Âú®ËøòÊòØÂ∞ÜÊù•ÔºåGFS ÂíåÊó©ÊúüÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÁöÑËÆæÊÉ≥ÈÉΩÊúâÊòéÊòæÁöÑ‰∏çÂêå„ÄÇÊâÄ‰ª•Êàë‰ª¨ÈáçÊñ∞ÂÆ°ËßÜ‰∫Ü‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÂú®ËÆæËÆ°‰∏äÁöÑÊäòË°∑ÈÄâÊã©ÔºåË°çÁîüÂá∫‰∫ÜÂÆåÂÖ®‰∏çÂêåÁöÑËÆæËÆ°ÊÄùË∑Ø„ÄÇ\nGFS ÂÆåÂÖ®Êª°Ë∂≥‰∫ÜÊàë‰ª¨ÂØπÂ≠òÂÇ®ÁöÑÈúÄÊ±Ç„ÄÇGFS ‰Ωú‰∏∫Â≠òÂÇ®Âπ≥Âè∞Â∑≤ÁªèË¢´ÂπøÊ≥õÁöÑÈÉ®ÁΩ≤Âú® Google ÂÜÖÈÉ®ÔºåÂ≠òÂÇ®Êàë‰ª¨ÁöÑÊúçÂä°‰∫ßÁîüÂíåÂ§ÑÁêÜÁöÑÊï∞ÊçÆÔºåÂêåÊó∂ËøòÁî®‰∫éÈÇ£‰∫õÈúÄË¶ÅÂ§ßËßÑÊ®°Êï∞ÊçÆÈõÜÁöÑÁ†îÁ©∂ÂíåÂºÄÂèëÂ∑•‰Ωú„ÄÇÁõÆÂâç‰∏∫Ê≠¢ÔºåÊúÄÂ§ßÁöÑ‰∏Ä‰∏™ÈõÜÁæ§Âà©Áî®Êï∞ÂçÉÂè∞Êú∫Âô®ÁöÑÊï∞ÂçÉ‰∏™Á°¨ÁõòÔºåÊèê‰æõ‰∫ÜÊï∞Áôæ TB ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÂêåÊó∂‰∏∫Êï∞Áôæ‰∏™ÂÆ¢Êà∑Êú∫ÊúçÂä°„ÄÇÂú®Êú¨ËÆ∫Êñá‰∏≠ÔºåÊàë‰ª¨Â±ïÁ§∫‰∫ÜËÉΩÂ§üÊîØÊåÅÂàÜÂ∏ÉÂºèÂ∫îÁî®ÁöÑÊñá‰ª∂Á≥ªÁªüÊé•Âè£ÁöÑÊâ©Â±ïÔºåËÆ®ËÆ∫Êàë‰ª¨ËÆæËÆ°ÁöÑËÆ∏Â§öÊñπÈù¢ÔºåÊúÄÂêéÂàóÂá∫‰∫ÜÂ∞èËßÑÊ®°ÊÄßËÉΩÊµãËØï‰ª•ÂèäÁúüÂÆûÁîü‰∫ßÁ≥ªÁªü‰∏≠ÊÄßËÉΩÁõ∏ÂÖ≥Êï∞ÊçÆ„ÄÇ","text":"ÊëòË¶Å Êàë‰ª¨ËÆæËÆ°Âπ∂ÂÆûÁé∞‰∫Ü Google GFS Êñá‰ª∂Á≥ªÁªüÔºå‰∏Ä‰∏™Èù¢ÂêëÂ§ßËßÑÊ®°Êï∞ÊçÆÂØÜÈõÜÂûãÂ∫îÁî®ÁöÑ„ÄÅÂèØ‰º∏Áº©ÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü„ÄÇGFS ËôΩÁÑ∂ËøêË°åÂú®Âªâ‰ª∑ÁöÑÊôÆÈÅçÁ°¨‰ª∂ËÆæÂ§á‰∏äÔºå‰ΩÜÊòØÂÆÉ‰æùÁÑ∂‰∫ÜÊèê‰æõÁÅæÈöæÂÜó‰ΩôÁöÑËÉΩÂäõÔºå‰∏∫Â§ßÈáèÂÆ¢Êà∑Êú∫Êèê‰æõ‰∫ÜÈ´òÊÄßËÉΩÁöÑÊúçÂä°„ÄÇ ËôΩÁÑ∂ GFS ÁöÑËÆæËÆ°ÁõÆÊ†á‰∏éËÆ∏Â§ö‰º†ÁªüÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÊúâÂæàÂ§öÁõ∏Âêå‰πãÂ§ÑÔºå‰ΩÜÊòØÔºåÊàë‰ª¨ÁöÑËÆæËÆ°ËøòÊòØ‰ª•Êàë‰ª¨ÂØπËá™Â∑±ÁöÑÂ∫îÁî®ÁöÑË¥üËΩΩÊÉÖÂÜµÂíåÊäÄÊúØÁéØÂ¢ÉÁöÑÂàÜÊûê‰∏∫Âü∫Á°ÄÁöÑÔºå‰∏çÁÆ°Áé∞Âú®ËøòÊòØÂ∞ÜÊù•ÔºåGFS ÂíåÊó©ÊúüÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÁöÑËÆæÊÉ≥ÈÉΩÊúâÊòéÊòæÁöÑ‰∏çÂêå„ÄÇÊâÄ‰ª•Êàë‰ª¨ÈáçÊñ∞ÂÆ°ËßÜ‰∫Ü‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÂú®ËÆæËÆ°‰∏äÁöÑÊäòË°∑ÈÄâÊã©ÔºåË°çÁîüÂá∫‰∫ÜÂÆåÂÖ®‰∏çÂêåÁöÑËÆæËÆ°ÊÄùË∑Ø„ÄÇ GFS ÂÆåÂÖ®Êª°Ë∂≥‰∫ÜÊàë‰ª¨ÂØπÂ≠òÂÇ®ÁöÑÈúÄÊ±Ç„ÄÇGFS ‰Ωú‰∏∫Â≠òÂÇ®Âπ≥Âè∞Â∑≤ÁªèË¢´ÂπøÊ≥õÁöÑÈÉ®ÁΩ≤Âú® Google ÂÜÖÈÉ®ÔºåÂ≠òÂÇ®Êàë‰ª¨ÁöÑÊúçÂä°‰∫ßÁîüÂíåÂ§ÑÁêÜÁöÑÊï∞ÊçÆÔºåÂêåÊó∂ËøòÁî®‰∫éÈÇ£‰∫õÈúÄË¶ÅÂ§ßËßÑÊ®°Êï∞ÊçÆÈõÜÁöÑÁ†îÁ©∂ÂíåÂºÄÂèëÂ∑•‰Ωú„ÄÇÁõÆÂâç‰∏∫Ê≠¢ÔºåÊúÄÂ§ßÁöÑ‰∏Ä‰∏™ÈõÜÁæ§Âà©Áî®Êï∞ÂçÉÂè∞Êú∫Âô®ÁöÑÊï∞ÂçÉ‰∏™Á°¨ÁõòÔºåÊèê‰æõ‰∫ÜÊï∞Áôæ TB ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÂêåÊó∂‰∏∫Êï∞Áôæ‰∏™ÂÆ¢Êà∑Êú∫ÊúçÂä°„ÄÇÂú®Êú¨ËÆ∫Êñá‰∏≠ÔºåÊàë‰ª¨Â±ïÁ§∫‰∫ÜËÉΩÂ§üÊîØÊåÅÂàÜÂ∏ÉÂºèÂ∫îÁî®ÁöÑÊñá‰ª∂Á≥ªÁªüÊé•Âè£ÁöÑÊâ©Â±ïÔºåËÆ®ËÆ∫Êàë‰ª¨ËÆæËÆ°ÁöÑËÆ∏Â§öÊñπÈù¢ÔºåÊúÄÂêéÂàóÂá∫‰∫ÜÂ∞èËßÑÊ®°ÊÄßËÉΩÊµãËØï‰ª•ÂèäÁúüÂÆûÁîü‰∫ßÁ≥ªÁªü‰∏≠ÊÄßËÉΩÁõ∏ÂÖ≥Êï∞ÊçÆ„ÄÇÁÆÄ‰ªã ‰∏∫‰∫ÜÊª°Ë∂≥ Google ËøÖÈÄüÂ¢ûÈïøÁöÑÊï∞ÊçÆÂ§ÑÁêÜÈúÄÊ±ÇÔºåÊàë‰ª¨ËÆæËÆ°Âπ∂ÂÆûÁé∞‰∫Ü Google Êñá‰ª∂Á≥ªÁªü(Google File System ‚ÄìGFS)„ÄÇGFS ‰∏é‰º†ÁªüÁöÑÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÊúâÁùÄÂæàÂ§öÁõ∏ÂêåÁöÑËÆæËÆ°ÁõÆÊ†áÔºåÊØîÂ¶ÇÔºåÊÄßËÉΩ„ÄÅÂèØ‰º∏Áº©ÊÄß„ÄÅÂèØÈù†ÊÄß‰ª•ÂèäÂèØÁî®ÊÄß„ÄÇ‰ΩÜÊòØÔºåÊàë‰ª¨ÁöÑËÆæËÆ°ËøòÂü∫‰∫éÊàë‰ª¨ÂØπÊàë‰ª¨Ëá™Â∑±ÁöÑÂ∫îÁî®ÁöÑË¥üËΩΩÊÉÖÂÜµÂíåÊäÄÊúØÁéØÂ¢ÉÁöÑËßÇÂØüÁöÑÂΩ±ÂìçÔºå‰∏çÁÆ°Áé∞Âú®ËøòÊòØÂ∞ÜÊù•ÔºåGFS ÂíåÊó©ÊúüÊñá‰ª∂Á≥ªÁªüÁöÑÂÅáËÆæÈÉΩÊúâÊòéÊòæÁöÑ‰∏çÂêå„ÄÇÊâÄ‰ª•Êàë‰ª¨ÈáçÊñ∞ÂÆ°ËßÜ‰∫Ü‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÂú®ËÆæËÆ°‰∏äÁöÑÊäòË°∑ÈÄâÊã©ÔºåË°çÁîüÂá∫‰∫ÜÂÆåÂÖ®‰∏çÂêåÁöÑËÆæËÆ°ÊÄùË∑Ø„ÄÇ È¶ñÂÖàÔºåÁªÑ‰ª∂Â§±ÊïàË¢´ËÆ§‰∏∫ÊòØÂ∏∏ÊÄÅ‰∫ã‰ª∂ÔºåËÄå‰∏çÊòØÊÑèÂ§ñ‰∫ã‰ª∂„ÄÇGFS ÂåÖÊã¨Âá†ÁôæÁîöËá≥Âá†ÂçÉÂè∞ÊôÆÈÄöÁöÑÂªâ‰ª∑ËÆæÂ§áÁªÑË£ÖÁöÑÂ≠òÂÇ®Êú∫Âô®ÔºåÂêåÊó∂Ë¢´Áõ∏ÂΩìÊï∞ÈáèÁöÑÂÆ¢Êà∑Êú∫ËÆøÈóÆ„ÄÇGFS ÁªÑ‰ª∂ÁöÑÊï∞ÈáèÂíåË¥®ÈáèÂØºËá¥Âú®‰∫ãÂÆû‰∏äÔºå‰ªª‰ΩïÁªôÂÆöÊó∂Èó¥ÂÜÖÈÉΩÊúâÂèØËÉΩÂèëÁîüÊüê‰∫õÁªÑ‰ª∂Êó†Ê≥ïÂ∑•‰ΩúÔºåÊüê‰∫õÁªÑ‰ª∂Êó†Ê≥ï‰ªéÂÆÉ‰ª¨ÁõÆÂâçÁöÑÂ§±ÊïàÁä∂ÊÄÅ‰∏≠ÊÅ¢Â§ç„ÄÇÊàë‰ª¨ÈÅáÂà∞ËøáÂêÑÁßçÂêÑÊ†∑ÁöÑÈóÆÈ¢òÔºåÊØîÂ¶ÇÂ∫îÁî®Á®ãÂ∫è bug„ÄÅÊìç‰ΩúÁ≥ªÁªüÁöÑ bug„ÄÅ‰∫∫‰∏∫Â§±ËØØÔºåÁîöËá≥ËøòÊúâÁ°¨Áõò„ÄÅÂÜÖÂ≠ò„ÄÅËøûÊé•Âô®„ÄÅÁΩëÁªú‰ª•ÂèäÁîµÊ∫êÂ§±ÊïàÁ≠âÈÄ†ÊàêÁöÑÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÔºåÊåÅÁª≠ÁöÑÁõëÊéß„ÄÅÈîôËØØ‰æ¶Êµã„ÄÅÁÅæÈöæÂÜó‰Ωô‰ª•ÂèäËá™Âä®ÊÅ¢Â§çÁöÑÊú∫Âà∂ÂøÖÈ°ªÈõÜÊàêÂú® GFS ‰∏≠„ÄÇ ÂÖ∂Ê¨°Ôºå‰ª•ÈÄöÂ∏∏ÁöÑÊ†áÂáÜË°°ÈáèÔºåÊàë‰ª¨ÁöÑÊñá‰ª∂ÈùûÂ∏∏Â∑®Â§ß„ÄÇÊï∞ GB ÁöÑÊñá‰ª∂ÈùûÂ∏∏ÊôÆÈÅç„ÄÇÊØè‰∏™Êñá‰ª∂ÈÄöÂ∏∏ÈÉΩÂåÖÂê´ËÆ∏Â§öÂ∫îÁî®Á®ãÂ∫èÂØπË±°ÔºåÊØîÂ¶Ç web ÊñáÊ°£„ÄÇÂΩìÊàë‰ª¨ÁªèÂ∏∏ÈúÄË¶ÅÂ§ÑÁêÜÂø´ÈÄüÂ¢ûÈïøÁöÑ„ÄÅÂπ∂‰∏îÁî±Êï∞‰∫ø‰∏™ÂØπË±°ÊûÑÊàêÁöÑ„ÄÅÊï∞‰ª• TB ÁöÑÊï∞ÊçÆÈõÜÊó∂ÔºåÈááÁî®ÁÆ°ÁêÜÊï∞‰∫ø‰∏™ KB Â§ßÂ∞èÁöÑÂ∞èÊñá‰ª∂ÁöÑÊñπÂºèÊòØÈùûÂ∏∏‰∏çÊòéÊô∫ÁöÑÔºåÂ∞ΩÁÆ°Êúâ‰∫õÊñá‰ª∂Á≥ªÁªüÊîØÊåÅËøôÊ†∑ÁöÑÁÆ°ÁêÜÊñπÂºè„ÄÇÂõ†Ê≠§ÔºåËÆæËÆ°ÁöÑÂÅáËÆæÊù°‰ª∂ÂíåÂèÇÊï∞ÔºåÊØîÂ¶Ç I/O Êìç‰ΩúÂíå Block ÁöÑÂ∞∫ÂØ∏ÈÉΩÈúÄË¶ÅÈáçÊñ∞ËÄÉËôë„ÄÇ Á¨¨‰∏âÔºåÁªùÂ§ßÈÉ®ÂàÜÊñá‰ª∂ÁöÑ‰øÆÊîπÊòØÈááÁî®Âú®Êñá‰ª∂Â∞æÈÉ®ËøΩÂä†Êï∞ÊçÆÔºåËÄå‰∏çÊòØË¶ÜÁõñÂéüÊúâÊï∞ÊçÆÁöÑÊñπÂºè„ÄÇÂØπÊñá‰ª∂ÁöÑÈöèÊú∫ÂÜôÂÖ•Êìç‰ΩúÂú®ÂÆûÈôÖ‰∏≠Âá†‰πé‰∏çÂ≠òÂú®„ÄÇ‰∏ÄÊó¶ÂÜôÂÆå‰πãÂêéÔºåÂØπÊñá‰ª∂ÁöÑÊìç‰ΩúÂ∞±Âè™ÊúâËØªÔºåËÄå‰∏îÈÄöÂ∏∏ÊòØÊåâÈ°∫Â∫èËØª„ÄÇÂ§ßÈáèÁöÑÊï∞ÊçÆÁ¨¶ÂêàËøô‰∫õÁâπÊÄßÔºåÊØîÂ¶ÇÔºöÊï∞ÊçÆÂàÜÊûêÁ®ãÂ∫èÊâ´ÊèèÁöÑË∂ÖÂ§ßÁöÑÊï∞ÊçÆÈõÜÔºõÊ≠£Âú®ËøêË°åÁöÑÂ∫îÁî®Á®ãÂ∫èÁîüÊàêÁöÑËøûÁª≠ÁöÑÊï∞ÊçÆÊµÅÔºõÂ≠òÊ°£ÁöÑÊï∞ÊçÆÔºõÁî±‰∏ÄÂè∞Êú∫Âô®ÁîüÊàê„ÄÅÂè¶Â§ñ‰∏ÄÂè∞Êú∫Âô®Â§ÑÁêÜÁöÑ‰∏≠Èó¥Êï∞ÊçÆÔºåËøô‰∫õ‰∏≠Èó¥Êï∞ÊçÆÁöÑÂ§ÑÁêÜÂèØËÉΩÊòØÂêåÊó∂ËøõË°åÁöÑ„ÄÅ‰πüÂèØËÉΩÊòØÂêéÁª≠ÊâçÂ§ÑÁêÜÁöÑ„ÄÇÂØπ‰∫éËøôÁßçÈíàÂØπÊµ∑ÈáèÊñá‰ª∂ÁöÑËÆøÈóÆÊ®°ÂºèÔºåÂÆ¢Êà∑Á´ØÂØπÊï∞ÊçÆÂùóÁºìÂ≠òÊòØÊ≤°ÊúâÊÑè‰πâÁöÑÔºåÊï∞ÊçÆÁöÑËøΩÂä†Êìç‰ΩúÊòØÊÄßËÉΩ‰ºòÂåñÂíåÂéüÂ≠êÊÄß‰øùËØÅÁöÑ‰∏ªË¶ÅËÄÉÈáèÂõ†Á¥†„ÄÇ Á¨¨ÂõõÔºåÂ∫îÁî®Á®ãÂ∫èÂíåÊñá‰ª∂Á≥ªÁªü API ÁöÑÂçèÂêåËÆæËÆ°ÊèêÈ´ò‰∫ÜÊï¥‰∏™Á≥ªÁªüÁöÑÁÅµÊ¥ªÊÄß„ÄÇÊØîÂ¶ÇÔºåÊàë‰ª¨ÊîæÊùæ‰∫ÜÂØπ GFS ‰∏ÄËá¥ÊÄßÊ®°ÂûãÁöÑË¶ÅÊ±ÇÔºåËøôÊ†∑Â∞±ÂáèËΩª‰∫ÜÊñá‰ª∂Á≥ªÁªüÂØπÂ∫îÁî®Á®ãÂ∫èÁöÑËãõÂàªË¶ÅÊ±ÇÔºåÂ§ßÂ§ßÁÆÄÂåñ‰∫Ü GFS ÁöÑËÆæËÆ°„ÄÇÊàë‰ª¨ÂºïÂÖ•‰∫ÜÂéüÂ≠êÊÄßÁöÑËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÔºå‰ªéËÄå‰øùËØÅÂ§ö‰∏™ÂÆ¢Êà∑Á´ØËÉΩÂ§üÂêåÊó∂ËøõË°åËøΩÂä†Êìç‰ΩúÔºå‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂêåÊ≠•Êìç‰ΩúÊù•‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß„ÄÇÊú¨ÊñáÂêéÈù¢ËøòÊúâÂØπËøô‰∫õÈóÆÈ¢òÁöÑÁªÜËäÇÁöÑËØ¶ÁªÜËÆ®ËÆ∫„ÄÇ Google Â∑≤ÁªèÈíàÂØπ‰∏çÂêåÁöÑÂ∫îÁî®ÈÉ®ÁΩ≤‰∫ÜÂ§öÂ•ó GFS ÈõÜÁæ§„ÄÇÊúÄÂ§ßÁöÑ‰∏Ä‰∏™ÈõÜÁæ§Êã•ÊúâË∂ÖËøá 1000 ‰∏™Â≠òÂÇ®ËäÇÁÇπÔºåË∂ÖËøá300TB ÁöÑÁ°¨ÁõòÁ©∫Èó¥ÔºåË¢´‰∏çÂêåÊú∫Âô®‰∏äÁöÑÊï∞Áôæ‰∏™ÂÆ¢Êà∑Á´ØËøûÁª≠‰∏çÊñ≠ÁöÑÈ¢ëÁπÅËÆøÈóÆ„ÄÇ ËÆæËÆ°Ê¶ÇËø∞ ËÆæËÆ°È¢ÑÊúüÂú®ËÆæËÆ°Êª°Ë∂≥Êàë‰ª¨ÈúÄÊ±ÇÁöÑÊñá‰ª∂Á≥ªÁªüÊó∂ÂÄôÔºåÊàë‰ª¨ÁöÑËÆæËÆ°ÁõÆÊ†áÊó¢ÊúâÊú∫‰ºö„ÄÅÂèàÊúâÊåëÊàò„ÄÇ‰πãÂâçÊàë‰ª¨Â∑≤ÁªèÊèêÂà∞‰∫Ü‰∏Ä‰∫õÈúÄË¶ÅÂÖ≥Ê≥®ÁöÑÂÖ≥ÈîÆÁÇπÔºåËøôÈáåÊàë‰ª¨Â∞ÜËÆæËÆ°ÁöÑÈ¢ÑÊúüÁõÆÊ†áÁöÑÁªÜËäÇÂ±ïÂºÄËÆ®ËÆ∫„ÄÇ Á≥ªÁªüÁî±ËÆ∏Â§öÂªâ‰ª∑ÁöÑÊôÆÈÄöÁªÑ‰ª∂ÁªÑÊàêÔºåÁªÑ‰ª∂Â§±ÊïàÊòØ‰∏ÄÁßçÂ∏∏ÊÄÅ„ÄÇÁ≥ªÁªüÂøÖÈ°ªÊåÅÁª≠ÁõëÊéßËá™Ë∫´ÁöÑÁä∂ÊÄÅÔºåÂÆÉÂøÖÈ°ªÂ∞ÜÁªÑ‰ª∂Â§±Êïà‰Ωú‰∏∫‰∏ÄÁßçÂ∏∏ÊÄÅÔºåËÉΩÂ§üËøÖÈÄüÂú∞‰æ¶Êµã„ÄÅÂÜó‰ΩôÂπ∂ÊÅ¢Â§çÂ§±ÊïàÁöÑÁªÑ‰ª∂„ÄÇ Á≥ªÁªüÂ≠òÂÇ®‰∏ÄÂÆöÊï∞ÈáèÁöÑÂ§ßÊñá‰ª∂„ÄÇÊàë‰ª¨È¢ÑÊúü‰ºöÊúâÂá†Áôæ‰∏áÊñá‰ª∂ÔºåÊñá‰ª∂ÁöÑÂ§ßÂ∞èÈÄöÂ∏∏Âú® 100MB ÊàñËÄÖ‰ª•‰∏ä„ÄÇÊï∞‰∏™ GBÂ§ßÂ∞èÁöÑÊñá‰ª∂‰πüÊòØÊôÆÈÅçÂ≠òÂú®ÔºåÂπ∂‰∏îË¶ÅËÉΩÂ§üË¢´ÊúâÊïàÁöÑÁÆ°ÁêÜ„ÄÇÁ≥ªÁªü‰πüÂøÖÈ°ªÊîØÊåÅÂ∞èÊñá‰ª∂Ôºå‰ΩÜÊòØ‰∏çÈúÄË¶ÅÈíàÂØπÂ∞èÊñá‰ª∂ÂÅö‰∏ìÈó®ÁöÑ‰ºòÂåñ„ÄÇ Á≥ªÁªüÁöÑÂ∑•‰ΩúË¥üËΩΩ‰∏ªË¶ÅÁî±‰∏§ÁßçËØªÊìç‰ΩúÁªÑÊàêÔºöÂ§ßËßÑÊ®°ÁöÑÊµÅÂºèËØªÂèñÂíåÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫ËØªÂèñ„ÄÇÂ§ßËßÑÊ®°ÁöÑÊµÅÂºèËØªÂèñÈÄöÂ∏∏‰∏ÄÊ¨°ËØªÂèñÊï∞Áôæ KB ÁöÑÊï∞ÊçÆÔºåÊõ¥Â∏∏ËßÅÁöÑÊòØ‰∏ÄÊ¨°ËØªÂèñ 1MB ÁîöËá≥Êõ¥Â§öÁöÑÊï∞ÊçÆ„ÄÇÊù•Ëá™Âêå‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ÁöÑËøûÁª≠Êìç‰ΩúÈÄöÂ∏∏ÊòØËØªÂèñÂêå‰∏Ä‰∏™Êñá‰ª∂‰∏≠ËøûÁª≠ÁöÑ‰∏Ä‰∏™Âå∫Âüü„ÄÇÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫ËØªÂèñÈÄöÂ∏∏ÊòØÂú®Êñá‰ª∂Êüê‰∏™ÈöèÊú∫ÁöÑ‰ΩçÁΩÆËØªÂèñÂá†‰∏™ KB Êï∞ÊçÆ„ÄÇÂ¶ÇÊûúÂ∫îÁî®Á®ãÂ∫èÂØπÊÄßËÉΩÈùûÂ∏∏ÂÖ≥Ê≥®ÔºåÈÄöÂ∏∏ÁöÑÂÅöÊ≥ïÊòØÊääÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫ËØªÂèñÊìç‰ΩúÂêàÂπ∂Âπ∂ÊéíÂ∫èÔºå‰πãÂêéÊåâÈ°∫Â∫èÊâπÈáèËØªÂèñÔºåËøôÊ†∑Â∞±ÈÅøÂÖç‰∫ÜÂú®Êñá‰ª∂‰∏≠ÂâçÂêéÊù•ÂõûÁöÑÁßªÂä®ËØªÂèñ‰ΩçÁΩÆ„ÄÇ Á≥ªÁªüÁöÑÂ∑•‰ΩúË¥üËΩΩËøòÂåÖÊã¨ËÆ∏Â§öÂ§ßËßÑÊ®°ÁöÑ„ÄÅÈ°∫Â∫èÁöÑ„ÄÅÊï∞ÊçÆËøΩÂä†ÊñπÂºèÁöÑÂÜôÊìç‰Ωú„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÊØèÊ¨°ÂÜôÂÖ•ÁöÑÊï∞ÊçÆÁöÑÂ§ßÂ∞èÂíåÂ§ßËßÑÊ®°ËØªÁ±ª‰ºº„ÄÇÊï∞ÊçÆ‰∏ÄÊó¶Ë¢´ÂÜôÂÖ•ÂêéÔºåÊñá‰ª∂Â∞±ÂæàÂ∞ë‰ºöË¢´‰øÆÊîπ‰∫Ü„ÄÇÁ≥ªÁªüÊîØÊåÅÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫‰ΩçÁΩÆÂÜôÂÖ•Êìç‰ΩúÔºå‰ΩÜÊòØÂèØËÉΩÊïàÁéá‰∏çÂΩ∞„ÄÇ Á≥ªÁªüÂøÖÈ°ªÈ´òÊïàÁöÑ„ÄÅË°å‰∏∫ÂÆö‰πâÊòéÁ°ÆÁöÑÔºàÂéüÊñáÔºöwell-definedÔºâÂÆûÁé∞Â§öÂÆ¢Êà∑Á´ØÂπ∂Ë°åËøΩÂä†Êï∞ÊçÆÂà∞Âêå‰∏Ä‰∏™Êñá‰ª∂ÈáåÁöÑËØ≠ÊÑè„ÄÇÊàë‰ª¨ÁöÑÊñá‰ª∂ÈÄöÂ∏∏Ë¢´Áî®‰∫é‚ÄúÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖ‚ÄùÈòüÂàóÔºåÊàñËÄÖÂÖ∂ÂÆÉÂ§öË∑ØÊñá‰ª∂ÂêàÂπ∂Êìç‰Ωú„ÄÇÈÄöÂ∏∏‰ºöÊúâÊï∞Áôæ‰∏™Áîü‰∫ßËÄÖÔºåÊØè‰∏™Áîü‰∫ßËÄÖËøõÁ®ãËøêË°åÂú®‰∏ÄÂè∞Êú∫Âô®‰∏äÔºåÂêåÊó∂ÂØπ‰∏Ä‰∏™Êñá‰ª∂ËøõË°åËøΩÂä†Êìç‰Ωú„ÄÇ‰ΩøÁî®ÊúÄÂ∞èÁöÑÂêåÊ≠•ÂºÄÈîÄÊù•ÂÆûÁé∞ÁöÑÂéüÂ≠êÁöÑÂ§öË∑ØËøΩÂä†Êï∞ÊçÆÊìç‰ΩúÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑ„ÄÇÊñá‰ª∂ÂèØ‰ª•Âú®Á®çÂêéËØªÂèñÔºåÊàñËÄÖÊòØÊ∂àË¥πËÄÖÂú®ËøΩÂä†ÁöÑÊìç‰ΩúÁöÑÂêåÊó∂ËØªÂèñÊñá‰ª∂„ÄÇ È´òÊÄßËÉΩÁöÑÁ®≥ÂÆöÁΩëÁªúÂ∏¶ÂÆΩËøúÊØî‰ΩéÂª∂ËøüÈáçË¶Å„ÄÇÊàë‰ª¨ÁöÑÁõÆÊ†áÁ®ãÂ∫èÁªùÂ§ßÈÉ®ÂàÜË¶ÅÊ±ÇËÉΩÂ§üÈ´òÈÄüÁéáÁöÑ„ÄÅÂ§ßÊâπÈáèÁöÑÂ§ÑÁêÜÊï∞ÊçÆÔºåÊûÅÂ∞ëÊúâÁ®ãÂ∫èÂØπÂçï‰∏ÄÁöÑËØªÂÜôÊìç‰ΩúÊúâ‰∏•Ê†ºÁöÑÂìçÂ∫îÊó∂Èó¥Ë¶ÅÊ±Ç„ÄÇ Êé•Âè£GFS Êèê‰æõ‰∫Ü‰∏ÄÂ•óÁ±ª‰ºº‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÁöÑ API Êé•Âè£ÂáΩÊï∞ÔºåËôΩÁÑ∂Âπ∂‰∏çÊòØ‰∏•Ê†ºÊåâÁÖß POSIX Á≠âÊ†áÂáÜ API ÁöÑÂΩ¢ÂºèÂÆûÁé∞ÁöÑ„ÄÇÊñá‰ª∂‰ª•ÂàÜÂ±ÇÁõÆÂΩïÁöÑÂΩ¢ÂºèÁªÑÁªáÔºåÁî®Ë∑ØÂæÑÂêçÊù•Ê†áËØÜ„ÄÇÊàë‰ª¨ÊîØÊåÅÂ∏∏Áî®ÁöÑÊìç‰ΩúÔºåÂ¶ÇÂàõÂª∫Êñ∞Êñá‰ª∂„ÄÅÂà†Èô§Êñá‰ª∂„ÄÅÊâìÂºÄÊñá‰ª∂„ÄÅÂÖ≥Èó≠Êñá‰ª∂„ÄÅËØªÂíåÂÜôÊñá‰ª∂„ÄÇ Âè¶Â§ñÔºåGFS Êèê‰æõ‰∫ÜÂø´ÁÖßÂíåËÆ∞ÂΩïËøΩÂä†Êìç‰Ωú„ÄÇÂø´ÁÖß‰ª•Âæà‰ΩéÁöÑÊàêÊú¨ÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂ÊàñËÄÖÁõÆÂΩïÊ†ëÁöÑÊã∑Ë¥ù„ÄÇËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂÖÅËÆ∏Â§ö‰∏™ÂÆ¢Êà∑Á´ØÂêåÊó∂ÂØπ‰∏Ä‰∏™Êñá‰ª∂ËøõË°åÊï∞ÊçÆËøΩÂä†Êìç‰ΩúÔºåÂêåÊó∂‰øùËØÅÊØè‰∏™ÂÆ¢Êà∑Á´ØÁöÑËøΩÂä†Êìç‰ΩúÈÉΩÊòØÂéüÂ≠êÊÄßÁöÑ„ÄÇËøôÂØπ‰∫éÂÆûÁé∞Â§öË∑ØÁªìÊûúÂêàÂπ∂Ôºå‰ª•Âèä‚ÄúÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖ‚ÄùÈòüÂàóÈùûÂ∏∏ÊúâÁî®ÔºåÂ§ö‰∏™ÂÆ¢Êà∑Á´ØÂèØ‰ª•Âú®‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂêåÊ≠•ÈîÅÂÆöÁöÑÊÉÖÂÜµ‰∏ãÔºåÂêåÊó∂ÂØπ‰∏Ä‰∏™Êñá‰ª∂ËøΩÂä†Êï∞ÊçÆ„ÄÇÊàë‰ª¨ÂèëÁé∞Ëøô‰∫õÁ±ªÂûãÁöÑÊñá‰ª∂ÂØπ‰∫éÊûÑÂª∫Â§ßÂûãÂàÜÂ∏ÉÂ∫îÁî®ÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑ„ÄÇÂø´ÁÖßÂíåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂ∞ÜÂú® 3.4 Âíå 3.3 ËäÇÂàÜÂà´ËÆ®ËÆ∫„ÄÇ Êû∂ÊûÑ‰∏Ä‰∏™ GFS ÈõÜÁæ§ÂåÖÂê´‰∏Ä‰∏™ÂçïÁã¨ÁöÑ Master ËäÇÁÇπÔºàËøôÈáåÁöÑ‰∏Ä‰∏™ÂçïÁã¨ÁöÑ Master ËäÇÁÇπÁöÑÂê´‰πâÊòØ GFS Á≥ªÁªü‰∏≠Âè™Â≠òÂú®‰∏Ä‰∏™ÈÄªËæë‰∏äÁöÑ Master ÁªÑ‰ª∂„ÄÇÂêéÈù¢Êàë‰ª¨Ëøò‰ºöÊèêÂà∞ Master ËäÇÁÇπÂ§çÂà∂ÔºåÂõ†Ê≠§Ôºå‰∏∫‰∫ÜÁêÜËß£Êñπ‰æøÔºåÊàë‰ª¨Êää Master ËäÇÁÇπËßÜ‰∏∫‰∏Ä‰∏™ÈÄªËæë‰∏äÁöÑÊ¶ÇÂøµÔºå‰∏Ä‰∏™ÈÄªËæëÁöÑ Master ËäÇÁÇπÂåÖÊã¨‰∏§Âè∞Áâ©ÁêÜ‰∏ªÊú∫Ôºâ„ÄÅÂ§öÂè∞ Chunk ÊúçÂä°Âô®ÔºåÂπ∂‰∏îÂêåÊó∂Ë¢´Â§ö‰∏™ÂÆ¢Êà∑Á´ØËÆøÈóÆÔºåÂ¶ÇÂõæ 1ÊâÄÁ§∫„ÄÇÊâÄÊúâÁöÑËøô‰∫õÊú∫Âô®ÈÄöÂ∏∏ÈÉΩÊòØÊôÆÈÄöÁöÑ Linux Êú∫Âô®ÔºåËøêË°åÁùÄÁî®Êà∑Á∫ßÂà´(user-level)ÁöÑÊúçÂä°ËøõÁ®ã„ÄÇÊàë‰ª¨ÂèØ‰ª•ÂæàÂÆπÊòìÁöÑÊää Chunk ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÈÉΩÊîæÂú®Âêå‰∏ÄÂè∞Êú∫Âô®‰∏äÔºåÂâçÊèêÊòØÊú∫Âô®ËµÑÊ∫êÂÖÅËÆ∏ÔºåÂπ∂‰∏îÊàë‰ª¨ËÉΩÂ§üÊé•Âèó‰∏çÂèØÈù†ÁöÑÂ∫îÁî®Á®ãÂ∫è‰ª£Á†ÅÂ∏¶Êù•ÁöÑÁ®≥ÂÆöÊÄßÈôç‰ΩéÁöÑÈ£éÈô©„ÄÇGFS Â≠òÂÇ®ÁöÑÊñá‰ª∂ÈÉΩË¢´ÂàÜÂâ≤ÊàêÂõ∫ÂÆöÂ§ßÂ∞èÁöÑ Chunk„ÄÇÂú® Chunk ÂàõÂª∫ÁöÑÊó∂ÂÄôÔºåMaster ÊúçÂä°Âô®‰ºöÁªôÊØè‰∏™ Chunk ÂàÜÈÖç‰∏Ä‰∏™‰∏çÂèòÁöÑ„ÄÅÂÖ®ÁêÉÂîØ‰∏ÄÁöÑ 64 ‰ΩçÁöÑ Chunk Ê†áËØÜ„ÄÇChunk ÊúçÂä°Âô®Êää Chunk ‰ª• Linux Êñá‰ª∂ÁöÑÂΩ¢Âºè‰øùÂ≠òÂú®Êú¨Âú∞Á°¨Áõò‰∏äÔºåÂπ∂‰∏îÊ†πÊçÆÊåáÂÆöÁöÑ Chunk Ê†áËØÜÂíåÂ≠óËäÇËåÉÂõ¥Êù•ËØªÂÜôÂùóÊï∞ÊçÆ„ÄÇÂá∫‰∫éÂèØÈù†ÊÄßÁöÑËÄÉËôëÔºåÊØè‰∏™ÂùóÈÉΩ‰ºöÂ§çÂà∂Âà∞Â§ö‰∏™ÂùóÊúçÂä°Âô®‰∏ä„ÄÇÁº∫ÁúÅÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ΩøÁî® 3 ‰∏™Â≠òÂÇ®Â§çÂà∂ËäÇÁÇπÔºå‰∏çËøáÁî®Êà∑ÂèØ‰ª•‰∏∫‰∏çÂêåÁöÑÊñá‰ª∂ÂëΩÂêçÁ©∫Èó¥ËÆæÂÆö‰∏çÂêåÁöÑÂ§çÂà∂Á∫ßÂà´„ÄÇ Master ËäÇÁÇπÁÆ°ÁêÜÊâÄÊúâÁöÑÊñá‰ª∂Á≥ªÁªüÂÖÉÊï∞ÊçÆ„ÄÇËøô‰∫õÂÖÉÊï∞ÊçÆÂåÖÊã¨ÂêçÂ≠óÁ©∫Èó¥„ÄÅËÆøÈóÆÊéßÂà∂‰ø°ÊÅØ„ÄÅÊñá‰ª∂Âíå Chunk ÁöÑÊò†Â∞Ñ‰ø°ÊÅØ„ÄÅ‰ª•ÂèäÂΩìÂâç Chunk ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇMaster ËäÇÁÇπËøòÁÆ°ÁêÜÁùÄÁ≥ªÁªüËåÉÂõ¥ÂÜÖÁöÑÊ¥ªÂä®ÔºåÊØîÂ¶ÇÔºåChunk ÁßüÁî®ÁÆ°ÁêÜÔºàBDB ‰πüÊúâÂÖ≥‰∫é lease ÁöÑÊèèËø∞Ôºå‰∏çÁü•ÈÅìÊòØÂê¶Áõ∏ÂêåÔºâ„ÄÅÂ≠§ÂÑø ChunkÔºàÂéüÊñáÔºöorphaned chunksÔºâÁöÑÂõûÊî∂„ÄÅ‰ª•Âèä Chunk Âú® Chunk ÊúçÂä°Âô®‰πãÈó¥ÁöÑËøÅÁßª„ÄÇMaster ËäÇÁÇπ‰ΩøÁî®ÂøÉË∑≥‰ø°ÊÅØÂë®ÊúüÂú∞ÂíåÊØè‰∏™ ChunkÊúçÂä°Âô®ÈÄöËÆØÔºåÂèëÈÄÅÊåá‰ª§Âà∞ÂêÑ‰∏™ Chunk ÊúçÂä°Âô®Âπ∂Êé•Êî∂ Chunk ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ„ÄÇ GFS ÂÆ¢Êà∑Á´Ø‰ª£Á†Å‰ª•Â∫ìÁöÑÂΩ¢ÂºèË¢´ÈìæÊé•Âà∞ÂÆ¢Êà∑Á®ãÂ∫èÈáå„ÄÇÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÂÆûÁé∞‰∫Ü GFS Êñá‰ª∂Á≥ªÁªüÁöÑ API Êé•Âè£ÂáΩÊï∞„ÄÅÂ∫îÁî®Á®ãÂ∫è‰∏é Master ËäÇÁÇπÂíå Chunk ÊúçÂä°Âô®ÈÄöËÆØ„ÄÅ‰ª•ÂèäÂØπÊï∞ÊçÆËøõË°åËØªÂÜôÊìç‰Ωú„ÄÇÂÆ¢Êà∑Á´ØÂíå Master ËäÇÁÇπÁöÑÈÄö‰ø°Âè™Ëé∑ÂèñÂÖÉÊï∞ÊçÆÔºåÊâÄÊúâÁöÑÊï∞ÊçÆÊìç‰ΩúÈÉΩÊòØÁî±ÂÆ¢Êà∑Á´ØÁõ¥Êé•Âíå Chunk ÊúçÂä°Âô®ËøõË°å‰∫§‰∫íÁöÑ„ÄÇÊàë‰ª¨‰∏çÊèê‰æõ POSIX Ê†áÂáÜÁöÑ API ÁöÑÂäüËÉΩÔºåÂõ†Ê≠§ÔºåGFS API Ë∞ÉÁî®‰∏çÈúÄË¶ÅÊ∑±ÂÖ•Âà∞ Linux vnode Á∫ßÂà´„ÄÇ Êó†ËÆ∫ÊòØÂÆ¢Êà∑Á´ØËøòÊòØ Chunk ÊúçÂä°Âô®ÈÉΩ‰∏çÈúÄË¶ÅÁºìÂ≠òÊñá‰ª∂Êï∞ÊçÆ„ÄÇÂÆ¢Êà∑Á´ØÁºìÂ≠òÊï∞ÊçÆÂá†‰πéÊ≤°Êúâ‰ªÄ‰πàÁî®Â§ÑÔºåÂõ†‰∏∫Â§ßÈÉ®ÂàÜÁ®ãÂ∫èË¶Å‰πà‰ª•ÊµÅÁöÑÊñπÂºèËØªÂèñ‰∏Ä‰∏™Â∑®Â§ßÊñá‰ª∂ÔºåË¶Å‰πàÂ∑•‰ΩúÈõÜÂ§™Â§ßÊ†πÊú¨Êó†Ê≥ïË¢´ÁºìÂ≠ò„ÄÇÊó†ÈúÄËÄÉËôëÁºìÂ≠òÁõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò‰πüÁÆÄÂåñ‰∫ÜÂÆ¢Êà∑Á´ØÂíåÊï¥‰∏™Á≥ªÁªüÁöÑËÆæËÆ°ÂíåÂÆûÁé∞ÔºàÊ≥®Ôºö‰∏çËøáÔºåÂÆ¢Êà∑Á´Ø‰ºöÁºìÂ≠òÂÖÉÊï∞ÊçÆ„ÄÇÔºâ„ÄÇChunk ÊúçÂä°Âô®‰∏çÈúÄË¶ÅÁºìÂ≠òÊñá‰ª∂Êï∞ÊçÆÁöÑÂéüÂõ†ÊòØÔºåChunk ‰ª•Êú¨Âú∞Êñá‰ª∂ÁöÑÊñπÂºè‰øùÂ≠òÔºåLinux Êìç‰ΩúÁ≥ªÁªüÁöÑÊñá‰ª∂Á≥ªÁªüÁºìÂ≠ò‰ºöÊääÁªèÂ∏∏ËÆøÈóÆÁöÑÊï∞ÊçÆÁºìÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ Âçï‰∏Ä Master ËäÇÁÇπÂçï‰∏ÄÁöÑ Master ËäÇÁÇπÁöÑÁ≠ñÁï•Â§ßÂ§ßÁÆÄÂåñ‰∫ÜÊàë‰ª¨ÁöÑËÆæËÆ°„ÄÇÂçï‰∏ÄÁöÑ Master ËäÇÁÇπÂèØ‰ª•ÈÄöËøáÂÖ®Â±ÄÁöÑ‰ø°ÊÅØÁ≤æÁ°ÆÂÆö‰ΩçChunk ÁöÑ‰ΩçÁΩÆ‰ª•ÂèäËøõË°åÂ§çÂà∂ÂÜ≥Á≠ñ„ÄÇÂè¶Â§ñÔºåÊàë‰ª¨ÂøÖÈ°ªÂáèÂ∞ëÂØπ Master ËäÇÁÇπÁöÑËØªÂÜôÔºåÈÅøÂÖç Master ËäÇÁÇπÊàê‰∏∫Á≥ªÁªüÁöÑÁì∂È¢à„ÄÇÂÆ¢Êà∑Á´ØÂπ∂‰∏çÈÄöËøá Master ËäÇÁÇπËØªÂÜôÊñá‰ª∂Êï∞ÊçÆ„ÄÇÂèç‰πãÔºåÂÆ¢Êà∑Á´ØÂêë Master ËäÇÁÇπËØ¢ÈóÆÂÆÉÂ∫îËØ•ËÅîÁ≥ªÁöÑ Chunk ÊúçÂä°Âô®„ÄÇÂÆ¢Êà∑Á´ØÂ∞ÜËøô‰∫õÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÁºìÂ≠ò‰∏ÄÊÆµÊó∂Èó¥ÔºåÂêéÁª≠ÁöÑÊìç‰ΩúÂ∞ÜÁõ¥Êé•Âíå Chunk ÊúçÂä°Âô®ËøõË°åÊï∞ÊçÆËØªÂÜôÊìç‰Ωú„ÄÇ Êàë‰ª¨Âà©Áî®Âõæ 1 Ëß£Èáä‰∏Ä‰∏ã‰∏ÄÊ¨°ÁÆÄÂçïËØªÂèñÁöÑÊµÅÁ®ã„ÄÇÈ¶ñÂÖàÔºåÂÆ¢Êà∑Á´ØÊääÊñá‰ª∂ÂêçÂíåÁ®ãÂ∫èÊåáÂÆöÁöÑÂ≠óËäÇÂÅèÁßªÔºåÊ†πÊçÆÂõ∫ÂÆöÁöÑ Chunk Â§ßÂ∞èÔºåËΩ¨Êç¢ÊàêÊñá‰ª∂ÁöÑ Chunk Á¥¢Âºï„ÄÇÁÑ∂ÂêéÔºåÂÆÉÊääÊñá‰ª∂ÂêçÂíå Chunk Á¥¢ÂºïÂèëÈÄÅÁªô Master ËäÇÁÇπ„ÄÇMaster ËäÇÁÇπÂ∞ÜÁõ∏Â∫îÁöÑ Chunk Ê†áËØÜÂíåÂâØÊú¨ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÂèëËøòÁªôÂÆ¢Êà∑Á´Ø„ÄÇÂÆ¢Êà∑Á´ØÁî®Êñá‰ª∂ÂêçÂíå Chunk Á¥¢Âºï‰Ωú‰∏∫ key ÁºìÂ≠òËøô‰∫õ‰ø°ÊÅØ„ÄÇ ‰πãÂêéÂÆ¢Êà∑Á´ØÂèëÈÄÅËØ∑Ê±ÇÂà∞ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÂâØÊú¨Â§ÑÔºå‰∏ÄËà¨‰ºöÈÄâÊã©ÊúÄËøëÁöÑ„ÄÇËØ∑Ê±Ç‰ø°ÊÅØÂåÖÂê´‰∫Ü Chunk ÁöÑÊ†áËØÜÂíåÂ≠óËäÇËåÉÂõ¥„ÄÇÂú®ÂØπËøô‰∏™ Chunk ÁöÑÂêéÁª≠ËØªÂèñÊìç‰Ωú‰∏≠ÔºåÂÆ¢Êà∑Á´Ø‰∏çÂøÖÂÜçÂíå Master ËäÇÁÇπÈÄöËÆØ‰∫ÜÔºåÈô§ÈùûÁºìÂ≠òÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØËøáÊúüÊàñËÄÖÊñá‰ª∂Ë¢´ÈáçÊñ∞ÊâìÂºÄ„ÄÇÂÆûÈôÖ‰∏äÔºåÂÆ¢Êà∑Á´ØÈÄöÂ∏∏‰ºöÂú®‰∏ÄÊ¨°ËØ∑Ê±Ç‰∏≠Êü•ËØ¢Â§ö‰∏™ Chunk ‰ø°ÊÅØÔºåMaster ËäÇÁÇπÁöÑÂõûÂ∫î‰πüÂèØËÉΩÂåÖÂê´‰∫ÜÁ¥ßË∑üÁùÄËøô‰∫õË¢´ËØ∑Ê±ÇÁöÑ Chunk ÂêéÈù¢ÁöÑ Chunk ÁöÑ‰ø°ÊÅØ„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøô‰∫õÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÂú®Ê≤°Êúâ‰ªª‰Ωï‰ª£‰ª∑ÁöÑÊÉÖÂÜµ‰∏ãÔºåÈÅøÂÖç‰∫ÜÂÆ¢Êà∑Á´ØÂíå Master ËäÇÁÇπÊú™Êù•ÂèØËÉΩ‰ºöÂèëÁîüÁöÑÂá†Ê¨°ÈÄöËÆØ„ÄÇ Chunk Â∞∫ÂØ∏Chunk ÁöÑÂ§ßÂ∞èÊòØÂÖ≥ÈîÆÁöÑËÆæËÆ°ÂèÇÊï∞‰πã‰∏Ä„ÄÇÊàë‰ª¨ÈÄâÊã©‰∫Ü 64MBÔºåËøô‰∏™Â∞∫ÂØ∏ËøúËøúÂ§ß‰∫é‰∏ÄËà¨Êñá‰ª∂Á≥ªÁªüÁöÑ Block size„ÄÇÊØè‰∏™ Chunk ÁöÑÂâØÊú¨ÈÉΩ‰ª•ÊôÆÈÄö Linux Êñá‰ª∂ÁöÑÂΩ¢Âºè‰øùÂ≠òÂú® Chunk ÊúçÂä°Âô®‰∏äÔºåÂè™ÊúâÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÊâçÊâ©Â§ß„ÄÇÊÉ∞ÊÄßÁ©∫Èó¥ÂàÜÈÖçÁ≠ñÁï•ÈÅøÂÖç‰∫ÜÂõ†ÂÜÖÈÉ®Á¢éÁâáÈÄ†ÊàêÁöÑÁ©∫Èó¥Êµ™Ë¥πÔºåÂÜÖÈÉ®Á¢éÁâáÊàñËÆ∏ÊòØÂØπÈÄâÊã©Ëøô‰πàÂ§ßÁöÑ Chunk Â∞∫ÂØ∏ÊúÄÂÖ∑‰∫âËÆÆ‰∏ÄÁÇπ„ÄÇ ÈÄâÊã©ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏ÊúâÂá†‰∏™ÈáçË¶ÅÁöÑ‰ºòÁÇπ„ÄÇÈ¶ñÂÖàÔºåÂÆÉÂáèÂ∞ë‰∫ÜÂÆ¢Êà∑Á´ØÂíå Master ËäÇÁÇπÈÄöËÆØÁöÑÈúÄÊ±ÇÔºåÂõ†‰∏∫Âè™ÈúÄË¶Å‰∏ÄÊ¨°Âíå Mater ËäÇÁÇπÁöÑÈÄö‰ø°Â∞±ÂèØ‰ª•Ëé∑Âèñ Chunk ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÔºå‰πãÂêéÂ∞±ÂèØ‰ª•ÂØπÂêå‰∏Ä‰∏™ Chunk ËøõË°åÂ§öÊ¨°ÁöÑËØªÂÜôÊìç‰Ωú„ÄÇËøôÁßçÊñπÂºèÂØπÈôç‰ΩéÊàë‰ª¨ÁöÑÂ∑•‰ΩúË¥üËΩΩÊù•ËØ¥ÊïàÊûúÊòæËëóÔºåÂõ†‰∏∫Êàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èÈÄöÂ∏∏ÊòØËøûÁª≠ËØªÂÜôÂ§ßÊñá‰ª∂„ÄÇÂç≥‰ΩøÊòØÂ∞èËßÑÊ®°ÁöÑÈöèÊú∫ËØªÂèñÔºåÈááÁî®ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏‰πüÂ∏¶Êù•ÊòéÊòæÁöÑÂ•ΩÂ§ÑÔºåÂÆ¢Êà∑Á´ØÂèØ‰ª•ËΩªÊùæÁöÑÁºìÂ≠ò‰∏Ä‰∏™Êï∞ TB ÁöÑÂ∑•‰ΩúÊï∞ÊçÆÈõÜÊâÄÊúâÁöÑ Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇÂÖ∂Ê¨°ÔºåÈááÁî®ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏ÔºåÂÆ¢Êà∑Á´ØËÉΩÂ§üÂØπ‰∏Ä‰∏™ÂùóËøõË°åÂ§öÊ¨°Êìç‰ΩúÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÈÄöËøá‰∏é Chunk ÊúçÂä°Âô®‰øùÊåÅËæÉÈïøÊó∂Èó¥ÁöÑ TCP ËøûÊé•Êù•ÂáèÂ∞ëÁΩëÁªúË¥üËΩΩ„ÄÇÁ¨¨‰∏âÔºåÈÄâÁî®ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏ÂáèÂ∞ë‰∫Ü MasterËäÇÁÇπÈúÄË¶Å‰øùÂ≠òÁöÑÂÖÉÊï∞ÊçÆÁöÑÊï∞Èáè„ÄÇËøôÂ∞±ÂÖÅËÆ∏Êàë‰ª¨ÊääÂÖÉÊï∞ÊçÆÂÖ®ÈÉ®ÊîæÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂú® 2.6.1 ËäÇÊàë‰ª¨‰ºöËÆ®ËÆ∫ÂÖÉÊï∞ÊçÆÂÖ®ÈÉ®ÊîæÂú®ÂÜÖÂ≠ò‰∏≠Â∏¶Êù•ÁöÑÈ¢ùÂ§ñÁöÑÂ•ΩÂ§Ñ„ÄÇ Âè¶‰∏ÄÊñπÈù¢ÔºåÂç≥‰ΩøÈÖçÂêàÊÉ∞ÊÄßÁ©∫Èó¥ÂàÜÈÖçÔºåÈááÁî®ËæÉÂ§ßÁöÑ Chunk Â∞∫ÂØ∏‰πüÊúâÂÖ∂Áº∫Èô∑„ÄÇÂ∞èÊñá‰ª∂ÂåÖÂê´ËæÉÂ∞ëÁöÑ ChunkÔºåÁîöËá≥Âè™Êúâ‰∏Ä‰∏™ Chunk„ÄÇÂΩìÊúâËÆ∏Â§öÁöÑÂÆ¢Êà∑Á´ØÂØπÂêå‰∏Ä‰∏™Â∞èÊñá‰ª∂ËøõË°åÂ§öÊ¨°ÁöÑËÆøÈóÆÊó∂ÔºåÂ≠òÂÇ®Ëøô‰∫õ Chunk ÁöÑ Chunk ÊúçÂä°Âô®Â∞±‰ºöÂèòÊàêÁÉ≠ÁÇπ„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÁî±‰∫éÊàë‰ª¨ÁöÑÁ®ãÂ∫èÈÄöÂ∏∏ÊòØËøûÁª≠ÁöÑËØªÂèñÂåÖÂê´Â§ö‰∏™ Chunk ÁöÑÂ§ßÊñá‰ª∂ÔºåÁÉ≠ÁÇπËøò‰∏çÊòØ‰∏ªË¶ÅÁöÑÈóÆÈ¢ò„ÄÇ ÁÑ∂ËÄåÔºåÂΩìÊàë‰ª¨Á¨¨‰∏ÄÊ¨°Êää GFS Áî®‰∫éÊâπÂ§ÑÁêÜÈòüÂàóÁ≥ªÁªüÁöÑÊó∂ÂÄôÔºåÁÉ≠ÁÇπÁöÑÈóÆÈ¢òËøòÊòØ‰∫ßÁîü‰∫ÜÔºö‰∏Ä‰∏™ÂèØÊâßË°åÊñá‰ª∂Âú®GFS ‰∏ä‰øùÂ≠ò‰∏∫ single-chunk Êñá‰ª∂Ôºå‰πãÂêéËøô‰∏™ÂèØÊâßË°åÊñá‰ª∂Âú®Êï∞ÁôæÂè∞Êú∫Âô®‰∏äÂêåÊó∂ÂêØÂä®„ÄÇÂ≠òÊîæËøô‰∏™ÂèØÊâßË°åÊñá‰ª∂ÁöÑÂá†‰∏™ Chunk ÊúçÂä°Âô®Ë¢´Êï∞Áôæ‰∏™ÂÆ¢Êà∑Á´ØÁöÑÂπ∂ÂèëËØ∑Ê±ÇËÆøÈóÆÂØºËá¥Á≥ªÁªüÂ±ÄÈÉ®ËøáËΩΩ„ÄÇÊàë‰ª¨ÈÄöËøá‰ΩøÁî®Êõ¥Â§ßÁöÑÂ§çÂà∂ÂèÇÊï∞Êù•‰øùÂ≠òÂèØÊâßË°åÊñá‰ª∂Ôºå‰ª•ÂèäÈîôÂºÄÊâπÂ§ÑÁêÜÈòüÂàóÁ≥ªÁªüÁ®ãÂ∫èÁöÑÂêØÂä®Êó∂Èó¥ÁöÑÊñπÊ≥ïËß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢ò„ÄÇ‰∏Ä‰∏™ÂèØËÉΩÁöÑÈïøÊïàËß£ÂÜ≥ÊñπÊ°àÊòØÔºåÂú®ËøôÁßçÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÖÅËÆ∏ÂÆ¢Êà∑Á´Ø‰ªéÂÖ∂ÂÆÉÂÆ¢Êà∑Á´ØËØªÂèñÊï∞ÊçÆ„ÄÇ ÂÖÉÊï∞ÊçÆMaster ÊúçÂä°Âô®ÔºàÊ≥®ÊÑèÈÄªËæëÁöÑ Master ËäÇÁÇπÂíåÁâ©ÁêÜÁöÑ Master ÊúçÂä°Âô®ÁöÑÂå∫Âà´„ÄÇÂêéÁª≠Êàë‰ª¨Ë∞àÁöÑÊòØÊØè‰∏™ Master ÊúçÂä°Âô®ÁöÑË°å‰∏∫ÔºåÂ¶ÇÂ≠òÂÇ®„ÄÅÂÜÖÂ≠òÁ≠âÁ≠âÔºåÂõ†Ê≠§Êàë‰ª¨Â∞ÜÂÖ®ÈÉ®‰ΩøÁî®Áâ©ÁêÜÂêçÁß∞ÔºâÂ≠òÂÇ® 3 Áßç‰∏ªË¶ÅÁ±ªÂûãÁöÑÂÖÉÊï∞ÊçÆÔºåÂåÖÊã¨ÔºöÊñá‰ª∂Âíå Chunk ÁöÑÂëΩÂêçÁ©∫Èó¥„ÄÅÊñá‰ª∂Âíå Chunk ÁöÑÂØπÂ∫îÂÖ≥Á≥ª„ÄÅÊØè‰∏™ Chunk ÂâØÊú¨ÁöÑÂ≠òÊîæÂú∞ÁÇπ„ÄÇÊâÄÊúâÁöÑÂÖÉÊï∞ÊçÆÈÉΩ‰øùÂ≠òÂú® Master ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇÂâç‰∏§ÁßçÁ±ªÂûãÁöÑ ÂÖÉÊï∞ÊçÆÔºàÂÖÉÊï∞ÊçÆÔºöÂëΩÂêçÁ©∫Èó¥„ÄÅÊñá‰ª∂Âíå Chunk ÁöÑÂØπÂ∫îÂÖ≥Á≥ªÔºâÂêåÊó∂‰πü‰ºö‰ª•ËÆ∞ÂΩïÂèòÊõ¥Êó•ÂøóÁöÑÊñπÂºèËÆ∞ÂΩïÂú®Êìç‰ΩúÁ≥ªÁªüÁöÑÁ≥ªÁªüÊó•ÂøóÊñá‰ª∂‰∏≠ÔºåÊó•ÂøóÊñá‰ª∂Â≠òÂÇ®Âú®Êú¨Âú∞Á£ÅÁõò‰∏äÔºåÂêåÊó∂Êó•Âøó‰ºöË¢´Â§çÂà∂Âà∞ÂÖ∂ÂÆÉÁöÑËøúÁ®ãMasterÊúçÂä°Âô®‰∏ä„ÄÇÈááÁî®‰øùÂ≠òÂèòÊõ¥Êó•ÂøóÁöÑÊñπÂºèÔºåÊàë‰ª¨ËÉΩÂ§üÁÆÄÂçïÂèØÈù†ÁöÑÊõ¥Êñ∞ Master ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÔºåÂπ∂‰∏î‰∏çÁî®ÊãÖÂøÉ Master ÊúçÂä°Âô®Â¥©Ê∫ÉÂØºËá¥Êï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈ£éÈô©„ÄÇMaster ÊúçÂä°Âô®‰∏ç‰ºöÊåÅ‰πÖ‰øùÂ≠ò Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇMasterÊúçÂä°Âô®Âú®ÂêØÂä®Êó∂ÔºåÊàñËÄÖÊúâÊñ∞ÁöÑ Chunk ÊúçÂä°Âô®Âä†ÂÖ•Êó∂ÔºåÂêëÂêÑ‰∏™ Chunk ÊúçÂä°Âô®ËΩÆËØ¢ÂÆÉ‰ª¨ÊâÄÂ≠òÂÇ®ÁöÑ Chunk ÁöÑ‰ø°ÊÅØ„ÄÇ ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆÁªìÊûÑÂõ†‰∏∫ÂÖÉÊï∞ÊçÆ‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª• Master ÊúçÂä°Âô®ÁöÑÊìç‰ΩúÈÄüÂ∫¶ÈùûÂ∏∏Âø´„ÄÇÂπ∂‰∏îÔºåMaster ÊúçÂä°Âô®ÂèØ‰ª•Âú®ÂêéÂè∞ÁÆÄÂçïËÄåÈ´òÊïàÁöÑÂë®ÊúüÊÄßÊâ´ÊèèËá™Â∑±‰øùÂ≠òÁöÑÂÖ®ÈÉ®Áä∂ÊÄÅ‰ø°ÊÅØ„ÄÇËøôÁßçÂë®ÊúüÊÄßÁöÑÁä∂ÊÄÅÊâ´Êèè‰πüÁî®‰∫éÂÆûÁé∞ Chunk ÂûÉÂúæÊî∂ÈõÜ„ÄÅÂú® ChunkÊúçÂä°Âô®Â§±ÊïàÁöÑÊó∂ÈáçÊñ∞Â§çÂà∂Êï∞ÊçÆ„ÄÅÈÄöËøá Chunk ÁöÑËøÅÁßªÂÆûÁé∞Ë∑® Chunk ÊúçÂä°Âô®ÁöÑË¥üËΩΩÂùáË°°‰ª•ÂèäÁ£ÅÁõò‰ΩøÁî®Áä∂ÂÜµÁªüËÆ°Á≠âÂäüËÉΩ„ÄÇ4.3 Âíå 4.4 Á´†ËäÇÂ∞ÜÊ∑±ÂÖ•ËÆ®ËÆ∫Ëøô‰∫õË°å‰∏∫„ÄÇ Â∞ÜÂÖÉÊï∞ÊçÆÂÖ®ÈÉ®‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÊñπÊ≥ïÊúâÊΩúÂú®ÈóÆÈ¢òÔºöChunk ÁöÑÊï∞Èáè‰ª•ÂèäÊï¥‰∏™Á≥ªÁªüÁöÑÊâøËΩΩËÉΩÂäõÈÉΩÂèóÈôê‰∫é MasterÊúçÂä°Âô®ÊâÄÊã•ÊúâÁöÑÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇ‰ΩÜÊòØÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøôÂπ∂‰∏çÊòØ‰∏Ä‰∏™‰∏•ÈáçÁöÑÈóÆÈ¢ò„ÄÇMaster ÊúçÂä°Âô®Âè™ÈúÄË¶Å‰∏çÂà∞ 64 ‰∏™Â≠óËäÇÁöÑÂÖÉÊï∞ÊçÆÂ∞±ËÉΩÂ§üÁÆ°ÁêÜ‰∏Ä‰∏™ 64MB ÁöÑ Chunk„ÄÇÁî±‰∫éÂ§ßÂ§öÊï∞Êñá‰ª∂ÈÉΩÂåÖÂê´Â§ö‰∏™ ChunkÔºåÂõ†Ê≠§ÁªùÂ§ßÂ§öÊï∞ Chunk ÈÉΩÊòØÊª°ÁöÑÔºåÈô§‰∫ÜÊñá‰ª∂ÁöÑÊúÄÂêé‰∏Ä‰∏™ Chunk ÊòØÈÉ®ÂàÜÂ°´ÂÖÖÁöÑ„ÄÇÂêåÊ†∑ÁöÑÔºåÊØè‰∏™Êñá‰ª∂ÁöÑÂú®ÂëΩÂêçÁ©∫Èó¥‰∏≠ÁöÑÊï∞ÊçÆÂ§ßÂ∞èÈÄöÂ∏∏Âú® 64Â≠óËäÇ‰ª•‰∏ãÔºåÂõ†‰∏∫‰øùÂ≠òÁöÑÊñá‰ª∂ÂêçÊòØÁî®ÂâçÁºÄÂéãÁº©ÁÆóÊ≥ïÂéãÁº©ËøáÁöÑ„ÄÇ Âç≥‰æøÊòØÈúÄË¶ÅÊîØÊåÅÊõ¥Â§ßÁöÑÊñá‰ª∂Á≥ªÁªüÔºå‰∏∫ Master ÊúçÂä°Âô®Â¢ûÂä†È¢ùÂ§ñÂÜÖÂ≠òÁöÑË¥πÁî®ÊòØÂæàÂ∞ëÁöÑÔºåËÄåÈÄöËøáÂ¢ûÂä†ÊúâÈôêÁöÑË¥πÁî®ÔºåÊàë‰ª¨Â∞±ËÉΩÂ§üÊääÂÖÉÊï∞ÊçÆÂÖ®ÈÉ®‰øùÂ≠òÂú®ÂÜÖÂ≠òÈáåÔºåÂ¢ûÂº∫‰∫ÜÁ≥ªÁªüÁöÑÁÆÄÊ¥ÅÊÄß„ÄÅÂèØÈù†ÊÄß„ÄÅÈ´òÊÄßËÉΩÂíåÁÅµÊ¥ªÊÄß„ÄÇ Chunk ‰ΩçÁΩÆ‰ø°ÊÅØMaster ÊúçÂä°Âô®Âπ∂‰∏ç‰øùÂ≠òÊåÅ‰πÖÂåñ‰øùÂ≠òÂì™‰∏™ Chunk ÊúçÂä°Âô®Â≠òÊúâÊåáÂÆö Chunk ÁöÑÂâØÊú¨ÁöÑ‰ø°ÊÅØ„ÄÇMaster ÊúçÂä°Âô®Âè™ÊòØÂú®ÂêØÂä®ÁöÑÊó∂ÂÄôËΩÆËØ¢ Chunk ÊúçÂä°Âô®‰ª•Ëé∑ÂèñËøô‰∫õ‰ø°ÊÅØ„ÄÇMaster ÊúçÂä°Âô®ËÉΩÂ§ü‰øùËØÅÂÆÉÊåÅÊúâÁöÑ‰ø°ÊÅØÂßãÁªàÊòØÊúÄÊñ∞ÁöÑÔºåÂõ†‰∏∫ÂÆÉÊéßÂà∂‰∫ÜÊâÄÊúâÁöÑ Chunk ‰ΩçÁΩÆÁöÑÂàÜÈÖçÔºåËÄå‰∏îÈÄöËøáÂë®ÊúüÊÄßÁöÑÂøÉË∑≥‰ø°ÊÅØÁõëÊéß Chunk ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅ„ÄÇ ÊúÄÂàùËÆæËÆ°Êó∂ÔºåÊàë‰ª¨ËØïÂõæÊää Chunk ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÊåÅ‰πÖÁöÑ‰øùÂ≠òÂú® Master ÊúçÂä°Âô®‰∏äÔºå‰ΩÜÊòØÂêéÊù•Êàë‰ª¨ÂèëÁé∞Âú®ÂêØÂä®ÁöÑÊó∂ÂÄôËΩÆËØ¢ Chunk ÊúçÂä°Âô®Ôºå‰πãÂêéÂÆöÊúüËΩÆËØ¢Êõ¥Êñ∞ÁöÑÊñπÂºèÊõ¥ÁÆÄÂçï„ÄÇËøôÁßçËÆæËÆ°ÁÆÄÂåñ‰∫ÜÂú®Êúâ Chunk ÊúçÂä°Âô®Âä†ÂÖ•ÈõÜÁæ§„ÄÅÁ¶ªÂºÄÈõÜÁæ§„ÄÅÊõ¥Âêç„ÄÅÂ§±Êïà„ÄÅ‰ª•ÂèäÈáçÂêØÁöÑÊó∂ÂÄôÔºåMaster ÊúçÂä°Âô®Âíå Chunk ÊúçÂä°Âô®Êï∞ÊçÆÂêåÊ≠•ÁöÑÈóÆÈ¢ò„ÄÇÂú®‰∏Ä‰∏™Êã•ÊúâÊï∞ÁôæÂè∞ÊúçÂä°Âô®ÁöÑÈõÜÁæ§‰∏≠ÔºåËøôÁ±ª‰∫ã‰ª∂‰ºöÈ¢ëÁπÅÁöÑÂèëÁîü„ÄÇ ÂèØ‰ª•‰ªéÂè¶Â§ñ‰∏Ä‰∏™ËßíÂ∫¶ÂéªÁêÜËß£Ëøô‰∏™ËÆæËÆ°ÂÜ≥Á≠ñÔºöÂè™Êúâ Chunk ÊúçÂä°Âô®ÊâçËÉΩÊúÄÁªàÁ°ÆÂÆö‰∏Ä‰∏™ Chunk ÊòØÂê¶Âú®ÂÆÉÁöÑÁ°¨Áõò‰∏ä„ÄÇÊàë‰ª¨‰ªéÊ≤°ÊúâËÄÉËôëËøáÂú® Master ÊúçÂä°Âô®‰∏äÁª¥Êä§‰∏Ä‰∏™Ëøô‰∫õ‰ø°ÊÅØÁöÑÂÖ®Â±ÄËßÜÂõæÔºåÂõ†‰∏∫ Chunk ÊúçÂä°Âô®ÁöÑÈîôËØØÂèØËÉΩ‰ºöÂØºËá¥ Chunk Ëá™Âä®Ê∂àÂ§±(ÊØîÂ¶ÇÔºåÁ°¨ÁõòÊçüÂùè‰∫ÜÊàñËÄÖÊó†Ê≥ïËÆøÈóÆ‰∫Ü)Ôºå‰∫¶ÊàñËÄÖÊìç‰Ωú‰∫∫ÂëòÂèØËÉΩ‰ºöÈáçÂëΩÂêç‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®„ÄÇ Êìç‰ΩúÊó•ÂøóÊìç‰ΩúÊó•ÂøóÂåÖÂê´‰∫ÜÂÖ≥ÈîÆÁöÑÂÖÉÊï∞ÊçÆÂèòÊõ¥ÂéÜÂè≤ËÆ∞ÂΩï„ÄÇËøôÂØπ GFS ÈùûÂ∏∏ÈáçË¶Å„ÄÇËøô‰∏ç‰ªÖ‰ªÖÊòØÂõ†‰∏∫Êìç‰ΩúÊó•ÂøóÊòØÂÖÉÊï∞ÊçÆÂîØ‰∏ÄÁöÑÊåÅ‰πÖÂåñÂ≠òÂÇ®ËÆ∞ÂΩïÔºåÂÆÉ‰πü‰Ωú‰∏∫Âà§Êñ≠ÂêåÊ≠•Êìç‰ΩúÈ°∫Â∫èÁöÑÈÄªËæëÊó∂Èó¥Âü∫Á∫ø(‰πüÂ∞±ÊòØÈÄöËøáÈÄªËæëÊó•ÂøóÁöÑÂ∫èÂè∑‰Ωú‰∏∫Êìç‰ΩúÂèëÁîüÁöÑÈÄªËæëÊó∂Èó¥ÔºåÁ±ª‰ºº‰∫é‰∫ãÂä°Á≥ªÁªü‰∏≠ÁöÑ LSN)„ÄÇÊñá‰ª∂Âíå ChunkÔºåËøûÂêåÂÆÉ‰ª¨ÁöÑÁâàÊú¨(ÂèÇËÄÉ4.5 ËäÇ)ÔºåÈÉΩÁî±ÂÆÉ‰ª¨ÂàõÂª∫ÁöÑÈÄªËæëÊó∂Èó¥ÂîØ‰∏ÄÁöÑ„ÄÅÊ∞∏‰πÖÁöÑÊ†áËØÜ„ÄÇ Êìç‰ΩúÊó•ÂøóÈùûÂ∏∏ÈáçË¶ÅÔºåÊàë‰ª¨ÂøÖÈ°ªÁ°Æ‰øùÊó•ÂøóÊñá‰ª∂ÁöÑÂÆåÊï¥ÔºåÁ°Æ‰øùÂè™ÊúâÂú®ÂÖÉÊï∞ÊçÆÁöÑÂèòÂåñË¢´ÊåÅ‰πÖÂåñÂêéÔºåÊó•ÂøóÊâçÂØπÂÆ¢Êà∑Á´ØÊòØÂèØËßÅÁöÑ„ÄÇÂê¶ÂàôÔºåÂç≥‰Ωø Chunk Êú¨Ë∫´Ê≤°ÊúâÂá∫Áé∞‰ªª‰ΩïÈóÆÈ¢òÔºåÊàë‰ª¨‰ªçÊúâÂèØËÉΩ‰∏¢Â§±Êï¥‰∏™Êñá‰ª∂Á≥ªÁªüÔºåÊàñËÄÖ‰∏¢Â§±ÂÆ¢Êà∑Á´ØÊúÄËøëÁöÑÊìç‰Ωú„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨‰ºöÊääÊó•ÂøóÂ§çÂà∂Âà∞Â§öÂè∞ËøúÁ®ãÊú∫Âô®ÔºåÂπ∂‰∏îÂè™ÊúâÊääÁõ∏Â∫îÁöÑÊó•ÂøóËÆ∞ÂΩïÂÜôÂÖ•Âà∞Êú¨Âú∞‰ª•ÂèäËøúÁ®ãÊú∫Âô®ÁöÑÁ°¨ÁõòÂêéÔºåÊâç‰ºöÂìçÂ∫îÂÆ¢Êà∑Á´ØÁöÑÊìç‰ΩúËØ∑Ê±Ç„ÄÇMaster ÊúçÂä°Âô®‰ºöÊî∂ÈõÜÂ§ö‰∏™Êó•ÂøóËÆ∞ÂΩïÂêéÊâπÈáèÂ§ÑÁêÜÔºå‰ª•ÂáèÂ∞ëÂÜôÂÖ•Á£ÅÁõòÂíåÂ§çÂà∂ÂØπÁ≥ªÁªüÊï¥‰ΩìÊÄßËÉΩÁöÑÂΩ±Âìç„ÄÇ Master ÊúçÂä°Âô®Âú®ÁÅæÈöæÊÅ¢Â§çÊó∂ÔºåÈÄöËøáÈáçÊºîÊìç‰ΩúÊó•ÂøóÊääÊñá‰ª∂Á≥ªÁªüÊÅ¢Â§çÂà∞ÊúÄËøëÁöÑÁä∂ÊÄÅ„ÄÇ‰∏∫‰∫ÜÁº©Áü≠ Master ÂêØÂä®ÁöÑÊó∂Èó¥ÔºåÊàë‰ª¨ÂøÖÈ°ª‰ΩøÊó•ÂøóË∂≥Â§üÂ∞è(Âç≥ÈáçÊºîÁ≥ªÁªüÊìç‰ΩúÁöÑÊó•ÂøóÈáèÂ∞ΩÈáèÁöÑÂ∞ë)„ÄÇMaster ÊúçÂä°Âô®Âú®Êó•ÂøóÂ¢ûÈïøÂà∞‰∏ÄÂÆöÈáèÊó∂ÂØπÁ≥ªÁªüÁä∂ÊÄÅÂÅö‰∏ÄÊ¨° Checkpoint(Checkpoint ÊòØ‰∏ÄÁßçË°å‰∏∫Ôºå‰∏ÄÁßçÂØπÊï∞ÊçÆÂ∫ìÁä∂ÊÄÅ‰Ωú‰∏ÄÊ¨°Âø´ÁÖßÁöÑË°å‰∏∫)ÔºåÂ∞ÜÊâÄÊúâÁöÑÁä∂ÊÄÅÊï∞ÊçÆÂÜôÂÖ•‰∏Ä‰∏™ Checkpoint Êñá‰ª∂(Ê≥®ÔºöÂπ∂Âà†Èô§‰πãÂâçÁöÑÊó•ÂøóÊñá‰ª∂)„ÄÇÂú®ÁÅæÈöæÊÅ¢Â§çÁöÑÊó∂ÂÄôÔºåMaster ÊúçÂä°Âô®Â∞±ÈÄöËøá‰ªéÁ£ÅÁõò‰∏äËØªÂèñËøô‰∏™Checkpoint Êñá‰ª∂Ôºå‰ª•ÂèäÈáçÊºî Checkpoint ‰πãÂêéÁöÑÊúâÈôê‰∏™Êó•ÂøóÊñá‰ª∂Â∞±ËÉΩÂ§üÊÅ¢Â§çÁ≥ªÁªü„ÄÇCheckpoint Êñá‰ª∂‰ª•ÂéãÁº© B-Ê†ëÂΩ¢ÂäøÁöÑÊï∞ÊçÆÁªìÊûÑÂ≠òÂÇ®ÔºåÂèØ‰ª•Áõ¥Êé•Êò†Â∞ÑÂà∞ÂÜÖÂ≠òÔºåÂú®Áî®‰∫éÂëΩÂêçÁ©∫Èó¥Êü•ËØ¢Êó∂Êó†ÈúÄÈ¢ùÂ§ñÁöÑËß£Êûê„ÄÇËøôÂ§ßÂ§ßÊèêÈ´ò‰∫ÜÊÅ¢Â§çÈÄüÂ∫¶ÔºåÂ¢ûÂº∫‰∫ÜÂèØÁî®ÊÄß„ÄÇ Áî±‰∫éÂàõÂª∫‰∏Ä‰∏™ Checkpoint Êñá‰ª∂ÈúÄË¶Å‰∏ÄÂÆöÁöÑÊó∂Èó¥ÔºåÊâÄ‰ª• Master ÊúçÂä°Âô®ÁöÑÂÜÖÈÉ®Áä∂ÊÄÅË¢´ÁªÑÁªá‰∏∫‰∏ÄÁßçÊ†ºÂºèÔºåËøôÁßçÊ†ºÂºèË¶ÅÁ°Æ‰øùÂú® Checkpoint ËøáÁ®ã‰∏≠‰∏ç‰ºöÈòªÂ°ûÊ≠£Âú®ËøõË°åÁöÑ‰øÆÊîπÊìç‰Ωú„ÄÇMaster ÊúçÂä°Âô®‰ΩøÁî®Áã¨Á´ãÁöÑÁ∫øÁ®ãÂàáÊç¢Âà∞Êñ∞ÁöÑÊó•ÂøóÊñá‰ª∂ÂíåÂàõÂª∫Êñ∞ÁöÑ Checkpoint Êñá‰ª∂„ÄÇÊñ∞ÁöÑ Checkpoint Êñá‰ª∂ÂåÖÊã¨ÂàáÊç¢ÂâçÊâÄÊúâÁöÑ‰øÆÊîπ„ÄÇÂØπ‰∫é‰∏Ä‰∏™ÂåÖÂê´Êï∞Áôæ‰∏á‰∏™Êñá‰ª∂ÁöÑÈõÜÁæ§ÔºåÂàõÂª∫‰∏Ä‰∏™ Checkpoint Êñá‰ª∂ÈúÄË¶Å 1 ÂàÜÈíüÂ∑¶Âè≥ÁöÑÊó∂Èó¥„ÄÇÂàõÂª∫ÂÆåÊàêÂêéÔºåCheckpoint Êñá‰ª∂‰ºöË¢´ÂÜôÂÖ•Âú®Êú¨Âú∞ÂíåËøúÁ®ãÁöÑÁ°¨ÁõòÈáå„ÄÇ Master ÊúçÂä°Âô®ÊÅ¢Â§çÂè™ÈúÄË¶ÅÊúÄÊñ∞ÁöÑ Checkpoint Êñá‰ª∂ÂíåÂêéÁª≠ÁöÑÊó•ÂøóÊñá‰ª∂„ÄÇÊóßÁöÑ Checkpoint Êñá‰ª∂ÂíåÊó•ÂøóÊñá‰ª∂ÂèØ‰ª•Ë¢´Âà†Èô§Ôºå‰ΩÜÊòØ‰∏∫‰∫ÜÂ∫îÂØπÁÅæÈöæÊÄßÁöÑÊïÖÈöú(catastrophesÔºåÊï∞ÊçÆÂ§á‰ªΩÁõ∏ÂÖ≥ÊñáÊ°£‰∏≠ÁªèÂ∏∏‰ºöÈÅáÂà∞Ëøô‰∏™ËØçÔºåË°®Á§∫‰∏ÄÁßçË∂ÖÂá∫È¢ÑÊúüËåÉÂõ¥ÁöÑÁÅæÈöæÊÄß‰∫ã‰ª∂)ÔºåÊàë‰ª¨ÈÄöÂ∏∏‰ºöÂ§ö‰øùÂ≠ò‰∏Ä‰∫õÂéÜÂè≤Êñá‰ª∂„ÄÇCheckpoint Â§±Ë¥•‰∏ç‰ºöÂØπÊ≠£Á°ÆÊÄß‰∫ßÁîü‰ªª‰ΩïÂΩ±ÂìçÔºåÂõ†‰∏∫ÊÅ¢Â§çÂäüËÉΩÁöÑ‰ª£Á†ÅÂèØ‰ª•Ê£ÄÊµãÂπ∂Ë∑≥ËøáÊ≤°ÊúâÂÆåÊàêÁöÑ Checkpoint Êñá‰ª∂„ÄÇ ‰∏ÄËá¥ÊÄßÊ®°ÂûãGFS ÊîØÊåÅ‰∏Ä‰∏™ÂÆΩÊùæÁöÑ‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºåËøô‰∏™Ê®°ÂûãËÉΩÂ§üÂæàÂ•ΩÁöÑÊîØÊíëÊàë‰ª¨ÁöÑÈ´òÂ∫¶ÂàÜÂ∏ÉÁöÑÂ∫îÁî®ÔºåÂêåÊó∂Ëøò‰øùÊåÅ‰∫ÜÁõ∏ÂØπÁÆÄÂçï‰∏îÂÆπÊòìÂÆûÁé∞ÁöÑ‰ºòÁÇπ„ÄÇÊú¨ËäÇÊàë‰ª¨ËÆ®ËÆ∫ GFS ÁöÑ‰∏ÄËá¥ÊÄßÁöÑ‰øùÈöúÊú∫Âà∂Ôºå‰ª•ÂèäÂØπÂ∫îÁî®Á®ãÂ∫èÁöÑÊÑè‰πâ„ÄÇÊàë‰ª¨‰πüÁùÄÈáçÊèèËø∞‰∫Ü GFS Â¶Ç‰ΩïÁÆ°ÁêÜËøô‰∫õ‰∏ÄËá¥ÊÄß‰øùÈöúÊú∫Âà∂Ôºå‰ΩÜÊòØÂÆûÁé∞ÁöÑÁªÜËäÇÂ∞ÜÂú®Êú¨ËÆ∫ÊñáÁöÑÂÖ∂ÂÆÉÈÉ®ÂàÜËÆ®ËÆ∫„ÄÇ GFS ‰∏ÄËá¥ÊÄß‰øùÈöúÊú∫Âà∂Êñá‰ª∂ÂëΩÂêçÁ©∫Èó¥ÁöÑ‰øÆÊîπÔºà‰æãÂ¶ÇÔºåÊñá‰ª∂ÂàõÂª∫ÔºâÊòØÂéüÂ≠êÊÄßÁöÑ„ÄÇÂÆÉ‰ª¨‰ªÖÁî± Master ËäÇÁÇπÁöÑÊéßÂà∂ÔºöÂëΩÂêçÁ©∫Èó¥ÈîÅÊèê‰æõ‰∫ÜÂéüÂ≠êÊÄßÂíåÊ≠£Á°ÆÊÄßÔºà4.1 Á´†ÔºâÁöÑ‰øùÈöúÔºõMaster ËäÇÁÇπÁöÑÊìç‰ΩúÊó•ÂøóÂÆö‰πâ‰∫ÜËøô‰∫õÊìç‰ΩúÂú®ÂÖ®Â±ÄÁöÑÈ°∫Â∫èÔºà2.6.3 Á´†Ôºâ„ÄÇÊï∞ÊçÆ‰øÆÊîπÂêéÊñá‰ª∂ regionÁöÑÁä∂ÊÄÅÂèñÂÜ≥‰∫éÊìç‰ΩúÁöÑÁ±ªÂûã„ÄÅÊàêÂäü‰∏éÂê¶„ÄÅ‰ª•ÂèäÊòØÂê¶ÂêåÊ≠•‰øÆÊîπ„ÄÇË°® 1 ÊÄªÁªì‰∫ÜÂêÑÁßçÊìç‰ΩúÁöÑÁªìÊûú„ÄÇ Â¶ÇÊûúÊâÄÊúâÂÆ¢Êà∑Á´ØÔºåÊó†ËÆ∫‰ªéÂì™‰∏™ÂâØÊú¨ËØªÂèñÔºåËØªÂà∞ÁöÑÊï∞ÊçÆÈÉΩ‰∏ÄÊ†∑ÔºåÈÇ£‰πàÊàë‰ª¨ËÆ§‰∏∫Êñá‰ª∂ region ÊòØ‚Äú‰∏ÄËá¥ÁöÑ‚ÄùÔºõÂ¶ÇÊûúÂØπÊñá‰ª∂ÁöÑÊï∞ÊçÆ‰øÆÊîπ‰πãÂêéÔºåregion ÊòØ‰∏ÄËá¥ÁöÑÔºåÂπ∂‰∏îÂÆ¢Êà∑Á´ØËÉΩÂ§üÁúãÂà∞ÂÜôÂÖ•Êìç‰ΩúÂÖ®ÈÉ®ÁöÑÂÜÖÂÆπÔºåÈÇ£‰πàËøô‰∏™ regionÊòØ‚ÄúÂ∑≤ÂÆö‰πâÁöÑ‚Äù„ÄÇ ÂΩì‰∏Ä‰∏™Êï∞ÊçÆ‰øÆÊîπÊìç‰ΩúÊàêÂäüÊâßË°åÔºåÂπ∂‰∏îÊ≤°ÊúâÂèóÂà∞ÂêåÊó∂ÊâßË°åÁöÑÂÖ∂ÂÆÉÂÜôÂÖ•Êìç‰ΩúÁöÑÂπ≤Êâ∞ÔºåÈÇ£‰πàÂΩ±ÂìçÁöÑ region Â∞±ÊòØÂ∑≤ÂÆö‰πâÁöÑÔºàÈöêÂê´‰∫Ü‰∏ÄËá¥ÊÄßÔºâÔºöÊâÄÊúâÁöÑÂÆ¢Êà∑Á´ØÈÉΩÂèØ‰ª•ÁúãÂà∞ÂÜôÂÖ•ÁöÑÂÜÖÂÆπ„ÄÇÂπ∂Ë°å‰øÆÊîπÊìç‰ΩúÊàêÂäüÂÆåÊàê‰πãÂêéÔºåregion Â§Ñ‰∫é‰∏ÄËá¥ÁöÑ„ÄÅÊú™ÂÆö‰πâÁöÑÁä∂ÊÄÅÔºöÊâÄÊúâÁöÑÂÆ¢Êà∑Á´ØÁúãÂà∞ÂêåÊ†∑ÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØÊó†Ê≥ïËØªÂà∞‰ªª‰Ωï‰∏ÄÊ¨°ÂÜôÂÖ•Êìç‰ΩúÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊñá‰ª∂ region ÂÜÖÂåÖÂê´‰∫ÜÊù•Ëá™Â§ö‰∏™‰øÆÊîπÊìç‰ΩúÁöÑ„ÄÅÊ∑∑ÊùÇÁöÑÊï∞ÊçÆÁâáÊÆµ„ÄÇÂ§±Ë¥•ÁöÑ‰øÆÊîπÊìç‰ΩúÂØºËá¥‰∏Ä‰∏™ region Â§Ñ‰∫é‰∏ç‰∏ÄËá¥Áä∂ÊÄÅÔºàÂêåÊó∂‰πüÊòØÊú™ÂÆö‰πâÁöÑÔºâÔºö‰∏çÂêåÁöÑÂÆ¢Êà∑Âú®‰∏çÂêåÁöÑÊó∂Èó¥‰ºöÁúãÂà∞‰∏çÂêåÁöÑÊï∞ÊçÆ„ÄÇÂêéÈù¢Êàë‰ª¨Â∞ÜÊèèËø∞Â∫îÁî®Â¶Ç‰ΩïÂå∫ÂàÜÂ∑≤ÂÆö‰πâÂíåÊú™ÂÆö‰πâÁöÑ region„ÄÇÂ∫îÁî®Á®ãÂ∫èÊ≤°ÊúâÂøÖË¶ÅÂÜçÂéªÁªÜÂàÜÊú™ÂÆö‰πâ region ÁöÑ‰∏çÂêåÁ±ªÂûã„ÄÇ Êï∞ÊçÆ‰øÆÊîπÊìç‰ΩúÂàÜ‰∏∫ÂÜôÂÖ•ÊàñËÄÖËÆ∞ÂΩïËøΩÂä†‰∏§Áßç„ÄÇÂÜôÂÖ•Êìç‰ΩúÊääÊï∞ÊçÆÂÜôÂú®Â∫îÁî®Á®ãÂ∫èÊåáÂÆöÁöÑÊñá‰ª∂ÂÅèÁßª‰ΩçÁΩÆ‰∏ä„ÄÇÂç≥‰ΩøÊúâÂ§ö‰∏™‰øÆÊîπÊìç‰ΩúÂπ∂Ë°åÊâßË°åÊó∂ÔºåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúËá≥Â∞ëÂèØ‰ª•ÊääÊï∞ÊçÆÂéüÂ≠êÊÄßÁöÑËøΩÂä†Âà∞Êñá‰ª∂‰∏≠‰∏ÄÊ¨°Ôºå‰ΩÜÊòØÂÅèÁßª‰ΩçÁΩÆÊòØÁî±GFS ÈÄâÊã©ÁöÑÔºà3.3 Á´†Ôºâ(ËøôÂè•ËØùÊúâÁÇπË¥πËß£ÔºåÂÖ∂Âê´‰πâÊòØÊâÄÊúâÁöÑËøΩÂä†ÂÜôÂÖ•ÈÉΩ‰ºöÊàêÂäüÔºå‰ΩÜÊòØÊúâÂèØËÉΩË¢´ÊâßË°å‰∫ÜÂ§öÊ¨°ÔºåËÄå‰∏îÊØèÊ¨°ËøΩÂä†ÁöÑÊñá‰ª∂ÂÅèÁßªÈáèÁî± GFS Ëá™Â∑±ËÆ°ÁÆó„ÄÇÁõ∏ÊØîËÄåË®ÄÔºåÈÄöÂ∏∏ËØ¥ÁöÑËøΩÂä†Êìç‰ΩúÂÜôÁöÑÂÅèÁßª‰ΩçÁΩÆÊòØÊñá‰ª∂ÁöÑÂ∞æÈÉ®)„ÄÇGFS ËøîÂõûÁªôÂÆ¢Êà∑Á´Ø‰∏Ä‰∏™ÂÅèÁßªÈáèÔºåË°®Á§∫‰∫ÜÂåÖÂê´‰∫ÜÂÜôÂÖ•ËÆ∞ÂΩïÁöÑ„ÄÅÂ∑≤ÂÆö‰πâÁöÑ region ÁöÑËµ∑ÁÇπ„ÄÇÂè¶Â§ñÔºåGFS ÂèØËÉΩ‰ºöÂú®Êñá‰ª∂‰∏≠Èó¥ÊèíÂÖ•Â°´ÂÖÖÊï∞ÊçÆÊàñËÄÖÈáçÂ§çËÆ∞ÂΩï„ÄÇËøô‰∫õÊï∞ÊçÆÂç†ÊçÆÁöÑÊñá‰ª∂ region Ë¢´ËÆ§ÂÆöÊòØ‰∏ç‰∏ÄËá¥ÁöÑÔºåËøô‰∫õÊï∞ÊçÆÈÄöÂ∏∏ÊØîÁî®Êà∑Êï∞ÊçÆÂ∞èÁöÑÂ§ö„ÄÇ ÁªèËøá‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÊàêÂäüÁöÑ‰øÆÊîπÊìç‰Ωú‰πãÂêéÔºåGFS Á°Æ‰øùË¢´‰øÆÊîπÁöÑÊñá‰ª∂ region ÊòØÂ∑≤ÂÆö‰πâÁöÑÔºåÂπ∂‰∏îÂåÖÂê´ÊúÄÂêé‰∏ÄÊ¨°‰øÆÊîπÊìç‰ΩúÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇGFS ÈÄöËøá‰ª•‰∏ãÊé™ÊñΩÁ°Æ‰øù‰∏äËø∞Ë°å‰∏∫ÔºöÔºàaÔºâ ÂØπ Chunk ÁöÑÊâÄÊúâÂâØÊú¨ÁöÑ‰øÆÊîπÊìç‰ΩúÈ°∫Â∫è‰∏ÄËá¥Ôºà3.1Á´†ÔºâÔºåÔºàbÔºâ‰ΩøÁî® Chunk ÁöÑÁâàÊú¨Âè∑Êù•Ê£ÄÊµãÂâØÊú¨ÊòØÂê¶Âõ†‰∏∫ÂÆÉÊâÄÂú®ÁöÑ Chunk ÊúçÂä°Âô®ÂÆïÊú∫Ôºà4.5 Á´†ÔºâËÄåÈîôËøá‰∫Ü‰øÆÊîπÊìç‰ΩúËÄåÂØºËá¥ÂÖ∂Â§±Êïà„ÄÇÂ§±ÊïàÁöÑÂâØÊú¨‰∏ç‰ºöÂÜçËøõË°å‰ªª‰Ωï‰øÆÊîπÊìç‰ΩúÔºåMaster ÊúçÂä°Âô®‰πü‰∏çÂÜçËøîÂõûËøô‰∏™ Chunk ÂâØÊú¨ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØÁªôÂÆ¢Êà∑Á´Ø„ÄÇÂÆÉ‰ª¨‰ºöË¢´ÂûÉÂúæÊî∂ÈõÜÁ≥ªÁªüÂ∞ΩÂø´ÂõûÊî∂„ÄÇ Áî±‰∫é Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ‰ºöË¢´ÂÆ¢Êà∑Á´ØÁºìÂ≠òÔºåÊâÄ‰ª•Âú®‰ø°ÊÅØÂà∑Êñ∞ÂâçÔºåÂÆ¢Êà∑Á´ØÊúâÂèØËÉΩ‰ªé‰∏Ä‰∏™Â§±ÊïàÁöÑÂâØÊú¨ËØªÂèñ‰∫ÜÊï∞ÊçÆ„ÄÇÂú®ÁºìÂ≠òÁöÑË∂ÖÊó∂Êó∂Èó¥ÂíåÊñá‰ª∂‰∏ã‰∏ÄÊ¨°Ë¢´ÊâìÂºÄÁöÑÊó∂Èó¥‰πãÈó¥Â≠òÂú®‰∏Ä‰∏™Êó∂Èó¥Á™óÔºåÊñá‰ª∂ÂÜçÊ¨°Ë¢´ÊâìÂºÄÂêé‰ºöÊ∏ÖÈô§ÁºìÂ≠ò‰∏≠‰∏éËØ•Êñá‰ª∂ÊúâÂÖ≥ÁöÑÊâÄÊúâ Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇËÄå‰∏îÔºåÁî±‰∫éÊàë‰ª¨ÁöÑÊñá‰ª∂Â§ßÂ§öÊï∞ÈÉΩÊòØÂè™ËøõË°åËøΩÂä†Êìç‰ΩúÁöÑÔºåÊâÄ‰ª•Ôºå‰∏Ä‰∏™Â§±ÊïàÁöÑÂâØÊú¨ÈÄöÂ∏∏ËøîÂõû‰∏Ä‰∏™ÊèêÂâçÁªìÊùüÁöÑ Chunk ËÄå‰∏çÊòØËøáÊúüÁöÑÊï∞ÊçÆ„ÄÇÂΩì‰∏Ä‰∏™ Reader(Êú¨Êñá‰∏≠Â∞ÜÁî®Âà∞‰∏§‰∏™‰∏ìÊúâÂêçËØçÔºåReader Âíå WriterÔºåÂàÜÂà´Ë°®Á§∫ÊâßË°å GFS ËØªÂèñÂíåÂÜôÂÖ•Êìç‰ΩúÁöÑÁ®ãÂ∫è)ÈáçÊñ∞Â∞ùËØïÂπ∂ËÅîÁªú Master ÊúçÂä°Âô®Êó∂ÔºåÂÆÉÂ∞±‰ºöÁ´ãÂàªÂæóÂà∞ÊúÄÊñ∞ÁöÑ Chunk ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇ Âç≥‰ΩøÂú®‰øÆÊîπÊìç‰ΩúÊàêÂäüÊâßË°åÂæàÈïøÊó∂Èó¥‰πãÂêéÔºåÁªÑ‰ª∂ÁöÑÂ§±Êïà‰πüÂèØËÉΩÊçüÂùèÊàñËÄÖÂà†Èô§Êï∞ÊçÆ„ÄÇGFS ÈÄöËøá Master ÊúçÂä°Âô®ÂíåÊâÄÊúâ Chunk ÊúçÂä°Âô®ÁöÑÂÆöÊúü‚ÄúÊè°Êâã‚ÄùÊù•ÊâæÂà∞Â§±ÊïàÁöÑ Chunk ÊúçÂä°Âô®ÔºåÂπ∂‰∏î‰ΩøÁî® Checksum Êù•Ê†°È™åÊï∞ÊçÆÊòØÂê¶ÊçüÂùèÔºà5.2 Á´†Ôºâ„ÄÇ‰∏ÄÊó¶ÂèëÁé∞ÈóÆÈ¢òÔºåÊï∞ÊçÆË¶ÅÂ∞ΩÂø´Âà©Áî®ÊúâÊïàÁöÑÂâØÊú¨ËøõË°åÊÅ¢Â§çÔºà4.3 Á´†Ôºâ„ÄÇÂè™ÊúâÂΩì‰∏Ä‰∏™ Chunk ÁöÑÊâÄÊúâÂâØÊú¨Âú® GFS Ê£ÄÊµãÂà∞ÈîôËØØÂπ∂ÈááÂèñÂ∫îÂØπÊé™ÊñΩ‰πãÂâçÂÖ®ÈÉ®‰∏¢Â§±ÔºåËøô‰∏™ Chunk Êâç‰ºö‰∏çÂèØÈÄÜËΩ¨ÁöÑ‰∏¢Â§±„ÄÇÂú®‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã GFS ÁöÑÂèçÂ∫îÊó∂Èó¥(Êåá Master ËäÇÁÇπÊ£ÄÊµãÂà∞ÈîôËØØÂπ∂ÈááÂèñÂ∫îÂØπÊé™ÊñΩ)ÊòØÂá†ÂàÜÈíü„ÄÇÂç≥‰ΩøÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåChunk ‰πüÂè™ÊòØ‰∏çÂèØÁî®‰∫ÜÔºåËÄå‰∏çÊòØÊçüÂùè‰∫ÜÔºöÂ∫îÁî®Á®ãÂ∫è‰ºöÊî∂Âà∞ÊòéÁ°ÆÁöÑÈîôËØØ‰ø°ÊÅØËÄå‰∏çÊòØÊçüÂùèÁöÑÊï∞ÊçÆ„ÄÇ Á®ãÂ∫èÁöÑÂÆûÁé∞‰ΩøÁî® GFS ÁöÑÂ∫îÁî®Á®ãÂ∫èÂèØ‰ª•Âà©Áî®‰∏Ä‰∫õÁÆÄÂçïÊäÄÊúØÂÆûÁé∞Ëøô‰∏™ÂÆΩÊùæÁöÑ‰∏ÄËá¥ÊÄßÊ®°ÂûãÔºåËøô‰∫õÊäÄÊúØ‰πüÁî®Êù•ÂÆûÁé∞‰∏Ä‰∫õÂÖ∂ÂÆÉÁöÑÁõÆÊ†áÂäüËÉΩÔºåÂåÖÊã¨ÔºöÂ∞ΩÈáèÈááÁî®ËøΩÂä†ÂÜôÂÖ•ËÄå‰∏çÊòØË¶ÜÁõñÔºåCheckpointÔºåËá™È™åËØÅÁöÑÂÜôÂÖ•Êìç‰ΩúÔºåËá™Ê†áËØÜÁöÑËÆ∞ÂΩï„ÄÇ Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÊàë‰ª¨ÊâÄÊúâÁöÑÂ∫îÁî®Á®ãÂ∫èÂØπÊñá‰ª∂ÁöÑÂÜôÂÖ•Êìç‰ΩúÈÉΩÊòØÂ∞ΩÈáèÈááÁî®Êï∞ÊçÆËøΩÂä†ÊñπÂºèÔºåËÄå‰∏çÊòØË¶ÜÁõñÊñπÂºè„ÄÇ‰∏ÄÁßçÂÖ∏ÂûãÁöÑÂ∫îÁî®ÔºåÂ∫îÁî®Á®ãÂ∫è‰ªéÂ§¥Âà∞Â∞æÂÜôÂÖ•Êï∞ÊçÆÔºåÁîüÊàê‰∫Ü‰∏Ä‰∏™Êñá‰ª∂„ÄÇÂÜôÂÖ•ÊâÄÊúâÊï∞ÊçÆ‰πãÂêéÔºåÂ∫îÁî®Á®ãÂ∫èËá™Âä®Â∞ÜÊñá‰ª∂ÊîπÂêç‰∏∫‰∏Ä‰∏™Ê∞∏‰πÖ‰øùÂ≠òÁöÑÊñá‰ª∂ÂêçÔºåÊàñËÄÖÂë®ÊúüÊÄßÁöÑ‰Ωú CheckpointÔºåËÆ∞ÂΩïÊàêÂäüÂÜôÂÖ•‰∫ÜÂ§öÂ∞ëÊï∞ÊçÆ„ÄÇCheckpoint Êñá‰ª∂ÂèØ‰ª•ÂåÖÂê´Á®ãÂ∫èÁ∫ßÂà´ÁöÑÊ†°È™åÂíå„ÄÇReaders ‰ªÖÊ†°È™åÂπ∂Â§ÑÁêÜ‰∏ä‰∏™ Checkpoint ‰πãÂêé‰∫ßÁîüÁöÑÊñá‰ª∂ regionÔºåËøô‰∫õÊñá‰ª∂ region ÁöÑÁä∂ÊÄÅ‰∏ÄÂÆöÊòØÂ∑≤ÂÆö‰πâÁöÑ„ÄÇËøô‰∏™ÊñπÊ≥ïÊª°Ë∂≥‰∫ÜÊàë‰ª¨‰∏ÄËá¥ÊÄßÂíåÂπ∂ÂèëÂ§ÑÁêÜÁöÑË¶ÅÊ±Ç„ÄÇËøΩÂä†ÂÜôÂÖ•ÊØîÈöèÊú∫‰ΩçÁΩÆÂÜôÂÖ•Êõ¥Âä†ÊúâÊïàÁéáÔºåÂØπÂ∫îÁî®Á®ãÂ∫èÁöÑÂ§±Ë¥•Â§ÑÁêÜÊõ¥ÂÖ∑ÊúâÂºπÊÄß„ÄÇCheckpoint ÂèØ‰ª•ËÆ© Writer ‰ª•Ê∏êËøõÁöÑÊñπÂºèÈáçÊñ∞ÂºÄÂßãÔºåÂπ∂‰∏îÂèØ‰ª•Èò≤Ê≠¢ ReaderÂ§ÑÁêÜÂ∑≤ÁªèË¢´ÊàêÂäüÂÜôÂÖ•Ôºå‰ΩÜÊòØ‰ªéÂ∫îÁî®Á®ãÂ∫èÁöÑËßíÂ∫¶Êù•ÁúãËøòÂπ∂Êú™ÂÆåÊàêÁöÑÊï∞ÊçÆ„ÄÇ Êàë‰ª¨ÂÜçÊù•ÂàÜÊûêÂè¶‰∏ÄÁßçÂÖ∏ÂûãÁöÑÂ∫îÁî®„ÄÇËÆ∏Â§öÂ∫îÁî®Á®ãÂ∫èÂπ∂Ë°åÁöÑËøΩÂä†Êï∞ÊçÆÂà∞Âêå‰∏Ä‰∏™Êñá‰ª∂ÔºåÊØîÂ¶ÇËøõË°åÁªìÊûúÁöÑÂêàÂπ∂ÊàñËÄÖÊòØ‰∏Ä‰∏™Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÈòüÂàó„ÄÇËÆ∞ÂΩïËøΩÂä†ÊñπÂºèÁöÑ‚ÄúËá≥Â∞ë‰∏ÄÊ¨°ËøΩÂä†‚ÄùÁöÑÁâπÊÄß‰øùËØÅ‰∫Ü Writer ÁöÑËæìÂá∫„ÄÇReaders ‰ΩøÁî®‰∏ãÈù¢ÁöÑÊñπÊ≥ïÊù•Â§ÑÁêÜÂÅ∂ÁÑ∂ÊÄßÁöÑÂ°´ÂÖÖÊï∞ÊçÆÂíåÈáçÂ§çÂÜÖÂÆπ„ÄÇWriters Âú®ÊØèÊù°ÂÜôÂÖ•ÁöÑËÆ∞ÂΩï‰∏≠ÈÉΩÂåÖÂê´‰∫ÜÈ¢ùÂ§ñÁöÑ‰ø°ÊÅØÔºå‰æãÂ¶ÇChecksumÔºåÁî®Êù•È™åËØÅÂÆÉÁöÑÊúâÊïàÊÄß„ÄÇReader ÂèØ‰ª•Âà©Áî® Checksum ËØÜÂà´ÂíåÊäõÂºÉÈ¢ùÂ§ñÁöÑÂ°´ÂÖÖÊï∞ÊçÆÂíåËÆ∞ÂΩïÁâáÊÆµ„ÄÇÂ¶ÇÊûúÂ∫îÁî®‰∏çËÉΩÂÆπÂøçÂÅ∂Â∞îÁöÑÈáçÂ§çÂÜÖÂÆπ(ÊØîÂ¶ÇÔºåÂ¶ÇÊûúËøô‰∫õÈáçÂ§çÊï∞ÊçÆËß¶Âèë‰∫ÜÈùûÂπÇÁ≠âÊìç‰Ωú)ÔºåÂèØ‰ª•Áî®ËÆ∞ÂΩïÁöÑÂîØ‰∏ÄÊ†áËØÜÁ¨¶Êù•ËøáÊª§ÂÆÉ‰ª¨ÔºåËøô‰∫õÂîØ‰∏ÄÊ†áËØÜÁ¨¶ÈÄöÂ∏∏Áî®‰∫éÂëΩÂêçÁ®ãÂ∫è‰∏≠Â§ÑÁêÜÁöÑÂÆû‰ΩìÂØπË±°Ôºå‰æãÂ¶Ç web ÊñáÊ°£„ÄÇËøô‰∫õËÆ∞ÂΩï I/O ÂäüËÉΩ(These functionalities for record I/OÔºåÈô§‰∫ÜÂâîÈô§ÈáçÂ§çÊï∞ÊçÆÁöÑÂäüËÉΩ)ÈÉΩÂåÖÂê´Âú®Êàë‰ª¨ÁöÑÁ®ãÂ∫èÂÖ±‰∫´ÁöÑÂ∫ì‰∏≠ÔºåÂπ∂‰∏îÈÄÇÁî®‰∫é Google ÂÜÖÈÉ®ÁöÑÂÖ∂ÂÆÉÁöÑÊñá‰ª∂Êé•Âè£ÂÆûÁé∞„ÄÇÊâÄ‰ª•ÔºåÁõ∏ÂêåÂ∫èÂàóÁöÑËÆ∞ÂΩïÔºåÂä†‰∏ä‰∏Ä‰∫õÂÅ∂Â∞îÂá∫Áé∞ÁöÑÈáçÂ§çÊï∞ÊçÆÔºåÈÉΩË¢´ÂàÜÂèëÂà∞ Reader ‰∫Ü„ÄÇ Á≥ªÁªü‰∫§‰∫íÊàë‰ª¨Âú®ËÆæËÆ°Ëøô‰∏™Á≥ªÁªüÊó∂Ôºå‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂéüÂàôÊòØÊúÄÂ∞èÂåñÊâÄÊúâÊìç‰ΩúÂíå Master ËäÇÁÇπÁöÑ‰∫§‰∫í„ÄÇÂ∏¶ÁùÄËøôÊ†∑ÁöÑËÆæËÆ°ÁêÜÂøµÔºåÊàë‰ª¨Áé∞Âú®ÊèèËø∞‰∏Ä‰∏ãÂÆ¢Êà∑Êú∫„ÄÅMaster ÊúçÂä°Âô®Âíå Chunk ÊúçÂä°Âô®Â¶Ç‰ΩïËøõË°å‰∫§‰∫íÔºå‰ª•ÂÆûÁé∞Êï∞ÊçÆ‰øÆÊîπÊìç‰Ωú„ÄÅÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†Êìç‰Ωú‰ª•ÂèäÂø´ÁÖßÂäüËÉΩ„ÄÇ ÁßüÁ∫¶ÔºàleaseÔºâÂíåÂèòÊõ¥È°∫Â∫èÂèòÊõ¥ÊòØ‰∏Ä‰∏™‰ºöÊîπÂèò Chunk ÂÜÖÂÆπÊàñËÄÖÂÖÉÊï∞ÊçÆÁöÑÊìç‰ΩúÔºåÊØîÂ¶ÇÂÜôÂÖ•Êìç‰ΩúÊàñËÄÖËÆ∞ÂΩïËøΩÂä†Êìç‰Ωú„ÄÇÂèòÊõ¥Êìç‰Ωú‰ºöÂú® ChunkÁöÑÊâÄÊúâÂâØÊú¨‰∏äÊâßË°å„ÄÇÊàë‰ª¨‰ΩøÁî®ÁßüÁ∫¶ÔºàleaseÔºâÊú∫Âà∂Êù•‰øùÊåÅÂ§ö‰∏™ÂâØÊú¨Èó¥ÂèòÊõ¥È°∫Â∫èÁöÑ‰∏ÄËá¥ÊÄß„ÄÇMaster ËäÇÁÇπ‰∏∫ ChunkÁöÑ‰∏Ä‰∏™ÂâØÊú¨Âª∫Á´ã‰∏Ä‰∏™ÁßüÁ∫¶ÔºåÊàë‰ª¨ÊääËøô‰∏™ÂâØÊú¨Âè´ÂÅö‰∏ª Chunk„ÄÇ‰∏ª Chunk ÂØπ Chunk ÁöÑÊâÄÊúâÊõ¥ÊîπÊìç‰ΩúËøõË°åÂ∫èÂàóÂåñ„ÄÇÊâÄÊúâÁöÑÂâØÊú¨ÈÉΩÈÅµ‰ªéËøô‰∏™Â∫èÂàóËøõË°å‰øÆÊîπÊìç‰Ωú„ÄÇÂõ†Ê≠§Ôºå‰øÆÊîπÊìç‰ΩúÂÖ®Â±ÄÁöÑÈ°∫Â∫èÈ¶ñÂÖàÁî± Master ËäÇÁÇπÈÄâÊã©ÁöÑÁßüÁ∫¶ÁöÑÈ°∫Â∫èÂÜ≥ÂÆöÔºåÁÑ∂ÂêéÁî±ÁßüÁ∫¶‰∏≠‰∏ª Chunk ÂàÜÈÖçÁöÑÂ∫èÂàóÂè∑ÂÜ≥ÂÆö„ÄÇ ËÆæËÆ°ÁßüÁ∫¶Êú∫Âà∂ÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜÊúÄÂ∞èÂåñ Master ËäÇÁÇπÁöÑÁÆ°ÁêÜË¥üÊãÖ„ÄÇÁßüÁ∫¶ÁöÑÂàùÂßãË∂ÖÊó∂ËÆæÁΩÆ‰∏∫ 60 Áßí„ÄÇ‰∏çËøáÔºåÂè™Ë¶ÅChunk Ë¢´‰øÆÊîπ‰∫ÜÔºå‰∏ª Chunk Â∞±ÂèØ‰ª•Áî≥ËØ∑Êõ¥ÈïøÁöÑÁßüÊúüÔºåÈÄöÂ∏∏‰ºöÂæóÂà∞ Master ËäÇÁÇπÁöÑÁ°ÆËÆ§Âπ∂Êî∂Âà∞ÁßüÁ∫¶Âª∂ÈïøÁöÑÊó∂Èó¥„ÄÇËøô‰∫õÁßüÁ∫¶Âª∂ÈïøËØ∑Ê±ÇÂíåÊâπÂáÜÁöÑ‰ø°ÊÅØÈÄöÂ∏∏ÈÉΩÊòØÈôÑÂä†Âú® Master ËäÇÁÇπÂíå Chunk ÊúçÂä°Âô®‰πãÈó¥ÁöÑÂøÉË∑≥Ê∂àÊÅØ‰∏≠Êù•‰º†ÈÄí„ÄÇÊúâÊó∂Master ËäÇÁÇπ‰ºöËØïÂõæÊèêÂâçÂèñÊ∂àÁßüÁ∫¶Ôºà‰æãÂ¶ÇÔºåMaster ËäÇÁÇπÊÉ≥ÂèñÊ∂àÂú®‰∏Ä‰∏™Â∑≤ÁªèË¢´ÊîπÂêçÁöÑÊñá‰ª∂‰∏äÁöÑ‰øÆÊîπÊìç‰ΩúÔºâ„ÄÇÂç≥‰ΩøMasterËäÇÁÇπÂíå‰∏ªChunkÂ§±ÂéªËÅîÁ≥ªÔºåÂÆÉ‰ªçÁÑ∂ÂèØ‰ª•ÂÆâÂÖ®Âú∞Âú®ÊóßÁöÑÁßüÁ∫¶Âà∞ÊúüÂêéÂíåÂè¶Â§ñ‰∏Ä‰∏™ChunkÂâØÊú¨Á≠æËÆ¢Êñ∞ÁöÑÁßüÁ∫¶„ÄÇ Âú®Âõæ 2 ‰∏≠ÔºåÊàë‰ª¨‰æùÊçÆÊ≠•È™§ÁºñÂè∑ÔºåÂ±ïÁé∞ÂÜôÂÖ•Êìç‰ΩúÁöÑÊéßÂà∂ÊµÅÁ®ã„ÄÇ ÂÆ¢Êà∑Êú∫Âêë Master ËäÇÁÇπËØ¢ÈóÆÂì™‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®ÊåÅÊúâÂΩìÂâçÁöÑÁßüÁ∫¶Ôºå‰ª•ÂèäÂÖ∂ÂÆÉÂâØÊú¨ÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶ÇÊûúÊ≤°Êúâ‰∏Ä‰∏™ Chunk ÊåÅÊúâÁßüÁ∫¶ÔºåMaster ËäÇÁÇπÂ∞±ÈÄâÊã©ÂÖ∂‰∏≠‰∏Ä‰∏™ÂâØÊú¨Âª∫Á´ã‰∏Ä‰∏™ÁßüÁ∫¶(Ëøô‰∏™Ê≠•È™§Âú®Âõæ‰∏äÊ≤°ÊúâÊòæÁ§∫)„ÄÇ Master ËäÇÁÇπÂ∞Ü‰∏ª Chunk ÁöÑÊ†áËØÜÁ¨¶‰ª•ÂèäÂÖ∂ÂÆÉÂâØÊú¨(ÂèàÁß∞‰∏∫ secondary ÂâØÊú¨„ÄÅ‰∫åÁ∫ßÂâØÊú¨)ÁöÑ‰ΩçÁΩÆËøîÂõûÁªôÂÆ¢Êà∑ Êú∫„ÄÇÂÆ¢Êà∑Êú∫ÁºìÂ≠òËøô‰∫õÊï∞ÊçÆ‰ª•‰æøÂêéÁª≠ÁöÑÊìç‰Ωú„ÄÇÂè™ÊúâÂú®‰∏ª Chunk ‰∏çÂèØÁî®ÔºåÊàñËÄÖ‰∏ª Chunk ÂõûÂ§ç‰ø°ÊÅØË°®ÊòéÂÆÉÂ∑≤‰∏çÂÜçÊåÅ ÊúâÁßüÁ∫¶ÁöÑÊó∂ÂÄôÔºåÂÆ¢Êà∑Êú∫ÊâçÈúÄË¶ÅÈáçÊñ∞Ë∑ü Master ËäÇÁÇπËÅîÁ≥ª„ÄÇ ÂÆ¢Êà∑Êú∫ÊääÊï∞ÊçÆÊé®ÈÄÅÂà∞ÊâÄÊúâÁöÑÂâØÊú¨‰∏ä„ÄÇÂÆ¢Êà∑Êú∫ÂèØ‰ª•‰ª•‰ªªÊÑèÁöÑÈ°∫Â∫èÊé®ÈÄÅÊï∞ÊçÆ„ÄÇChunk ÊúçÂä°Âô®Êé•Êî∂Âà∞Êï∞ÊçÆÂπ∂‰øù Â≠òÂú®ÂÆÉÁöÑÂÜÖÈÉ® LRU ÁºìÂ≠ò‰∏≠Ôºå‰∏ÄÁõ¥Âà∞Êï∞ÊçÆË¢´‰ΩøÁî®ÊàñËÄÖËøáÊúü‰∫§Êç¢Âá∫Âéª„ÄÇÁî±‰∫éÊï∞ÊçÆÊµÅÁöÑÁΩëÁªú‰º†ËæìË¥üËΩΩÈùûÂ∏∏È´òÔºåÈÄöËøá ÂàÜÁ¶ªÊï∞ÊçÆÊµÅÂíåÊéßÂà∂ÊµÅÔºåÊàë‰ª¨ÂèØ‰ª•Âü∫‰∫éÁΩëÁªúÊãìÊâëÊÉÖÂÜµÂØπÊï∞ÊçÆÊµÅËøõË°åËßÑÂàíÔºåÊèêÈ´òÁ≥ªÁªüÊÄßËÉΩÔºåËÄå‰∏çÁî®ÂéªÁêÜ‰ºöÂì™‰∏™ Chunk ÊúçÂä°Âô®‰øùÂ≠ò‰∫Ü‰∏ª Chunk„ÄÇ3.2 Á´†ËäÇ‰ºöËøõ‰∏ÄÊ≠•ËÆ®ËÆ∫ËøôÁÇπ„ÄÇ ÂΩìÊâÄÊúâÁöÑÂâØÊú¨ÈÉΩÁ°ÆËÆ§Êé•Êî∂Âà∞‰∫ÜÊï∞ÊçÆÔºåÂÆ¢Êà∑Êú∫ÂèëÈÄÅÂÜôËØ∑Ê±ÇÂà∞‰∏ª Chunk ÊúçÂä°Âô®„ÄÇËøô‰∏™ËØ∑Ê±ÇÊ†áËØÜ‰∫ÜÊó©ÂâçÊé®ÈÄÅÂà∞ ÊâÄÊúâÂâØÊú¨ÁöÑÊï∞ÊçÆ„ÄÇ‰∏ª Chunk ‰∏∫Êé•Êî∂Âà∞ÁöÑÊâÄÊúâÊìç‰ΩúÂàÜÈÖçËøûÁª≠ÁöÑÂ∫èÂàóÂè∑ÔºåËøô‰∫õÊìç‰ΩúÂèØËÉΩÊù•Ëá™‰∏çÂêåÁöÑÂÆ¢Êà∑Êú∫ÔºåÂ∫èÂàó Âè∑‰øùËØÅ‰∫ÜÊìç‰ΩúÈ°∫Â∫èÊâßË°å„ÄÇÂÆÉ‰ª•Â∫èÂàóÂè∑ÁöÑÈ°∫Â∫èÊääÊìç‰ΩúÂ∫îÁî®Âà∞ÂÆÉËá™Â∑±ÁöÑÊú¨Âú∞Áä∂ÊÄÅ‰∏≠(alex Ê≥®:‰πüÂ∞±ÊòØÂú®Êú¨Âú∞ÊâßË°åËøô‰∫õÊìç‰ΩúÔºåËøôÂè•ËØùÊåâÂ≠óÈù¢ÁøªËØëÊúâÁÇπË¥πËß£Ôºå‰πüËÆ∏Â∫îËØ•ÁøªËØë‰∏∫‚ÄúÂÆÉÈ°∫Â∫èÊâßË°åËøô‰∫õÊìç‰ΩúÔºåÂπ∂Êõ¥Êñ∞Ëá™Â∑±ÁöÑÁä∂ÊÄÅ‚Äù)„ÄÇ ‰∏ª Chunk ÊääÂÜôËØ∑Ê±Ç‰º†ÈÄíÂà∞ÊâÄÊúâÁöÑ‰∫åÁ∫ßÂâØÊú¨„ÄÇÊØè‰∏™‰∫åÁ∫ßÂâØÊú¨‰æùÁÖß‰∏ª Chunk ÂàÜÈÖçÁöÑÂ∫èÂàóÂè∑‰ª•Áõ∏ÂêåÁöÑÈ°∫Â∫èÊâßË°å Ëøô‰∫õÊìç‰Ωú„ÄÇÊâÄÊúâÁöÑ‰∫åÁ∫ßÂâØÊú¨ÂõûÂ§ç‰∏ª ChunkÔºåÂÆÉ‰ª¨Â∑≤ÁªèÂÆåÊàê‰∫ÜÊìç‰Ωú„ÄÇ ‰∏ª Chunk ÊúçÂä°Âô®20ÂõûÂ§çÂÆ¢Êà∑Êú∫„ÄÇ‰ªª‰ΩïÂâØÊú¨‰∫ßÁîüÁöÑ‰ªª‰ΩïÈîôËØØÈÉΩ‰ºöËøîÂõûÁªôÂÆ¢Êà∑Êú∫„ÄÇÂú®Âá∫Áé∞ÈîôËØØÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÜô ÂÖ•Êìç‰ΩúÂèØËÉΩÂú®‰∏ª Chunk Âíå‰∏Ä‰∫õ‰∫åÁ∫ßÂâØÊú¨ÊâßË°åÊàêÂäü„ÄÇ(Â¶ÇÊûúÊìç‰ΩúÂú®‰∏ª Chunk ‰∏äÂ§±Ë¥•‰∫ÜÔºåÊìç‰ΩúÂ∞±‰∏ç‰ºöË¢´ÂàÜÈÖçÂ∫èÂàó Âè∑Ôºå‰πü‰∏ç‰ºöË¢´‰º†ÈÄí„ÄÇ)ÂÆ¢Êà∑Á´ØÁöÑËØ∑Ê±ÇË¢´Á°ÆËÆ§‰∏∫Â§±Ë¥•ÔºåË¢´‰øÆÊîπÁöÑ region Â§Ñ‰∫é‰∏ç‰∏ÄËá¥ÁöÑÁä∂ÊÄÅ„ÄÇÊàë‰ª¨ÁöÑÂÆ¢Êà∑Êú∫‰ª£Á†ÅÈÄö ËøáÈáçÂ§çÊâßË°åÂ§±Ë¥•ÁöÑÊìç‰ΩúÊù•Â§ÑÁêÜËøôÊ†∑ÁöÑÈîôËØØ„ÄÇÂú®‰ªéÂ§¥ÂºÄÂßãÈáçÂ§çÊâßË°å‰πãÂâçÔºåÂÆ¢Êà∑Êú∫‰ºöÂÖà‰ªéÊ≠•È™§(3)Âà∞Ê≠•È™§(7) ÂÅöÂá†Ê¨°Â∞ùËØï„ÄÇ Â¶ÇÊûúÂ∫îÁî®Á®ãÂ∫è‰∏ÄÊ¨°ÂÜôÂÖ•ÁöÑÊï∞ÊçÆÈáèÂæàÂ§ßÔºåÊàñËÄÖÊï∞ÊçÆË∑®Ë∂ä‰∫ÜÂ§ö‰∏™ ChunkÔºåGFS ÂÆ¢Êà∑Êú∫‰ª£Á†Å‰ºöÊääÂÆÉ‰ª¨ÂàÜÊàêÂ§ö‰∏™ ÂÜôÊìç‰Ωú„ÄÇËøô‰∫õÊìç‰ΩúÈÉΩÈÅµÂæ™ÂâçÈù¢ÊèèËø∞ÁöÑÊéßÂà∂ÊµÅÁ®ãÔºå‰ΩÜÊòØÂèØËÉΩ‰ºöË¢´ÂÖ∂ÂÆÉÂÆ¢Êà∑Êú∫‰∏äÂêåÊó∂ËøõË°åÁöÑÊìç‰ΩúÊâìÊñ≠ÊàñËÄÖË¶ÜÁõñ„ÄÇ Âõ†Ê≠§ÔºåÂÖ±‰∫´ÁöÑÊñá‰ª∂ region ÁöÑÂ∞æÈÉ®ÂèØËÉΩÂåÖÂê´Êù•Ëá™‰∏çÂêåÂÆ¢Êà∑Êú∫ÁöÑÊï∞ÊçÆÁâáÊÆµÔºåÂ∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÁî±‰∫éËøô‰∫õÂàÜËß£ÂêéÁöÑÂÜôÂÖ•Êìç ‰ΩúÂú®ÊâÄÊúâÁöÑÂâØÊú¨‰∏äÈÉΩ‰ª•Áõ∏ÂêåÁöÑÈ°∫Â∫èÊâßË°åÂÆåÊàêÔºåChunk ÁöÑÊâÄÊúâÂâØÊú¨ÈÉΩÊòØ‰∏ÄËá¥ÁöÑ„ÄÇËøô‰ΩøÊñá‰ª∂ region Â§Ñ‰∫é 2.7 ËäÇÊèèËø∞ ÁöÑ‰∏ÄËá¥ÁöÑ„ÄÅ‰ΩÜÊòØÊú™ÂÆö‰πâÁöÑÁä∂ÊÄÅ„ÄÇ Êï∞ÊçÆÊµÅ‰∏∫‰∫ÜÊèêÈ´òÁΩëÁªúÊïàÁéáÔºåÊàë‰ª¨ÈááÂèñ‰∫ÜÊääÊï∞ÊçÆÊµÅÂíåÊéßÂà∂ÊµÅÂàÜÂºÄÁöÑÊé™ÊñΩ„ÄÇÂú®ÊéßÂà∂ÊµÅ‰ªéÂÆ¢Êà∑Êú∫Âà∞‰∏ª Chunk„ÄÅÁÑ∂ÂêéÂÜç Âà∞ÊâÄÊúâ‰∫åÁ∫ßÂâØÊú¨ÁöÑÂêåÊó∂ÔºåÊï∞ÊçÆ‰ª•ÁÆ°ÈÅìÁöÑÊñπÂºèÔºåÈ°∫Â∫èÁöÑÊ≤øÁùÄ‰∏Ä‰∏™Á≤æÂøÉÈÄâÊã©ÁöÑ Chunk ÊúçÂä°Âô®ÈìæÊé®ÈÄÅ„ÄÇÊàë‰ª¨ÁöÑÁõÆÊ†á ÊòØÂÖÖÂàÜÂà©Áî®ÊØèÂè∞Êú∫Âô®ÁöÑÂ∏¶ÂÆΩÔºåÈÅøÂÖçÁΩëÁªúÁì∂È¢àÂíåÈ´òÂª∂Êó∂ÁöÑËøûÊé•ÔºåÊúÄÂ∞èÂåñÊé®ÈÄÅÊâÄÊúâÊï∞ÊçÆÁöÑÂª∂Êó∂„ÄÇ ‰∏∫‰∫ÜÂÖÖÂàÜÂà©Áî®ÊØèÂè∞Êú∫Âô®ÁöÑÂ∏¶ÂÆΩÔºåÊï∞ÊçÆÊ≤øÁùÄ‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®ÈìæÈ°∫Â∫èÁöÑÊé®ÈÄÅÔºåËÄå‰∏çÊòØ‰ª•ÂÖ∂ÂÆÉÊãìÊâëÂΩ¢ÂºèÂàÜÊï£ Êé®ÈÄÅ(‰æãÂ¶ÇÔºåÊ†ëÂûãÊãìÊâëÁªìÊûÑ)„ÄÇÁ∫øÊÄßÊé®ÈÄÅÊ®°Âºè‰∏ãÔºåÊØèÂè∞Êú∫Âô®ÊâÄÊúâÁöÑÂá∫Âè£Â∏¶ÂÆΩÈÉΩÁî®‰∫é‰ª•ÊúÄÂø´ÁöÑÈÄüÂ∫¶‰º†ËæìÊï∞ÊçÆÔºåËÄå ‰∏çÊòØÂú®Â§ö‰∏™Êé•ÂèóËÄÖ‰πãÈó¥ÂàÜÈÖçÂ∏¶ÂÆΩ„ÄÇ ‰∏∫‰∫ÜÂ∞ΩÂèØËÉΩÁöÑÈÅøÂÖçÂá∫Áé∞ÁΩëÁªúÁì∂È¢àÂíåÈ´òÂª∂ËøüÁöÑÈìæÊé•(egÔºåinter-switch ÊúÄÊúâÂèØËÉΩÂá∫Áé∞Á±ª‰ººÈóÆÈ¢ò)ÔºåÊØèÂè∞Êú∫Âô® ÈÉΩÂ∞ΩÈáèÁöÑÂú®ÁΩëÁªúÊãìÊâë‰∏≠ÈÄâÊã©‰∏ÄÂè∞ËøòÊ≤°ÊúâÊé•Êî∂Âà∞Êï∞ÊçÆÁöÑ„ÄÅÁ¶ªËá™Â∑±ÊúÄËøëÁöÑÊú∫Âô®‰Ωú‰∏∫ÁõÆÊ†áÊé®ÈÄÅÊï∞ÊçÆ„ÄÇÂÅáËÆæÂÆ¢Êà∑Êú∫Êää Êï∞ÊçÆ‰ªé Chunk ÊúçÂä°Âô® S1 Êé®ÈÄÅÂà∞ S4„ÄÇÂÆÉÊääÊï∞ÊçÆÊé®ÈÄÅÂà∞ÊúÄËøëÁöÑ Chunk ÊúçÂä°Âô® S1„ÄÇS1 ÊääÊï∞ÊçÆÊé®ÈÄÅÂà∞ S2ÔºåÂõ†‰∏∫ S2 Âíå S4 ‰∏≠ÊúÄÊé•ËøëÁöÑÊú∫Âô®ÊòØ S2„ÄÇÂêåÊ†∑ÁöÑÔºåS2 ÊääÊï∞ÊçÆ‰º†ÈÄíÁªô S3 Âíå S4 ‰πãÈó¥Êõ¥ËøëÁöÑÊú∫Âô®Ôºå‰æùÊ¨°Á±ªÊé®Êé®ÈÄÅ‰∏ãÂéª„ÄÇÊàë‰ª¨ ÁöÑÁΩëÁªúÊãìÊâëÈùûÂ∏∏ÁÆÄÂçïÔºåÈÄöËøá IP Âú∞ÂùÄÂ∞±ÂèØ‰ª•ËÆ°ÁÆóÂá∫ËäÇÁÇπÁöÑ‚ÄúË∑ùÁ¶ª‚Äù„ÄÇ ÊúÄÂêéÔºåÊàë‰ª¨Âà©Áî®Âü∫‰∫é TCP ËøûÊé•ÁöÑ„ÄÅÁÆ°ÈÅìÂºèÊï∞ÊçÆÊé®ÈÄÅÊñπÂºèÊù•ÊúÄÂ∞èÂåñÂª∂Ëøü„ÄÇChunk ÊúçÂä°Âô®Êé•Êî∂Âà∞Êï∞ÊçÆÂêéÔºå È©¨‰∏äÂºÄÂßãÂêëÂâçÊé®ÈÄÅ„ÄÇÁÆ°ÈÅìÊñπÂºèÁöÑÊï∞ÊçÆÊé®ÈÄÅÂØπÊàë‰ª¨Â∏ÆÂä©ÂæàÂ§ßÔºåÂõ†‰∏∫Êàë‰ª¨ÈááÁî®ÂÖ®ÂèåÂ∑•ÁöÑ‰∫§Êç¢ÁΩëÁªú„ÄÇÊé•Êî∂Âà∞Êï∞ÊçÆÂêé(Âç≥‰∏ª Chunk ÊâÄÂú®ÁöÑ Chunk ÊúçÂä°Âô®)Á´ãÂàªÂêëÂâçÊé®ÈÄÅ‰∏ç‰ºöÈôç‰ΩéÊé•Êî∂ÁöÑÈÄüÂ∫¶„ÄÇÂú®Ê≤°ÊúâÁΩëÁªúÊã•Â°ûÁöÑÊÉÖÂÜµ‰∏ãÔºå‰º†ÈÄÅ B Â≠óËäÇÁöÑÊï∞ÊçÆÂà∞ R ‰∏™ÂâØÊú¨ÁöÑÁêÜÊÉ≥Êó∂Èó¥ÊòØ B/T+RL ÔºåT ÊòØÁΩëÁªúÁöÑÂêûÂêêÈáèÔºåL ÊòØÂú®‰∏§Âè∞Êú∫Âô®Êï∞ÊçÆ‰º†ËæìÁöÑÂª∂Ëøü„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÁöÑÁΩëÁªúËøûÊé•ÈÄüÂ∫¶ÊòØ 100Mbps(T)ÔºåL Â∞ÜËøúÂ∞è‰∫é 1ms„ÄÇÂõ†Ê≠§Ôºå1MB ÁöÑÊï∞ÊçÆÂú®ÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ã 80ms Â∑¶Âè≥Â∞±ËÉΩÂàÜÂèëÂá∫Âéª„ÄÇ ÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†GFS Êèê‰æõ‰∫Ü‰∏ÄÁßçÂéüÂ≠êÁöÑÊï∞ÊçÆËøΩÂä†Êìç‰Ωú‚ÄìËÆ∞ÂΩïËøΩÂä†„ÄÇ‰º†ÁªüÊñπÂºèÁöÑÂÜôÂÖ•Êìç‰ΩúÔºåÂÆ¢Êà∑Á®ãÂ∫è‰ºöÊåáÂÆöÊï∞ÊçÆÂÜôÂÖ•ÁöÑÂÅè ÁßªÈáè„ÄÇÂØπÂêå‰∏Ä‰∏™ region ÁöÑÂπ∂Ë°åÂÜôÂÖ•Êìç‰Ωú‰∏çÊòØ‰∏≤Ë°åÁöÑ:region Â∞æÈÉ®ÂèØËÉΩ‰ºöÂåÖÂê´Â§ö‰∏™‰∏çÂêåÂÆ¢Êà∑Êú∫ÂÜôÂÖ•ÁöÑÊï∞ÊçÆÁâáÊÆµ„ÄÇ ‰ΩøÁî®ËÆ∞ÂΩïËøΩÂä†ÔºåÂÆ¢Êà∑Êú∫Âè™ÈúÄË¶ÅÊåáÂÆöË¶ÅÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇGFS ‰øùËØÅËá≥Â∞ëÊúâ‰∏ÄÊ¨°ÂéüÂ≠êÁöÑÂÜôÂÖ•Êìç‰ΩúÊàêÂäüÊâßË°å(Âç≥ÂÜôÂÖ•‰∏Ä ‰∏™È°∫Â∫èÁöÑ byte ÊµÅ)ÔºåÂÜôÂÖ•ÁöÑÊï∞ÊçÆËøΩÂä†Âà∞ GFS ÊåáÂÆöÁöÑÂÅèÁßª‰ΩçÁΩÆ‰∏äÔºå‰πãÂêé GFS ËøîÂõûËøô‰∏™ÂÅèÁßªÈáèÁªôÂÆ¢Êà∑Êú∫„ÄÇËøôÁ±ª‰ºº ‰∫éÂú® Unix Êìç‰ΩúÁ≥ªÁªüÁºñÁ®ãÁéØÂ¢É‰∏≠ÔºåÂØπ‰ª• O_APPEND Ê®°ÂºèÊâìÂºÄÁöÑÊñá‰ª∂ÔºåÂ§ö‰∏™Âπ∂ÂèëÂÜôÊìç‰ΩúÂú®Ê≤°ÊúâÁ´ûÊÄÅÊù°‰ª∂Êó∂ÁöÑË°å ‰∏∫„ÄÇ ËÆ∞ÂΩïËøΩÂä†Âú®Êàë‰ª¨ÁöÑÂàÜÂ∏ÉÂ∫îÁî®‰∏≠ÈùûÂ∏∏È¢ëÁπÅÁöÑ‰ΩøÁî®ÔºåÂú®Ëøô‰∫õÂàÜÂ∏ÉÂºèÂ∫îÁî®‰∏≠ÔºåÈÄöÂ∏∏ÊúâÂæàÂ§öÁöÑÂÆ¢Êà∑Êú∫Âπ∂Ë°åÂú∞ÂØπÂêå ‰∏Ä‰∏™Êñá‰ª∂ËøΩÂä†ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÈááÁî®‰º†ÁªüÊñπÂºèÁöÑÊñá‰ª∂ÂÜôÂÖ•Êìç‰ΩúÔºåÂÆ¢Êà∑Êú∫ÈúÄË¶ÅÈ¢ùÂ§ñÁöÑÂ§çÊùÇ„ÄÅÊòÇË¥µÁöÑÂêåÊ≠•Êú∫Âà∂Ôºå ‰æãÂ¶Ç‰ΩøÁî®‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÈîÅÁÆ°ÁêÜÂô®„ÄÇÂú®Êàë‰ª¨ÁöÑÂ∑•‰Ωú‰∏≠ÔºåËøôÊ†∑ÁöÑÊñá‰ª∂ÈÄöÂ∏∏Áî®‰∫éÂ§ö‰∏™Áîü‰∫ßËÄÖ/Âçï‰∏ÄÊ∂àË¥πËÄÖÁöÑÈòüÂàóÁ≥ªÁªüÔºå ÊàñËÄÖÊòØÂêàÂπ∂‰∫ÜÊù•Ëá™Â§ö‰∏™ÂÆ¢Êà∑Êú∫ÁöÑÊï∞ÊçÆÁöÑÁªìÊûúÊñá‰ª∂„ÄÇ ËÆ∞ÂΩïËøΩÂä†ÊòØ‰∏ÄÁßç‰øÆÊîπÊìç‰ΩúÔºåÂÆÉ‰πüÈÅµÂæ™ 3.1 ËäÇÊèèËø∞ÁöÑÊéßÂà∂ÊµÅÁ®ãÔºåÈô§‰∫ÜÂú®‰∏ª Chunk Êúâ‰∫õÈ¢ùÂ§ñÁöÑÊéßÂà∂ÈÄªËæë„ÄÇÂÆ¢ Êà∑Êú∫ÊääÊï∞ÊçÆÊé®ÈÄÅÁªôÊñá‰ª∂ÊúÄÂêé‰∏Ä‰∏™ Chunk ÁöÑÊâÄÊúâÂâØÊú¨Ôºå‰πãÂêéÂèëÈÄÅËØ∑Ê±ÇÁªô‰∏ª Chunk„ÄÇ‰∏ª Chunk ‰ºöÊ£ÄÊü•ËøôÊ¨°ËÆ∞ÂΩïËøΩ Âä†Êìç‰ΩúÊòØÂê¶‰ºö‰Ωø Chunk Ë∂ÖËøáÊúÄÂ§ßÂ∞∫ÂØ∏(64MB)„ÄÇÂ¶ÇÊûúË∂ÖËøá‰∫ÜÊúÄÂ§ßÂ∞∫ÂØ∏Ôºå‰∏ª Chunk È¶ñÂÖàÂ∞ÜÂΩìÂâç Chunk Â°´ÂÖÖÂà∞ÊúÄ Â§ßÂ∞∫ÂØ∏Ôºå‰πãÂêéÈÄöÁü•ÊâÄÊúâ‰∫åÁ∫ßÂâØÊú¨ÂÅöÂêåÊ†∑ÁöÑÊìç‰ΩúÔºåÁÑ∂ÂêéÂõûÂ§çÂÆ¢Êà∑Êú∫Ë¶ÅÊ±ÇÂÖ∂ÂØπ‰∏ã‰∏Ä‰∏™ Chunk ÈáçÊñ∞ËøõË°åËÆ∞ÂΩïËøΩÂä†Êìç ‰Ωú„ÄÇ(ËÆ∞ÂΩïËøΩÂä†ÁöÑÊï∞ÊçÆÂ§ßÂ∞è‰∏•Ê†ºÊéßÂà∂Âú® Chunk ÊúÄÂ§ßÂ∞∫ÂØ∏ÁöÑ 1/4ÔºåËøôÊ†∑Âç≥‰ΩøÂú®ÊúÄÂùèÊÉÖÂÜµ‰∏ãÔºåÊï∞ÊçÆÁ¢éÁâáÁöÑÊï∞Èáè‰ªçÁÑ∂ Âú®ÂèØÊéßÁöÑËåÉÂõ¥„ÄÇ)ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãËøΩÂä†ÁöÑËÆ∞ÂΩï‰∏çË∂ÖËøá Chunk ÁöÑÊúÄÂ§ßÂ∞∫ÂØ∏Ôºå‰∏ª Chunk ÊääÊï∞ÊçÆËøΩÂä†Âà∞Ëá™Â∑±ÁöÑÂâØÊú¨ÂÜÖÔºå ÁÑ∂ÂêéÈÄöÁü•‰∫åÁ∫ßÂâØÊú¨ÊääÊï∞ÊçÆÂÜôÂú®Ë∑ü‰∏ª Chunk ‰∏ÄÊ†∑ÁöÑ‰ΩçÁΩÆ‰∏äÔºåÊúÄÂêéÂõûÂ§çÂÆ¢Êà∑Êú∫Êìç‰ΩúÊàêÂäü„ÄÇ Â¶ÇÊûúËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂú®‰ªª‰Ωï‰∏Ä‰∏™ÂâØÊú¨‰∏äÂ§±Ë¥•‰∫ÜÔºåÂÆ¢Êà∑Á´ØÂ∞±ÈúÄË¶ÅÈáçÊñ∞ËøõË°åÊìç‰Ωú„ÄÇÈáçÊñ∞ËøõË°åËÆ∞ÂΩïËøΩÂä†ÁöÑÁªìÊûúÊòØÔºå Âêå‰∏Ä‰∏™ Chunk ÁöÑ‰∏çÂêåÂâØÊú¨ÂèØËÉΩÂåÖÂê´‰∏çÂêåÁöÑÊï∞ÊçÆ‚ÄìÈáçÂ§çÂåÖÂê´‰∏Ä‰∏™ËÆ∞ÂΩïÂÖ®ÈÉ®ÊàñËÄÖÈÉ®ÂàÜÁöÑÊï∞ÊçÆ„ÄÇGFS Âπ∂‰∏ç‰øùËØÅ Chunk ÁöÑÊâÄÊúâÂâØÊú¨Âú®Â≠óËäÇÁ∫ßÂà´ÊòØÂÆåÂÖ®‰∏ÄËá¥ÁöÑ„ÄÇÂÆÉÂè™‰øùËØÅÊï∞ÊçÆ‰Ωú‰∏∫‰∏Ä‰∏™Êï¥‰ΩìÂéüÂ≠êÁöÑË¢´Ëá≥Â∞ëÂÜôÂÖ•‰∏ÄÊ¨°„ÄÇËøô‰∏™ÁâπÊÄßÂèØ‰ª•ÈÄö ËøáÁÆÄÂçïËßÇÂØüÊé®ÂØºÂá∫Êù•:Â¶ÇÊûúÊìç‰ΩúÊàêÂäüÊâßË°åÔºåÊï∞ÊçÆ‰∏ÄÂÆöÂ∑≤ÁªèÂÜôÂÖ•Âà∞ Chunk ÁöÑÊâÄÊúâÂâØÊú¨ÁöÑÁõ∏ÂêåÂÅèÁßª‰ΩçÁΩÆ‰∏ä„ÄÇËøô‰πã ÂêéÔºåÊâÄÊúâÁöÑÂâØÊú¨Ëá≥Â∞ëÈÉΩÂà∞‰∫ÜËÆ∞ÂΩïÂ∞æÈÉ®ÁöÑÈïøÂ∫¶Ôºå‰ªª‰ΩïÂêéÁª≠ÁöÑËÆ∞ÂΩïÈÉΩ‰ºöËøΩÂä†Âà∞Êõ¥Â§ßÁöÑÂÅèÁßªÂú∞ÂùÄÔºåÊàñËÄÖÊòØ‰∏çÂêåÁöÑ Chunk ‰∏äÔºåÂç≥‰ΩøÂÖ∂ÂÆÉÁöÑ Chunk ÂâØÊú¨Ë¢´ Master ËäÇÁÇπÈÄâ‰∏∫‰∫Ü‰∏ª Chunk„ÄÇÂ∞±Êàë‰ª¨ÁöÑ‰∏ÄËá¥ÊÄß‰øùÈöúÊ®°ÂûãËÄåË®ÄÔºåËÆ∞ÂΩïËøΩÂä† Êìç‰ΩúÊàêÂäüÂÜôÂÖ•Êï∞ÊçÆÁöÑ region ÊòØÂ∑≤ÂÆö‰πâÁöÑ(Âõ†Ê≠§‰πüÊòØ‰∏ÄËá¥ÁöÑ)ÔºåÂèç‰πãÂàôÊòØ‰∏ç‰∏ÄËá¥ÁöÑ(Âõ†Ê≠§‰πüÂ∞±ÊòØÊú™ÂÆö‰πâÁöÑ)„ÄÇÊ≠£Â¶ÇÊàë‰ª¨Âú® 2.7.2 ËäÇËÆ®ËÆ∫ÁöÑÔºåÊàë‰ª¨ÁöÑÁ®ãÂ∫èÂèØ‰ª•Â§ÑÁêÜ‰∏ç‰∏ÄËá¥ÁöÑÂå∫Âüü„ÄÇ Âø´ÁÖßÂø´ÁÖßÊìç‰ΩúÂá†‰πéÂèØ‰ª•Áû¨Èó¥ÂÆåÊàêÂØπ‰∏Ä‰∏™Êñá‰ª∂ÊàñËÄÖÁõÆÂΩïÊ†ë(‚ÄúÊ∫ê‚Äù)ÂÅö‰∏Ä‰∏™Êã∑Ë¥ùÔºåÂπ∂‰∏îÂá†‰πé‰∏ç‰ºöÂØπÊ≠£Âú®ËøõË°åÁöÑÂÖ∂ ÂÆÉÊìç‰ΩúÈÄ†Êàê‰ªª‰ΩïÂπ≤Êâ∞„ÄÇÊàë‰ª¨ÁöÑÁî®Êà∑ÂèØ‰ª•‰ΩøÁî®Âø´ÁÖßËøÖÈÄüÁöÑÂàõÂª∫‰∏Ä‰∏™Â∑®Â§ßÁöÑÊï∞ÊçÆÈõÜÁöÑÂàÜÊîØÊã∑Ë¥ù(ËÄå‰∏îÁªèÂ∏∏ÊòØÈÄíÂΩí ÁöÑÊã∑Ë¥ùÊã∑Ë¥ù)ÔºåÊàñËÄÖÊòØÂú®ÂÅöÂÆûÈ™åÊÄßÁöÑÊï∞ÊçÆÊìç‰Ωú‰πãÂâçÔºå‰ΩøÁî®Âø´ÁÖßÊìç‰ΩúÂ§á‰ªΩÂΩìÂâçÁä∂ÊÄÅÔºåËøôÊ†∑‰πãÂêéÂ∞±ÂèØ‰ª•ËΩªÊùæÁöÑÊèê‰∫§ ÊàñËÄÖÂõûÊªöÂà∞Â§á‰ªΩÊó∂ÁöÑÁä∂ÊÄÅ„ÄÇ Â∞±ÂÉè AFS(alex Ê≥®:AFSÔºåÂç≥ Andrew File SystemÔºå‰∏ÄÁßçÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªü)ÔºåÊàë‰ª¨Áî®Ê†áÂáÜÁöÑ copy-on-write ÊäÄÊúØÂÆûÁé∞Âø´ÁÖß„ÄÇÂΩì Master ËäÇÁÇπÊî∂Âà∞‰∏Ä‰∏™Âø´ÁÖßËØ∑Ê±ÇÔºåÂÆÉÈ¶ñÂÖàÂèñÊ∂à‰ΩúÂø´ÁÖßÁöÑÊñá‰ª∂ÁöÑÊâÄÊúâ Chunk ÁöÑÁßüÁ∫¶„ÄÇËøô‰∏™Êé™ÊñΩ ‰øùËØÅ‰∫ÜÂêéÁª≠ÂØπËøô‰∫õ Chunk ÁöÑÂÜôÊìç‰ΩúÈÉΩÂøÖÈ°ª‰∏é Master ‰∫§‰∫í‰ª•ÊâæÂà∞ÁßüÁ∫¶ÊåÅÊúâËÄÖ„ÄÇËøôÂ∞±Áªô Master ËäÇÁÇπ‰∏Ä‰∏™ÁéáÂÖàÂàõÂª∫ Chunk ÁöÑÊñ∞Êã∑Ë¥ùÁöÑÊú∫‰ºö„ÄÇ ÁßüÁ∫¶ÂèñÊ∂àÊàñËÄÖËøáÊúü‰πãÂêéÔºåMaster ËäÇÁÇπÊääËøô‰∏™Êìç‰Ωú‰ª•Êó•ÂøóÁöÑÊñπÂºèËÆ∞ÂΩïÂà∞Á°¨Áõò‰∏ä„ÄÇÁÑ∂ÂêéÔºåMaster ËäÇÁÇπÈÄöËøáÂ§ç Âà∂Ê∫êÊñá‰ª∂ÊàñËÄÖÁõÆÂΩïÁöÑÂÖÉÊï∞ÊçÆÁöÑÊñπÂºèÔºåÊääËøôÊù°Êó•ÂøóËÆ∞ÂΩïÁöÑÂèòÂåñÂèçÊò†Âà∞‰øùÂ≠òÂú®ÂÜÖÂ≠òÁöÑÁä∂ÊÄÅ‰∏≠„ÄÇÊñ∞ÂàõÂª∫ÁöÑÂø´ÁÖßÊñá‰ª∂ ÂíåÊ∫êÊñá‰ª∂ÊåáÂêëÂÆåÂÖ®Áõ∏ÂêåÁöÑ Chunk Âú∞ÂùÄ„ÄÇ Âú®Âø´ÁÖßÊìç‰Ωú‰πãÂêéÔºåÂΩìÂÆ¢Êà∑Êú∫Á¨¨‰∏ÄÊ¨°ÊÉ≥ÂÜôÂÖ•Êï∞ÊçÆÂà∞ Chunk CÔºåÂÆÉÈ¶ñÂÖà‰ºöÂèëÈÄÅ‰∏Ä‰∏™ËØ∑Ê±ÇÂà∞ Master ËäÇÁÇπÊü•ËØ¢ÂΩì ÂâçÁöÑÁßüÁ∫¶ÊåÅÊúâËÄÖ„ÄÇMaster ËäÇÁÇπÊ≥®ÊÑèÂà∞ Chunk C ÁöÑÂºïÁî®ËÆ°Êï∞Ë∂ÖËøá‰∫Ü 1„ÄÇMaster ËäÇÁÇπ‰∏ç‰ºöÈ©¨‰∏äÂõûÂ§çÂÆ¢Êà∑Êú∫ÁöÑËØ∑Ê±ÇÔºå ËÄåÊòØÈÄâÊã©‰∏Ä‰∏™Êñ∞ÁöÑ Chunk Âè•ÊüÑ C„ÄÇ‰πãÂêéÔºåMaster ËäÇÁÇπË¶ÅÊ±ÇÊØè‰∏™Êã•Êúâ Chunk C ÂΩìÂâçÂâØÊú¨ÁöÑ Chunk ÊúçÂä°Âô®ÂàõÂª∫‰∏Ä ‰∏™Âè´ÂÅö CÁöÑÊñ∞ Chunk„ÄÇÈÄöËøáÂú®Ê∫ê Chunk ÊâÄÂú® Chunk ÊúçÂä°Âô®‰∏äÂàõÂª∫Êñ∞ÁöÑ ChunkÔºåÊàë‰ª¨Á°Æ‰øùÊï∞ÊçÆÂú®Êú¨Âú∞ËÄå‰∏çÊòØÈÄö ËøáÁΩëÁªúÂ§çÂà∂(Êàë‰ª¨ÁöÑÁ°¨ÁõòÊØîÊàë‰ª¨ÁöÑ 100Mb ‰ª•Â§™ÁΩëÂ§ßÁ∫¶Âø´ 3 ÂÄç)„ÄÇ‰ªéËøôÁÇπÊù•ËÆ≤ÔºåËØ∑Ê±ÇÁöÑÂ§ÑÁêÜÊñπÂºèÂíå‰ªª‰ΩïÂÖ∂ÂÆÉ Chunk Ê≤°‰ªÄ‰πà‰∏çÂêå:Master ËäÇÁÇπÁ°Æ‰øùÊñ∞ Chunk C`ÁöÑ‰∏Ä‰∏™ÂâØÊú¨Êã•ÊúâÁßüÁ∫¶Ôºå‰πãÂêéÂõûÂ§çÂÆ¢Êà∑Êú∫ÔºåÂÆ¢Êà∑Êú∫ÂæóÂà∞ÂõûÂ§çÂêéÂ∞±ÂèØ‰ª• Ê≠£Â∏∏ÁöÑÂÜôËøô‰∏™ ChunkÔºåËÄå‰∏çÂøÖÁêÜ‰ºöÂÆÉÊòØ‰ªé‰∏Ä‰∏™Â∑≤Â≠òÂú®ÁöÑ Chunk ÂÖãÈöÜÂá∫Êù•ÁöÑ„ÄÇ Master ËäÇÁÇπÁöÑÊìç‰ΩúMaster ËäÇÁÇπÊâßË°åÊâÄÊúâÁöÑÂêçÁß∞Á©∫Èó¥Êìç‰Ωú„ÄÇÊ≠§Â§ñÔºåÂÆÉËøòÁÆ°ÁêÜÁùÄÊï¥‰∏™Á≥ªÁªüÈáåÊâÄÊúâ Chunk ÁöÑÂâØÊú¨:ÂÆÉÂÜ≥ÂÆö Chunk ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÔºåÂàõÂª∫Êñ∞ Chunk ÂíåÂÆÉÁöÑÂâØÊú¨ÔºåÂçèË∞ÉÂêÑÁßçÂêÑÊ†∑ÁöÑÁ≥ªÁªüÊ¥ªÂä®‰ª•‰øùËØÅ Chunk Ë¢´ÂÆåÂÖ®Â§çÂà∂ÔºåÂú®ÊâÄÊúâÁöÑ Chunk ÊúçÂä°Âô®‰πãÈó¥ÁöÑËøõË°åË¥üËΩΩÂùáË°°ÔºåÂõûÊî∂‰∏çÂÜç‰ΩøÁî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥„ÄÇÊú¨ËäÇÊàë‰ª¨ËÆ®ËÆ∫‰∏äËø∞ÁöÑ‰∏ªÈ¢ò„ÄÇ ÂêçÁß∞Á©∫Èó¥ÁÆ°ÁêÜÂíåÈîÅMaster ËäÇÁÇπÁöÑÂæàÂ§öÊìç‰Ωú‰ºöËä±Ë¥πÂæàÈïøÁöÑÊó∂Èó¥:ÊØîÂ¶ÇÔºåÂø´ÁÖßÊìç‰ΩúÂøÖÈ°ªÂèñÊ∂à Chunk ÊúçÂä°Âô®‰∏äÂø´ÁÖßÊâÄÊ∂âÂèäÁöÑÊâÄÊúâ ÁöÑ Chunk ÁöÑÁßüÁ∫¶„ÄÇÊàë‰ª¨‰∏çÂ∏åÊúõÂú®Ëøô‰∫õÊìç‰ΩúÁöÑËøêË°åÊó∂ÔºåÂª∂Áºì‰∫ÜÂÖ∂ÂÆÉÁöÑ Master ËäÇÁÇπÁöÑÊìç‰Ωú„ÄÇÂõ†Ê≠§ÔºåÊàë‰ª¨ÂÖÅËÆ∏Â§ö‰∏™ Êìç‰ΩúÂêåÊó∂ËøõË°åÔºå‰ΩøÁî®ÂêçÁß∞Á©∫Èó¥ÁöÑ region ‰∏äÁöÑÈîÅÊù•‰øùËØÅÊâßË°åÁöÑÊ≠£Á°ÆÈ°∫Â∫è„ÄÇ ‰∏çÂêå‰∫éËÆ∏Â§ö‰º†ÁªüÊñá‰ª∂Á≥ªÁªüÔºåGFS Ê≤°ÊúâÈíàÂØπÊØè‰∏™ÁõÆÂΩïÂÆûÁé∞ËÉΩÂ§üÂàóÂá∫ÁõÆÂΩï‰∏ãÊâÄÊúâÊñá‰ª∂ÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇGFS ‰πü‰∏ç ÊîØÊåÅÊñá‰ª∂ÊàñËÄÖÁõÆÂΩïÁöÑÈìæÊé•(Âç≥ Unix ÊúØËØ≠‰∏≠ÁöÑÁ°¨ÈìæÊé•ÊàñËÄÖÁ¨¶Âè∑ÈìæÊé•)„ÄÇÂú®ÈÄªËæë‰∏äÔºåGFS ÁöÑÂêçÁß∞Á©∫Èó¥Â∞±ÊòØ‰∏Ä‰∏™ÂÖ® Ë∑ØÂæÑÂíåÂÖÉÊï∞ÊçÆÊò†Â∞ÑÂÖ≥Á≥ªÁöÑÊü•ÊâæË°®„ÄÇÂà©Áî®ÂâçÁºÄÂéãÁº©ÔºåËøô‰∏™Ë°®ÂèØ‰ª•È´òÊïàÁöÑÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠„ÄÇÂú®Â≠òÂÇ®ÂêçÁß∞Á©∫Èó¥ÁöÑÊ†ëÂûã ÁªìÊûÑ‰∏äÔºåÊØè‰∏™ËäÇÁÇπ(ÁªùÂØπË∑ØÂæÑÁöÑÊñá‰ª∂ÂêçÊàñÁªùÂØπË∑ØÂæÑÁöÑÁõÆÂΩïÂêç)ÈÉΩÊúâ‰∏Ä‰∏™ÂÖ≥ËÅîÁöÑËØªÂÜôÈîÅ„ÄÇ ÊØè‰∏™ Master ËäÇÁÇπÁöÑÊìç‰ΩúÂú®ÂºÄÂßã‰πãÂâçÈÉΩË¶ÅËé∑Âæó‰∏ÄÁ≥ªÂàóÁöÑÈîÅ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú‰∏Ä‰∏™Êìç‰ΩúÊ∂âÂèä/d1/d2/‚Ä¶ /dn/leafÔºåÈÇ£‰πàÊìç‰ΩúÈ¶ñÂÖàË¶ÅËé∑ÂæóÁõÆÂΩï/d1Ôºå/d1/d2Ôºå‚Ä¶Ôºå/d1/d2/‚Ä¶/dn ÁöÑËØªÈîÅÔºå‰ª•Âèä/d1/d2/‚Ä¶/dn/leaf ÁöÑËØªÂÜôÈîÅ„ÄÇÊ≥® ÊÑèÔºåÊ†πÊçÆÊìç‰ΩúÁöÑ‰∏çÂêåÔºåleaf ÂèØ‰ª•ÊòØ‰∏Ä‰∏™Êñá‰ª∂Ôºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÁõÆÂΩï„ÄÇ Áé∞Âú®ÔºåÊàë‰ª¨ÊºîÁ§∫‰∏Ä‰∏ãÂú®/home/user Ë¢´Âø´ÁÖßÂà∞/save/user ÁöÑÊó∂ÂÄôÔºåÈîÅÊú∫Âà∂Â¶Ç‰ΩïÈò≤Ê≠¢ÂàõÂª∫Êñá‰ª∂/home/user/foo„ÄÇ Âø´ÁÖßÊìç‰ΩúËé∑Âèñ/home Âíå/save ÁöÑËØªÂèñÈîÅÔºå‰ª•Âèä/home/user Âíå/save/user ÁöÑÂÜôÂÖ•ÈîÅ„ÄÇÊñá‰ª∂ÂàõÂª∫Êìç‰ΩúËé∑Âæó/home Âíå /home/user ÁöÑËØªÂèñÈîÅÔºå‰ª•Âèä/home/user/foo ÁöÑÂÜôÂÖ•ÈîÅ„ÄÇËøô‰∏§‰∏™Êìç‰ΩúË¶ÅÈ°∫Â∫èÊâßË°åÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ËØïÂõæËé∑ÂèñÁöÑ/home/user ÁöÑÈîÅÊòØÁõ∏‰∫íÂÜ≤Á™Å„ÄÇÊñá‰ª∂ÂàõÂª∫Êìç‰Ωú‰∏çÈúÄË¶ÅËé∑ÂèñÁà∂ÁõÆÂΩïÁöÑÂÜôÂÖ•ÈîÅÔºåÂõ†‰∏∫ËøôÈáåÊ≤°Êúâ‚ÄúÁõÆÂΩï‚ÄùÔºåÊàñËÄÖÁ±ª‰ºº inode Á≠âÁî®Êù• Á¶ÅÊ≠¢‰øÆÊîπÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÊñá‰ª∂ÂêçÁöÑËØªÂèñÈîÅË∂≥‰ª•Èò≤Ê≠¢Áà∂ÁõÆÂΩïË¢´Âà†Èô§„ÄÇ ÈááÁî®ËøôÁßçÈîÅÊñπÊ°àÁöÑ‰ºòÁÇπÊòØÊîØÊåÅÂØπÂêå‰∏ÄÁõÆÂΩïÁöÑÂπ∂Ë°åÊìç‰Ωú„ÄÇÊØîÂ¶ÇÔºåÂèØ‰ª•ÂÜçÂêå‰∏Ä‰∏™ÁõÆÂΩï‰∏ãÂêåÊó∂ÂàõÂª∫Â§ö‰∏™Êñá‰ª∂: ÊØè‰∏Ä‰∏™Êìç‰ΩúÈÉΩËé∑Âèñ‰∏Ä‰∏™ÁõÆÂΩïÂêçÁöÑ‰∏äÁöÑËØªÂèñÈîÅÂíåÊñá‰ª∂Âêç‰∏äÁöÑÂÜôÂÖ•ÈîÅ„ÄÇÁõÆÂΩïÂêçÁöÑËØªÂèñÈîÅË∂≥‰ª•ÁöÑÈò≤Ê≠¢ÁõÆÂΩïË¢´Âà†Èô§„ÄÅ ÊîπÂêç‰ª•ÂèäË¢´Âø´ÁÖß„ÄÇÊñá‰ª∂ÂêçÁöÑÂÜôÂÖ•ÈîÅÂ∫èÂàóÂåñÊñá‰ª∂ÂàõÂª∫Êìç‰ΩúÔºåÁ°Æ‰øù‰∏ç‰ºöÂ§öÊ¨°ÂàõÂª∫ÂêåÂêçÁöÑÊñá‰ª∂„ÄÇ Âõ†‰∏∫ÂêçÁß∞Á©∫Èó¥ÂèØËÉΩÊúâÂæàÂ§öËäÇÁÇπÔºåËØªÂÜôÈîÅÈááÁî®ÊÉ∞ÊÄßÂàÜÈÖçÁ≠ñÁï•ÔºåÂú®‰∏çÂÜç‰ΩøÁî®ÁöÑÊó∂ÂÄôÁ´ãÂàªË¢´Âà†Èô§„ÄÇÂêåÊ†∑ÔºåÈîÅÁöÑ Ëé∑Âèñ‰πüË¶Å‰æùÊçÆ‰∏Ä‰∏™ÂÖ®Â±Ä‰∏ÄËá¥ÁöÑÈ°∫Â∫èÊù•ÈÅøÂÖçÊ≠ªÈîÅ:È¶ñÂÖàÊåâÂêçÁß∞Á©∫Èó¥ÁöÑÂ±ÇÊ¨°ÊéíÂ∫èÔºåÂú®Âêå‰∏Ä‰∏™Â±ÇÊ¨°ÂÜÖÊåâÂ≠óÂÖ∏È°∫Â∫èÊéíÂ∫è„ÄÇ ÂâØÊú¨ÁöÑ‰ΩçÁΩÆGFS ÈõÜÁæ§ÊòØÈ´òÂ∫¶ÂàÜÂ∏ÉÁöÑÂ§öÂ±ÇÂ∏ÉÂ±ÄÁªìÊûÑÔºåËÄå‰∏çÊòØÂπ≥Èù¢ÁªìÊûÑ„ÄÇÂÖ∏ÂûãÁöÑÊãìÊâëÁªìÊûÑÊòØÊúâÊï∞Áôæ‰∏™ Chunk ÊúçÂä°Âô®ÂÆâË£Ö Âú®ËÆ∏Â§öÊú∫Êû∂‰∏ä„ÄÇChunk ÊúçÂä°Âô®Ë¢´Êù•Ëá™Âêå‰∏ÄÊàñËÄÖ‰∏çÂêåÊú∫Êû∂‰∏äÁöÑÊï∞Áôæ‰∏™ÂÆ¢Êà∑Êú∫ËΩÆÊµÅËÆøÈóÆ„ÄÇ‰∏çÂêåÊú∫Êû∂‰∏äÁöÑ‰∏§Âè∞Êú∫Âô® Èó¥ÁöÑÈÄöËÆØÂèØËÉΩË∑®Ë∂ä‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÁΩëÁªú‰∫§Êç¢Êú∫„ÄÇÂè¶Â§ñÔºåÊú∫Êû∂ÁöÑÂá∫ÂÖ•Â∏¶ÂÆΩÂèØËÉΩÊØîÊú∫Êû∂ÂÜÖÊâÄÊúâÊú∫Âô®Âä†ÂíåÂú®‰∏ÄËµ∑ÁöÑÂ∏¶ÂÆΩ Ë¶ÅÂ∞è„ÄÇÂ§öÂ±ÇÂàÜÂ∏ÉÊû∂ÊûÑÂØπÊï∞ÊçÆÁöÑÁÅµÊ¥ªÊÄß„ÄÅÂèØÈù†ÊÄß‰ª•ÂèäÂèØÁî®ÊÄßÊñπÈù¢ÊèêÂá∫ÁâπÊúâÁöÑÊåëÊàò„ÄÇ Chunk ÂâØÊú¨‰ΩçÁΩÆÈÄâÊã©ÁöÑÁ≠ñÁï•ÊúçÂä°‰∏§Â§ßÁõÆÊ†á:ÊúÄÂ§ßÂåñÊï∞ÊçÆÂèØÈù†ÊÄßÂíåÂèØÁî®ÊÄßÔºåÊúÄÂ§ßÂåñÁΩëÁªúÂ∏¶ÂÆΩÂà©Áî®Áéá„ÄÇ‰∏∫‰∫Ü ÂÆûÁé∞Ëøô‰∏§‰∏™ÁõÆÁöÑÔºå‰ªÖ‰ªÖÊòØÂú®Â§öÂè∞Êú∫Âô®‰∏äÂàÜÂà´Â≠òÂÇ®Ëøô‰∫õÂâØÊú¨ÊòØ‰∏çÂ§üÁöÑÔºåËøôÂè™ËÉΩÈ¢ÑÈò≤Á°¨ÁõòÊçüÂùèÊàñËÄÖÊú∫Âô®Â§±ÊïàÂ∏¶Êù•ÁöÑÂΩ±ÂìçÔºå‰ª•ÂèäÊúÄÂ§ßÂåñÊØèÂè∞Êú∫Âô®ÁöÑÁΩëÁªúÂ∏¶ÂÆΩÂà©Áî®Áéá„ÄÇÊàë‰ª¨ÂøÖÈ°ªÂú®Â§ö‰∏™Êú∫Êû∂Èó¥ÂàÜÂ∏ÉÂÇ®Â≠ò Chunk ÁöÑÂâØÊú¨„ÄÇËøô‰øùËØÅ Chunk ÁöÑ‰∏Ä‰∫õÂâØÊú¨Âú®Êï¥‰∏™Êú∫Êû∂Ë¢´Á†¥ÂùèÊàñÊéâÁ∫ø(ÊØîÂ¶ÇÔºåÂÖ±‰∫´ËµÑÊ∫êÔºåÂ¶ÇÁîµÊ∫êÊàñËÄÖÁΩëÁªú‰∫§Êç¢Êú∫ÈÄ†ÊàêÁöÑÈóÆÈ¢ò)ÁöÑÊÉÖÂÜµ‰∏ã‰æùÁÑ∂ Â≠òÂú®‰∏î‰øùÊåÅÂèØÁî®Áä∂ÊÄÅ„ÄÇËøôËøòÊÑèÂë≥ÁùÄÂú®ÁΩëÁªúÊµÅÈáèÊñπÈù¢ÔºåÂ∞§ÂÖ∂ÊòØÈíàÂØπ Chunk ÁöÑËØªÊìç‰ΩúÔºåËÉΩÂ§üÊúâÊïàÂà©Áî®Â§ö‰∏™Êú∫Êû∂ÁöÑÊï¥ÂêàÂ∏¶ÂÆΩ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÂÜôÊìç‰ΩúÂøÖÈ°ªÂíåÂ§ö‰∏™Êú∫Êû∂‰∏äÁöÑËÆæÂ§áËøõË°åÁΩëÁªúÈÄö‰ø°Ôºå‰ΩÜÊòØËøô‰∏™‰ª£‰ª∑ÊòØÊàë‰ª¨ÊÑøÊÑè‰ªòÂá∫ÁöÑ„ÄÇ ÂàõÂª∫ÔºåÈáçÊñ∞Â§çÂà∂ÔºåÈáçÊñ∞Ë¥üËΩΩÂùáË°°Chunk ÁöÑÂâØÊú¨Êúâ‰∏â‰∏™Áî®ÈÄî:Chunk ÂàõÂª∫ÔºåÈáçÊñ∞Â§çÂà∂ÂíåÈáçÊñ∞Ë¥üËΩΩÂùáË°°„ÄÇÂΩì Master ËäÇÁÇπÂàõÂª∫‰∏Ä‰∏™ Chunk Êó∂ÔºåÂÆÉ‰ºöÈÄâÊã©Âú®Âì™ÈáåÊîæÁΩÆÂàùÂßãÁöÑÁ©∫ÁöÑÂâØÊú¨„ÄÇMaster ËäÇÁÇπ‰ºöËÄÉËôëÂá†‰∏™Âõ†Á¥† :(1)Êàë‰ª¨Â∏åÊúõÂú®‰Ωé‰∫éÂπ≥ÂùáÁ°¨Áõò‰ΩøÁî®ÁéáÁöÑ Chunk ÊúçÂä°Âô®‰∏äÂ≠òÂÇ®Êñ∞ÁöÑÂâØÊú¨„ÄÇËøôÊ†∑ÁöÑÂÅöÊ≥ïÊúÄÁªàËÉΩÂ§üÂπ≥Ë°°ChunkÊúçÂä°Âô®‰πãÈó¥ÁöÑÁ°¨Áõò‰ΩøÁî®Áéá„ÄÇ (2)Êàë‰ª¨Â∏åÊúõÈôêÂà∂Âú®ÊØè‰∏™ Chunk ÊúçÂä°Âô®‰∏ä‚ÄúÊúÄËøë‚ÄùÁöÑ Chunk ÂàõÂª∫Êìç‰ΩúÁöÑÊ¨°Êï∞„ÄÇËôΩÁÑ∂ÂàõÂª∫Êìç‰ΩúÊú¨Ë∫´ÊòØÂªâ‰ª∑ÁöÑÔºå‰ΩÜÊòØÂàõÂª∫Êìç‰Ωú‰πüÊÑèÂë≥ÁùÄÈöè‰πã‰ºöÊúâÂ§ßÈáèÁöÑÂÜôÂÖ•Êï∞ÊçÆÁöÑÊìç‰ΩúÔºåÂõ†‰∏∫ Chunk Âú® Writer ÁúüÊ≠£ÂÜôÂÖ•Êï∞ÊçÆÁöÑÊó∂ÂÄôÊâç Ë¢´ÂàõÂª∫ÔºåËÄåÂú®Êàë‰ª¨ÁöÑ‚ÄúËøΩÂä†‰∏ÄÊ¨°ÔºåËØªÂèñÂ§öÊ¨°‚ÄùÁöÑÂ∑•‰ΩúÊ®°Âºè‰∏ãÔºåChunk ‰∏ÄÊó¶ÂÜôÂÖ•ÊàêÂäü‰πãÂêéÂ∞±‰ºöÂèò‰∏∫Âè™ËØªÁöÑ‰∫Ü„ÄÇ (3)Â¶Ç‰∏äÊâÄËø∞ÔºåÊàë‰ª¨Â∏åÊúõÊää Chunk ÁöÑÂâØÊú¨ÂàÜÂ∏ÉÂú®Â§ö‰∏™Êú∫Êû∂‰πãÈó¥„ÄÇ ÂΩì Chunk ÁöÑÊúâÊïàÂâØÊú¨Êï∞ÈáèÂ∞ë‰∫éÁî®Êà∑ÊåáÂÆöÁöÑÂ§çÂà∂Âõ†Êï∞ÁöÑÊó∂ÂÄôÔºåMaster ËäÇÁÇπ‰ºöÈáçÊñ∞Â§çÂà∂ÂÆÉ„ÄÇËøôÂèØËÉΩÊòØÁî±Âá†‰∏™ ÂéüÂõ†ÂºïËµ∑ÁöÑ:‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®‰∏çÂèØÁî®‰∫ÜÔºåChunk ÊúçÂä°Âô®Êä•ÂëäÂÆÉÊâÄÂ≠òÂÇ®ÁöÑ‰∏Ä‰∏™ÂâØÊú¨ÊçüÂùè‰∫ÜÔºåChunk ÊúçÂä°Âô®ÁöÑ ‰∏Ä‰∏™Á£ÅÁõòÂõ†‰∏∫ÈîôËØØ‰∏çÂèØÁî®‰∫ÜÔºåÊàñËÄÖ Chunk ÂâØÊú¨ÁöÑÂ§çÂà∂Âõ†Êï∞ÊèêÈ´ò‰∫Ü„ÄÇÊØè‰∏™ÈúÄË¶ÅË¢´ÈáçÊñ∞Â§çÂà∂ÁöÑ Chunk ÈÉΩ‰ºöÊ†πÊçÆÂá† ‰∏™Âõ†Á¥†ËøõË°åÊéíÂ∫è„ÄÇ‰∏Ä‰∏™Âõ†Á¥†ÊòØ Chunk Áé∞ÊúâÂâØÊú¨Êï∞ÈáèÂíåÂ§çÂà∂Âõ†Êï∞Áõ∏Â∑ÆÂ§öÂ∞ë„ÄÇ‰æãÂ¶ÇÔºå‰∏¢Â§±‰∏§‰∏™ÂâØÊú¨ÁöÑ Chunk ÊØî‰∏¢ Â§±‰∏Ä‰∏™ÂâØÊú¨ÁöÑ Chunk ÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ß„ÄÇÂè¶Â§ñÔºåÊàë‰ª¨‰ºòÂÖàÈáçÊñ∞Â§çÂà∂Ê¥ªË∑É(live)Êñá‰ª∂ÁöÑ Chunk ËÄå‰∏çÊòØÊúÄËøëÂàöË¢´ Âà†Èô§ÁöÑÊñá‰ª∂ÁöÑ Chunk(Êü•Áúã 4.4 ËäÇ)„ÄÇÊúÄÂêéÔºå‰∏∫‰∫ÜÊúÄÂ∞èÂåñÂ§±ÊïàÁöÑ Chunk ÂØπÊ≠£Âú®ËøêË°åÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÂΩ±ÂìçÔºåÊàë‰ª¨Êèê È´ò‰ºöÈòªÂ°ûÂÆ¢Êà∑Êú∫Á®ãÂ∫èÂ§ÑÁêÜÊµÅÁ®ãÁöÑ Chunk ÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ Master ËäÇÁÇπÈÄâÊã©‰ºòÂÖàÁ∫ßÊúÄÈ´òÁöÑ ChunkÔºåÁÑ∂ÂêéÂëΩ‰ª§Êüê‰∏™ Chunk ÊúçÂä°Âô®Áõ¥Êé•‰ªéÂèØÁî®ÁöÑÂâØÊú¨‚ÄùÂÖãÈöÜ‚Äù‰∏Ä‰∏™ÂâØÊú¨ Âá∫Êù•„ÄÇÈÄâÊã©Êñ∞ÂâØÊú¨ÁöÑ‰ΩçÁΩÆÁöÑÁ≠ñÁï•ÂíåÂàõÂª∫Êó∂Á±ª‰ºº:Âπ≥Ë°°Á°¨Áõò‰ΩøÁî®Áéá„ÄÅÈôêÂà∂Âêå‰∏ÄÂè∞ Chunk ÊúçÂä°Âô®‰∏äÁöÑÊ≠£Âú®ËøõË°åÁöÑ ÂÖãÈöÜÊìç‰ΩúÁöÑÊï∞Èáè„ÄÅÂú®Êú∫Êû∂Èó¥ÂàÜÂ∏ÉÂâØÊú¨„ÄÇ‰∏∫‰∫ÜÈò≤Ê≠¢ÂÖãÈöÜ‰∫ßÁîüÁöÑÁΩëÁªúÊµÅÈáèÂ§ßÂ§ßË∂ÖËøáÂÆ¢Êà∑Êú∫ÁöÑÊµÅÈáèÔºåMaster ËäÇÁÇπÂØπ Êï¥‰∏™ÈõÜÁæ§ÂíåÊØè‰∏™ Chunk ÊúçÂä°Âô®‰∏äÁöÑÂêåÊó∂ËøõË°åÁöÑÂÖãÈöÜÊìç‰ΩúÁöÑÊï∞ÈáèÈÉΩËøõË°å‰∫ÜÈôêÂà∂„ÄÇÂè¶Â§ñÔºåChunk ÊúçÂä°Âô®ÈÄöËøáË∞ÉËäÇ ÂÆÉÂØπÊ∫ê Chunk ÊúçÂä°Âô®ËØªËØ∑Ê±ÇÁöÑÈ¢ëÁéáÊù•ÈôêÂà∂ÂÆÉÁî®‰∫éÂÖãÈöÜÊìç‰ΩúÁöÑÂ∏¶ÂÆΩ„ÄÇ ÊúÄÂêéÔºåMaster ÊúçÂä°Âô®Âë®ÊúüÊÄßÂú∞ÂØπÂâØÊú¨ËøõË°åÈáçÊñ∞Ë¥üËΩΩÂùáË°°:ÂÆÉÊ£ÄÊü•ÂΩìÂâçÁöÑÂâØÊú¨ÂàÜÂ∏ÉÊÉÖÂÜµÔºåÁÑ∂ÂêéÁßªÂä®ÂâØÊú¨‰ª• ‰æøÊõ¥Â•ΩÁöÑÂà©Áî®Á°¨ÁõòÁ©∫Èó¥„ÄÅÊõ¥ÊúâÊïàÁöÑËøõË°åË¥üËΩΩÂùáË°°„ÄÇËÄå‰∏îÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠ÔºåMaster ÊúçÂä°Âô®ÈÄêÊ∏êÁöÑÂ°´Êª°‰∏Ä‰∏™Êñ∞ÁöÑ Chunk ÊúçÂä°Âô®ÔºåËÄå‰∏çÊòØÂú®Áü≠Êó∂Èó¥ÂÜÖÁî®Êñ∞ÁöÑ Chunk Â°´Êª°ÂÆÉÔºå‰ª•Ëá≥‰∫éËøáËΩΩ„ÄÇÊñ∞ÂâØÊú¨ÁöÑÂ≠òÂÇ®‰ΩçÁΩÆÈÄâÊã©Á≠ñÁï•Âíå‰∏äÈù¢ËÆ®ËÆ∫ÁöÑÁõ∏ Âêå„ÄÇÂè¶Â§ñÔºåMaster ËäÇÁÇπÂøÖÈ°ªÈÄâÊã©Âì™‰∏™ÂâØÊú¨Ë¶ÅË¢´ÁßªËµ∞„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµÔºåMaster ËäÇÁÇπÁßªËµ∞ÈÇ£‰∫õÂâ©‰ΩôÁ©∫Èó¥‰Ωé‰∫éÂπ≥ÂùáÂÄºÁöÑChunk ÊúçÂä°Âô®‰∏äÁöÑÂâØÊú¨Ôºå‰ªéËÄåÂπ≥Ë°°Á≥ªÁªüÊï¥‰ΩìÁöÑÁ°¨Áõò‰ΩøÁî®Áéá„ÄÇ ÂûÉÂúæÂõûÊî∂GFS Âú®Êñá‰ª∂Âà†Èô§Âêé‰∏ç‰ºöÁ´ãÂàªÂõûÊî∂ÂèØÁî®ÁöÑÁâ©ÁêÜÁ©∫Èó¥„ÄÇGFS Á©∫Èó¥ÂõûÊî∂ÈááÁî®ÊÉ∞ÊÄßÁöÑÁ≠ñÁï•ÔºåÂè™Âú®Êñá‰ª∂Âíå Chunk Á∫ß ÁöÑÂ∏∏ËßÑÂûÉÂúæÊî∂ÈõÜÊó∂ËøõË°å„ÄÇÊàë‰ª¨ÂèëÁé∞Ëøô‰∏™ÊñπÊ≥ï‰ΩøÁ≥ªÁªüÊõ¥ÁÆÄÂçï„ÄÅÊõ¥ÂèØÈù†„ÄÇ Êú∫Âà∂ÂΩì‰∏Ä‰∏™Êñá‰ª∂Ë¢´Â∫îÁî®Á®ãÂ∫èÂà†Èô§Êó∂ÔºåMaster ËäÇÁÇπË±°ÂØπÂæÖÂÖ∂ÂÆÉ‰øÆÊîπÊìç‰Ωú‰∏ÄÊ†∑ÔºåÁ´ãÂàªÊääÂà†Èô§Êìç‰Ωú‰ª•Êó•ÂøóÁöÑÊñπÂºèËÆ∞ ÂΩï‰∏ãÊù•„ÄÇ‰ΩÜÊòØÔºåMaster ËäÇÁÇπÂπ∂‰∏çÈ©¨‰∏äÂõûÊî∂ËµÑÊ∫êÔºåËÄåÊòØÊääÊñá‰ª∂ÂêçÊîπ‰∏∫‰∏Ä‰∏™ÂåÖÂê´Âà†Èô§Êó∂Èó¥Êà≥ÁöÑ„ÄÅÈöêËóèÁöÑÂêçÂ≠ó„ÄÇÂΩì Master ËäÇÁÇπÂØπÊñá‰ª∂Á≥ªÁªüÂëΩÂêçÁ©∫Èó¥ÂÅöÂ∏∏ËßÑÊâ´ÊèèÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöÂà†Èô§ÊâÄÊúâ‰∏âÂ§©ÂâçÁöÑÈöêËóèÊñá‰ª∂(Ëøô‰∏™Êó∂Èó¥Èó¥ÈöîÊòØÂèØ‰ª• ËÆæÁΩÆÁöÑ)„ÄÇÁõ¥Âà∞Êñá‰ª∂Ë¢´ÁúüÊ≠£Âà†Èô§ÔºåÂÆÉ‰ª¨‰ªçÊóßÂèØ‰ª•Áî®Êñ∞ÁöÑÁâπÊÆäÁöÑÂêçÂ≠óËØªÂèñÔºå‰πüÂèØ‰ª•ÈÄöËøáÊääÈöêËóèÊñá‰ª∂ÊîπÂêç‰∏∫Ê≠£Â∏∏Êòæ Á§∫ÁöÑÊñá‰ª∂ÂêçÁöÑÊñπÂºè‚ÄúÂèçÂà†Èô§‚Äù„ÄÇÂΩìÈöêËóèÊñá‰ª∂Ë¢´‰ªéÂêçÁß∞Á©∫Èó¥‰∏≠Âà†Èô§ÔºåMaster ÊúçÂä°Âô®ÂÜÖÂ≠ò‰∏≠‰øùÂ≠òÁöÑËøô‰∏™Êñá‰ª∂ÁöÑÁõ∏ÂÖ≥ ÂÖÉÊï∞ÊçÆÊâç‰ºöË¢´Âà†Èô§„ÄÇËøô‰πüÊúâÊïàÁöÑÂàáÊñ≠‰∫ÜÊñá‰ª∂ÂíåÂÆÉÂåÖÂê´ÁöÑÊâÄÊúâ Chunk ÁöÑËøûÊé•„ÄÇ Âú®ÂØπ Chunk ÂêçÂ≠óÁ©∫Èó¥ÂÅöÁ±ª‰ººÁöÑÂ∏∏ËßÑÊâ´ÊèèÊó∂ÔºåMaster ËäÇÁÇπÊâæÂà∞Â≠§ÂÑø Chunk(‰∏çË¢´‰ªª‰ΩïÊñá‰ª∂ÂåÖÂê´ÁöÑ Chunk) Âπ∂Âà†Èô§ÂÆÉ‰ª¨ÁöÑÂÖÉÊï∞ÊçÆ„ÄÇChunk ÊúçÂä°Âô®Âú®Âíå Master ËäÇÁÇπ‰∫§‰∫íÁöÑÂøÉË∑≥‰ø°ÊÅØ‰∏≠ÔºåÊä•ÂëäÂÆÉÊã•ÊúâÁöÑ Chunk Â≠êÈõÜÁöÑ‰ø°ÊÅØÔºå Master ËäÇÁÇπÂõûÂ§ç Chunk ÊúçÂä°Âô®Âì™‰∫õ Chunk Âú® Master ËäÇÁÇπ‰øùÂ≠òÁöÑÂÖÉÊï∞ÊçÆ‰∏≠Â∑≤Áªè‰∏çÂ≠òÂú®‰∫Ü„ÄÇChunk ÊúçÂä°Âô®ÂèØ‰ª•‰ªª ÊÑèÂà†Èô§Ëøô‰∫õ Chunk ÁöÑÂâØÊú¨„ÄÇ ËÆ®ËÆ∫ËôΩÁÑ∂ÂàÜÂ∏ÉÂºèÂûÉÂúæÂõûÊî∂Âú®ÁºñÁ®ãËØ≠Ë®ÄÈ¢ÜÂüüÊòØ‰∏Ä‰∏™ÈúÄË¶ÅÂ§çÊùÇÁöÑÊñπÊ°àÊâçËÉΩËß£ÂÜ≥ÁöÑÈöæÈ¢òÔºå‰ΩÜÊòØÂú® GFS Á≥ªÁªü‰∏≠ÊòØÈùûÂ∏∏ ÁÆÄÂçïÁöÑ„ÄÇÊàë‰ª¨ÂèØ‰ª•ËΩªÊòìÁöÑÂæóÂà∞ Chunk ÁöÑÊâÄÊúâÂºïÁî®:ÂÆÉ‰ª¨ÈÉΩÂè™Â≠òÂÇ®Âú® Master ÊúçÂä°Âô®‰∏äÁöÑÊñá‰ª∂Âà∞ÂùóÁöÑÊò†Â∞ÑË°®‰∏≠„ÄÇ Êàë‰ª¨‰πüÂèØ‰ª•ÂæàËΩªÊòìÁöÑÂæóÂà∞ÊâÄÊúâ Chunk ÁöÑÂâØÊú¨:ÂÆÉ‰ª¨ÈÉΩ‰ª• Linux Êñá‰ª∂ÁöÑÂΩ¢ÂºèÂ≠òÂÇ®Âú® Chunk ÊúçÂä°Âô®ÁöÑÊåáÂÆöÁõÆÂΩï‰∏ã„ÄÇ ÊâÄÊúâ Master ËäÇÁÇπ‰∏çËÉΩËØÜÂà´ÁöÑÂâØÊú¨ÈÉΩÊòØ‚ÄúÂûÉÂúæ‚Äù„ÄÇ ÂûÉÂúæÂõûÊî∂Âú®Á©∫Èó¥ÂõûÊî∂ÊñπÈù¢Áõ∏ÊØîÁõ¥Êé•Âà†Èô§ÊúâÂá†‰∏™‰ºòÂäø„ÄÇÈ¶ñÂÖàÔºåÂØπ‰∫éÁªÑ‰ª∂Â§±ÊïàÊòØÂ∏∏ÊÄÅÁöÑÂ§ßËßÑÊ®°ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÔºå ÂûÉÂúæÂõûÊî∂ÊñπÂºèÁÆÄÂçïÂèØÈù†„ÄÇChunk ÂèØËÉΩÂú®Êüê‰∫õ Chunk ÊúçÂä°Âô®ÂàõÂª∫ÊàêÂäüÔºåÊüê‰∫õ Chunk ÊúçÂä°Âô®‰∏äÂàõÂª∫Â§±Ë¥•ÔºåÂ§±Ë¥•ÁöÑ ÂâØÊú¨Â§Ñ‰∫éÊó†Ê≥ïË¢´ Master ËäÇÁÇπËØÜÂà´ÁöÑÁä∂ÊÄÅ„ÄÇÂâØÊú¨Âà†Èô§Ê∂àÊÅØÂèØËÉΩ‰∏¢Â§±ÔºåMaster ËäÇÁÇπÂøÖÈ°ªÈáçÊñ∞ÂèëÈÄÅÂ§±Ë¥•ÁöÑÂà†Èô§Ê∂àÊÅØÔºå ÂåÖÊã¨Ëá™Ë∫´ÁöÑÂíå Chunk ÊúçÂä°Âô®ÁöÑ(Ëá™Ë∫´ÁöÑÊåáÂà†Èô§ metadata ÁöÑÊ∂àÊÅØ)„ÄÇÂûÉÂúæÂõûÊî∂Êèê‰æõ‰∫Ü‰∏ÄËá¥ÁöÑ„ÄÅÂèØÈù†ÁöÑÊ∏ÖÈô§Êó†Áî®ÂâØÊú¨ÁöÑÊñπÊ≥ï„ÄÇÁ¨¨‰∫åÔºåÂûÉÂúæÂõûÊî∂Êää Â≠òÂÇ®Á©∫Èó¥ÁöÑÂõûÊî∂Êìç‰ΩúÂêàÂπ∂Âà∞ Master ËäÇÁÇπËßÑÂæãÊÄßÁöÑÂêéÂè∞Ê¥ªÂä®‰∏≠ÔºåÊØîÂ¶ÇÔºå‰æãË°åÊâ´ÊèèÂíå‰∏é Chunk ÊúçÂä°Âô®Êè°ÊâãÁ≠â„ÄÇÂõ† Ê≠§ÔºåÊìç‰ΩúË¢´ÊâπÈáèÁöÑÊâßË°åÔºåÂºÄÈîÄ‰ºöË¢´ÂàÜÊï£„ÄÇÂè¶Â§ñÔºåÂûÉÂúæÂõûÊî∂Âú® Master ËäÇÁÇπÁõ∏ÂØπÁ©∫Èó≤ÁöÑÊó∂ÂÄôÂÆåÊàê„ÄÇËøôÊ†∑ MasterËäÇÁÇπÂ∞±ÂèØ‰ª•ÁªôÈÇ£‰∫õÈúÄË¶ÅÂø´ÈÄüÂèçÂ∫îÁöÑÂÆ¢Êà∑Êú∫ËØ∑Ê±ÇÊèê‰æõÊõ¥Âø´Êç∑ÁöÑÂìçÂ∫î„ÄÇÁ¨¨‰∏âÔºåÂª∂ÁºìÂ≠òÂÇ®Á©∫Èó¥ÂõûÊî∂‰∏∫ÊÑèÂ§ñÁöÑ„ÄÅ‰∏çÂèØÈÄÜËΩ¨ÁöÑÂà†Èô§Êìç‰ΩúÊèê‰æõ‰∫ÜÂÆâÂÖ®‰øùÈöú„ÄÇ Ê†πÊçÆÊàë‰ª¨ÁöÑ‰ΩøÁî®ÁªèÈ™åÔºåÂª∂ËøüÂõûÊî∂Á©∫Èó¥ÁöÑ‰∏ªË¶ÅÈóÆÈ¢òÊòØÔºåÂª∂ËøüÂõûÊî∂‰ºöÈòªÁ¢çÁî®Êà∑Ë∞É‰ºòÂ≠òÂÇ®Á©∫Èó¥ÁöÑ‰ΩøÁî®ÔºåÁâπÂà´ÊòØÂΩìÂ≠òÂÇ®Á©∫Èó¥ÊØîËæÉÁ¥ßÁº∫ÁöÑÊó∂ÂÄô„ÄÇÂΩìÂ∫îÁî®Á®ãÂ∫èÈáçÂ§çÂàõÂª∫ÂíåÂà†Èô§‰∏¥Êó∂Êñá‰ª∂Êó∂ÔºåÈáäÊîæÁöÑÂ≠òÂÇ®Á©∫Èó¥‰∏çËÉΩÈ©¨‰∏äÈáçÁî®„ÄÇÊàë‰ª¨ ÈÄöËøáÊòæÂºèÁöÑÂÜçÊ¨°Âà†Èô§‰∏Ä‰∏™Â∑≤ÁªèË¢´Âà†Èô§ÁöÑÊñá‰ª∂ÁöÑÊñπÂºèÂä†ÈÄüÁ©∫Èó¥ÂõûÊî∂ÁöÑÈÄüÂ∫¶„ÄÇÊàë‰ª¨ÂÖÅËÆ∏Áî®Êà∑‰∏∫ÂëΩÂêçÁ©∫Èó¥ÁöÑ‰∏çÂêåÈÉ® ÂàÜËÆæÂÆö‰∏çÂêåÁöÑÂ§çÂà∂ÂíåÂõûÊî∂Á≠ñÁï•„ÄÇ‰æãÂ¶ÇÔºåÁî®Êà∑ÂèØ‰ª•ÊåáÂÆöÊüê‰∫õÁõÆÂΩïÊ†ë‰∏ãÈù¢ÁöÑÊñá‰ª∂‰∏çÂÅöÂ§çÂà∂ÔºåÂà†Èô§ÁöÑÊñá‰ª∂Ë¢´Âç≥Êó∂ÁöÑ„ÄÅ ‰∏çÂèØÊÅ¢Â§çÁöÑ‰ªéÊñá‰ª∂Á≥ªÁªüÁßªÈô§„ÄÇ ËøáÊúüÂ§±ÊïàÁöÑÂâØÊú¨Ê£ÄÊµãÂΩì Chunk ÊúçÂä°Âô®Â§±ÊïàÊó∂ÔºåChunk ÁöÑÂâØÊú¨ÊúâÂèØËÉΩÂõ†ÈîôÂ§±‰∫Ü‰∏Ä‰∫õ‰øÆÊîπÊìç‰ΩúËÄåËøáÊúüÂ§±Êïà„ÄÇMaster ËäÇÁÇπ‰øùÂ≠ò‰∫ÜÊØè ‰∏™ Chunk ÁöÑÁâàÊú¨Âè∑ÔºåÁî®Êù•Âå∫ÂàÜÂΩìÂâçÁöÑÂâØÊú¨ÂíåËøáÊúüÂâØÊú¨„ÄÇ Êó†ËÆ∫‰ΩïÊó∂ÔºåÂè™Ë¶Å Master ËäÇÁÇπÂíå Chunk Á≠æËÆ¢‰∏Ä‰∏™Êñ∞ÁöÑÁßüÁ∫¶ÔºåÂÆÉÂ∞±Â¢ûÂä† Chunk ÁöÑÁâàÊú¨Âè∑ÔºåÁÑ∂ÂêéÈÄöÁü•ÊúÄÊñ∞ÁöÑ ÂâØÊú¨„ÄÇMaster ËäÇÁÇπÂíåËøô‰∫õÂâØÊú¨ÈÉΩÊääÊñ∞ÁöÑÁâàÊú¨Âè∑ËÆ∞ÂΩïÂú®ÂÆÉ‰ª¨ÊåÅ‰πÖÂåñÂ≠òÂÇ®ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ‰∏≠„ÄÇËøô‰∏™Âä®‰ΩúÂèëÁîüÂú®‰ªª‰ΩïÂÆ¢ Êà∑Êú∫ÂæóÂà∞ÈÄöÁü•‰ª•ÂâçÔºåÂõ†Ê≠§‰πüÊòØÂØπËøô‰∏™ Chunk ÂºÄÂßãÂÜô‰πãÂâç„ÄÇÂ¶ÇÊûúÊüê‰∏™ÂâØÊú¨ÊâÄÂú®ÁöÑ Chunk ÊúçÂä°Âô®Ê≠£Â•ΩÂ§Ñ‰∫éÂ§±ÊïàÁä∂ ÊÄÅÔºåÈÇ£‰πàÂâØÊú¨ÁöÑÁâàÊú¨Âè∑Â∞±‰∏ç‰ºöË¢´Â¢ûÂä†„ÄÇMaster ËäÇÁÇπÂú®Ëøô‰∏™ Chunk ÊúçÂä°Âô®ÈáçÊñ∞ÂêØÂä®ÔºåÂπ∂‰∏îÂêë Master ËäÇÁÇπÊä•ÂëäÂÆÉ Êã•ÊúâÁöÑ Chunk ÁöÑÈõÜÂêà‰ª•ÂèäÁõ∏Â∫îÁöÑÁâàÊú¨Âè∑ÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöÊ£ÄÊµãÂá∫ÂÆÉÂåÖÂê´ËøáÊúüÁöÑ Chunk„ÄÇÂ¶ÇÊûú Master ËäÇÁÇπÁúãÂà∞‰∏Ä‰∏™ ÊØîÂÆÉËÆ∞ÂΩïÁöÑÁâàÊú¨Âè∑Êõ¥È´òÁöÑÁâàÊú¨Âè∑ÔºåMaster ËäÇÁÇπ‰ºöËÆ§‰∏∫ÂÆÉÂíå Chunk ÊúçÂä°Âô®Á≠æËÆ¢ÁßüÁ∫¶ÁöÑÊìç‰ΩúÂ§±Ë¥•‰∫ÜÔºåÂõ†Ê≠§‰ºöÈÄâÊã© Êõ¥È´òÁöÑÁâàÊú¨Âè∑‰Ωú‰∏∫ÂΩìÂâçÁöÑÁâàÊú¨Âè∑„ÄÇ Master ËäÇÁÇπÂú®‰æãË°åÁöÑÂûÉÂúæÂõûÊî∂ËøáÁ®ã‰∏≠ÁßªÈô§ÊâÄÊúâÁöÑËøáÊúüÂ§±ÊïàÂâØÊú¨„ÄÇÂú®Ê≠§‰πãÂâçÔºåMaster ËäÇÁÇπÂú®ÂõûÂ§çÂÆ¢Êà∑Êú∫ÁöÑ Chunk ‰ø°ÊÅØËØ∑Ê±ÇÁöÑÊó∂ÂÄôÔºåÁÆÄÂçïÁöÑËÆ§‰∏∫ÈÇ£‰∫õËøáÊúüÁöÑÂùóÊ†πÊú¨Â∞±‰∏çÂ≠òÂú®„ÄÇÂè¶Â§ñ‰∏ÄÈáç‰øùÈöúÊé™ÊñΩÊòØÔºåMaster ËäÇÁÇπÂú®ÈÄöÁü• ÂÆ¢Êà∑Êú∫Âì™‰∏™ Chunk ÊúçÂä°Âô®ÊåÅÊúâÁßüÁ∫¶„ÄÅÊàñËÄÖÊåáÁ§∫ Chunk ÊúçÂä°Âô®‰ªéÂì™‰∏™ Chunk ÊúçÂä°Âô®ËøõË°åÂÖãÈöÜÊó∂ÔºåÊ∂àÊÅØ‰∏≠ÈÉΩÈôÑÂ∏¶ ‰∫Ü Chunk ÁöÑÁâàÊú¨Âè∑„ÄÇÂÆ¢Êà∑Êú∫ÊàñËÄÖ Chunk ÊúçÂä°Âô®Âú®ÊâßË°åÊìç‰ΩúÊó∂ÈÉΩ‰ºöÈ™åËØÅÁâàÊú¨Âè∑‰ª•Á°Æ‰øùÊÄªÊòØËÆøÈóÆÂΩìÂâçÁâàÊú¨ÁöÑÊï∞ÊçÆ„ÄÇ ÂÆπÈîôÂíåËØäÊñ≠Êàë‰ª¨Âú®ËÆæËÆ° GFS Êó∂ÈÅáÂà∞ÁöÑÊúÄÂ§ßÊåëÊàò‰πã‰∏ÄÊòØÂ¶Ç‰ΩïÂ§ÑÁêÜÈ¢ëÁπÅÂèëÁîüÁöÑÁªÑ‰ª∂Â§±Êïà„ÄÇÁªÑ‰ª∂ÁöÑÊï∞ÈáèÂíåË¥®ÈáèËÆ©Ëøô‰∫õÈóÆÈ¢ò Âá∫Áé∞ÁöÑÈ¢ëÁéáËøúËøúË∂ÖËøá‰∏ÄËà¨Á≥ªÁªüÊÑèÂ§ñÂèëÁîüÁöÑÈ¢ëÁéá:Êàë‰ª¨‰∏çËÉΩÂÆåÂÖ®‰æùËµñÊú∫Âô®ÁöÑÁ®≥ÂÆöÊÄßÔºå‰πü‰∏çËÉΩÂÆåÂÖ®Áõ∏‰ø°Á°¨ÁõòÁöÑÂèØ Èù†ÊÄß„ÄÇÁªÑ‰ª∂ÁöÑÂ§±ÊïàÂèØËÉΩÈÄ†ÊàêÁ≥ªÁªü‰∏çÂèØÁî®ÔºåÊõ¥Á≥üÁ≥ïÁöÑÊòØÔºåËøòÂèØËÉΩ‰∫ßÁîü‰∏çÂÆåÊï¥ÁöÑÊï∞ÊçÆ„ÄÇÊàë‰ª¨ËÆ®ËÆ∫Êàë‰ª¨Â¶Ç‰ΩïÈù¢ÂØπËøô ‰∫õÊåëÊàòÔºå‰ª•ÂèäÂΩìÁªÑ‰ª∂Â§±Êïà‰∏çÂèØÈÅøÂÖçÁöÑÂèëÁîüÊó∂ÔºåÁî® GFS Ëá™Â∏¶Â∑•ÂÖ∑ËØäÊñ≠Á≥ªÁªüÊïÖÈöú„ÄÇ È´òÂèØÁî®ÊÄßÂú® GFS ÈõÜÁæ§ÁöÑÊï∞Áôæ‰∏™ÊúçÂä°Âô®‰πã‰∏≠ÔºåÂú®‰ªª‰ΩïÁªôÂÆöÁöÑÊó∂Èó¥ÂøÖÂÆö‰ºöÊúâ‰∫õÊúçÂä°Âô®ÊòØ‰∏çÂèØÁî®ÁöÑ„ÄÇÊàë‰ª¨‰ΩøÁî®‰∏§Êù°ÁÆÄÂçï‰ΩÜÊòØÊúâÊïàÁöÑÁ≠ñÁï•‰øùËØÅÊï¥‰∏™Á≥ªÁªüÁöÑÈ´òÂèØÁî®ÊÄß:Âø´ÈÄüÊÅ¢Â§çÂíåÂ§çÂà∂„ÄÇ Âø´ÈÄüÊÅ¢Â§ç‰∏çÁÆ° Master ÊúçÂä°Âô®Âíå Chunk ÊúçÂä°Âô®ÊòØÂ¶Ç‰ΩïÂÖ≥Èó≠ÁöÑÔºåÂÆÉ‰ª¨ÈÉΩË¢´ËÆæËÆ°‰∏∫ÂèØ‰ª•Âú®Êï∞ÁßíÈíüÂÜÖÊÅ¢Â§çÂÆÉ‰ª¨ÁöÑÁä∂ÊÄÅÂπ∂Èáç Êñ∞ÂêØÂä®„ÄÇ‰∫ãÂÆû‰∏äÔºåÊàë‰ª¨Âπ∂‰∏çÂå∫ÂàÜÊ≠£Â∏∏ÂÖ≥Èó≠ÂíåÂºÇÂ∏∏ÂÖ≥Èó≠;ÈÄöÂ∏∏ÔºåÊàë‰ª¨ÈÄöËøáÁõ¥Êé• kill ÊéâËøõÁ®ãÊù•ÂÖ≥Èó≠ÊúçÂä°Âô®„ÄÇÂÆ¢Êà∑ Êú∫ÂíåÂÖ∂ÂÆÉÁöÑÊúçÂä°Âô®‰ºöÊÑüËßâÂà∞Á≥ªÁªüÊúâÁÇπÈ¢†Á∞∏(a minor hiccup)ÔºåÊ≠£Âú®ÂèëÂá∫ÁöÑËØ∑Ê±Ç‰ºöË∂ÖÊó∂ÔºåÈúÄË¶ÅÈáçÊñ∞ËøûÊé•Âà∞ÈáçÂêØÂêéÁöÑÊúçÂä°Âô®ÔºåÁÑ∂Âêé ÈáçËØïËøô‰∏™ËØ∑Ê±Ç„ÄÇ6.6.2 Á´†ËäÇËÆ∞ÂΩï‰∫ÜÂÆûÊµãÁöÑÂêØÂä®Êó∂Èó¥„ÄÇ Chunk Â§çÂà∂Ê≠£Â¶Ç‰πãÂâçËÆ®ËÆ∫ÁöÑÔºåÊØè‰∏™ Chunk ÈÉΩË¢´Â§çÂà∂Âà∞‰∏çÂêåÊú∫Êû∂‰∏äÁöÑ‰∏çÂêåÁöÑ Chunk ÊúçÂä°Âô®‰∏ä„ÄÇÁî®Êà∑ÂèØ‰ª•‰∏∫Êñá‰ª∂ÂëΩÂêçÁ©∫ Èó¥ÁöÑ‰∏çÂêåÈÉ®ÂàÜËÆæÂÆö‰∏çÂêåÁöÑÂ§çÂà∂Á∫ßÂà´„ÄÇÁº∫ÁúÅÊòØ 3„ÄÇÂΩìÊúâ Chunk ÊúçÂä°Âô®Á¶ªÁ∫ø‰∫ÜÔºåÊàñËÄÖÈÄöËøá Chksum Ê†°È™å(ÂèÇËÄÉ 5.2 ËäÇ)ÂèëÁé∞‰∫ÜÂ∑≤ÁªèÊçüÂùèÁöÑÊï∞ÊçÆÔºåMaster ËäÇÁÇπÈÄöËøáÂÖãÈöÜÂ∑≤ÊúâÁöÑÂâØÊú¨‰øùËØÅÊØè‰∏™ Chunk ÈÉΩË¢´ÂÆåÊï¥Â§çÂà∂(Âç≥ÊØè‰∏™ Chunk ÈÉΩÊúâÂ§çÂà∂Âõ†Â≠êÂà∂ÂÆöÁöÑ‰∏™Êï∞‰∏™ÂâØÊú¨ÔºåÁº∫ÁúÅÊòØ 3)„ÄÇËôΩÁÑ∂ Chunk Â§çÂà∂Á≠ñÁï•ÂØπÊàë‰ª¨ÈùûÂ∏∏ÊúâÊïàÔºå‰ΩÜÊòØÊàë‰ª¨‰πüÂú®ÂØªÊâæÂÖ∂ÂÆÉÂΩ¢ÂºèÁöÑË∑®ÊúçÂä°Âô®ÁöÑÂÜó‰ΩôËß£ÂÜ≥ÊñπÊ°àÔºåÊØîÂ¶Ç‰ΩøÁî®Â•áÂÅ∂Ê†°È™å„ÄÅÊàñ ËÄÖ Erasure codes(Erasure codes Áî®Êù•Ëß£ÂÜ≥ÈìæÊé•Â±Ç‰∏≠‰∏çÁõ∏ÂÖ≥ÁöÑÈîôËØØÔºå‰ª•ÂèäÁΩëÁªúÊã•Â°ûÂíå buffer ÈôêÂà∂ÈÄ†ÊàêÁöÑ‰∏¢ÂåÖÈîôËØØ)Êù•Ëß£ÂÜ≥Êàë‰ª¨Êó•ÁõäÂ¢ûÈïøÁöÑÂè™ËØªÂ≠òÂÇ®ÈúÄÊ±Ç„ÄÇÊàë‰ª¨ÁöÑÁ≥ªÁªü‰∏ªË¶ÅÁöÑÂ∑•‰ΩúË¥üËΩΩÊòØËøΩÂä†ÊñπÂºèÁöÑÂÜôÂÖ•ÂíåËØªÂèñ Êìç‰ΩúÔºåÂæàÂ∞ëÊúâÈöèÊú∫ÁöÑÂÜôÂÖ•Êìç‰ΩúÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ËÆ§‰∏∫Âú®Êàë‰ª¨Ëøô‰∏™È´òÂ∫¶Ëß£ËÄ¶ÂêàÁöÑÁ≥ªÁªüÊû∂ÊûÑ‰∏ãÂÆûÁé∞Ëøô‰∫õÂ§çÊùÇÁöÑÂÜó‰ΩôÊñπ Ê°àÂæàÊúâÊåëÊàòÊÄßÔºå‰ΩÜÂπ∂Èùû‰∏çÂèØÂÆûÁé∞„ÄÇ Master ÊúçÂä°Âô®ÁöÑÂ§çÂà∂‰∏∫‰∫Ü‰øùËØÅ Master ÊúçÂä°Âô®ÁöÑÂèØÈù†ÊÄßÔºåMaster ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅ‰πüË¶ÅÂ§çÂà∂„ÄÇMaster ÊúçÂä°Âô®ÊâÄÊúâÁöÑÊìç‰ΩúÊó•ÂøóÂíå checkpoint Êñá‰ª∂ÈÉΩË¢´Â§çÂà∂Âà∞Â§öÂè∞Êú∫Âô®‰∏ä„ÄÇÂØπ Master ÊúçÂä°Âô®Áä∂ÊÄÅÁöÑ‰øÆÊîπÊìç‰ΩúËÉΩÂ§üÊèê‰∫§ÊàêÂäüÁöÑÂâçÊèêÊòØÔºåÊìç‰ΩúÊó•Âøó ÂÜôÂÖ•Âà∞ Master ÊúçÂä°Âô®ÁöÑÂ§áËäÇÁÇπÂíåÊú¨Êú∫ÁöÑÁ£ÅÁõò„ÄÇÁÆÄÂçïËØ¥Êù•Ôºå‰∏Ä‰∏™ Master ÊúçÂä°ËøõÁ®ãË¥üË¥£ÊâÄÊúâÁöÑ‰øÆÊîπÊìç‰ΩúÔºåÂåÖÊã¨Âêé Âè∞ÁöÑÊúçÂä°ÔºåÊØîÂ¶ÇÂûÉÂúæÂõûÊî∂Á≠âÊîπÂèòÁ≥ªÁªüÂÜÖÈÉ®Áä∂ÊÄÅÊ¥ªÂä®„ÄÇÂΩìÂÆÉÂ§±ÊïàÁöÑÊó∂ÔºåÂá†‰πéÂèØ‰ª•Á´ãÂàªÈáçÊñ∞ÂêØÂä®„ÄÇÂ¶ÇÊûú Master Ëøõ Á®ãÊâÄÂú®ÁöÑÊú∫Âô®ÊàñËÄÖÁ£ÅÁõòÂ§±Êïà‰∫ÜÔºåÂ§Ñ‰∫é GFS Á≥ªÁªüÂ§ñÈÉ®ÁöÑÁõëÊéßËøõÁ®ã‰ºöÂú®ÂÖ∂ÂÆÉÁöÑÂ≠òÊúâÂÆåÊï¥Êìç‰ΩúÊó•ÂøóÁöÑÊú∫Âô®‰∏äÂêØÂä®‰∏Ä ‰∏™Êñ∞ÁöÑ Master ËøõÁ®ã„ÄÇÂÆ¢Êà∑Á´Ø‰ΩøÁî®ËßÑËåÉÁöÑÂêçÂ≠óËÆøÈóÆ Master(ÊØîÂ¶Ç gfs-test)ËäÇÁÇπÔºåËøô‰∏™ÂêçÂ≠óÁ±ª‰ºº DNS Âà´ÂêçÔºåÂõ† Ê≠§‰πüÂ∞±ÂèØ‰ª•Âú® Master ËøõÁ®ãËΩ¨Âà∞Âà´ÁöÑÊú∫Âô®‰∏äÊâßË°åÊó∂ÔºåÈÄöËøáÊõ¥ÊîπÂà´ÂêçÁöÑÂÆûÈôÖÊåáÂêëËÆøÈóÆÊñ∞ÁöÑ Master ËäÇÁÇπ„ÄÇ Ê≠§Â§ñÔºåGFS ‰∏≠ËøòÊúâ‰∫õ‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®ÔºåËøô‰∫õ‚ÄúÂΩ±Â≠ê‚ÄùÊúçÂä°Âô®Âú®‚Äú‰∏ª‚ÄùMaster ÊúçÂä°Âô®ÂÆïÊú∫ÁöÑÊó∂ÂÄôÊèê ‰æõÊñá‰ª∂Á≥ªÁªüÁöÑÂè™ËØªËÆøÈóÆ„ÄÇÂÆÉ‰ª¨ÊòØÂΩ±Â≠êÔºåËÄå‰∏çÊòØÈïúÂÉèÔºåÊâÄ‰ª•ÂÆÉ‰ª¨ÁöÑÊï∞ÊçÆÂèØËÉΩÊØî‚Äú‰∏ª‚ÄùMaster ÊúçÂä°Âô®Êõ¥Êñ∞Ë¶ÅÊÖ¢Ôºå ÈÄöÂ∏∏ÊòØ‰∏çÂà∞ 1 Áßí„ÄÇÂØπ‰∫éÈÇ£‰∫õ‰∏çÁªèÂ∏∏ÊîπÂèòÁöÑÊñá‰ª∂„ÄÅÊàñËÄÖÈÇ£‰∫õÂÖÅËÆ∏Ëé∑ÂèñÁöÑÊï∞ÊçÆÊúâÂ∞ëÈáèËøáÊúüÁöÑÂ∫îÁî®Á®ãÂ∫èÔºå‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®ËÉΩÂ§üÊèêÈ´òËØªÂèñÁöÑÊïàÁéá„ÄÇ‰∫ãÂÆû‰∏äÔºåÂõ†‰∏∫Êñá‰ª∂ÂÜÖÂÆπÊòØ‰ªé Chunk ÊúçÂä°Âô®‰∏äËØªÂèñÁöÑÔºåÂõ†Ê≠§ÔºåÂ∫îÁî®Á®ãÂ∫è‰∏ç ‰ºöÂèëÁé∞ËøáÊúüÁöÑÊñá‰ª∂ÂÜÖÂÆπ„ÄÇÂú®Ëøô‰∏™Áü≠ÊöÇÁöÑÊó∂Èó¥Á™óÂÜÖÔºåËøáÊúüÁöÑÂèØËÉΩÊòØÊñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆÔºåÊØîÂ¶ÇÁõÆÂΩïÁöÑÂÜÖÂÆπÊàñËÄÖËÆøÈóÆÊéßÂà∂‰ø°ÊÅØ„ÄÇ ‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®‰∏∫‰∫Ü‰øùÊåÅËá™Ë∫´Áä∂ÊÄÅÊòØÊúÄÊñ∞ÁöÑÔºåÂÆÉ‰ºöËØªÂèñ‰∏Ä‰ªΩÂΩìÂâçÊ≠£Âú®ËøõË°åÁöÑÊìç‰ΩúÁöÑÊó•ÂøóÂâØÊú¨ÔºåÂπ∂‰∏î‰æùÁÖßÂíå‰∏ª Master ÊúçÂä°Âô®ÂÆåÂÖ®Áõ∏ÂêåÁöÑÈ°∫Â∫èÊù•Êõ¥ÊîπÂÜÖÈÉ®ÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÂíå‰∏ª Master ÊúçÂä°Âô®‰∏ÄÊ†∑Ôºå‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®Âú®ÂêØÂä®ÁöÑÊó∂ÂÄô‰πü‰ºö‰ªé Chunk ÊúçÂä°Âô®ËΩÆËØ¢Êï∞ÊçÆ(‰πãÂêéÂÆöÊúüÊãâÊï∞ÊçÆ)ÔºåÊï∞ÊçÆ‰∏≠ÂåÖÊã¨‰∫Ü Chunk ÂâØÊú¨ÁöÑ‰ΩçÁΩÆ‰ø° ÊÅØ;‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®‰πü‰ºöÂÆöÊúüÂíå Chunk ÊúçÂä°Âô®‚ÄúÊè°Êâã‚ÄùÊù•Á°ÆÂÆöÂÆÉ‰ª¨ÁöÑÁä∂ÊÄÅ„ÄÇÂú®‰∏ª Master ÊúçÂä°Âô®Âõ†ÂàõÂª∫ ÂíåÂà†Èô§ÂâØÊú¨ÂØºËá¥ÂâØÊú¨‰ΩçÁΩÆ‰ø°ÊÅØÊõ¥Êñ∞Êó∂Ôºå‚ÄúÂΩ±Â≠ê‚ÄùMaster ÊúçÂä°Âô®ÊâçÂíå‰∏ª Master ÊúçÂä°Âô®ÈÄö‰ø°Êù•Êõ¥Êñ∞Ëá™Ë∫´Áä∂ÊÄÅ„ÄÇ Êï∞ÊçÆÂÆåÊï¥ÊÄßÊØè‰∏™ Chunk ÊúçÂä°Âô®ÈÉΩ‰ΩøÁî® Checksum Êù•Ê£ÄÊü•‰øùÂ≠òÁöÑÊï∞ÊçÆÊòØÂê¶ÊçüÂùè„ÄÇËÄÉËôëÂà∞‰∏Ä‰∏™ GFS ÈõÜÁæ§ÈÄöÂ∏∏ÈÉΩÊúâÂ•ΩÂá†Áôæ Âè∞Êú∫Âô®„ÄÅÂá†ÂçÉÂùóÁ°¨ÁõòÔºåÁ£ÅÁõòÊçüÂùèÂØºËá¥Êï∞ÊçÆÂú®ËØªÂÜôËøáÁ®ã‰∏≠ÊçüÂùèÊàñËÄÖ‰∏¢Â§±ÊòØÈùûÂ∏∏Â∏∏ËßÅÁöÑ(Á¨¨ 7 ËäÇËÆ≤‰∫Ü‰∏Ä‰∏™ÂéüÂõ†)„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂà´ÁöÑ Chunk ÂâØÊú¨Êù•Ëß£ÂÜ≥Êï∞ÊçÆÊçüÂùèÈóÆÈ¢òÔºå‰ΩÜÊòØË∑®Ë∂ä Chunk ÊúçÂä°Âô®ÊØîËæÉÂâØÊú¨Êù•Ê£ÄÊü•Êï∞ÊçÆÊòØÂê¶ÊçüÂùèÂæà ‰∏çÂÆûÈôÖ„ÄÇÂè¶Â§ñÔºåGFS ÂÖÅËÆ∏ÊúâÊ≠ß‰πâÁöÑÂâØÊú¨Â≠òÂú®:GFS ‰øÆÊîπÊìç‰ΩúÁöÑËØ≠‰πâÔºåÁâπÂà´ÊòØÊó©ÂÖàËÆ®ËÆ∫ËøáÁöÑÂéüÂ≠êÁ∫™ÂΩïËøΩÂä†ÁöÑÊìç ‰ΩúÔºåÂπ∂‰∏ç‰øùËØÅÂâØÊú¨ÂÆåÂÖ®Áõ∏Âêå(alex Ê≥®:ÂâØÊú¨‰∏çÊòØ byte-wise ÂÆåÂÖ®‰∏ÄËá¥ÁöÑ)„ÄÇÂõ†Ê≠§ÔºåÊØè‰∏™ Chunk ÊúçÂä°Âô®ÂøÖÈ°ªÁã¨Á´ãÁª¥ Êä§ Checksum Êù•Ê†°È™åËá™Â∑±ÁöÑÂâØÊú¨ÁöÑÂÆåÊï¥ÊÄß„ÄÇ Êàë‰ª¨ÊääÊØè‰∏™ Chunk ÈÉΩÂàÜÊàê 64KB Â§ßÂ∞èÁöÑÂùó„ÄÇÊØè‰∏™ÂùóÈÉΩÂØπÂ∫î‰∏Ä‰∏™ 32 ‰ΩçÁöÑ Checksum„ÄÇÂíåÂÖ∂ÂÆÉÂÖÉÊï∞ÊçÆ‰∏ÄÊ†∑Ôºå Checksum ‰∏éÂÖ∂ÂÆÉÁöÑÁî®Êà∑Êï∞ÊçÆÊòØÂàÜÂºÄÁöÑÔºåÂπ∂‰∏î‰øùÂ≠òÂú®ÂÜÖÂ≠òÂíåÁ°¨Áõò‰∏äÔºåÂêåÊó∂‰πüËÆ∞ÂΩïÊìç‰ΩúÊó•Âøó„ÄÇÂØπ‰∫éËØªÊìç‰ΩúÊù•ËØ¥ÔºåÂú®ÊääÊï∞ÊçÆËøîÂõûÁªôÂÆ¢Êà∑Á´ØÊàñËÄÖÂÖ∂ÂÆÉÁöÑ Chunk ÊúçÂä°Âô®‰πãÂâçÔºåChunk ÊúçÂä°Âô®‰ºöÊ†°È™åËØªÂèñÊìç‰Ωú Ê∂âÂèäÁöÑËåÉÂõ¥ÂÜÖÁöÑÂùóÁöÑ Checksum„ÄÇÂõ†Ê≠§ Chunk ÊúçÂä°Âô®‰∏ç‰ºöÊääÈîôËØØÊï∞ÊçÆ‰º†ÈÄíÂà∞ÂÖ∂ÂÆÉÁöÑÊú∫Âô®‰∏ä„ÄÇÂ¶ÇÊûúÂèëÁîüÊüê‰∏™ÂùóÁöÑ Checksum ‰∏çÊ≠£Á°ÆÔºåChunk ÊúçÂä°Âô®ËøîÂõûÁªôËØ∑Ê±ÇËÄÖ‰∏Ä‰∏™ÈîôËØØ‰ø°ÊÅØÔºåÂπ∂‰∏îÈÄöÁü• Master ÊúçÂä°Âô®Ëøô‰∏™ÈîôËØØ„ÄÇ‰Ωú‰∏∫ÂõûÂ∫îÔºå ËØ∑Ê±ÇËÄÖÂ∫îÂΩì‰ªéÂÖ∂ÂÆÉÂâØÊú¨ËØªÂèñÊï∞ÊçÆÔºåMaster ÊúçÂä°Âô®‰πü‰ºö‰ªéÂÖ∂ÂÆÉÂâØÊú¨ÂÖãÈöÜÊï∞ÊçÆËøõË°åÊÅ¢Â§ç„ÄÇÂΩì‰∏Ä‰∏™Êñ∞ÁöÑÂâØÊú¨Â∞±Áª™ÂêéÔºå Master ÊúçÂä°Âô®ÈÄöÁü•ÂâØÊú¨ÈîôËØØÁöÑ Chunk ÊúçÂä°Âô®Âà†ÊéâÈîôËØØÁöÑÂâØÊú¨„ÄÇ Checksum ÂØπËØªÊìç‰ΩúÁöÑÊÄßËÉΩÂΩ±ÂìçÂæàÂ∞èÔºåÂèØ‰ª•Âü∫‰∫éÂá†‰∏™ÂéüÂõ†Êù•ÂàÜÊûê‰∏Ä‰∏ã„ÄÇÂõ†‰∏∫Â§ßÈÉ®ÂàÜÁöÑËØªÊìç‰ΩúÈÉΩËá≥Â∞ëË¶ÅËØªÂèñ Âá†‰∏™ÂùóÔºåËÄåÊàë‰ª¨Âè™ÈúÄË¶ÅËØªÂèñ‰∏ÄÂ∞èÈÉ®ÂàÜÈ¢ùÂ§ñÁöÑÁõ∏ÂÖ≥Êï∞ÊçÆËøõË°åÊ†°È™å„ÄÇGFS ÂÆ¢Êà∑Á´Ø‰ª£Á†ÅÈÄöËøáÊØèÊ¨°ÊääËØªÂèñÊìç‰ΩúÈÉΩÂØπÈΩê Âú® Checksum block ÁöÑËæπÁïå‰∏äÔºåËøõ‰∏ÄÊ≠•ÂáèÂ∞ë‰∫ÜËøô‰∫õÈ¢ùÂ§ñÁöÑËØªÂèñÊìç‰ΩúÁöÑË¥üÈù¢ÂΩ±Âìç„ÄÇÂè¶Â§ñÔºåÂú® Chunk ÊúçÂä°Âô®‰∏äÔºå Checksum ÁöÑÊü•ÊâæÂíåÊØîËæÉ‰∏çÈúÄË¶Å I/O Êìç‰ΩúÔºåChecksum ÁöÑËÆ°ÁÆóÂèØ‰ª•Âíå I/O Êìç‰ΩúÂêåÊó∂ËøõË°å„ÄÇ Checksum ÁöÑËÆ°ÁÆóÈíàÂØπÂú® Chunk Â∞æÈÉ®ÁöÑËøΩÂä†ÂÜôÂÖ•Êìç‰ΩúÂÅö‰∫ÜÈ´òÂ∫¶‰ºòÂåñ(‰∏é‰πãÂØπÂ∫îÁöÑÊòØË¶ÜÁõñÁé∞ÊúâÊï∞ÊçÆÁöÑÂÜôÂÖ•Êìç ‰Ωú)ÔºåÂõ†‰∏∫ËøôÁ±ªÊìç‰ΩúÂú®Êàë‰ª¨ÁöÑÂ∑•‰Ωú‰∏≠Âç†‰∫ÜÂæàÂ§ßÊØî‰æã„ÄÇÊàë‰ª¨Âè™Â¢ûÈáèÊõ¥Êñ∞ÊúÄÂêé‰∏Ä‰∏™‰∏çÂÆåÊï¥ÁöÑÂùóÁöÑ ChecksumÔºåÂπ∂‰∏î Áî®ÊâÄÊúâÁöÑËøΩÂä†Êù•ÁöÑÊñ∞ Checksum ÂùóÊù•ËÆ°ÁÆóÊñ∞ÁöÑ Checksum„ÄÇÂç≥‰ΩøÊòØÊúÄÂêé‰∏Ä‰∏™‰∏çÂÆåÊï¥ÁöÑ Checksum ÂùóÂ∑≤ÁªèÊçüÂùè‰∫ÜÔºå‰∏îÊàë‰ª¨‰∏çËÉΩÂ§üÈ©¨‰∏äÊ£ÄÊü•Âá∫Êù•ÔºåÁî±‰∫éÊñ∞ÁöÑ Checksum ÂíåÂ∑≤ÊúâÊï∞ÊçÆ‰∏çÂêªÂêàÔºåÂú®‰∏ãÊ¨°ÂØπËøô‰∏™ÂùóËøõË°åËØªÂèñÊìç‰ΩúÁöÑÊó∂ÂÄôÔºå‰ºöÊ£ÄÊü•Âá∫Êï∞ÊçÆÂ∑≤ÁªèÊçüÂùè‰∫Ü„ÄÇ Áõ∏ÊØî‰πã‰∏ãÔºåÂ¶ÇÊûúÂÜôÊìç‰ΩúË¶ÜÁõñÂ∑≤ÁªèÂ≠òÂú®ÁöÑ‰∏Ä‰∏™ËåÉÂõ¥ÂÜÖÁöÑ ChunkÔºåÊàë‰ª¨ÂøÖÈ°ªËØªÂèñÂíåÊ†°È™åË¢´Ë¶ÜÁõñÁöÑÁ¨¨‰∏Ä‰∏™ÂíåÊúÄÂêé‰∏Ä‰∏™ÂùóÔºåÁÑ∂ÂêéÂÜçÊâßË°åÂÜôÊìç‰Ωú;Êìç‰ΩúÂÆåÊàê‰πãÂêéÂÜçÈáçÊñ∞ËÆ°ÁÆóÂíåÂÜôÂÖ•Êñ∞ÁöÑ Checksum„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰∏çÊ†°È™åÁ¨¨‰∏Ä‰∏™ÂíåÊúÄ Âêé‰∏Ä‰∏™Ë¢´ÂÜôÁöÑÂùóÔºåÈÇ£‰πàÊñ∞ÁöÑ Checksum ÂèØËÉΩ‰ºöÈöêËóèÊ≤°ÊúâË¢´Ë¶ÜÁõñÂå∫ÂüüÂÜÖÁöÑÊï∞ÊçÆÈîôËØØ„ÄÇ Âú® Chunk ÊúçÂä°Âô®Á©∫Èó≤ÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöÊâ´ÊèèÂíåÊ†°È™åÊØè‰∏™‰∏çÊ¥ªÂä®ÁöÑ Chunk ÁöÑÂÜÖÂÆπ„ÄÇËøô‰ΩøÂæóÊàë‰ª¨ËÉΩÂ§üÂèëÁé∞ÂæàÂ∞ëË¢´ ËØªÂèñÁöÑ Chunk ÊòØÂê¶ÂÆåÊï¥„ÄÇ‰∏ÄÊó¶ÂèëÁé∞Êúâ Chunk ÁöÑÊï∞ÊçÆÊçüÂùèÔºåMaster ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ„ÄÅÊ≠£Á°ÆÁöÑÂâØÊú¨ÔºåÁÑ∂ÂêéÊääÊçü ÂùèÁöÑÂâØÊú¨Âà†Èô§Êéâ„ÄÇËøô‰∏™Êú∫Âà∂‰πüÈÅøÂÖç‰∫ÜÈùûÊ¥ªÂä®ÁöÑ„ÄÅÂ∑≤ÊçüÂùèÁöÑ Chunk Ê¨∫È™ó Master ËäÇÁÇπÔºå‰Ωø Master ËäÇÁÇπËÆ§‰∏∫ÂÆÉ‰ª¨Â∑≤ ÁªèÊúâ‰∫ÜË∂≥Â§üÂ§öÁöÑÂâØÊú¨‰∫Ü„ÄÇ ËØäÊñ≠Â∑•ÂÖ∑ËØ¶Â∞ΩÁöÑ„ÄÅÊ∑±ÂÖ•ÁªÜËäÇÁöÑËØäÊñ≠Êó•ÂøóÔºåÂú®ÈóÆÈ¢òÈöîÁ¶ª„ÄÅË∞ÉËØï„ÄÅ‰ª•ÂèäÊÄßËÉΩÂàÜÊûêÁ≠âÊñπÈù¢ÁªôÊàë‰ª¨Â∏¶Êù•Êó†Ê≥ï‰º∞ÈáèÁöÑÂ∏ÆÂä©Ôºå ÂêåÊó∂‰πüÂè™ÈúÄË¶ÅÂæàÂ∞èÁöÑÂºÄÈîÄ„ÄÇÊ≤°ÊúâÊó•ÂøóÁöÑÂ∏ÆÂä©ÔºåÊàë‰ª¨ÂæàÈöæÁêÜËß£Áü≠ÊöÇÁöÑ„ÄÅ‰∏çÈáçÂ§çÁöÑÊú∫Âô®‰πãÈó¥ÁöÑÊ∂àÊÅØ‰∫§‰∫í„ÄÇGFS ÁöÑ ÊúçÂä°Âô®‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑÊó•ÂøóÔºåËÆ∞ÂΩï‰∫ÜÂ§ßÈáèÂÖ≥ÈîÆÁöÑ‰∫ã‰ª∂(ÊØîÂ¶ÇÔºåChunk ÊúçÂä°Âô®ÂêØÂä®ÂíåÂÖ≥Èó≠)‰ª•ÂèäÊâÄÊúâÁöÑ RPC ÁöÑËØ∑ Ê±ÇÂíåÂõûÂ§ç„ÄÇËøô‰∫õËØäÊñ≠Êó•ÂøóÂèØ‰ª•ÈöèÊÑèÂà†Èô§ÔºåÂØπÁ≥ªÁªüÁöÑÊ≠£Á°ÆËøêË°å‰∏çÈÄ†Êàê‰ªª‰ΩïÂΩ±Âìç„ÄÇÁÑ∂ËÄåÔºåÊàë‰ª¨Âú®Â≠òÂÇ®Á©∫Èó¥ÂÖÅËÆ∏ÁöÑ ÊÉÖÂÜµ‰∏ã‰ºöÂ∞ΩÈáèÁöÑ‰øùÂ≠òËøô‰∫õÊó•Âøó„ÄÇ RPC Êó•ÂøóÂåÖÂê´‰∫ÜÁΩëÁªú‰∏äÂèëÁîüÁöÑÊâÄÊúâËØ∑Ê±ÇÂíåÂìçÂ∫îÁöÑËØ¶ÁªÜËÆ∞ÂΩïÔºå‰ΩÜÊòØ‰∏çÂåÖÊã¨ËØªÂÜôÁöÑÊñá‰ª∂Êï∞ÊçÆ„ÄÇÈÄöËøáÂåπÈÖçËØ∑Ê±Ç ‰∏éÂõûÂ∫îÔºå‰ª•ÂèäÊî∂ÈõÜ‰∏çÂêåÊú∫Âô®‰∏äÁöÑ RPC Êó•ÂøóËÆ∞ÂΩïÔºåÊàë‰ª¨ÂèØ‰ª•ÈáçÊºîÊâÄÊúâÁöÑÊ∂àÊÅØ‰∫§‰∫íÊù•ËØäÊñ≠ÈóÆÈ¢ò„ÄÇÊó•ÂøóËøòÁî®Êù•Ë∑üË∏™ Ë¥üËΩΩÊµãËØïÂíåÊÄßËÉΩÂàÜÊûê„ÄÇ Êó•ÂøóÂØπÊÄßËÉΩÁöÑÂΩ±ÂìçÂæàÂ∞è(ËøúÂ∞è‰∫éÂÆÉÂ∏¶Êù•ÁöÑÂ•ΩÂ§Ñ)ÔºåÂõ†‰∏∫Ëøô‰∫õÊó•ÂøóÁöÑÂÜôÂÖ•ÊñπÂºèÊòØÈ°∫Â∫èÁöÑ„ÄÅÂºÇÊ≠•ÁöÑ„ÄÇÊúÄËøëÂèëÁîü ÁöÑ‰∫ã‰ª∂Êó•Âøó‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂèØÁî®‰∫éÊåÅÁª≠‰∏çÊñ≠ÁöÑÂú®Á∫øÁõëÊéß„ÄÇ Â∫¶ÈáèÊú¨ËäÇ‰∏≠ÔºåÊàë‰ª¨Â∞Ü‰ΩøÁî®‰∏Ä‰∫õÂ∞èËßÑÊ®°Âü∫ÂáÜÊµãËØïÊù•Â±ïÁé∞ GFS Á≥ªÁªüÊû∂ÊûÑÂíåÂÆûÁé∞‰∏äÁöÑ‰∏Ä‰∫õÂõ∫ÊúâÁì∂È¢àÔºåËøòÊúâ‰∫õÊù•Ëá™Google ÂÜÖÈÉ®‰ΩøÁî®ÁöÑÁúüÂÆûÁöÑ GFS ÈõÜÁæ§ÁöÑÂü∫ÂáÜÊï∞ÊçÆ„ÄÇ Â∞èËßÑÊ®°Âü∫ÂáÜÊµãËØïÊàë‰ª¨Âú®‰∏Ä‰∏™ÂåÖÂê´ 1 Âè∞ Master ÊúçÂä°Âô®Ôºå2 Âè∞ Master ÊúçÂä°Âô®Â§çÂà∂ËäÇÁÇπÔºå16 Âè∞ Chunk ÊúçÂä°Âô®Âíå 16 ‰∏™ÂÆ¢Êà∑Êú∫ÁªÑ ÊàêÁöÑ GFS ÈõÜÁæ§‰∏äÊµãÈáèÊÄßËÉΩ„ÄÇÊ≥®ÊÑèÔºåÈááÁî®ËøôÊ†∑ÁöÑÈõÜÁæ§ÈÖçÁΩÆÊñπÊ°àÂè™ÊòØ‰∏∫‰∫ÜÊòì‰∫éÊµãËØï„ÄÇÂÖ∏ÂûãÁöÑ GFS ÈõÜÁæ§ÊúâÊï∞Áôæ‰∏™ Chunk ÊúçÂä°Âô®ÂíåÊï∞Áôæ‰∏™ÂÆ¢Êà∑Êú∫„ÄÇ ÊâÄÊúâÊú∫Âô®ÁöÑÈÖçÁΩÆÈÉΩ‰∏ÄÊ†∑:‰∏§‰∏™ PIII 1.4GHz Â§ÑÁêÜÂô®Ôºå2GB ÂÜÖÂ≠òÔºå‰∏§‰∏™ 80G/5400rpm ÁöÑÁ°¨ÁõòÔºå‰ª•Âèä 100Mbps ÂÖ®ÂèåÂ∑•‰ª•Â§™ÁΩëËøûÊé•Âà∞‰∏Ä‰∏™ HP2524 ‰∫§Êç¢Êú∫„ÄÇGFS ÈõÜÁæ§‰∏≠ÊâÄÊúâÁöÑ 19 Âè∞ÊúçÂä°Âô®ÈÉΩËøûÊé•Âú®‰∏Ä‰∏™‰∫§Êç¢Êú∫ÔºåÊâÄÊúâ 16 Âè∞ÂÆ¢Êà∑Êú∫ËøûÊé•Âà∞Âè¶‰∏Ä‰∏™‰∫§Êç¢Êú∫‰∏ä„ÄÇ‰∏§‰∏™‰∫§Êç¢Êú∫‰πãÈó¥‰ΩøÁî® 1Gbps ÁöÑÁ∫øË∑ØËøûÊé•„ÄÇ ËØªÂèñN ‰∏™ÂÆ¢Êà∑Êú∫‰ªé GFS Êñá‰ª∂Á≥ªÁªüÂêåÊ≠•ËØªÂèñÊï∞ÊçÆ„ÄÇÊØè‰∏™ÂÆ¢Êà∑Êú∫‰ªé 320GB ÁöÑÊñá‰ª∂ÈõÜÂêà‰∏≠ÈöèÊú∫ËØªÂèñ 4MB region ÁöÑ ÂÜÖÂÆπ„ÄÇËØªÂèñÊìç‰ΩúÈáçÂ§çÊâßË°å 256 Ê¨°ÔºåÂõ†Ê≠§ÔºåÊØè‰∏™ÂÆ¢Êà∑Êú∫ÊúÄÁªàÈÉΩËØªÂèñ 1GB ÁöÑÊï∞ÊçÆ„ÄÇÊâÄÊúâÁöÑ Chunk ÊúçÂä°Âô®Âä†Ëµ∑Êù•ÊÄª ÂÖ±Âè™Êúâ 32GB ÁöÑÂÜÖÂ≠òÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨È¢ÑÊúüÂè™ÊúâÊúÄÂ§ö 10%ÁöÑËØªÂèñËØ∑Ê±ÇÂëΩ‰∏≠ Linux ÁöÑÊñá‰ª∂Á≥ªÁªüÁºìÂÜ≤„ÄÇÊàë‰ª¨ÁöÑÊµãËØïÁªì ÊûúÂ∫îËØ•Âíå‰∏Ä‰∏™Âú®Ê≤°ÊúâÊñá‰ª∂Á≥ªÁªüÁºìÂ≠òÁöÑÊÉÖÂÜµ‰∏ãËØªÂèñÊµãËØïÁöÑÁªìÊûúÊé•Ëøë„ÄÇ‰∏äËæπÁöÑÊõ≤Á∫øÊòæÁ§∫‰∫ÜÊàë‰ª¨ÁΩëÁªúÊãìÊâë‰∏ãÁöÑÂêàËÆ°ÁêÜËÆ∫ÂêûÂêêÈáè‰∏äÈôê„ÄÇ‰∏ãËæπÁöÑÊõ≤Á∫øÊòæÁ§∫‰∫ÜËßÇÊµãÂà∞ÁöÑÂêûÂêêÈáè„ÄÇËøô‰∏™Êõ≤Á∫øÊúâÁùÄ 95%ÁöÑÂèØÈù†ÊÄßÔºåÂõ†‰∏∫ÊúâÊó∂ÂÄôÊµãÈáè‰ºö‰∏çÂ§üÁ≤æÁ°Æ„ÄÇ Âõæ 3(a)ÊòæÁ§∫‰∫Ü N ‰∏™ÂÆ¢Êà∑Êú∫Êï¥‰ΩìÁöÑËØªÂèñÈÄüÂ∫¶‰ª•ÂèäËøô‰∏™ÈÄüÂ∫¶ÁöÑÁêÜËÆ∫ÊûÅÈôê„ÄÇÂΩìËøûÊé•‰∏§‰∏™‰∫§Êç¢Êú∫ÁöÑ 1Gbps ÁöÑÈìæË∑ØÈ•±ÂíåÊó∂ÔºåÊï¥‰ΩìËØªÂèñÈÄüÂ∫¶ËææÂà∞ÁêÜËÆ∫ÁöÑÊûÅÈôêÂÄºÊòØ 125MB/SÔºåÊàñËÄÖËØ¥ÊØè‰∏™ÂÆ¢Êà∑Êú∫ÈÖçÁΩÆÁöÑ 100Mbps ÁΩëÂç°ËææÂà∞È•±ÂíåÊó∂Ôºå ÊØè‰∏™ÂÆ¢Êà∑Êú∫ËØªÂèñÈÄüÂ∫¶ÁöÑÁêÜËÆ∫ÊûÅÈôêÂÄºÊòØ 12.5MB/s„ÄÇÂÆûÊµãÁªìÊûúÊòØÔºåÂΩì‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ËØªÂèñÁöÑÊó∂ÂÄôÔºåËØªÂèñÁöÑÈÄüÂ∫¶ÊòØ 10MB/sÔºå ‰πüÂ∞±ÊòØËØ¥ËææÂà∞ÂÆ¢Êà∑Êú∫ÁêÜËÆ∫ËØªÂèñÈÄüÂ∫¶ÊûÅÈôêÂÄºÁöÑ 80%„ÄÇÂØπ‰∫é 16 ‰∏™ÂÆ¢Êà∑Êú∫ÔºåÊï¥‰ΩìÁöÑËØªÂèñÈÄüÂ∫¶ËææÂà∞‰∫Ü 94MB/sÔºåÂ§ßÁ∫¶ ÊòØÁêÜËÆ∫Êï¥‰ΩìËØªÂèñÈÄüÂ∫¶ÊûÅÈôêÂÄºÁöÑ 75%Ôºå‰πüÂ∞±ÊòØËØ¥ÊØè‰∏™ÂÆ¢Êà∑Êú∫ÁöÑËØªÂèñÈÄüÂ∫¶ÊòØ 6MB/s„ÄÇËØªÂèñÊïàÁéá‰ªé 80%Èôç‰ΩéÂà∞‰∫Ü 75%Ôºå ‰∏ªË¶ÅÁöÑÂéüÂõ†ÊòØÂΩìËØªÂèñÁöÑÂÆ¢Êà∑Êú∫Â¢ûÂä†Êó∂ÔºåÂ§ö‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂ËØªÂèñ‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®ÁöÑÂá†Áéá‰πüÂ¢ûÂä†‰∫ÜÔºåÂØºËá¥Êï¥‰ΩìÁöÑ ËØªÂèñÊïàÁéá‰∏ãÈôç„ÄÇ ÂÜôÂÖ•N ‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂Âêë N ‰∏™‰∏çÂêåÁöÑÊñá‰ª∂‰∏≠ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇÊØè‰∏™ÂÆ¢Êà∑Êú∫‰ª•ÊØèÊ¨° 1MB ÁöÑÈÄüÂ∫¶ËøûÁª≠ÂÜôÂÖ• 1GB ÁöÑÊï∞ÊçÆ„ÄÇ Âõæ 3(b)ÊòæÁ§∫‰∫ÜÊï¥‰ΩìÁöÑÂÜôÂÖ•ÈÄüÂ∫¶ÂíåÂÆÉ‰ª¨ÁêÜËÆ∫‰∏äÁöÑÊûÅÈôêÂÄº„ÄÇÁêÜËÆ∫‰∏äÁöÑÊûÅÈôêÂÄºÊòØ 67MB/sÔºåÂõ†‰∏∫Êàë‰ª¨ÈúÄË¶ÅÊääÊØè‰∏Ä byte ÂÜôÂÖ•Âà∞ 16 ‰∏™ Chunk ÊúçÂä°Âô®‰∏≠ÁöÑ 3 ‰∏™‰∏äÔºåËÄåÊØè‰∏™ Chunk ÊúçÂä°Âô®ÁöÑËæìÂÖ•ËøûÊé•ÈÄüÂ∫¶ÊòØ 12.5MB/s„ÄÇ ‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ÁöÑÂÜôÂÖ•ÈÄüÂ∫¶ÊòØ 6.3MBÔºåÂ§ßÊ¶ÇÊòØÁêÜËÆ∫ÊûÅÈôêÂÄºÁöÑ‰∏ÄÂçä„ÄÇÂØºËá¥Ëøô‰∏™ÁªìÊûúÁöÑ‰∏ªË¶ÅÂéüÂõ†ÊòØÊàë‰ª¨ÁöÑÁΩëÁªúÂçè ËÆÆÊ†à„ÄÇÂÆÉ‰∏éÊàë‰ª¨Êé®ÈÄÅÊï∞ÊçÆÂà∞ Chunk ÊúçÂä°Âô®Êó∂ÈááÁî®ÁöÑÁÆ°ÈÅìÊ®°Âºè‰∏çÁõ∏ÈÄÇÂ∫î„ÄÇ‰ªé‰∏Ä‰∏™ÂâØÊú¨Âà∞Âè¶‰∏Ä‰∏™ÂâØÊú¨ÁöÑÊï∞ÊçÆ‰º†ËæìÂª∂ËøüÈôç‰Ωé‰∫ÜÊï¥‰∏™ÁöÑÂÜôÂÖ•ÈÄüÂ∫¶„ÄÇ 16 ‰∏™ÂÆ¢Êà∑Êú∫Êï¥‰ΩìÁöÑÂÜôÂÖ•ÈÄüÂ∫¶ËææÂà∞‰∫Ü 35MB/s(Âç≥ÊØè‰∏™ÂÆ¢Êà∑Êú∫ 2.2MB/s)ÔºåÂ§ßÁ∫¶Âè™ÊòØÁêÜËÆ∫ÊûÅÈôêÂÄºÁöÑ‰∏ÄÂçä„ÄÇÂíåÂ§ö‰∏™ÂÆ¢Êà∑Êú∫ËØªÂèñÁöÑÊÉÖÂΩ¢ÂæàÁ±ªÂûãÔºåÈöèÁùÄÂÆ¢Êà∑Êú∫Êï∞ÈáèÁöÑÂ¢ûÂä†ÔºåÂ§ö‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂ÂÜôÂÖ•Âêå‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®ÁöÑÂá†Áéá‰πü Â¢ûÂä†‰∫Ü„ÄÇËÄå‰∏îÔºå16 ‰∏™ÂÆ¢Êà∑Êú∫Âπ∂Ë°åÂÜôÂÖ•ÂèØËÉΩÂºïËµ∑ÁöÑÂÜ≤Á™ÅÊØî 16 ‰∏™ÂÆ¢Êà∑Êú∫Âπ∂Ë°åËØªÂèñË¶ÅÂ§ßÂæóÂ§öÔºåÂõ†‰∏∫ÊØè‰∏™ÂÜôÂÖ•ÈÉΩ‰ºö Ê∂âÂèä‰∏â‰∏™‰∏çÂêåÁöÑÂâØÊú¨„ÄÇ ÂÜôÂÖ•ÁöÑÈÄüÂ∫¶ÊØîÊàë‰ª¨ÊÉ≥Ë±°ÁöÑË¶ÅÊÖ¢„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøôÊ≤°ÊúâÊàê‰∏∫Êàë‰ª¨ÁöÑ‰∏ªË¶ÅÈóÆÈ¢òÔºåÂõ†‰∏∫Âç≥‰ΩøÂú®Âçï‰∏™ÂÆ¢Êà∑Êú∫‰∏ä ËÉΩÂ§üÊÑüÂèóÂà∞Âª∂Êó∂ÔºåÂÆÉ‰πü‰∏ç‰ºöÂú®ÊúâÂ§ßÈáèÂÆ¢Êà∑Êú∫ÁöÑÊó∂ÂÄôÂØπÊï¥‰ΩìÁöÑÂÜôÂÖ•Â∏¶ÂÆΩÈÄ†ÊàêÊòæËëóÁöÑÂΩ±Âìç„ÄÇ ËÆ∞ÂΩïËøΩÂä†Âõæ 3(c)ÊòæÁ§∫‰∫ÜËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÁöÑÊÄßËÉΩ„ÄÇN ‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂ËøΩÂä†Êï∞ÊçÆÂà∞‰∏Ä‰∏™Êñá‰ª∂„ÄÇËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÁöÑÊÄßËÉΩÂèóÈôê ‰∫é‰øùÂ≠òÊñá‰ª∂ÊúÄÂêé‰∏Ä‰∏™ Chunk ÁöÑ Chunk ÊúçÂä°Âô®ÁöÑÂ∏¶ÂÆΩÔºåËÄå‰∏éÂÆ¢Êà∑Êú∫ÁöÑÊï∞ÈáèÊó†ÂÖ≥„ÄÇËÆ∞ÂΩïËøΩÂä†ÁöÑÈÄüÂ∫¶Áî±‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ ÁöÑ 6.0MB/s ÂºÄÂßãÔºå‰∏ãÈôçÂà∞ 16 ‰∏™ÂÆ¢Êà∑Êú∫ÁöÑ 4.8MB/s ‰∏∫Ê≠¢ÔºåÈÄüÂ∫¶ÁöÑ‰∏ãÈôç‰∏ªË¶ÅÊòØÁî±‰∫é‰∏çÂêåÂÆ¢Êà∑Á´ØÁöÑÁΩëÁªúÊã•Â°û‰ª•ÂèäÁΩë Áªú‰º†ËæìÈÄüÂ∫¶ÁöÑ‰∏çÂêåËÄåÂØºËá¥ÁöÑ„ÄÇ Êàë‰ª¨ÁöÑÁ®ãÂ∫èÂÄæÂêë‰∫éÂêåÊó∂Â§ÑÁêÜÂ§ö‰∏™ËøôÊ†∑ÁöÑÊñá‰ª∂„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂç≥ N ‰∏™ÂÆ¢Êà∑Êú∫ÂêåÊó∂ËøΩÂä†Êï∞ÊçÆÂà∞ M ‰∏™ÂÖ±‰∫´Êñá‰ª∂‰∏≠Ôºå ËøôÈáå N Âíå M ÈÉΩÊòØÊï∞ÂçÅÊàñËÄÖÊï∞Áôæ‰ª•‰∏ä„ÄÇÊâÄ‰ª•ÔºåÂú®Êàë‰ª¨ÁöÑÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåChunk ÊúçÂä°Âô®ÁöÑÁΩëÁªúÊã•Â°ûÂπ∂Ê≤°ÊúâÊàê‰∏∫‰∏Ä‰∏™ ‰∏•ÈáçÈóÆÈ¢òÔºåÂ¶ÇÊûú Chunk ÊúçÂä°Âô®ÁöÑÊüê‰∏™Êñá‰ª∂Ê≠£Âú®ÂÜôÂÖ•ÔºåÂÆ¢Êà∑Êú∫‰ºöÂéªÂÜôÂè¶Â§ñ‰∏Ä‰∏™Êñá‰ª∂„ÄÇ ÂÆûÈôÖÂ∫îÁî®‰∏≠ÁöÑÈõÜÁæ§Êàë‰ª¨Áé∞Âú®Êù•‰ªîÁªÜËØÑ‰º∞‰∏Ä‰∏ã Google ÂÜÖÈÉ®Ê≠£Âú®‰ΩøÁî®ÁöÑ‰∏§‰∏™ÈõÜÁæ§ÔºåÂÆÉ‰ª¨ÂÖ∑Êúâ‰∏ÄÂÆöÁöÑ‰ª£Ë°®ÊÄß„ÄÇÈõÜÁæ§ A ÈÄöÂ∏∏Ë¢´‰∏äÁôæ ‰∏™Â∑•Á®ãÂ∏àÁî®‰∫éÁ†îÁ©∂ÂíåÂºÄÂèë„ÄÇÂÖ∏ÂûãÁöÑ‰ªªÂä°ÊòØË¢´‰∫∫Â∑•ÂàùÂßãÂåñÂêéËøûÁª≠ËøêË°åÊï∞‰∏™Â∞èÊó∂„ÄÇÂÆÉÈÄöÂ∏∏ËØªÂèñÊï∞ MB Âà∞Êï∞ TB ÁöÑ Êï∞ÊçÆÔºå‰πãÂêéËøõË°åËΩ¨ÂåñÊàñËÄÖÂàÜÊûêÔºåÊúÄÂêéÊääÁªìÊûúÂÜôÂõûÂà∞ÈõÜÁæ§‰∏≠„ÄÇÈõÜÁæ§ B ‰∏ªË¶ÅÁî®‰∫éÂ§ÑÁêÜÂΩìÂâçÁöÑÁîü‰∫ßÊï∞ÊçÆ„ÄÇÈõÜÁæ§ B ÁöÑ ‰ªªÂä°ÊåÅÁª≠ÁöÑÊó∂Èó¥Êõ¥ÈïøÔºåÂú®ÂæàÂ∞ë‰∫∫Â∑•Âπ≤È¢ÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÊåÅÁª≠ÁöÑÁîüÊàêÂíåÂ§ÑÁêÜÊï∞ TB ÁöÑÊï∞ÊçÆÈõÜ„ÄÇÂú®Ëøô‰∏§‰∏™Ê°à‰æã‰∏≠Ôºå‰∏Ä ‰∏™ÂçïÁã¨ÁöÑ‚Äú‰ªªÂä°‚ÄùÈÉΩÊòØÊåáËøêË°åÂú®Â§ö‰∏™Êú∫Âô®‰∏äÁöÑÂ§ö‰∏™ËøõÁ®ãÔºåÂÆÉ‰ª¨ÂêåÊó∂ËØªÂèñÂíåÂÜôÂÖ•Â§ö‰∏™Êñá‰ª∂„ÄÇ Â≠òÂÇ®Â¶Ç‰∏äË°®Ââç‰∫îË°åÊâÄÊèèËø∞ÁöÑÔºå‰∏§‰∏™ÈõÜÁæ§ÈÉΩÁî±‰∏äÁôæÂè∞ Chunk ÊúçÂä°Âô®ÁªÑÊàêÔºåÊîØÊåÅÊï∞ TB ÁöÑÁ°¨ÁõòÁ©∫Èó¥;‰∏§‰∏™ÈõÜÁæ§ËôΩ ÁÑ∂ÈÉΩÂ≠òÂÇ®‰∫ÜÂ§ßÈáèÁöÑÊï∞ÊçÆÔºå‰ΩÜÊòØËøòÊúâÂâ©‰ΩôÁöÑÁ©∫Èó¥„ÄÇ‚ÄúÂ∑≤Áî®Á©∫Èó¥‚ÄùÂåÖÂê´‰∫ÜÊâÄÊúâÁöÑ Chunk ÂâØÊú¨„ÄÇÂÆûÈôÖ‰∏äÊâÄÊúâÁöÑÊñá‰ª∂ÈÉΩ Â§çÂà∂‰∫Ü‰∏â‰ªΩ„ÄÇÂõ†Ê≠§ÔºåÈõÜÁæ§ÂÆûÈôÖ‰∏äÂêÑÂ≠òÂÇ®‰∫Ü 18TB Âíå 52TB ÁöÑÊñá‰ª∂Êï∞ÊçÆ„ÄÇ ‰∏§‰∏™ÈõÜÁæ§Â≠òÂÇ®ÁöÑÊñá‰ª∂Êï∞ÈáèÈÉΩÂ∑Æ‰∏çÂ§öÔºå‰ΩÜÊòØÈõÜÁæ§ B ‰∏äÊúâÂ§ßÈáèÁöÑÊ≠ªÊñá‰ª∂„ÄÇÊâÄË∞ì‚ÄúÊ≠ªÊñá‰ª∂‚ÄùÊòØÊåáÊñá‰ª∂Ë¢´Âà†Èô§‰∫Ü ÊàñËÄÖÊòØË¢´Êñ∞ÁâàÊú¨ÁöÑÊñá‰ª∂ÊõøÊç¢‰∫ÜÔºå‰ΩÜÊòØÂ≠òÂÇ®Á©∫Èó¥ËøòÊ≤°ÊúâÊù•ÂæóÂèäË¢´ÂõûÊî∂„ÄÇÁî±‰∫éÈõÜÁæ§ B Â≠òÂÇ®ÁöÑÊñá‰ª∂ËæÉÂ§ßÔºåÂõ†Ê≠§ÂÆÉÁöÑ Chunk Êï∞Èáè‰πüÊØîËæÉÂ§ö„ÄÇ ÂÖÉÊï∞ÊçÆChunk ÊúçÂä°Âô®ÊÄªÂÖ±‰øùÂ≠ò‰∫ÜÂçÅÂá† GB ÁöÑÂÖÉÊï∞ÊçÆÔºåÂ§ßÂ§öÊï∞ÊòØÊù•Ëá™Áî®Êà∑Êï∞ÊçÆÁöÑ„ÄÅ64KB Â§ßÂ∞èÁöÑÂùóÁöÑ Checksum„ÄÇ ‰øùÂ≠òÂú® Chunk ÊúçÂä°Âô®‰∏äÂÖ∂ÂÆÉÁöÑÂÖÉÊï∞ÊçÆÊòØ Chunk ÁöÑÁâàÊú¨Âè∑‰ø°ÊÅØÔºåÊàë‰ª¨Âú® 4.5 ËäÇÊèèËø∞Ëøá„ÄÇ Âú® Master ÊúçÂä°Âô®‰∏ä‰øùÂ≠òÁöÑÂÖÉÊï∞ÊçÆÂ∞±Â∞èÁöÑÂ§ö‰∫ÜÔºåÂ§ßÁ∫¶Âè™ÊúâÊï∞ÂçÅ MBÔºåÊàñËÄÖËØ¥Âπ≥ÂùáÊØè‰∏™Êñá‰ª∂ 100 Â≠óËäÇÁöÑÂÖÉÊï∞ ÊçÆ„ÄÇËøôÂíåÊàë‰ª¨ËÆæÊÉ≥ÁöÑÊòØ‰∏ÄÊ†∑ÁöÑÔºåMaster ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠òÂ§ßÂ∞èÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠Âπ∂‰∏ç‰ºöÊàê‰∏∫ GFS Á≥ªÁªüÂÆπÈáèÁöÑÁì∂È¢à„ÄÇÂ§ß Â§öÊï∞Êñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆÈÉΩÊòØ‰ª•ÂâçÁºÄÂéãÁº©Ê®°ÂºèÂ≠òÊîæÁöÑÊñá‰ª∂Âêç„ÄÇMaster ÊúçÂä°Âô®‰∏äÂ≠òÊîæÁöÑÂÖ∂ÂÆÉÂÖÉÊï∞ÊçÆÂåÖÊã¨‰∫ÜÊñá‰ª∂ÁöÑÊâÄÊúâ ËÄÖÂíåÊùÉÈôê„ÄÅÊñá‰ª∂Âà∞ Chunk ÁöÑÊò†Â∞ÑÂÖ≥Á≥ªÔºå‰ª•ÂèäÊØè‰∏Ä‰∏™ Chunk ÁöÑÂΩìÂâçÁâàÊú¨Âè∑„ÄÇÊ≠§Â§ñÔºåÈíàÂØπÊØè‰∏Ä‰∏™ ChunkÔºåÊàë‰ª¨ÈÉΩ ‰øùÂ≠ò‰∫ÜÂΩìÂâçÁöÑÂâØÊú¨‰ΩçÁΩÆ‰ª•ÂèäÂØπÂÆÉÁöÑÂºïÁî®ËÆ°Êï∞ÔºåËøô‰∏™ÂºïÁî®ËÆ°Êï∞Áî®‰∫éÂÆûÁé∞ÂÜôÊó∂Êã∑Ë¥ù(Âç≥ COWÔºåcopy-on-write)„ÄÇ ÂØπ‰∫éÊØè‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊúçÂä°Âô®ÔºåÊó†ËÆ∫ÊòØ Chunk ÊúçÂä°Âô®ËøòÊòØ Master ÊúçÂä°Âô®ÔºåÈÉΩÂè™‰øùÂ≠ò‰∫Ü 50MB Âà∞ 100MB ÁöÑÂÖÉ Êï∞ÊçÆ„ÄÇÂõ†Ê≠§ÔºåÊÅ¢Â§çÊúçÂä°Âô®ÊòØÈùûÂ∏∏Âø´ÈÄüÁöÑ:Âú®ÊúçÂä°Âô®ÂìçÂ∫îÂÆ¢Êà∑ËØ∑Ê±Ç‰πãÂâçÔºåÂè™ÈúÄË¶ÅËä±Âá†ÁßíÈíüÊó∂Èó¥‰ªéÁ£ÅÁõò‰∏äËØªÂèñËøô ‰∫õÊï∞ÊçÆÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ‰∏çËøáÔºåMaster ÊúçÂä°Âô®‰ºöÊåÅÁª≠È¢†Á∞∏‰∏ÄÊÆµÊó∂Èó¥‚ÄìÈÄöÂ∏∏ÊòØ 30 Âà∞ 60 Áßí‚ÄìÁõ¥Âà∞ÂÆÉÂÆåÊàêËΩÆËØ¢ÊâÄÊúâÁöÑ ChunkÊúçÂä°Âô®ÔºåÂπ∂Ëé∑ÂèñÂà∞ÊâÄÊúâ Chunk ÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇ ËØªÂÜôÈÄüÁéáË°®‰∏âÊòæÁ§∫‰∫Ü‰∏çÂêåÊó∂ÊÆµÁöÑËØªÂÜôÈÄüÁéá„ÄÇÂú®ÊµãËØïÁöÑÊó∂ÂÄôÔºåËøô‰∏§‰∏™ÈõÜÁæ§ÈÉΩËøêË°å‰∫Ü‰∏ÄÂë®Â∑¶Âè≥ÁöÑÊó∂Èó¥„ÄÇ(Ëøô‰∏§‰∏™ÈõÜÁæ§ÊúÄ ËøëÈÉΩÂõ†‰∏∫ÂçáÁ∫ßÊñ∞ÁâàÊú¨ÁöÑ GFS ÈáçÊñ∞ÂêØÂä®Ëøá‰∫Ü)„ÄÇ ÈõÜÁæ§ÈáçÊñ∞ÂêØÂä®ÂêéÔºåÂπ≥ÂùáÂÜôÂÖ•ÈÄüÁéáÂ∞è‰∫é 30MB/s„ÄÇÂΩìÊàë‰ª¨ÊèêÂèñÊÄßËÉΩÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÈõÜÁæ§ B Ê≠£ËøõË°åÂ§ßÈáèÁöÑÂÜôÂÖ•Êìç ‰ΩúÔºåÂÜôÂÖ•ÈÄüÂ∫¶ËææÂà∞‰∫Ü 100MB/sÔºåÂπ∂‰∏îÂõ†‰∏∫ÊØè‰∏™ Chunk ÈÉΩÊúâ‰∏â‰∏™ÂâØÊú¨ÁöÑÂéüÂõ†ÔºåÁΩëÁªúË¥üËΩΩËææÂà∞‰∫Ü 300MB/s„ÄÇ ËØªÂèñÈÄüÁéáË¶ÅÊØîÂÜôÂÖ•ÈÄüÁéáÈ´òÁöÑÂ§ö„ÄÇÊ≠£Â¶ÇÊàë‰ª¨ËÆæÊÉ≥ÁöÑÈÇ£Ê†∑ÔºåÊÄªÁöÑÂ∑•‰ΩúË¥üËΩΩ‰∏≠ÔºåËØªÂèñÁöÑÊØî‰æãËøúËøúÈ´ò‰∫éÂÜôÂÖ•ÁöÑÊØî ‰æã„ÄÇ‰∏§‰∏™ÈõÜÁæ§ÈÉΩËøõË°åÁùÄÁπÅÈáçÁöÑËØªÂèñÊìç‰Ωú„ÄÇÁâπÂà´ÊòØÔºåÈõÜÁæ§ A Âú®‰∏ÄÂë®Êó∂Èó¥ÂÜÖÈÉΩÁª¥ÊåÅ‰∫Ü 580MB/s ÁöÑËØªÂèñÈÄüÂ∫¶„ÄÇÈõÜÁæ§ A ÁöÑÁΩëÁªúÈÖçÁΩÆÂèØ‰ª•ÊîØÊåÅ 750MB/s ÁöÑÈÄüÂ∫¶ÔºåÊòæÁÑ∂ÔºåÂÆÉÊúâÊïàÁöÑÂà©Áî®‰∫ÜËµÑÊ∫ê„ÄÇÈõÜÁæ§ B ÊîØÊåÅÁöÑÂ≥∞ÂÄºËØªÂèñÈÄüÂ∫¶ÊòØ 1300MB/sÔºå ‰ΩÜÊòØÂÆÉÁöÑÂ∫îÁî®Âè™Áî®Âà∞‰∫Ü 380MB/s„ÄÇ Master ÊúçÂä°Âô®ÁöÑË¥üËΩΩË°® 3 ÁöÑÊï∞ÊçÆÊòæÁ§∫‰∫ÜÂèëÈÄÅÂà∞ Master ÊúçÂä°Âô®ÁöÑÊìç‰ΩúËØ∑Ê±ÇÂ§ßÊ¶ÇÊòØÊØèÁßíÈíü 200 Âà∞ 500 ‰∏™„ÄÇMaster ÊúçÂä°Âô®ÂèØ‰ª•ËΩªÊùæ ÁöÑÂ∫î‰ªòËøô‰∏™ËØ∑Ê±ÇÈÄüÂ∫¶ÔºåÊâÄ‰ª• Master ÊúçÂä°Âô®ÁöÑÂ§ÑÁêÜËÉΩÂäõ‰∏çÊòØÁ≥ªÁªüÁöÑÁì∂È¢à„ÄÇ Âú®Êó©ÊúüÁâàÊú¨ÁöÑ GFS ‰∏≠ÔºåMaster ÊúçÂä°Âô®ÂÅ∂Â∞î‰ºöÊàê‰∏∫Áì∂È¢à„ÄÇÂÆÉÂ§ßÂ§öÊï∞Êó∂Èó¥ÈáåÈÉΩÂú®È°∫Â∫èÊâ´ÊèèÊüê‰∏™ÂæàÂ§ßÁöÑÁõÆÂΩï (ÂåÖÂê´Êï∞‰∏á‰∏™Êñá‰ª∂)ÂéªÊü•ÊâæÊüê‰∏™ÁâπÂÆöÁöÑÊñá‰ª∂„ÄÇÂõ†Ê≠§Êàë‰ª¨‰øÆÊîπ‰∫Ü Master ÊúçÂä°Âô®ÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÈÄöËøáÂØπÂêçÂ≠óÁ©∫Èó¥Ëøõ Ë°å‰∫åÂàÜÊü•ÊâæÊù•ÊèêÈ´òÊïàÁéá„ÄÇÁé∞Âú® Master ÊúçÂä°Âô®ÂèØ‰ª•ËΩªÊùæÁöÑÊØèÁßíÈíüËøõË°åÊï∞ÂçÉÊ¨°Êñá‰ª∂ËÆøÈóÆ„ÄÇÂ¶ÇÊûúÊúâÈúÄË¶ÅÁöÑËØùÔºåÊàë‰ª¨ ÂèØ‰ª•ÈÄöËøáÂú®ÂêçÁß∞Á©∫Èó¥Êï∞ÊçÆÁªìÊûÑ‰πãÂâçËÆæÁΩÆÂêçÁß∞Êü•ËØ¢ÁºìÂÜ≤ÁöÑÊñπÂºèËøõ‰∏ÄÊ≠•ÊèêÈ´òÈÄüÂ∫¶„ÄÇ ÊÅ¢Â§çÊó∂Èó¥ÂΩìÊüê‰∏™ Chunk ÊúçÂä°Âô®Â§±Êïà‰∫ÜÔºå‰∏Ä‰∫õ Chunk ÂâØÊú¨ÁöÑÊï∞ÈáèÂèØËÉΩ‰ºö‰Ωé‰∫éÂ§çÂà∂Âõ†Â≠êÊåáÂÆöÁöÑÊï∞ÈáèÔºåÊàë‰ª¨ÂøÖÈ°ªÈÄöËøáÂÖã ÈöÜÂâØÊú¨‰Ωø Chunk ÂâØÊú¨Êï∞ÈáèËææÂà∞Â§çÂà∂Âõ†Â≠êÊåáÂÆöÁöÑÊï∞Èáè„ÄÇÊÅ¢Â§çÊâÄÊúâ Chunk ÂâØÊú¨ÊâÄËä±Ë¥πÁöÑÊó∂Èó¥ÂèñÂÜ≥‰∫éËµÑÊ∫êÁöÑÊï∞Èáè„ÄÇ Âú®Êàë‰ª¨ÁöÑËØïÈ™å‰∏≠ÔºåÊàë‰ª¨ÊääÈõÜÁæ§ B ‰∏äÁöÑ‰∏Ä‰∏™ Chunk ÊúçÂä°Âô® Kill Êéâ„ÄÇËøô‰∏™ Chunk ÊúçÂä°Âô®‰∏äÂ§ßÁ∫¶Êúâ 15000 ‰∏™ ChunkÔºå ÂÖ±ËÆ° 600GB ÁöÑÊï∞ÊçÆ„ÄÇ‰∏∫‰∫ÜÂáèÂ∞èÂÖãÈöÜÊìç‰ΩúÂØπÊ≠£Âú®ËøêË°åÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÂΩ±ÂìçÔºå‰ª•Âèä‰∏∫ GFS Ë∞ÉÂ∫¶ÂÜ≥Á≠ñÊèê‰æõ‰øÆÊ≠£Á©∫Èó¥Ôºå Êàë‰ª¨Áº∫ÁúÅÁöÑÊääÈõÜÁæ§‰∏≠Âπ∂ÂèëÂÖãÈöÜÊìç‰ΩúÁöÑÊï∞ÈáèËÆæÁΩÆ‰∏∫ 91 ‰∏™(Chunk ÊúçÂä°Âô®ÁöÑÊï∞ÈáèÁöÑ 40%)ÔºåÊØè‰∏™ÂÖãÈöÜÊìç‰ΩúÊúÄÂ§öÂÖÅ ËÆ∏‰ΩøÁî®ÁöÑÂ∏¶ÂÆΩÊòØ 6.25MB/s(50mbps)„ÄÇÊâÄÊúâÁöÑ Chunk Âú® 23.2 ÂàÜÈíüÂÜÖÊÅ¢Â§ç‰∫ÜÔºåÂ§çÂà∂ÁöÑÈÄüÂ∫¶È´òËææ 440MB/s„ÄÇ Âú®Âè¶Â§ñ‰∏Ä‰∏™ÊµãËØï‰∏≠ÔºåÊàë‰ª¨ Kill Êéâ‰∫Ü‰∏§‰∏™ Chunk ÊúçÂä°Âô®ÔºåÊØè‰∏™ Chunk ÊúçÂä°Âô®Â§ßÁ∫¶Êúâ 16000 ‰∏™ ChunkÔºåÂÖ± ËÆ° 660GB ÁöÑÊï∞ÊçÆ„ÄÇËøô‰∏§‰∏™ÊïÖÈöúÂØºËá¥‰∫Ü 266 ‰∏™ Chunk Âè™ÊúâÂçï‰∏™ÂâØÊú¨„ÄÇËøô 266 ‰∏™ Chunk Ë¢´ GFS ‰ºòÂÖàË∞ÉÂ∫¶ËøõË°åÂ§ç Âà∂ÔºåÂú® 2 ÂàÜÈíüÂÜÖÊÅ¢Â§çÂà∞Ëá≥Â∞ëÊúâ‰∏§‰∏™ÂâØÊú¨;Áé∞Âú®ÈõÜÁæ§Ë¢´Â∏¶ÂÖ•Âà∞Âè¶Â§ñ‰∏Ä‰∏™Áä∂ÊÄÅÔºåÂú®Ëøô‰∏™Áä∂ÊÄÅ‰∏ãÔºåÁ≥ªÁªüÂèØ‰ª•ÂÆπÂøçÂè¶ Â§ñ‰∏Ä‰∏™ Chunk ÊúçÂä°Âô®Â§±ÊïàËÄå‰∏ç‰∏¢Â§±Êï∞ÊçÆ„ÄÇ Â∑•‰ΩúË¥üËç∑ÂàÜÊûê(Workload Breakdown)Êú¨ËäÇ‰∏≠ÔºåÊàë‰ª¨Â±ïÁ§∫‰∫ÜÂØπ‰∏§‰∏™ GFS ÈõÜÁæ§Â∑•‰ΩúË¥üËΩΩÊÉÖÂÜµÁöÑËØ¶ÁªÜÂàÜÊûêÔºåËøô‰∏§‰∏™ÈõÜÁæ§Âíå 6.2 ËäÇ‰∏≠ÁöÑÁ±ª‰ººÔºå‰ΩÜÊòØ‰∏çÂÆåÂÖ®Áõ∏Âêå„ÄÇÈõÜÁæ§ X Áî®‰∫éÁ†îÁ©∂ÂíåÂºÄÂèëÔºåÈõÜÁæ§ Y Áî®‰∫éÁîü‰∫ßÊï∞ÊçÆÂ§ÑÁêÜ„ÄÇ ÊñπÊ≥ïËÆ∫ÂíåÊ≥®ÊÑè‰∫ãÈ°πÊú¨Á´†ËäÇÂàóÂá∫ÁöÑËøô‰∫õÁªìÊûúÊï∞ÊçÆÂè™ÂåÖÊã¨ÂÆ¢Êà∑Êú∫ÂèëËµ∑ÁöÑÂéüÂßãËØ∑Ê±ÇÔºåÂõ†Ê≠§ÔºåËøô‰∫õÁªìÊûúËÉΩÂ§üÂèçÊò†Êàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èÂØπ GFS Êñá‰ª∂Á≥ªÁªü‰∫ßÁîüÁöÑÂÖ®ÈÉ®Â∑•‰ΩúË¥üËΩΩ„ÄÇÂÆÉ‰ª¨‰∏çÂåÖÂê´ÈÇ£‰∫õ‰∏∫‰∫ÜÂÆûÁé∞ÂÆ¢Êà∑Á´ØËØ∑Ê±ÇËÄåÂú®ÊúçÂä°Âô®Èó¥‰∫§‰∫íÁöÑËØ∑Ê±ÇÔºå‰πü‰∏çÂåÖ Âê´ GFS ÂÜÖÈÉ®ÁöÑÂêéÂè∞Ê¥ªÂä®Áõ∏ÂÖ≥ÁöÑËØ∑Ê±ÇÔºåÊØîÂ¶ÇÂâçÂêëËΩ¨ÂèëÁöÑÂÜôÊìç‰ΩúÔºåÊàñËÄÖÈáçÊñ∞Ë¥üËΩΩÂùáË°°Á≠âÊìç‰Ωú„ÄÇ Êàë‰ª¨‰ªé GFS ÊúçÂä°Âô®ËÆ∞ÂΩïÁöÑÁúüÂÆûÁöÑ RPC ËØ∑Ê±ÇÊó•Âøó‰∏≠Êé®ÂØºÈáçÂª∫Âá∫ÂÖ≥‰∫é IO Êìç‰ΩúÁöÑÁªüËÆ°‰ø°ÊÅØ„ÄÇ‰æãÂ¶ÇÔºåGFS ÂÆ¢ Êà∑Á®ãÂ∫èÂèØËÉΩ‰ºöÊää‰∏Ä‰∏™ËØªÊìç‰ΩúÂàÜÊàêÂá†‰∏™ RPC ËØ∑Ê±ÇÊù•ÊèêÈ´òÂπ∂Ë°åÂ∫¶ÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáËøô‰∫õ RPC ËØ∑Ê±ÇÊé®ÂØºÂá∫ÂéüÂßãÁöÑËØª Êìç‰Ωú„ÄÇÂõ†‰∏∫Êàë‰ª¨ÁöÑËÆøÈóÆÊ®°ÂºèÊòØÈ´òÂ∫¶Á®ãÂºèÂåñÔºåÊâÄ‰ª•Êàë‰ª¨ËÆ§‰∏∫‰ªª‰Ωï‰∏çÁ¨¶ÂêàÁöÑÊï∞ÊçÆÈÉΩÊòØËØØÂ∑Æ„ÄÇÂ∫îÁî®Á®ãÂ∫èÂ¶ÇÊûúËÉΩÂ§üËÆ∞ ÂΩïÊõ¥ËØ¶Â∞ΩÁöÑÊó•ÂøóÔºåÂ∞±ÊúâÂèØËÉΩÊèê‰æõÊõ¥ÂáÜÁ°ÆÁöÑËØäÊñ≠Êï∞ÊçÆ;‰ΩÜÊòØ‰∏∫‰∫ÜËøô‰∏™ÁõÆÁöÑÂéªÈáçÊñ∞ÁºñËØëÂíåÈáçÊñ∞ÂêØÂä®Êï∞ÂçÉ‰∏™Ê≠£Âú®Ëøê Ë°åÁöÑÂÆ¢Êà∑Êú∫ÊòØ‰∏çÁé∞ÂÆûÁöÑÔºåËÄå‰∏î‰ªéÈÇ£‰πàÂ§öÂÆ¢Êà∑Êú∫‰∏äÊî∂ÈõÜÁªìÊûú‰πüÊòØ‰∏™ÁπÅÈáçÁöÑÂ∑•‰Ωú„ÄÇ Â∫îËØ•ÈÅøÂÖç‰ªéÊàë‰ª¨ÁöÑÂ∑•‰ΩúË¥üËç∑Êï∞ÊçÆ‰∏≠ËøáÂ∫¶ÁöÑÂΩíÁ∫≥Âá∫ÊôÆÈÅçÁöÑÁªìËÆ∫(Âç≥‰∏çË¶ÅÊääÊú¨ËäÇÁöÑÊï∞ÊçÆ‰Ωú‰∏∫Âü∫Á°ÄÁöÑÊåáÂØºÊÄßÊï∞ÊçÆ)„ÄÇÂõ†‰∏∫ Google ÂÆåÂÖ®ÊéßÂà∂ÁùÄ GFS Âíå‰ΩøÁî® GFS ÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÊâÄ‰ª•ÔºåÂ∫îÁî®Á®ãÂ∫èÈÉΩÈíàÂØπ GFS ÂÅö‰∫Ü‰ºòÂåñÔºåÂêåÊó∂ÔºåGFS ‰πüÊòØ‰∏∫‰∫ÜËøô‰∫õÂ∫îÁî®Á®ãÂ∫èËÄåËÆæËÆ°ÁöÑ„ÄÇËøôÊ†∑ÁöÑÁõ∏ ‰∫í‰ΩúÁî®‰πüÂèØËÉΩÂ≠òÂú®‰∫é‰∏ÄËà¨Á®ãÂ∫èÂíåÊñá‰ª∂Á≥ªÁªü‰∏≠Ôºå‰ΩÜÊòØÂú®Êàë‰ª¨ÁöÑÊ°à‰æã‰∏≠ËøôÊ†∑ÁöÑ‰ΩúÁî®ÂΩ±ÂìçÂèØËÉΩÊõ¥ÊòæËëó„ÄÇ Chunk ÊúçÂä°Âô®Â∑•‰ΩúË¥üËç∑Ë°® 4 ÊòæÁ§∫‰∫ÜÊìç‰ΩúÊåâÊ∂âÂèäÁöÑÊï∞ÊçÆÈáèÂ§ßÂ∞èÁöÑÂàÜÂ∏ÉÊÉÖÂÜµ„ÄÇËØªÂèñÊìç‰ΩúÊåâÊìç‰ΩúÊ∂âÂèäÁöÑÊï∞ÊçÆÈáèÂ§ßÂ∞èÂëàÁé∞‰∫ÜÂèåÂ≥∞ÂàÜÂ∏É„ÄÇ Â∞èÁöÑËØªÂèñÊìç‰Ωú(Â∞è‰∫é 64KB)‰∏ÄËà¨ÊòØÁî±Êü•ÊâæÊìç‰ΩúÁöÑÂÆ¢Êà∑Á´ØÂèëËµ∑ÁöÑÔºåÁõÆÁöÑÂú®‰∫é‰ªéÂ∑®Â§ßÁöÑÊñá‰ª∂‰∏≠Êü•ÊâæÂ∞èÂùóÁöÑÊï∞ÊçÆ„ÄÇ Â§ßÁöÑËØªÂèñÊìç‰Ωú(Â§ß‰∫é 512KB)‰∏ÄËà¨ÊòØ‰ªéÂ§¥Âà∞Â∞æÈ°∫Â∫èÁöÑËØªÂèñÊï¥‰∏™Êñá‰ª∂„ÄÇ Âú®ÈõÜÁæ§ Y ‰∏äÔºåÊúâÁõ∏ÂΩìÊï∞ÈáèÁöÑËØªÊìç‰ΩúÊ≤°ÊúâËøîÂõû‰ªª‰ΩïÁöÑÊï∞ÊçÆ„ÄÇÂú®Êàë‰ª¨ÁöÑÂ∫îÁî®‰∏≠ÔºåÂ∞§ÂÖ∂ÊòØÂú®Áîü‰∫ßÁ≥ªÁªü‰∏≠ÔºåÁªèÂ∏∏ ‰ΩøÁî®Êñá‰ª∂‰Ωú‰∏∫Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÈòüÂàó„ÄÇÁîü‰∫ßËÄÖÂπ∂Ë°åÁöÑÂêëÊñá‰ª∂‰∏≠ËøΩÂä†Êï∞ÊçÆÔºåÂêåÊó∂ÔºåÊ∂àË¥πËÄÖ‰ªéÊñá‰ª∂ÁöÑÂ∞æÈÉ®ËØªÂèñÊï∞ÊçÆ„ÄÇÊüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÊ∂àË¥πËÄÖËØªÂèñÁöÑÈÄüÂ∫¶Ë∂ÖËøá‰∫ÜÁîü‰∫ßËÄÖÂÜôÂÖ•ÁöÑÈÄüÂ∫¶ÔºåËøôÂ∞±‰ºöÂØºËá¥Ê≤°ÊúâËØªÂà∞‰ªª‰ΩïÊï∞ÊçÆÁöÑÊÉÖÂÜµ„ÄÇÈõÜÁæ§ X ÈÄö Â∏∏Áî®‰∫éÁü≠ÊöÇÁöÑÊï∞ÊçÆÂàÜÊûê‰ªªÂä°ÔºåËÄå‰∏çÊòØÈïøÊó∂Èó¥ËøêË°åÁöÑÂàÜÂ∏ÉÂºèÂ∫îÁî®ÔºåÂõ†Ê≠§ÔºåÈõÜÁæ§ X ÂæàÂ∞ëÂá∫Áé∞ËøôÁßçÊÉÖÂÜµ„ÄÇ ÂÜôÊìç‰ΩúÊåâÊï∞ÊçÆÈáèÂ§ßÂ∞è‰πüÂêåÊ†∑ÂëàÁé∞‰∏∫ÂèåÂ≥∞ÂàÜÂ∏É„ÄÇÂ§ßÁöÑÂÜôÊìç‰Ωú(Ë∂ÖËøá 256KB)ÈÄöÂ∏∏ÊòØÁî±‰∫é Writer ‰ΩøÁî®‰∫ÜÁºìÂ≠ò Êú∫Âà∂ÂØºËá¥ÁöÑ„ÄÇWriter ÁºìÂ≠òËæÉÂ∞èÁöÑÊï∞ÊçÆÔºåÈÄöËøáÈ¢ëÁπÅÁöÑ Checkpoint ÊàñËÄÖÂêåÊ≠•Êìç‰ΩúÔºåÊàñËÄÖÂè™ÊòØÁÆÄÂçïÁöÑÁªüËÆ°Â∞èÁöÑÂÜôÂÖ• (Â∞è‰∫é 64KB)ÁöÑÊï∞ÊçÆÈáè(alex Ê≥®:Âç≥Ê±áÈõÜÂ§öÊ¨°Â∞èÁöÑÂÜôÂÖ•Êìç‰ΩúÔºåÂΩìÊï∞ÊçÆÈáèËææÂà∞‰∏Ä‰∏™ÈòàÂÄºÔºå‰∏ÄÊ¨°ÂÜôÂÖ•)Ôºå‰πãÂêéÊâπÈáè ÂÜôÂÖ•„ÄÇ ÂÜçÊù•ËßÇÂØü‰∏Ä‰∏ãËÆ∞ÂΩïËøΩÂä†Êìç‰Ωú„ÄÇÊàë‰ª¨ÂèØ‰ª•ÁúãÂà∞ÈõÜÁæ§ Y ‰∏≠Â§ßÁöÑËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÊâÄÂç†ÊØî‰æãÊØîÈõÜÁæ§ X Â§öÁöÑÂ§öÔºåËøôÊòØ Âõ†‰∏∫ÈõÜÁæ§ Y Áî®‰∫éÊàë‰ª¨ÁöÑÁîü‰∫ßÁ≥ªÁªüÔºåÈíàÂØπ GFS ÂÅö‰∫ÜÊõ¥ÂÖ®Èù¢ÁöÑË∞É‰ºò„ÄÇË°® 5 ÊòæÁ§∫‰∫ÜÊåâÊìç‰ΩúÊ∂âÂèäÁöÑÊï∞ÊçÆÈáèÁöÑÂ§ßÂ∞èÁªüËÆ°Âá∫Êù•ÁöÑÊÄªÊï∞ÊçÆ‰º†ËæìÈáè„ÄÇÂú®ÊâÄÊúâÁöÑÊìç‰Ωú‰∏≠ÔºåÂ§ßÁöÑÊìç‰Ωú(Ë∂ÖËøá 256KB)Âç†ÊçÆ‰∫Ü‰∏ªË¶ÅÁöÑ‰º†ËæìÈáè„ÄÇÂ∞èÁöÑËØªÂèñ(Â∞è‰∫é 64KB)ËôΩÁÑ∂‰º†ËæìÁöÑÊï∞ÊçÆÈáèÊØîËæÉÂ∞ëÔºå‰ΩÜÊòØÂú®ËØªÂèñÁöÑÊï∞ÊçÆÈáè‰∏≠‰ªç Âç†‰∫ÜÁõ∏ÂΩìÁöÑÊØî‰æãÔºåËøôÊòØÂõ†‰∏∫Âú®Êñá‰ª∂‰∏≠ÈöèÊú∫ Seek ÁöÑÂ∑•‰ΩúË¥üËç∑ËÄåÂØºËá¥ÁöÑ„ÄÇ ËÆ∞ÂΩïËøΩÂä† vs. ÂÜôÊìç‰ΩúËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂú®Êàë‰ª¨ÁöÑÁîü‰∫ßÁ≥ªÁªü‰∏≠Â§ßÈáè‰ΩøÁî®„ÄÇÂØπ‰∫éÈõÜÁæ§ XÔºåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂíåÊôÆÈÄöÂÜôÊìç‰ΩúÁöÑÊØî‰æãÊåâÁÖßÂ≠óËäÇ ÊØîÊòØ 108:1ÔºåÊåâÁÖßÊìç‰ΩúÊ¨°Êï∞ÊØîÊòØ 8:1„ÄÇÂØπ‰∫é‰Ωú‰∏∫Êàë‰ª¨ÁöÑÁîü‰∫ßÁ≥ªÁªüÁöÑÈõÜÁæ§ Y Êù•ËØ¥ÔºåËøô‰∏§‰∏™ÊØî‰æãÂàÜÂà´ÊòØ 3.7:1 Âíå 2.5:1„ÄÇ Êõ¥Ëøõ‰∏ÄÊ≠•ÔºåËøô‰∏ÄÁªÑÊï∞ÊçÆËØ¥ÊòéÂú®Êàë‰ª¨ÁöÑ‰∏§‰∏™ÈõÜÁæ§‰∏äÔºåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÊâÄÂç†ÊØî‰æãÈÉΩË¶ÅÊØîÂÜôÊìç‰ΩúË¶ÅÂ§ß„ÄÇÂØπ‰∫éÈõÜÁæ§ XÔºå Âú®Êï¥‰∏™ÊµãÈáèËøáÁ®ã‰∏≠ÔºåËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÊâÄÂç†ÊØîÁéáÈÉΩÊØîËæÉ‰ΩéÔºåÂõ†Ê≠§ÁªìÊûú‰ºöÂèóÂà∞‰∏Ä‰∏§‰∏™‰ΩøÁî®Êüê‰∫õÁâπÂÆöÂ§ßÂ∞èÁöÑ buffer ÁöÑ Â∫îÁî®Á®ãÂ∫èÁöÑÂΩ±Âìç„ÄÇ Â¶ÇÂêåÊàë‰ª¨ÊâÄÈ¢ÑÊúüÁöÑÔºåÊàë‰ª¨ÁöÑÊï∞ÊçÆ‰øÆÊîπÊìç‰Ωú‰∏ªË¶ÅÊòØËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúËÄå‰∏çÊòØË¶ÜÁõñÊñπÂºèÁöÑÂÜôÊìç‰Ωú„ÄÇÊàë‰ª¨ÊµãÈáè‰∫ÜÁ¨¨ ‰∏Ä‰∏™ÂâØÊú¨ÁöÑÊï∞ÊçÆË¶ÜÁõñÂÜôÁöÑÊÉÖÂÜµ„ÄÇËøôËøë‰ºº‰∫é‰∏Ä‰∏™ÂÆ¢Êà∑Êú∫ÊïÖÊÑèË¶ÜÁõñÂàöÂàöÂÜôÂÖ•ÁöÑÊï∞ÊçÆÔºåËÄå‰∏çÊòØÂ¢ûÂä†Êñ∞ÁöÑÊï∞ÊçÆ„ÄÇÂØπ‰∫é ÈõÜÁæ§ XÔºåË¶ÜÁõñÂÜôÊìç‰ΩúÂú®ÂÜôÊìç‰ΩúÊâÄÂç†ÊçÆÂ≠óËäÇ‰∏äÁöÑÊØî‰æãÂ∞è‰∫é 0.0001%ÔºåÂú®ÊâÄÂç†ÊçÆÊìç‰ΩúÊï∞Èáè‰∏äÁöÑÊØî‰æãÂ∞è‰∫é 0.0003%„ÄÇ ÂØπ‰∫éÈõÜÁæ§ YÔºåËøô‰∏§‰∏™ÊØîÁéáÈÉΩÊòØ 0.05%„ÄÇËôΩÁÑ∂ËøôÂè™ÊòØÊüê‰∏ÄÁâáÊñ≠ÁöÑÊÉÖÂÜµÔºå‰ΩÜÊòØ‰ªçÁÑ∂È´ò‰∫éÊàë‰ª¨ÁöÑÈ¢ÑÊúü„ÄÇËøôÊòØÁî±‰∫éËøô ‰∫õË¶ÜÁõñÂÜôÁöÑÊìç‰ΩúÔºåÂ§ßÈÉ®ÂàÜÊòØÁî±‰∫éÂÆ¢Êà∑Á´ØÂú®ÂèëÁîüÈîôËØØÊàñËÄÖË∂ÖÊó∂‰ª•ÂêéÈáçËØïÁöÑÊÉÖÂÜµ„ÄÇËøôÂú®Êú¨Ë¥®‰∏äÂ∫îËØ•‰∏çÁÆó‰ΩúÂ∑•‰ΩúË¥ü Ëç∑ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËÄåÊòØÈáçËØïÊú∫Âà∂‰∫ßÁîüÁöÑÁªìÊûú„ÄÇ Master ÁöÑÂ∑•‰ΩúË¥üËç∑Ë°® 6 ÊòæÁ§∫‰∫Ü Master ÊúçÂä°Âô®‰∏äÁöÑËØ∑Ê±ÇÊåâÁ±ªÂûãÂå∫ÂàÜÁöÑÊòéÁªÜË°®„ÄÇÂ§ßÈÉ®ÂàÜÁöÑËØ∑Ê±ÇÈÉΩÊòØËØªÂèñÊìç‰ΩúÊü•ËØ¢ Chunk ‰ΩçÁΩÆ‰ø° ÊÅØ(FindLocation)„ÄÅ‰ª•Âèä‰øÆÊîπÊìç‰ΩúÊü•ËØ¢ lease ÊåÅÊúâËÄÖÁöÑ‰ø°ÊÅØ(FindLease-Locker)„ÄÇ ÈõÜÁæ§ X Âíå Y Âú®Âà†Èô§ËØ∑Ê±ÇÁöÑÊï∞Èáè‰∏äÊúâÁùÄÊòéÊòæÁöÑ‰∏çÂêåÔºåÂõ†‰∏∫ÈõÜÁæ§ Y Â≠òÂÇ®‰∫ÜÁîü‰∫ßÊï∞ÊçÆÔºå‰∏ÄËà¨‰ºöÈáçÊñ∞ÁîüÊàêÊï∞ÊçÆ ‰ª•ÂèäÁî®Êñ∞ÁâàÊú¨ÁöÑÊï∞ÊçÆÊõøÊç¢ÊóßÊúâÁöÑÊï∞ÊçÆ„ÄÇÊï∞Èáè‰∏äÁöÑÂ∑ÆÂºÇ‰πüË¢´ÈöêËóèÂú®‰∫Ü Open ËØ∑Ê±Ç‰∏≠ÔºåÂõ†‰∏∫ÊóßÁâàÊú¨ÁöÑÊñá‰ª∂ÂèØËÉΩÂú®‰ª• ÈáçÊñ∞ÂÜôÂÖ•ÁöÑÊ®°ÂºèÊâìÂºÄÊó∂ÔºåÈöêÂºèÁöÑË¢´Âà†Èô§‰∫Ü(Á±ª‰ºº UNIX ÁöÑ open ÂáΩÊï∞‰∏≠ÁöÑ‚Äúw‚ÄùÊ®°Âºè)„ÄÇ FindMatchingFiles ÊòØ‰∏Ä‰∏™Ê®°ÂºèÂåπÈÖçËØ∑Ê±ÇÔºåÊîØÊåÅ‚Äúls‚Äù‰ª•ÂèäÂÖ∂ÂÆÉÁ±ª‰ººÁöÑÊñá‰ª∂Á≥ªÁªüÊìç‰Ωú„ÄÇ‰∏çÂêå‰∫é Master ÊúçÂä° Âô®ÁöÑÂÖ∂ÂÆÉËØ∑Ê±ÇÔºåÂÆÉÂèØËÉΩ‰ºöÊ£ÄÁ¥¢ namespace ÁöÑÂ§ßÈÉ®ÂàÜÂÜÖÂÆπÔºåÂõ†Ê≠§ÊòØÈùûÂ∏∏ÊòÇË¥µÁöÑÊìç‰Ωú„ÄÇÈõÜÁæ§ Y ÁöÑËøôÁ±ªËØ∑Ê±ÇË¶ÅÂ§ö‰∏Ä ‰∫õÔºåÂõ†‰∏∫Ëá™Âä®ÂåñÊï∞ÊçÆÂ§ÑÁêÜÁöÑ‰ªªÂä°ËøõÁ®ãÈúÄË¶ÅÊ£ÄÊü•Êñá‰ª∂Á≥ªÁªüÁöÑÂêÑ‰∏™ÈÉ®ÂàÜÔºå‰ª•‰æø‰ªéÂÖ®Â±Ä‰∏ä‰∫ÜËß£Â∫îÁî®Á®ãÂ∫èÁöÑÁä∂ÊÄÅ„ÄÇ‰∏é ‰πã‰∏çÂêåÁöÑÊòØÔºåÈõÜÁæ§ X ÁöÑÂ∫îÁî®Á®ãÂ∫èÊõ¥Âä†ÂÄæÂêë‰∫éÁî±ÂçïÁã¨ÁöÑÁî®Êà∑ÊéßÂà∂ÔºåÈÄöÂ∏∏È¢ÑÂÖàÁü•ÈÅìËá™Â∑±ÊâÄÈúÄË¶Å‰ΩøÁî®ÁöÑÂÖ®ÈÉ®Êñá‰ª∂ÁöÑ ÂêçÁß∞„ÄÇ ÁªèÈ™åÂú®Âª∫ÈÄ†ÂíåÈÉ®ÁΩ≤ GFS ÁöÑËøáÁ®ã‰∏≠ÔºåÊàë‰ª¨ÁªèÂéÜ‰∫ÜÂêÑÁßçÂêÑÊ†∑ÁöÑÈóÆÈ¢òÔºåÊúâ‰∫õÊòØÊìç‰Ωú‰∏äÁöÑÔºåÊúâ‰∫õÊòØÊäÄÊúØ‰∏äÁöÑ„ÄÇËµ∑ÂàùÔºåGFS Ë¢´ËÆæÊÉ≥‰∏∫Êàë‰ª¨ÁöÑÁîü‰∫ßÁ≥ªÁªüÁöÑÂêéÁ´ØÊñá‰ª∂Á≥ªÁªü„ÄÇÈöèÁùÄÊó∂Èó¥Êé®ÁßªÔºåÂú® GFS ÁöÑ‰ΩøÁî®‰∏≠ÈÄêÊ≠•ÁöÑÂ¢ûÂä†‰∫ÜÂØπ Á†îÁ©∂ÂíåÂºÄÂèë‰ªªÂä°ÁöÑÊîØÊåÅ„ÄÇÊàë‰ª¨ÂºÄÂßãÂ¢ûÂä†‰∏Ä‰∫õÂ∞èÁöÑÂäüËÉΩÔºåÊØîÂ¶ÇÊùÉÈôêÂíåÈÖçÈ¢ùÔºåÂà∞‰∫ÜÁé∞Âú®ÔºåGFS Â∑≤ÁªèÂàùÊ≠•ÊîØÊåÅ‰∫ÜËøô ‰∫õÂäüËÉΩ„ÄÇËôΩÁÑ∂Êàë‰ª¨Áîü‰∫ßÁ≥ªÁªüÊòØ‰∏•Ê†ºÂèóÊéßÁöÑÔºå‰ΩÜÊòØÁî®Êà∑Â±ÇÂç¥‰∏çÊÄªÊòØËøôÊ†∑ÁöÑ„ÄÇÈúÄË¶ÅÊõ¥Â§öÁöÑÂü∫Á°ÄÊû∂ÊûÑÊù•Èò≤Ê≠¢Áî®Êà∑Èó¥ ÁöÑÁõ∏‰∫íÂπ≤Êâ∞„ÄÇ Êàë‰ª¨ÊúÄÂ§ßÁöÑÈóÆÈ¢òÊòØÁ£ÅÁõò‰ª•ÂèäÂíå Linux Áõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò„ÄÇÂæàÂ§öÁ£ÅÁõòÈÉΩÂ£∞Áß∞ÂÆÉ‰ª¨ÊîØÊåÅÊüê‰∏™ËåÉÂõ¥ÂÜÖÁöÑ Linux IDE Á°¨Áõò È©±Âä®Á®ãÂ∫èÔºå‰ΩÜÊòØÂÆûÈôÖÂ∫îÁî®‰∏≠ÂèçÊò†Âá∫Êù•ÁöÑÊÉÖÂÜµÂç¥‰∏çÊòØËøôÊ†∑ÔºåÂÆÉ‰ª¨Âè™ÊîØÊåÅÊúÄÊñ∞ÁöÑÈ©±Âä®„ÄÇÂõ†‰∏∫ÂçèËÆÆÁâàÊú¨ÂæàÊé•ËøëÔºåÊâÄ ‰ª•Â§ßÈÉ®ÂàÜÁ£ÅÁõòÈÉΩÂèØ‰ª•Áî®Ôºå‰ΩÜÊòØÂÅ∂Â∞î‰πü‰ºöÊúâÁî±‰∫éÂçèËÆÆ‰∏çÂåπÈÖçÔºåÂØºËá¥È©±Âä®ÂíåÂÜÖÊ†∏ÂØπ‰∫éÈ©±Âä®Âô®ÁöÑÁä∂ÊÄÅÂà§Êñ≠Â§±ËØØ„ÄÇËøô‰ºöÂØºËá¥Êï∞ÊçÆÂõ†‰∏∫ÂÜÖÊ†∏‰∏≠ÁöÑÈóÆÈ¢òÊÑèÂ§ñÁöÑË¢´Á†¥Âùè‰∫Ü„ÄÇËøô‰∏™ÈóÆÈ¢ò‰øÉ‰ΩøÊàë‰ª¨‰ΩøÁî® Checksum Êù•Ê†°È™åÊï∞ÊçÆÔºåÂêåÊó∂Êàë‰ª¨‰πü‰øÆÊîπÂÜÖÊ†∏Êù•Â§ÑÁêÜËøô‰∫õÂõ†‰∏∫ÂçèËÆÆ‰∏çÂåπÈÖçÂ∏¶Êù•ÁöÑÈóÆÈ¢ò„ÄÇ ËæÉÊó©ÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨Âú®‰ΩøÁî® Linux 2.2 ÂÜÖÊ†∏Êó∂ÈÅáÂà∞‰∫Ü‰∫õÈóÆÈ¢òÔºå‰∏ªË¶ÅÊòØ fsync()ÁöÑÊïàÁéáÈóÆÈ¢ò„ÄÇÂÆÉÁöÑÊïàÁéá‰∏éÊñá‰ª∂ÁöÑÂ§ßÂ∞èËÄå‰∏çÊòØÊñá‰ª∂‰øÆÊîπÈÉ®ÂàÜÁöÑÂ§ßÂ∞èÊúâÂÖ≥„ÄÇËøôÂú®Êàë‰ª¨ÁöÑÊìç‰ΩúÊó•ÂøóÊñá‰ª∂ËøáÂ§ßÊó∂ÁªôÂá∫‰∫ÜÈöæÈ¢òÔºåÂ∞§ÂÖ∂ÊòØÂú®Êàë‰ª¨Â∞öÊú™ÂÆû Áé∞ Checkpoint ÁöÑÊó∂ÂÄô„ÄÇÊàë‰ª¨Ë¥π‰∫ÜÂæàÂ§ßÁöÑÂäõÊ∞îÁî®ÂêåÊ≠•ÂÜôÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜÊòØÊúÄÂêéËøòÊòØÁßªÊ§çÂà∞‰∫Ü Linux2.4 ÂÜÖÊ†∏ ‰∏ä„ÄÇ Âè¶‰∏Ä‰∏™Âíå Linux Áõ∏ÂÖ≥ÁöÑÈóÆÈ¢òÊòØÂçï‰∏™ËØªÂÜôÈîÅÁöÑÈóÆÈ¢òÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÂú®Êüê‰∏Ä‰∏™Âú∞ÂùÄÁ©∫Èó¥ÁöÑ‰ªªÊÑè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÂøÖÈ°ª Âú®‰ªéÁ£ÅÁõò page in(ËØªÈîÅ)ÁöÑÊó∂ÂÄôÂÖà hold ‰ΩèÔºåÊàñËÄÖÂú® mmap()Ë∞ÉÁî®(ÂÜôÈîÅ)ÁöÑÊó∂ÂÄôÊîπÂÜôÂú∞ÂùÄÁ©∫Èó¥„ÄÇÊàë‰ª¨ÂèëÁé∞Âç≥ ‰ΩøÊàë‰ª¨ÁöÑÁ≥ªÁªüË¥üËΩΩÂæàËΩªÁöÑÊÉÖÂÜµ‰∏ã‰πü‰ºöÊúâÂÅ∂Â∞îÁöÑË∂ÖÊó∂ÔºåÊàë‰ª¨Ëä±Ë¥π‰∫ÜÂæàÂ§öÁöÑÁ≤æÂäõÂéªÊü•ÊâæËµÑÊ∫êÁöÑÁì∂È¢àÊàñËÄÖÁ°¨‰ª∂ÁöÑÈóÆ È¢ò„ÄÇÊúÄÂêéÊàë‰ª¨Áªà‰∫éÂèëÁé∞Ëøô‰∏™Âçï‰∏™ÈîÅÂú®Á£ÅÁõòÁ∫øÁ®ã‰∫§Êç¢‰ª•ÂâçÊò†Â∞ÑÁöÑÊï∞ÊçÆÂà∞Á£ÅÁõòÁöÑÊó∂ÂÄôÔºåÈîÅ‰Ωè‰∫ÜÂΩìÂâçÁöÑÁΩëÁªúÁ∫øÁ®ãÔºå ÈòªÊ≠¢ÂÆÉÊääÊñ∞Êï∞ÊçÆÊò†Â∞ÑÂà∞ÂÜÖÂ≠ò„ÄÇÁî±‰∫éÊàë‰ª¨ÁöÑÊÄßËÉΩ‰∏ªË¶ÅÂèóÈôê‰∫éÁΩëÁªúÊé•Âè£ÔºåËÄå‰∏çÊòØÂÜÖÂ≠ò copy ÁöÑÂ∏¶ÂÆΩÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨Áî® pread()Êõø‰ª£ mmap()ÔºåÁî®‰∫Ü‰∏Ä‰∏™È¢ùÂ§ñÁöÑ copy Âä®‰ΩúÊù•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ Â∞ΩÁÆ°ÂÅ∂Â∞îËøòÊòØÊúâÂÖ∂ÂÆÉÁöÑÈóÆÈ¢òÔºåLinux ÁöÑÂºÄÊîæÊ∫ê‰ª£Á†ÅËøòÊòØ‰ΩøÊàë‰ª¨ËÉΩÂ§üÂø´ÈÄüÊé¢Á©∂ÂíåÁêÜËß£Á≥ªÁªüÁöÑË°å‰∏∫„ÄÇÂú®ÈÄÇÂΩìÁöÑ Êó∂ÂÄôÔºåÊàë‰ª¨‰ºöÊîπËøõÂÜÖÊ†∏Âπ∂‰∏îÂíåÂÖ¨ÂºÄÊ∫êÁ†ÅÁªÑÁªáÂÖ±‰∫´Ëøô‰∫õÊîπÂä®„ÄÇ Áõ∏ÂÖ≥Â∑•‰ΩúÂíåÂÖ∂ÂÆÉÁöÑÂ§ßÂûãÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÔºåÊØîÂ¶Ç AFS[5]Á±ª‰ººÔºåGFS Êèê‰æõ‰∫Ü‰∏Ä‰∏™‰∏é‰ΩçÁΩÆÊó†ÂÖ≥ÁöÑÂêçÂ≠óÁ©∫Èó¥ÔºåËøô‰ΩøÂæóÊï∞ÊçÆ ÂèØ‰ª•‰∏∫‰∫ÜË¥üËΩΩÂùáË°°ÊàñËÄÖÁÅæÈöæÂÜó‰ΩôÁ≠âÁõÆÁöÑÂú®‰∏çÂêå‰ΩçÁΩÆÈÄèÊòéÁöÑËøÅÁßª„ÄÇ‰∏çÂêå‰∫é AFS ÁöÑÊòØÔºåGFS ÊääÊñá‰ª∂ÂàÜÂ∏ÉÂ≠òÂÇ®Âà∞‰∏ç ÂêåÁöÑÊúçÂä°Âô®‰∏äÔºåËøôÁßçÊñπÂºèÊõ¥Á±ª‰ºº Xfs[1]Âíå Swift[3]ÔºåËøôÊòØ‰∏∫‰∫ÜÊèêÈ´òÊï¥‰ΩìÊÄßËÉΩ‰ª•ÂèäÁÅæÈöæÂÜó‰ΩôÁöÑËÉΩÂäõ„ÄÇ Áî±‰∫éÁ£ÅÁõòÁõ∏ÂØπÊù•ËØ¥ÊØîËæÉ‰æøÂÆúÔºåÂπ∂‰∏îÂ§çÂà∂ÁöÑÊñπÂºèÊØî RAID[9]ÊñπÊ≥ïÁÆÄÂçïÁöÑÂ§öÔºåGFS ÁõÆÂâçÂè™‰ΩøÁî®Â§çÂà∂ÁöÑÊñπÂºèÊù• ËøõË°åÂÜó‰ΩôÔºåÂõ†Ê≠§Ë¶ÅÊØî xFS ÊàñËÄÖ Swift Âç†Áî®Êõ¥Â§öÁöÑË£∏Â≠òÂÇ®Á©∫Èó¥(alex Ê≥®:Raw storageÔºåË£∏ÁõòÁöÑÁ©∫Èó¥)„ÄÇ ‰∏é AFS„ÄÅxFS„ÄÅFrangipani[12]‰ª•Âèä Intermezzo[6]Á≠âÊñá‰ª∂Á≥ªÁªü‰∏çÂêåÁöÑÊòØÔºåGFS Âπ∂Ê≤°ÊúâÂú®Êñá‰ª∂Á≥ªÁªüÂ±ÇÈù¢Êèê‰æõ ‰ªª‰Ωï Cache Êú∫Âà∂„ÄÇÊàë‰ª¨‰∏ªË¶ÅÁöÑÂ∑•‰ΩúÂú®Âçï‰∏™Â∫îÁî®Á®ãÂ∫èÊâßË°åÁöÑÊó∂ÂÄôÂá†‰πé‰∏ç‰ºöÈáçÂ§çËØªÂèñÊï∞ÊçÆÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÁöÑÂ∑•‰ΩúÊñπÂºè Ë¶Å‰πàÊòØÊµÅÂºèÁöÑËØªÂèñ‰∏Ä‰∏™Â§ßÂûãÁöÑÊï∞ÊçÆÈõÜÔºåË¶Å‰πàÊòØÂú®Â§ßÂûãÁöÑÊï∞ÊçÆÈõÜ‰∏≠ÈöèÊú∫ Seek Âà∞Êüê‰∏™‰ΩçÁΩÆÔºå‰πãÂêéÊØèÊ¨°ËØªÂèñÂ∞ëÈáèÁöÑ Êï∞ÊçÆ„ÄÇ Êüê‰∫õÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÔºåÊØîÂ¶Ç Frangipani„ÄÅxFS„ÄÅMinnesota‚Äôs GFS[11]„ÄÅGPFS[10]ÔºåÂéªÊéâ‰∫Ü‰∏≠ÂøÉÊúçÂä°Âô®ÔºåÂè™ ‰æùËµñ‰∫éÂàÜÂ∏ÉÂºèÁÆóÊ≥ïÊù•‰øùËØÅ‰∏ÄËá¥ÊÄßÂíåÂèØÁÆ°ÁêÜÊÄß„ÄÇÊàë‰ª¨ÈÄâÊã©‰∫Ü‰∏≠ÂøÉÊúçÂä°Âô®ÁöÑÊñπÊ≥ïÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜÁÆÄÂåñËÆæËÆ°ÔºåÂ¢ûÂä†ÂèØ Èù†ÊÄßÔºåËÉΩÂ§üÁÅµÊ¥ªÊâ©Â±ï„ÄÇÁâπÂà´ÂÄºÂæó‰∏ÄÊèêÁöÑÊòØÔºåÁî±‰∫éÂ§Ñ‰∫é‰∏≠ÂøÉ‰ΩçÁΩÆÁöÑ Master ÊúçÂä°Âô®‰øùÂ≠òÊúâÂá†‰πéÊâÄÊúâÁöÑ Chunk Áõ∏ÂÖ≥ ‰ø°ÊÅØÔºåÂπ∂‰∏îÊéßÂà∂ÁùÄ Chunk ÁöÑÊâÄÊúâÂèòÊõ¥ÔºåÂõ†Ê≠§ÔºåÂÆÉÊûÅÂ§ßÂú∞ÁÆÄÂåñ‰∫ÜÂéüÊú¨ÈùûÂ∏∏Â§çÊùÇÁöÑ Chunk ÂàÜÈÖçÂíåÂ§çÂà∂Á≠ñÁï•ÁöÑÂÆûÁé∞ ÊñπÊ≥ï„ÄÇÊàë‰ª¨ÈÄöËøáÂáèÂ∞ë Master ÊúçÂä°Âô®‰øùÂ≠òÁöÑÁä∂ÊÄÅ‰ø°ÊÅØÁöÑÊï∞ÈáèÔºå‰ª•ÂèäÂ∞Ü Master ÊúçÂä°Âô®ÁöÑÁä∂ÊÄÅÂ§çÂà∂Âà∞ÂÖ∂ÂÆÉËäÇÁÇπÊù•‰øùËØÅÁ≥ªÁªüÁöÑÁÅæÈöæÂÜó‰ΩôËÉΩÂäõ„ÄÇÊâ©Â±ïËÉΩÂäõÂíåÈ´òÂèØÁî®ÊÄß(ÂØπ‰∫éËØªÂèñ)ÁõÆÂâçÊòØÈÄöËøáÊàë‰ª¨ÁöÑÂΩ±Â≠ê Master ÊúçÂä°Âô®Êú∫Âà∂Êù•‰øùËØÅ ÁöÑ„ÄÇÂØπ Master ÊúçÂä°Âô®Áä∂ÊÄÅÊõ¥ÊîπÊòØÈÄöËøáÈ¢ÑÂÜôÊó•ÂøóÁöÑÊñπÂºèÂÆûÁé∞ÊåÅ‰πÖÂåñ„ÄÇ‰∏∫Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•Ë∞ÉÊï¥‰∏∫‰ΩøÁî®Á±ª‰ºº Harp[7]‰∏≠ÁöÑ primary-copy ÊñπÊ°àÔºå‰ªéËÄåÊèê‰æõÊØîÊàë‰ª¨Áé∞Âú®ÁöÑÊñπÊ°àÊõ¥‰∏•Ê†ºÁöÑ‰∏ÄËá¥ÊÄß‰øùËØÅ„ÄÇ Êàë‰ª¨Ëß£ÂÜ≥‰∫Ü‰∏Ä‰∏™ÈöæÈ¢òÔºåËøô‰∏™ÈöæÈ¢òÁ±ª‰ºº Lustre[8]Âú®Â¶Ç‰ΩïÂú®ÊúâÂ§ßÈáèÂÆ¢Êà∑Á´ØÊó∂‰øùÈöúÁ≥ªÁªüÊï¥‰ΩìÊÄßËÉΩÈÅáÂà∞ÁöÑÈóÆÈ¢ò„ÄÇ‰∏çËøáÔºåÊàë‰ª¨ÈÄöËøáÂè™ÂÖ≥Ê≥®Êàë‰ª¨ÁöÑÂ∫îÁî®Á®ãÂ∫èÁöÑÈúÄÊ±ÇÔºåËÄå‰∏çÊòØÊèê‰æõ‰∏Ä‰∏™ÂÖºÂÆπ POSIX ÁöÑÊñá‰ª∂Á≥ªÁªüÔºå‰ªéËÄåËææÂà∞‰∫ÜÁÆÄÂåñÈóÆ È¢òÁöÑÁõÆÁöÑ„ÄÇÊ≠§Â§ñÔºåGFS ËÆæËÆ°È¢ÑÊúüÊòØ‰ΩøÁî®Â§ßÈáèÁöÑ‰∏çÂèØÈù†ËäÇÁÇπÁªÑÂª∫ÈõÜÁæ§ÔºåÂõ†Ê≠§ÔºåÁÅæÈöæÂÜó‰ΩôÊñπÊ°àÊòØÊàë‰ª¨ËÆæËÆ°ÁöÑÊ†∏ÂøÉ„ÄÇ GFS ÂæàÁ±ª‰ºº NASD Êû∂ÊûÑ[4]„ÄÇNASD Êû∂ÊûÑÊòØÂü∫‰∫éÁΩëÁªúÁ£ÅÁõòÁöÑÔºåËÄå GFS ‰ΩøÁî®ÁöÑÊòØÊôÆÈÄöËÆ°ÁÆóÊú∫‰Ωú‰∏∫ Chunk Êúç Âä°Âô®ÔºåÂ∞±ÂÉè NASD ÂéüÂΩ¢‰∏≠ÊñπÊ°à‰∏ÄÊ†∑„ÄÇÊâÄ‰∏çÂêåÁöÑÊòØÔºåÊàë‰ª¨ÁöÑ Chunk ÊúçÂä°Âô®ÈááÁî®ÊÉ∞ÊÄßÂàÜÈÖçÂõ∫ÂÆöÂ§ßÂ∞èÁöÑ Chunk ÁöÑÊñπ ÂºèÔºåËÄå‰∏çÊòØÂàÜÈÖçÂèòÈïøÁöÑÂØπË±°Â≠òÂÇ®Á©∫Èó¥„ÄÇÊ≠§Â§ñÔºåGFS ÂÆûÁé∞‰∫ÜËØ∏Â¶ÇÈáçÊñ∞Ë¥üËΩΩÂùáË°°„ÄÅÂ§çÂà∂„ÄÅÊÅ¢Â§çÊú∫Âà∂Á≠âÁ≠âÂú®Áîü‰∫ßÁéØÂ¢É‰∏≠ÈúÄË¶ÅÁöÑÁâπÊÄß„ÄÇ ‰∏çÂêå‰∫é‰∏é Minnesota‚Äôs GFS Âíå NASDÔºåÊàë‰ª¨Âπ∂‰∏çÊîπÂèòÂ≠òÂÇ®ËÆæÂ§áÁöÑ Model„ÄÇÊàë‰ª¨Âè™ÂÖ≥Ê≥®Áî®ÊôÆÈÄöÁöÑËÆæÂ§áÊù•Ëß£ÂÜ≥ÈùûÂ∏∏Â§çÊùÇÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊó•Â∏∏ÁöÑÊï∞ÊçÆÂ§ÑÁêÜ„ÄÇ Êàë‰ª¨ÈÄöËøáÂéüÂ≠êÁöÑËÆ∞ÂΩïËøΩÂä†Êìç‰ΩúÂÆûÁé∞‰∫ÜÁîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÈòüÂàóÔºåËøô‰∏™ÈóÆÈ¢òÁ±ª‰ºº River[2]‰∏≠ÁöÑÂàÜÂ∏ÉÂºèÈòüÂàó„ÄÇRiver‰ΩøÁî®ÁöÑÊòØË∑®‰∏ªÊú∫ÁöÑ„ÄÅÂü∫‰∫éÂÜÖÂ≠òÁöÑÂàÜÂ∏ÉÂºèÈòüÂàóÔºå‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏™ÈòüÂàóÔºåÂøÖÈ°ª‰ªîÁªÜÊéßÂà∂Êï∞ÊçÆÊµÅ;ËÄå GFS ÈááÁî®ÂèØ‰ª•Ë¢´ Áîü‰∫ßËÄÖÂπ∂ÂèëËøΩÂä†ËÆ∞ÂΩïÁöÑÊåÅ‰πÖÂåñÁöÑÊñá‰ª∂ÁöÑÊñπÂºèÂÆûÁé∞„ÄÇRiver Ê®°ÂºèÊîØÊåÅ m-Âà∞-n ÁöÑÂàÜÂ∏ÉÂºèÈòüÂàóÔºå‰ΩÜÊòØÁº∫Â∞ëÁî±ÊåÅ‰πÖÂåñ Â≠òÂÇ®Êèê‰æõÁöÑÂÆπÈîôÊú∫Âà∂ÔºåGFS Âè™ÊîØÊåÅ m-Âà∞-1 ÁöÑÈòüÂàó„ÄÇÂ§ö‰∏™Ê∂àË¥πËÄÖÂèØ‰ª•ÂêåÊó∂ËØªÂèñ‰∏Ä‰∏™Êñá‰ª∂Ôºå‰ΩÜÊòØÂÆÉ‰ª¨ËæìÂÖ•ÊµÅÁöÑÂå∫ Èó¥ÂøÖÈ°ªÊòØÂØπÈΩêÁöÑ„ÄÇ ÁªìÊùüËØ≠Google Êñá‰ª∂Á≥ªÁªüÂ±ïÁ§∫‰∫Ü‰∏Ä‰∏™‰ΩøÁî®ÊôÆÈÄöÁ°¨‰ª∂ÊîØÊåÅÂ§ßËßÑÊ®°Êï∞ÊçÆÂ§ÑÁêÜÁöÑÁ≥ªÁªüÁöÑÁâπË¥®„ÄÇËôΩÁÑ∂‰∏Ä‰∫õËÆæËÆ°Ë¶ÅÁÇπÈÉΩÊòØÈíà ÂØπÊàë‰ª¨ÁöÑÁâπÊÆäÁöÑÈúÄË¶ÅÂÆöÂà∂ÁöÑÔºå‰ΩÜÊòØËøòÊòØÊúâÂæàÂ§öÁâπÊÄßÈÄÇÁî®‰∫éÁ±ª‰ººËßÑÊ®°ÁöÑÂíåÊàêÊú¨ÁöÑÊï∞ÊçÆÂ§ÑÁêÜ‰ªªÂä°„ÄÇ È¶ñÂÖàÔºåÊàë‰ª¨Ê†πÊçÆÊàë‰ª¨ÂΩìÂâçÁöÑÂíåÂèØÈ¢ÑÊúüÁöÑÂ∞ÜÊù•ÁöÑÂ∫îÁî®ËßÑÊ®°ÂíåÊäÄÊúØÁéØÂ¢ÉÊù•ËØÑ‰º∞‰º†ÁªüÁöÑÊñá‰ª∂Á≥ªÁªüÁöÑÁâπÊÄß„ÄÇÊàë‰ª¨ ÁöÑËØÑ‰º∞ÁªìÊûúÂ∞ÜÊàë‰ª¨ÂºïÂØºÂà∞‰∏Ä‰∏™‰ΩøÁî®ÂÆåÂÖ®‰∏çÂêå‰∫é‰º†ÁªüÁöÑËÆæËÆ°ÊÄùË∑Ø‰∏ä„ÄÇÊ†πÊçÆÊàë‰ª¨ÁöÑËÆæËÆ°ÊÄùË∑ØÔºåÊàë‰ª¨ËÆ§‰∏∫ÁªÑ‰ª∂Â§±Êïà ÊòØÂ∏∏ÊÄÅËÄå‰∏çÊòØÂºÇÂ∏∏ÔºåÈíàÂØπÈááÁî®ËøΩÂä†ÊñπÂºè(ÊúâÂèØËÉΩÊòØÂπ∂ÂèëËøΩÂä†)ÂÜôÂÖ•„ÄÅÁÑ∂ÂêéÂÜçËØªÂèñ(ÈÄöÂ∏∏Â∫èÂàóÂåñËØªÂèñ)ÁöÑÂ§ßÊñá ‰ª∂ËøõË°å‰ºòÂåñÔºå‰ª•ÂèäÊâ©Â±ïÊ†áÂáÜÊñá‰ª∂Á≥ªÁªüÊé•Âè£„ÄÅÊîæÊùæÊé•Âè£ÈôêÂà∂Êù•ÊîπËøõÊï¥‰∏™Á≥ªÁªü„ÄÇ Êàë‰ª¨Á≥ªÁªüÈÄöËøáÊåÅÁª≠ÁõëÊéßÔºåÂ§çÂà∂ÂÖ≥ÈîÆÊï∞ÊçÆÔºåÂø´ÈÄüÂíåËá™Âä®ÊÅ¢Â§çÊèê‰æõÁÅæÈöæÂÜó‰Ωô„ÄÇChunk Â§çÂà∂‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•ÂØπ Chunk ÊúçÂä°Âô®ÁöÑÂ§±ÊïàËøõË°åÂÆπÈîô„ÄÇÈ´òÈ¢ëÁéáÁöÑÁªÑ‰ª∂Â§±ÊïàË¶ÅÊ±ÇÁ≥ªÁªüÂÖ∑Â§áÂú®Á∫ø‰øÆÂ§çÊú∫Âà∂ÔºåËÉΩÂ§üÂë®ÊúüÊÄßÁöÑ„ÄÅÈÄèÊòéÁöÑ‰øÆÂ§ç ÊçüÂùèÁöÑÊï∞ÊçÆÔºå‰πüËÉΩÂ§üÁ¨¨‰∏ÄÊó∂Èó¥ÈáçÊñ∞Âª∫Á´ã‰∏¢Â§±ÁöÑÂâØÊú¨„ÄÇÊ≠§Â§ñÔºåÊàë‰ª¨‰ΩøÁî® Checksum Âú®Á£ÅÁõòÊàñËÄÖ IDE Â≠êÁ≥ªÁªüÁ∫ßÂà´ Ê£ÄÊµãÊï∞ÊçÆÊçüÂùèÔºåÂú®ËøôÊ†∑Á£ÅÁõòÊï∞ÈáèÊÉä‰∫∫ÁöÑÂ§ßÁ≥ªÁªü‰∏≠ÔºåÊçüÂùèÁéáÊòØÁõ∏ÂΩìÈ´òÁöÑ„ÄÇ Êàë‰ª¨ÁöÑËÆæËÆ°‰øùËØÅ‰∫ÜÂú®ÊúâÂ§ßÈáèÁöÑÂπ∂ÂèëËØªÂÜôÊìç‰ΩúÊó∂ËÉΩÂ§üÊèê‰æõÂæàÈ´òÁöÑÂêàËÆ°ÂêûÂêêÈáè„ÄÇÊàë‰ª¨ÈÄöËøáÂàÜÁ¶ªÊéßÂà∂ÊµÅÂíåÊï∞ÊçÆ ÊµÅÊù•ÂÆûÁé∞Ëøô‰∏™ÁõÆÊ†áÔºåÊéßÂà∂ÊµÅÂú® Master ÊúçÂä°Âô®Â§ÑÁêÜÔºåËÄåÊï∞ÊçÆÊµÅÂú® Chunk ÊúçÂä°Âô®ÂíåÂÆ¢Êà∑Á´ØÂ§ÑÁêÜ„ÄÇÂΩì‰∏ÄËà¨ÁöÑÊìç‰ΩúÊ∂â ÂèäÂà∞ Master ÊúçÂä°Âô®Êó∂ÔºåÁî±‰∫é GFS ÈÄâÊã©ÁöÑ Chunk Â∞∫ÂØ∏ËæÉÂ§ß(alex Ê≥®:‰ªéËÄåÂáèÂ∞è‰∫ÜÂÖÉÊï∞ÊçÆÁöÑÂ§ßÂ∞è)Ôºå‰ª•ÂèäÈÄöËøá Chunk Lease Â∞ÜÊéßÂà∂ÊùÉÈôêÁßª‰∫§Áªô‰∏ªÂâØÊú¨ÔºåËøô‰∫õÊé™ÊñΩÂ∞Ü Master ÊúçÂä°Âô®ÁöÑË¥üÊãÖÈôçÂà∞ÊúÄ‰Ωé„ÄÇËøô‰ΩøÂæó‰∏Ä‰∏™ÁÆÄÂçï„ÄÅ‰∏≠ÂøÉÁöÑ Master‰∏ç‰ºöÊàê‰∏∫Êàê‰∏∫Áì∂È¢à„ÄÇÊàë‰ª¨Áõ∏‰ø°Êàë‰ª¨ÂØπÁΩëÁªúÂçèËÆÆÊ†àÁöÑ‰ºòÂåñÂèØ‰ª•ÊèêÂçáÂΩìÂâçÂØπ‰∫éÊØèÂÆ¢Êà∑Á´ØÁöÑÂÜôÂÖ•ÂêûÂêêÈáèÈôêÂà∂„ÄÇ GFS ÊàêÂäüÁöÑÂÆûÁé∞‰∫ÜÊàë‰ª¨ÂØπÂ≠òÂÇ®ÁöÑÈúÄÊ±ÇÔºåÂú® Google ÂÜÖÈÉ®ÔºåÊó†ËÆ∫ÊòØ‰Ωú‰∏∫Á†îÁ©∂ÂíåÂºÄÂèëÁöÑÂ≠òÂÇ®Âπ≥Âè∞ÔºåËøòÊòØ‰Ωú‰∏∫ Áîü‰∫ßÁ≥ªÁªüÁöÑÊï∞ÊçÆÂ§ÑÁêÜÂπ≥Âè∞ÔºåÈÉΩÂæóÂà∞‰∫ÜÂπøÊ≥õÁöÑÂ∫îÁî®„ÄÇÂÆÉÊòØÊàë‰ª¨ÊåÅÁª≠ÂàõÊñ∞ÂíåÂ§ÑÁêÜÊï¥‰∏™ WEB ËåÉÂõ¥ÂÜÖÁöÑÈöæÈ¢òÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÂ∑•ÂÖ∑„ÄÇ","raw":null,"content":null,"categories":[{"name":"paper","slug":"paper","permalink":"https://stanxia.github.io/categories/paper/"}],"tags":[{"name":"paper","slug":"paper","permalink":"https://stanxia.github.io/tags/paper/"}]},{"title":"Hive‰∫ãÂä°-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£","slug":"Hive‰∫ãÂä°-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£","date":"2017-12-13T16:34:17.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/13/Hive‰∫ãÂä°-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£/","link":"","permalink":"https://stanxia.github.io/2017/12/13/Hive‰∫ãÂä°-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£/","excerpt":"ACIDÁÆÄ‰ªã\nACID‰ª£Ë°®Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÁöÑÂõõ‰∏™ÁâπÊÄß:\n\nÂéüÂ≠êÊÄßÔºàAtomicityÔºâ:‰∏Ä‰∏™‰∫ãÂä°ÊòØ‰∏Ä‰∏™‰∏çÂèØÂÜçÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰ΩçÔºå‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúË¶Å‰πàÈÉΩÂèëÁîüÔºåË¶Å‰πàÈÉΩ‰∏çÂèëÁîü„ÄÇ\n‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ:‰∫ãÂä°ÂºÄÂßã‰πãÂâçÂíå‰∫ãÂä°ÁªìÊùü‰ª•ÂêéÔºåÊï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥ÊÄßÁ∫¶ÊùüÊ≤°ÊúâË¢´Á†¥Âùè„ÄÇËøôÊòØËØ¥Êï∞ÊçÆÂ∫ì‰∫ãÂä°‰∏çËÉΩÁ†¥ÂùèÂÖ≥Á≥ªÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß‰ª•Âèä‰∏öÂä°ÈÄªËæë‰∏äÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ\nÈöîÁ¶ªÊÄßÔºàIsolationÔºâ:Â§ö‰∏™‰∫ãÂä°Âπ∂ÂèëËÆøÈóÆÔºå‰∫ãÂä°‰πãÈó¥ÊòØÈöîÁ¶ªÁöÑÔºå‰∏Ä‰∏™‰∫ãÂä°‰∏çÂΩ±ÂìçÂÖ∂ÂÆÉ‰∫ãÂä°ËøêË°åÊïàÊûú„ÄÇËøôÊåáÁöÑÊòØÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÔºåÂΩì‰∏çÂêåÁöÑ‰∫ãÂä°ÂêåÊó∂Êìç‰ΩúÁõ∏ÂêåÁöÑÊï∞ÊçÆÊó∂ÔºåÊØè‰∏™‰∫ãÂä°ÈÉΩÊúâÂêÑËá™ÂÆåÊï¥ÁöÑÊï∞ÊçÆÁ©∫Èó¥„ÄÇ‰∫ãÂä°Êü•ÁúãÊï∞ÊçÆÊõ¥Êñ∞Êó∂ÔºåÊï∞ÊçÆÊâÄÂ§ÑÁöÑÁä∂ÊÄÅË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂÆÉ‰πãÂâçÁöÑÁä∂ÊÄÅÔºåË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂêéÁöÑÁä∂ÊÄÅÔºå‰∫ãÂä°‰∏ç‰ºöÊü•ÁúãÂà∞‰∏≠Èó¥Áä∂ÊÄÅÁöÑÊï∞ÊçÆ„ÄÇ‰∫ãÂä°‰πãÈó¥ÁöÑÁõ∏Â∫îÂΩ±ÂìçÔºåÂàÜÂà´‰∏∫ÔºöËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØª„ÄÅ‰∏¢Â§±Êõ¥Êñ∞„ÄÇ\nÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ:ÊÑèÂë≥ÁùÄÂú®‰∫ãÂä°ÂÆåÊàê‰ª•ÂêéÔºåËØ•‰∫ãÂä°ÈîÅÂØπÊï∞ÊçÆÂ∫ìÊâÄ‰ΩúÁöÑÊõ¥Êîπ‰æøÊåÅ‰πÖÁöÑ‰øùÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰πã‰∏≠ÔºåÂπ∂‰∏ç‰ºöË¢´ÂõûÊªö„ÄÇ\n\nÂú®Hive0.13‰∏≠Ê∑ªÂä†‰∫ãÂä°‰πãÂêéÔºåÂú®ÂàÜÂå∫Á∫ßÂà´‰∏äÊèê‰æõ‰∫ÜÂéüÂ≠êÊÄß„ÄÅ‰∏ÄËá¥ÊÄßÂíåÊåÅ‰πÖÊÄß„ÄÇÂèØ‰ª•ÈÄöËøáÊâìÂºÄÂèØÁî®ÁöÑÈîÅÂÆöÊú∫Âà∂(ZooKeeperÊàñÂÜÖÂ≠ò)Êù•Êèê‰æõÈöîÁ¶ª„ÄÇÁé∞Âú®ÂèØ‰ª•Âú®Ë°åÁ∫ßÂà´‰∏äÊèê‰æõÂÆåÊï¥ÁöÑACIDËØ≠‰πâÔºåËøôÊ†∑‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•Ê∑ªÂä†Ë°åÔºåËÄåÂè¶‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•Âú®Áõ∏ÂêåÁöÑÂàÜÂå∫‰∏äËØªÂèñÔºåËÄå‰∏ç‰ºöÁõ∏‰∫íÂπ≤Êâ∞„ÄÇ","text":"ACIDÁÆÄ‰ªã ACID‰ª£Ë°®Êï∞ÊçÆÂ∫ì‰∫ãÂä°ÁöÑÂõõ‰∏™ÁâπÊÄß: ÂéüÂ≠êÊÄßÔºàAtomicityÔºâ:‰∏Ä‰∏™‰∫ãÂä°ÊòØ‰∏Ä‰∏™‰∏çÂèØÂÜçÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰ΩçÔºå‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúË¶Å‰πàÈÉΩÂèëÁîüÔºåË¶Å‰πàÈÉΩ‰∏çÂèëÁîü„ÄÇ ‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ:‰∫ãÂä°ÂºÄÂßã‰πãÂâçÂíå‰∫ãÂä°ÁªìÊùü‰ª•ÂêéÔºåÊï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥ÊÄßÁ∫¶ÊùüÊ≤°ÊúâË¢´Á†¥Âùè„ÄÇËøôÊòØËØ¥Êï∞ÊçÆÂ∫ì‰∫ãÂä°‰∏çËÉΩÁ†¥ÂùèÂÖ≥Á≥ªÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß‰ª•Âèä‰∏öÂä°ÈÄªËæë‰∏äÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ ÈöîÁ¶ªÊÄßÔºàIsolationÔºâ:Â§ö‰∏™‰∫ãÂä°Âπ∂ÂèëËÆøÈóÆÔºå‰∫ãÂä°‰πãÈó¥ÊòØÈöîÁ¶ªÁöÑÔºå‰∏Ä‰∏™‰∫ãÂä°‰∏çÂΩ±ÂìçÂÖ∂ÂÆÉ‰∫ãÂä°ËøêË°åÊïàÊûú„ÄÇËøôÊåáÁöÑÊòØÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÔºåÂΩì‰∏çÂêåÁöÑ‰∫ãÂä°ÂêåÊó∂Êìç‰ΩúÁõ∏ÂêåÁöÑÊï∞ÊçÆÊó∂ÔºåÊØè‰∏™‰∫ãÂä°ÈÉΩÊúâÂêÑËá™ÂÆåÊï¥ÁöÑÊï∞ÊçÆÁ©∫Èó¥„ÄÇ‰∫ãÂä°Êü•ÁúãÊï∞ÊçÆÊõ¥Êñ∞Êó∂ÔºåÊï∞ÊçÆÊâÄÂ§ÑÁöÑÁä∂ÊÄÅË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂÆÉ‰πãÂâçÁöÑÁä∂ÊÄÅÔºåË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂêéÁöÑÁä∂ÊÄÅÔºå‰∫ãÂä°‰∏ç‰ºöÊü•ÁúãÂà∞‰∏≠Èó¥Áä∂ÊÄÅÁöÑÊï∞ÊçÆ„ÄÇ‰∫ãÂä°‰πãÈó¥ÁöÑÁõ∏Â∫îÂΩ±ÂìçÔºåÂàÜÂà´‰∏∫ÔºöËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØª„ÄÅ‰∏¢Â§±Êõ¥Êñ∞„ÄÇ ÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ:ÊÑèÂë≥ÁùÄÂú®‰∫ãÂä°ÂÆåÊàê‰ª•ÂêéÔºåËØ•‰∫ãÂä°ÈîÅÂØπÊï∞ÊçÆÂ∫ìÊâÄ‰ΩúÁöÑÊõ¥Êîπ‰æøÊåÅ‰πÖÁöÑ‰øùÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰πã‰∏≠ÔºåÂπ∂‰∏ç‰ºöË¢´ÂõûÊªö„ÄÇ Âú®Hive0.13‰∏≠Ê∑ªÂä†‰∫ãÂä°‰πãÂêéÔºåÂú®ÂàÜÂå∫Á∫ßÂà´‰∏äÊèê‰æõ‰∫ÜÂéüÂ≠êÊÄß„ÄÅ‰∏ÄËá¥ÊÄßÂíåÊåÅ‰πÖÊÄß„ÄÇÂèØ‰ª•ÈÄöËøáÊâìÂºÄÂèØÁî®ÁöÑÈîÅÂÆöÊú∫Âà∂(ZooKeeperÊàñÂÜÖÂ≠ò)Êù•Êèê‰æõÈöîÁ¶ª„ÄÇÁé∞Âú®ÂèØ‰ª•Âú®Ë°åÁ∫ßÂà´‰∏äÊèê‰æõÂÆåÊï¥ÁöÑACIDËØ≠‰πâÔºåËøôÊ†∑‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•Ê∑ªÂä†Ë°åÔºåËÄåÂè¶‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÂèØ‰ª•Âú®Áõ∏ÂêåÁöÑÂàÜÂå∫‰∏äËØªÂèñÔºåËÄå‰∏ç‰ºöÁõ∏‰∫íÂπ≤Êâ∞„ÄÇ‰ΩøÁî®ACIDËØ≠‰πâÁöÑ‰∫ãÂä°Ë¢´Ê∑ªÂä†Âà∞Hive‰∏≠Ôºå‰ª•Ëß£ÂÜ≥‰ª•‰∏ãÁî®‰æã: ÊµÅÊï∞ÊçÆÁöÑÊé•ÂÖ•„ÄÇËÆ∏Â§öÁî®Êà∑ÈÉΩ‰ΩøÁî® Apache Flume, Apache Storm, or Apache Kafka Â∞ÜÊµÅÂºèÊï∞ÊçÆÂØºÂÖ•HadoopÈõÜÁæ§„ÄÇ Ëøô‰∫õÂ∑•ÂÖ∑ÈÉΩÊòØÊØèÁßíÁôæ‰∏áË°åÁ∫ßÁöÑÊï∞ÊçÆÂÜôÂÖ•ÔºåËÄåHiveÂè™ËÉΩÊØèÂçÅ‰∫îÂàÜÈíüÂà∞‰∏Ä‰∏™Â∞èÊó∂Ê∑ªÂä†‰∏ÄÊ¨°ÂàÜÂå∫„ÄÇÂø´ÈÄüÁöÑÂ¢ûÂä†ÂàÜÂå∫‰ºöÂØπË°®‰∏≠ÁöÑÂàÜÂå∫Êï∞ÈáèÂΩ¢ÊàêÂéãÂäõ„ÄÇÂΩìÁÑ∂ÂèØ‰ª•‰∫ãÂÖàÂàõÂª∫Â•ΩÂàÜÂå∫ÂÜçÂ∞ÜÊï∞ÊçÆÂØºÂÖ•Ôºå‰ΩÜËøôÊ†∑‰ºöÂºïËµ∑ËÑèËØªÔºåËÄå‰∏îÁõÆÂΩï‰∏ãÁîüÊàêÁöÑÂ∞èÊñá‰ª∂‰ºöÂØπnamenodeÈÄ†ÊàêÂæàÂ§ßÁöÑÂéãÂäõ„ÄÇËÄåÊñ∞ÁâπÊÄßÂèØ‰ª•ÂæàÂ•ΩÁöÑËß£ÂÜ≥‰∏äËø∞ÈóÆÈ¢ò Áª¥Â∫¶Ë°®ÁöÑÁºìÊÖ¢ÂèòÂåñÔºöÂú®ÂÖ∏ÂûãÁöÑÊòüÂûãÊû∂ÊûÑÊï∞ÊçÆ‰ªìÂ∫ì‰∏≠ÔºåÁª¥Â∫¶Ë°®ÈöèÊó∂Èó¥ÊÖ¢ÊÖ¢ÂèòÂåñ„ÄÇ‰æãÂ¶ÇÔºåÈõ∂ÂîÆÂïÜÂ∞Ü‰ºöÊâìÂºÄÊñ∞ÁöÑÂïÜÂ∫óÔºåËøô‰∫õÂïÜÂ∫óÈúÄË¶ÅË¢´Ê∑ªÂä†Âà∞ÂïÜÂ∫óÁöÑË°®‰∏≠ÔºåÊàñËÄÖÁé∞ÊúâÁöÑÂïÜÂ∫óÂèØËÉΩ‰ºöÊîπÂèòÂÆÉÁöÑÂπ≥ÊñπËã±Â∞∫ÊàñÂÖ∂‰ªñ‰∏Ä‰∫õË¢´Ë∑üË∏™ÁöÑÁâπÊÄß„ÄÇËøô‰∫õÊõ¥Êîπ‰ºöÂØºËá¥ÊèíÂÖ•Âçï‰∏™ËÆ∞ÂΩïÊàñÊõ¥Êñ∞ËÆ∞ÂΩï(ÂèñÂÜ≥‰∫éÊâÄÈÄâÊã©ÁöÑÁ≠ñÁï•)„ÄÇHive‰ªé0.14ÂºÄÂßãÊîØÊåÅ„ÄÇ Êï∞ÊçÆÊõ¥Êñ∞„ÄÇ‰ªéHive 0.14ÂºÄÂßãÔºåÂèØ‰ª• INSERT, UPDATE, Âíå DELETE„ÄÇ ‰ΩøÁî®SQL MERGEËØ≠Âè•ËøõË°åÊâπÈáèÊõ¥Êñ∞„ÄÇ ‰∫ãÂä°ÈôêÂà∂ BEGIN, COMMIT, and ROLLBACKËøò‰∏çÊîØÊåÅ„ÄÇÊâÄÊúâÊìç‰ΩúÈÉΩÊòØËá™Âä®Êèê‰∫§ÁöÑ„ÄÇËØ•ËÆ°ÂàíÂ∞ÜÂú®Êú™Êù•ÁöÑÁâàÊú¨‰∏≠Êèê‰æõÊîØÊåÅ„ÄÇ Áé∞ÁõÆÂâçÂè™ÊîØÊåÅORCÊñá‰ª∂Ê†ºÂºè„ÄÇÂ∑≤ÁªèÊûÑÂª∫‰∫ÜËøôÊ†∑ÁöÑÂäüËÉΩÔºåÂèØ‰ª•ÈÄöËøá‰ªª‰ΩïÂ≠òÂÇ®Ê†ºÂºèÊù•‰ΩøÁî®‰∫ãÂä°Ôºå‰ª•Á°ÆÂÆöÊõ¥Êñ∞ÊàñÂà†Èô§Â¶Ç‰ΩïÂ∫îÁî®‰∫éÂü∫Êú¨ËÆ∞ÂΩï(Âü∫Êú¨‰∏äÔºåÂÖ∑ÊúâÊòæÂºèÊàñÈöêÂºèË°åid)Ôºå‰ΩÜÂà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÈõÜÊàêÂ∑•‰ΩúËøòÂè™ÊòØÁî®‰∫éORC„ÄÇ ‰∫ãÂä°ÈªòËÆ§‰∏∫ÂÖ≥Èó≠ÁöÑ„ÄÇ Ë°®ÂøÖÈ°ªË¶ÅÂàÜÊ°∂ÊâçËÉΩÊîØÊåÅ‰∫ãÂä°„ÄÇÂõ†‰∏∫Â§ñÈÉ®Ë°®‰∏çÂèóÂàÜÊ°∂ÁöÑÊéßÂà∂ÔºåÂõ†ËÄåÂ§ñÈÉ®Ë°®Âπ∂‰∏çÊîØÊåÅ‰∫ãÂä°„ÄÇ ‰ªé‰∏Ä‰∏™ non_ACID Ë°®ËØªÂÜô ACID Ë°® ÊòØ‰∏çÂÖÅËÆ∏ÁöÑ„ÄÇ‰∫ãÂä°ÁÆ°ÁêÜÂô®ÂøÖÈ°ªËÆæÁΩÆ‰∏∫Ôºöorg.apache.hadoop.hive.ql.lockmgr.DbTxnManager „ÄÇ ÁõÆÂâçÂè™ÊîØÊåÅÂø´ÁÖßÁ∫ßÂà´ÁöÑÈöîÁ¶ª„ÄÇ Áé∞ÊúâÁöÑZooKeeperÂíåÂÜÖÂ≠ò‰∏≠ÁöÑÈîÅÁÆ°ÁêÜÂô®‰∏é‰∫ãÂä°‰∏çÂÖºÂÆπ„ÄÇ ACIDË°®‰∏çÊîØÊåÅ‰ΩøÁî®ALTER TABLEÁöÑÊ®°ÂºèÊõ¥Êîπ„ÄÇ ‰ΩøÁî® ORACLE ‰Ωú‰∏∫ÂÖÉÊï∞ÊçÆÂ∫ìÔºå‚Äùdatanucleus.connectionPoolingType=BONECP‚Äù ÂèØËÉΩ‰ºöÂá∫Áé∞Ôºö‚ÄùNo such lock..‚Äù Âíå ‚ÄúNo such transaction‚Ä¶‚ÄùÁ≠âÈîôËØØ„ÄÇËØ∑ËÆæÁΩÆ‰∏∫Ôºö‚Äùdatanucleus.connectionPoolingType=DBCP‚Äù „ÄÇ ‰∫ãÂä°Ë°®‰∏çÊîØÊåÅ ÔºöLOAD DATA‚Ä¶ ËØ≠Ê≥ï„ÄÇ ÊµÅ APIs Hive Êèê‰æõÊï∞ÊçÆ ÊµÅÂºèÊèíÂÖ•ÂíåÊµÅÂºèÊõ¥Êñ∞ÁöÑ APIs: Hive HCatalog Streaming API HCatalog Streaming Mutation API (Hive 2.0.0 Âèä‰ª•‰∏äÂèØÁî®) ËØ≠Ê≥ï‰øÆÊîπ ‰ªéHive 0.14. ÂºÄÂßãÔºåINSERT‚Ä¶VALUES, UPDATE, and DELETE Â∑≤ÁªèÊ∑ªÂä†Ëøõ SQL ËØ≠Ê≥ï„ÄÇÂá†‰∏™Êñ∞ÂëΩ‰ª§Â∑≤ÁªèÊ∑ªÂä†Ëøõ Hive ÁöÑ DDL ÊîØÊåÅ ACID Âíå ‰∫ãÂä°, Âπ∂‰øÆÊîπ‰∏Ä‰∫õÂ∑≤ÁªèÂ≠òÂú®ÁöÑ DDL „ÄÇ Êñ∞ÂëΩ‰ª§Ôºö SHOW TRANSACTIONS SHOW COMPACTIONS ABORT TRANSACTIONS ‰øÆÊîπÁöÑÂëΩ‰ª§Ôºö SHOW LOCKS :Êèê‰æõ‰∏é‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊñ∞ÈîÅÁöÑ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúÊ≠£Âú®‰ΩøÁî® ZooKeeper ÊàñËÄÖÂÜÖÂ≠òÈîÅÁÆ°ÁêÜÔºåÂëΩ‰ª§ÁöÑËæìÂá∫Â∞ÜÊúâ‰∏çÂêå„ÄÇ ALTER TABLE :Ê∑ªÂä†Êñ∞ÂäüËÉΩÔºåËØ∑Ê±ÇË°®ÊàñÂàÜÂå∫ÁöÑÂéãÁº©„ÄÇ ‰∏ÄËà¨Êù•ËØ¥ÔºåÁî®Êà∑‰∏çÈúÄË¶ÅËØ∑Ê±ÇÂéãÁº©ÔºåÂõ†‰∏∫Á≥ªÁªüÂ∞ÜÊ£ÄÊµãÂà∞ÂØπÂÆÉ‰ª¨ÁöÑÈúÄÊ±ÇÂπ∂ÂêØÂä®ÂéãÁº©„ÄÇ ÁÑ∂ËÄåÔºåÂ¶ÇÊûúÂØπ‰∏Ä‰∏™Ë°®ÂÖ≥Èó≠‰∫ÜÂéãÁº©ÔºåÊàñËÄÖÁî®Êà∑Â∏åÊúõÂú®Á≥ªÁªü‰∏çÈÄâÊã©ÁöÑÊó∂ÂÄôÂéãÁº©Ë°®, ALTER TABLE ÂèØÁî®‰∫éÂêØÂä®ÂéãÁº©„ÄÇ‰∏∫‰∫ÜËßÇÂØüÂéãÁº©ÁöÑËøõÂ∫¶ÔºåÁî®Êà∑ÂèØ‰ª•‰ΩøÁî® SHOW COMPACTIONS „ÄÇ Âü∫Á°ÄËÆæËÆ° HDFS ‰∏çÊîØÊåÅÂØπÊñá‰ª∂ËøõË°åÂ∞±Âú∞‰øÆÊîπ„ÄÇ‰πü‰∏çÊèê‰æõËØªÁöÑ‰∏ÄËá¥ÊÄßÔºåÂπ∂‰∏îÂΩìÊúâÊï∞ÊçÆËøΩÂä†Âà∞Êñá‰ª∂ÔºåHDFS ‰∏çÂØπËØªÊï∞ÊçÆÁöÑÁî®Êà∑Êèê‰æõ‰∏ÄËá¥ÊÄßÁöÑ„ÄÇ‰∏∫‰∫ÜÂú® HDFS ‰∏äÊèê‰æõËøô‰∫õÁâπÊÄßÔºåÊàë‰ª¨ÈÅµÂæ™‰∫ÜÂÖ∂‰ªñÊï∞ÊçÆ‰ªìÂ∫ìÂ∑•ÂÖ∑‰∏≠‰ΩøÁî®ÁöÑÊ†áÂáÜÊñπÊ≥ï„ÄÇ Ë°®ÊàñÂàÜÂå∫ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Âú®‰∏ÄÁªÑ base Êñá‰ª∂‰∏≠„ÄÇ Êñ∞ÁöÑËÆ∞ÂΩï„ÄÅÊõ¥Êñ∞ÂíåÂà†Èô§Â≠òÂÇ®Âú® delta Êñá‰ª∂‰∏≠„ÄÇÊØè‰∏™ÊîπÂèòË°®ÊàñÂàÜÂå∫ÁöÑ‰∫ãÂä°‰∫ßÁîü‰∏ÄÁªÑÊñ∞ÁöÑ delta Êñá‰ª∂ „ÄÇËØªÁöÑÊó∂ÂÄôÔºåÂêàÂπ∂ base Âíå delta Êñá‰ª∂, Â∫îÁî®ÊâÄÊúâÁöÑÊõ¥Êñ∞ÂíåÂà†Èô§„ÄÇ Base Âíå Delta ÁõÆÂΩï‰∏Ä‰∏™ÂàÜÂå∫Êàñ‰∏Ä‰∏™ÈùûÂàÜÂå∫Ë°®ÁöÑÊâÄÊúâÊñá‰ª∂ÈÉΩÂú®Âêå‰∏Ä‰∏™ÁõÆÂΩï‰∏ã„ÄÇÊúâÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºå‰ªª‰Ωï ACID ÁöÑÂàÜÂå∫ÔºàÊàñÈùûÂàÜÂå∫Ë°®ÔºâÈÉΩÊúâ‰∏Ä‰∏™ base Êñá‰ª∂ÁõÆÂΩïÔºåÂíå‰∏Ä‰∏™ delta Êñá‰ª∂ÁõÆÂΩï„ÄÇ 1234567hive&gt; dfs -ls -R /user/hive/warehouse/t;drwxr-xr-x - ekoifman staff 0 2016-06-09 17:03 /user/hive/warehouse/t/base_0000022-rw-r--r-- 1 ekoifman staff 602 2016-06-09 17:03 /user/hive/warehouse/t/base_0000022/bucket_00000drwxr-xr-x - ekoifman staff 0 2016-06-09 17:06 /user/hive/warehouse/t/delta_0000023_0000023_0000-rw-r--r-- 1 ekoifman staff 611 2016-06-09 17:06 /user/hive/warehouse/t/delta_0000023_0000023_0000/bucket_00000drwxr-xr-x - ekoifman staff 0 2016-06-09 17:07 /user/hive/warehouse/t/delta_0000024_0000024_0000-rw-r--r-- 1 ekoifman staff 610 2016-06-09 17:07 /user/hive/warehouse/t/delta_0000024_0000024_0000/bucket_00000 ÂêàÂπ∂ÂêàÂπ∂ÊòØ‰∏ÄÁªÑËøêË°åÂú® Metastore‰∏≠ÊîØÊåÅ ACID Á≥ªÁªüÁöÑÂêéÂè∞Á®ãÂ∫è„ÄÇÂåÖÂê´ Initiator, Worker, Cleaner, AcidHouseKeeperServiceis Âíå‰∏Ä‰∫õÂÖ∂‰ªñÁöÑ„ÄÇ Delta Êñá‰ª∂ÂêàÂπ∂ÈöèÁùÄ‰øÆÊîπÁöÑÊìç‰ΩúÔºåË∂äÊù•Ë∂äÂ§öÁöÑdeltaÊñá‰ª∂Ë¢´ÂàõÂª∫ÔºåÈúÄË¶ÅÂêàÂπ∂‰ª•‰øùÊåÅË∂≥Â§üÁöÑÊÄßËÉΩ„ÄÇÊúâ‰∏§ÁßçÁ±ªÂûãÁöÑÂêàÂπ∂ÔºåminorÂíåmajor„ÄÇ Minor ÂêàÂπ∂ ÔºöÂú®ÊØè‰∏Ä‰∏™ bucket ÔºåÂ∞Ü‰∏ÄÁªÑÂ∑≤ÁªèÂ≠òÂú®ÁöÑ delta Êñá‰ª∂ÂêàÂπ∂ÈáçÂÜôÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑ delta Êñá‰ª∂‰∏≠„ÄÇ Major ÂêàÂπ∂ ÔºöÂú®ÊØè‰∏Ä‰∏™ bucket ÔºåÂ∞Ü‰∏Ä‰∏™ÊàñÂ§ö‰∏™ delta Êñá‰ª∂Âíå bucket ÁöÑ base Êñá‰ª∂ÂêàÂπ∂ÈáçÂÜôÂà∞‰∏Ä‰∏™Êñ∞ÁöÑ base Êñá‰ª∂‰∏≠. Major ÂêàÂπ∂ÊïàÁéáÈ´ò‰ΩÜËä±ÈîÄÂ§ß„ÄÇ ÊâÄÊúâÁöÑÂêàÂπ∂ÈÉΩÂú®ÂêéÂè∞ÂÆåÊàêÔºåÂπ∂‰∏î‰∏çÂ¶®Á¢çÂØπÊï∞ÊçÆÂΩìÂâçÁöÑËØªÂíåÂÜô„ÄÇ ÂêàÂπ∂ÂÆåÊâÄÊúâÁöÑÊóßÊñá‰ª∂‰πãÂêéÔºåÂ∞±Âà†Èô§ÊéâËøô‰∫õÊóßÊñá‰ª∂„ÄÇ Initiator ÂàùÂßãÂåñÂô®Ëøô‰∏™Ê®°ÂùóË¥üË¥£ÂèëÁé∞Âì™‰∫õË°®ÊàñÂàÜÂå∫Â∫îËØ•Ë¢´ÂêàÂπ∂„ÄÇ ÈÄöËøáËÆæÁΩÆÔºöhive.compactor.initiator.on ÂºÄÂêØ„ÄÇÊØè‰∏™ÂêàÂπ∂‰ªªÂä°Â§ÑÁêÜ‰∏Ä‰∏™ÂàÜÂå∫ (Êàñ‰∏Ä‰∏™ÈùûÂàÜÂå∫Ë°®). Â¶ÇÊûúËøûÁª≠ÂêàÂπ∂Â§±Ë¥•Ê¨°Êï∞Ë∂ÖËøá hive.compactor.initiator.failed.compacts.threshold ËÆæÂÆöÁöÑÂÄºÔºåËØ•ÂàÜÂå∫ÁöÑËá™Âä®ÂêàÂπ∂Ë∞ÉÂ∫¶Â∞Ü‰ºöË¢´ÂÅúÊ≠¢„ÄÇ Worker Â∑•‰ΩúÊâßË°åÂô®ÊØè‰∏™ worker Â§ÑÁêÜ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂêàÂπ∂‰ªªÂä°. ÂêàÂπ∂ÊòØ MapReduce jobÔºåÂêçÂ≠óÊòØ: -compactor-... ÊØè‰∏Ä‰∏™worker Êèê‰∫§ job Âà∞ÈõÜÁæ§‰∏ä (ÈÄöËøáÂÆö‰πâÁöÑ hive.compactor.job.queue) Âπ∂Á≠âÁùÄ‰ªªÂä°ÂÆåÊàê„ÄÇhive.compactor.worker.threads ÂÜ≥ÂÆö‰∫ÜÊØè‰∏™ Metastore ‰∏≠ Workers ÁöÑÊï∞Èáè„ÄÇHive ‰ªìÂ∫ì‰∏≠ÁöÑ Workers ÁöÑÊÄªÊï∞ÂÜ≥ÂÆö‰∫ÜÂΩìÂâçÂêàÂπ∂‰ªªÂä°ÁöÑÊúÄÂ§ßÂÄº„ÄÇ Cleaner Ê∏ÖÈô§Âô®ËØ•Á®ãÂ∫èÁöÑËÅåË¥£ÔºöÂà†Èô§ÂêàÂπ∂Âêé‰∏çÂÜçÈúÄË¶ÅÁöÑ delta Êñá‰ª∂. AcidHouseKeeperService ACIDÁÆ°ÂÆ∂ÊúçÂä°ÂØªÊâæÂú® hive.txn.timeout Êó∂Èó¥ÂÜÖÊ≤°ÊúâÂøÉË∑≥ÁöÑ‰∫ãÂä°ÔºåÂπ∂Â∞ÜÂÖ∂ÁªàÊ≠¢„ÄÇËØ•Á≥ªÁªüÂÅáÂÆöÂèëËµ∑‰∫ãÂä°ÁöÑÂÆ¢Êà∑Êú∫ÂÅúÊ≠¢‰∫ÜÂøÉË∑≥ÔºåËÄåÈîÅÂÆöÁöÑËµÑÊ∫êÂ∫îËØ•Ë¢´ÈáäÊîæ„ÄÇ SHOW COMPACTIONS Êü•ÁúãÂêàÂπ∂Ëøô‰∏™ÂëΩ‰ª§ÊòæÁ§∫ÁõÆÂâçÊ≠£Âú®ËøêË°åÁöÑÂêàÂπ∂‰ø°ÊÅØÔºåÂíåÊúÄËøëÁöÑÂêàÂπ∂ÂéÜÂè≤ (ÈÖçÁΩÆÁöÑÊó∂Èó¥ËåÉÂõ¥ÂÜÖ)„ÄÇ ‰ªé HIV-12353 ÂºÄÂßãÊîØÊåÅÂéÜÂè≤ÊòæÁ§∫„ÄÇ ‰∫ãÂä°ÔºèÈîÅ ÁÆ°ÁêÜÂô®Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™Âêç‰∏∫‚Äú‰∫ãÂä°ÁÆ°ÁêÜÂô®‚ÄùÁöÑÊñ∞ÈÄªËæëÂÆû‰ΩìÔºåÂÆÉÂåÖÂê´‰∫Ü‰ª•ÂâçÁöÑ‚ÄúÊï∞ÊçÆÂ∫ì/Ë°®/ÂàÜÂå∫ÈîÅÁÆ°ÁêÜÂô®‚ÄùÊ¶ÇÂøµ„ÄÇ(hive.lock.manager with default of org.apache.hadoop.hive.ql.lockmgr.zookeeper.ZooKeeperHiveLockManager). ‰∫ãÂä°ÁÆ°ÁêÜÂô®Áé∞Âú®ËøòË¥üË¥£ÁÆ°ÁêÜ‰∫ãÂä°ÈîÅ„ÄÇÈªòËÆ§ÁöÑ DummyTxnManager Ê®°Êãü‰∫ÜËÄÅÁâàÊú¨ Hive ÁöÑË°å‰∏∫: Ê≤°Êúâ‰∫ãÂä°Âíå‰ΩøÁî® hive.lock.manager Â±ûÊÄßÁî®Êù•‰∏∫Ë°®ÔºåÂàÜÂå∫ÔºåÊï∞ÊçÆÂ∫ìÂàõÂª∫ÈîÅÁÆ°ÁêÜÂô®„ÄÇÂú® Hive metastore ‰∏≠Êñ∞Ê∑ªÂä†ÁöÑ DbTxnManager ÁÆ°ÁêÜÊâÄÊúâÁöÑÈîÅ/‰∫ãÂä°Âíå DbLockManager (Âú®ÊúçÂä°Âô®Âá∫Áé∞ÊïÖÈöúÊó∂Ôºå‰∫ãÂä°ÂíåÈîÅÊòØÊåÅ‰πÖÁöÑ). ËøôÊÑèÂë≥ÁùÄÂú®ÂêØÁî®‰∫ãÂä°Êó∂Ôºå‰ª•ÂâçÈîÅÂÆöZooKeeperÁöÑË°å‰∏∫‰∏çÂÜçÂ≠òÂú®„ÄÇ ‰ªé lock ÊåÅÊúâËÄÖÂíå‰∫ãÂä° initiators Âà∞ metastore ÁöÑÂøÉË∑≥ËøûÊé•ÔºåÂ¶ÇÊûúÂøÉË∑≥Ë∂ÖÊó∂ÔºåÂàôËøô‰∏™ÈîÅÊàñ‰∫ãÂä°Â∞ÜË¢´ËàçÂºÉ„ÄÇ ‰ªéhive 1.30Ëµ∑ÔºåDbLockManger ÊåÅÁª≠Ëé∑ÂèñÈîÅÁöÑÂë®ÊúüÂèØ‰ª•ÈÄöËøá hive.lock.numretires Âíå hive.lock.sleep.between.retries. ‰∏§‰∏™Â±ûÊÄßËÆæÁΩÆ„ÄÇÂ¶ÇÊûúDbLockManger Ëé∑ÂèñÈîÅÂ§±Ë¥•ÔºåËøá‰∏ÄÊÆµÊó∂Èó¥‰πãÂêé‰ºöËøõË°åÈáçËØï„ÄÇ‰∏∫‰∫ÜÊîØÊåÅÁü≠Êü•ËØ¢ÂêåÊó∂‰∏çÂØπmetastoreÈÄ†ÊàêË¥üÊãÖÔºåDbLockManger Âú®ÊØèÊ¨°ÈáçËØïÂêéÂä†ÂÄçÁ≠âÂæÖÊó∂Èïø„ÄÇ Ê≥®ÊÑèÔºöDbTxnManager ÂèØ‰ª•Ëé∑ÂèñÊâÄÊúâÁöÑË°®ÁöÑÈîÅÔºåÂç≥‰æøÈÇ£‰∫õÊ≤°ÊúâËÆæÁΩÆtransactional=trueÂ±ûÊÄßÁöÑË°®„ÄÇÈªòËÆ§ÂØπ‰∏Ä‰∏™Èùû‰∫ãÂä°Ë°®ÁöÑÊèíÂÖ•Êìç‰ºöËé∑Âèñ‰∏Ä‰∏™Êéí‰ªñÈîÅ‰ªéËÄåÈòªÊ≠¢ÂÖ∂‰ªñÁöÑÊèíÂÖ•ÂíåËØªÂèñ„ÄÇÊäÄÊúØ‰∏äÊ≠£Á°ÆÁöÑÔºå‰ΩÜÊòØËøôËÉåÁ¶ª‰∫Ühive‰πãÂâçÁöÑÂ∑•‰ΩúÊñπÂºè„ÄÇ‰∏∫‰∫ÜÂêëÂêéÂÖºÂÆπÔºåÂèØ‰ª•ËÆæÁΩÆhive.txn.strict.locking.mode Â±ûÊÄßÊù•‰ΩøÈîÅÁÆ°ÁêÜÂô®Âú®ÂØπÈùû‰∫ãÂä°Ë°®ÁöÑÊèíÂÖ•Êìç‰ΩúÊó∂ÔºåËé∑ÂèñÂÖ±‰∫´ÈîÅ„ÄÇ‰øùÁïô‰πãÂâçÁöÑËØ≠‰πâÔºåËøòÊúâ‰∏Ä‰∏™Â•ΩÂ§ÑÂ∞±ÊòØËÉΩÈò≤Ê≠¢Ë°®Âú®ËØªÂèñÊòØË¢´Âà†Èô§„ÄÇËÄåÂØπ‰∫é‰∫ãÂä°Ë°®ÔºåÊèíÂÖ•ÊÄªÊòØËé∑ÂèñÁöÑÂÖ±‰∫´ÈîÅ„ÄÇÊòØÂõ†‰∏∫Ëøô‰∫õË°®ÂÆûÁé∞‰∫ÜMVCCÁöÑÊû∂ÊûÑÔºåÂú®Â≠òÂÇ®ÁöÑÂ∫ïÂ±ÇÂÆûÁé∞‰∫ÜÂæàÂº∫ÁöÑËØª‰∏ÄËá¥ÊÄßÔºàÂø´ÁÖßÈöîÁ¶ªÁöÑÊñπÂºèÔºâÔºåÁîöËá≥ËÉΩÂ∫îÂØπÂπ∂ÂèëÁöÑ‰øÆÊîπÊìç‰Ωú„ÄÇ ÂÖ±‰∫´ÈîÅ„ÄêSÈîÅ„Äë:ÂèàÁß∞ËØªÈîÅÔºåËã•‰∫ãÂä°TÂØπÊï∞ÊçÆÂØπË±°AÂä†‰∏äSÈîÅÔºåÂàô‰∫ãÂä°TÂèØ‰ª•ËØªA‰ΩÜ‰∏çËÉΩ‰øÆÊîπAÔºåÂÖ∂‰ªñ‰∫ãÂä°Âè™ËÉΩÂÜçÂØπAÂä†SÈîÅÔºåËÄå‰∏çËÉΩÂä†XÈîÅÔºåÁõ¥Âà∞TÈáäÊîæA‰∏äÁöÑSÈîÅ„ÄÇËøô‰øùËØÅ‰∫ÜÂÖ∂‰ªñ‰∫ãÂä°ÂèØ‰ª•ËØªAÔºå‰ΩÜÂú®TÈáäÊîæA‰∏äÁöÑSÈîÅ‰πãÂâç‰∏çËÉΩÂØπAÂÅö‰ªª‰Ωï‰øÆÊîπ„ÄÇ Êéí‰ªñÈîÅ„ÄêXÈîÅ„Äë:ÂèàÁß∞ÂÜôÈîÅ„ÄÇËã•‰∫ãÂä°TÂØπÊï∞ÊçÆÂØπË±°AÂä†‰∏äXÈîÅÔºå‰∫ãÂä°TÂèØ‰ª•ËØªA‰πüÂèØ‰ª•‰øÆÊîπAÔºåÂÖ∂‰ªñ‰∫ãÂä°‰∏çËÉΩÂÜçÂØπAÂä†‰ªª‰ΩïÈîÅÔºåÁõ¥Âà∞TÈáäÊîæA‰∏äÁöÑÈîÅ„ÄÇËøô‰øùËØÅ‰∫ÜÂÖ∂‰ªñ‰∫ãÂä°Âú®TÈáäÊîæA‰∏äÁöÑÈîÅ‰πãÂâç‰∏çËÉΩÂÜçËØªÂèñÂíå‰øÆÊîπA„ÄÇÔºâ ÈÖçÁΩÆ‰ø°ÊÅØ ‰∏∫‰∫ÜÂºÄÂêØhiveÁöÑ‰∫ãÂä°ÊîØÊåÅÔºå‰ª•‰∏ãÊòØÈúÄË¶ÅÂºÄÂêØÁöÑÊúÄÂ∞ëÁöÑhiveÈÖçÁΩÆÔºö ÂÆ¢Êà∑Á´ØÔºö 1234hive.support.concurrency ‚Äì truehive.enforce.bucketing ‚Äì true (Not required as of Hive 2.0)hive.exec.dynamic.partition.mode ‚Äì nonstricthive.txn.manager ‚Äì org.apache.hadoop.hive.ql.lockmgr.DbTxnManager ÊúçÂä°Á´ØÔºö (Metastore) 12hive.compactor.initiator.on ‚Äì true (See table below for more details)hive.compactor.worker.threads ‚Äì a positive number on at least one instance of the Thrift metastore service ËØ¶ÁªÜÈÖçÁΩÆ‰ø°ÊÅØËØ∑ÁúãÔºöhive‰∫ãÂä°ÈÖçÁΩÆ‰ø°ÊÅØ Ë°®Â±ûÊÄß Â¶ÇÊûúË°®Ë¶Å‰ΩøÁî® ACID ÔºåÂàôÂøÖÈ°ªÊåáÂÆöÔºö &quot;transactional=true&quot; „ÄÇÂ¶ÇÊûúËØ•Ë°®Ë¢´ËÆæÁΩÆ‰∏∫ ACID Ë°®ÔºåÂàô‰∏çËÉΩËΩ¨Êç¢‰∏∫Èùû ACID Ë°®ÔºåËÆæÁΩÆ &quot;transactional&quot;=&quot;false&quot; ‰πüÊòØ‰∏çË°åÁöÑ„ÄÇÂú® hive-site.xml ‰∏≠ÂøÖÈ°ªËÆæÁΩÆÔºöhive.txn.manager = org.apache.hadoop.hive.ql.lockmgr.DbTxnManager Â¶ÇÊûúÈúÄÂ∏åÊúõÁ≥ªÁªüËá™Âä®ËøõË°åÂêàÂπ∂ÔºåÂàôÂèØ‰ª•ËÆæÁΩÆÔºö &quot;NO_AUTO_COMPACTION&quot; ,‰πüÂèØ‰ª•ÈÄöËøáAlter Table/Partition Compact ËØ≠Ê≥ïÊù•ËÆæÁΩÆ„ÄÇ Example: Set compaction options in TBLPROPERTIES at table level1234567891011CREATE TABLE table_name ( id int, name string)CLUSTERED BY (id) INTO 2 BUCKETS STORED AS ORCTBLPROPERTIES (\"transactional\"=\"true\", \"compactor.mapreduce.map.memory.mb\"=\"2048\", -- specify compaction map job properties \"compactorthreshold.hive.compactor.delta.num.threshold\"=\"4\", -- trigger minor compaction if there are more than 4 delta directories \"compactorthreshold.hive.compactor.delta.pct.threshold\"=\"0.5\" -- trigger major compaction if the ratio of size of delta files to -- size of base files is greater than 50%); Example: Set compaction options in TBLPROPERTIES at request level1234ALTER TABLE table_name COMPACT 'minor' WITH OVERWRITE TBLPROPERTIES (\"compactor.mapreduce.map.memory.mb\"=\"3072\"); -- specify compaction map job propertiesALTER TABLE table_name COMPACT 'major' WITH OVERWRITE TBLPROPERTIES (\"tblprops.orc.compress.size\"=\"8192\"); -- change any other Hive table properties","raw":null,"content":null,"categories":[{"name":"hive","slug":"hive","permalink":"https://stanxia.github.io/categories/hive/"}],"tags":[{"name":"hive","slug":"hive","permalink":"https://stanxia.github.io/tags/hive/"}]},{"title":"GitHub‰ΩøÁî®ÊåáÂçó","slug":"GitHub‰ΩøÁî®ÊåáÂçó","date":"2017-12-13T10:38:05.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/13/GitHub‰ΩøÁî®ÊåáÂçó/","link":"","permalink":"https://stanxia.github.io/2017/12/13/GitHub‰ΩøÁî®ÊåáÂçó/","excerpt":"ÂâçË®Ä\nÂ≠¶‰π† GitHub ÁöÑ‰ΩøÁî®ËßÑÂàôÔºåËÆ∞ÂΩïÈÅáÂà∞ÁöÑÈóÆÈ¢ò„ÄÇwatch , star , fork ÁöÑÂê´‰πâÂàö‰ΩøÁî® GitHub ÁöÑÊó∂ÂÄôÔºåÁúãÂà∞ÊØè‰∏Ä‰∏™È°πÁõÆÈ°µÈù¢Âè≥‰∏äËßíÈÉΩÊúâÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÁöÑÂ≠óÊ†∑Ôºö","text":"ÂâçË®Ä Â≠¶‰π† GitHub ÁöÑ‰ΩøÁî®ËßÑÂàôÔºåËÆ∞ÂΩïÈÅáÂà∞ÁöÑÈóÆÈ¢ò„ÄÇwatch , star , fork ÁöÑÂê´‰πâÂàö‰ΩøÁî® GitHub ÁöÑÊó∂ÂÄôÔºåÁúãÂà∞ÊØè‰∏Ä‰∏™È°πÁõÆÈ°µÈù¢Âè≥‰∏äËßíÈÉΩÊúâÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÁöÑÂ≠óÊ†∑ÔºöÁÇπÂáª watch ÊåâÈíÆ ‰ºöÂá∫Áé∞Â¶Ç‰∏ãÊâÄÁ§∫Ôºö watch watch ÁöÑÂäüËÉΩÊòØËßÇÂØüË∑üË∏™Ëøô‰∏™È°πÁõÆÔºåÂ¶ÇÊûúÈ°πÁõÆÊúâ‰ªª‰ΩïÊõ¥Êñ∞ÔºåÂ¶ÇÊûúÈÄâÊã©‰∫Ü watching ËØ•È°πÁõÆÔºåÈÉΩ‰ºöÂú®ÈÇÆÁÆ±‰∏≠Êé•Êî∂Âà∞Áõ∏ÂÖ≥ÁöÑÊõ¥Êñ∞‰ø°ÊÅØ„ÄÇ not watching Ë°®Á§∫‰∏çÂÖ≥Ê≥®Ëøô‰∏™È°πÁõÆÁöÑÊõ¥Êñ∞ÊÉÖÂÜµÔºå‰ΩÜ‰Ω†Ë¢´ÊèêÂèäÁöÑÊó∂ÂÄô‰πü‰ºöÂèëÈÇÆ‰ª∂ÈÄöÁü•„ÄÇ ignoring Ë°®Á§∫‰∏çÊé•Êî∂‰ªª‰ΩïÈÄöÁü•„ÄÇ Â¶ÇÊûú‰Ω†ÊÉ≥ÊåÅÁª≠Ë∑üËøõËØ•È°πÁõÆÁöÑ‰ªª‰ΩïÊõ¥Êñ∞ÊÉÖÂÜµÔºåÂàôÂèØ‰ª•ÈÄâÊã© watching „ÄÇ starstar Á±ª‰ºº‰∫éÁ§æ‰∫§ËΩØ‰ª∂‰∏≠ÁöÑÂÖ≥Ê≥®„ÄÇÂ¶ÇÊûúÈÄâÊã©‰∫Ü star Ôºå ÂàôÂèØ‰ª•Âú®Ëá™Â∑±ÁöÑ star È°µÈù¢Êü•ÁúãÂà∞ÊõæÁªè star ËøáÁöÑÈ°πÁõÆ„ÄÇÁÇπÂáªÂè≥‰∏äËßíËá™Â∑±ÁöÑÂ§¥ÂÉèÔºåÈÄâÊã© your stars ÔºöÁÑ∂ÂêéÂ∞±‰ºöÁúãÂà∞ÊõæÁªèÊâÄÊúâ star ËøáÁöÑÈ°πÁõÆÔºöÂ¶ÇÊûú‰Ω†Âè™ÊÉ≥ÂÖ≥Ê≥®Ëøô‰∏™È°πÁõÆÔºå‰ΩÜ‰∏çÈúÄË¶ÅÊé•Êî∂‰ªª‰ΩïÊõ¥Êñ∞ÈÄöÁü•Ôºå‰πü‰∏çÈúÄË¶ÅÂØπËØ•È°πÁõÆËøõË°åÊìç‰ΩúÔºåÂàôÂèØ‰ª•ÈÄâÊã© star ÔºåÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂèØ‰ª•Âø´Êç∑Êü•ÁúãËØ•È°πÁõÆ„ÄÇ forkfork ÁöÑÁõÆÁöÑÊòØÂ∞ÜËØ•È°πÁõÆÂÖãÈöÜÂà∞Ëá™Â∑±ÁöÑ GitHub ‰∏≠ÔºåËá™Â∑±ÂèØ‰ª•ÂØπËØ•È°πÁõÆËøõË°åÁºñËæë‰øÆÊîπÔºåÂú® fork ÁöÑÊó∂ÂÄô‰ºöÂú®ËØ•È°πÁõÆ‰∏≠Êñ∞Ê∑ª‰∏Ä‰∏™ÂàÜÊîØÔºåÂèØ‰ª•ÈÄâÊã© pull-requests ÂØπËØ•È°πÁõÆËøõË°å‰øÆÊîπÂêéÂπ∂Êèê‰∫§„ÄÇ Â¶ÇÊûú‰Ω†ÊÉ≥ÂèÇ‰∏éÁª¥Êä§Ëøô‰∏™È°πÁõÆÔºåÂèØ‰ª•‰ΩøÁî® fork ÂäüËÉΩÔºåÂπ∂Êèê‰∫§Ëá™Â∑±ÁöÑ‰ª£Á†ÅÔºàÂΩìÁÑ∂Áî®Ëá™Â∑±ÁöÑÂàÜÊîØÊèê‰∫§È°πÁõÆÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÈ°πÁõÆÂÖ∂‰ªñÂàÜÊîØÁöÑ‰∫∫ÂëòÂÆ°Ê†∏Ôºâ„ÄÇÂàöÂºÄÂßã‰∏çÁü•ÈÅì fork ÁöÑÂäüËÉΩÔºåÂØºËá¥ÊàëÂ∞ÜÂæàÂ§öÈ°πÁõÆÈÉΩ fork ‰∏ãÊù•ÔºåÂÖ∂ÂÆûÂæàÊ≤°ÊúâÂøÖË¶Å„ÄÇÊ†πÊçÆËá™Â∑±ÁöÑÂÆûÈôÖÈúÄÊ±ÇÈÄâÊã©Â∞±Â•Ω„ÄÇ Êü•ÁúãÈÉΩÊúâÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜÊìç‰ΩúÂ¶ÇÊûúÊÉ≥Ë¶ÅÁü•ÈÅìÈÉΩÊúâÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜËøô‰∫õÊìç‰ΩúÂë¢ÔºüÊØîÂ¶ÇÊàëÊÉ≥Áü•ÈÅìÈÉΩÊúâË∞ÅÂØπËøô‰∏™È°πÁõÆËøõË°å‰∫Ü star Êìç‰ΩúÔºåÂèØ‰ª•ÁúãËßÅÊØè‰∏™ÂäüËÉΩÊóÅËæπÈÉΩÊúâ‰∏Ä‰∏™Êï∞Â≠óÔºåËØ•Êï∞Â≠óË°®Á§∫ÂØπËøô‰∏™È°πÁõÆËøõË°åËØ•Êìç‰ΩúÁöÑ‰∫∫Êï∞ÔºåÁÇπÂáªËØ•Êï∞Â≠óÔºåÂ∞±ÂèØ‰ª•Áü•ÈÅìÂÖ∑‰ΩìÊòØÂì™‰∫õ‰∫∫ËøõË°å‰∫ÜÊìç‰ΩúÔºö","raw":null,"content":null,"categories":[{"name":"GitHub","slug":"GitHub","permalink":"https://stanxia.github.io/categories/GitHub/"}],"tags":[{"name":"GitHub","slug":"GitHub","permalink":"https://stanxia.github.io/tags/GitHub/"}]},{"title":"sparkÂèñÊ†∑ÂáΩÊï∞ÂàÜÊûê","slug":"Spark sample ÂèñÊ†∑ÂáΩÊï∞","date":"2017-12-12T17:30:25.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/12/12/Spark sample ÂèñÊ†∑ÂáΩÊï∞/","link":"","permalink":"https://stanxia.github.io/2017/12/12/Spark sample ÂèñÊ†∑ÂáΩÊï∞/","excerpt":"\nËÉåÊôØ\nSparkÂèñÊ†∑Êìç‰ΩúÔºåÊó†Ê≥ïËé∑ÂèñÈöèÊú∫Ê†∑Êú¨ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇDataset‰∏≠sampleÂáΩÊï∞Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö\n123456789101112131415161718192021222324252627282930313233343536373839404142434445/**  * Returns a new [[Dataset]] by sampling a fraction of rows, using a user-supplied seed.  *  * ÈÄöËøá‰ΩøÁî®Áî®Êà∑Êèê‰æõÁöÑÁßçÂ≠êÔºåÈÄöËøáÊäΩÊ†∑ÁöÑÊñπÂºèËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ[[Dataset]]„ÄÇ  *  * @param withReplacement Sample with replacement or not.  *                        Â¶ÇÊûúwithReplacement=trueÁöÑËØùË°®Á§∫ÊúâÊîæÂõûÁöÑÊäΩÊ†∑ÔºåÈááÁî®Ê≥äÊùæÊäΩÊ†∑ÁÆóÊ≥ïÂÆûÁé∞.  *                        Â¶ÇÊûúwithReplacement=falseÁöÑËØùË°®Á§∫Êó†ÊîæÂõûÁöÑÊäΩÊ†∑ÔºåÈááÁî®‰ºØÂä™Âà©ÊäΩÊ†∑ÁÆóÊ≥ïÂÆûÁé∞.  * @param fraction        Fraction of rows to generate.  *                        ÊØè‰∏ÄË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá.Êúç‰ªé‰∫åÈ°πÂàÜÂ∏É.ÂΩìwithReplacement=trueÁöÑÊó∂ÂÄôfraction&gt;=0,ÂΩìwithReplacement=falseÁöÑÊó∂ÂÄô 0 &lt; fraction &lt; 1.  * @param seed            Seed for sampling.  *                        ÂèñÊ†∑ÁßçÂ≠êÔºà‰∏éÈöèÊú∫Êï∞ÁîüÊàêÊúâÂÖ≥Ôºâ  * @note This is NOT guaranteed to provide exactly the fraction of the count  *       of the given [[Dataset]].  *       ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ  * @group typedrel  * @since 1.6.0  */def sample(withReplacement: Boolean, fraction: Double, seed: Long): Dataset[T] = &#123;  require(fraction &gt;= 0,    s\"Fraction must be nonnegative, but got $&#123;fraction&#125;\")  withTypedPlan &#123;    Sample(0.0, fraction, withReplacement, seed, logicalPlan)()  &#125;&#125;/**  * Returns a new [[Dataset]] by sampling a fraction of rows, using a random seed.  *  * ÈÄöËøáÁ®ãÂ∫èÈöèÊú∫ÁöÑÁßçÂ≠êÔºåÊäΩÊ†∑ËøîÂõûÊñ∞ÁöÑDataSet  *  * @param withReplacement Sample with replacement or not.  *                        ÂèñÊ†∑ÁªìÊûúÊòØÂê¶ÊîæÂõû  * @param fraction        Fraction of rows to generate.  *                        ÊØèË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá  * @note This is NOT guaranteed to provide exactly the fraction of the total count  *       of the given [[Dataset]].  *       ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ  * @group typedrel  * @since 1.6.0  */def sample(withReplacement: Boolean, fraction: Double): Dataset[T] = &#123;  sample(withReplacement, fraction, Utils.random.nextLong)&#125;","text":"ËÉåÊôØ SparkÂèñÊ†∑Êìç‰ΩúÔºåÊó†Ê≥ïËé∑ÂèñÈöèÊú∫Ê†∑Êú¨ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇDataset‰∏≠sampleÂáΩÊï∞Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * Returns a new [[Dataset]] by sampling a fraction of rows, using a user-supplied seed. * * ÈÄöËøá‰ΩøÁî®Áî®Êà∑Êèê‰æõÁöÑÁßçÂ≠êÔºåÈÄöËøáÊäΩÊ†∑ÁöÑÊñπÂºèËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ[[Dataset]]„ÄÇ * * @param withReplacement Sample with replacement or not. * Â¶ÇÊûúwithReplacement=trueÁöÑËØùË°®Á§∫ÊúâÊîæÂõûÁöÑÊäΩÊ†∑ÔºåÈááÁî®Ê≥äÊùæÊäΩÊ†∑ÁÆóÊ≥ïÂÆûÁé∞. * Â¶ÇÊûúwithReplacement=falseÁöÑËØùË°®Á§∫Êó†ÊîæÂõûÁöÑÊäΩÊ†∑ÔºåÈááÁî®‰ºØÂä™Âà©ÊäΩÊ†∑ÁÆóÊ≥ïÂÆûÁé∞. * @param fraction Fraction of rows to generate. * ÊØè‰∏ÄË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá.Êúç‰ªé‰∫åÈ°πÂàÜÂ∏É.ÂΩìwithReplacement=trueÁöÑÊó∂ÂÄôfraction&gt;=0,ÂΩìwithReplacement=falseÁöÑÊó∂ÂÄô 0 &lt; fraction &lt; 1. * @param seed Seed for sampling. * ÂèñÊ†∑ÁßçÂ≠êÔºà‰∏éÈöèÊú∫Êï∞ÁîüÊàêÊúâÂÖ≥Ôºâ * @note This is NOT guaranteed to provide exactly the fraction of the count * of the given [[Dataset]]. * ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ * @group typedrel * @since 1.6.0 */def sample(withReplacement: Boolean, fraction: Double, seed: Long): Dataset[T] = &#123; require(fraction &gt;= 0, s\"Fraction must be nonnegative, but got $&#123;fraction&#125;\") withTypedPlan &#123; Sample(0.0, fraction, withReplacement, seed, logicalPlan)() &#125;&#125;/** * Returns a new [[Dataset]] by sampling a fraction of rows, using a random seed. * * ÈÄöËøáÁ®ãÂ∫èÈöèÊú∫ÁöÑÁßçÂ≠êÔºåÊäΩÊ†∑ËøîÂõûÊñ∞ÁöÑDataSet * * @param withReplacement Sample with replacement or not. * ÂèñÊ†∑ÁªìÊûúÊòØÂê¶ÊîæÂõû * @param fraction Fraction of rows to generate. * ÊØèË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá * @note This is NOT guaranteed to provide exactly the fraction of the total count * of the given [[Dataset]]. * ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ * @group typedrel * @since 1.6.0 */def sample(withReplacement: Boolean, fraction: Double): Dataset[T] = &#123; sample(withReplacement, fraction, Utils.random.nextLong)&#125; ÈóÆÈ¢ò ÁªìÊûúÊï∞ÊçÆÁöÑË°åÊï∞‰∏ÄËà¨Âú®Ôºàfraction*ÊÄªÊï∞ÔºâÂ∑¶Âè≥„ÄÇÊ≤°Êúâ‰∏Ä‰∏™Âõ∫ÂÆöÁöÑÂÄºÔºåÂ¶ÇÊûúÈúÄË¶ÅÂæóÂà∞Âõ∫ÂÆöË°åÊï∞ÁöÑÈöèÊú∫Êï∞ÊçÆÁöÑËØù‰∏çÂª∫ËÆÆÈááÁî®ËØ•ÊñπÊ≥ï„ÄÇÂäûÊ≥ïËé∑ÂèñÈöèÊú∫ÂèñÊ†∑ÁöÑÊõø‰ª£ÊñπÊ≥ïÔºö 123456df.createOrReplaceTempView(\"test_sample\"); // ÁîüÊàê‰∏¥Êó∂Ë°®df.sqlContext() // Ê∑ªÂä†ÈöèÊú∫Êï∞ÂàóÔºåÂπ∂Ê†πÊçÆÂÖ∂ËøõË°åÊéíÂ∫è .sql(\"select * ,rand() as random from test_sample order by random\") .limit(2) // Ê†πÊçÆÂèÇÊï∞ÁöÑfractionËÆ°ÁÆóÈúÄË¶ÅËé∑ÂèñÁöÑÂèñÊ†∑ÁªìÊûú .drop(\"random\") // Âà†Èô§ÊéâÊ∑ªÂä†ÁöÑÈöèÊú∫Âàó .show();","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"}]},{"title":"HiveÊä•ÈîôÈõÜ","slug":"HiveÊä•ÈîôÈõÜ","date":"2017-12-11T13:58:58.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/11/HiveÊä•ÈîôÈõÜ/","link":"","permalink":"https://stanxia.github.io/2017/12/11/HiveÊä•ÈîôÈõÜ/","excerpt":"ÂâçË®Ä\nÈíàÂØπ‰∏Ä‰∏™ËÄÅÊØõÁóÖÔºöÊúâ‰∫õÈîôËØØÂ±°ÁäØÂ±°ÊîπÔºåÂ±°ÊîπÂ±°ÁäØÔºåÊ≤°ÊúâÂºïËµ∑Ê†πÊú¨‰∏äÁöÑÊ≥®ÊÑèÔºåÊàñËÄÖÊ≤°Êúâ‰ªéÊ∫êÂ§¥ÁêÜËß£ÈîôËØØÂèëÁîüÁöÑÂ∫ïÂ±ÇÂéüÁêÜÔºåÂØºËá¥ÂÅöÂæàÂ§öÊó†Áî®Âäü„ÄÇ\nÊÄªÁªìÂéÜÂè≤ÔºåÂπ∂‰ªé‰∏≠Âê∏ÂèñÊïôËÆ≠ÔºåÂáèÂ∞ëÊó†Áî®ÂäüÈÄ†ÊàêÁöÑÊó∂Èó¥Êµ™Ë¥π„ÄÇÁâπÊ≠§Â∞Ü‰ªéÁõÆÂâçÈÅáÂà∞ÁöÑ hive ÈóÆÈ¢òÂÖ®ÈÉ®ËÆ∞ÂΩïÂú®ËøôÈáåÔºåÊêûÊ∏ÖÊ•öÈóÆÈ¢òÔºåËá™‰ø°ÂêëÂâç„ÄÇ","text":"ÂâçË®Ä ÈíàÂØπ‰∏Ä‰∏™ËÄÅÊØõÁóÖÔºöÊúâ‰∫õÈîôËØØÂ±°ÁäØÂ±°ÊîπÔºåÂ±°ÊîπÂ±°ÁäØÔºåÊ≤°ÊúâÂºïËµ∑Ê†πÊú¨‰∏äÁöÑÊ≥®ÊÑèÔºåÊàñËÄÖÊ≤°Êúâ‰ªéÊ∫êÂ§¥ÁêÜËß£ÈîôËØØÂèëÁîüÁöÑÂ∫ïÂ±ÇÂéüÁêÜÔºåÂØºËá¥ÂÅöÂæàÂ§öÊó†Áî®Âäü„ÄÇ ÊÄªÁªìÂéÜÂè≤ÔºåÂπ∂‰ªé‰∏≠Âê∏ÂèñÊïôËÆ≠ÔºåÂáèÂ∞ëÊó†Áî®ÂäüÈÄ†ÊàêÁöÑÊó∂Èó¥Êµ™Ë¥π„ÄÇÁâπÊ≠§Â∞Ü‰ªéÁõÆÂâçÈÅáÂà∞ÁöÑ hive ÈóÆÈ¢òÂÖ®ÈÉ®ËÆ∞ÂΩïÂú®ËøôÈáåÔºåÊêûÊ∏ÖÊ•öÈóÆÈ¢òÔºåËá™‰ø°ÂêëÂâç„ÄÇÊä•ÈîôÈõÜ ÈóÆÈ¢ò1ÔºöError rolling backËØ¶ÊÉÖÔºöError rolling back: Can&#39;t call rollback when autocommit=true Ëß£ÂÜ≥ÊñπÊ°àÔºövim conf/hive-site.xml ‰∏çË¶ÅÂä†Ëøô‰∏™ÈÖçÁΩÆÔºÅÔºÅÔºÅÔºÅ 1234&lt;property&gt;&lt;name&gt;hive.in.test&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;","raw":null,"content":null,"categories":[{"name":"hive","slug":"hive","permalink":"https://stanxia.github.io/categories/hive/"}],"tags":[{"name":"hive","slug":"hive","permalink":"https://stanxia.github.io/tags/hive/"}]},{"title":"HiveÈîÅ‰ªãÁªç-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£","slug":"HiveÈîÅ‰ªãÁªç-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£","date":"2017-12-11T09:58:58.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/11/HiveÈîÅ‰ªãÁªç-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£/","link":"","permalink":"https://stanxia.github.io/2017/12/11/HiveÈîÅ‰ªãÁªç-ÁøªËØëËá™ÂÆòÊñπÊñáÊ°£/","excerpt":"Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂπ∂ÂèëÊÄßÊîØÊåÅÊòØÂøÖÈ°ªÁöÑÔºåËÄå‰∏îÂÆÉ‰ª¨ÁöÑÁî®‰æã‰πüÂæàÂÆπÊòìÁêÜËß£„ÄÇËá≥Â∞ëÔºåÊàë‰ª¨Â∏åÊúõÂ∞ΩÂèØËÉΩÊîØÊåÅÂπ∂ÂèëÁöÑËØªÂíåÂÜô„ÄÇÊ∑ªÂä†‰∏Ä‰∏™Êú∫Âà∂Êù•ÂèëÁé∞Â∑≤Ëé∑ÂæóÁöÑÂΩìÂâçÈîÅÊòØÂæàÊúâÁî®ÁöÑ„ÄÇÊ≤°ÊúâÁ´ãÂç≥Ê∑ªÂä†APIÊù•ÊòæÂºèËé∑Âèñ‰ªª‰ΩïÈîÅÁöÑÈúÄÊ±ÇÔºåÂõ†Ê≠§ÊâÄÊúâÈîÅÈÉΩÊòØÈöêÂºèËé∑ÂæóÁöÑ„ÄÇ‰ª•‰∏ãÈîÅÂÆöÊ®°ÂºèÂ∞ÜÂú®hive‰∏≠ÂÆö‰πâ(Ê≥®ÊÑèÔºå‰∏çÈúÄË¶ÅÊÑèÂõæÈîÅ)„ÄÇ\n12ÂÖ±‰∫´(S)Áã¨Âç†(X)\nÈ°æÂêçÊÄù‰πâÔºåÂèØ‰ª•ÂêåÊó∂Ëé∑ÂæóÂ§ö‰∏™ÂÖ±‰∫´ÈîÅÔºåËÄåXÈîÅÂèØ‰ª•ÈòªÊ≠¢ÊâÄÊúâÂÖ∂‰ªñÈîÅ„ÄÇÂÖºÂÆπÊÄßÁü©ÈòµÂ¶Ç‰∏ã:ÂØπ‰∫éÊüê‰∫õÊìç‰ΩúÔºåÈîÅÂú®Êú¨Ë¥®‰∏äÊòØÂàÜÂ±ÇÁöÑ‚Äî‚Äî‰æãÂ¶ÇÔºåÂØπ‰∫éÊüê‰∫õÂàÜÂå∫Êìç‰ΩúÔºåË°®‰πüË¢´ÈîÅÂÆö(‰ª•Á°Æ‰øùÂú®ÂàõÂª∫Êñ∞ÂàÜÂå∫Êó∂‰∏çËÉΩÂà†Èô§Ë°®)„ÄÇ","text":"Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂπ∂ÂèëÊÄßÊîØÊåÅÊòØÂøÖÈ°ªÁöÑÔºåËÄå‰∏îÂÆÉ‰ª¨ÁöÑÁî®‰æã‰πüÂæàÂÆπÊòìÁêÜËß£„ÄÇËá≥Â∞ëÔºåÊàë‰ª¨Â∏åÊúõÂ∞ΩÂèØËÉΩÊîØÊåÅÂπ∂ÂèëÁöÑËØªÂíåÂÜô„ÄÇÊ∑ªÂä†‰∏Ä‰∏™Êú∫Âà∂Êù•ÂèëÁé∞Â∑≤Ëé∑ÂæóÁöÑÂΩìÂâçÈîÅÊòØÂæàÊúâÁî®ÁöÑ„ÄÇÊ≤°ÊúâÁ´ãÂç≥Ê∑ªÂä†APIÊù•ÊòæÂºèËé∑Âèñ‰ªª‰ΩïÈîÅÁöÑÈúÄÊ±ÇÔºåÂõ†Ê≠§ÊâÄÊúâÈîÅÈÉΩÊòØÈöêÂºèËé∑ÂæóÁöÑ„ÄÇ‰ª•‰∏ãÈîÅÂÆöÊ®°ÂºèÂ∞ÜÂú®hive‰∏≠ÂÆö‰πâ(Ê≥®ÊÑèÔºå‰∏çÈúÄË¶ÅÊÑèÂõæÈîÅ)„ÄÇ 12ÂÖ±‰∫´(S)Áã¨Âç†(X) È°æÂêçÊÄù‰πâÔºåÂèØ‰ª•ÂêåÊó∂Ëé∑ÂæóÂ§ö‰∏™ÂÖ±‰∫´ÈîÅÔºåËÄåXÈîÅÂèØ‰ª•ÈòªÊ≠¢ÊâÄÊúâÂÖ∂‰ªñÈîÅ„ÄÇÂÖºÂÆπÊÄßÁü©ÈòµÂ¶Ç‰∏ã:ÂØπ‰∫éÊüê‰∫õÊìç‰ΩúÔºåÈîÅÂú®Êú¨Ë¥®‰∏äÊòØÂàÜÂ±ÇÁöÑ‚Äî‚Äî‰æãÂ¶ÇÔºåÂØπ‰∫éÊüê‰∫õÂàÜÂå∫Êìç‰ΩúÔºåË°®‰πüË¢´ÈîÅÂÆö(‰ª•Á°Æ‰øùÂú®ÂàõÂª∫Êñ∞ÂàÜÂå∫Êó∂‰∏çËÉΩÂà†Èô§Ë°®)„ÄÇÈîÅÂÆöÊ®°Âºè‰∏ãËé∑ÂèñÁöÑÂêàÁêÜÊÄßÂ¶Ç‰∏ã: ÂØπ‰∫éÈùûÂàÜÂå∫Ë°®ÔºåÈîÅÊ®°ÂºèÈùûÂ∏∏Áõ¥ËßÇ„ÄÇËØªÂèñË°®Êó∂ÔºåËé∑Âèñ‰∏Ä‰∏™SÈîÅÔºåËÄåÊâÄÊúâÂÖ∂‰ªñÊìç‰Ωú(ÊèíÂÖ•Ë°®„ÄÅalter tableÁ≠âÂÖ∂‰ªñÊìç‰Ωú)Ëé∑Âæó‰∏Ä‰∏™XÈîÅ„ÄÇ ÂØπ‰∫éÂàÜÂå∫Ë°®ÔºåÂÖ∂ÊÄùÊÉ≥Â¶Ç‰∏ã: Âú®ÊâßË°åËØªÊìç‰ΩúÊó∂ÔºåËé∑ÂèñË°®ÂíåÁõ∏ÂÖ≥ÂàÜÂå∫ÁöÑ ‚ÄòS‚Äô ÈîÅ„ÄÇÂØπ‰∫éÊâÄÊúâÂÖ∂‰ªñÊìç‰ΩúÔºåÂú®ÂàÜÂå∫‰∏äÊâßË°å‚ÄúX‚ÄùÈîÅ„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊõ¥ÊîπÂè™ÈÄÇÁî®‰∫éËæÉÊñ∞ÁöÑÂàÜÂå∫ÔºåÂàôÂú®Ë°®‰∏äËé∑Âæó‚ÄúS‚ÄùÈîÅÔºåËÄåÂ¶ÇÊûúÊõ¥ÊîπÈÄÇÁî®‰∫éÊâÄÊúâÂàÜÂå∫ÔºåÂàôÂú®Ë°®‰∏äËé∑Âæó‚ÄúX‚ÄùÈîÅ„ÄÇÂõ†Ê≠§ÔºåÊóßÂàÜÂå∫ÂèØ‰ª•Ë¢´ËØªÂèñÂíåÂÜôÂÖ•ÔºåËÄåÊñ∞ÁöÑÂàÜÂå∫ÂàôË¢´ËΩ¨Êç¢‰∏∫RCFile„ÄÇÊØèÂΩì‰∏Ä‰∏™ÂàÜÂå∫Ë¢´ÈîÅÂÆöÂú®‰ªª‰ΩïÊ®°ÂºèÊó∂ÔºåÂÆÉÁöÑÊâÄÊúâÁà∂Á∫ßÈÉΩË¢´ÈîÅÂú®‚ÄúS‚ÄùÊ®°Âºè‰∏≠„ÄÇ Âü∫‰∫éÊ≠§Ôºå‰∏∫Êìç‰ΩúËé∑ÂæóÁöÑÈîÅÂ¶Ç‰∏ã: ‰∏∫‰∫ÜÈÅøÂÖçÊ≠ªÈîÅÔºåËøôÈáåÊèêÂá∫‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑÊñπÊ°à„ÄÇÊâÄÊúâË¶ÅÈîÅÂÆöÁöÑÂØπË±°ÈÉΩÊòØÊåâÂ≠óÊØçÈ°∫Â∫èÊéíÂ∫èÁöÑÔºåÁÑ∂ÂêéËé∑ÂèñÊâÄÈúÄÁöÑÊ®°ÂºèÈîÅ„ÄÇËØ∑Ê≥®ÊÑèÔºåÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÂèØËÉΩ‰∏çÁü•ÈÅìÂØπË±°ÂàóË°®‚Äî‚Äî‰æãÂ¶ÇÔºåÂú®Âä®ÊÄÅÂàÜÂå∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊ≠£Âú®‰øÆÊîπÁöÑÂàÜÂå∫ÂàóË°®Âú®ÁºñËØëÊó∂ÊòØÊú™Áü•ÁöÑ‚Äî‚ÄîÂõ†Ê≠§ÔºåÂàóË°®ÁöÑÁîüÊàêÊòØ‰øùÂÆàÁöÑ„ÄÇÁî±‰∫éÂàÜÂå∫ÁöÑÊï∞ÈáèÂèØËÉΩ‰∏çÁü•ÈÅìÔºåÊâÄ‰ª•Â∫îËØ•Â∞Ü‰∏Ä‰∏™‰∏ìÁî®ÈîÅ(‰ΩÜÁõÆÂâç‰∏çÊòØÁî±‰∫éhive -3509 bug)ÊîæÂú®Ë°®‰∏äÔºåÊàñËÄÖÊòØÂ∑≤Áü•ÁöÑÂâçÁºÄ„ÄÇ Â∞ÜÊ∑ªÂä†‰∏§‰∏™Êñ∞ÁöÑÂèØÈÖçÁΩÆÂèÇÊï∞Êù•ÂÜ≥ÂÆöÈîÅÁöÑÈáçËØïÊ¨°Êï∞ÂíåÊØèÊ¨°ÈáçËØï‰πãÈó¥ÁöÑÁ≠âÂæÖÊó∂Èó¥„ÄÇÂ¶ÇÊûúÈáçËØïÁöÑÊ¨°Êï∞ÁúüÁöÑÂæàÈ´òÔºåÂÆÉ‰ºöÂØºËá¥‰∏Ä‰∏™Ê¥ªÈîÅ„ÄÇÁúãÁúãZooKeeperÔºåÁúãÁúãÂ¶Ç‰Ωï‰ΩøÁî®ZooKeeper apiÂÆûÁé∞ËØªÂÜôÈîÅ„ÄÇËØ∑Ê≥®ÊÑèÔºåÈîÅËØ∑Ê±ÇÂ∞ÜË¢´ÊãíÁªùÔºåËÄå‰∏çÊòØÁ≠âÂæÖ„ÄÇÁé∞ÊúâÁöÑÈîÅÂ∞ÜË¢´ÈáäÊîæÔºåÊâÄÊúâÁöÑÈîÅÂ∞ÜÂú®ÈáçËØïÈó¥ÈöîÂêéÈáçËØï„ÄÇ ‰∏äÈù¢ÂàóÂá∫ÁöÑ‰∏ç‰ºöÊåâÁÖßÊåáÂÆöÁöÑÊñπÂºèÂ∑•‰ΩúÔºåÂõ†‰∏∫ÈîÅÁöÑÁ≠âÁ∫ßÊÄß„ÄÇ Ë°®TÁöÑ‚ÄúS‚ÄùÈîÅÊåáÂÆöÂ¶Ç‰∏ã: Ë∞ÉÁî®create()ÂàõÂª∫ÂÖ∑ÊúâË∑ØÂæÑÂêçÁöÑËäÇÁÇπ‚Äú/ warehouse/T/ read‚Äî‚Äù„ÄÇËøôÊòØÂçèËÆÆÂêéÈù¢‰ΩøÁî®ÁöÑÈîÅËäÇÁÇπ„ÄÇÁ°Æ‰øùËÆæÁΩÆÈ°∫Â∫èÂíå‰∏¥Êó∂Ê†áÂøó„ÄÇ Âú®ÈîÅÂÆöËäÇÁÇπ‰∏äË∞ÉÁî®getChildren()ÔºåËÄåÊó†ÈúÄËÆæÁΩÆËßÇÂØüÊ†áÂøó„ÄÇ Â¶ÇÊûúÊúâ‰∏Ä‰∏™‰ª•‚Äúwrite -‚ÄùÂºÄÂ§¥ÁöÑË∑ØÂæÑÂêçÁöÑÂ≠©Â≠êÔºå‰ª•Âèä‰∏Ä‰∏™ËæÉ‰ΩéÁöÑÂ∫èÂàóÊï∞ÔºåÈÇ£‰πàËøô‰∏™ÈîÅÂ∞±‰∏çËÉΩË¢´Ëé∑Âèñ„ÄÇÂà†Èô§Á¨¨‰∏ÄÊ≠•‰∏≠ÂàõÂª∫ÁöÑËäÇÁÇπÂπ∂ËøîÂõû„ÄÇ Âê¶ÂàôÔºåÈîÅÂ∞±Ë¢´Êéà‰∫à‰∫Ü„ÄÇ Ë°®TÁöÑ‚ÄúX‚ÄùÈîÅÂÆöÂ¶Ç‰∏ã: Ë∞ÉÁî®create()ÂàõÂª∫ÂÖ∑ÊúâË∑ØÂæÑÂêçÁöÑËäÇÁÇπ‚Äú/ warehouse/T/ write‚Äî‚Äù„ÄÇËøôÊòØÂçèËÆÆÂêéÈù¢‰ΩøÁî®ÁöÑÈîÅËäÇÁÇπ„ÄÇÁ°Æ‰øùËÆæÁΩÆÈ°∫Â∫èÂíå‰∏¥Êó∂Ê†áÂøó„ÄÇ Âú®ÈîÅÂÆöËäÇÁÇπ‰∏äË∞ÉÁî®getChildren()ÔºåËÄåÊó†ÈúÄËÆæÁΩÆËßÇÂØüÊ†áÂøó„ÄÇ Â¶ÇÊûúÊúâ‰∏Ä‰∏™‰ª•‚ÄúËØª-‚ÄùÊàñ‚ÄúÂÜô-‚ÄùÂºÄÂ§¥ÁöÑË∑ØÂæÑÂêçÁöÑÂ≠©Â≠êÔºåÂπ∂‰ª•ËæÉ‰ΩéÁöÑÂ∫èÂàóÂè∑ÂºÄÂßãÔºåÂ∞±‰∏çËÉΩËé∑ÂæóÈîÅ„ÄÇÂà†Èô§Á¨¨‰∏ÄÊ≠•‰∏≠ÂàõÂª∫ÁöÑËäÇÁÇπÂπ∂ËøîÂõû„ÄÇ Âê¶ÂàôÔºåÈîÅÂ∞±Ë¢´Êéà‰∫à‰∫Ü„ÄÇ ÈªòËÆ§ÁöÑHiveË°å‰∏∫‰∏ç‰ºöÊõ¥ÊîπÔºåÂπ∂Âèë‰πü‰∏çÂèóÊîØÊåÅ„ÄÇÊÇ®ÂèØ‰ª•ÈÄöËøáÂ∞Ü‰ª•‰∏ãÂèòÈáèËÆæÁΩÆ‰∏∫falseÊù•ÂÖ≥Èó≠Âπ∂ÂèëÊÄß: hive.support.concurrency. ÊÇ®ÂèØ‰ª•ÈÄöËøáÂèëÂá∫‰ª•‰∏ãÂëΩ‰ª§Êü•ÁúãË°®‰∏≠ÁöÑÈîÅ: 1234SHOW LOCKS &lt;TABLE_NAME&gt;;SHOW LOCKS &lt;TABLE_NAME&gt; EXTENDED;SHOW LOCKS &lt;TABLE_NAME&gt; PARTITION (&lt;PARTITION_DESC&gt;);SHOW LOCKS &lt;TABLE_NAME&gt; PARTITION (&lt;PARTITION_DESC&gt;) EXTENDED; ÁÇπÊàë‰∫ÜËß£HiveÈîÅÂÆöÁöÑÈÖçÁΩÆÂ±ûÊÄß","raw":null,"content":null,"categories":[{"name":"hive","slug":"hive","permalink":"https://stanxia.github.io/categories/hive/"}],"tags":[{"name":"hive","slug":"hive","permalink":"https://stanxia.github.io/tags/hive/"}]},{"title":"Hexo + AppVeyor ÊåÅÁª≠ÈõÜÊàê","slug":"Hexo ‰ºòÂåñ-‰ΩøÁî® AppVeyor ËøõË°åÈÉ®ÁΩ≤","date":"2017-12-07T11:30:06.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/07/Hexo ‰ºòÂåñ-‰ΩøÁî® AppVeyor ËøõË°åÈÉ®ÁΩ≤/","link":"","permalink":"https://stanxia.github.io/2017/12/07/Hexo ‰ºòÂåñ-‰ΩøÁî® AppVeyor ËøõË°åÈÉ®ÁΩ≤/","excerpt":"ÂâçË®Ä\n‰ªäÂ§©Êü•Áúã Spark Ê∫êÁ†ÅÁöÑÊó∂ÂÄôÔºåÊó†ÊÑèÂèëÁé∞‰∫Ü AppVeyor ÔºåÊâçÁü•ÈÅì ÊåÅÁª≠ÈõÜÊàêÔºàContinuous IntegrationÔºåÁÆÄÁß∞CIÔºâ,ÁÆÄÂçïÁêÜËß£‰∏∫ÂèØ‰ª•Ëá™Âä®ÂåñÊûÑÂª∫È°πÁõÆÁöÑÂ∑•ÂÖ∑„ÄÇÂú® Spark ‰∏≠ÔºåSparkR ÁöÑÈ°πÁõÆ‰ΩøÁî®‰∫Ü AppVeyor ÊåÅÁª≠ÈõÜÊàêÂ∑•ÂÖ∑„ÄÇ\nÁúãÂà∞ÁΩëÁªú‰∏ä‰∏Ä‰∫õÂ§ß‰Ω¨Áî® AppVeyor ËÅîÂêà HexoÔºå‰Ωú‰∏∫ÂçöÂÆ¢‰ª£Á†ÅÁöÑÈÉ®ÁΩ≤Â∑•ÂÖ∑Ôºå‰∏ÄÊñπÈù¢ÂèØ‰ª•‰ΩøÈÉ®ÁΩ≤‰ª£Á†ÅÊõ¥Âä†ÁÆÄÂçïÔºàÂÖ®Ëá™Âä®ÂåñÔºåËôΩÁÑ∂‰πãÂâç‰πüÂè™Êúâ hexo -clean ,hexo -g ,hexo -d ‰∏âÊ≠•Ôºå‰ΩÜÁé∞Âú®ÂÆåÂÖ®Âú®ÂêéÂè∞Ëá™Âä®ÈÉ®ÁΩ≤ÔºâÔºåÂè¶‰∏ÄÊñπÈù¢‰πüÂèØ‰ª•Ëß£ÂÜ≥ÂçöÂÆ¢Ê∫êÁ†ÅÂ§öÁîµËÑë‰π¶ÂÜôÁöÑÂ±ÄÈôêÊÄßÔºà‰πãÂâçÂè™ËÉΩÂú®‰∏ÄÂè∞ÁîµËÑë‰∏äËøõË°åÂçöÂÆ¢ÁöÑÂàõ‰ΩúÔºåÈù¢‰∏¥ÁùÄÈ°πÁõÆÂ§á‰ªΩÁöÑÈóÆÈ¢òÔºâÔºåÁé∞Âú®Â∞ÜÈ°πÁõÆÂÆåÂÖ®ÊâòÁÆ°Âú® GitHub‰∏äÔºåÊó†ÈúÄÊãÖÂøÉÁîµËÑëÊç¢‰∫ÜÔºåÊàñÊòØÁ£ÅÁõòÊçüÂùèÈÄ†ÊàêÁöÑÊï∞ÊçÆ‰∏¢Â§±Ôºå‰πüÊó†ÈúÄ‰ΩøÁî®‰∫ëÂ§á‰ªΩÂ∑•ÂÖ∑Ë¥πÊó∂Ë¥πÂäõÁöÑÁª¥Êä§È°πÁõÆ„ÄÇÊ†∏ÂøÉÊ≠•È™§\nÊñ∞Âª∫‰ª£Á†Å‰ªìÂ∫ìÈ¶ñÂÖàÊàë‰ª¨ÂÖàÁ°ÆÂÆöÔºåÂ∞ÜÈ°πÁõÆÊâòÁÆ°Âú® GitHub ‰∏äÔºåËøôÈáåÊúâ‰∏§ÁßçÊñπÊ°àÔºå‰∏ÄÁßçÊòØÂú®Â≠òÊîæÂçöÂÆ¢ÈùôÊÄÅ‰ª£Á†ÅÁöÑ‰ªìÂ∫ìÔºàÂ¶ÇÔºöxxx.github.ioÔºâ‰∏≠Êñ∞Ê∑ªÂä†ÂàÜÊîØ;Âè¶‰∏ÄÁßçÂàôÊòØÊñ∞Âª∫‰∏Ä‰∏™‰ªìÂ∫ìÁî®‰∫éÂ≠òÊîæÈ°πÁõÆ„ÄÇÊàëËøôÈáå‰ΩøÁî®ÁöÑÁ¨¨‰∫åÁßçÊñπÂºèÔºåÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™‰ªìÂ∫ìÔºöhexo-github-source „ÄÇ","text":"ÂâçË®Ä ‰ªäÂ§©Êü•Áúã Spark Ê∫êÁ†ÅÁöÑÊó∂ÂÄôÔºåÊó†ÊÑèÂèëÁé∞‰∫Ü AppVeyor ÔºåÊâçÁü•ÈÅì ÊåÅÁª≠ÈõÜÊàêÔºàContinuous IntegrationÔºåÁÆÄÁß∞CIÔºâ,ÁÆÄÂçïÁêÜËß£‰∏∫ÂèØ‰ª•Ëá™Âä®ÂåñÊûÑÂª∫È°πÁõÆÁöÑÂ∑•ÂÖ∑„ÄÇÂú® Spark ‰∏≠ÔºåSparkR ÁöÑÈ°πÁõÆ‰ΩøÁî®‰∫Ü AppVeyor ÊåÅÁª≠ÈõÜÊàêÂ∑•ÂÖ∑„ÄÇ ÁúãÂà∞ÁΩëÁªú‰∏ä‰∏Ä‰∫õÂ§ß‰Ω¨Áî® AppVeyor ËÅîÂêà HexoÔºå‰Ωú‰∏∫ÂçöÂÆ¢‰ª£Á†ÅÁöÑÈÉ®ÁΩ≤Â∑•ÂÖ∑Ôºå‰∏ÄÊñπÈù¢ÂèØ‰ª•‰ΩøÈÉ®ÁΩ≤‰ª£Á†ÅÊõ¥Âä†ÁÆÄÂçïÔºàÂÖ®Ëá™Âä®ÂåñÔºåËôΩÁÑ∂‰πãÂâç‰πüÂè™Êúâ hexo -clean ,hexo -g ,hexo -d ‰∏âÊ≠•Ôºå‰ΩÜÁé∞Âú®ÂÆåÂÖ®Âú®ÂêéÂè∞Ëá™Âä®ÈÉ®ÁΩ≤ÔºâÔºåÂè¶‰∏ÄÊñπÈù¢‰πüÂèØ‰ª•Ëß£ÂÜ≥ÂçöÂÆ¢Ê∫êÁ†ÅÂ§öÁîµËÑë‰π¶ÂÜôÁöÑÂ±ÄÈôêÊÄßÔºà‰πãÂâçÂè™ËÉΩÂú®‰∏ÄÂè∞ÁîµËÑë‰∏äËøõË°åÂçöÂÆ¢ÁöÑÂàõ‰ΩúÔºåÈù¢‰∏¥ÁùÄÈ°πÁõÆÂ§á‰ªΩÁöÑÈóÆÈ¢òÔºâÔºåÁé∞Âú®Â∞ÜÈ°πÁõÆÂÆåÂÖ®ÊâòÁÆ°Âú® GitHub‰∏äÔºåÊó†ÈúÄÊãÖÂøÉÁîµËÑëÊç¢‰∫ÜÔºåÊàñÊòØÁ£ÅÁõòÊçüÂùèÈÄ†ÊàêÁöÑÊï∞ÊçÆ‰∏¢Â§±Ôºå‰πüÊó†ÈúÄ‰ΩøÁî®‰∫ëÂ§á‰ªΩÂ∑•ÂÖ∑Ë¥πÊó∂Ë¥πÂäõÁöÑÁª¥Êä§È°πÁõÆ„ÄÇÊ†∏ÂøÉÊ≠•È™§ Êñ∞Âª∫‰ª£Á†Å‰ªìÂ∫ìÈ¶ñÂÖàÊàë‰ª¨ÂÖàÁ°ÆÂÆöÔºåÂ∞ÜÈ°πÁõÆÊâòÁÆ°Âú® GitHub ‰∏äÔºåËøôÈáåÊúâ‰∏§ÁßçÊñπÊ°àÔºå‰∏ÄÁßçÊòØÂú®Â≠òÊîæÂçöÂÆ¢ÈùôÊÄÅ‰ª£Á†ÅÁöÑ‰ªìÂ∫ìÔºàÂ¶ÇÔºöxxx.github.ioÔºâ‰∏≠Êñ∞Ê∑ªÂä†ÂàÜÊîØ;Âè¶‰∏ÄÁßçÂàôÊòØÊñ∞Âª∫‰∏Ä‰∏™‰ªìÂ∫ìÁî®‰∫éÂ≠òÊîæÈ°πÁõÆ„ÄÇÊàëËøôÈáå‰ΩøÁî®ÁöÑÁ¨¨‰∫åÁßçÊñπÂºèÔºåÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™‰ªìÂ∫ìÔºöhexo-github-source „ÄÇ ÈÖçÁΩÆ AppVeyorÁÇπÊàëËøõÂÖ•AppVeyorÂÆòÁΩëÊ∑ªÂä†‰Ω†ÁöÑGitHubÈ°πÁõÆÔºåËøôÈáåË¶ÅÊ≥®ÊÑèÊ∑ªÂä†ÁöÑÊòØ‰Ω†ÁöÑSource RepoÔºàhexo-github-sourceÔºâÔºåËÄå‰∏çÊòØContent RepoÔºàxxx.github.io.gitÔºâ„ÄÇ ÈÖçÁΩÆ appveyor.ymlÂõûÂà∞ GitHub È°µÈù¢ÔºåÂú®Êñ∞Âª∫ÁöÑ hexo-github-source ‰ªìÂ∫ìÁöÑÊ†πÁõÆÂΩï‰∏ãÈù¢Êñ∞Âª∫ appveyor.yml Êñá‰ª∂„ÄÇÈÖçÁΩÆÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132clone_depth: 5 environment: nodejs_version: &quot;6&quot; access_token: secure: [ËøôÈáåÈúÄË¶ÅÊîπ‰∏∫Ëá™Â∑±ÁöÑÂØÜÂåôÔºåËé∑ÂèñÊñπÊ≥ïËßÅ‰∏ã] install: - ps: Install-Product node $env:nodejs_version - node --version - npm --version - npm install - npm install hexo-cli -g build_script: - hexo generate artifacts: - path: public on_success: - git config --global credential.helper store - ps: Add-Content &quot;$env:USERPROFILE\\.git-credentials&quot; &quot;https://$($env:access_token):x-oauth-basic@github.com`n&quot; - git config --global user.email &quot;%GIT_USER_EMAIL%&quot; - git config --global user.name &quot;%GIT_USER_NAME%&quot; - git clone --depth 5 -q --branch=%TARGET_BRANCH% %STATIC_SITE_REPO% %TEMP%\\static-site - cd %TEMP%\\static-site - del * /f /q - for /d %%p IN (*) do rmdir &quot;%%p&quot; /s /q - SETLOCAL EnableDelayedExpansion &amp; robocopy &quot;%APPVEYOR_BUILD_FOLDER%\\public&quot; &quot;%TEMP%\\static-site&quot; /e &amp; IF !ERRORLEVEL! EQU 1 (exit 0) ELSE (IF !ERRORLEVEL! EQU 3 (exit 0) ELSE (exit 1)) - git add -A - if &quot;%APPVEYOR_REPO_BRANCH%&quot;==&quot;master&quot; if not defined APPVEYOR_PULL_REQUEST_NUMBER (git diff --quiet --exit-code --cached || git commit -m &quot;Update Static Site&quot; &amp;&amp; git push origin %TARGET_BRANCH% &amp;&amp; appveyor AddMessage &quot;Static Site Updated&quot;) ‰ª•‰∏äÈÖçÁΩÆÔºåÂè™Êúâ access_token ‰∏ç‰∏ÄÊ†∑ÔºàÂÖ∂‰ΩôÁöÑÈÉΩÂèØ‰ª•Áõ¥Êé•Áî®ÔºâÔºåËøô‰∏™ÈúÄË¶ÅÂéª GitHub ÁîüÊàêÔºåÊà≥Êàë‰∫ÜËß£ÊÄé‰πàËé∑Âèñ„ÄÇÂú® GitHub ÊãøÂà∞ access_token ‰πãÂêéÔºåËøòÈúÄË¶ÅÂà∞ AppVeyor Âä†ÂØÜÈ°µÈù¢ ËøõË°åÂä†ÂØÜÔºåÊúÄÁªàÂæóÂà∞Á±ª‰ººËøôÊ†∑‰∏Ä‰∏≤‰∏úË•øMvjDPMTBE+hD5iZPRY2mIUuTl8quMhcEfhYe1rOti5g2GaTPQSDU/Mliff7NainM ÔºåÂ∞ÜËØ•ÂØÜÂåô ÂÜôÂÖ• appveyor.yml ‰∏≠„ÄÇ ÈÖçÁΩÆ Appveyor ÁéØÂ¢ÉÂèòÈáèÂõûÂà∞ ÂàöÊâçÁöÑ Appveyor È°µÈù¢ÔºåËøõÂÖ• settings È°µÈù¢ÔºåÈÄâÊã© Environment ÔºåÁÇπÂáª Add variable Ê∑ªÂä†ÁéØÂ¢ÉÂèòÈáèÔºåÈÖçÁΩÆÂ¶Ç‰∏ãÂõõ‰∏™ÂèòÈáèÔºö GIT_USER_EMAIL ÔºöGitHubÈÇÆÁÆ± GIT_USER_NAME ÔºöGitHubÁî®Êà∑Âêç STATIC_SITE_REPO ÔºöContent RepoÂú∞ÂùÄÔºàhttps://github.com/xxx/xxx.github.io.gitÔºâ TARGET_BRANCH Ôºö‰øùÁïôÈªòËÆ§ÁöÑ masterÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºöÊµãËØï‰∏éÈóÆÈ¢ò ÁªèËøá‰∏ÄÁï™ÊäòËÖæÔºåÁªà‰∫éË∂äËøáÊó†Êï∞ÁöÑÂùë‰πãÂêéÔºåÂÆåÁæéÁöÑËøêË°åÊàêÂäü„ÄÇÂùë‰∏ÄÔºöpush Âà∞‰ªìÂ∫ìÊó∂ÊèêÁ§∫Á©∫Êñá‰ª∂Â§πÊèêÁ§∫ themes/next ‰∏∫Á©∫Êñá‰ª∂Â§πÔºåÊèê‰∫§Â§±Ë¥•Ôºà GitHub Êó†Ê≥ïÊèê‰∫§Á©∫Êñá‰ª∂Â§πÔºâÔºåÂèØÈóÆÈ¢òÊòØÊòéÊòé‰∏çÊòØÁ©∫Êñá‰ª∂ÂïäÔºå‰∏∫‰ªÄ‰πà‰ºöÂà§ÂÆö‰∏∫Á©∫ÁöÑÔºüÂéüÊù•ÊàëËøôÊòØ next ‰∏ªÈ¢òÁõ¥Êé• git clone ‰∏ãÊù•ÁöÑÔºåÂõ†ËÄåÂú® next Êñá‰ª∂Â§πÁöÑÊ†πÁõÆÂΩï‰∏ãÈù¢Êúâ‰∏Ä‰∏™ .git ÁöÑÈöêËóèÊñá‰ª∂ÔºåÂ∞±ÊòØËøôÂØºËá¥ÁöÑÊó†Ê≥ïÊèê‰∫§„ÄÇÊó¢ÁÑ∂ÊâæÂà∞‰∫ÜÂéüÂõ†ÔºåÈÇ£Â∞±Â•ΩÊï¥‰∫ÜÔºåÁõ¥Êé•Âà†ÊéâÔºåÂÆåÁæéËß£ÂÜ≥ÈóÆÈ¢ò„ÄÇÂùë‰∫åÔºö AppVeyor ÊèêÁ§∫ BugÂ∞ÜÈ°πÁõÆ push Âà∞Êñ∞Âª∫ÁöÑ‰ªìÂ∫ì‰∏≠ÔºåÊü•Áúã AppVeyor ÁöÑËøêË°åÊó•ÂøóÔºåÁúãÊòØÂê¶ÊèêÁ§∫ Bug ÔºåÊàëÂú®ÊµãËØïÁöÑËøáÁ®ã‰∏≠Âæà‰∏çÂπ∏ÔºåÂ∞±Âá∫Áé∞ËøáÈóÆÈ¢òÔºåÂéüÂõ†ÊòØ hexo ÁöÑ‰∏Ä‰∏™Êèí‰ª∂ÁõÆÂΩïËøáÈïøÔºåÂØºËá¥Á®ãÂ∫èÂ§±Ë¥•ÔºåËß£ÂÜ≥ÊñπÊ≥ïÊòØ‰∏çÁî®Êää hexo Êñá‰ª∂Â§πÂ§á‰ªΩÂà∞‰ªìÂ∫ì‰∏≠ÔºåÂõ†ËÄåÂÆåÁæéÁöÑËß£ÂÜ≥ÔºàÈÅøÂºÄÔºâÈóÆÈ¢ò„ÄÇÂ§á‰ªΩÂà∞‰ªìÂ∫ìÁöÑÈ°πÁõÆÁªìÊûÑÂ¶Ç‰∏ãÔºöÔºàÂ§ö‰ΩôÁöÑÈÉΩÂèØÂéªÊéâÔºå‰ªÖ‰øùÁïôÊ†∏ÂøÉÔºâ","raw":null,"content":null,"categories":[{"name":"hexo","slug":"hexo","permalink":"https://stanxia.github.io/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://stanxia.github.io/tags/hexo/"},{"name":"appveyor","slug":"appveyor","permalink":"https://stanxia.github.io/tags/appveyor/"}]},{"title":"Hive‰∫ãÂä°ÁÆ°ÁêÜ","slug":"Hive‰∫ãÂä°ÁÆ°ÁêÜ","date":"2017-12-01T11:30:06.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/12/01/Hive‰∫ãÂä°ÁÆ°ÁêÜ/","link":"","permalink":"https://stanxia.github.io/2017/12/01/Hive‰∫ãÂä°ÁÆ°ÁêÜ/","excerpt":"ÁÆÄ‰ªã\nHive‰Ωú‰∏∫HadoopÂÆ∂ÊóèÂéÜÂè≤ÊúÄÊÇ†‰πÖÁöÑÁªÑ‰ª∂‰πã‰∏ÄÔºå‰∏ÄÁõ¥‰ª•ÂÖ∂‰ºòÁßÄÁöÑÂÖºÂÆπÊÄßÊîØÊåÅÂíåÁ®≥ÂÆöÊÄßËÄåËëóÁß∞ÔºåË∂äÊù•Ë∂äÂ§öÁöÑ‰ºÅ‰∏öÂ∞Ü‰∏öÂä°Êï∞ÊçÆ‰ªé‰º†ÁªüÊï∞ÊçÆÂ∫ìËøÅÁßªËá≥HadoopÂπ≥Âè∞ÔºåÂπ∂ÈÄöËøáHiveÊù•ËøõË°åÊï∞ÊçÆÂàÜÊûê„ÄÇ‰ΩÜÊòØÊàë‰ª¨Âú®ËøÅÁßªÁöÑËøáÁ®ã‰∏≠ÈöæÂÖç‰ºöÁ¢∞Âà∞Â¶Ç‰ΩïÂ∞Ü‰º†ÁªüÊï∞ÊçÆÂ∫ìÁöÑÂäüËÉΩ‰πüËøÅÁßªÂà∞HadoopÁöÑÈóÆÈ¢òÔºåÊØîÂ¶ÇËØ¥‰∫ãÂä°„ÄÇ‰∫ãÂä°‰Ωú‰∏∫‰º†ÁªüÊï∞ÊçÆÂ∫ìÂæàÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÂäüËÉΩÔºåÂú®Hive‰∏≠ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢ÔºüHiveÁöÑÂÆûÁé∞Êúâ‰ªÄ‰πà‰∏ç‰∏ÄÊ†∑ÁöÑÂú∞ÊñπÂë¢ÔºüÊàë‰ª¨Â∞Ü‰º†ÁªüÊï∞ÊçÆÂ∫ìÁöÑÂ∫îÁî®ËøÅÁßªÂà∞HiveÂ¶ÇÊûúÊúâ‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÂú∫ÊôØÊàë‰ª¨ËØ•Â¶Ç‰ΩïÂéªËΩ¨Êç¢Âπ∂Ë¶ÅÊ≥®ÊÑè‰ªÄ‰πàÈóÆÈ¢òÂë¢Ôºü\nÊú¨Êñá‰ºöÈÄöËøáÂæàÂ§öÁúüÂÆûÊµãËØïÊ°à‰æãÊù•ÊØîËæÉHive‰∏é‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∫ãÂä°ÁöÑÂå∫Âà´ÔºåÂπ∂Âú®ÊñáÊú´ÁªôÂá∫‰∏Ä‰∫õÂú®HiveÂπ≥Âè∞‰∏ä‰ΩøÁî®‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÂäüËÉΩÊó∂ÁöÑÊåáÂØºÂíåÂª∫ËÆÆ„ÄÇACID‰∏éÂÆûÁé∞ÂéüÁêÜ‰∏∫‰∫ÜÊñπ‰æøËß£ÈáäÂíåËØ¥ÊòéÂêéÈù¢ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÔºåËøôÈáåÈáçÊèê‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊ¶ÇÂøµÔºå‰ª•‰∏ãÂÜÖÂÆπÊù•Ê∫ê‰∫éÁΩëÁªú„ÄÇ","text":"ÁÆÄ‰ªã Hive‰Ωú‰∏∫HadoopÂÆ∂ÊóèÂéÜÂè≤ÊúÄÊÇ†‰πÖÁöÑÁªÑ‰ª∂‰πã‰∏ÄÔºå‰∏ÄÁõ¥‰ª•ÂÖ∂‰ºòÁßÄÁöÑÂÖºÂÆπÊÄßÊîØÊåÅÂíåÁ®≥ÂÆöÊÄßËÄåËëóÁß∞ÔºåË∂äÊù•Ë∂äÂ§öÁöÑ‰ºÅ‰∏öÂ∞Ü‰∏öÂä°Êï∞ÊçÆ‰ªé‰º†ÁªüÊï∞ÊçÆÂ∫ìËøÅÁßªËá≥HadoopÂπ≥Âè∞ÔºåÂπ∂ÈÄöËøáHiveÊù•ËøõË°åÊï∞ÊçÆÂàÜÊûê„ÄÇ‰ΩÜÊòØÊàë‰ª¨Âú®ËøÅÁßªÁöÑËøáÁ®ã‰∏≠ÈöæÂÖç‰ºöÁ¢∞Âà∞Â¶Ç‰ΩïÂ∞Ü‰º†ÁªüÊï∞ÊçÆÂ∫ìÁöÑÂäüËÉΩ‰πüËøÅÁßªÂà∞HadoopÁöÑÈóÆÈ¢òÔºåÊØîÂ¶ÇËØ¥‰∫ãÂä°„ÄÇ‰∫ãÂä°‰Ωú‰∏∫‰º†ÁªüÊï∞ÊçÆÂ∫ìÂæàÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÂäüËÉΩÔºåÂú®Hive‰∏≠ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢ÔºüHiveÁöÑÂÆûÁé∞Êúâ‰ªÄ‰πà‰∏ç‰∏ÄÊ†∑ÁöÑÂú∞ÊñπÂë¢ÔºüÊàë‰ª¨Â∞Ü‰º†ÁªüÊï∞ÊçÆÂ∫ìÁöÑÂ∫îÁî®ËøÅÁßªÂà∞HiveÂ¶ÇÊûúÊúâ‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÂú∫ÊôØÊàë‰ª¨ËØ•Â¶Ç‰ΩïÂéªËΩ¨Êç¢Âπ∂Ë¶ÅÊ≥®ÊÑè‰ªÄ‰πàÈóÆÈ¢òÂë¢Ôºü Êú¨Êñá‰ºöÈÄöËøáÂæàÂ§öÁúüÂÆûÊµãËØïÊ°à‰æãÊù•ÊØîËæÉHive‰∏é‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∫ãÂä°ÁöÑÂå∫Âà´ÔºåÂπ∂Âú®ÊñáÊú´ÁªôÂá∫‰∏Ä‰∫õÂú®HiveÂπ≥Âè∞‰∏ä‰ΩøÁî®‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÂäüËÉΩÊó∂ÁöÑÊåáÂØºÂíåÂª∫ËÆÆ„ÄÇACID‰∏éÂÆûÁé∞ÂéüÁêÜ‰∏∫‰∫ÜÊñπ‰æøËß£ÈáäÂíåËØ¥ÊòéÂêéÈù¢ÁöÑ‰∏Ä‰∫õÈóÆÈ¢òÔºåËøôÈáåÈáçÊèê‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∫ãÂä°Áõ∏ÂÖ≥ÁöÑÊ¶ÇÂøµÔºå‰ª•‰∏ãÂÜÖÂÆπÊù•Ê∫ê‰∫éÁΩëÁªú„ÄÇ ACIDËØ¥Êòé‰Ωï‰∏∫‰∫ãÂä°ÔºüÂ∞±ÊòØ‰∏ÄÁªÑÂçïÂÖÉÂåñÊìç‰ΩúÔºåËøô‰∫õÊìç‰ΩúË¶Å‰πàÈÉΩÊâßË°åÔºåË¶Å‰πàÈÉΩ‰∏çÊâßË°åÔºåÊòØ‰∏Ä‰∏™‰∏çÂèØÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰Ωç„ÄÇ ‰∫ãÂä°ÔºàtransactionÔºâÊâÄÂ∫îËØ•ÂÖ∑ÊúâÁöÑÂõõ‰∏™Ë¶ÅÁ¥†ÔºöÂéüÂ≠êÊÄßÔºàAtomicityÔºâ„ÄÅ‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ„ÄÅÈöîÁ¶ªÊÄßÔºàIsolationÔºâ„ÄÅÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ„ÄÇËøôÂõõ‰∏™Âü∫Êú¨Ë¶ÅÁ¥†ÈÄöÂ∏∏Áß∞‰∏∫ACIDÁâπÊÄß„ÄÇ ÂéüÂ≠êÊÄßÔºàAtomicityÔºâ:‰∏Ä‰∏™‰∫ãÂä°ÊòØ‰∏Ä‰∏™‰∏çÂèØÂÜçÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÂçï‰ΩçÔºå‰∫ãÂä°‰∏≠ÁöÑÊâÄÊúâÊìç‰ΩúË¶Å‰πàÈÉΩÂèëÁîüÔºåË¶Å‰πàÈÉΩ‰∏çÂèëÁîü„ÄÇ ‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâ:‰∫ãÂä°ÂºÄÂßã‰πãÂâçÂíå‰∫ãÂä°ÁªìÊùü‰ª•ÂêéÔºåÊï∞ÊçÆÂ∫ìÁöÑÂÆåÊï¥ÊÄßÁ∫¶ÊùüÊ≤°ÊúâË¢´Á†¥Âùè„ÄÇËøôÊòØËØ¥Êï∞ÊçÆÂ∫ì‰∫ãÂä°‰∏çËÉΩÁ†¥ÂùèÂÖ≥Á≥ªÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄß‰ª•Âèä‰∏öÂä°ÈÄªËæë‰∏äÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ ÈöîÁ¶ªÊÄßÔºàIsolationÔºâ:Â§ö‰∏™‰∫ãÂä°Âπ∂ÂèëËÆøÈóÆÔºå‰∫ãÂä°‰πãÈó¥ÊòØÈöîÁ¶ªÁöÑÔºå‰∏Ä‰∏™‰∫ãÂä°‰∏çÂΩ±ÂìçÂÖ∂ÂÆÉ‰∫ãÂä°ËøêË°åÊïàÊûú„ÄÇËøôÊåáÁöÑÊòØÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÔºåÂΩì‰∏çÂêåÁöÑ‰∫ãÂä°ÂêåÊó∂Êìç‰ΩúÁõ∏ÂêåÁöÑÊï∞ÊçÆÊó∂ÔºåÊØè‰∏™‰∫ãÂä°ÈÉΩÊúâÂêÑËá™ÂÆåÊï¥ÁöÑÊï∞ÊçÆÁ©∫Èó¥„ÄÇ‰∫ãÂä°Êü•ÁúãÊï∞ÊçÆÊõ¥Êñ∞Êó∂ÔºåÊï∞ÊçÆÊâÄÂ§ÑÁöÑÁä∂ÊÄÅË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂÆÉ‰πãÂâçÁöÑÁä∂ÊÄÅÔºåË¶Å‰πàÊòØÂè¶‰∏Ä‰∫ãÂä°‰øÆÊîπÂêéÁöÑÁä∂ÊÄÅÔºå‰∫ãÂä°‰∏ç‰ºöÊü•ÁúãÂà∞‰∏≠Èó¥Áä∂ÊÄÅÁöÑÊï∞ÊçÆ„ÄÇ‰∫ãÂä°‰πãÈó¥ÁöÑÁõ∏Â∫îÂΩ±ÂìçÔºåÂàÜÂà´‰∏∫ÔºöËÑèËØª„ÄÅ‰∏çÂèØÈáçÂ§çËØª„ÄÅÂπªËØª„ÄÅ‰∏¢Â§±Êõ¥Êñ∞„ÄÇ ÊåÅ‰πÖÊÄßÔºàDurabilityÔºâ:ÊÑèÂë≥ÁùÄÂú®‰∫ãÂä°ÂÆåÊàê‰ª•ÂêéÔºåËØ•‰∫ãÂä°ÈîÅÂØπÊï∞ÊçÆÂ∫ìÊâÄ‰ΩúÁöÑÊõ¥Êîπ‰æøÊåÅ‰πÖÁöÑ‰øùÂ≠òÂú®Êï∞ÊçÆÂ∫ì‰πã‰∏≠ÔºåÂπ∂‰∏ç‰ºöË¢´ÂõûÊªö„ÄÇ ACIDÁöÑÂÆûÁé∞ÂéüÁêÜ‰∫ãÂä°ÂèØ‰ª•‰øùËØÅACIDÂéüÂàôÁöÑÊìç‰ΩúÔºåÈÇ£‰πà‰∫ãÂä°ÊòØÂ¶Ç‰Ωï‰øùËØÅËøô‰∫õÂéüÂàôÁöÑÔºüËß£ÂÜ≥ACIDÈóÆÈ¢òÁöÑ‰∏§Â§ßÊäÄÊúØÁÇπÊòØÔºö È¢ÑÂÜôÊó•ÂøóÔºàWrite-ahead loggingÔºâ‰øùËØÅÂéüÂ≠êÊÄßÂíåÊåÅ‰πÖÊÄß ÈîÅÔºàlockingÔºâ‰øùËØÅÈöîÁ¶ªÊÄß ËøôÈáåÂπ∂Ê≤°ÊúâÊèêÂà∞‰∏ÄËá¥ÊÄßÔºåÊòØÂõ†‰∏∫‰∏ÄËá¥ÊÄßÊòØÂ∫îÁî®Áõ∏ÂÖ≥ÁöÑËØùÈ¢òÔºåÂÆÉÁöÑÂÆö‰πâ‰∏Ä‰∏™Áî±‰∏öÂä°Á≥ªÁªüÊù•ÂÆö‰πâÔºå‰ªÄ‰πàÊ†∑ÁöÑÁä∂ÊÄÅÊâçÊòØ‰∏ÄËá¥ÔºüËÄåÂÆûÁé∞‰∏ÄËá¥ÊÄßÁöÑ‰ª£Á†ÅÈÄöÂ∏∏Âú®‰∏öÂä°ÈÄªËæëÁöÑ‰ª£Á†Å‰∏≠Âæó‰ª•‰ΩìÁé∞„ÄÇ Ê≥®ÔºöÈîÅÊòØÊåáÂú®Âπ∂ÂèëÁéØÂ¢É‰∏≠ÈÄöËøáËØªÂÜôÈîÅÊù•‰øùËØÅÊìç‰ΩúÁöÑ‰∫íÊñ•ÊÄß„ÄÇÊ†πÊçÆÈöîÁ¶ªÁ®ãÂ∫¶‰∏çÂêåÔºåÈîÅÁöÑËøêÁî®‰πü‰∏çÂêå„ÄÇÊµãËØïÁéØÂ¢É Êìç‰ΩúÁ≥ªÁªü CentOS 6.5 JDK jdk1.7.0_67 CDH 5.9 Hadoop 2.6.0 Hive 1.1.0 HiveÁöÑACIDÊµãËØï Hive‰∏≠ÁöÑÈîÅÔºà‰∏çÂºÄÂêØ‰∫ãÂä°ÔºâHive‰∏≠ÂÆö‰πâ‰∫Ü‰∏§ÁßçÈîÅÁöÑÊ®°ÂºèÔºöÂÖ±‰∫´ÈîÅÔºàSÔºâÂíåÊéíÂÆÉÈîÅÔºàXÔºâÔºåÈ°æÂêçÊÄù‰πâÔºåÂ§ö‰∏™ÂÖ±‰∫´ÈîÅ(S)ÂèØ‰ª•ÂêåÊó∂Ëé∑ÂèñÔºå‰ΩÜÊòØÊéíÂÆÉÈîÅ(X)‰ºöÈòªÂ°ûÂÖ∂ÂÆÉÊâÄÊúâÈîÅ„ÄÇÂú®Êú¨Ê¨°ÊµãËØï‰∏≠ÔºåCDH5.9ÁöÑConcurrencyÂèÇÊï∞ÊòØÈªòËÆ§ÂºÄÂêØÁöÑÔºàhive.support.concurrency=trueÔºâÔºå‰ª•‰∏ãÂàÜÂà´ÂØπÂºÄÂêØConcurrencyÂíåÂÖ≥Èó≠ËøõË°åÁõ∏ÂÖ≥ÊµãËØï„ÄÇ È¶ñÂÖàÂú®ÊµãËØï‰πãÂâçÔºåÂàõÂª∫‰∏Ä‰∏™ÊôÆÈÄöÁöÑhiveË°®Ôºö 1create table test_notransaction(user_id Int,name String); Âêëtest_transactionË°®‰∏≠ÊèíÂÖ•ÊµãËØïÊï∞ÊçÆÔºö 1insert into test_notransaction values(1,'peach1'),(2,'peach2'),(3, 'peach3'),(4, 'peach4'); Êü•ÁúãÊèíÂÖ•ÁöÑÊï∞ÊçÆÔºö ÂºÄÂêØConcurrency1„ÄÅÂØπcatalog_salesË°®ËøõË°åÂπ∂ÂèëselectÊìç‰Ωú ÊâßË°åÁöÑsqlËØ≠Âè•Ôºöselect count(*) from catalog_sales; ÊâßË°åÂçïÊù°sqlÊü•ËØ¢Êó∂ÔºåËé∑Âèñ‰∏Ä‰∏™ÂÖ±‰∫´ÈîÅÔºàSÔºâÔºåsqlËØ≠Âè•Ê≠£Â∏∏ÊâßË°å ÂêåÊó∂ÊâßË°å‰∏§Êù°sqlÊü•ËØ¢ÊòØÔºåËé∑Âèñ‰∏§‰∏™ÂÖ±‰∫´ÈîÅÔºåÂπ∂‰∏îsqlËØ≠Âè•ÂùáÊ≠£Â∏∏ÊâßË°å ÂàÜÊûêÔºöÁî±Ê≠§ÂØπÊØîÂèØÂæóÂá∫hiveÂú®ÊâßË°åsqlÊü•ËØ¢Êó∂Ëé∑ÂèñShareÈîÅÔºåÂú®Âπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÂèØËé∑ÂèñÂ§ö‰∏™ÂÖ±‰∫´ÈîÅ„ÄÇ 2„ÄÅÂØπtestË°®ËøõË°åÂπ∂ÂèëInsertÊìç‰Ωú ÂàõÂª∫Ë°®Ôºö 1create table test(name string, id int); ÊâßË°åsqlËØ≠Âè•Ôºö 12insert into test values('test11aaa1',1252); insert into test values('test1',52); ÊâßË°åÂçïÊù°insertËØ≠Âè•Êó∂ÔºåËé∑Âèñ‰∏Ä‰∏™XÈîÅÔºåsqlËØ≠Âè•Ê≠£Â∏∏ÊâßË°å ÂêåÊó∂ÊâßË°å‰∏§Êù°insertËØ≠Âè•Êó∂ÔºåÂè™ËÉΩËé∑Âèñ‰∏Ä‰∏™testË°®XÈîÅÔºåÁ¨¨‰∏ÄÊù°insertËØ≠Âè•Ê≠£Â∏∏ÊâßË°åÔºåÁ¨¨‰∫åÊù°insertËØ≠Âè•Â§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅÔºåÂú®Á¨¨‰∏ÄÊù°insertËØ≠Âè•ÈáäÊîætestË°®ÁöÑXÈîÅÔºåÁ¨¨‰∫åÊù°sqlËØ≠Âè•Ê≠£Â∏∏ÊâßË°å. ÂàÜÊûêÔºöÁî±Ê≠§ÂØπÊØîÂèØÂæóÂá∫hiveÂú®ÊâßË°åinsertÊìç‰ΩúÊó∂ÔºåÂè™ËÉΩËé∑Âèñ‰∏Ä‰∏™XÈîÅ‰∏îÈîÅ‰∏çËÉΩÂÖ±‰∫´ÔºåÂè™ËÉΩÂú®sqlÊâßË°åÂÆåÊàêÈáäÊîæÈîÅÂêéÔºåÂêéÁª≠sqlÊñπÂèØÁªßÁª≠ÊâßË°å„ÄÇ 3„ÄÅÂØπtestË°®ÊâßË°åselectÁöÑÂêåÊó∂ÊâßË°åinsertÊìç‰Ωú ÊâßË°åsqlËØ≠Âè•Ôºö 12select count(*) from test; insert into test values(&quot;test123&quot;,123); Ê≠•È™§Ôºö 1) ÊâßË°åselectËØ≠Âè•ÔºåÂú®selectÊú™ËøêË°åÂÆåÊó∂ÔºåÂú®Êñ∞ÁöÑÁ™óÂè£ÂêåÊó∂ÊâßË°åinsertËØ≠Âè•ËßÇÂØü‰∏§Êù°sqlÊâßË°åÊÉÖÂÜµÔºåselectËØ≠Âè•Ê≠£Â∏∏ÊâßË°åÔºåinsertËØ≠Âè•Â§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇ 2) Ê≠§Êó∂Êü•ÁúãtestË°®ÈîÅÁä∂ÊÄÅ Âú®Ê≠•È™§1ÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºåËé∑ÂèñÂà∞testË°®ÁöÑÈîÅ‰∏∫ÂÖ±‰∫´ÈîÅÔºàSÔºâ 3) Âú®selectËØ≠Âè•ÊâßË°åÂÆåÊàêÂêéÔºåËßÇÂØüinsertËØ≠Âè•ÂºÄÂßãÊ≠£Â∏∏ÊâßË°åÔºåÊ≠§Êó∂Ëé∑ÂèñtestË°®ÈîÅ‰∏∫ÊéíÂÆÉÈîÅÔºàXÔºâ„ÄÇÊ≥®ÊÑèÔºöÂú®selectËØ≠Âè•ÊâßË°åÂÆåÊàêÂêéÔºåÂ§ßÊ¶ÇËøá40sÂ∑¶Âè≥insertËØ≠Âè•ÊâçÊ≠£Â∏∏ÊâßË°åÔºåËøôÊòØÁî±hive.lock.sleep.between.retriesÂèÇÊï∞ÊéßÂà∂ÔºåÈªòËÆ§60 ÂàÜÊûêÔºö Áî±‰∏äËø∞Êìç‰ΩúÂèØÂæóÂá∫Ôºåhive‰∏≠‰∏Ä‰∏™Ë°®Âè™ËÉΩÊúâ‰∏Ä‰∏™ÊéíÂÆÉÈîÅ(X)‰∏îÈîÅ‰∏çËÉΩÂÖ±‰∫´ÔºåÂú®Ëé∑ÂèñÊéíÂÆÉÈîÅÊó∂ÔºåË°®‰∏ä‰∏çËÉΩÊúâÂÖ∂ÂÆÉÈîÅÂåÖÊã¨ÂÖ±‰∫´ÈîÅ(S)ÔºåÂè™ÊúâÂú®Ë°®‰∏äÊâÄÊúâÁöÑÈîÅÈÉΩÈáäÊîæÂêéÔºåinsertÊìç‰ΩúÊâçËÉΩÁªßÁª≠ÔºåÂê¶ÂàôÂ§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇ ÂØπÊ≥®ÊÑèÈÉ®ÂàÜËøõË°åÂèÇÊï∞Ë∞ÉÊï¥ÔºåÂ∞Ühive.lock.sleep.between.retriesËÆæÁΩÆ‰∏∫10sÔºåÂÜçÊ¨°ËøõË°åÊµãËØïÂèëÁé∞ÔºåÂú®selectËØ≠Âè•ÊâßË°åÂÆåÊàêÂêéÔºåÂ§ßÊ¶ÇËøá6sÂ∑¶Âè≥insertËØ≠Âè•ÂºÄÂßãÊâßË°å,ÈÄöËøá‰∏§Ê¨°ÊµãËØïÂèëÁé∞ÔºåÁ≠âÂæÖÊó∂Èó¥ÂùáÂú®10s‰ª•ÂÜÖÔºåÁî±Ê≠§ÂèØ‰ª•ÂæóÂá∫Ê≠§ÂèÇÊï∞ÂΩ±ÂìçsqlÊìç‰ΩúËé∑ÂèñÈîÅÁöÑÈó¥ÈöîÔºàÂú®Êú™Ëé∑ÂèñÂà∞ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÔºâÔºåÂ¶ÇÊûúÊ≠§Êó∂Êú™Âà∞Ëé∑ÂèñÈîÅËß¶ÂèëÂë®ÊúüÔºåÊâßË°åÂÖ∂ÂÆÉsqlÂàôÔºåËØ•sql‰ºö‰ºò‰∫éÁ≠âÂæÖÁöÑsqlÊâßË°å„ÄÇ 4„ÄÅÂØπtestË°®ÊâßË°åinsertÁöÑÂêåÊó∂ÊâßË°åselectÊìç‰Ωú ÊâßË°åsqlËØ≠Âè•Ôºö 12insert into test values(&quot;test123&quot;,123); select count(*) from test; Êìç‰ΩúÊ≠•È™§Ôºö 1) Âú®ÂëΩ‰ª§Á™óÂè£ÊâßË°åinsertËØ≠Âè•ÔºåÂú®insertÊìç‰ΩúÊú™ÊâßË°åÂÆåÊàêÊó∂ÔºåÂú®Êñ∞ÁöÑÂëΩ‰ª§Á™óÂè£ÊâßË°åselectËØ≠Âè•ÔºåËßÇÂØü‰∏§‰∏™Á™óÂè£ÁöÑsqlÊâßË°åÊÉÖÂÜµÔºåinsertËØ≠Âè•Ê≠£Â∏∏ÊâßË°åÔºåselectËØ≠Âè•Â§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇ 2) Ê≠§Êó∂Êü•ÁúãtestË°®ÈîÅÁä∂ÊÄÅÔºåÂè™ÊúâinsertÊìç‰ΩúËé∑ÂèñÁöÑÊéíÂÆÉÈîÅÔºàXÔºâ 3) Âú®insertËØ≠Âè•ÊâßË°åÂÆåÊàêÂêéÔºåËßÇÂØüselectËØ≠Âè•ÂºÄÂßãÊ≠£Â∏∏ÊâßË°åÔºåÊ≠§Êó∂Êü•ÁúãtestË°®ÈîÅÁä∂ÊÄÅ‰∏∫ÂÖ±‰∫´ÈîÅÔºàSÔºâÔºå‰πãÂâçÁöÑinsertÊìç‰ΩúËé∑ÂèñÁöÑÊéíÂÆÉÈîÅÔºàXÔºâÂ∑≤Ë¢´ÈáäÊîæ ÂàÜÊûêÔºöÂú®testË°®ÈîÅÁä∂ÊÄÅ‰∏∫ÊéíÂÆÉÈîÅ(X)Êó∂ÔºåÊâÄÊúâÁöÑÊìç‰ΩúÂùáË¢´ÈòªÂ°ûÂ§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅÔºåÂè™ÊúâÂú®ÊéíÂÆÉÈîÅ(X)ÈáäÊîæÂÖ∂ÂÆÉÊìç‰ΩúÂèØÁªßÁª≠ËøõË°å„ÄÇ 5„ÄÅÊµãËØïupdateÂíådelete‰øÆÊîπtestË°®Êï∞ÊçÆ sqlËØ≠Âè•Ôºö 12update test set name=&apos;aaaa&apos; where id=1252; delete test set name=&apos;bbbb&apos; where id=123; 1) Ë°®‰∏≠Êï∞ÊçÆÔºåÊõ¥Êñ∞Ââç 2) Âú®beelineÁ™óÂè£ÊâßË°åupdateÊìç‰Ωú ÊâßË°åupdateÊìç‰ΩúÊä•ÈîôÔºåÂºÇÂ∏∏ÊèêÁ§∫‚ÄúAttempt to do update or delete using transaction manager that does not support these operations‚ÄùÔºåÂú®Èùû‰∫ãÂä°Ê®°Âºè‰∏ã‰∏çÊîØÊåÅupdate Âíå delete„ÄÇ ÂÖ≥Èó≠Concurrency1„ÄÅÊâßË°åinsertÊìç‰ΩúÁöÑÂêåÊó∂ÊâßË°åselectÊìç‰Ωú sqlËØ≠Âè•Ôºö 12insert into test_notransaction values(1,&apos;peach1&apos;),(2,&apos;peach2&apos;),(3, &apos;peach3&apos;),(4, &apos;peach4&apos;); select count(*) from test_notransaction; Êìç‰ΩúsqlÂâçÔºåÊü•ÁúãË°®Êï∞ÊçÆ Êü•Áúãtest_notransactionË°®Ëé∑ÂèñÊÉÖÂÜµÔºåshow locks; hiveÂú®Êú™ÂºÄÂêØconcurrency ÁöÑÊÉÖÂÜµ‰∏ã,show locks‰∏çËÉΩÊ≠£Â∏∏Ëé∑ÂèñË°®ÁöÑÈîÅÔºåÂêåÊó∂ÂØπÂêå‰∏ÄÂº†Ë°®ÊâßË°åinsertÂíåselectÊìç‰ΩúÊó∂Âπ∂ÂèëÊâßË°åÔºåËé∑ÂèñÊï∞ÊçÆÂèñÂÜ≥‰∫ésqlÊâßË°åÈÄüÂ∫¶ÔºåÂõ†Ê≠§Âú®select ÁöÑÊó∂ÂÄôÊú™Ëé∑ÂèñÂà∞ÊèíÂÖ•Êï∞ÊçÆ„ÄÇ 2„ÄÅÊâßË°åselectÊìç‰ΩúÁöÑÂêåÊó∂ÊâßË°åinsertÊìç‰Ωú sqlËØ≠Âè•Ôºö 12select count(*) from test_notransaction; insert into test_notransaction values(1,&apos;peach1&apos;),(2,&apos;peach2&apos;),(3, &apos;peach3&apos;),(4, &apos;peach4&apos;); Âú®ÊâßË°åselectÁöÑÂêåÊó∂ÊâßË°åinsertÊìç‰ΩúÔºåÊìç‰ΩúÂèØ‰ª•ÂêåÊó∂Âπ∂Ë°åÊìç‰ΩúÔºåÊú™‰∫ßÁîüÈòªÂ°ûÁ≠âÂæÖÁöÑËøáÁ®ã„ÄÇ 3„ÄÅÂêåÊó∂ÊâßË°åÂ§öÊù°insertÊìç‰Ωú sqlËØ≠Âè•Ôºö 12insert into test_notransaction values(1,&apos;peach1&apos;),(2,&apos;peach2&apos;),(3, &apos;peach3&apos;),(4, &apos;peach4&apos;); insert into test_notransaction values(1,&apos;peach1&apos;),(2,&apos;peach2&apos;),(3, &apos;peach3&apos;),(4, &apos;peach4&apos;); ÂêåÊó∂ÊâßË°åinsertÊìç‰ΩúÊó∂ÔºåÂèØÂêåÊó∂ÊâßË°åÊú™‰∫ßÁîüÈòªÂ°ûÁ≠âÂæÖÁöÑËøáÁ®ã„ÄÇ 4„ÄÅÊâßË°åupdateÊìç‰ΩúÔºåÂ∞ÜË°®‰∏≠user_id‰∏∫2ÁöÑÁî®Êà∑Âêç‰øÆÊîπ‰∏∫peach22 sqlËØ≠Âè•Ôºö 1update test_notransaction set name=&apos;peach22&apos; where user_id=2; ÊâßË°åupdateÊìç‰ΩúÔºåÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÔºö Âú®Êú™ÈÖçÁΩÆhiveÁöÑTransactionÂíåACIDÊó∂Ôºå‰∏çÊîØÊåÅupdateÊìç‰Ωú„ÄÇ 5„ÄÅÊâßË°ådeleteÊìç‰ΩúÔºåÂ∞ÜË°®‰∏≠user_id‰∏∫1‰ø°ÊÅØÂà†Èô§ sqlËØ≠Âè•Ôºö 1delete from test_notransaction where user_id=1; ÊâßË°ådeleteÊìç‰ΩúÔºåÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÔºö hiveÊú™ÈÖçÁΩÆTransactionÂíåACIDÔºå‰∏çÊîØÊåÅdeleteÊìç‰Ωú„ÄÇ 6„ÄÅÊü•ÁúãË°®Ëé∑ÂèñÈîÅÁ±ªÂûã 1show locks; Êó†Ê≥ïÊ≠£Â∏∏ÊâßË°åÔºõ HiveÁöÑ‰∫ãÂä°HiveÁöÑ‰∫ãÂä°ÈÖçÁΩÆHive‰ªé0.13ÂºÄÂßãÂä†ÂÖ•‰∫Ü‰∫ãÂä°ÊîØÊåÅÔºåÂú®Ë°åÁ∫ßÂà´Êèê‰æõÂÆåÊï¥ÁöÑACIDÁâπÊÄßÔºåHiveÂú®0.14Êó∂Âä†ÂÖ•‰∫ÜÂØπINSERT‚Ä¶VALUES,UPDATE,and DELETEÁöÑÊîØÊåÅ„ÄÇÂØπ‰∫éÂú®Hive‰∏≠‰ΩøÁî®ACIDÂíåTransactionsÔºå‰∏ªË¶ÅÊúâ‰ª•‰∏ãÈôêÂà∂Ôºö ‰∏çÊîØÊåÅBEGIN,COMMITÂíåROLLBACK Âè™ÊîØÊåÅORCÊñá‰ª∂Ê†ºÂºè Ë°®ÂøÖÈ°ªÂàÜÊ°∂ ‰∏çÂÖÅËÆ∏‰ªé‰∏Ä‰∏™ÈùûACIDËøûÊé•ÂÜôÂÖ•/ËØªÂèñACIDË°® ‰∏∫‰∫Ü‰ΩøHiveÊîØÊåÅ‰∫ãÂä°Êìç‰ΩúÔºåÈúÄÂ∞Ü‰ª•‰∏ãÂèÇÊï∞Âä†ÂÖ•Âà∞hive-site.xmlÊñá‰ª∂‰∏≠„ÄÇ 123456789101112131415161718192021222324&lt;property&gt;&lt;name&gt;hive.support.concurrency&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hive.enforce.bucketing&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hive.exec.dynamic.partition.mode&lt;/name&gt;&lt;value&gt;nonstrict&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hive.txn.manager&lt;/name&gt;&lt;value&gt;org.apache.hadoop.hive.ql.lockmgr.DbTxnManager&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hive.compactor.initiator.on&lt;/name&gt;&lt;value&gt;true&lt;/value&gt;&lt;/property&gt;&lt;property&gt;&lt;name&gt;hive.compactor.worker.threads &lt;/name&gt;&lt;value&gt;1&lt;/value&gt;&lt;/property&gt; ÂèØ‰ª•Âú®Cloudera ManagerËøõË°å‰ª•‰∏ãÈÖçÁΩÆÔºö ‰∏∫‰∫ÜËÆ©beelineÊîØÊåÅËøòÈúÄË¶ÅÈÖçÁΩÆÔºö Hive‰∫ãÂä°ÊµãËØïÁéØÂ¢ÉÂáÜÂ§á1„ÄÅÂàõÂª∫‰∏Ä‰∏™ÊîØÊåÅACIDÁöÑË°® Âª∫Ë°®ËØ≠Âè•Ôºö 123create table test_trancaction (user_id Int,name String) clustered by (user_id) into 3 buckets stored as orc TBLPROPERTIES ('transactional'='true'); Â∞ÜË°®Âêç‰øÆÊîπ‰∏∫test_transaction 1alter table test_trancaction rename to test_transaction; 2„ÄÅÂáÜÂ§áÊµãËØïÊï∞ÊçÆÔºåÂêëÊï∞ÊçÆÂ∫ì‰∏≠ÊèíÂÖ•Êï∞ÊçÆ 1insert into test_transaction values(1,'peach'),(2,'peach2'),(3,'peach3'),(4,'peach4'),(5,'peach5'); Áî®‰æãÊµãËØï1„ÄÅÊâßË°åupdateÊìç‰ΩúÔºåÂ∞Üuser_idÁöÑname‰øÆÊîπ‰∏∫peach_update sqlËØ≠Âè•Ôºö 1update test_transaction set name='peach_update' where user_id=1; ÊâßË°å‰øÆÊîπÊìç‰ΩúÔºåÊü•ÁúãË°®Ëé∑ÂèñÈîÅÁ±ªÂûã Êï∞ÊçÆ‰øÆÊîπÊàêÂäüÔºå‰∏î‰∏çÂΩ±ÂìçÂÖ∂ÂÆÉÊï∞ÊçÆ„ÄÇ 2„ÄÅÂêåÊó∂‰øÆÊîπÂêå‰∏ÄÊù°Êï∞ÊçÆÔºåÂ∞Üuser_id‰∏∫1ÁöÑÁî®Êà∑ÂêçÂ≠ó‰øÆÊîπ‰∏∫peachÔºåÂè¶‰∏ÄÊù°sqlÂ∞ÜÂêçÂ≠ó‰øÆÊîπ‰∏∫peach_ sqlËØ≠Âè•Ôºö 12update test_transaction set name='peach' where user_id=1;update test_transaction set name='peach_' where user_id=1; sqlÊâßË°åÈ°∫Â∫è‰∏∫peachÔºåÂÖ∂Ê¨°‰∏∫peach_ Ê≠§Êó∂Êü•ÁúãË°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ ÈÄöËøáËé∑ÂèñÂà∞ÈîÅÂàÜÊûêÔºåÂú®ÂêåÊó∂‰øÆÊîπÂêå‰∏ÄÊù°Êï∞ÊçÆÊó∂Ôºå‰ºòÂÖàÊâßË°åÁöÑsqlËé∑ÂèñÂà∞‰∫ÜSHARED_WRITEÔºåËÄåÂêéÊâßË°åÁöÑsqlËé∑ÂèñÈîÅÁöÑÁä∂ÊÄÅ‰∏∫WAITINGÁä∂ÊÄÅÔºåË°®Á§∫ËøòÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÁ≠âÂæÖÁ¨¨‰∏ÄÊù°sqlÊâßË°åÁªìÊùüÂêéÊñπÂèØËé∑ÂèñÂà∞ÈîÅÂØπÊï∞ÊçÆËøõË°åÊìç‰Ωú„ÄÇ ÈÄöËøá‰∏ä‰∏çÊâßË°åÊìç‰ΩúÂàÜÊûêÔºåÊï∞ÊçÆuser_id‰∏∫1ÁöÑÁî®Êà∑ÂêçÂ≠óÂ∫îË¢´‰øÆÊîπ‰∏∫peach_ 3„ÄÅÂêåÊó∂‰øÆÊîπ‰∏çÂêåÊï∞ÊçÆÔºå‰øÆÊîπid‰∏∫2ÁöÑname‰∏∫peachtestÔºå‰øÆÊîπid‰∏∫3ÁöÑname‰∏∫peach_test sqlËØ≠Âè•Ôºö 12update test_transaction set name='peachtest' where user_id=2; update test_transaction set name='peach_test' where user_id=3; sqlÊâßË°åÈ°∫Â∫è‰∏∫peachtestÔºåÂÖ∂Ê¨°‰∏∫peach_test Ê≠§Êó∂Êü•ÁúãË°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ ÈÄöËøásqlÊìç‰ΩúËé∑ÂèñÈîÅÂàÜÊûêÔºåÂú®ÂêåÊó∂‰øÆÊîπ‰∏çÂêåÊï∞ÊçÆÊó∂Ôºå‰ºòÂÖàÊâßË°åÁöÑsqlËé∑ÂèñÂà∞‰∫ÜSHARED_WRITEÔºåËÄåÂêéÊâßË°åÁöÑsqlËé∑ÂèñÈîÅÁöÑÁä∂ÊÄÅ‰∏∫WAITINGÁä∂ÊÄÅÔºåË°®Á§∫ËøòÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÁ≠âÂæÖÁ¨¨‰∏ÄÊù°sqlÊâßË°åÁªìÊùüÂêéÊñπÂèØËé∑ÂèñÂà∞ÈîÅÂØπÊï∞ÊçÆËøõË°åÊìç‰Ωú„ÄÇ 4„ÄÅÊâßË°åselectÊìç‰ΩúÁöÑÂêåÊó∂ÊâßË°åinsertÊìç‰Ωú sqlËØ≠Âè•Ôºö 12select count(*) from test_transaction; insert into test_transaction values(3,'peach3'); Ê≠•È™§Ôºö ÂÖàÊâßË°åselectÊìç‰ΩúÔºåÂÜçÊâßË°åinsertÊìç‰ΩúÔºåÊâßË°åÂÆåÊàêÂêéÊü•ÁúãË°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ Áî±‰∫éselectÂíåinsertÊìç‰ΩúÂùáËé∑ÂèñÁöÑÊòØSHARED_READÈîÅÔºåËØªÈîÅ‰∏∫Âπ∂Ë°åÔºåÊâÄ‰ª•selectÊü•ËØ¢ÂíåinsertÂêåÊó∂ÊâßË°åÔºå‰∫í‰∏çÂΩ±Âìç„ÄÇ 5„ÄÅupdateÂêå‰∏ÄÊù°Êï∞ÊçÆÁöÑÂêåÊó∂selectËØ•Êù°Êï∞ÊçÆ sqlËØ≠Âè•Ôºö 12update test_transaction set name='peach_update' where user_id=1; select * from test_transaction where user_id=1; Ê≠•È™§Ôºö ÂÖàÊâßË°åupdateÊìç‰ΩúÔºåÂÜçÊâßË°åselectÊìç‰ΩúÔºåËé∑ÂèñÊ≠§Êó∂Ë°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ ÈÄöËøáËé∑ÂèñÈîÅÁöÑÊÉÖÂÜµÂàÜÊûêÔºå Âú®updateÊìç‰ΩúÊó∂ÔºåËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÊâßË°åselectÊìç‰ΩúÊó∂Ëé∑ÂèñÂà∞SHARED_READÈîÅÔºåÂú®ËøõË°å‰øÆÊîπÊï∞ÊçÆÊó∂Êú™ÈòªÂ°ûselectÊü•ËØ¢Êìç‰ΩúÔºåupdateÊú™ÊâßË°åÂÆåÊàêÊó∂ÔºåselectÊü•ËØ¢Âà∞ÁöÑÊï∞ÊçÆ‰∏∫Êú™‰øÆÊîπÁöÑÊï∞ÊçÆ„ÄÇ 6„ÄÅÊâßË°ådeleteÊìç‰ΩúÔºåÂ∞Üuser_id‰∏∫3ÁöÑÊï∞ÊçÆÂà†Èô§ sqlËØ≠Âè•Ôºö 1delete from test_transaction where user_id=3; Ê≠•È™§Ôºö ÊâßË°ådeleteÊìç‰ΩúÔºåËé∑ÂèñÊ≠§Êó∂Ë°®Ëé∑ÂèñÂà∞ÁöÑÈîÅ Âà†Èô§Êìç‰ΩúËé∑ÂèñÂà∞ÁöÑÊòØSHARED_WRITEÈîÅ ÊâßË°åÊàêÂäüÂêéÊï∞ÊçÆ 7„ÄÅÂêåÊó∂deleteÂêå‰∏ÄÊù°Êï∞ÊçÆ sqlËØ≠Âè•Ôºö 12delete from test_transaction where user_id=3;delete from test_transaction where user_id=3; Ê≠•È™§Ôºö ÊåâÈ°∫Â∫èÊâßË°å‰∏§Êù°deleteÊìç‰ΩúÔºåÊü•ÁúãÊ≠§Êó∂Ë°®Ëé∑ÂèñÂà∞ÁöÑÈîÅÔºö ÈÄöËøáÊü•ÁúãdeleteÊìç‰ΩúËé∑ÂèñÂà∞ÁöÑÈîÅÔºå‰ºòÂÖàÊâßË°åÁöÑÊìç‰ΩúËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂêéÊâßË°åÁöÑdeleteÊìç‰ΩúÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂ§Ñ‰∫éWAITINGÁä∂ÊÄÅ„ÄÇ ÊâßË°åÂà†Èô§ÂêéÁªìÊûú 8„ÄÅÂêåÊó∂delete‰∏§Êù°‰∏çÂêåÁöÑÊï∞ÊçÆ sqlËØ≠Âè•Ôºö 12delete from test_transaction where user_id=1; delete from test_transaction where user_id=5; Ê≠•È™§Ôºö ÊåâÈ°∫Â∫èÊâßË°å‰∏§Êù°deleteÊìç‰ΩúÔºåÊü•ÁúãÊ≠§Êó∂Ë°®Ëé∑ÂèñÂà∞ÁöÑÈîÅÔºö ÈÄöËøáÊü•ÁúãdeleteÊìç‰ΩúËé∑ÂèñÂà∞ÁöÑÈîÅÔºå‰ºòÂÖàÊâßË°åÁöÑÊìç‰ΩúËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂêéÊâßË°åÁöÑdeleteÊìç‰ΩúÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂ§Ñ‰∫éWAITINGÁä∂ÊÄÅ„ÄÇ ÊâßË°åÂà†Èô§ÂêéÁªìÊûú 9„ÄÅÊâßË°ådeleteÁöÑÂêåÊó∂ÂØπÂà†Èô§ÁöÑÊï∞ÊçÆËøõË°åupdateÊìç‰Ωú sqlËØ≠Âè•Ôºö 12delete from test_transaction where user_id=3; update test_transaction set name='test' where user_id=3; Ê≠•È™§Ôºö ÊåâÈ°∫Â∫èÊâßË°å‰∏§Êù°sqlÔºåÊü•ÁúãÊ≠§Êó∂Ëé∑ÂèñÂà∞Ë°®ÁöÑÈîÅÔºö ÈÄöËøáÊü•ÁúãdeleteÂíåupdateÊìç‰ΩúËé∑ÂèñÂà∞ÁöÑÈîÅÔºå‰ºòÂÖàÊâßË°åÁöÑÊìç‰ΩúËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂêéÊâßË°åÁöÑÊìç‰ΩúÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂ§Ñ‰∫éWAITINGÁä∂ÊÄÅ„ÄÇ ÊâßË°ådeleteÂíåupdateÂêéÁªìÊûú Ê≥®ÊÑèÔºöÊ≠§Â§ÑÂú®delete‰ºòÂÖà‰∫éupdateÊâßË°åÔºå‰ΩÜÊâßË°åÁªìÊûú‰∏∫updateÁöÑÁªìÊûúÔºåÊâßË°åÂºÇÂ∏∏„ÄÇ 10„ÄÅÊâßË°ådeleteÁöÑÂêåÊó∂ÂØπ‰∏çÂêåÁöÑÊï∞ÊçÆËøõË°åupdateÊìç‰Ωú sqlËØ≠Âè•Ôºö 12delete from test_transaction where user_id=2; update test_transaction set name='test' where user_id=4; Ê≠•È™§Ôºö ÊåâÈ°∫Â∫èÊâßË°å‰∏äÈù¢‰∏§Êù°sqlÔºåÊü•ÁúãË°®ÈîÅËé∑ÂèñÊÉÖÂÜµ ÈÄöËøáÊü•ÁúãdeleteÂíåupdateÊìç‰ΩúËé∑ÂèñÂà∞ÁöÑÈîÅÔºå‰ºòÂÖàÊâßË°åÁöÑÊìç‰ΩúËé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂêéÊâßË°åÁöÑÊìç‰ΩúÊú™Ëé∑ÂèñÂà∞SHARED_WRITEÈîÅÔºåÂ§Ñ‰∫éWAITINGÁä∂ÊÄÅ„ÄÇ ÊâßË°ådeleteÂíåupdateÂêéÁªìÊûú,ÊâßË°åÁªìÊûúÊ≠£Â∏∏ 11„ÄÅÊâßË°ådeleteÁöÑÂêåÊó∂ÊâßË°åselectÊìç‰Ωú sqlËØ≠Âè•Ôºö 12delete from test_transaction where user_id=4; select count(*) from test_transaction; Ê≠•È™§Ôºö ÊåâÈ°∫Â∫èÊâßË°å‰∏äÈù¢‰∏§Êù°sqlÔºåÊü•ÁúãË°®ÈîÅËé∑ÂèñÊÉÖÂÜµ Âú®Êìç‰ΩúdeleteÁöÑÂêåÊó∂ÊâßË°åselectÊìç‰ΩúÔºå‰∏§‰∏™Êìç‰ΩúÂùáÂêåÊó∂Ëé∑ÂèñÂà∞SHARED_REDÂíåSHARED_WRITEÈîÅÔºåÊìç‰ΩúÂπ∂Ë°åËøõË°åÊú™Âá∫Áé∞ÈòªÂ°û„ÄÇÊÄªÁªìÂØπÊØîHive‰∫ãÂä°‰ΩøÁî®Âª∫ËÆÆ ‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∏≠Êúâ‰∏âÁßçÊ®°ÂûãÈöêÂºè‰∫ãÂä°„ÄÅÊòæÁ§∫‰∫ãÂä°ÂíåËá™Âä®‰∫ãÂä°„ÄÇÂú®ÁõÆÂâçHiveÂØπ‰∫ãÂä°‰ªÖÊîØÊåÅËá™Âä®‰∫ãÂä°ÔºåÂõ†Ê≠§HiveÊó†Ê≥ïÈÄöËøáÊòæÁ§∫‰∫ãÂä°ÁöÑÊñπÂºèÂØπ‰∏Ä‰∏™Êìç‰ΩúÂ∫èÂàóËøõË°å‰∫ãÂä°ÊéßÂà∂„ÄÇ ‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∫ãÂä°Âú®ÈÅáÂà∞ÂºÇÂ∏∏ÊÉÖÂÜµÂèØËá™Âä®ËøõË°åÂõûÊªöÔºåÁõÆÂâçHiveÊó†Ê≥ïÊîØÊåÅROLLBACK„ÄÇ ‰º†ÁªüÊï∞ÊçÆÂ∫ì‰∏≠ÊîØÊåÅ‰∫ãÂä°Âπ∂ÂèëÔºåËÄåHiveÂØπ‰∫ãÂä°Êó†Ê≥ïÂÅöÂà∞ÂÆåÂÖ®Âπ∂ÂèëÊéßÂà∂,Â§ö‰∏™Êìç‰ΩúÂùáÈúÄË¶ÅËé∑ÂèñWRITEÁöÑÊó∂ÂÄôÂàôËøô‰∫õÊìç‰Ωú‰∏∫‰∏≤Ë°åÊ®°ÂºèÊâßË°åÔºàÂú®ÊµãËØïÁî®‰æã‰∏≠‚ÄùdeleteÂêå‰∏ÄÊù°Êï∞ÊçÆÁöÑÂêåÊó∂updateËØ•Êï∞ÊçÆ‚ÄùÔºåÊìç‰ΩúÊòØ‰∏≤Ë°åÁöÑ‰∏îÊìç‰ΩúÂÆåÊàêÂêéÊï∞ÊçÆÊú™Ë¢´Âà†Èô§‰∏îÊï∞ÊçÆË¢´‰øÆÊîπÔºâÊú™‰øùËØÅÊï∞ÊçÆ‰∏ÄËá¥ÊÄß„ÄÇ HiveÁöÑ‰∫ãÂä°ÂäüËÉΩÂ∞öÂ±û‰∫éÂÆûÈ™åÂÆ§ÂäüËÉΩÔºåÂπ∂‰∏çÂª∫ËÆÆÁî®Êà∑Áõ¥Êé•‰∏äÁîü‰∫ßÁ≥ªÁªüÔºåÂõ†‰∏∫ÁõÆÂâçÂÆÉËøòÊúâËØ∏Â§öÁöÑÈôêÂà∂ÔºåÂ¶ÇÂè™ÊîØÊåÅORCÊñá‰ª∂Ê†ºÂºèÔºåÂª∫Ë°®ÂøÖÈ°ªÂàÜÊ°∂Á≠âÔºå‰ΩøÁî®Ëµ∑Êù•Ê≤°ÊúâÈÇ£‰πàÊñπ‰æøÔºåÂè¶Â§ñËØ•ÂäüËÉΩÁöÑÁ®≥ÂÆöÊÄßËøòÊúâÂæÖËøõ‰∏ÄÊ≠•È™åËØÅ„ÄÇ CDHÈªòËÆ§ÂºÄÂêØ‰∫ÜHiveÁöÑConcurrencyÂäüËÉΩÔºå‰∏ªË¶ÅÊòØÂØπÂπ∂ÂèëËØªÂÜôÁöÑÁöÑÊó∂ÂÄôÈÄöËøáÈîÅËøõË°å‰∫ÜÊéßÂà∂„ÄÇÊâÄ‰ª•‰∏∫‰∫ÜÈò≤Ê≠¢Áî®Êà∑Âú®‰ΩøÁî®HiveÁöÑÊó∂ÂÄôÔºåÊä•ÈîôÊèêÁ§∫ËØ•Ë°®Â∑≤ÁªèË¢´lockÔºåÂØπ‰∫éÁî®Êà∑Êù•ËØ¥‰∏çÂèãÂ•ΩÔºåÂª∫ËÆÆÂú®‰∏öÂä°‰æßÊéßÂà∂‰∏Ä‰∏ãÂÜôÂÖ•ÂíåËØªÂèñÔºåÊØîÂ¶ÇÂÜôÂÖ•Âêå‰∏Ä‰∏™tableÊàñËÄÖpartitionÁöÑÊó∂ÂÄô‰øùËØÅÊòØÂçï‰ªªÂä°ÂÜôÂÖ•ÔºåÂÖ∂‰ªñÂÜôÂÖ•ÈúÄÊéßÂà∂ÂÜôÂÆåÁ¨¨‰∏Ä‰∏™‰ªªÂä°‰∫ÜÔºåÂêéÈù¢ÊâçÁªßÁª≠ÂÜôÔºåÂπ∂‰∏îÊéßÂà∂Âú®ÂÜôÁöÑÊó∂ÂÄô‰∏çËÆ©Áî®Êà∑ËøõË°åÊü•ËØ¢„ÄÇÂè¶Â§ñÈúÄË¶ÅÊéßÂà∂Âú®Êü•ËØ¢ÁöÑÊó∂ÂÄô‰∏çË¶ÅÂÖÅËÆ∏ÊúâÂÜôÂÖ•Êìç‰Ωú„ÄÇ Â¶ÇÊûúÂØπ‰∫éÊï∞ÊçÆ‰∏ÄËá¥ÊÄß‰∏çÂú®‰πéÔºåÂèØ‰ª•ÂÆåÂÖ®ÂÖ≥Èó≠HiveÁöÑConcurrencyÂäüËÉΩÂÖ≥Èó≠ÔºåÂç≥ËÆæÁΩÆhive.support.concurrency‰∏∫falseÔºåËøôÊ†∑HiveÁöÑÂπ∂ÂèëËØªÂÜôÂ∞ÜÊ≤°Êúâ‰ªª‰ΩïÈôêÂà∂„ÄÇ","raw":null,"content":null,"categories":[{"name":"hive","slug":"hive","permalink":"https://stanxia.github.io/categories/hive/"}],"tags":[{"name":"hive","slug":"hive","permalink":"https://stanxia.github.io/tags/hive/"},{"name":"acid","slug":"acid","permalink":"https://stanxia.github.io/tags/acid/"}]},{"title":"SparkSQL-Catalyst‰ºòÂåñÁêÜËß£","slug":"SparkSQL-Catalyst‰ºòÂåñÁêÜËß£","date":"2017-11-30T11:32:26.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/11/30/SparkSQL-Catalyst‰ºòÂåñÁêÜËß£/","link":"","permalink":"https://stanxia.github.io/2017/11/30/SparkSQL-Catalyst‰ºòÂåñÁêÜËß£/","excerpt":"ÂâçË®Ä\nÊú¨Êñá‰∏ªË¶Å‰ªãÁªçSparkSQLÁöÑ‰ºòÂåñÂô®Á≥ªÁªüCatalystÔºåÂÖ∂ËÆæËÆ°ÊÄùË∑ØÂü∫Êú¨ÈÉΩÊù•Ëá™‰∫é‰º†ÁªüÂûãÊï∞ÊçÆÂ∫ìÔºåËÄå‰∏îÂíåÂ§ßÂ§öÊï∞ÂΩìÂâçÁöÑÂ§ßÊï∞ÊçÆSQLÂ§ÑÁêÜÂºïÊìéËÆæËÆ°Âü∫Êú¨Áõ∏ÂêåÔºàImpala„ÄÅPresto„ÄÅHiveÔºàCalciteÔºâÁ≠âÔºâ„ÄÇ\nSQL‰ºòÂåñÂô®Ê†∏ÂøÉÊâßË°åÁ≠ñÁï•‰∏ªË¶ÅÂàÜ‰∏∫‰∏§‰∏™Â§ßÁöÑÊñπÂêëÔºö\n\nÂü∫‰∫éËßÑÂàô‰ºòÂåñÔºàRBOÔºâÔºöÊòØ‰∏ÄÁßçÁªèÈ™åÂºè„ÄÅÂêØÂèëÂºèÂú∞‰ºòÂåñÊÄùË∑ØÔºåÊõ¥Â§öÂú∞‰æùÈù†ÂâçËæàÊÄªÁªìÂá∫Êù•ÁöÑ‰ºòÂåñËßÑÂàôÔºåÁÆÄÂçïÊòìË°å‰∏îËÉΩÂ§üË¶ÜÁõñÂà∞Â§ßÈÉ®ÂàÜ‰ºòÂåñÈÄªËæëÔºå‰ΩÜÊòØÂØπ‰∫éÊ†∏ÂøÉ‰ºòÂåñÁÆóÂ≠êJoinÂç¥ÊòæÂæóÊúâÁÇπÂäõ‰∏ç‰ªéÂøÉ„ÄÇ\nÂü∫‰∫é‰ª£‰ª∑‰ºòÂåñ (CBO)ÔºöÊ†πÊçÆ‰ª£‰ª∑‰º∞ÁÆóÁ°ÆÂÆö‰∏ÄÁßç‰ª£‰ª∑ÊúÄÂ∞èÁöÑÊñπÊ°à„ÄÇ\n\n‰∏æ‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºå‰∏§‰∏™Ë°®ÊâßË°åJoinÂà∞Â∫ïÂ∫îËØ•‰ΩøÁî®BroadcastHashJoinËøòÊòØSortMergeJoinÔºüÂΩìÂâçSparkSQLÁöÑÊñπÂºèÊòØÈÄöËøáÊâãÂ∑•ËÆæÂÆöÂèÇÊï∞Êù•Á°ÆÂÆöÔºåÂ¶ÇÊûú‰∏Ä‰∏™Ë°®ÁöÑÊï∞ÊçÆÈáèÂ∞è‰∫éËøô‰∏™ÂÄºÂ∞±‰ΩøÁî®BroadcastHashJoinÔºå‰ΩÜÊòØËøôÁßçÊñπÊ°àÊòæÂæóÂæà‰∏ç‰ºòÈõÖÔºåÂæà‰∏çÁÅµÊ¥ª„ÄÇÂü∫‰∫é‰ª£‰ª∑‰ºòÂåñÂ∞±ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ËøôÁ±ªÈóÆÈ¢òÔºåÂÆÉ‰ºöÈíàÂØπÊØè‰∏™JoinËØÑ‰º∞ÂΩìÂâç‰∏§Âº†Ë°®‰ΩøÁî®ÊØèÁßçJoinÁ≠ñÁï•ÁöÑ‰ª£‰ª∑ÔºåÊ†πÊçÆ‰ª£‰ª∑‰º∞ÁÆóÁ°ÆÂÆö‰∏ÄÁßç‰ª£‰ª∑ÊúÄÂ∞èÁöÑÊñπÊ°à„ÄÇ","text":"ÂâçË®Ä Êú¨Êñá‰∏ªË¶Å‰ªãÁªçSparkSQLÁöÑ‰ºòÂåñÂô®Á≥ªÁªüCatalystÔºåÂÖ∂ËÆæËÆ°ÊÄùË∑ØÂü∫Êú¨ÈÉΩÊù•Ëá™‰∫é‰º†ÁªüÂûãÊï∞ÊçÆÂ∫ìÔºåËÄå‰∏îÂíåÂ§ßÂ§öÊï∞ÂΩìÂâçÁöÑÂ§ßÊï∞ÊçÆSQLÂ§ÑÁêÜÂºïÊìéËÆæËÆ°Âü∫Êú¨Áõ∏ÂêåÔºàImpala„ÄÅPresto„ÄÅHiveÔºàCalciteÔºâÁ≠âÔºâ„ÄÇ SQL‰ºòÂåñÂô®Ê†∏ÂøÉÊâßË°åÁ≠ñÁï•‰∏ªË¶ÅÂàÜ‰∏∫‰∏§‰∏™Â§ßÁöÑÊñπÂêëÔºö Âü∫‰∫éËßÑÂàô‰ºòÂåñÔºàRBOÔºâÔºöÊòØ‰∏ÄÁßçÁªèÈ™åÂºè„ÄÅÂêØÂèëÂºèÂú∞‰ºòÂåñÊÄùË∑ØÔºåÊõ¥Â§öÂú∞‰æùÈù†ÂâçËæàÊÄªÁªìÂá∫Êù•ÁöÑ‰ºòÂåñËßÑÂàôÔºåÁÆÄÂçïÊòìË°å‰∏îËÉΩÂ§üË¶ÜÁõñÂà∞Â§ßÈÉ®ÂàÜ‰ºòÂåñÈÄªËæëÔºå‰ΩÜÊòØÂØπ‰∫éÊ†∏ÂøÉ‰ºòÂåñÁÆóÂ≠êJoinÂç¥ÊòæÂæóÊúâÁÇπÂäõ‰∏ç‰ªéÂøÉ„ÄÇ Âü∫‰∫é‰ª£‰ª∑‰ºòÂåñ (CBO)ÔºöÊ†πÊçÆ‰ª£‰ª∑‰º∞ÁÆóÁ°ÆÂÆö‰∏ÄÁßç‰ª£‰ª∑ÊúÄÂ∞èÁöÑÊñπÊ°à„ÄÇ ‰∏æ‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºå‰∏§‰∏™Ë°®ÊâßË°åJoinÂà∞Â∫ïÂ∫îËØ•‰ΩøÁî®BroadcastHashJoinËøòÊòØSortMergeJoinÔºüÂΩìÂâçSparkSQLÁöÑÊñπÂºèÊòØÈÄöËøáÊâãÂ∑•ËÆæÂÆöÂèÇÊï∞Êù•Á°ÆÂÆöÔºåÂ¶ÇÊûú‰∏Ä‰∏™Ë°®ÁöÑÊï∞ÊçÆÈáèÂ∞è‰∫éËøô‰∏™ÂÄºÂ∞±‰ΩøÁî®BroadcastHashJoinÔºå‰ΩÜÊòØËøôÁßçÊñπÊ°àÊòæÂæóÂæà‰∏ç‰ºòÈõÖÔºåÂæà‰∏çÁÅµÊ¥ª„ÄÇÂü∫‰∫é‰ª£‰ª∑‰ºòÂåñÂ∞±ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ËøôÁ±ªÈóÆÈ¢òÔºåÂÆÉ‰ºöÈíàÂØπÊØè‰∏™JoinËØÑ‰º∞ÂΩìÂâç‰∏§Âº†Ë°®‰ΩøÁî®ÊØèÁßçJoinÁ≠ñÁï•ÁöÑ‰ª£‰ª∑ÔºåÊ†πÊçÆ‰ª£‰ª∑‰º∞ÁÆóÁ°ÆÂÆö‰∏ÄÁßç‰ª£‰ª∑ÊúÄÂ∞èÁöÑÊñπÊ°à„ÄÇ Tree&amp;RuleÂú®‰ªãÁªçSQL‰ºòÂåñÂô®Â∑•‰ΩúÂéüÁêÜ‰πãÂâçÔºåÊúâÂøÖË¶ÅÈ¶ñÂÖà‰ªãÁªç‰∏§‰∏™ÈáçË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑÔºöTreeÂíåRule„ÄÇSQLËØ≠Ê≥ïÊ†ëÂ∞±ÊòØSQLËØ≠Âè•ÈÄöËøáÁºñËØëÂô®‰πãÂêé‰ºöË¢´Ëß£ÊûêÊàê‰∏ÄÊ£µÊ†ëÁä∂ÁªìÊûÑ„ÄÇËøôÊ£µÊ†ë‰ºöÂåÖÂê´ÂæàÂ§öËäÇÁÇπÂØπË±°ÔºåÊØè‰∏™ËäÇÁÇπÈÉΩÊã•ÊúâÁâπÂÆöÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåÂêåÊó∂‰ºöÊúâ0‰∏™ÊàñÂ§ö‰∏™Â≠©Â≠êËäÇÁÇπÔºàËäÇÁÇπÂØπË±°Âú®‰ª£Á†Å‰∏≠ÂÆö‰πâ‰∏∫TreeNodeÂØπË±°ÔºâÔºå‰∏ãÂõæÊòØ‰∏™ÁÆÄÂçïÁöÑÁ§∫‰æãÔºöÂ¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÁÆ≠Â§¥Â∑¶ËæπË°®ËææÂºèÊúâ3ÁßçÊï∞ÊçÆÁ±ªÂûãÔºàLiteralË°®Á§∫Â∏∏Èáè„ÄÅAttributeË°®Á§∫ÂèòÈáè„ÄÅAddË°®Á§∫Âä®‰ΩúÔºâÔºåË°®Á§∫x+(1+2)„ÄÇÊò†Â∞ÑÂà∞Âè≥ËæπÊ†ëÁä∂ÁªìÊûÑÂêéÔºåÊØè‰∏ÄÁßçÊï∞ÊçÆÁ±ªÂûãÂ∞±‰ºöÂèòÊàê‰∏Ä‰∏™ËäÇÁÇπ„ÄÇÂè¶Â§ñÔºåTreeËøòÊúâ‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÁâπÊÄßÔºåÂèØ‰ª•ÈÄöËøá‰∏ÄÂÆöÁöÑËßÑÂàôËøõË°åÁ≠â‰ª∑ÂèòÊç¢ÔºåÂ¶Ç‰∏ãÂõæÔºö ‰∏äÂõæÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Á≠â‰ª∑ÂèòÊç¢ËßÑÂàô(Rule)Ôºö‰∏§‰∏™IntegerÁ±ªÂûãÁöÑÂ∏∏ÈáèÁõ∏Âä†ÂèØ‰ª•Á≠â‰ª∑ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™IntegerÂ∏∏ÈáèÔºåËøô‰∏™ËßÑÂàôÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÂØπ‰∫é‰∏äÊñá‰∏≠ÊèêÂà∞ÁöÑË°®ËææÂºèx+(1+2)Êù•ËØ¥Â∞±ÂèØ‰ª•ËΩ¨Âèò‰∏∫x+3„ÄÇÂØπ‰∫éÁ®ãÂ∫èÊù•ËÆ≤ÔºåÂ¶Ç‰ΩïÊâæÂà∞‰∏§‰∏™IntegerÂ∏∏ÈáèÂë¢ÔºüÂÖ∂ÂÆûÂ∞±ÊòØÁÆÄÂçïÁöÑ‰∫åÂèâÊ†ëÈÅçÂéÜÁÆóÊ≥ïÔºåÊØèÈÅçÂéÜÂà∞‰∏Ä‰∏™ËäÇÁÇπÔºåÂ∞±Ê®°ÂºèÂåπÈÖçÂΩìÂâçËäÇÁÇπ‰∏∫Add„ÄÅÂ∑¶Âè≥Â≠êËäÇÁÇπÊòØIntegerÂ∏∏ÈáèÁöÑÁªìÊûÑÔºåÂÆö‰ΩçÂà∞‰πãÂêéÂ∞ÜÊ≠§‰∏â‰∏™ËäÇÁÇπÊõøÊç¢‰∏∫‰∏Ä‰∏™LiteralÁ±ªÂûãÁöÑËäÇÁÇπ„ÄÇ ‰∏äÈù¢Áî®‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÁ§∫‰æãÊù•ËØ¥ÊòéÁ≠â‰ª∑ÂèòÊç¢ËßÑÂàô‰ª•ÂèäÂ¶Ç‰ΩïÂ∞ÜËßÑÂàôÂ∫îÁî®‰∫éËØ≠Ê≥ïÊ†ë„ÄÇÂú®‰ªª‰Ωï‰∏Ä‰∏™SQL‰ºòÂåñÂô®‰∏≠ÔºåÈÄöÂ∏∏‰ºöÂÆö‰πâÂ§ßÈáèÁöÑRuleÔºàÂêéÈù¢‰ºöËÆ≤Âà∞ÔºâÔºåSQL‰ºòÂåñÂô®‰ºöÈÅçÂéÜËØ≠Ê≥ïÊ†ë‰∏≠ÊØè‰∏™ËäÇÁÇπÔºåÈíàÂØπÈÅçÂéÜÂà∞ÁöÑËäÇÁÇπÊ®°ÂºèÂåπÈÖçÊâÄÊúâÁªôÂÆöËßÑÂàôÔºàRuleÔºâÔºåÂ¶ÇÊûúÊúâÂåπÈÖçÊàêÂäüÁöÑÔºåÂ∞±ËøõË°åÁõ∏Â∫îËΩ¨Êç¢ÔºåÂ¶ÇÊûúÊâÄÊúâËßÑÂàôÈÉΩÂåπÈÖçÂ§±Ë¥•ÔºåÂ∞±ÁªßÁª≠ÈÅçÂéÜ‰∏ã‰∏Ä‰∏™ËäÇÁÇπ„ÄÇCatalystÂ∑•‰ΩúÊµÅÁ®ã‰ªª‰Ωï‰∏Ä‰∏™‰ºòÂåñÂô®Â∑•‰ΩúÂéüÁêÜÈÉΩÂ§ßÂêåÂ∞èÂºÇÔºöSQLËØ≠Âè•È¶ñÂÖàÈÄöËøáParserÊ®°ÂùóË¢´Ëß£Êûê‰∏∫ËØ≠Ê≥ïÊ†ëÔºåÊ≠§Ê£µÊ†ëÁß∞‰∏∫Unresolved Logical PlanÔºõUnresolved Logical PlanÈÄöËøáAnalyzerÊ®°ÂùóÂÄüÂä©‰∫éÊï∞ÊçÆÂÖÉÊï∞ÊçÆËß£Êûê‰∏∫Logical PlanÔºõÊ≠§Êó∂ÂÜçÈÄöËøáÂêÑÁßçÂü∫‰∫éËßÑÂàôÁöÑ‰ºòÂåñÁ≠ñÁï•ËøõË°åÊ∑±ÂÖ•‰ºòÂåñÔºåÂæóÂà∞Optimized Logical PlanÔºõ‰ºòÂåñÂêéÁöÑÈÄªËæëÊâßË°åËÆ°Âàí‰æùÁÑ∂ÊòØÈÄªËæëÁöÑÔºåÂπ∂‰∏çËÉΩË¢´SparkÁ≥ªÁªüÁêÜËß£ÔºåÊ≠§Êó∂ÈúÄË¶ÅÂ∞ÜÊ≠§ÈÄªËæëÊâßË°åËÆ°ÂàíËΩ¨Êç¢‰∏∫Physical PlanÔºõ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÂØπÊï¥‰∏™ËøáÁ®ãËøõË°åÁêÜËß£Ôºå‰∏ãÊñáÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁ§∫‰æãËøõË°åËß£Èáä„ÄÇ ParserParserÁÆÄÂçïÊù•ËØ¥ÊòØÂ∞ÜSQLÂ≠óÁ¨¶‰∏≤ÂàáÂàÜÊàê‰∏Ä‰∏™‰∏Ä‰∏™TokenÔºåÂÜçÊ†πÊçÆ‰∏ÄÂÆöËØ≠‰πâËßÑÂàôËß£Êûê‰∏∫‰∏ÄÊ£µËØ≠Ê≥ïÊ†ë„ÄÇParserÊ®°ÂùóÁõÆÂâçÂü∫Êú¨ÈÉΩ‰ΩøÁî®Á¨¨‰∏âÊñπÁ±ªÂ∫ìANTLRËøõË°åÂÆûÁé∞ÔºåÊØîÂ¶ÇHive„ÄÅ Presto„ÄÅSparkSQLÁ≠â„ÄÇ‰∏ãÂõæÊòØ‰∏Ä‰∏™Á§∫‰æãÊÄßÁöÑSQLËØ≠Âè•ÔºàÊúâ‰∏§Âº†Ë°®ÔºåÂÖ∂‰∏≠peopleË°®‰∏ªË¶ÅÂ≠òÂÇ®Áî®Êà∑Âü∫Êú¨‰ø°ÊÅØÔºåscoreË°®Â≠òÂÇ®Áî®Êà∑ÁöÑÂêÑÁßçÊàêÁª©ÔºâÔºåÈÄöËøáParserËß£ÊûêÂêéÁöÑASTËØ≠Ê≥ïÊ†ëÂ¶ÇÂõæÊâÄÁ§∫Ôºö AnalyzerÈÄöËøáËß£ÊûêÂêéÁöÑÈÄªËæëÊâßË°åËÆ°ÂàíÂü∫Êú¨Êúâ‰∫ÜÈ™®Êû∂Ôºå‰ΩÜÊòØÁ≥ªÁªüÂπ∂‰∏çÁü•ÈÅìscore„ÄÅsumËøô‰∫õÈÉΩÊòØ‰∫õ‰ªÄ‰πàÈ¨ºÔºåÊ≠§Êó∂ÈúÄË¶ÅÂü∫Êú¨ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÊù•Ë°®ËææËøô‰∫õËØçÁ¥†ÔºåÊúÄÈáçË¶ÅÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØ‰∏ªË¶ÅÂåÖÊã¨‰∏§ÈÉ®ÂàÜÔºöË°®ÁöÑSchemeÂíåÂü∫Êú¨ÂáΩÊï∞‰ø°ÊÅØÔºåË°®ÁöÑscheme‰∏ªË¶ÅÂåÖÊã¨Ë°®ÁöÑÂü∫Êú¨ÂÆö‰πâÔºàÂàóÂêç„ÄÅÊï∞ÊçÆÁ±ªÂûãÔºâ„ÄÅË°®ÁöÑÊï∞ÊçÆÊ†ºÂºèÔºàJson„ÄÅTextÔºâ„ÄÅË°®ÁöÑÁâ©ÁêÜ‰ΩçÁΩÆÁ≠âÔºåÂü∫Êú¨ÂáΩÊï∞‰ø°ÊÅØ‰∏ªË¶ÅÊåáÁ±ª‰ø°ÊÅØ„ÄÇ Analyzer‰ºöÂÜçÊ¨°ÈÅçÂéÜÊï¥‰∏™ËØ≠Ê≥ïÊ†ëÔºåÂØπÊ†ë‰∏äÁöÑÊØè‰∏™ËäÇÁÇπËøõË°åÊï∞ÊçÆÁ±ªÂûãÁªëÂÆö‰ª•ÂèäÂáΩÊï∞ÁªëÂÆöÔºåÊØîÂ¶ÇpeopleËØçÁ¥†‰ºöÊ†πÊçÆÂÖÉÊï∞ÊçÆË°®‰ø°ÊÅØËß£Êûê‰∏∫ÂåÖÂê´age„ÄÅid‰ª•Âèäname‰∏âÂàóÁöÑË°®Ôºåpeople.age‰ºöË¢´Ëß£Êûê‰∏∫Êï∞ÊçÆÁ±ªÂûã‰∏∫intÁöÑÂèòÈáèÔºåsum‰ºöË¢´Ëß£Êûê‰∏∫ÁâπÂÆöÁöÑËÅöÂêàÂáΩÊï∞ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö SparkSQL‰∏≠AnalyzerÂÆö‰πâ‰∫ÜÂêÑÁßçËß£ÊûêËßÑÂàôÔºåÂèØ‰ª•Êü•ÁúãAnalyzerÁ±ªÔºåÂÖ∂‰∏≠ÂÆö‰πâ‰∫ÜÂü∫Êú¨ÁöÑËß£ÊûêËßÑÂàôÔºåÂ¶Ç‰∏ãÔºö Optimizer‰ºòÂåñÂô®ÊòØÊï¥‰∏™CatalystÁöÑÊ†∏ÂøÉÔºå‰∏äÊñáÊèêÂà∞‰ºòÂåñÂô®ÂàÜ‰∏∫Âü∫‰∫éËßÑÂàô‰ºòÂåñÂíåÂü∫‰∫é‰ª£‰ª∑‰ºòÂåñ‰∏§ÁßçÔºåÂΩìÂâçSparkSQL 2.1‰æùÁÑ∂Ê≤°ÊúâÂæàÂ•ΩÁöÑÊîØÊåÅÂü∫‰∫é‰ª£‰ª∑‰ºòÂåñÔºåÊ≠§Â§ÑÂè™‰ªãÁªçÂü∫‰∫éËßÑÂàôÁöÑ‰ºòÂåñÁ≠ñÁï•ÔºåÂü∫‰∫éËßÑÂàôÁöÑ‰ºòÂåñÁ≠ñÁï•ÂÆûÈôÖ‰∏äÂ∞±ÊòØÂØπËØ≠Ê≥ïÊ†ëËøõË°å‰∏ÄÊ¨°ÈÅçÂéÜÔºåÊ®°ÂºèÂåπÈÖçËÉΩÂ§üÊª°Ë∂≥ÁâπÂÆöËßÑÂàôÁöÑËäÇÁÇπÔºåÂÜçËøõË°åÁõ∏Â∫îÁöÑÁ≠â‰ª∑ËΩ¨Êç¢„ÄÇÂõ†Ê≠§ÔºåÂü∫‰∫éËßÑÂàô‰ºòÂåñËØ¥Âà∞Â∫ïÂ∞±ÊòØ‰∏ÄÊ£µÊ†ëÁ≠â‰ª∑Âú∞ËΩ¨Êç¢‰∏∫Âè¶‰∏ÄÊ£µÊ†ë„ÄÇSQL‰∏≠ÁªèÂÖ∏ÁöÑ‰ºòÂåñËßÑÂàôÊúâÂæàÂ§öÔºå‰∏ãÊñáÁªìÂêàÁ§∫‰æã‰ªãÁªç‰∏âÁßçÊØîËæÉÂ∏∏ËßÅÁöÑËßÑÂàôÔºö Ë∞ìËØç‰∏ãÊé®ÔºàPredicate PushdownÔºâ Â∏∏ÈáèÁ¥ØÂä†ÔºàConstant FoldingÔºâ ÂàóÂÄºË£ÅÂâ™ÔºàColumn PruningÔºâ ‰∏äÂõæÂ∑¶ËæπÊòØÁªèËøáAnalyzerËß£ÊûêÂêéÁöÑËØ≠Ê≥ïÊ†ëÔºåËØ≠Ê≥ïÊ†ë‰∏≠‰∏§‰∏™Ë°®ÂÖàÂÅöjoinÔºå‰πãÂêéÂÜç‰ΩøÁî®age&gt;10ÂØπÁªìÊûúËøõË°åËøáÊª§„ÄÇÂ§ßÂÆ∂Áü•ÈÅìjoinÁÆóÂ≠êÈÄöÂ∏∏ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ËÄóÊó∂ÁöÑÁÆóÂ≠êÔºåËÄóÊó∂Â§öÂ∞ë‰∏ÄËà¨ÂèñÂÜ≥‰∫éÂèÇ‰∏éjoinÁöÑ‰∏§‰∏™Ë°®ÁöÑÂ§ßÂ∞èÔºåÂ¶ÇÊûúËÉΩÂ§üÂáèÂ∞ëÂèÇ‰∏éjoin‰∏§Ë°®ÁöÑÂ§ßÂ∞èÔºåÂ∞±ÂèØ‰ª•Â§ßÂ§ßÈôç‰ΩéjoinÁÆóÂ≠êÊâÄÈúÄÊó∂Èó¥„ÄÇË∞ìËØç‰∏ãÊé®Â∞±ÊòØËøôÊ†∑‰∏ÄÁßçÂäüËÉΩÔºåÂÆÉ‰ºöÂ∞ÜËøáÊª§Êìç‰Ωú‰∏ãÊé®Âà∞join‰πãÂâçËøõË°åÔºå‰∏äÂõæ‰∏≠ËøáÊª§Êù°‰ª∂age&gt;0‰ª•Âèäid!=null‰∏§‰∏™Êù°‰ª∂Â∞±ÂàÜÂà´‰∏ãÊé®Âà∞‰∫Üjoin‰πãÂâç„ÄÇËøôÊ†∑ÔºåÁ≥ªÁªüÂú®Êâ´ÊèèÊï∞ÊçÆÁöÑÊó∂ÂÄôÂ∞±ÂØπÊï∞ÊçÆËøõË°å‰∫ÜËøáÊª§ÔºåÂèÇ‰∏éjoinÁöÑÊï∞ÊçÆÈáèÂ∞Ü‰ºöÂæóÂà∞ÊòæËëóÁöÑÂáèÂ∞ëÔºåjoinËÄóÊó∂ÂøÖÁÑ∂‰πü‰ºöÈôç‰Ωé„ÄÇ Â∏∏ÈáèÁ¥ØÂä†ÂÖ∂ÂÆûÂæàÁÆÄÂçïÔºåÂ∞±ÊòØ‰∏äÊñá‰∏≠ÊèêÂà∞ÁöÑËßÑÂàô x+(1+2) -&gt; x+3ÔºåËôΩÁÑ∂ÊòØ‰∏Ä‰∏™ÂæàÂ∞èÁöÑÊîπÂä®Ôºå‰ΩÜÊòØÊÑè‰πâÂ∑®Â§ß„ÄÇÁ§∫‰æãÂ¶ÇÊûúÊ≤°ÊúâËøõË°å‰ºòÂåñÁöÑËØùÔºåÊØè‰∏ÄÊù°ÁªìÊûúÈÉΩÈúÄË¶ÅÊâßË°å‰∏ÄÊ¨°100+80ÁöÑÊìç‰ΩúÔºåÁÑ∂ÂêéÂÜç‰∏éÂèòÈáèmath_score‰ª•Âèäenglish_scoreÁõ∏Âä†ÔºåËÄå‰ºòÂåñÂêéÂ∞±‰∏çÈúÄË¶ÅÂÜçÊâßË°å100+80Êìç‰Ωú„ÄÇ ÂàóÂÄºË£ÅÂâ™ÊòØÂè¶‰∏Ä‰∏™ÁªèÂÖ∏ÁöÑËßÑÂàôÔºåÁ§∫‰æã‰∏≠ÂØπ‰∫épeopleË°®Êù•ËØ¥ÔºåÂπ∂‰∏çÈúÄË¶ÅÊâ´ÊèèÂÆÉÁöÑÊâÄÊúâÂàóÂÄºÔºåËÄåÂè™ÈúÄË¶ÅÂàóÂÄºidÔºåÊâÄ‰ª•Âú®Êâ´Êèèpeople‰πãÂêéÈúÄË¶ÅÂ∞ÜÂÖ∂‰ªñÂàóËøõË°åË£ÅÂâ™ÔºåÂè™Áïô‰∏ãÂàóid„ÄÇËøô‰∏™‰ºòÂåñ‰∏ÄÊñπÈù¢Â§ßÂπÖÂ∫¶ÂáèÂ∞ë‰∫ÜÁΩëÁªú„ÄÅÂÜÖÂ≠òÊï∞ÊçÆÈáèÊ∂àËÄóÔºåÂè¶‰∏ÄÊñπÈù¢ÂØπ‰∫éÂàóÂ≠òÊï∞ÊçÆÂ∫ìÔºàParquetÔºâÊù•ËØ¥Â§ßÂ§ßÊèêÈ´ò‰∫ÜÊâ´ÊèèÊïàÁéá„ÄÇ Èô§Ê≠§‰πãÂ§ñÔºåCatalystËøòÂÆö‰πâ‰∫ÜÂæàÂ§öÂÖ∂‰ªñ‰ºòÂåñËßÑÂàôÔºåÂèØ‰ª•Êü•ÁúãOptimizerÁ±ªÔºå‰∏ãÂõæÁÆÄÂçïÁöÑÊà™Âèñ‰∏ÄÈÉ®ÂàÜËßÑÂàôÔºö Ëá≥Ê≠§ÔºåÈÄªËæëÊâßË°åËÆ°ÂàíÂ∑≤ÁªèÂæóÂà∞‰∫ÜÊØîËæÉÂÆåÂñÑÁöÑ‰ºòÂåñÔºåÁÑ∂ËÄåÔºåÈÄªËæëÊâßË°åËÆ°Âàí‰æùÁÑ∂Ê≤°ÂäûÊ≥ïÁúüÊ≠£ÊâßË°åÔºå‰ªñ‰ª¨Âè™ÊòØÈÄªËæë‰∏äÂèØË°åÔºåÂÆûÈôÖ‰∏äSparkÂπ∂‰∏çÁü•ÈÅìÂ¶Ç‰ΩïÂéªÊâßË°åËøô‰∏™‰∏úË•ø„ÄÇÊØîÂ¶ÇJoinÂè™ÊòØ‰∏Ä‰∏™ÊäΩË±°Ê¶ÇÂøµÔºå‰ª£Ë°®‰∏§‰∏™Ë°®Ê†πÊçÆÁõ∏ÂêåÁöÑidËøõË°åÂêàÂπ∂ÔºåÁÑ∂ËÄåÂÖ∑‰ΩìÊÄé‰πàÂÆûÁé∞Ëøô‰∏™ÂêàÂπ∂ÔºåÈÄªËæëÊâßË°åËÆ°ÂàíÂπ∂Ê≤°ÊúâËØ¥Êòé„ÄÇ Ê≠§Êó∂Â∞±ÈúÄË¶ÅÂ∞ÜÈÄªËæëÊâßË°åËÆ°ÂàíËΩ¨Êç¢‰∏∫Áâ©ÁêÜÊâßË°åËÆ°ÂàíÔºåÂ∞ÜÈÄªËæë‰∏äÂèØË°åÁöÑÊâßË°åËÆ°ÂàíÂèò‰∏∫SparkÂèØ‰ª•ÁúüÊ≠£ÊâßË°åÁöÑËÆ°Âàí„ÄÇÊØîÂ¶ÇJoinÁÆóÂ≠êÔºåSparkÊ†πÊçÆ‰∏çÂêåÂú∫ÊôØ‰∏∫ËØ•ÁÆóÂ≠êÂà∂ÂÆö‰∫Ü‰∏çÂêåÁöÑÁÆóÊ≥ïÁ≠ñÁï•ÔºåÊúâBroadcastHashJoin„ÄÅShuffleHashJoin‰ª•ÂèäSortMergeJoinÁ≠âÔºàÂèØ‰ª•Â∞ÜJoinÁêÜËß£‰∏∫‰∏Ä‰∏™Êé•Âè£ÔºåBroadcastHashJoinÊòØÂÖ∂‰∏≠‰∏Ä‰∏™ÂÖ∑‰ΩìÂÆûÁé∞ÔºâÔºåÁâ©ÁêÜÊâßË°åËÆ°ÂàíÂÆûÈôÖ‰∏äÂ∞±ÊòØÂú®Ëøô‰∫õÂÖ∑‰ΩìÂÆûÁé∞‰∏≠ÊåëÈÄâ‰∏Ä‰∏™ËÄóÊó∂ÊúÄÂ∞èÁöÑÁÆóÊ≥ïÂÆûÁé∞ÔºåËøô‰∏™ËøáÁ®ãÊ∂âÂèäÂà∞Âü∫‰∫é‰ª£‰ª∑‰ºòÂåñÁ≠ñÁï•„ÄÇÊü•ÁúãSparkSQLÊâßË°åËÆ°ÂàíËá≥Ê≠§ÔºåÈÄöËøá‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁ§∫‰æãÂÆåÊï¥ÁöÑ‰ªãÁªç‰∫ÜCatalystÁöÑÊï¥‰∏™Â∑•‰ΩúÊµÅÁ®ãÔºåÂåÖÊã¨ParserÈò∂ÊÆµ„ÄÅAnalyzerÈò∂ÊÆµ„ÄÅOptimizeÈò∂ÊÆµ‰ª•ÂèäPhysical PlanningÈò∂ÊÆµ„ÄÇÊúâÂêåÂ≠¶ÂèØËÉΩ‰ºöÊØîËæÉÊÑüÂÖ¥Ë∂£SparkÁéØÂ¢É‰∏ãÂ¶Ç‰ΩïÊü•Áúã‰∏ÄÊù°ÂÖ∑‰ΩìÁöÑSQLÁöÑÊï¥‰∏™ËøáÁ®ãÔºåÂú®Ê≠§‰ªãÁªç‰∏§ÁßçÊñπÊ≥ïÔºö Êü•ÁúãÈÄªËæëÊâßË°åËÆ°Âàí‰ΩøÁî®queryExecutionÊñπÊ≥ïÊü•ÁúãÈÄªËæëÊâßË°åËÆ°ÂàíÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö Êü•ÁúãÁâ©ÁêÜÊâßË°åËÆ°Âàí‰ΩøÁî®explainÊñπÊ≥ïÊü•ÁúãÁâ©ÁêÜÊâßË°åËÆ°ÂàíÔºö Spark WebUIËøõË°åÊü•Áúã","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"},{"name":"sparkSQL","slug":"sparkSQL","permalink":"https://stanxia.github.io/tags/sparkSQL/"},{"name":"catalyst","slug":"catalyst","permalink":"https://stanxia.github.io/tags/catalyst/"}]},{"title":"sparkÂÆπÈîôÊú∫Âà∂","slug":"sparkÂÆπÈîôÊú∫Âà∂","date":"2017-11-29T17:16:32.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/11/29/sparkÂÆπÈîôÊú∫Âà∂/","link":"","permalink":"https://stanxia.github.io/2017/11/29/sparkÂÆπÈîôÊú∫Âà∂/","excerpt":"ÂºïË®Ä\n‰∏ÄËà¨Êù•ËØ¥ÔºåÂàÜÂ∏ÉÂºèÊï∞ÊçÆÈõÜÁöÑÂÆπÈîôÊÄßÊúâ‰∏§ÁßçÊñπÂºèÔºö Êï∞ÊçÆÊ£ÄÊü•ÁÇπ Âíå ËÆ∞ÂΩïÊï∞ÊçÆÁöÑÊõ¥Êñ∞ „ÄÇÈù¢ÂêëÂ§ßËßÑÊ®°Êï∞ÊçÆÂàÜÊûêÔºåÊï∞ÊçÆÊ£ÄÊü•ÁÇπÊìç‰ΩúÊàêÊú¨ÂæàÈ´òÔºåÈúÄË¶ÅÈÄöËøáÊï∞ÊçÆ‰∏≠ÂøÉÁöÑÁΩëÁªúËøûÊé•Âú®Êú∫Âô®‰πãÈó¥Â§çÂà∂Â∫ûÂ§ßÁöÑÊï∞ÊçÆÈõÜÔºåËÄåÁΩëÁªúÂ∏¶ÂÆΩÂæÄÂæÄÊØîÂÜÖÂ≠òÂ∏¶ÂÆΩ‰ΩéÂæóÂ§öÔºåÂêåÊó∂ËøòÈúÄË¶ÅÊ∂àËÄóÊõ¥Â§öÁöÑÂ≠òÂÇ®ËµÑÊ∫ê„ÄÇÂõ†Ê≠§ÔºåSparkÈÄâÊã©ËÆ∞ÂΩïÊõ¥Êñ∞ÁöÑÊñπÂºè„ÄÇ\n‰ΩÜÊòØÔºåÂ¶ÇÊûúÊõ¥Êñ∞Á≤íÂ∫¶Â§™ÁªÜÂ§™Â§öÔºåÈÇ£‰πàËÆ∞ÂΩïÊõ¥Êñ∞ÊàêÊú¨‰πü‰∏ç‰Ωé„ÄÇÂõ†Ê≠§ÔºåRDDÂè™ÊîØÊåÅÁ≤óÁ≤íÂ∫¶ËΩ¨Êç¢ÔºåÂç≥Âè™ËÆ∞ÂΩïÂçï‰∏™Âùó‰∏äÊâßË°åÁöÑÂçï‰∏™Êìç‰ΩúÔºåÁÑ∂ÂêéÂ∞ÜÂàõÂª∫RDDÁöÑ‰∏ÄÁ≥ªÂàóÂèòÊç¢Â∫èÂàóÔºàÊØè‰∏™RDDÈÉΩÂåÖÂê´‰∫Ü‰ªñÊòØÂ¶Ç‰ΩïÁî±ÂÖ∂‰ªñRDDÂèòÊç¢ËøáÊù•ÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÈáçÂª∫Êüê‰∏ÄÂùóÊï∞ÊçÆÁöÑ‰ø°ÊÅØ„ÄÇÂõ†Ê≠§RDDÁöÑÂÆπÈîôÊú∫Âà∂ÂèàÁß∞‚ÄúË°ÄÁªü(Lineage)‚ÄùÂÆπÈîôÔºâËÆ∞ÂΩï‰∏ãÊù•Ôºå‰ª•‰æøÊÅ¢Â§ç‰∏¢Â§±ÁöÑÂàÜÂå∫„ÄÇ \nLineageÊú¨Ë¥®‰∏äÂæàÁ±ª‰ºº‰∫éÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÈáçÂÅöÊó•ÂøóÔºàRedo LogÔºâÔºåÂè™‰∏çËøáËøô‰∏™ÈáçÂÅöÊó•ÂøóÁ≤íÂ∫¶ÂæàÂ§ßÔºåÊòØÂØπÂÖ®Â±ÄÊï∞ÊçÆÂÅöÂêåÊ†∑ÁöÑÈáçÂÅöËøõËÄåÊÅ¢Â§çÊï∞ÊçÆ„ÄÇLineageÊú∫Âà∂\nLineageÁÆÄ‰ªãÁõ∏ÊØîÂÖ∂‰ªñÁ≥ªÁªüÁöÑÁªÜÈ¢óÁ≤íÂ∫¶ÁöÑÂÜÖÂ≠òÊï∞ÊçÆÊõ¥Êñ∞Á∫ßÂà´ÁöÑÂ§á‰ªΩÊàñËÄÖLOGÊú∫Âà∂ÔºåRDDÁöÑLineageËÆ∞ÂΩïÁöÑÊòØÁ≤óÈ¢óÁ≤íÂ∫¶ÁöÑÁâπÂÆöÊï∞ÊçÆTransformationÊìç‰ΩúÔºàÂ¶Çfilter„ÄÅmap„ÄÅjoinÁ≠âÔºâË°å‰∏∫„ÄÇÂΩìËøô‰∏™RDDÁöÑÈÉ®ÂàÜÂàÜÂå∫Êï∞ÊçÆ‰∏¢Â§±Êó∂ÔºåÂÆÉÂèØ‰ª•ÈÄöËøáLineageËé∑ÂèñË∂≥Â§üÁöÑ‰ø°ÊÅØÊù•ÈáçÊñ∞ËøêÁÆóÂíåÊÅ¢Â§ç‰∏¢Â§±ÁöÑÊï∞ÊçÆÂàÜÂå∫„ÄÇÂõ†‰∏∫ËøôÁßçÁ≤óÈ¢óÁ≤íÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÈôêÂà∂‰∫ÜSparkÁöÑËøêÁî®Âú∫ÂêàÔºåÊâÄ‰ª•SparkÂπ∂‰∏çÈÄÇÁî®‰∫éÊâÄÊúâÈ´òÊÄßËÉΩË¶ÅÊ±ÇÁöÑÂú∫ÊôØÔºå‰ΩÜÂêåÊó∂Áõ∏ÊØîÁªÜÈ¢óÁ≤íÂ∫¶ÁöÑÊï∞ÊçÆÊ®°ÂûãÔºå‰πüÂ∏¶Êù•‰∫ÜÊÄßËÉΩÁöÑÊèêÂçá„ÄÇ","text":"ÂºïË®Ä ‰∏ÄËà¨Êù•ËØ¥ÔºåÂàÜÂ∏ÉÂºèÊï∞ÊçÆÈõÜÁöÑÂÆπÈîôÊÄßÊúâ‰∏§ÁßçÊñπÂºèÔºö Êï∞ÊçÆÊ£ÄÊü•ÁÇπ Âíå ËÆ∞ÂΩïÊï∞ÊçÆÁöÑÊõ¥Êñ∞ „ÄÇÈù¢ÂêëÂ§ßËßÑÊ®°Êï∞ÊçÆÂàÜÊûêÔºåÊï∞ÊçÆÊ£ÄÊü•ÁÇπÊìç‰ΩúÊàêÊú¨ÂæàÈ´òÔºåÈúÄË¶ÅÈÄöËøáÊï∞ÊçÆ‰∏≠ÂøÉÁöÑÁΩëÁªúËøûÊé•Âú®Êú∫Âô®‰πãÈó¥Â§çÂà∂Â∫ûÂ§ßÁöÑÊï∞ÊçÆÈõÜÔºåËÄåÁΩëÁªúÂ∏¶ÂÆΩÂæÄÂæÄÊØîÂÜÖÂ≠òÂ∏¶ÂÆΩ‰ΩéÂæóÂ§öÔºåÂêåÊó∂ËøòÈúÄË¶ÅÊ∂àËÄóÊõ¥Â§öÁöÑÂ≠òÂÇ®ËµÑÊ∫ê„ÄÇÂõ†Ê≠§ÔºåSparkÈÄâÊã©ËÆ∞ÂΩïÊõ¥Êñ∞ÁöÑÊñπÂºè„ÄÇ ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊõ¥Êñ∞Á≤íÂ∫¶Â§™ÁªÜÂ§™Â§öÔºåÈÇ£‰πàËÆ∞ÂΩïÊõ¥Êñ∞ÊàêÊú¨‰πü‰∏ç‰Ωé„ÄÇÂõ†Ê≠§ÔºåRDDÂè™ÊîØÊåÅÁ≤óÁ≤íÂ∫¶ËΩ¨Êç¢ÔºåÂç≥Âè™ËÆ∞ÂΩïÂçï‰∏™Âùó‰∏äÊâßË°åÁöÑÂçï‰∏™Êìç‰ΩúÔºåÁÑ∂ÂêéÂ∞ÜÂàõÂª∫RDDÁöÑ‰∏ÄÁ≥ªÂàóÂèòÊç¢Â∫èÂàóÔºàÊØè‰∏™RDDÈÉΩÂåÖÂê´‰∫Ü‰ªñÊòØÂ¶Ç‰ΩïÁî±ÂÖ∂‰ªñRDDÂèòÊç¢ËøáÊù•ÁöÑ‰ª•ÂèäÂ¶Ç‰ΩïÈáçÂª∫Êüê‰∏ÄÂùóÊï∞ÊçÆÁöÑ‰ø°ÊÅØ„ÄÇÂõ†Ê≠§RDDÁöÑÂÆπÈîôÊú∫Âà∂ÂèàÁß∞‚ÄúË°ÄÁªü(Lineage)‚ÄùÂÆπÈîôÔºâËÆ∞ÂΩï‰∏ãÊù•Ôºå‰ª•‰æøÊÅ¢Â§ç‰∏¢Â§±ÁöÑÂàÜÂå∫„ÄÇ LineageÊú¨Ë¥®‰∏äÂæàÁ±ª‰ºº‰∫éÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÈáçÂÅöÊó•ÂøóÔºàRedo LogÔºâÔºåÂè™‰∏çËøáËøô‰∏™ÈáçÂÅöÊó•ÂøóÁ≤íÂ∫¶ÂæàÂ§ßÔºåÊòØÂØπÂÖ®Â±ÄÊï∞ÊçÆÂÅöÂêåÊ†∑ÁöÑÈáçÂÅöËøõËÄåÊÅ¢Â§çÊï∞ÊçÆ„ÄÇLineageÊú∫Âà∂ LineageÁÆÄ‰ªãÁõ∏ÊØîÂÖ∂‰ªñÁ≥ªÁªüÁöÑÁªÜÈ¢óÁ≤íÂ∫¶ÁöÑÂÜÖÂ≠òÊï∞ÊçÆÊõ¥Êñ∞Á∫ßÂà´ÁöÑÂ§á‰ªΩÊàñËÄÖLOGÊú∫Âà∂ÔºåRDDÁöÑLineageËÆ∞ÂΩïÁöÑÊòØÁ≤óÈ¢óÁ≤íÂ∫¶ÁöÑÁâπÂÆöÊï∞ÊçÆTransformationÊìç‰ΩúÔºàÂ¶Çfilter„ÄÅmap„ÄÅjoinÁ≠âÔºâË°å‰∏∫„ÄÇÂΩìËøô‰∏™RDDÁöÑÈÉ®ÂàÜÂàÜÂå∫Êï∞ÊçÆ‰∏¢Â§±Êó∂ÔºåÂÆÉÂèØ‰ª•ÈÄöËøáLineageËé∑ÂèñË∂≥Â§üÁöÑ‰ø°ÊÅØÊù•ÈáçÊñ∞ËøêÁÆóÂíåÊÅ¢Â§ç‰∏¢Â§±ÁöÑÊï∞ÊçÆÂàÜÂå∫„ÄÇÂõ†‰∏∫ËøôÁßçÁ≤óÈ¢óÁ≤íÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÈôêÂà∂‰∫ÜSparkÁöÑËøêÁî®Âú∫ÂêàÔºåÊâÄ‰ª•SparkÂπ∂‰∏çÈÄÇÁî®‰∫éÊâÄÊúâÈ´òÊÄßËÉΩË¶ÅÊ±ÇÁöÑÂú∫ÊôØÔºå‰ΩÜÂêåÊó∂Áõ∏ÊØîÁªÜÈ¢óÁ≤íÂ∫¶ÁöÑÊï∞ÊçÆÊ®°ÂûãÔºå‰πüÂ∏¶Êù•‰∫ÜÊÄßËÉΩÁöÑÊèêÂçá„ÄÇ ‰∏§Áßç‰æùËµñÂÖ≥Á≥ªRDDÂú®Lineage‰æùËµñÊñπÈù¢ÂàÜ‰∏∫‰∏§ÁßçÔºöÁ™Ñ‰æùËµñ(Narrow Dependencies)‰∏éÂÆΩ‰æùËµñ(Wide Dependencies,Ê∫êÁ†Å‰∏≠Áß∞‰∏∫Shuffle Dependencies)ÔºåÁî®Êù•Ëß£ÂÜ≥Êï∞ÊçÆÂÆπÈîôÁöÑÈ´òÊïàÊÄß„ÄÇ Á™Ñ‰æùËµñÔºöÊòØÊåáÁà∂RDDÁöÑÊØè‰∏Ä‰∏™ÂàÜÂå∫ÊúÄÂ§öË¢´‰∏Ä‰∏™Â≠êRDDÁöÑÂàÜÂå∫ÊâÄÁî®ÔºåË°®Áé∞‰∏∫‰∏Ä‰∏™Áà∂RDDÁöÑÂàÜÂå∫ÂØπÂ∫î‰∫é‰∏Ä‰∏™Â≠êRDDÁöÑÂàÜÂå∫ÔºåÊàñÂ§ö‰∏™Áà∂RDDÁöÑÂàÜÂå∫ÂØπÂ∫î‰∫é‰∏Ä‰∏™Â≠êRDDÁöÑÂàÜÂå∫Ôºå‰πüÂ∞±ÊòØËØ¥‰∏Ä‰∏™Áà∂RDDÁöÑ‰∏Ä‰∏™ÂàÜÂå∫‰∏çÂèØËÉΩÂØπÂ∫î‰∏Ä‰∏™Â≠êRDDÁöÑÂ§ö‰∏™ÂàÜÂå∫„ÄÇ 1‰∏™Áà∂RDDÂàÜÂå∫ÂØπÂ∫î1‰∏™Â≠êRDDÂàÜÂå∫ÔºåËøôÂÖ∂‰∏≠ÂèàÂàÜ‰∏§ÁßçÊÉÖÂÜµÔºö1‰∏™Â≠êRDDÂàÜÂå∫ÂØπÂ∫î1‰∏™Áà∂RDDÂàÜÂå∫ÔºàÂ¶Çmap„ÄÅfilterÁ≠âÁÆóÂ≠êÔºâÔºå1‰∏™Â≠êRDDÂàÜÂå∫ÂØπÂ∫îN‰∏™Áà∂RDDÂàÜÂå∫ÔºàÂ¶Çco-paritionedÔºàÂçèÂêåÂàíÂàÜÔºâËøáÁöÑJoinÔºâ„ÄÇ ÂÆΩ‰æùËµñÔºöÊòØÊåáÂ≠êRDDÁöÑÂàÜÂå∫‰æùËµñ‰∫éÁà∂RDDÁöÑÂ§ö‰∏™ÂàÜÂå∫ÊàñÊâÄÊúâÂàÜÂå∫ÔºåÂç≥Â≠òÂú®‰∏Ä‰∏™Áà∂RDDÁöÑ‰∏Ä‰∏™ÂàÜÂå∫ÂØπÂ∫î‰∏Ä‰∏™Â≠êRDDÁöÑÂ§ö‰∏™ÂàÜÂå∫„ÄÇ 1‰∏™Áà∂RDDÂàÜÂå∫ÂØπÂ∫îÂ§ö‰∏™Â≠êRDDÂàÜÂå∫ÔºåËøôÂÖ∂‰∏≠ÂèàÂàÜ‰∏§ÁßçÊÉÖÂÜµÔºö1‰∏™Áà∂RDDÂØπÂ∫îÊâÄÊúâÂ≠êRDDÂàÜÂå∫ÔºàÊú™ÁªèÂçèÂêåÂàíÂàÜÁöÑJoinÔºâÊàñËÄÖ1‰∏™Áà∂RDDÂØπÂ∫îÈùûÂÖ®ÈÉ®ÁöÑÂ§ö‰∏™RDDÂàÜÂå∫ÔºàÂ¶ÇgroupByKeyÔºâ„ÄÇ Êú¨Ë¥®ÁêÜËß£Ê†πÊçÆÁà∂RDDÂàÜÂå∫ÊòØÂØπÂ∫î1‰∏™ËøòÊòØÂ§ö‰∏™Â≠êRDDÂàÜÂå∫Êù•Âå∫ÂàÜÁ™Ñ‰æùËµñÔºàÁà∂ÂàÜÂå∫ÂØπÂ∫î‰∏Ä‰∏™Â≠êÂàÜÂå∫ÔºåÂ§ö‰∏™Áà∂ÂàÜÂå∫ÂØπÂ∫î‰∏Ä‰∏™Â≠êÂàÜÂå∫ÔºâÂíåÂÆΩ‰æùËµñÔºàÁà∂ÂàÜÂå∫ÂØπÂ∫îÂ§ö‰∏™Â≠êÂàÜÂå∫Ôºâ„ÄÇÂ¶ÇÊûúÂØπÂ∫îÂ§ö‰∏™ÔºåÂàôÂΩìÂÆπÈîôÈáçÁÆóÂàÜÂå∫Êó∂ÔºåÂõ†‰∏∫Áà∂ÂàÜÂå∫Êï∞ÊçÆÂè™Êúâ‰∏ÄÈÉ®ÂàÜÊòØÈúÄË¶ÅÈáçÁÆóÂ≠êÂàÜÂå∫ÁöÑÔºåÂÖ∂‰ΩôÊï∞ÊçÆÈáçÁÆóÂ∞±ÈÄ†Êàê‰∫ÜÂÜó‰ΩôËÆ°ÁÆó„ÄÇ ÂØπ‰∫éÂÆΩ‰æùËµñÔºåStageËÆ°ÁÆóÁöÑËæìÂÖ•ÂíåËæìÂá∫Âú®‰∏çÂêåÁöÑËäÇÁÇπ‰∏äÔºåÂØπ‰∫éËæìÂÖ•ËäÇÁÇπÂÆåÂ•ΩÔºåËÄåËæìÂá∫ËäÇÁÇπÊ≠ªÊú∫ÁöÑÊÉÖÂÜµÔºåÈÄöËøáÈáçÊñ∞ËÆ°ÁÆóÊÅ¢Â§çÊï∞ÊçÆËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËøôÁßçÊñπÊ≥ïÂÆπÈîôÊòØÊúâÊïàÁöÑÔºåÂê¶ÂàôÊó†ÊïàÔºåÂõ†‰∏∫Êó†Ê≥ïÈáçËØïÔºåÈúÄË¶ÅÂêë‰∏äËøΩÊ∫ØÂÖ∂Á•ñÂÖàÁúãÊòØÂê¶ÂèØ‰ª•ÈáçËØïÔºàËøôÂ∞±ÊòØlineageÔºåË°ÄÁªüÁöÑÊÑèÊÄùÔºâÔºåÁ™Ñ‰æùËµñÂØπ‰∫éÊï∞ÊçÆÁöÑÈáçÁÆóÂºÄÈîÄË¶ÅËøúÂ∞è‰∫éÂÆΩ‰æùËµñÁöÑÊï∞ÊçÆÈáçÁÆóÂºÄÈîÄ„ÄÇ Á™Ñ‰æùËµñÂíåÂÆΩ‰æùËµñÁöÑÊ¶ÇÂøµ‰∏ªË¶ÅÁî®Âú®‰∏§‰∏™Âú∞ÊñπÔºö‰∏Ä‰∏™ÊòØÂÆπÈîô‰∏≠Áõ∏ÂΩì‰∫éRedoÊó•ÂøóÁöÑÂäüËÉΩÔºõÂè¶‰∏Ä‰∏™ÊòØÂú®Ë∞ÉÂ∫¶‰∏≠ÊûÑÂª∫DAG‰Ωú‰∏∫‰∏çÂêåStageÁöÑÂàíÂàÜÁÇπ„ÄÇ ‰æùËµñÂÖ≥Á≥ªÁöÑÁâπÊÄßÁ¨¨‰∏ÄÔºåÁ™Ñ‰æùËµñÂèØ‰ª•Âú®Êüê‰∏™ËÆ°ÁÆóËäÇÁÇπ‰∏äÁõ¥Êé•ÈÄöËøáËÆ°ÁÆóÁà∂RDDÁöÑÊüêÂùóÊï∞ÊçÆËÆ°ÁÆóÂæóÂà∞Â≠êRDDÂØπÂ∫îÁöÑÊüêÂùóÊï∞ÊçÆÔºõÂÆΩ‰æùËµñÂàôË¶ÅÁ≠âÂà∞Áà∂RDDÊâÄÊúâÊï∞ÊçÆÈÉΩËÆ°ÁÆóÂÆåÊàê‰πãÂêéÔºåÂπ∂‰∏îÁà∂RDDÁöÑËÆ°ÁÆóÁªìÊûúËøõË°åhashÂπ∂‰º†Âà∞ÂØπÂ∫îËäÇÁÇπ‰∏ä‰πãÂêéÊâçËÉΩËÆ°ÁÆóÂ≠êRDD„ÄÇ Á¨¨‰∫åÔºåÊï∞ÊçÆ‰∏¢Â§±Êó∂ÔºåÂØπ‰∫éÁ™Ñ‰æùËµñÂè™ÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó‰∏¢Â§±ÁöÑÈÇ£‰∏ÄÂùóÊï∞ÊçÆÊù•ÊÅ¢Â§çÔºõÂØπ‰∫éÂÆΩ‰æùËµñÂàôË¶ÅÂ∞ÜÁ•ñÂÖàRDD‰∏≠ÁöÑÊâÄÊúâÊï∞ÊçÆÂùóÂÖ®ÈÉ®ÈáçÊñ∞ËÆ°ÁÆóÊù•ÊÅ¢Â§ç„ÄÇÊâÄ‰ª•Âú®Èïø‚ÄúË°ÄÁªü‚ÄùÈìæÁâπÂà´ÊòØÊúâÂÆΩ‰æùËµñÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÂú®ÈÄÇÂΩìÁöÑÊó∂Êú∫ËÆæÁΩÆÊï∞ÊçÆÊ£ÄÊü•ÁÇπ„ÄÇ‰πüÊòØËøô‰∏§‰∏™ÁâπÊÄßË¶ÅÊ±ÇÂØπ‰∫é‰∏çÂêå‰æùËµñÂÖ≥Á≥ªË¶ÅÈááÂèñ‰∏çÂêåÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶Êú∫Âà∂ÂíåÂÆπÈîôÊÅ¢Â§çÊú∫Âà∂„ÄÇ ÂÆπÈîôÂéüÁêÜÂú®ÂÆπÈîôÊú∫Âà∂‰∏≠ÔºåÂ¶ÇÊûú‰∏Ä‰∏™ËäÇÁÇπÊ≠ªÊú∫‰∫ÜÔºåËÄå‰∏îËøêÁÆóÁ™Ñ‰æùËµñÔºåÂàôÂè™Ë¶ÅÊää‰∏¢Â§±ÁöÑÁà∂RDDÂàÜÂå∫ÈáçÁÆóÂç≥ÂèØÔºå‰∏ç‰æùËµñ‰∫éÂÖ∂‰ªñËäÇÁÇπ„ÄÇËÄåÂÆΩ‰æùËµñÈúÄË¶ÅÁà∂RDDÁöÑÊâÄÊúâÂàÜÂå∫ÈÉΩÂ≠òÂú®ÔºåÈáçÁÆóÂ∞±ÂæàÊòÇË¥µ‰∫Ü„ÄÇ ÂèØ‰ª•ËøôÊ†∑ÁêÜËß£ÂºÄÈîÄÁöÑÁªèÊµé‰∏éÂê¶ÔºöÂú®Á™Ñ‰æùËµñ‰∏≠ÔºåÂú®Â≠êRDDÁöÑÂàÜÂå∫‰∏¢Â§±„ÄÅÈáçÁÆóÁà∂RDDÂàÜÂå∫Êó∂ÔºåÁà∂RDDÁõ∏Â∫îÂàÜÂå∫ÁöÑÊâÄÊúâÊï∞ÊçÆÈÉΩÊòØÂ≠êRDDÂàÜÂå∫ÁöÑÊï∞ÊçÆÔºåÂπ∂‰∏çÂ≠òÂú®ÂÜó‰ΩôËÆ°ÁÆó„ÄÇÂú®ÂÆΩ‰æùËµñÊÉÖÂÜµ‰∏ãÔºå‰∏¢Â§±‰∏Ä‰∏™Â≠êRDDÂàÜÂå∫ÈáçÁÆóÁöÑÊØè‰∏™Áà∂RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÁöÑÊâÄÊúâÊï∞ÊçÆÂπ∂‰∏çÊòØÈÉΩÁªô‰∏¢Â§±ÁöÑÂ≠êRDDÂàÜÂå∫Áî®ÁöÑÔºå‰ºöÊúâ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆÁõ∏ÂΩì‰∫éÂØπÂ∫îÁöÑÊòØÊú™‰∏¢Â§±ÁöÑÂ≠êRDDÂàÜÂå∫‰∏≠ÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºåËøôÊ†∑Â∞±‰ºö‰∫ßÁîüÂÜó‰ΩôËÆ°ÁÆóÂºÄÈîÄÔºåËøô‰πüÊòØÂÆΩ‰æùËµñÂºÄÈîÄÊõ¥Â§ßÁöÑÂéüÂõ†„ÄÇ Âõ†Ê≠§Â¶ÇÊûú‰ΩøÁî®CheckpointÁÆóÂ≠êÊù•ÂÅöÊ£ÄÊü•ÁÇπÔºå‰∏ç‰ªÖË¶ÅËÄÉËôëLineageÊòØÂê¶Ë∂≥Â§üÈïøÔºå‰πüË¶ÅËÄÉËôëÊòØÂê¶ÊúâÂÆΩ‰æùËµñÔºåÂØπÂÆΩ‰æùËµñÂä†CheckpointÊòØÊúÄÁâ©ÊúâÊâÄÂÄºÁöÑ„ÄÇCheckpointÊú∫Âà∂ÈÄöËøá‰∏äËø∞ÂàÜÊûêÂèØ‰ª•ÁúãÂá∫Âú®‰ª•‰∏ã‰∏§ÁßçÊÉÖÂÜµ‰∏ãÔºåRDDÈúÄË¶ÅÂä†Ê£ÄÊü•ÁÇπ„ÄÇ DAG‰∏≠ÁöÑLineageËøáÈïøÔºåÂ¶ÇÊûúÈáçÁÆóÔºåÂàôÂºÄÈîÄÂ§™Â§ßÔºàÂ¶ÇÂú®PageRank‰∏≠Ôºâ„ÄÇ Âú®ÂÆΩ‰æùËµñ‰∏äÂÅöCheckpointËé∑ÂæóÁöÑÊî∂ÁõäÊõ¥Â§ß„ÄÇ Áî±‰∫éRDDÊòØÂè™ËØªÁöÑÔºåÊâÄ‰ª•SparkÁöÑRDDËÆ°ÁÆó‰∏≠‰∏ÄËá¥ÊÄß‰∏çÊòØ‰∏ªË¶ÅÂÖ≥ÂøÉÁöÑÂÜÖÂÆπÔºåÂÜÖÂ≠òÁõ∏ÂØπÂÆπÊòìÁÆ°ÁêÜÔºåËøô‰πüÊòØËÆæËÆ°ËÄÖÂæàÊúâËøúËßÅÁöÑÂú∞ÊñπÔºåËøôÊ†∑ÂáèÂ∞ë‰∫ÜÊ°ÜÊû∂ÁöÑÂ§çÊùÇÊÄßÔºåÊèêÂçá‰∫ÜÊÄßËÉΩÂíåÂèØÊâ©Â±ïÊÄßÔºå‰∏∫‰ª•Âêé‰∏äÂ±ÇÊ°ÜÊû∂ÁöÑ‰∏∞ÂØåÂ•†ÂÆö‰∫ÜÂº∫ÊúâÂäõÁöÑÂü∫Á°Ä„ÄÇ Âú®RDDËÆ°ÁÆó‰∏≠ÔºåÈÄöËøáÊ£ÄÊü•ÁÇπÊú∫Âà∂ËøõË°åÂÆπÈîôÔºå‰º†ÁªüÂÅöÊ£ÄÊü•ÁÇπÊúâ‰∏§ÁßçÊñπÂºèÔºöÈÄöËøáÂÜó‰ΩôÊï∞ÊçÆÂíåÊó•ÂøóËÆ∞ÂΩïÊõ¥Êñ∞Êìç‰Ωú„ÄÇÂú®RDD‰∏≠ÁöÑdoCheckPointÊñπÊ≥ïÁõ∏ÂΩì‰∫éÈÄöËøáÂÜó‰ΩôÊï∞ÊçÆÊù•ÁºìÂ≠òÊï∞ÊçÆÔºåËÄå‰πãÂâç‰ªãÁªçÁöÑË°ÄÁªüÂ∞±ÊòØÈÄöËøáÁõ∏ÂΩìÁ≤óÁ≤íÂ∫¶ÁöÑËÆ∞ÂΩïÊõ¥Êñ∞Êìç‰ΩúÊù•ÂÆûÁé∞ÂÆπÈîôÁöÑ„ÄÇ Ê£ÄÊü•ÁÇπÔºàÊú¨Ë¥®ÊòØÈÄöËøáÂ∞ÜRDDÂÜôÂÖ•DiskÂÅöÊ£ÄÊü•ÁÇπÔºâÊòØ‰∏∫‰∫ÜÈÄöËøálineageÂÅöÂÆπÈîôÁöÑËæÖÂä©ÔºålineageËøáÈïø‰ºöÈÄ†ÊàêÂÆπÈîôÊàêÊú¨ËøáÈ´òÔºåËøôÊ†∑Â∞±‰∏çÂ¶ÇÂú®‰∏≠Èó¥Èò∂ÊÆµÂÅöÊ£ÄÊü•ÁÇπÂÆπÈîôÔºåÂ¶ÇÊûú‰πãÂêéÊúâËäÇÁÇπÂá∫Áé∞ÈóÆÈ¢òËÄå‰∏¢Â§±ÂàÜÂå∫Ôºå‰ªéÂÅöÊ£ÄÊü•ÁÇπÁöÑRDDÂºÄÂßãÈáçÂÅöLineageÔºåÂ∞±‰ºöÂáèÂ∞ëÂºÄÈîÄ„ÄÇ","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"},{"name":"ÂéüÁêÜ","slug":"ÂéüÁêÜ","permalink":"https://stanxia.github.io/tags/ÂéüÁêÜ/"}]},{"title":"ORC‰∏éPARQUETÊñá‰ª∂Á±ªÂûãÁöÑÊØîËæÉ","slug":"ORC‰∏éPARQUETÊñá‰ª∂Á±ªÂûãÁöÑÊØîËæÉ","date":"2017-11-29T10:29:04.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/11/29/ORC‰∏éPARQUETÊñá‰ª∂Á±ªÂûãÁöÑÊØîËæÉ/","link":"","permalink":"https://stanxia.github.io/2017/11/29/ORC‰∏éPARQUETÊñá‰ª∂Á±ªÂûãÁöÑÊØîËæÉ/","excerpt":"ÂàóÂºèÂ≠òÂÇ®Áî±‰∫éOLAPÊü•ËØ¢ÁöÑÁâπÁÇπÔºåÂàóÂºèÂ≠òÂÇ®ÂèØ‰ª•ÊèêÂçáÂÖ∂Êü•ËØ¢ÊÄßËÉΩÔºå‰ΩÜÊòØÂÆÉÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÂë¢ÔºüËøôÂ∞±Ë¶Å‰ªéÂàóÂºèÂ≠òÂÇ®ÁöÑÂéüÁêÜËØ¥Ëµ∑Ôºå‰ªéÂõæ1‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÁõ∏ÂØπ‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠ÈÄöÂ∏∏‰ΩøÁî®ÁöÑË°åÂºèÂ≠òÂÇ®ÔºåÂú®‰ΩøÁî®ÂàóÂºèÂ≠òÂÇ®Êó∂ÊØè‰∏ÄÂàóÁöÑÊâÄÊúâÂÖÉÁ¥†ÈÉΩÊòØÈ°∫Â∫èÂ≠òÂÇ®ÁöÑ„ÄÇÁî±Ê≠§ÁâπÁÇπÂèØ‰ª•ÁªôÊü•ËØ¢Â∏¶Êù•Â¶Ç‰∏ãÁöÑ‰ºòÂåñÔºö\n123Êü•ËØ¢ÁöÑÊó∂ÂÄô‰∏çÈúÄË¶ÅÊâ´ÊèèÂÖ®ÈÉ®ÁöÑÊï∞ÊçÆÔºåËÄåÂè™ÈúÄË¶ÅËØªÂèñÊØèÊ¨°Êü•ËØ¢Ê∂âÂèäÁöÑÂàóÔºåËøôÊ†∑ÂèØ‰ª•Â∞ÜI/OÊ∂àËÄóÈôç‰ΩéNÂÄçÔºåÂè¶Â§ñÂèØ‰ª•‰øùÂ≠òÊØè‰∏ÄÂàóÁöÑÁªüËÆ°‰ø°ÊÅØ(min„ÄÅmax„ÄÅsumÁ≠â)ÔºåÂÆûÁé∞ÈÉ®ÂàÜÁöÑË∞ìËØç‰∏ãÊé®„ÄÇÁî±‰∫éÊØè‰∏ÄÂàóÁöÑÊàêÂëòÈÉΩÊòØÂêåÊûÑÁöÑÔºåÂèØ‰ª•ÈíàÂØπ‰∏çÂêåÁöÑÊï∞ÊçÆÁ±ªÂûã‰ΩøÁî®Êõ¥È´òÊïàÁöÑÊï∞ÊçÆÂéãÁº©ÁÆóÊ≥ïÔºåËøõ‰∏ÄÊ≠•ÂáèÂ∞èI/O„ÄÇÁî±‰∫éÊØè‰∏ÄÂàóÁöÑÊàêÂëòÁöÑÂêåÊûÑÊÄßÔºåÂèØ‰ª•‰ΩøÁî®Êõ¥Âä†ÈÄÇÂêàCPU pipelineÁöÑÁºñÁ†ÅÊñπÂºèÔºåÂáèÂ∞èCPUÁöÑÁºìÂ≠òÂ§±Êïà„ÄÇ\nÂõæ1 Ë°åÂºèÂ≠òÂÇ®VSÂàóÂºèÂ≠òÂÇ®","text":"ÂàóÂºèÂ≠òÂÇ®Áî±‰∫éOLAPÊü•ËØ¢ÁöÑÁâπÁÇπÔºåÂàóÂºèÂ≠òÂÇ®ÂèØ‰ª•ÊèêÂçáÂÖ∂Êü•ËØ¢ÊÄßËÉΩÔºå‰ΩÜÊòØÂÆÉÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÂë¢ÔºüËøôÂ∞±Ë¶Å‰ªéÂàóÂºèÂ≠òÂÇ®ÁöÑÂéüÁêÜËØ¥Ëµ∑Ôºå‰ªéÂõæ1‰∏≠ÂèØ‰ª•ÁúãÂà∞ÔºåÁõ∏ÂØπ‰∫éÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ì‰∏≠ÈÄöÂ∏∏‰ΩøÁî®ÁöÑË°åÂºèÂ≠òÂÇ®ÔºåÂú®‰ΩøÁî®ÂàóÂºèÂ≠òÂÇ®Êó∂ÊØè‰∏ÄÂàóÁöÑÊâÄÊúâÂÖÉÁ¥†ÈÉΩÊòØÈ°∫Â∫èÂ≠òÂÇ®ÁöÑ„ÄÇÁî±Ê≠§ÁâπÁÇπÂèØ‰ª•ÁªôÊü•ËØ¢Â∏¶Êù•Â¶Ç‰∏ãÁöÑ‰ºòÂåñÔºö 123Êü•ËØ¢ÁöÑÊó∂ÂÄô‰∏çÈúÄË¶ÅÊâ´ÊèèÂÖ®ÈÉ®ÁöÑÊï∞ÊçÆÔºåËÄåÂè™ÈúÄË¶ÅËØªÂèñÊØèÊ¨°Êü•ËØ¢Ê∂âÂèäÁöÑÂàóÔºåËøôÊ†∑ÂèØ‰ª•Â∞ÜI/OÊ∂àËÄóÈôç‰ΩéNÂÄçÔºåÂè¶Â§ñÂèØ‰ª•‰øùÂ≠òÊØè‰∏ÄÂàóÁöÑÁªüËÆ°‰ø°ÊÅØ(min„ÄÅmax„ÄÅsumÁ≠â)ÔºåÂÆûÁé∞ÈÉ®ÂàÜÁöÑË∞ìËØç‰∏ãÊé®„ÄÇÁî±‰∫éÊØè‰∏ÄÂàóÁöÑÊàêÂëòÈÉΩÊòØÂêåÊûÑÁöÑÔºåÂèØ‰ª•ÈíàÂØπ‰∏çÂêåÁöÑÊï∞ÊçÆÁ±ªÂûã‰ΩøÁî®Êõ¥È´òÊïàÁöÑÊï∞ÊçÆÂéãÁº©ÁÆóÊ≥ïÔºåËøõ‰∏ÄÊ≠•ÂáèÂ∞èI/O„ÄÇÁî±‰∫éÊØè‰∏ÄÂàóÁöÑÊàêÂëòÁöÑÂêåÊûÑÊÄßÔºåÂèØ‰ª•‰ΩøÁî®Êõ¥Âä†ÈÄÇÂêàCPU pipelineÁöÑÁºñÁ†ÅÊñπÂºèÔºåÂáèÂ∞èCPUÁöÑÁºìÂ≠òÂ§±Êïà„ÄÇ Âõæ1 Ë°åÂºèÂ≠òÂÇ®VSÂàóÂºèÂ≠òÂÇ® ÂµåÂ•óÊï∞ÊçÆÊ†ºÂºèÈÄöÂ∏∏Êàë‰ª¨‰ΩøÁî®ÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÂ≠òÂÇ®ÁªìÊûÑÂåñÊï∞ÊçÆÔºåËÄåÂÖ≥Á≥ªÊï∞ÊçÆÂ∫ìÊîØÊåÅÁöÑÊï∞ÊçÆÊ®°ÂûãÈÉΩÊòØÊâÅÂπ≥ÂºèÁöÑÔºåËÄåÈÅáÂà∞ËØ∏Â¶ÇList„ÄÅMapÂíåËá™ÂÆö‰πâStructÁöÑÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÁî®Êà∑Ëá™Â∑±Ëß£ÊûêÔºå‰ΩÜÊòØÂú®Â§ßÊï∞ÊçÆÁéØÂ¢É‰∏ãÔºåÊï∞ÊçÆÁöÑÊù•Ê∫êÂ§öÁßçÂ§öÊ†∑Ôºå‰æãÂ¶ÇÂüãÁÇπÊï∞ÊçÆÔºåÂæàÂèØËÉΩÈúÄË¶ÅÊääÁ®ãÂ∫è‰∏≠ÁöÑÊüê‰∫õÂØπË±°ÂÜÖÂÆπ‰Ωú‰∏∫ËæìÂá∫ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåËÄåÊØè‰∏Ä‰∏™ÂØπË±°ÈÉΩÂèØËÉΩÊòØÂµåÂ•óÁöÑÔºåÊâÄ‰ª•Â¶ÇÊûúËÉΩÂ§üÂéüÁîüÁöÑÊîØÊåÅËøôÁßçÊï∞ÊçÆÔºåÊü•ËØ¢ÁöÑÊó∂ÂÄôÂ∞±‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÁöÑËß£Êûê‰æøËÉΩËé∑ÂæóÊÉ≥Ë¶ÅÁöÑÁªìÊûú„ÄÇ‰æãÂ¶ÇÂú®TwitterÔºå‰ªñ‰ª¨‰∏Ä‰∏™ÂÖ∏ÂûãÁöÑÊó•ÂøóÂØπË±°Ôºà‰∏ÄÊù°ËÆ∞ÂΩïÔºâÊúâ87‰∏™Â≠óÊÆµÔºåÂÖ∂‰∏≠ÂµåÂ•ó‰∫Ü7Â±ÇÔºåÂ¶Ç‰∏ãÂõæ„ÄÇ Âõæ2 ÂµåÂ•óÊï∞ÊçÆÊ®°Âûã ÈöèÁùÄÂµåÂ•óÊ†ºÂºèÁöÑÊï∞ÊçÆÁöÑÈúÄÊ±ÇÊó•ÁõäÂ¢ûÂä†ÔºåÁõÆÂâçHadoopÁîüÊÄÅÂúà‰∏≠‰∏ªÊµÅÁöÑÊü•ËØ¢ÂºïÊìéÈÉΩÊîØÊåÅÊõ¥‰∏∞ÂØåÁöÑÊï∞ÊçÆÁ±ªÂûãÔºå‰æãÂ¶ÇHive„ÄÅSparkSQL„ÄÅImpalaÁ≠âÈÉΩÂéüÁîüÁöÑÊîØÊåÅËØ∏Â¶Çstruct„ÄÅmap„ÄÅarrayËøôÊ†∑ÁöÑÂ§çÊùÇÊï∞ÊçÆÁ±ªÂûãÔºåËøôÊ†∑‰øÉ‰ΩøÂêÑÁßçÂ≠òÂÇ®Ê†ºÂºèÈÉΩÈúÄË¶ÅÊîØÊåÅÂµåÂ•óÊï∞ÊçÆÊ†ºÂºè„ÄÇ ParquetÂ≠òÂÇ®Ê†ºÂºèApache ParquetÊòØHadoopÁîüÊÄÅÂúà‰∏≠‰∏ÄÁßçÊñ∞ÂûãÂàóÂºèÂ≠òÂÇ®Ê†ºÂºèÔºåÂÆÉÂèØ‰ª•ÂÖºÂÆπHadoopÁîüÊÄÅÂúà‰∏≠Â§ßÂ§öÊï∞ËÆ°ÁÆóÊ°ÜÊû∂(Mapreduce„ÄÅSparkÁ≠â)ÔºåË¢´Â§öÁßçÊü•ËØ¢ÂºïÊìéÊîØÊåÅÔºàHive„ÄÅImpala„ÄÅDrillÁ≠âÔºâÔºåÂπ∂‰∏îÂÆÉÊòØËØ≠Ë®ÄÂíåÂπ≥Âè∞Êó†ÂÖ≥ÁöÑ„ÄÇParquetÊúÄÂàùÊòØÁî±TwitterÂíåClouderaÂêà‰ΩúÂºÄÂèëÂÆåÊàêÂπ∂ÂºÄÊ∫êÔºå2015Âπ¥5Êúà‰ªéApacheÁöÑÂ≠µÂåñÂô®ÈáåÊØï‰∏öÊàê‰∏∫ApacheÈ°∂Á∫ßÈ°πÁõÆ„ÄÇ ParquetÊúÄÂàùÁöÑÁÅµÊÑüÊù•Ëá™Google‰∫é2010Âπ¥ÂèëË°®ÁöÑDremelËÆ∫ÊñáÔºåÊñá‰∏≠‰ªãÁªç‰∫Ü‰∏ÄÁßçÊîØÊåÅÂµåÂ•óÁªìÊûÑÁöÑÂ≠òÂÇ®Ê†ºÂºèÔºåÂπ∂‰∏î‰ΩøÁî®‰∫ÜÂàóÂºèÂ≠òÂÇ®ÁöÑÊñπÂºèÊèêÂçáÊü•ËØ¢ÊÄßËÉΩÔºåÂú®DremelËÆ∫Êñá‰∏≠Ëøò‰ªãÁªç‰∫ÜGoogleÂ¶Ç‰Ωï‰ΩøÁî®ËøôÁßçÂ≠òÂÇ®Ê†ºÂºèÂÆûÁé∞Âπ∂Ë°åÊü•ËØ¢ÁöÑÔºåÂ¶ÇÊûúÂØπÊ≠§ÊÑüÂÖ¥Ë∂£ÂèØ‰ª•ÂèÇËÄÉËÆ∫ÊñáÂíåÂºÄÊ∫êÂÆûÁé∞Drill„ÄÇ Êï∞ÊçÆÊ®°ÂûãParquetÊîØÊåÅÂµåÂ•óÁöÑÊï∞ÊçÆÊ®°ÂûãÔºåÁ±ª‰ºº‰∫éProtocol BuffersÔºåÊØè‰∏Ä‰∏™Êï∞ÊçÆÊ®°ÂûãÁöÑschemaÂåÖÂê´Â§ö‰∏™Â≠óÊÆµÔºåÊØè‰∏Ä‰∏™Â≠óÊÆµÊúâ‰∏â‰∏™Â±ûÊÄßÔºöÈáçÂ§çÊ¨°Êï∞„ÄÅÊï∞ÊçÆÁ±ªÂûãÂíåÂ≠óÊÆµÂêçÔºåÈáçÂ§çÊ¨°Êï∞ÂèØ‰ª•ÊòØ‰ª•‰∏ã‰∏âÁßçÔºörequired(Âè™Âá∫Áé∞1Ê¨°)Ôºårepeated(Âá∫Áé∞0Ê¨°ÊàñÂ§öÊ¨°)Ôºåoptional(Âá∫Áé∞0Ê¨°Êàñ1Ê¨°)„ÄÇÊØè‰∏Ä‰∏™Â≠óÊÆµÁöÑÊï∞ÊçÆÁ±ªÂûãÂèØ‰ª•ÂàÜÊàê‰∏§ÁßçÔºögroup(Â§çÊùÇÁ±ªÂûã)Âíåprimitive(Âü∫Êú¨Á±ªÂûã)„ÄÇ‰æãÂ¶ÇDremel‰∏≠Êèê‰æõÁöÑDocumentÁöÑschemaÁ§∫‰æãÔºåÂÆÉÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 1234567891011121314message Document &#123; required int64 DocId; optional group Links &#123; repeated int64 Backward; repeated int64 Forward; &#125; repeated group Name &#123; repeated group Language &#123; required string Code; optional string Country; &#125; optional string Url; &#125;&#125; ÂèØ‰ª•ÊääËøô‰∏™SchemaËΩ¨Êç¢ÊàêÊ†ëÁä∂ÁªìÊûÑÔºåÊ†πËäÇÁÇπÂèØ‰ª•ÁêÜËß£‰∏∫repeatedÁ±ªÂûãÔºåÂ¶ÇÂõæ3„ÄÇ Âõæ3 ParquetÁöÑschemaÁªìÊûÑ ÂèØ‰ª•ÁúãÂá∫Âú®Schema‰∏≠ÊâÄÊúâÁöÑÂü∫Êú¨Á±ªÂûãÂ≠óÊÆµÈÉΩÊòØÂè∂Â≠êËäÇÁÇπÔºåÂú®Ëøô‰∏™Schema‰∏≠‰∏ÄÂÖ±Â≠òÂú®6‰∏™Âè∂Â≠êËäÇÁÇπÔºåÂ¶ÇÊûúÊääËøôÊ†∑ÁöÑSchemaËΩ¨Êç¢ÊàêÊâÅÂπ≥ÂºèÁöÑÂÖ≥Á≥ªÊ®°ÂûãÔºåÂ∞±ÂèØ‰ª•ÁêÜËß£‰∏∫ËØ•Ë°®ÂåÖÂê´ÂÖ≠‰∏™Âàó„ÄÇParquet‰∏≠Ê≤°ÊúâMap„ÄÅArrayËøôÊ†∑ÁöÑÂ§çÊùÇÊï∞ÊçÆÁªìÊûÑÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøárepeatedÂíågroupÁªÑÂêàÊù•ÂÆûÁé∞ÁöÑ„ÄÇÁî±‰∫é‰∏ÄÊù°ËÆ∞ÂΩï‰∏≠Êüê‰∏ÄÂàóÂèØËÉΩÂá∫Áé∞Èõ∂Ê¨°ÊàñËÄÖÂ§öÊ¨°ÔºåÈúÄË¶ÅÊ†áÁ§∫Âá∫Âì™‰∫õÂàóÁöÑÂÄºÊûÑÊàê‰∏ÄÊù°ÂÆåÊï¥ÁöÑËÆ∞ÂΩï„ÄÇËøôÊòØÁî±Striping/AssemblyÁÆóÊ≥ïÂÆûÁé∞ÁöÑ„ÄÇ Áî±‰∫éParquetÊîØÊåÅÁöÑÊï∞ÊçÆÊ®°ÂûãÊØîËæÉÊùæÊï£ÔºåÂèØËÉΩ‰∏ÄÊù°ËÆ∞ÂΩï‰∏≠Â≠òÂú®ÊØîËæÉÊ∑±ÁöÑÂµåÂ•óÂÖ≥Á≥ªÔºåÂ¶ÇÊûú‰∏∫ÊØè‰∏ÄÊù°ËÆ∞ÂΩïÈÉΩÁª¥Êä§‰∏Ä‰∏™Á±ª‰ººÁöÑÊ†ëÁä∂ÁªìÂèØËÉΩ‰ºöÂç†Áî®ËæÉÂ§ßÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÂõ†Ê≠§DremelËÆ∫Êñá‰∏≠ÊèêÂá∫‰∫Ü‰∏ÄÁßçÈ´òÊïàÁöÑÂØπ‰∫éÂµåÂ•óÊï∞ÊçÆÊ†ºÂºèÁöÑÂéãÁº©ÁÆóÊ≥ïÔºöStriping/AssemblyÁÆóÊ≥ï„ÄÇÂÆÉÁöÑÂéüÁêÜÊòØÊØè‰∏Ä‰∏™ËÆ∞ÂΩï‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÊàêÂëòÂÄºÊúâ‰∏âÈÉ®ÂàÜÁªÑÊàêÔºöValue„ÄÅRepetition levelÂíåDefinition level„ÄÇvalueËÆ∞ÂΩï‰∫ÜËØ•ÊàêÂëòÁöÑÂéüÂßãÂÄºÔºåÂèØ‰ª•Ê†πÊçÆÁâπÂÆöÁ±ªÂûãÁöÑÂéãÁº©ÁÆóÊ≥ïËøõË°åÂéãÁº©Ôºå‰∏§‰∏™levelÂÄºÁî®‰∫éËÆ∞ÂΩïËØ•ÂÄºÂú®Êï¥‰∏™ËÆ∞ÂΩï‰∏≠ÁöÑ‰ΩçÁΩÆ„ÄÇÂØπ‰∫érepeatedÁ±ªÂûãÁöÑÂàóÔºåRepetition levelÂÄºËÆ∞ÂΩï‰∫ÜÂΩìÂâçÂÄºÂ±û‰∫éÂì™‰∏ÄÊù°ËÆ∞ÂΩï‰ª•ÂèäÂÆÉÂ§Ñ‰∫éËØ•ËÆ∞ÂΩïÁöÑ‰ªÄ‰πà‰ΩçÁΩÆÔºõÂØπ‰∫érepeatedÂíåoptionalÁ±ªÂûãÁöÑÂàóÔºåÂèØËÉΩ‰∏ÄÊù°ËÆ∞ÂΩï‰∏≠Êüê‰∏ÄÂàóÊòØÊ≤°ÊúâÂÄºÁöÑÔºåÂÅáËÆæÊàë‰ª¨‰∏çËÆ∞ÂΩïËøôÊ†∑ÁöÑÂÄºÂ∞±‰ºöÂØºËá¥Êú¨ËØ•Â±û‰∫é‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÁöÑÂÄºË¢´ÂΩìÂÅöÂΩìÂâçËÆ∞ÂΩïÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ªéËÄåÈÄ†ÊàêÊï∞ÊçÆÁöÑÈîôËØØÔºåÂõ†Ê≠§ÂØπ‰∫éËøôÁßçÊÉÖÂÜµÈúÄË¶Å‰∏Ä‰∏™Âç†‰ΩçÁ¨¶Ê†áÁ§∫ËøôÁßçÊÉÖÂÜµ„ÄÇ ÈÄöËøáStriping/AssemblyÁÆóÊ≥ïÔºåparquetÂèØ‰ª•‰ΩøÁî®ËæÉÂ∞ëÁöÑÂ≠òÂÇ®Á©∫Èó¥Ë°®Á§∫Â§çÊùÇÁöÑÂµåÂ•óÊ†ºÂºèÔºåÂπ∂‰∏îÈÄöÂ∏∏Repetition levelÂíåDefinition levelÈÉΩÊòØËæÉÂ∞èÁöÑÊï¥Êï∞ÂÄºÔºåÂèØ‰ª•ÈÄöËøáRLEÁÆóÊ≥ïÂØπÂÖ∂ËøõË°åÂéãÁº©ÔºåËøõ‰∏ÄÊ≠•Èôç‰ΩéÂ≠òÂÇ®Á©∫Èó¥„ÄÇ Êñá‰ª∂ÁªìÊûÑParquetÊñá‰ª∂ÊòØ‰ª•‰∫åËøõÂà∂ÊñπÂºèÂ≠òÂÇ®ÁöÑÔºåÊòØ‰∏çÂèØ‰ª•Áõ¥Êé•ËØªÂèñÂíå‰øÆÊîπÁöÑÔºåParquetÊñá‰ª∂ÊòØËá™Ëß£ÊûêÁöÑÔºåÊñá‰ª∂‰∏≠ÂåÖÊã¨ËØ•Êñá‰ª∂ÁöÑÊï∞ÊçÆÂíåÂÖÉÊï∞ÊçÆ„ÄÇÂú®HDFSÊñá‰ª∂Á≥ªÁªüÂíåParquetÊñá‰ª∂‰∏≠Â≠òÂú®Â¶Ç‰∏ãÂá†‰∏™Ê¶ÇÂøµÔºö HDFSÂùó(Block)ÔºöÂÆÉÊòØHDFS‰∏äÁöÑÊúÄÂ∞èÁöÑÂâØÊú¨Âçï‰ΩçÔºåHDFS‰ºöÊää‰∏Ä‰∏™BlockÂ≠òÂÇ®Âú®Êú¨Âú∞ÁöÑ‰∏Ä‰∏™Êñá‰ª∂Âπ∂‰∏îÁª¥Êä§ÂàÜÊï£Âú®‰∏çÂêåÁöÑÊú∫Âô®‰∏äÁöÑÂ§ö‰∏™ÂâØÊú¨ÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ã‰∏Ä‰∏™BlockÁöÑÂ§ßÂ∞è‰∏∫256M„ÄÅ512MÁ≠â„ÄÇ HDFSÊñá‰ª∂(File)Ôºö‰∏Ä‰∏™HDFSÁöÑÊñá‰ª∂ÔºåÂåÖÊã¨Êï∞ÊçÆÂíåÂÖÉÊï∞ÊçÆÔºåÊï∞ÊçÆÂàÜÊï£Â≠òÂÇ®Âú®Â§ö‰∏™Block‰∏≠„ÄÇ Ë°åÁªÑ(Row Group)ÔºöÊåâÁÖßË°åÂ∞ÜÊï∞ÊçÆÁâ©ÁêÜ‰∏äÂàíÂàÜ‰∏∫Â§ö‰∏™ÂçïÂÖÉÔºåÊØè‰∏Ä‰∏™Ë°åÁªÑÂåÖÂê´‰∏ÄÂÆöÁöÑË°åÊï∞ÔºåÂú®‰∏Ä‰∏™HDFSÊñá‰ª∂‰∏≠Ëá≥Â∞ëÂ≠òÂÇ®‰∏Ä‰∏™Ë°åÁªÑÔºåParquetËØªÂÜôÁöÑÊó∂ÂÄô‰ºöÂ∞ÜÊï¥‰∏™Ë°åÁªÑÁºìÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÊâÄ‰ª•Â¶ÇÊûúÊØè‰∏Ä‰∏™Ë°åÁªÑÁöÑÂ§ßÂ∞èÊòØÁî±ÂÜÖÂ≠òÂ§ßÁöÑÂ∞èÂÜ≥ÂÆöÁöÑ„ÄÇ ÂàóÂùó(Column Chunk)ÔºöÂú®‰∏Ä‰∏™Ë°åÁªÑ‰∏≠ÊØè‰∏ÄÂàó‰øùÂ≠òÂú®‰∏Ä‰∏™ÂàóÂùó‰∏≠ÔºåË°åÁªÑ‰∏≠ÁöÑÊâÄÊúâÂàóËøûÁª≠ÁöÑÂ≠òÂÇ®Âú®Ëøô‰∏™Ë°åÁªÑÊñá‰ª∂‰∏≠„ÄÇ‰∏çÂêåÁöÑÂàóÂùóÂèØËÉΩ‰ΩøÁî®‰∏çÂêåÁöÑÁÆóÊ≥ïËøõË°åÂéãÁº©„ÄÇ È°µ(Page)ÔºöÊØè‰∏Ä‰∏™ÂàóÂùóÂàíÂàÜ‰∏∫Â§ö‰∏™È°µÔºå‰∏Ä‰∏™È°µÊòØÊúÄÂ∞èÁöÑÁºñÁ†ÅÁöÑÂçï‰ΩçÔºåÂú®Âêå‰∏Ä‰∏™ÂàóÂùóÁöÑ‰∏çÂêåÈ°µÂèØËÉΩ‰ΩøÁî®‰∏çÂêåÁöÑÁºñÁ†ÅÊñπÂºè„ÄÇ ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂú®Â≠òÂÇ®ParquetÊï∞ÊçÆÁöÑÊó∂ÂÄô‰ºöÊåâÁÖßHDFSÁöÑBlockÂ§ßÂ∞èËÆæÁΩÆË°åÁªÑÁöÑÂ§ßÂ∞èÔºåÁî±‰∫é‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊØè‰∏Ä‰∏™Mapper‰ªªÂä°Â§ÑÁêÜÊï∞ÊçÆÁöÑÊúÄÂ∞èÂçï‰ΩçÊòØ‰∏Ä‰∏™BlockÔºåËøôÊ†∑ÂèØ‰ª•ÊääÊØè‰∏Ä‰∏™Ë°åÁªÑÁî±‰∏Ä‰∏™Mapper‰ªªÂä°Â§ÑÁêÜÔºåÂ¢ûÂ§ß‰ªªÂä°ÊâßË°åÂπ∂Ë°åÂ∫¶„ÄÇParquetÊñá‰ª∂ÁöÑÊ†ºÂºèÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ Âõæ4 ParquetÊñá‰ª∂ÁªìÊûÑ ‰∏äÂõæÂ±ïÁ§∫‰∫Ü‰∏Ä‰∏™ParquetÊñá‰ª∂ÁöÑÁªìÊûÑÔºå‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÂèØ‰ª•Â≠òÂÇ®Â§ö‰∏™Ë°åÁªÑÔºåÊñá‰ª∂ÁöÑÈ¶ñ‰ΩçÈÉΩÊòØËØ•Êñá‰ª∂ÁöÑMagic CodeÔºåÁî®‰∫éÊ†°È™åÂÆÉÊòØÂê¶ÊòØ‰∏Ä‰∏™ParquetÊñá‰ª∂ÔºåFooter lengthÂ≠òÂÇ®‰∫ÜÊñá‰ª∂ÂÖÉÊï∞ÊçÆÁöÑÂ§ßÂ∞èÔºåÈÄöËøáËØ•ÂÄºÂíåÊñá‰ª∂ÈïøÂ∫¶ÂèØ‰ª•ËÆ°ÁÆóÂá∫ÂÖÉÊï∞ÊçÆÁöÑÂÅèÁßªÈáèÔºåÊñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆ‰∏≠ÂåÖÊã¨ÊØè‰∏Ä‰∏™Ë°åÁªÑÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÂíåÂΩìÂâçÊñá‰ª∂ÁöÑSchema‰ø°ÊÅØ„ÄÇÈô§‰∫ÜÊñá‰ª∂‰∏≠ÊØè‰∏Ä‰∏™Ë°åÁªÑÁöÑÂÖÉÊï∞ÊçÆÔºåÊØè‰∏ÄÈ°µÁöÑÂºÄÂßãÈÉΩ‰ºöÂ≠òÂÇ®ËØ•È°µÁöÑÂÖÉÊï∞ÊçÆÔºåÂú®Parquet‰∏≠ÔºåÊúâ‰∏âÁßçÁ±ªÂûãÁöÑÈ°µÔºöÊï∞ÊçÆÈ°µ„ÄÅÂ≠óÂÖ∏È°µÂíåÁ¥¢ÂºïÈ°µ„ÄÇÊï∞ÊçÆÈ°µÁî®‰∫éÂ≠òÂÇ®ÂΩìÂâçË°åÁªÑ‰∏≠ËØ•ÂàóÁöÑÂÄºÔºåÂ≠óÂÖ∏È°µÂ≠òÂÇ®ËØ•ÂàóÂÄºÁöÑÁºñÁ†ÅÂ≠óÂÖ∏ÔºåÊØè‰∏Ä‰∏™ÂàóÂùó‰∏≠ÊúÄÂ§öÂåÖÂê´‰∏Ä‰∏™Â≠óÂÖ∏È°µÔºåÁ¥¢ÂºïÈ°µÁî®Êù•Â≠òÂÇ®ÂΩìÂâçË°åÁªÑ‰∏ãËØ•ÂàóÁöÑÁ¥¢ÂºïÔºåÁõÆÂâçParquet‰∏≠Ëøò‰∏çÊîØÊåÅÁ¥¢ÂºïÈ°µÔºå‰ΩÜÊòØÂú®ÂêéÈù¢ÁöÑÁâàÊú¨‰∏≠Â¢ûÂä†„ÄÇ Êï∞ÊçÆËÆøÈóÆËØ¥Âà∞ÂàóÂºèÂ≠òÂÇ®ÁöÑ‰ºòÂäøÔºåProject‰∏ãÊé®ÊòØÊó†ÁñëÊúÄÁ™ÅÂá∫ÁöÑÔºåÂÆÉÊÑèÂë≥ÁùÄÂú®Ëé∑ÂèñË°®‰∏≠ÂéüÂßãÊï∞ÊçÆÊó∂Âè™ÈúÄË¶ÅÊâ´ÊèèÊü•ËØ¢‰∏≠ÈúÄË¶ÅÁöÑÂàóÔºåÁî±‰∫éÊØè‰∏ÄÂàóÁöÑÊâÄÊúâÂÄºÈÉΩÊòØËøûÁª≠Â≠òÂÇ®ÁöÑÔºåÈÅøÂÖçÊâ´ÊèèÊï¥‰∏™Ë°®Êñá‰ª∂ÂÜÖÂÆπ„ÄÇ Âú®Parquet‰∏≠ÂéüÁîüÂ∞±ÊîØÊåÅProject‰∏ãÊé®ÔºåÊâßË°åÊü•ËØ¢ÁöÑÊó∂ÂÄôÂèØ‰ª•ÈÄöËøáConfiguration‰º†ÈÄíÈúÄË¶ÅËØªÂèñÁöÑÂàóÁöÑ‰ø°ÊÅØÔºåËøô‰∫õÂàóÂøÖÈ°ªÊòØSchemaÁöÑÂ≠êÈõÜÔºåParquetÊØèÊ¨°‰ºöÊâ´Êèè‰∏Ä‰∏™Row GroupÁöÑÊï∞ÊçÆÔºåÁÑ∂Âêé‰∏ÄÊ¨°ÊÄßÂæóÂ∞ÜËØ•Row GroupÈáåÊâÄÊúâÈúÄË¶ÅÁöÑÂàóÁöÑCloumn ChunkÈÉΩËØªÂèñÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÊØèÊ¨°ËØªÂèñ‰∏Ä‰∏™Row GroupÁöÑÊï∞ÊçÆËÉΩÂ§üÂ§ßÂ§ßÈôç‰ΩéÈöèÊú∫ËØªÁöÑÊ¨°Êï∞ÔºåÈô§Ê≠§‰πãÂ§ñÔºåParquetÂú®ËØªÂèñÁöÑÊó∂ÂÄô‰ºöËÄÉËôëÂàóÊòØÂê¶ËøûÁª≠ÔºåÂ¶ÇÊûúÊüê‰∫õÈúÄË¶ÅÁöÑÂàóÊòØÂ≠òÂÇ®‰ΩçÁΩÆÊòØËøûÁª≠ÁöÑÔºåÈÇ£‰πà‰∏ÄÊ¨°ËØªÊìç‰ΩúÂ∞±ÂèØ‰ª•ÊääÂ§ö‰∏™ÂàóÁöÑÊï∞ÊçÆËØªÂèñÂà∞ÂÜÖÂ≠ò„ÄÇ Âú®Êï∞ÊçÆËÆøÈóÆÁöÑËøáÁ®ã‰∏≠ÔºåParquetËøòÂèØ‰ª•Âà©Áî®ÊØè‰∏Ä‰∏™row groupÁîüÊàêÁöÑÁªüËÆ°‰ø°ÊÅØËøõË°åË∞ìËØç‰∏ãÊé®ÔºåËøôÈÉ®ÂàÜ‰ø°ÊÅØÂåÖÊã¨ËØ•Column ChunkÁöÑÊúÄÂ§ßÂÄº„ÄÅÊúÄÂ∞èÂÄºÂíåÁ©∫ÂÄº‰∏™Êï∞„ÄÇÈÄöËøáËøô‰∫õÁªüËÆ°ÂÄºÂíåËØ•ÂàóÁöÑËøáÊª§Êù°‰ª∂ÂèØ‰ª•Âà§Êñ≠ËØ•Row GroupÊòØÂê¶ÈúÄË¶ÅÊâ´Êèè„ÄÇÂè¶Â§ñParquetÊú™Êù•Ëøò‰ºöÂ¢ûÂä†ËØ∏Â¶ÇBloom FilterÂíåIndexÁ≠â‰ºòÂåñÊï∞ÊçÆÔºåÊõ¥Âä†ÊúâÊïàÁöÑÂÆåÊàêË∞ìËØç‰∏ãÊé®„ÄÇ ORCÊñá‰ª∂Ê†ºÂºèORCÊñá‰ª∂Ê†ºÂºèÊòØ‰∏ÄÁßçHadoopÁîüÊÄÅÂúà‰∏≠ÁöÑÂàóÂºèÂ≠òÂÇ®Ê†ºÂºèÔºåÂÆÉÁöÑ‰∫ßÁîüÊó©Âú®2013Âπ¥ÂàùÔºåÊúÄÂàù‰∫ßÁîüËá™Apache HiveÔºåÁî®‰∫éÈôç‰ΩéHadoopÊï∞ÊçÆÂ≠òÂÇ®Á©∫Èó¥ÂíåÂä†ÈÄüHiveÊü•ËØ¢ÈÄüÂ∫¶„ÄÇÂíåParquetÁ±ª‰ººÔºåÂÆÉÂπ∂‰∏çÊòØ‰∏Ä‰∏™ÂçïÁ∫ØÁöÑÂàóÂºèÂ≠òÂÇ®Ê†ºÂºèÔºå‰ªçÁÑ∂ÊòØÈ¶ñÂÖàÊ†πÊçÆË°åÁªÑÂàÜÂâ≤Êï¥‰∏™Ë°®ÔºåÂú®ÊØè‰∏Ä‰∏™Ë°åÁªÑÂÜÖËøõË°åÊåâÂàóÂ≠òÂÇ®„ÄÇORCÊñá‰ª∂ÊòØËá™ÊèèËø∞ÁöÑÔºåÂÆÉÁöÑÂÖÉÊï∞ÊçÆ‰ΩøÁî®Protocol BuffersÂ∫èÂàóÂåñÔºåÂπ∂‰∏îÊñá‰ª∂‰∏≠ÁöÑÊï∞ÊçÆÂ∞ΩÂèØËÉΩÁöÑÂéãÁº©‰ª•Èôç‰ΩéÂ≠òÂÇ®Á©∫Èó¥ÁöÑÊ∂àËÄóÔºåÁõÆÂâç‰πüË¢´Spark SQL„ÄÅPrestoÁ≠âÊü•ËØ¢ÂºïÊìéÊîØÊåÅÔºå‰ΩÜÊòØImpalaÂØπ‰∫éORCÁõÆÂâçÊ≤°ÊúâÊîØÊåÅÔºå‰ªçÁÑ∂‰ΩøÁî®Parquet‰Ωú‰∏∫‰∏ªË¶ÅÁöÑÂàóÂºèÂ≠òÂÇ®Ê†ºÂºè„ÄÇ2015Âπ¥ORCÈ°πÁõÆË¢´ApacheÈ°πÁõÆÂü∫Èáë‰ºöÊèêÂçá‰∏∫ApacheÈ°∂Á∫ßÈ°πÁõÆ„ÄÇ Êï∞ÊçÆÊ®°ÂûãÂíåParquet‰∏çÂêåÔºåORCÂéüÁîüÊòØ‰∏çÊîØÊåÅÂµåÂ•óÊï∞ÊçÆÊ†ºÂºèÁöÑÔºåËÄåÊòØÈÄöËøáÂØπÂ§çÊùÇÊï∞ÊçÆÁ±ªÂûãÁâπÊÆäÂ§ÑÁêÜÁöÑÊñπÂºèÂÆûÁé∞ÂµåÂ•óÊ†ºÂºèÁöÑÊîØÊåÅÔºå‰æãÂ¶ÇÂØπ‰∫éÂ¶Ç‰∏ãÁöÑhiveË°®Ôºö 12345CREATE TABLE `orcStructTable`( `name` string, `course` struct&lt;course:string,score:int&gt;, `score` map&lt;string,int&gt;, `work_locations` array&lt;string&gt;) Âõæ5 ORCÁöÑschemaÁªìÊûÑ Âú®ORCÁöÑÁªìÊûÑ‰∏≠Ëøô‰∏™schemaÂåÖÂê´10‰∏™columnÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÂ§çÊùÇÁ±ªÂûãÂàóÂíåÂéüÂßãÁ±ªÂûãÁöÑÂàóÔºåÂâçËÄÖÂåÖÊã¨LIST„ÄÅSTRUCT„ÄÅMAPÂíåUNIONÁ±ªÂûãÔºåÂêéËÄÖÂåÖÊã¨BOOLEAN„ÄÅÊï¥Êï∞„ÄÅÊµÆÁÇπÊï∞„ÄÅÂ≠óÁ¨¶‰∏≤Á±ªÂûãÁ≠âÔºåÂÖ∂‰∏≠STRUCTÁöÑÂ≠©Â≠êËäÇÁÇπÂåÖÊã¨ÂÆÉÁöÑÊàêÂëòÂèòÈáèÔºåÂèØËÉΩÊúâÂ§ö‰∏™Â≠©Â≠êËäÇÁÇπÔºåMAPÊúâ‰∏§‰∏™Â≠©Â≠êËäÇÁÇπÔºåÂàÜÂà´‰∏∫keyÂíåvalueÔºåLISTÂåÖÂê´‰∏Ä‰∏™Â≠©Â≠êËäÇÁÇπÔºåÁ±ªÂûã‰∏∫ËØ•LISTÁöÑÊàêÂëòÁ±ªÂûãÔºåUNION‰∏ÄËà¨‰∏çÊÄé‰πàÁî®ÂæóÂà∞„ÄÇÊØè‰∏Ä‰∏™SchemaÊ†ëÁöÑÊ†πËäÇÁÇπ‰∏∫‰∏Ä‰∏™StructÁ±ªÂûãÔºåÊâÄÊúâÁöÑcolumnÊåâÁÖßÊ†ëÁöÑ‰∏≠Â∫èÈÅçÂéÜÈ°∫Â∫èÁºñÂè∑„ÄÇ ORCÂè™ÈúÄË¶ÅÂ≠òÂÇ®schemaÊ†ë‰∏≠Âè∂Â≠êËäÇÁÇπÁöÑÂÄºÔºåËÄå‰∏≠Èó¥ÁöÑÈùûÂè∂Â≠êËäÇÁÇπÂè™ÊòØÂÅö‰∏ÄÂ±Ç‰ª£ÁêÜÔºåÂÆÉ‰ª¨Âè™ÈúÄË¶ÅË¥üË¥£Â≠©Â≠êËäÇÁÇπÂÄºÂæóËØªÂèñÔºåÂè™ÊúâÁúüÊ≠£ÁöÑÂè∂Â≠êËäÇÁÇπÊâç‰ºöËØªÂèñÊï∞ÊçÆÔºåÁÑ∂Âêé‰∫§Áî±Áà∂ËäÇÁÇπÂ∞ÅË£ÖÊàêÂØπÂ∫îÁöÑÊï∞ÊçÆÁªìÊûÑËøîÂõû„ÄÇ Êñá‰ª∂ÁªìÊûÑÂíåParquetÁ±ª‰ººÔºåORCÊñá‰ª∂‰πüÊòØ‰ª•‰∫åËøõÂà∂ÊñπÂºèÂ≠òÂÇ®ÁöÑÔºåÊâÄ‰ª•ÊòØ‰∏çÂèØ‰ª•Áõ¥Êé•ËØªÂèñÔºåORCÊñá‰ª∂‰πüÊòØËá™Ëß£ÊûêÁöÑÔºåÂÆÉÂåÖÂê´ËÆ∏Â§öÁöÑÂÖÉÊï∞ÊçÆÔºåËøô‰∫õÂÖÉÊï∞ÊçÆÈÉΩÊòØÂêåÊûÑProtoBufferËøõË°åÂ∫èÂàóÂåñÁöÑ„ÄÇORCÁöÑÊñá‰ª∂ÁªìÊûÑÂÖ•Âõæ6ÔºåÂÖ∂‰∏≠Ê∂âÂèäÂà∞Â¶Ç‰∏ãÁöÑÊ¶ÇÂøµÔºö ORCÊñá‰ª∂Ôºö‰øùÂ≠òÂú®Êñá‰ª∂Á≥ªÁªü‰∏äÁöÑÊôÆÈÄö‰∫åËøõÂà∂Êñá‰ª∂Ôºå‰∏Ä‰∏™ORCÊñá‰ª∂‰∏≠ÂèØ‰ª•ÂåÖÂê´Â§ö‰∏™stripeÔºåÊØè‰∏Ä‰∏™stripeÂåÖÂê´Â§öÊù°ËÆ∞ÂΩïÔºåËøô‰∫õËÆ∞ÂΩïÊåâÁÖßÂàóËøõË°åÁã¨Á´ãÂ≠òÂÇ®ÔºåÂØπÂ∫îÂà∞Parquet‰∏≠ÁöÑrow groupÁöÑÊ¶ÇÂøµ„ÄÇ Êñá‰ª∂Á∫ßÂÖÉÊï∞ÊçÆÔºöÂåÖÊã¨Êñá‰ª∂ÁöÑÊèèËø∞‰ø°ÊÅØPostScript„ÄÅÊñá‰ª∂meta‰ø°ÊÅØÔºàÂåÖÊã¨Êï¥‰∏™Êñá‰ª∂ÁöÑÁªüËÆ°‰ø°ÊÅØÔºâ„ÄÅÊâÄÊúâstripeÁöÑ‰ø°ÊÅØÂíåÊñá‰ª∂schema‰ø°ÊÅØ„ÄÇ stripeÔºö‰∏ÄÁªÑË°åÂΩ¢Êàê‰∏Ä‰∏™stripeÔºåÊØèÊ¨°ËØªÂèñÊñá‰ª∂ÊòØ‰ª•Ë°åÁªÑ‰∏∫Âçï‰ΩçÁöÑÔºå‰∏ÄËà¨‰∏∫HDFSÁöÑÂùóÂ§ßÂ∞èÔºå‰øùÂ≠ò‰∫ÜÊØè‰∏ÄÂàóÁöÑÁ¥¢ÂºïÂíåÊï∞ÊçÆ„ÄÇ stripeÂÖÉÊï∞ÊçÆÔºö‰øùÂ≠òstripeÁöÑ‰ΩçÁΩÆ„ÄÅÊØè‰∏Ä‰∏™ÂàóÁöÑÂú®ËØ•stripeÁöÑÁªüËÆ°‰ø°ÊÅØ‰ª•ÂèäÊâÄÊúâÁöÑstreamÁ±ªÂûãÂíå‰ΩçÁΩÆ„ÄÇ row groupÔºöÁ¥¢ÂºïÁöÑÊúÄÂ∞èÂçï‰ΩçÔºå‰∏Ä‰∏™stripe‰∏≠ÂåÖÂê´Â§ö‰∏™row groupÔºåÈªòËÆ§‰∏∫10000‰∏™ÂÄºÁªÑÊàê„ÄÇ streamÔºö‰∏Ä‰∏™streamË°®Á§∫Êñá‰ª∂‰∏≠‰∏ÄÊÆµÊúâÊïàÁöÑÊï∞ÊçÆÔºåÂåÖÊã¨Á¥¢ÂºïÂíåÊï∞ÊçÆ‰∏§Á±ª„ÄÇÁ¥¢Âºïstream‰øùÂ≠òÊØè‰∏Ä‰∏™row groupÁöÑ‰ΩçÁΩÆÂíåÁªüËÆ°‰ø°ÊÅØÔºåÊï∞ÊçÆstreamÂåÖÊã¨Â§öÁßçÁ±ªÂûãÁöÑÊï∞ÊçÆÔºåÂÖ∑‰ΩìÈúÄË¶ÅÂì™Âá†ÁßçÊòØÁî±ËØ•ÂàóÁ±ªÂûãÂíåÁºñÁ†ÅÊñπÂºèÂÜ≥ÂÆö„ÄÇ Âõæ6 ORCÊñá‰ª∂ÁªìÊûÑ Âú®ORCÊñá‰ª∂‰∏≠‰øùÂ≠ò‰∫Ü‰∏â‰∏™Â±ÇÁ∫ßÁöÑÁªüËÆ°‰ø°ÊÅØÔºåÂàÜÂà´‰∏∫Êñá‰ª∂Á∫ßÂà´„ÄÅstripeÁ∫ßÂà´Âíårow groupÁ∫ßÂà´ÁöÑÔºå‰ªñ‰ª¨ÈÉΩÂèØ‰ª•Áî®Êù•Ê†πÊçÆSearch ARGumentsÔºàË∞ìËØç‰∏ãÊé®Êù°‰ª∂ÔºâÂà§Êñ≠ÊòØÂê¶ÂèØ‰ª•Ë∑≥ËøáÊüê‰∫õÊï∞ÊçÆÔºåÂú®ÁªüËÆ°‰ø°ÊÅØ‰∏≠ÈÉΩÂåÖÂê´ÊàêÂëòÊï∞ÂíåÊòØÂê¶ÊúânullÂÄºÔºåÂπ∂‰∏îÂØπ‰∫é‰∏çÂêåÁ±ªÂûãÁöÑÊï∞ÊçÆËÆæÁΩÆ‰∏Ä‰∫õÁâπÂÆöÁöÑÁªüËÆ°‰ø°ÊÅØ„ÄÇ Êï∞ÊçÆËÆøÈóÆËØªÂèñORCÊñá‰ª∂ÊòØ‰ªéÂ∞æÈÉ®ÂºÄÂßãÁöÑÔºåÁ¨¨‰∏ÄÊ¨°ËØªÂèñ16KBÁöÑÂ§ßÂ∞èÔºåÂ∞ΩÂèØËÉΩÁöÑÂ∞ÜPostscriptÂíåFooterÊï∞ÊçÆÈÉΩËØªÂÖ•ÂÜÖÂ≠ò„ÄÇÊñá‰ª∂ÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠óËäÇ‰øùÂ≠òÁùÄPostScriptÁöÑÈïøÂ∫¶ÔºåÂÆÉÁöÑÈïøÂ∫¶‰∏ç‰ºöË∂ÖËøá256Â≠óËäÇÔºåPostScript‰∏≠‰øùÂ≠òÁùÄÊï¥‰∏™Êñá‰ª∂ÁöÑÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåÂÆÉÂåÖÊã¨Êñá‰ª∂ÁöÑÂéãÁº©Ê†ºÂºè„ÄÅÊñá‰ª∂ÂÜÖÈÉ®ÊØè‰∏Ä‰∏™ÂéãÁº©ÂùóÁöÑÊúÄÂ§ßÈïøÂ∫¶(ÊØèÊ¨°ÂàÜÈÖçÂÜÖÂ≠òÁöÑÂ§ßÂ∞è)„ÄÅFooterÈïøÂ∫¶Ôºå‰ª•Âèä‰∏Ä‰∫õÁâàÊú¨‰ø°ÊÅØ„ÄÇÂú®PostscriptÂíåFooter‰πãÈó¥Â≠òÂÇ®ÁùÄÊï¥‰∏™Êñá‰ª∂ÁöÑÁªüËÆ°‰ø°ÊÅØ(‰∏äÂõæ‰∏≠Êú™ÁîªÂá∫)ÔºåËøôÈÉ®ÂàÜÁöÑÁªüËÆ°‰ø°ÊÅØÂåÖÊã¨ÊØè‰∏Ä‰∏™stripe‰∏≠ÊØè‰∏ÄÂàóÁöÑ‰ø°ÊÅØÔºå‰∏ªË¶ÅÁªüËÆ°ÊàêÂëòÊï∞„ÄÅÊúÄÂ§ßÂÄº„ÄÅÊúÄÂ∞èÂÄº„ÄÅÊòØÂê¶ÊúâÁ©∫ÂÄºÁ≠â„ÄÇ Êé•‰∏ãÊù•ËØªÂèñÊñá‰ª∂ÁöÑFooter‰ø°ÊÅØÔºåÂÆÉÂåÖÂê´‰∫ÜÊØè‰∏Ä‰∏™stripeÁöÑÈïøÂ∫¶ÂíåÂÅèÁßªÈáèÔºåËØ•Êñá‰ª∂ÁöÑschema‰ø°ÊÅØ(Â∞ÜschemaÊ†ëÊåâÁÖßschema‰∏≠ÁöÑÁºñÂè∑‰øùÂ≠òÂú®Êï∞ÁªÑ‰∏≠)„ÄÅÊï¥‰∏™Êñá‰ª∂ÁöÑÁªüËÆ°‰ø°ÊÅØ‰ª•ÂèäÊØè‰∏Ä‰∏™row groupÁöÑË°åÊï∞„ÄÇ Â§ÑÁêÜstripeÊó∂È¶ñÂÖà‰ªéFooter‰∏≠Ëé∑ÂèñÊØè‰∏Ä‰∏™stripeÁöÑÂÖ∂ÂÆû‰ΩçÁΩÆÂíåÈïøÂ∫¶„ÄÅÊØè‰∏Ä‰∏™stripeÁöÑFooterÊï∞ÊçÆ(ÂÖÉÊï∞ÊçÆÔºåËÆ∞ÂΩï‰∫ÜindexÂíådataÁöÑÁöÑÈïøÂ∫¶)ÔºåÊï¥‰∏™striperË¢´ÂàÜ‰∏∫indexÂíådata‰∏§ÈÉ®ÂàÜÔºåstripeÂÜÖÈÉ®ÊòØÊåâÁÖßrow groupËøõË°åÂàÜÂùóÁöÑ(ÊØè‰∏Ä‰∏™row group‰∏≠Â§öÂ∞ëÊù°ËÆ∞ÂΩïÂú®Êñá‰ª∂ÁöÑFooter‰∏≠Â≠òÂÇ®)Ôºårow groupÂÜÖÈÉ®ÊåâÂàóÂ≠òÂÇ®„ÄÇÊØè‰∏Ä‰∏™row groupÁî±Â§ö‰∏™stream‰øùÂ≠òÊï∞ÊçÆÂíåÁ¥¢Âºï‰ø°ÊÅØ„ÄÇÊØè‰∏Ä‰∏™streamÁöÑÊï∞ÊçÆ‰ºöÊ†πÊçÆËØ•ÂàóÁöÑÁ±ªÂûã‰ΩøÁî®ÁâπÂÆöÁöÑÂéãÁº©ÁÆóÊ≥ï‰øùÂ≠ò„ÄÇÂú®ORC‰∏≠Â≠òÂú®Â¶Ç‰∏ãÂá†ÁßçstreamÁ±ªÂûãÔºö PRESENTÔºöÊØè‰∏Ä‰∏™ÊàêÂëòÂÄºÂú®Ëøô‰∏™stream‰∏≠‰øùÊåÅ‰∏Ä‰Ωç(bit)Áî®‰∫éÊ†áÁ§∫ËØ•ÂÄºÊòØÂê¶‰∏∫NULLÔºåÈÄöËøáÂÆÉÂèØ‰ª•Âè™ËÆ∞ÂΩïÈÉ®‰ΩçNULLÁöÑÂÄº DATAÔºöËØ•ÂàóÁöÑ‰∏≠Â±û‰∫éÂΩìÂâçstripeÁöÑÊàêÂëòÂÄº„ÄÇ LENGTHÔºöÊØè‰∏Ä‰∏™ÊàêÂëòÁöÑÈïøÂ∫¶ÔºåËøô‰∏™ÊòØÈíàÂØπstringÁ±ªÂûãÁöÑÂàóÊâçÊúâÁöÑ„ÄÇ DICTIONARY_DATAÔºöÂØπstringÁ±ªÂûãÊï∞ÊçÆÁºñÁ†Å‰πãÂêéÂ≠óÂÖ∏ÁöÑÂÜÖÂÆπ„ÄÇ SECONDARYÔºöÂ≠òÂÇ®Decimal„ÄÅtimestampÁ±ªÂûãÁöÑÂ∞èÊï∞ÊàñËÄÖÁ∫≥ÁßíÊï∞Á≠â„ÄÇ ROW_INDEXÔºö‰øùÂ≠òstripe‰∏≠ÊØè‰∏Ä‰∏™row groupÁöÑÁªüËÆ°‰ø°ÊÅØÂíåÊØè‰∏Ä‰∏™row groupËµ∑Âßã‰ΩçÁΩÆ‰ø°ÊÅØ„ÄÇ Âú®ÂàùÂßãÂåñÈò∂ÊÆµËé∑ÂèñÂÖ®ÈÉ®ÁöÑÂÖÉÊï∞ÊçÆ‰πãÂêéÔºåÂèØ‰ª•ÈÄöËøáincludesÊï∞ÁªÑÊåáÂÆöÈúÄË¶ÅËØªÂèñÁöÑÂàóÁºñÂè∑ÔºåÂÆÉÊòØ‰∏Ä‰∏™booleanÊï∞ÁªÑÔºåÂ¶ÇÊûú‰∏çÊåáÂÆöÂàôËØªÂèñÂÖ®ÈÉ®ÁöÑÂàóÔºåËøòÂèØ‰ª•ÈÄöËøá‰º†ÈÄíSearchArgumentÂèÇÊï∞ÊåáÂÆöËøáÊª§Êù°‰ª∂ÔºåÊ†πÊçÆÂÖÉÊï∞ÊçÆÈ¶ñÂÖàËØªÂèñÊØè‰∏Ä‰∏™stripe‰∏≠ÁöÑindex‰ø°ÊÅØÔºåÁÑ∂ÂêéÊ†πÊçÆindex‰∏≠ÁªüËÆ°‰ø°ÊÅØ‰ª•ÂèäSearchArgumentÂèÇÊï∞Á°ÆÂÆöÈúÄË¶ÅËØªÂèñÁöÑrow groupÁºñÂè∑ÔºåÂÜçÊ†πÊçÆincludesÊï∞ÊçÆÂÜ≥ÂÆöÈúÄË¶Å‰ªéËøô‰∫õrow group‰∏≠ËØªÂèñÁöÑÂàóÔºåÈÄöËøáËøô‰∏§Â±ÇÁöÑËøáÊª§ÈúÄË¶ÅËØªÂèñÁöÑÊï∞ÊçÆÂè™ÊòØÊï¥‰∏™stripeÂ§ö‰∏™Â∞èÊÆµÁöÑÂå∫Èó¥ÔºåÁÑ∂ÂêéORC‰ºöÂ∞ΩÂèØËÉΩÂêàÂπ∂Â§ö‰∏™Á¶ªÊï£ÁöÑÂå∫Èó¥Â∞ΩÂèØËÉΩÁöÑÂáèÂ∞ëI/OÊ¨°Êï∞„ÄÇÁÑ∂ÂêéÂÜçÊ†πÊçÆindex‰∏≠‰øùÂ≠òÁöÑ‰∏ã‰∏Ä‰∏™row groupÁöÑ‰ΩçÁΩÆ‰ø°ÊÅØË∞ÉËá≥ËØ•stripe‰∏≠Á¨¨‰∏Ä‰∏™ÈúÄË¶ÅËØªÂèñÁöÑrow group‰∏≠„ÄÇ Áî±‰∫éORC‰∏≠‰ΩøÁî®‰∫ÜÊõ¥Âä†Á≤æÁ°ÆÁöÑÁ¥¢Âºï‰ø°ÊÅØÔºå‰ΩøÂæóÂú®ËØªÂèñÊï∞ÊçÆÊó∂ÂèØ‰ª•ÊåáÂÆö‰ªé‰ªªÊÑè‰∏ÄË°åÂºÄÂßãËØªÂèñÔºåÊõ¥ÁªÜÁ≤íÂ∫¶ÁöÑÁªüËÆ°‰ø°ÊÅØ‰ΩøÂæóËØªÂèñORCÊñá‰ª∂Ë∑≥ËøáÊï¥‰∏™row groupÔºåORCÈªòËÆ§‰ºöÂØπ‰ªª‰Ωï‰∏ÄÂùóÊï∞ÊçÆÂíåÁ¥¢Âºï‰ø°ÊÅØ‰ΩøÁî®ZLIBÂéãÁº©ÔºåÂõ†Ê≠§ORCÊñá‰ª∂Âç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥‰πüÊõ¥Â∞èÔºåËøôÁÇπÂú®ÂêéÈù¢ÁöÑÊµãËØïÂØπÊØî‰∏≠‰πüÊúâÊâÄÂç∞ËØÅ„ÄÇ Âú®Êñ∞ÁâàÊú¨ÁöÑORC‰∏≠‰πüÂä†ÂÖ•‰∫ÜÂØπBloom FilterÁöÑÊîØÊåÅÔºåÂÆÉÂèØ‰ª•Ëøõ‰∏ÄÊ≠•ÊèêÂçáË∞ìËØç‰∏ãÊé®ÁöÑÊïàÁéáÔºåÂú®Hive 1.2.0ÁâàÊú¨‰ª•Âêé‰πüÂä†ÂÖ•‰∫ÜÂØπÊ≠§ÁöÑÊîØÊåÅ„ÄÇ ÊÄßËÉΩÊµãËØï‰∏∫‰∫ÜÂØπÊØîÊµãËØï‰∏§ÁßçÂ≠òÂÇ®Ê†ºÂºèÔºåÊàëÈÄâÊã©‰ΩøÁî®TPC-DSÊï∞ÊçÆÈõÜÂπ∂‰∏îÂØπÂÆÉËøõË°åÊîπÈÄ†‰ª•ÁîüÊàêÂÆΩË°®„ÄÅÂµåÂ•óÂíåÂ§öÂ±ÇÂµåÂ•óÁöÑÊï∞ÊçÆ„ÄÇ‰ΩøÁî®ÊúÄÂ∏∏Áî®ÁöÑHive‰Ωú‰∏∫SQLÂºïÊìéËøõË°åÊµãËØï„ÄÇ ÊµãËØïÁéØÂ¢É HadoopÈõÜÁæ§ÔºöÁâ©ÁêÜÊµãËØïÈõÜÁæ§ÔºåÂõõÂè∞DataNode/NodeManagerÊú∫Âô®ÔºåÊØè‰∏™Êú∫Âô®32core+128GBÔºåÊµãËØïÊó∂‰ΩøÁî®Êï¥‰∏™ÈõÜÁæ§ÁöÑËµÑÊ∫ê„ÄÇ HiveÔºöHive 1.2.1ÁâàÊú¨Ôºå‰ΩøÁî®hiveserver2ÂêØÂä®ÔºåÊú¨Êú∫MySql‰Ωú‰∏∫ÂÖÉÊï∞ÊçÆÂ∫ìÔºåjdbcÊñπÂºèÊèê‰∫§Êü•ËØ¢SQL Êï∞ÊçÆÈõÜÔºö100GB TPC-DSÊï∞ÊçÆÈõÜÔºåÈÄâÂèñÂÖ∂‰∏≠ÁöÑStore_Sales‰∏∫‰∫ãÂÆûË°®ÁöÑÊ®°Âûã‰Ωú‰∏∫ÊµãËØïÊï∞ÊçÆ Êü•ËØ¢SQLÔºöÈÄâÊã©TPC-DS‰∏≠Ê∂âÂèäÂà∞‰∏äËø∞Ê®°ÂûãÁöÑ10Êù°SQLÂπ∂ÂØπÂÖ∂ËøõË°åÊîπÈÄ†„ÄÇ ÊµãËØïÂú∫ÊôØÂíåÁªìÊûúÊï¥‰∏™ÊµãËØïËÆæÁΩÆ‰∫ÜÂõõÁßçÂú∫ÊôØÔºåÊØè‰∏ÄÁßçÂú∫ÊôØ‰∏ãÂØπÊØîÊµãËØïÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÂíåÁõ∏ÂêåÊü•ËØ¢ÊâßË°åÊ∂àËÄóÁöÑÊó∂Èó¥ÂØπÊØîÔºåÈô§‰∫ÜÂú∫ÊôØ‰∏ÄÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜÂ§ñÔºåÂÖ∂‰ΩôÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶ÅËøõË°åÊï∞ÊçÆÂØºÂÖ•ÔºåÂêåÊó∂ÂØπÊØîËøôÂá†‰∏™Âú∫ÊôØÁöÑÊï∞ÊçÆÂØºÂÖ•Êó∂Èó¥„ÄÇ Âú∫ÊôØ‰∏ÄÔºö‰∏Ä‰∏™‰∫ãÂÆûË°®„ÄÅÂ§ö‰∏™Áª¥Â∫¶Ë°®ÔºåÂ§çÊùÇÁöÑjoinÊü•ËØ¢„ÄÇÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜ„ÄÇ Store_SalesË°®ËÆ∞ÂΩïÊï∞Ôºö287,997,024ÔºåË°®Â§ßÂ∞è‰∏∫Ôºö ÂéüÂßãTextÊ†ºÂºèÔºåÊú™ÂéãÁº© : 38.1 G ORCÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº©ÔºàZLIBÔºâ,‰∏ÄÂÖ±1800+‰∏™ÂàÜÂå∫ : 11.5 G ParquetÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº©ÔºàSnappyÔºâÔºå‰∏ÄÂÖ±1800+‰∏™ÂàÜÂå∫ Ôºö 14.8 G Êü•ËØ¢ÊµãËØïÁªìÊûúÔºö Âú∫ÊôØ‰∫åÔºöÁª¥Â∫¶Ë°®Âíå‰∫ãÂÆûË°®join‰πãÂêéÁîüÊàêÁöÑÂÆΩË°®ÔºåÂè™Âú®‰∏Ä‰∏™Ë°®‰∏äÂÅöÊü•ËØ¢„ÄÇÊï¥‰∏™ÊµãËØïËÆæÁΩÆ‰∫ÜÂõõÁßçÂú∫ÊôØÔºåÊØè‰∏ÄÁßçÂú∫ÊôØ‰∏ãÂØπÊØîÊµãËØïÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÂíåÁõ∏ÂêåÊü•ËØ¢ÊâßË°åÊ∂àËÄóÁöÑÊó∂Èó¥ÂØπÊØîÔºåÈô§‰∫ÜÂú∫ÊôØ‰∏ÄÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜÂ§ñÔºåÂÖ∂‰ΩôÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶ÅËøõË°åÊï∞ÊçÆÂØºÂÖ•ÔºåÂêåÊó∂ÂØπÊØîËøôÂá†‰∏™Âú∫ÊôØÁöÑÊï∞ÊçÆÂØºÂÖ•Êó∂Èó¥„ÄÇÈÄâÂèñÊï∞ÊçÆÊ®°Âûã‰∏≠ÁöÑstore_sales, household_demographics, customer_address, date_dim, storeË°®ÁîüÊàê‰∏Ä‰∏™ÊâÅÂπ≥ÂºèÂÆΩË°®(store_sales_wide_table)ÔºåÂü∫‰∫éËøô‰∏™Ë°®ÊâßË°åÊü•ËØ¢ÔºåÁî±‰∫éÂú∫ÊôØ‰∏ÄÁßçÈÄâÊã©ÁöÑqueryÂ§ßÂ§öÊï∞‰∏çËÉΩÂÆåÂÖ®matchÂà∞Ëøô‰∏™ÂÆΩË°®ÔºåÊâÄ‰ª•ÂØπÂú∫ÊôØ1‰∏≠ÁöÑSQLËøõË°åÈÉ®ÂàÜÊîπÈÄ†„ÄÇ store_sales_wide_tableË°®ËÆ∞ÂΩïÊï∞Ôºö263,704,266ÔºåË°®Â§ßÂ∞è‰∏∫Ôºö ÂéüÂßãTextÊ†ºÂºèÔºåÊú™ÂéãÁº© Ôºö 149.0 G ORCÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 10.6 G PARQUETÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 12.5 G Êü•ËØ¢ÊµãËØïÁªìÊûúÔºö Âú∫ÊôØ‰∏âÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÁªÑÊàêÁöÑÂÆΩË°®Ôºåstruct„ÄÅlist„ÄÅmapÁ≠âÔºà1Â±ÇÔºâÊï¥‰∏™ÊµãËØïËÆæÁΩÆ‰∫ÜÂõõÁßçÂú∫ÊôØÔºåÊØè‰∏ÄÁßçÂú∫ÊôØ‰∏ãÂØπÊØîÊµãËØïÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÂíåÁõ∏ÂêåÊü•ËØ¢ÊâßË°åÊ∂àËÄóÁöÑÊó∂Èó¥ÂØπÊØîÔºåÈô§‰∫ÜÂú∫ÊôØ‰∏ÄÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜÂ§ñÔºåÂÖ∂‰ΩôÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶ÅËøõË°åÊï∞ÊçÆÂØºÂÖ•ÔºåÂêåÊó∂ÂØπÊØîËøôÂá†‰∏™Âú∫ÊôØÁöÑÊï∞ÊçÆÂØºÂÖ•Êó∂Èó¥„ÄÇÂú®Âú∫ÊôØ‰∫åÁöÑÂü∫Á°Ä‰∏äÔºåÂ∞ÜÁª¥Â∫¶Ë°®ÔºàÈô§‰∫Üstore_salesË°®ÔºâËΩ¨Êç¢Êàê‰∏Ä‰∏™structÊàñËÄÖmapÂØπË±°ÔºåÊ∫êstore_salesË°®‰∏≠ÁöÑÂ≠óÊÆµ‰øùÊåÅ‰∏çÂèò„ÄÇÁîüÊàêÊúâ‰∏ÄÂ±ÇÂµåÂ•óÁöÑÊñ∞Ë°®Ôºàstore_sales_wide_table_one_nestedÔºâÔºå‰ΩøÁî®ÁöÑÊü•ËØ¢ÈÄªËæëÁõ∏Âêå„ÄÇ store_sales_wide_table_one_nestedË°®ËÆ∞ÂΩïÊï∞Ôºö263,704,266ÔºåË°®Â§ßÂ∞è‰∏∫Ôºö ÂéüÂßãTextÊ†ºÂºèÔºåÊú™ÂéãÁº© Ôºö 245.3 G ORCÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 10.9 G PARQUETÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 29.8 G Êü•ËØ¢ÊµãËØïÁªìÊûúÔºö Âú∫ÊôØÂõõÔºöÂ§çÊùÇÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÂ§öÂ±ÇÂµåÂ•ó„ÄÇÔºà3Â±ÇÔºâÊï¥‰∏™ÊµãËØïËÆæÁΩÆ‰∫ÜÂõõÁßçÂú∫ÊôØÔºåÊØè‰∏ÄÁßçÂú∫ÊôØ‰∏ãÂØπÊØîÊµãËØïÊï∞ÊçÆÂç†Áî®ÁöÑÂ≠òÂÇ®Á©∫Èó¥ÁöÑÂ§ßÂ∞èÂíåÁõ∏ÂêåÊü•ËØ¢ÊâßË°åÊ∂àËÄóÁöÑÊó∂Èó¥ÂØπÊØîÔºåÈô§‰∫ÜÂú∫ÊôØ‰∏ÄÂü∫‰∫éÂéüÂßãÁöÑTPC-DSÊï∞ÊçÆÈõÜÂ§ñÔºåÂÖ∂‰ΩôÁöÑÊï∞ÊçÆÈÉΩÈúÄË¶ÅËøõË°åÊï∞ÊçÆÂØºÂÖ•ÔºåÂêåÊó∂ÂØπÊØîËøôÂá†‰∏™Âú∫ÊôØÁöÑÊï∞ÊçÆÂØºÂÖ•Êó∂Èó¥„ÄÇÂú®Âú∫ÊôØ‰∏âÁöÑÂü∫Á°Ä‰∏äÔºåÂ∞ÜÈÉ®ÂàÜÁª¥Â∫¶Ë°®ÁöÑstructÂÜÖÁöÑÂ≠óÊÆµÂÜçËΩ¨Êç¢ÊàêstructÊàñËÄÖmapÂØπË±°ÔºåÂè™Â≠òÂú®struct‰∏≠ÂµåÂ•ómapÁöÑÊÉÖÂÜµÔºåÊúÄÊ∑±ÁöÑÂµåÂ•ó‰∏∫‰∏âÂ±Ç„ÄÇÁîüÊàê‰∏Ä‰∏™Â§öÂ±ÇÂµåÂ•óÁöÑÊñ∞Ë°®Ôºàstore_sales_wide_table_more_nestedÔºâÔºå‰ΩøÁî®ÁöÑÊü•ËØ¢ÈÄªËæëÁõ∏Âêå„ÄÇ ËØ•Âú∫ÊôØ‰∏≠Âè™Ê∂âÂèä‰∏Ä‰∏™Â§öÂ±ÇÂµåÂ•óÁöÑÂÆΩË°®ÔºåÊ≤°Êúâ‰ªª‰ΩïÂàÜÂå∫Â≠óÊÆµÔºåstore_sales_wide_table_more_nestedË°®ËÆ∞ÂΩïÊï∞Ôºö263,704,266ÔºåË°®Â§ßÂ∞è‰∏∫Ôºö ÂéüÂßãTextÊ†ºÂºèÔºåÊú™ÂéãÁº© Ôºö 222.7 G ORCÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 10.9 G PARQUETÊ†ºÂºèÔºåÈªòËÆ§ÂéãÁº© Ôºö 23.1 G ÊØî‰∏ÄÂ±ÇÂµåÂ•óË°®store_sales_wide_table_one_nestedË¶ÅÂ∞èÔºü Êü•ËØ¢ÊµãËØïÁªìÊûúÔºö ÁªìÊûúÂàÜÊûê‰ªé‰∏äËø∞ÊµãËØïÁªìÊûúÊù•ÁúãÔºåÊòüÁä∂Ê®°ÂûãÂØπ‰∫éÊï∞ÊçÆÂàÜÊûêÂú∫ÊôØÂπ∂‰∏çÊòØÂæàÂêàÈÄÇÔºåÂ§ö‰∏™Ë°®ÁöÑjoin‰ºöÂ§ßÂ§ßÊãñÊÖ¢Êü•ËØ¢ÈÄüÂ∫¶ÔºåÂπ∂‰∏î‰∏çËÉΩÂæàÂ•ΩÁöÑÂà©Áî®ÂàóÂºèÂ≠òÂÇ®Â∏¶Êù•ÁöÑÊÄßËÉΩÊèêÂçáÔºåÂú®‰ΩøÁî®ÂÆΩË°®ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂàóÂºèÂ≠òÂÇ®ÁöÑÊÄßËÉΩÊèêÂçáÊòéÊòæÔºåORCÊñá‰ª∂Ê†ºÂºèÂú®Â≠òÂÇ®Á©∫Èó¥‰∏äË¶ÅËøú‰ºò‰∫éTextÊ†ºÂºèÔºåËæÉ‰πã‰∫éPARQUETÊ†ºÂºèÊúâ‰∏ÄÂÄçÁöÑÂ≠òÂÇ®Á©∫Èó¥ÊèêÂçáÔºåÂú®ÂØºÊï∞ÊçÆÔºàinsert into table select ËøôÊ†∑ÁöÑÊñπÂºèÔºâÊñπÈù¢ORCÊ†ºÂºè‰πüË¶Å‰ºò‰∫éPARQUETÔºåÂú®ÊúÄÁªàÁöÑÊü•ËØ¢ÊÄßËÉΩ‰∏äÂèØ‰ª•ÁúãÂà∞ÔºåÊó†ËÆ∫ÊòØÊó†ÂµåÂ•óÁöÑÊâÅÂπ≥ÂºèÂÆΩË°®ÔºåÊàñÊòØ‰∏ÄÂ±ÇÂµåÂ•óË°®ÔºåËøòÊòØÂ§öÂ±ÇÂµåÂ•óÁöÑÂÆΩË°®Ôºå‰∏§ËÄÖÁöÑÊü•ËØ¢ÊÄßËÉΩÁõ∏Â∑Æ‰∏çÂ§öÔºåËæÉ‰πã‰∫éTextÊ†ºÂºèÊúâ2Âà∞3ÂÄçÂ∑¶Âè≥ÁöÑÊèêÂçá„ÄÇ Âè¶Â§ñÔºåÈÄöËøáÂØπÊØîÂú∫ÊôØ‰∫åÂíåÂú∫ÊôØ‰∏âÁöÑÊµãËØïÁªìÊûúÔºåÂèØ‰ª•ÂèëÁé∞ÊâÅÂπ≥ÂºèÁöÑË°®ÁªìÊûÑË¶ÅÊØîÂµåÂ•óÂºèÁªìÊûÑÁöÑÊü•ËØ¢ÊÄßËÉΩÊúâÊâÄÊèêÂçáÔºåÊâÄ‰ª•Â¶ÇÊûúÈÄâÊã©‰ΩøÁî®Â§ßÂÆΩË°®ÔºåÂàôËÆæËÆ°ÂÆΩË°®ÁöÑÊó∂ÂÄôÂ∞ΩÂèØËÉΩÁöÑÂ∞ÜË°®ËÆæËÆ°ÁöÑÊâÅÂπ≥ÂåñÔºåÂáèÂ∞ëÂµåÂ•óÊï∞ÊçÆ„ÄÇ ÈÄöËøáËøô‰∏âÁßçÊñá‰ª∂Â≠òÂÇ®Ê†ºÂºèÁöÑÊµãËØïÂØπÊØîÔºåORCÊñá‰ª∂Â≠òÂÇ®Ê†ºÂºèÊó†ËÆ∫ÊòØÂú®Á©∫Èó¥Â≠òÂÇ®„ÄÅÂØºÊï∞ÊçÆÈÄüÂ∫¶ËøòÊòØÊü•ËØ¢ÈÄüÂ∫¶‰∏äË°®Áé∞ÁöÑÈÉΩËæÉÂ•Ω‰∏Ä‰∫õÔºåÂπ∂‰∏îORCÂèØ‰ª•‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÊîØÊåÅACIDÊìç‰ΩúÔºåÁ§æÂå∫ÁöÑÂèëÂ±ïÁõÆÂâç‰πüÊòØHive‰∏≠ÊØîËæÉÊèêÂÄ°‰ΩøÁî®ÁöÑ‰∏ÄÁßçÂàóÂºèÂ≠òÂÇ®Ê†ºÂºèÔºåÂè¶Â§ñÔºåÊú¨Ê¨°ÊµãËØï‰∏ªË¶ÅÈíàÂØπÁöÑÊòØHiveÂºïÊìéÔºåÊâÄ‰ª•‰∏çÊéíÈô§Â≠òÂú®Hive‰∏éORCÁöÑÊïèÊÑüÂ∫¶ÊØîPARQUETË¶ÅÈ´òÁöÑÂèØËÉΩÊÄß„ÄÇ ÊÄªÁªìÊú¨Êñá‰∏ªË¶Å‰ªéÊï∞ÊçÆÊ®°Âûã„ÄÅÊñá‰ª∂Ê†ºÂºèÂíåÊï∞ÊçÆËÆøÈóÆÊµÅÁ®ãÁ≠âÂá†‰∏™ÊñπÈù¢ËØ¶ÁªÜ‰ªãÁªç‰∫ÜHadoopÁîüÊÄÅÂúà‰∏≠ÁöÑ‰∏§ÁßçÂàóÂºèÂ≠òÂÇ®Ê†ºÂºè‚Äî‚ÄîParquetÂíåORCÔºåÂπ∂ÈÄöËøáÂ§ßÊï∞ÊçÆÈáèÁöÑÊµãËØïÂØπ‰∏§ËÄÖÁöÑÂ≠òÂÇ®ÂíåÊü•ËØ¢ÊÄßËÉΩËøõË°å‰∫ÜÂØπÊØî„ÄÇÂØπ‰∫éÂ§ßÊï∞ÊçÆÂú∫ÊôØ‰∏ãÁöÑÊï∞ÊçÆÂàÜÊûêÈúÄÊ±ÇÔºå‰ΩøÁî®Ëøô‰∏§ÁßçÂ≠òÂÇ®Ê†ºÂºèÊÄª‰ºöÂ∏¶Êù•Â≠òÂÇ®ÂíåÊÄßËÉΩ‰∏äÁöÑÊèêÂçáÔºå‰ΩÜÊòØÂú®ÂÆûÈôÖ‰ΩøÁî®Êó∂ËøòÈúÄË¶ÅÈíàÂØπÂÆûÈôÖÁöÑÊï∞ÊçÆËøõË°åÈÄâÊã©„ÄÇÂè¶Â§ñÁî±‰∫é‰∏çÂêåÂºÄÊ∫ê‰∫ßÂìÅÂèØËÉΩÂØπ‰∏çÂêåÁöÑÂ≠òÂÇ®Ê†ºÂºèÊúâÁâπÂÆöÁöÑ‰ºòÂåñÔºåÊâÄ‰ª•ÈÄâÊã©Êó∂ËøòÈúÄË¶ÅËÄÉËôëÊü•ËØ¢ÂºïÊìéÁöÑÂõ†Á¥†„ÄÇ ÊãìÂ±ïÈòÖËØªÔºösparkÂÖ≥‰∫éparquetÁöÑ‰ºòÂåñ","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"},{"name":"parquet","slug":"parquet","permalink":"https://stanxia.github.io/tags/parquet/"},{"name":"orc","slug":"orc","permalink":"https://stanxia.github.io/tags/orc/"}]},{"title":"sparkÂàÜÂ±ÇÂèñÊ†∑","slug":"sparkÂàÜÂ±ÇÂèñÊ†∑","date":"2017-11-27T16:57:10.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/11/27/sparkÂàÜÂ±ÇÂèñÊ†∑/","link":"","permalink":"https://stanxia.github.io/2017/11/27/sparkÂàÜÂ±ÇÂèñÊ†∑/","excerpt":"ÂÖàÂ∞ÜÊÄª‰ΩìÁöÑÂçï‰ΩçÊåâÊüêÁßçÁâπÂæÅÂàÜ‰∏∫Ëã•Âπ≤Ê¨°Á∫ßÊÄª‰ΩìÔºàÂ±ÇÔºâÔºåÁÑ∂ÂêéÂÜç‰ªéÊØè‰∏ÄÂ±ÇÂÜÖËøõË°åÂçïÁ∫ØÈöèÊú∫ÊäΩÊ†∑ÔºåÁªÑÊàê‰∏Ä‰∏™Ê†∑Êú¨ÁöÑÁªüËÆ°Â≠¶ËÆ°ÁÆóÊñπÊ≥ïÂè´ÂÅöÂàÜÂ±ÇÊäΩÊ†∑„ÄÇÂú®spark.mllib‰∏≠ÔºåÁî®keyÊù•ÂàÜÂ±Ç„ÄÇ\n‰∏éÂ≠òÂú®‰∫éspark.mllib‰∏≠ÁöÑÂÖ∂ÂÆÉÁªüËÆ°ÂáΩÊï∞‰∏çÂêåÔºåÂàÜÂ±ÇÈááÊ†∑ÊñπÊ≥ïsampleByKeyÂíåsampleByKeyExactÂèØ‰ª•Âú®key-valueÂØπÁöÑRDD‰∏äÊâßË°å„ÄÇÂú®ÂàÜÂ±ÇÈááÊ†∑‰∏≠ÔºåÂèØ‰ª•ËÆ§‰∏∫keyÊòØ‰∏Ä‰∏™Ê†áÁ≠æÔºåvalueÊòØÁâπÂÆöÁöÑÂ±ûÊÄß„ÄÇ‰æãÂ¶ÇÔºåkeyÂèØ‰ª•ÊòØÁî∑‰∫∫ÊàñËÄÖÂ•≥‰∫∫ÊàñËÄÖÊñáÊ°£id,ÂÆÉÁõ∏Â∫îÁöÑvalueÂèØËÉΩÊòØ‰∏ÄÁªÑÂπ¥ÈæÑÊàñËÄÖÊòØÊñáÊ°£‰∏≠ÁöÑËØç„ÄÇsampleByKeyÊñπÊ≥ïÈÄöËøáÊé∑Á°¨Â∏ÅÁöÑÊñπÂºèÂÜ≥ÂÆöÊòØÂê¶ÈááÊ†∑‰∏Ä‰∏™ËßÇÂØüÊï∞ÊçÆÔºåÂõ†Ê≠§ÂÆÉÈúÄË¶ÅÊàë‰ª¨‰º†ÈÄíÔºàpass overÔºâÊï∞ÊçÆÂπ∂‰∏îÊèê‰æõÊúüÊúõÁöÑÊï∞ÊçÆÂ§ßÂ∞è(size)„ÄÇsampleByKeyExactÊØîÊØèÂ±Ç‰ΩøÁî®sampleByKeyÈöèÊú∫ÊäΩÊ†∑ÈúÄË¶ÅÊõ¥Â§öÁöÑÊúâÊÑè‰πâÁöÑËµÑÊ∫êÔºå‰ΩÜÊòØÂÆÉËÉΩ‰ΩøÊ†∑Êú¨Â§ßÂ∞èÁöÑÂáÜÁ°ÆÊÄßËææÂà∞‰∫Ü99.99%„ÄÇ\nsampleByKeyExact()ÂÖÅËÆ∏Áî®Êà∑ÂáÜÁ°ÆÊäΩÂèñf_k * n_k‰∏™Ê†∑Êú¨ÔºåËøôÈáåf_kË°®Á§∫ÊúüÊúõËé∑ÂèñÈîÆ‰∏∫kÁöÑÊ†∑Êú¨ÁöÑÊØî‰æãÔºån_kË°®Á§∫ÈîÆ‰∏∫kÁöÑÈîÆÂÄºÂØπÁöÑÊï∞Èáè„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰ΩøÁî®ÁöÑ‰æãÂ≠êÔºö","text":"ÂÖàÂ∞ÜÊÄª‰ΩìÁöÑÂçï‰ΩçÊåâÊüêÁßçÁâπÂæÅÂàÜ‰∏∫Ëã•Âπ≤Ê¨°Á∫ßÊÄª‰ΩìÔºàÂ±ÇÔºâÔºåÁÑ∂ÂêéÂÜç‰ªéÊØè‰∏ÄÂ±ÇÂÜÖËøõË°åÂçïÁ∫ØÈöèÊú∫ÊäΩÊ†∑ÔºåÁªÑÊàê‰∏Ä‰∏™Ê†∑Êú¨ÁöÑÁªüËÆ°Â≠¶ËÆ°ÁÆóÊñπÊ≥ïÂè´ÂÅöÂàÜÂ±ÇÊäΩÊ†∑„ÄÇÂú®spark.mllib‰∏≠ÔºåÁî®keyÊù•ÂàÜÂ±Ç„ÄÇ ‰∏éÂ≠òÂú®‰∫éspark.mllib‰∏≠ÁöÑÂÖ∂ÂÆÉÁªüËÆ°ÂáΩÊï∞‰∏çÂêåÔºåÂàÜÂ±ÇÈááÊ†∑ÊñπÊ≥ïsampleByKeyÂíåsampleByKeyExactÂèØ‰ª•Âú®key-valueÂØπÁöÑRDD‰∏äÊâßË°å„ÄÇÂú®ÂàÜÂ±ÇÈááÊ†∑‰∏≠ÔºåÂèØ‰ª•ËÆ§‰∏∫keyÊòØ‰∏Ä‰∏™Ê†áÁ≠æÔºåvalueÊòØÁâπÂÆöÁöÑÂ±ûÊÄß„ÄÇ‰æãÂ¶ÇÔºåkeyÂèØ‰ª•ÊòØÁî∑‰∫∫ÊàñËÄÖÂ•≥‰∫∫ÊàñËÄÖÊñáÊ°£id,ÂÆÉÁõ∏Â∫îÁöÑvalueÂèØËÉΩÊòØ‰∏ÄÁªÑÂπ¥ÈæÑÊàñËÄÖÊòØÊñáÊ°£‰∏≠ÁöÑËØç„ÄÇsampleByKeyÊñπÊ≥ïÈÄöËøáÊé∑Á°¨Â∏ÅÁöÑÊñπÂºèÂÜ≥ÂÆöÊòØÂê¶ÈááÊ†∑‰∏Ä‰∏™ËßÇÂØüÊï∞ÊçÆÔºåÂõ†Ê≠§ÂÆÉÈúÄË¶ÅÊàë‰ª¨‰º†ÈÄíÔºàpass overÔºâÊï∞ÊçÆÂπ∂‰∏îÊèê‰æõÊúüÊúõÁöÑÊï∞ÊçÆÂ§ßÂ∞è(size)„ÄÇsampleByKeyExactÊØîÊØèÂ±Ç‰ΩøÁî®sampleByKeyÈöèÊú∫ÊäΩÊ†∑ÈúÄË¶ÅÊõ¥Â§öÁöÑÊúâÊÑè‰πâÁöÑËµÑÊ∫êÔºå‰ΩÜÊòØÂÆÉËÉΩ‰ΩøÊ†∑Êú¨Â§ßÂ∞èÁöÑÂáÜÁ°ÆÊÄßËææÂà∞‰∫Ü99.99%„ÄÇ sampleByKeyExact()ÂÖÅËÆ∏Áî®Êà∑ÂáÜÁ°ÆÊäΩÂèñf_k * n_k‰∏™Ê†∑Êú¨ÔºåËøôÈáåf_kË°®Á§∫ÊúüÊúõËé∑ÂèñÈîÆ‰∏∫kÁöÑÊ†∑Êú¨ÁöÑÊØî‰æãÔºån_kË°®Á§∫ÈîÆ‰∏∫kÁöÑÈîÆÂÄºÂØπÁöÑÊï∞Èáè„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰ΩøÁî®ÁöÑ‰æãÂ≠êÔºö 123456789import org.apache.spark.SparkContextimport org.apache.spark.SparkContext._import org.apache.spark.rdd.PairRDDFunctionsval sc: SparkContext = ...val data = ... // an RDD[(K, V)] of any key value pairsval fractions: Map[K, Double] = ... // specify the exact fraction desired from each key// Get an exact sample from each stratumval approxSample = data.sampleByKey(withReplacement = false, fractions)val exactSample = data.sampleByKeyExact(withReplacement = false, fractions) ÂΩìwithReplacement‰∏∫trueÊó∂ÔºåÈááÁî®PoissonSamplerÂèñÊ†∑Âô®ÔºåÂΩìwithReplacement‰∏∫false‰ΩøÔºåÈááÁî®BernoulliSamplerÂèñÊ†∑Âô®„ÄÇ 123456789101112131415161718192021def sampleByKey(withReplacement: Boolean, fractions: Map[K, Double], seed: Long = Utils.random.nextLong): RDD[(K, V)] = self.withScope &#123; val samplingFunc = if (withReplacement) &#123; StratifiedSamplingUtils.getPoissonSamplingFunction(self, fractions, false, seed) &#125; else &#123; StratifiedSamplingUtils.getBernoulliSamplingFunction(self, fractions, false, seed) &#125; self.mapPartitionsWithIndex(samplingFunc, preservesPartitioning = true) &#125;def sampleByKeyExact( withReplacement: Boolean, fractions: Map[K, Double], seed: Long = Utils.random.nextLong): RDD[(K, V)] = self.withScope &#123; val samplingFunc = if (withReplacement) &#123; StratifiedSamplingUtils.getPoissonSamplingFunction(self, fractions, true, seed) &#125; else &#123; StratifiedSamplingUtils.getBernoulliSamplingFunction(self, fractions, true, seed) &#125; self.mapPartitionsWithIndex(samplingFunc, preservesPartitioning = true) &#125; ‰∏ãÈù¢Êàë‰ª¨ÂàÜÂà´Êù•ÁúãsampleByKeyÂíåsampleByKeyExactÁöÑÂÆûÁé∞„ÄÇ sampleByKeyÁöÑÂÆûÁé∞ÂΩìÊàë‰ª¨ÈúÄË¶Å‰∏çÈáçÂ§çÊäΩÊ†∑Êó∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÁî®Ê≥äÊùæÊäΩÊ†∑Âô®Êù•ÊäΩÊ†∑„ÄÇÂΩìÈúÄË¶ÅÈáçÂ§çÊäΩÊ†∑Êó∂ÔºåÁî®‰ºØÂä™Âà©ÊäΩÊ†∑Âô®ÊäΩÊ†∑„ÄÇsampleByKeyÁöÑÂÆûÁé∞ÊØîËæÉÁÆÄÂçïÔºåÂÆÉÂ∞±ÊòØÁªü‰∏ÄÁöÑÈöèÊú∫ÊäΩÊ†∑„ÄÇ Ê≥äÊùæÊäΩÊ†∑Âô®Êàë‰ª¨È¶ñÂÖàÁúãÊ≥äÊùæÊäΩÊ†∑Âô®ÁöÑÂÆûÁé∞„ÄÇ 12345678910111213141516171819def getPoissonSamplingFunction[K: ClassTag, V: ClassTag](rdd: RDD[(K, V)], fractions: Map[K, Double], exact: Boolean, seed: Long): (Int, Iterator[(K, V)]) =&gt; Iterator[(K, V)] = &#123; (idx: Int, iter: Iterator[(K, V)]) =&gt; &#123; //ÂàùÂßãÂåñÈöèÊú∫ÁîüÊàêÂô® val rng = new RandomDataGenerator() rng.reSeed(seed + idx) iter.flatMap &#123; item =&gt; //Ëé∑Âæó‰∏ã‰∏Ä‰∏™Ê≥äÊùæÂÄº val count = rng.nextPoisson(fractions(item._1)) if (count == 0) &#123; Iterator.empty &#125; else &#123; Iterator.fill(count)(item) &#125; &#125; &#125;&#125; getPoissonSamplingFunctionËøîÂõûÁöÑÊòØ‰∏Ä‰∏™ÂáΩÊï∞Ôºå‰º†ÈÄíÁªômapPartitionsWithIndexÂ§ÑÁêÜÊØè‰∏™ÂàÜÂå∫ÁöÑÊï∞ÊçÆ„ÄÇËøôÈáåRandomDataGeneratorÊòØ‰∏Ä‰∏™ÈöèÊú∫ÁîüÊàêÂô®ÔºåÂÆÉÁî®‰∫éÂêåÊó∂ÁîüÊàêÂùáÂåÄÂÄº(uniform values)ÂíåÊ≥äÊùæÂÄº(Poisson values)„ÄÇ ‰ºØÂä™Âà©ÊäΩÊ†∑Âô®1234567891011121314def getBernoulliSamplingFunction[K, V](rdd: RDD[(K, V)], fractions: Map[K, Double], exact: Boolean, seed: Long): (Int, Iterator[(K, V)]) =&gt; Iterator[(K, V)] = &#123; var samplingRateByKey = fractions (idx: Int, iter: Iterator[(K, V)]) =&gt; &#123; //ÂàùÂßãÂåñÈöèÊú∫ÁîüÊàêÂô® val rng = new RandomDataGenerator() rng.reSeed(seed + idx) // Must use the same invoke pattern on the rng as in getSeqOp for without replacement // in order to generate the same sequence of random numbers when creating the sample iter.filter(t =&gt; rng.nextUniform() &lt; samplingRateByKey(t._1)) &#125; &#125; sampleByKeyExactÁöÑÂÆûÁé∞sampleByKeyExactËé∑ÂèñÊõ¥ÂáÜÁ°ÆÁöÑÊäΩÊ†∑ÁªìÊûúÔºåÂÆÉÁöÑÂÆûÁé∞‰πüÂàÜ‰∏∫‰∏§ÁßçÊÉÖÂÜµÔºåÈáçÂ§çÊäΩÊ†∑Âíå‰∏çÈáçÂ§çÊäΩÊ†∑„ÄÇÂâçËÄÖ‰ΩøÁî®Ê≥äÊùæÊäΩÊ†∑Âô®ÔºåÂêéËÄÖ‰ΩøÁî®‰ºØÂä™Âà©ÊäΩÊ†∑Âô®„ÄÇ Ê≥äÊùæÊäΩÊ†∑Âô®12345678910111213141516171819202122232425val counts = Some(rdd.countByKey())//ËÆ°ÁÆóÁ´ãÂç≥Êé•ÂèóÁöÑÊ†∑Êú¨Êï∞ÈáèÔºåÂπ∂‰∏î‰∏∫ÊØèÂ±ÇÁîüÊàêÂÄôÈÄâÂêçÂçïval finalResult = getAcceptanceResults(rdd, true, fractions, counts, seed)//ÂÜ≥ÂÆöÊé•ÂèóÊ†∑Êú¨ÁöÑÈòàÂÄºÔºåÁîüÊàêÂáÜÁ°ÆÁöÑÊ†∑Êú¨Â§ßÂ∞èval thresholdByKey = computeThresholdByKey(finalResult, fractions)(idx: Int, iter: Iterator[(K, V)]) =&gt; &#123; val rng = new RandomDataGenerator() rng.reSeed(seed + idx) iter.flatMap &#123; item =&gt; val key = item._1 val acceptBound = finalResult(key).acceptBound // Must use the same invoke pattern on the rng as in getSeqOp for with replacement // in order to generate the same sequence of random numbers when creating the sample val copiesAccepted = if (acceptBound == 0) 0L else rng.nextPoisson(acceptBound) //ÂÄôÈÄâÂêçÂçï val copiesWaitlisted = rng.nextPoisson(finalResult(key).waitListBound) val copiesInSample = copiesAccepted + (0 until copiesWaitlisted).count(i =&gt; rng.nextUniform() &lt; thresholdByKey(key)) if (copiesInSample &gt; 0) &#123; Iterator.fill(copiesInSample.toInt)(item) &#125; else &#123; Iterator.empty &#125; &#125;&#125; ‰ºØÂä™Âà©ÊäΩÊ†∑1234567891011121314151617def getBernoulliSamplingFunction[K, V](rdd: RDD[(K, V)], fractions: Map[K, Double], exact: Boolean, seed: Long): (Int, Iterator[(K, V)]) =&gt; Iterator[(K, V)] = &#123; var samplingRateByKey = fractions //ËÆ°ÁÆóÁ´ãÂç≥Êé•ÂèóÁöÑÊ†∑Êú¨Êï∞ÈáèÔºåÂπ∂‰∏î‰∏∫ÊØèÂ±ÇÁîüÊàêÂÄôÈÄâÂêçÂçï val finalResult = getAcceptanceResults(rdd, false, fractions, None, seed) //ÂÜ≥ÂÆöÊé•ÂèóÊ†∑Êú¨ÁöÑÈòàÂÄºÔºåÁîüÊàêÂáÜÁ°ÆÁöÑÊ†∑Êú¨Â§ßÂ∞è samplingRateByKey = computeThresholdByKey(finalResult, fractions) (idx: Int, iter: Iterator[(K, V)]) =&gt; &#123; val rng = new RandomDataGenerator() rng.reSeed(seed + idx) // Must use the same invoke pattern on the rng as in getSeqOp for without replacement // in order to generate the same sequence of random numbers when creating the sample iter.filter(t =&gt; rng.nextUniform() &lt; samplingRateByKey(t._1)) &#125; &#125;","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"},{"name":"ÂèñÊ†∑","slug":"ÂèñÊ†∑","permalink":"https://stanxia.github.io/tags/ÂèñÊ†∑/"},{"name":"Ê∫êÁ†Å","slug":"Ê∫êÁ†Å","permalink":"https://stanxia.github.io/tags/Ê∫êÁ†Å/"}]},{"title":"Dataset.scala","slug":"Dataset-scala","date":"2017-11-23T09:34:44.000Z","updated":"2020-02-05T15:12:18.092Z","comments":true,"path":"2017/11/23/Dataset-scala/","link":"","permalink":"https://stanxia.github.io/2017/11/23/Dataset-scala/","excerpt":"ÂâçË®ÄDataset ÊòØ‰∏ÄÁßçÂº∫Á±ªÂûãÁöÑÈ¢ÜÂüüÁâπÂÆöÂØπË±°ÈõÜÂêàÔºåÂèØ‰ª•Âú®‰ΩøÁî®ÂäüËÉΩÊàñÂÖ≥Á≥ªÊìç‰ΩúÁöÑÂêåÊó∂ËøõË°åËΩ¨Êç¢„ÄÇÊØè‰∏™ Dataset ‰πüÊúâ‰∏Ä‰∏™Âêç‰∏∫ ‚ÄúDataFrame‚Äù ÁöÑÊó†Á±ªÂûãËßÜÂõæÔºåÂÆÉÊòØ [[Row]] ÁöÑ Dataset„ÄÇDataset ‰∏äÂèØÁî®ÁöÑÊìç‰ΩúÂàÜ‰∏∫ËΩ¨Êç¢ÂíåÂä®‰Ωú:\n\nËΩ¨Êç¢Ôºö‰∫ßÁîüÊñ∞ÁöÑ Dataset ÔºõÂåÖÊã¨ map, filter, select, and aggregate (groupBy).Âä®‰ΩúÔºöËß¶ÂèëËÆ°ÁÆóÂπ∂ËøîÂõûÁªìÊûú ÔºõÂåÖÊã¨ count, show, or ÂÜôÊï∞ÊçÆÂà∞Êñá‰ª∂Á≥ªÁªü„ÄÇ\n\nDatasetÊòØÊáíÂä†ËΩΩÁöÑÔºå‰æãÂ¶ÇÔºöÂè™ÊúâÊèê‰∫§Âä®‰ΩúÁöÑÊó∂ÂÄôÊâç‰ºöËß¶ÂèëËÆ°ÁÆó„ÄÇÂú®ÂÜÖÈÉ®ÔºåDatasetsË°®Á§∫‰∏Ä‰∏™ÈÄªËæëËÆ°ÂàíÔºåÂÆÉÊèèËø∞ÁîüÊàêÊï∞ÊçÆÊâÄÈúÄÁöÑËÆ°ÁÆó„ÄÇÂΩìÊèê‰∫§Âä®‰ΩúÊó∂ÔºåSparkÁöÑÊü•ËØ¢‰ºòÂåñÂô®‰ºö‰ºòÂåñÈÄªËæëËÆ°ÂàíÔºåÂπ∂‰ª•Âπ∂Ë°åÂíåÂàÜÂ∏ÉÂºèÁöÑÊñπÂºèÁîüÊàêÊúâÊïàÊâßË°åÁöÑÁâ©ÁêÜËÆ°Âàí„ÄÇËØ∑‰ΩøÁî®explain ÂäüËÉΩÔºåÊé¢Á¥¢ÈÄªËæëËÆ°ÂàíÂíå‰ºòÂåñÁöÑÁâ©ÁêÜËÆ°Âàí„ÄÇ\n‰∏∫‰∫ÜÊúâÊïàÂú∞ÊîØÊåÅÁâπÂÆö‰∫éÈ¢ÜÂüüÁöÑÂØπË±°ÔºåÈúÄË¶Å[[Encoder]]„ÄÇÁºñÁ†ÅÂô®Â∞ÜÁâπÂÆöÁ±ªÂûãÁöÑ‚ÄúT‚ÄùÊò†Â∞ÑÂà∞SparkÁöÑÂÜÖÈÉ®Á±ªÂûãÁ≥ªÁªü„ÄÇ‰æãÂ¶ÇÔºöÁªô‰∏Ä‰∏™ Person Á±ªÔºåÂπ∂Â∏¶Êúâ‰∏§‰∏™Â±ûÊÄßÔºöname (string) and age (int),ÁºñÁ†ÅÂô®ÂëäËØâSparkÂú®ËøêË°åÊó∂ÁîüÊàê‰ª£Á†ÅÔºåÂ∫èÂàóÂåñ Person ÂØπË±°‰∏∫‰∫åËøõÂà∂ÁªìÊûÑ„ÄÇ\nÈÄöÂ∏∏Êúâ‰∏§ÁßçÂàõÂª∫DatasetÁöÑÊñπÊ≥ï:\n\n‰ΩøÁî® SparkSession ‰∏äÂèØÁî®ÁöÑ read ÊñπÊ≥ïËØªÂèñ Spark ÊåáÂêëÁöÑÂ≠òÂÇ®Á≥ªÁªü‰∏äÁöÑÊñá‰ª∂„ÄÇÁî®Áé∞Â≠òÁöÑ Datasets ËΩ¨Êç¢ËÄåÊù•„ÄÇ\n\nDatasetÊìç‰Ωú‰πüÂèØ‰ª•ÊòØÊó†Á±ªÂûãÁöÑÔºåÈÄöËøáÂ§öÁßçÈ¢ÜÂüü‰∏ìÁî®ËØ≠Ë®ÄÔºàDSLÔºâÊñπÊ≥ïÂÆö‰πâÔºöËøô‰∫õÊìç‰ΩúÈùûÂ∏∏Á±ª‰ºº‰∫é RÊàñPythonËØ≠Ë®Ä‰∏≠ÁöÑ Êï∞ÊçÆÊ°ÜÊû∂ÊäΩË±°‰∏≠ÂèØÁî®ÁöÑÊìç‰Ωú„ÄÇ","text":"ÂâçË®ÄDataset ÊòØ‰∏ÄÁßçÂº∫Á±ªÂûãÁöÑÈ¢ÜÂüüÁâπÂÆöÂØπË±°ÈõÜÂêàÔºåÂèØ‰ª•Âú®‰ΩøÁî®ÂäüËÉΩÊàñÂÖ≥Á≥ªÊìç‰ΩúÁöÑÂêåÊó∂ËøõË°åËΩ¨Êç¢„ÄÇÊØè‰∏™ Dataset ‰πüÊúâ‰∏Ä‰∏™Âêç‰∏∫ ‚ÄúDataFrame‚Äù ÁöÑÊó†Á±ªÂûãËßÜÂõæÔºåÂÆÉÊòØ [[Row]] ÁöÑ Dataset„ÄÇDataset ‰∏äÂèØÁî®ÁöÑÊìç‰ΩúÂàÜ‰∏∫ËΩ¨Êç¢ÂíåÂä®‰Ωú: ËΩ¨Êç¢Ôºö‰∫ßÁîüÊñ∞ÁöÑ Dataset ÔºõÂåÖÊã¨ map, filter, select, and aggregate (groupBy).Âä®‰ΩúÔºöËß¶ÂèëËÆ°ÁÆóÂπ∂ËøîÂõûÁªìÊûú ÔºõÂåÖÊã¨ count, show, or ÂÜôÊï∞ÊçÆÂà∞Êñá‰ª∂Á≥ªÁªü„ÄÇ DatasetÊòØÊáíÂä†ËΩΩÁöÑÔºå‰æãÂ¶ÇÔºöÂè™ÊúâÊèê‰∫§Âä®‰ΩúÁöÑÊó∂ÂÄôÊâç‰ºöËß¶ÂèëËÆ°ÁÆó„ÄÇÂú®ÂÜÖÈÉ®ÔºåDatasetsË°®Á§∫‰∏Ä‰∏™ÈÄªËæëËÆ°ÂàíÔºåÂÆÉÊèèËø∞ÁîüÊàêÊï∞ÊçÆÊâÄÈúÄÁöÑËÆ°ÁÆó„ÄÇÂΩìÊèê‰∫§Âä®‰ΩúÊó∂ÔºåSparkÁöÑÊü•ËØ¢‰ºòÂåñÂô®‰ºö‰ºòÂåñÈÄªËæëËÆ°ÂàíÔºåÂπ∂‰ª•Âπ∂Ë°åÂíåÂàÜÂ∏ÉÂºèÁöÑÊñπÂºèÁîüÊàêÊúâÊïàÊâßË°åÁöÑÁâ©ÁêÜËÆ°Âàí„ÄÇËØ∑‰ΩøÁî®explain ÂäüËÉΩÔºåÊé¢Á¥¢ÈÄªËæëËÆ°ÂàíÂíå‰ºòÂåñÁöÑÁâ©ÁêÜËÆ°Âàí„ÄÇ ‰∏∫‰∫ÜÊúâÊïàÂú∞ÊîØÊåÅÁâπÂÆö‰∫éÈ¢ÜÂüüÁöÑÂØπË±°ÔºåÈúÄË¶Å[[Encoder]]„ÄÇÁºñÁ†ÅÂô®Â∞ÜÁâπÂÆöÁ±ªÂûãÁöÑ‚ÄúT‚ÄùÊò†Â∞ÑÂà∞SparkÁöÑÂÜÖÈÉ®Á±ªÂûãÁ≥ªÁªü„ÄÇ‰æãÂ¶ÇÔºöÁªô‰∏Ä‰∏™ Person Á±ªÔºåÂπ∂Â∏¶Êúâ‰∏§‰∏™Â±ûÊÄßÔºöname (string) and age (int),ÁºñÁ†ÅÂô®ÂëäËØâSparkÂú®ËøêË°åÊó∂ÁîüÊàê‰ª£Á†ÅÔºåÂ∫èÂàóÂåñ Person ÂØπË±°‰∏∫‰∫åËøõÂà∂ÁªìÊûÑ„ÄÇ ÈÄöÂ∏∏Êúâ‰∏§ÁßçÂàõÂª∫DatasetÁöÑÊñπÊ≥ï: ‰ΩøÁî® SparkSession ‰∏äÂèØÁî®ÁöÑ read ÊñπÊ≥ïËØªÂèñ Spark ÊåáÂêëÁöÑÂ≠òÂÇ®Á≥ªÁªü‰∏äÁöÑÊñá‰ª∂„ÄÇÁî®Áé∞Â≠òÁöÑ Datasets ËΩ¨Êç¢ËÄåÊù•„ÄÇ DatasetÊìç‰Ωú‰πüÂèØ‰ª•ÊòØÊó†Á±ªÂûãÁöÑÔºåÈÄöËøáÂ§öÁßçÈ¢ÜÂüü‰∏ìÁî®ËØ≠Ë®ÄÔºàDSLÔºâÊñπÊ≥ïÂÆö‰πâÔºöËøô‰∫õÊìç‰ΩúÈùûÂ∏∏Á±ª‰ºº‰∫é RÊàñPythonËØ≠Ë®Ä‰∏≠ÁöÑ Êï∞ÊçÆÊ°ÜÊû∂ÊäΩË±°‰∏≠ÂèØÁî®ÁöÑÊìç‰Ωú„ÄÇ basic-Âü∫Á°ÄÊñπÊ≥ïtoDF123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * Converts this strongly typed collection of data to generic Dataframe. In contrast to the * strongly typed objects that Dataset operations work on, a Dataframe returns generic [[Row]] * objects that allow fields to be accessed by ordinal or name. * Â∞ÜËøôÁßçÂº∫Á±ªÂûãÁöÑÊï∞ÊçÆÈõÜÂêàËΩ¨Êç¢‰∏∫‰∏ÄËà¨ÁöÑDataframe„ÄÇ * ‰∏éDatasetÊìç‰ΩúÊâÄ‰ΩøÁî®ÁöÑÂº∫Á±ªÂûãÂØπË±°Áõ∏ÂèçÔºå * DataframeËøîÂõûÊ≥õÂûã[[Row]]ÂØπË±°ÔºåËøô‰∫õÂØπË±°ÂÖÅËÆ∏ÈÄöËøáÂ∫èÂè∑ÊàñÂêçÁß∞ËÆøÈóÆÂ≠óÊÆµ * * @group basic * @since 1.6.0 */// This is declared with parentheses to prevent the Scala compiler from treating// `ds.toDF(\"1\")` as invoking this toDF and then apply on the returned DataFrame.// ËøôÊòØÁî®Êã¨Âè∑Â£∞ÊòéÁöÑÔºå‰ª•Èò≤Ê≠¢ScalaÁºñËØëÂô®Â§ÑÁêÜds.toDF(‚Äú1‚Äù)Ë∞ÉÁî®Ëøô‰∏™toDFÔºåÁÑ∂ÂêéÂú®ËøîÂõûÁöÑDataFrame‰∏äÂ∫îÁî®„ÄÇdef toDF(): DataFrame = new Dataset[Row](sparkSession, queryExecution, RowEncoder(schema)) /** * Converts this strongly typed collection of data to generic `DataFrame` with columns renamed. * This can be quite convenient in conversion from an RDD of tuples into a `DataFrame` with * meaningful names. For example: * * Â∞ÜËøôÁßçÂº∫Á±ªÂûãÁöÑÊï∞ÊçÆÈõÜÂêàËΩ¨Êç¢‰∏∫ÈÄöÁî®ÁöÑ‚ÄúDataFrame‚ÄùÔºåÂπ∂Â∞ÜÂàóÈáçÂëΩÂêç„ÄÇ * Âú®Â∞ÜtupleÁöÑRDDËΩ¨Êç¢‰∏∫ÂØåÊúâÂê´‰πâÁöÑÂêçÁß∞ÁöÑ‚ÄúDataFrame‚ÄùÊó∂ÔºåËøôÊòØÈùûÂ∏∏Êñπ‰æøÁöÑÔºåÂ¶ÇÔºö * * &#123;&#123;&#123; * val rdd: RDD[(Int, String)] = ... * rdd.toDF() // ÈöêÂºèËΩ¨Êç¢ÂàõÂª∫‰∫Ü DataFrame ÔºåÂàóÂêç‰∏∫Ôºö `_1` and `_2` * rdd.toDF(\"id\", \"name\") // ÂàõÂª∫‰∫Ü DataFrame ÔºåÂàóÂêç‰∏∫Ôºö \"id\" and \"name\" * &#125;&#125;&#125; * * @group basic * @since 2.0.0 */@scala.annotation.varargsdef toDF(colNames: String*): DataFrame = &#123; require(schema.size == colNames.size, \"The number of columns doesn't match.\\n\" + s\"Old column names ($&#123;schema.size&#125;): \" + schema.fields.map(_.name).mkString(\", \") + \"\\n\" + s\"New column names ($&#123;colNames.size&#125;): \" + colNames.mkString(\", \")) val newCols = logicalPlan.output.zip(colNames).map &#123; case (oldAttribute, newName) =&gt; Column(oldAttribute).as(newName) &#125; select(newCols: _*)&#125; as123456789101112131415161718192021222324252627282930313233/** * :: Experimental :: * Returns a new Dataset where each record has been mapped on to the specified type. The * method used to map columns depend on the type of `U`: * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑDatasetÔºåÂÖ∂‰∏≠ÊØè‰∏™ËÆ∞ÂΩïÈÉΩË¢´Êò†Â∞ÑÂà∞ÊåáÂÆöÁöÑÁ±ªÂûã„ÄÇÁî®‰∫éÊò†Â∞ÑÂàóÁöÑÊñπÊ≥ïÂèñÂÜ≥‰∫é‚ÄúU‚ÄùÁöÑÁ±ªÂûã: * * - When `U` is a class, fields for the class will be mapped to columns of the same name * (case sensitivity is determined by `spark.sql.caseSensitive`). * * ÂΩì‚ÄúU‚ÄùÊòØÁ±ªÊó∂ÔºöÁ±ªÁöÑÂ±ûÊÄßÂ∞ÜÊò†Â∞ÑÂà∞Áõ∏ÂêåÂêçÁß∞ÁöÑÂàó * * - When `U` is a tuple, the columns will be be mapped by ordinal (i.e. the first column will * be assigned to `_1`). * * ÂΩì‚ÄúU‚ÄùÊòØÂÖÉÁªÑÊó∂ÔºöÂàóÂ∞ÜÁî±Â∫èÊï∞Êò†Â∞Ñ Ôºà‰æãÂ¶ÇÔºåÁ¨¨‰∏ÄÂàóÂ∞Ü‰∏∫ \"_1\"Ôºâ * * - When `U` is a primitive type (i.e. String, Int, etc), then the first column of the * `DataFrame` will be used. * * ÂΩì‚ÄúU‚ÄùÊòØ Âü∫Êú¨Á±ªÂûãÔºàÂ¶Ç StringÔºåIntÁ≠âÔºâÔºöÁÑ∂ÂêéÂ∞Ü‰ΩøÁî®‚ÄúDataFrame‚ÄùÁöÑÁ¨¨‰∏ÄÂàó„ÄÇ * * If the schema of the Dataset does not match the desired `U` type, you can use `select` * along with `alias` or `as` to rearrange or rename as required. * * Â¶ÇÊûúÊï∞ÊçÆÈõÜÁöÑÊ®°Âºè‰∏éÊâÄÈúÄÁöÑ‚ÄúU‚ÄùÁ±ªÂûã‰∏çÂåπÈÖçÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®‚Äúselect‚ÄùÂíå‚Äúalias‚ÄùÊàñ‚Äúas‚ÄùÊù•ÈáçÊñ∞ÊéíÂàóÊàñÈáçÂëΩÂêç„ÄÇ * * @group basic * @since 1.6.0 */ @Experimental @InterfaceStability.Evolving def as[U: Encoder]: Dataset[U] = Dataset[U](sparkSession, logicalPlan) schema12345678/** * Returns the schema of this Dataset. * ËøîÂõûËØ•DatasetÁöÑÊ®°Áâà * * @group basic * @since 1.6.0 */def schema: StructType = queryExecution.analyzed.schema printSchema12345678910/** * Prints the schema to the console in a nice tree format. * * ‰ª•‰∏ÄÁßçÊºÇ‰∫ÆÁöÑÊ†ëÊ†ºÂºèÂ∞ÜÊ®°ÂºèÊâìÂç∞Âà∞ÊéßÂà∂Âè∞„ÄÇ * * @group basic * @since 1.6.0 */// scalastyle:off printlndef printSchema(): Unit = println(schema.treeString) explain1234567891011121314151617181920212223242526/** * Prints the plans (logical and physical) to the console for debugging purposes. * * Â∞ÜËÆ°Âàí(ÈÄªËæëÂíåÁâ©ÁêÜ)ÊâìÂç∞Âà∞ÊéßÂà∂Âè∞‰ª•ËøõË°åË∞ÉËØï„ÄÇ * ÂèÇÊï∞Ôºöextended = false ‰∏∫Áâ©ÁêÜËÆ°Âàí * * @group basic * @since 1.6.0 */def explain(extended: Boolean): Unit = &#123; val explain = ExplainCommand(queryExecution.logical, extended = extended) sparkSession.sessionState.executePlan(explain).executedPlan.executeCollect().foreach &#123; // scalastyle:off println r =&gt; println(r.getString(0)) // scalastyle:on println &#125;&#125; /** * Prints the physical plan to the console for debugging purposes. * Â∞ÜÁâ©ÁêÜËÆ°ÂàíÊâìÂç∞Âà∞ÊéßÂà∂Âè∞‰ª•ËøõË°åË∞ÉËØï„ÄÇ * * @group basic * @since 1.6.0 */def explain(): Unit = explain(extended = false) dtypes12345678910/** * Returns all column names and their data types as an array. * ‰ª•Êï∞ÁªÑÁöÑÂΩ¢ÂºèËøîÂõûÊâÄÊúâÂàóÂêçÁß∞ÂíåÂÆÉ‰ª¨ÁöÑÊï∞ÊçÆÁ±ªÂûã * * @group basic * @since 1.6.0 */def dtypes: Array[(String, String)] = schema.fields.map &#123; field =&gt; (field.name, field.dataType.toString)&#125; columns12345678/** * Returns all column names as an array. * ‰ª•Êï∞ÁªÑÁöÑÂΩ¢ÂºèËøîÂõû ÊâÄÊúâÂàóÂêç * * @group basic * @since 1.6.0 */def columns: Array[String] = schema.fields.map(_.name) isLocal123456789/** * Returns true if the `collect` and `take` methods can be run locally * (without any Spark executors). * Â¶ÇÊûú`collect` and `take` ÊñπÊ≥ïËÉΩÂú®Êú¨Âú∞ËøêË°åÔºåÂàôËøîÂõûtrue * * @group basic * @since 1.6.0 */def isLocal: Boolean = logicalPlan.isInstanceOf[LocalRelation] checkpoint12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364/** * Eagerly checkpoint a Dataset and return the new Dataset. Checkpointing can be used to truncate * the logical plan of this Dataset, which is especially useful in iterative algorithms where the * plan may grow exponentially. It will be saved to files inside the checkpoint * directory set with `SparkContext#setCheckpointDir`. * * ÊÄ•ÂàáÂú∞Ê£ÄÊü•‰∏Ä‰∏™Êï∞ÊçÆÈõÜÂπ∂ËøîÂõûÊñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ * Ê£ÄÊü•ÁÇπËÉΩÁî®Êù•Ê∏ÖÈô§DatasetÁöÑÈÄªËæëËÆ°ÂàíÔºåÂ∞§ÂÖ∂ÊòØÂú®ÂèØËÉΩÁîüÊàêÊåáÊï∞Á∫ßÂà´ÁöÑËø≠‰ª£ÁÆóÊ≥ï‰∏≠Â∞§ÂÖ∂ÊúâÁî®„ÄÇ * Â∞Ü‰ºöÂú®Ê£ÄÊü•ÁÇπÁõÆÂΩï‰∏≠‰øùÂ≠òÊ£ÄÊü•Êñá‰ª∂„ÄÇÂèØ‰ª•Âú®`SparkContext#setCheckpointDir`‰∏≠ËÆæÁΩÆ„ÄÇ * * @group basic * @since 2.1.0 */@Experimental@InterfaceStability.Evolvingdef checkpoint(): Dataset[T] = checkpoint(eager = true) /** * Returns a checkpointed version of this Dataset. Checkpointing can be used to truncate the * logical plan of this Dataset, which is especially useful in iterative algorithms where the * plan may grow exponentially. It will be saved to files inside the checkpoint * directory set with `SparkContext#setCheckpointDir`. * ËøîÂõûDataset ‰πãÂâçÊ£ÄÊü•ËøáÁöÑÁâàÊú¨„ÄÇ * Ê£ÄÊü•ÁÇπËÉΩÁî®Êù•Ê∏ÖÈô§DatasetÁöÑÈÄªËæëËÆ°ÂàíÔºåÂ∞§ÂÖ∂ÊòØÂú®ÂèØËÉΩÁîüÊàêÊåáÊï∞Á∫ßÂà´ÁöÑËø≠‰ª£ÁÆóÊ≥ï‰∏≠Â∞§ÂÖ∂ÊúâÁî®„ÄÇ * Â∞Ü‰ºöÂú®Ê£ÄÊü•ÁÇπÁõÆÂΩï‰∏≠‰øùÂ≠òÊ£ÄÊü•Êñá‰ª∂„ÄÇÂèØ‰ª•Âú®`SparkContext#setCheckpointDir`‰∏≠ËÆæÁΩÆ„ÄÇ * * @group basic * @since 2.1.0 */@Experimental@InterfaceStability.Evolvingdef checkpoint(eager: Boolean): Dataset[T] = &#123; val internalRdd = queryExecution.toRdd.map(_.copy()) internalRdd.checkpoint() if (eager) &#123; internalRdd.count() &#125; val physicalPlan = queryExecution.executedPlan // Takes the first leaf partitioning whenever we see a `PartitioningCollection`. Otherwise the // size of `PartitioningCollection` may grow exponentially for queries involving deep inner // joins. // ÊØèÂΩìÊàë‰ª¨ÁúãÂà∞‚ÄúPartitioningCollection‚ÄùÊó∂ÔºåÂ∞±ÈááÁî®Á¨¨‰∏Ä‰∏™Âè∂Â≠êÂàÜÂå∫ // Âê¶ÂàôÔºåÁî®‰∫éÊ∂âÂèäÊ∑±Â∫¶ÂÜÖËøûÊé•ÁöÑÊü•ËØ¢Ôºå‚ÄúPartitioningCollection‚ÄùÁöÑÂ§ßÂ∞èÂèØËÉΩ‰ºö‰ª•ÊåáÊï∞ÂΩ¢ÂºèÂ¢ûÈïø„ÄÇ def firstLeafPartitioning(partitioning: Partitioning): Partitioning = &#123; partitioning match &#123; case p: PartitioningCollection =&gt; firstLeafPartitioning(p.partitionings.head) case p =&gt; p &#125; &#125; val outputPartitioning = firstLeafPartitioning(physicalPlan.outputPartitioning) Dataset.ofRows( sparkSession, LogicalRDD( logicalPlan.output, internalRdd, outputPartitioning, physicalPlan.outputOrdering )(sparkSession)).as[T]&#125; persist1234567891011121314151617181920212223242526272829303132333435/** * Persist this Dataset with the default storage level (`MEMORY_AND_DISK`). * * ÊåÅ‰πÖÂåñ„ÄÇ * Ê†πÊçÆÈªòËÆ§ÁöÑ Â≠òÂÇ®Á∫ßÂà´ (`MEMORY_AND_DISK`) ÊåÅ‰πÖÂåñDataset„ÄÇ * * @group basic * @since 1.6.0 */def persist(): this.type = &#123; sparkSession.sharedState.cacheManager.cacheQuery(this) this&#125; /** * Persist this Dataset with the given storage level. * * Ê†πÊçÆÊåáÂÆöÁöÑ Â≠òÂÇ®Á∫ßÂà´ ÊåÅ‰πÖÂåñ Dataset„ÄÇ * * @param newLevel One of: * `MEMORY_ONLY`, * `MEMORY_AND_DISK`, * `MEMORY_ONLY_SER`, * `MEMORY_AND_DISK_SER`, * `DISK_ONLY`, * `MEMORY_ONLY_2`, ‰∏éMEMORY_ONLYÁöÑÂå∫Âà´ÊòØ‰ºöÂ§á‰ªΩÊï∞ÊçÆÂà∞ÂÖ∂‰ªñËäÇÁÇπ‰∏ä * `MEMORY_AND_DISK_2`, ‰∏éMEMORY_AND_DISKÁöÑÂå∫Âà´ÊòØ‰ºöÂ§á‰ªΩÊï∞ÊçÆÂà∞ÂÖ∂‰ªñËäÇÁÇπ‰∏ä * etc. * @group basic * @since 1.6.0 */def persist(newLevel: StorageLevel): this.type = &#123; sparkSession.sharedState.cacheManager.cacheQuery(this, None, newLevel) this&#125; cache1234567891011/** * Persist this Dataset with the default storage level (`MEMORY_AND_DISK`). * * ÊåÅ‰πÖÂåñ„ÄÇ * Ê†πÊçÆÈªòËÆ§ÁöÑ Â≠òÂÇ®Á∫ßÂà´ (`MEMORY_AND_DISK`) ÊåÅ‰πÖÂåñDataset„ÄÇ * Âíå persist ‰∏ÄËá¥„ÄÇ * * @group basic * @since 1.6.0 */def cache(): this.type = persist() storageLevel12345678910111213/** * Get the Dataset's current storage level, or StorageLevel.NONE if not persisted. * * Ëé∑ÂèñÂΩìÂâçDatasetÁöÑÂΩìÂâçÂ≠òÂÇ®Á∫ßÂà´„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÁºìÂ≠òÂàô StorageLevel.NONE„ÄÇ * * @group basic * @since 2.1.0 */def storageLevel: StorageLevel = &#123; sparkSession.sharedState.cacheManager.lookupCachedData(this).map &#123; cachedData =&gt; cachedData.cachedRepresentation.storageLevel &#125;.getOrElse(StorageLevel.NONE)&#125; unpersist1234567891011121314151617181920212223242526/** * Mark the Dataset as non-persistent, and remove all blocks for it from memory and disk. * * Ëß£Èô§ÊåÅ‰πÖÂåñ„ÄÇ * Â∞ÜDatasetÊ†áËÆ∞‰∏∫ÈùûÊåÅ‰πÖÂåñÔºåÂπ∂‰ªéÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏≠ÁßªÈô§ÊâÄÊúâÁöÑÂùó„ÄÇ * * @param blocking Whether to block until all blocks are deleted. * ÊòØÂê¶ÈòªÂ°ûÔºåÁõ¥Âà∞Âà†Èô§ÊâÄÊúâÁöÑÂùó„ÄÇ * @group basic * @since 1.6.0 */def unpersist(blocking: Boolean): this.type = &#123; sparkSession.sharedState.cacheManager.uncacheQuery(this, blocking) this&#125; /** * Mark the Dataset as non-persistent, and remove all blocks for it from memory and disk. * * Ëß£Èô§ÊåÅ‰πÖÂåñ„ÄÇ * Â∞ÜDatasetÊ†áËÆ∞‰∏∫ÈùûÊåÅ‰πÖÂåñÔºåÂπ∂‰ªéÂÜÖÂ≠òÂíåÁ£ÅÁõò‰∏≠ÁßªÈô§ÊâÄÊúâÁöÑÂùó„ÄÇ * * @group basic * @since 1.6.0 */def unpersist(): this.type = unpersist(blocking = false) rdd123456789101112131415/** * Represents the content of the Dataset as an `RDD` of [[T]]. * * ËΩ¨Êç¢‰∏∫[[T]]ÁöÑ‚ÄúRDD‚ÄùÔºåË°®Á§∫DatasetÁöÑÂÜÖÂÆπ * * @group basic * @since 1.6.0 */lazy val rdd: RDD[T] = &#123; val objectType = exprEnc.deserializer.dataType val deserialized = CatalystSerde.deserialize[T](logicalPlan) sparkSession.sessionState.executePlan(deserialized).toRdd.mapPartitions &#123; rows =&gt; rows.map(_.get(0, objectType).asInstanceOf[T]) &#125;&#125; toJavaRDD12345678910111213141516171819/** * Returns the content of the Dataset as a `JavaRDD` of [[T]]s. * * ËΩ¨Êç¢‰∏∫JavaRDD * * @group basic * @since 1.6.0 */def toJavaRDD: JavaRDD[T] = rdd.toJavaRDD() /** * Returns the content of the Dataset as a `JavaRDD` of [[T]]s. * * ËΩ¨Êç¢‰∏∫JavaRDD * * @group basic * @since 1.6.0 */def javaRDD: JavaRDD[T] = toJavaRDD registerTempTable1234567891011121314/** * Registers this Dataset as a temporary table using the given name. The lifetime of this * temporary table is tied to the [[SparkSession]] that was used to create this Dataset. * * Ê†πÊçÆÊåáÂÆöÁöÑË°®ÂêçÔºåÊ≥®ÂÜå‰∏¥Êó∂Ë°®„ÄÇ * ÁîüÂëΩÂë®Êúü‰∏∫[[SparkSession]]ÁöÑÁîüÂëΩÂë®Êúü„ÄÇ * * @group basic * @since 1.6.0 */@deprecated(\"Use createOrReplaceTempView(viewName) instead.\", \"2.0.0\")def registerTempTable(tableName: String): Unit = &#123; createOrReplaceTempView(tableName)&#125; createTempView123456789101112131415161718192021/** * Creates a local temporary view using the given name. The lifetime of this * temporary view is tied to the [[SparkSession]] that was used to create this Dataset. * * Áî®ÊåáÂÆöÁöÑÂêçÂ≠óÂàõÂª∫Êú¨Âú∞‰∏¥Êó∂Ë°®„ÄÇ * ‰∏é[[SparkSession]] ÂêåÁîüÂëΩÂë®Êúü„ÄÇ * * Local temporary view is session-scoped. Its lifetime is the lifetime of the session that * created it, i.e. it will be automatically dropped when the session terminates. It's not * tied to any databases, i.e. we can't use `db1.view1` to reference a local temporary view. * * Êú¨Âú∞‰∏¥Êó∂Ë°®ÊòØ sessionËåÉÂõ¥ÂÜÖÁöÑ„ÄÇÂΩìÂàõÂª∫ÂÆÉÁöÑsessionÂÅúÊ≠¢ÁöÑÊó∂ÂÄôÔºåËØ•Ë°®‰πüÈöè‰πãÂÅúÊ≠¢„ÄÇ * * @throws AnalysisException if the view name already exists * @group basic * @since 2.0.0 */@throws[AnalysisException]def createTempView(viewName: String): Unit = withPlan &#123; createTempViewCommand(viewName, replace = false, global = false)&#125; createOrReplaceTempView123456789101112/** * Creates a local temporary view using the given name. The lifetime of this * temporary view is tied to the [[SparkSession]] that was used to create this Dataset. * * Áî®ÊåáÂÆöÁöÑÂêçÂ≠óÂàõÂª∫Êú¨Âú∞‰∏¥Êó∂Ë°®„ÄÇÂ¶ÇÊûúÂ∑≤ÁªèÊúâ‰∫ÜÂàôÊõøÊç¢„ÄÇ * * @group basic * @since 2.0.0 */def createOrReplaceTempView(viewName: String): Unit = withPlan &#123; createTempViewCommand(viewName, replace = true, global = false)&#125; createGlobalTempView1234567891011121314151617181920212223/** * Creates a global temporary view using the given name. The lifetime of this * temporary view is tied to this Spark application. * * ÂàõÂª∫ÂÖ®Â±Ä‰∏¥Êó∂Ë°®„ÄÇ * ÁîüÂëΩÂë®Êúü‰∏∫Êï¥‰∏™Spark application. * * Global temporary view is cross-session. Its lifetime is the lifetime of the Spark application, * i.e. it will be automatically dropped when the application terminates. It's tied to a system * preserved database `_global_temp`, and we must use the qualified name to refer a global temp * view, e.g. `SELECT * FROM _global_temp.view1`. * * ÂÖ®Â±Ä‰∏¥Êó∂Ë°®ÊòØË∑®sessionÁöÑ„ÄÇÂ±û‰∫é _global_temp Êï∞ÊçÆÂ∫ì„ÄÇe.g. `SELECT * FROM _global_temp.view1`. * * @throws AnalysisException if the view name already exists * Â¶ÇÊûúË°®Â∑≤ÁªèÂ≠òÂú®ÔºåÂàôÊä•Èîô„ÄÇ * @group basic * @since 2.1.0 */@throws[AnalysisException]def createGlobalTempView(viewName: String): Unit = withPlan &#123; createTempViewCommand(viewName, replace = false, global = true)&#125; write123456789101112131415/** * Interface for saving the content of the non-streaming Dataset out into external storage. * * Â∞ÜÈùûÊµÅDatasetÁöÑÂÜÖÂÆπ‰øùÂ≠òÂà∞Â§ñÈÉ®Â≠òÂÇ®‰∏≠ÁöÑÊé•Âè£„ÄÇ * * @group basic * @since 1.6.0 */def write: DataFrameWriter[T] = &#123; if (isStreaming) &#123; logicalPlan.failAnalysis( \"'write' can not be called on streaming Dataset/DataFrame\") &#125; new DataFrameWriter[T](this)&#125; writeStream123456789101112131415161718/** * :: Experimental :: * Interface for saving the content of the streaming Dataset out into external storage. * * Â∞ÜÊµÅDataset‰øùÂ≠òÂú®Â§ñÈÉ®Â≠òÂÇ®„ÄÇ * * @group basic * @since 2.0.0 */@Experimental@InterfaceStability.Evolvingdef writeStream: DataStreamWriter[T] = &#123; if (!isStreaming) &#123; logicalPlan.failAnalysis( \"'writeStream' can be called only on streaming Dataset/DataFrame\") &#125; new DataStreamWriter[T](this)&#125; toJSON1234567891011121314151617181920212223242526272829303132333435/** * Returns the content of the Dataset as a Dataset of JSON strings. * * Â∞ÜDatasetËΩ¨Êç¢‰∏∫JSON„ÄÇ * * @since 2.0.0 */def toJSON: Dataset[String] = &#123; val rowSchema = this.schema val rdd: RDD[String] = queryExecution.toRdd.mapPartitions &#123; iter =&gt; val writer = new CharArrayWriter() // create the Generator without separator inserted between 2 records val gen = new JacksonGenerator(rowSchema, writer) new Iterator[String] &#123; override def hasNext: Boolean = iter.hasNext override def next(): String = &#123; gen.write(iter.next()) gen.flush() val json = writer.toString if (hasNext) &#123; writer.reset() &#125; else &#123; gen.close() &#125; json &#125; &#125; &#125; import sparkSession.implicits.newStringEncoder sparkSession.createDataset(rdd)&#125; inputFiles12345678910111213141516171819202122/** * Returns a best-effort snapshot of the files that compose this Dataset. This method simply * asks each constituent BaseRelation for its respective files and takes the union of all results. * Depending on the source relations, this may not find all input files. Duplicates are removed. * * ËøîÂõûÁªÑÊàêËøô‰∏™DatasetÁöÑÊâÄÊúâÊñá‰ª∂ÁöÑÊúÄ‰Ω≥Âø´ÁÖß„ÄÇ * ËØ•ÊñπÊ≥ïÁÆÄÂçïÂú∞Ë¶ÅÊ±ÇÊØè‰∏™ÁªÑ‰ª∂BaseRelationÂØπÂÖ∂ÂêÑËá™ÁöÑÊñá‰ª∂ËøõË°åÂ§ÑÁêÜÔºåÂπ∂ËÅîÂêàÊâÄÊúâÁªìÊûú„ÄÇ * Âü∫‰∫éÊ∫êÂÖ≥Á≥ªÔºåÂ∫îËØ•ÂèØ‰ª•ÊâæÂà∞ÊâÄÊúâÁöÑËæìÂÖ•Êñá‰ª∂„ÄÇ * ÈáçÂ§çÁöÑ‰πü‰ºöË¢´ÁßªÈô§„ÄÇ * * @group basic * @since 2.0.0 */def inputFiles: Array[String] = &#123; val files: Seq[String] = queryExecution.optimizedPlan.collect &#123; case LogicalRelation(fsBasedRelation: FileRelation, _, _) =&gt; fsBasedRelation.inputFiles case fr: FileRelation =&gt; fr.inputFiles &#125;.flatten files.toSet.toArray&#125; streamingisStreaming123456789101112131415161718/** * Returns true if this Dataset contains one or more sources that continuously * return data as it arrives. A Dataset that reads data from a streaming source * must be executed as a `StreamingQuery` using the `start()` method in * `DataStreamWriter`. Methods that return a single answer, e.g. `count()` or * `collect()`, will throw an [[AnalysisException]] when there is a streaming * source present. * * Â¶ÇÊûúDatasetÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™ÊåÅÁª≠ËøîÂõûÊï∞ÊçÆÁöÑÊ∫êÔºåÂàôËøîÂõûtrueÔºõ * Â¶ÇÊûúDataset‰ªéstreamingÊ∫êËØªÂèñÊï∞ÊçÆÔºåÂàôÂøÖÈ°ªÂÉè `StreamingQuery` ‰∏ÄÊ†∑ÊâßË°åÔºö‰ΩøÁî® `DataStreamWriter` ‰∏≠ÁöÑ `start()`ÊñπÊ≥ï„ÄÇ * ËøîÂõûÂçï‰∏™ÂÄºÁöÑÊñπÊ≥ïÔºå‰æãÂ¶ÇÔºö `count()` or `collect()`ÔºåÂΩìÂ≠òÂú®streamingÊ∫êÊó∂ÔºåÂ∞Ü‰ºöÊäõÂá∫[[AnalysisException]]„ÄÇ * * @group streaming * @since 2.0.0 */@Experimental@InterfaceStability.Evolvingdef isStreaming: Boolean = logicalPlan.isStreaming withWatermark123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * :: Experimental :: ÂÆûÈ™åÊÄßÁöÑ * Defines an event time watermark for this [[Dataset]]. A watermark tracks a point in time * before which we assume no more late data is going to arrive. * * ‰∏∫Ëøô‰∏™[[Dataset]]ÂÆö‰πâ‰∫ã‰ª∂Êó∂Èó¥Ê∞¥Âç∞„ÄÇ * Êàë‰ª¨ÂÅáËÆæÊ≤°ÊúâÊõ¥Â§öÁöÑÊôöÊúüÊï∞ÊçÆÂ∞ÜÂà∞Ëææ‰πãÂâçÔºå‰∏Ä‰∏™Ê∞¥Âç∞Ë∑üË∏™‰∏Ä‰∏™Êó∂Èó¥ÁÇπ„ÄÇ * * Spark will use this watermark for several purposes: * SparkÁî®Ê∞¥Âç∞ÊúâÂá†‰∏™ÁõÆÁöÑÔºö * - To know when a given time window aggregation can be finalized and thus can be emitted when * using output modes that do not allow updates. * * ÂèØ‰ª•Áü•ÈÅì‰ΩïÊó∂ÂÆåÊàêÁªôÂÆöÁöÑÊó∂Èó¥Á™óÂè£ËÅöÂêàËÉΩÂ§üÂÆåÊàêÔºåÂõ†Ê≠§ÂΩì‰ΩøÁî®‰∏çÂÖÅËÆ∏Êõ¥Êñ∞ÁöÑËæìÂá∫Ê®°ÂºèÊó∂ËÉΩÂ§üË¢´ÊîæÂá∫„ÄÇ * - To minimize the amount of state that we need to keep for on-going aggregations. * ‰∏∫‰∫ÜÊúÄÂ∞èÂåñÊàë‰ª¨ÈúÄË¶ÅÊåÅÁª≠‰∏çÊñ≠ÁöÑËÅöÂêàÁöÑÁä∂ÊÄÅÊï∞Èáè„ÄÇ * * * The current watermark is computed by looking at the `MAX(eventTime)` seen across * all of the partitions in the query minus a user specified `delayThreshold`. Due to the cost * of coordinating this value across partitions, the actual watermark used is only guaranteed * to be at least `delayThreshold` behind the actual event time. In some cases we may still * process records that arrive more than `delayThreshold` late. * * ÂΩìÂâçÁöÑÊ∞¥Âç∞ = Êü•ÁúãÊü•ËØ¢‰∏≠ÊâÄÊúâÂàÜÂå∫‰∏äÁúãÂà∞ÁöÑ`MAX(eventTime)` - Áî®Êà∑ÊåáÂÆöÁöÑ`delayThreshold` * Áî±‰∫éÂú®ÂàÜÂå∫‰πãÈó¥ÂçèË∞ÉËøô‰∏™ÂÄºÁöÑËä±ÈîÄÔºåÂÆûÈôÖ‰ΩøÁî®ÁöÑÊ∞¥Âç∞Âè™‰øùËØÅÂú®ÂÆûÈôÖ‰∫ã‰ª∂Êó∂Èó¥ÂêéËá≥Â∞ëÊòØ‚ÄúdelayThreshold‚Äù„ÄÇ * Âú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂèØËÉΩËøò‰ºöÂ§ÑÁêÜÊØî‚ÄúdelayThreshold‚ÄùÊôö‰∫õÊó∂ÂÄôÂà∞ËææÁöÑËÆ∞ÂΩï„ÄÇ * * @param eventTime the name of the column that contains the event time of the row. * ÂåÖÂê´Ë°åÁöÑ‰∫ã‰ª∂Êó∂Èó¥ÁöÑÂàóÂêç * @param delayThreshold the minimum delay to wait to data to arrive late, relative to the latest * record that has been processed in the form of an interval * (e.g. \"1 minute\" or \"5 hours\"). * Á≠âÂæÖÊôöÂà∞Êï∞ÊçÆÁöÑÊúÄÂ∞ëÂª∂ËøüÔºåÁõ∏ÂØπ‰∫é‰ª•Èó¥ÈöîÂΩ¢ÂºèÂ§ÑÁêÜÁöÑÊúÄÊñ∞ËÆ∞ÂΩï * @group streaming * @since 2.1.0 */@Experimental@InterfaceStability.Evolving// We only accept an existing column name, not a derived column here as a watermark that is// defined on a derived column cannot referenced elsewhere in the plan.// Êàë‰ª¨Âè™Êé•Âèó‰∏Ä‰∏™Áé∞ÊúâÁöÑÂàóÂêçÔºåËÄå‰∏çÊòØ‰Ωú‰∏∫‰∏Ä‰∏™Âú®Ê¥æÁîüÂàó‰∏äÂÆö‰πâÁöÑÊ∞¥Âç∞ÁöÑÊ¥æÁîüÂàóÔºåËÄå‰∏çËÉΩÂú®ËØ•ËÆ°ÂàíÁöÑÂÖ∂‰ªñÂú∞ÊñπÂºïÁî®„ÄÇdef withWatermark(eventTime: String, delayThreshold: String): Dataset[T] = withTypedPlan &#123; val parsedDelay = Option(CalendarInterval.fromString(\"interval \" + delayThreshold)) .getOrElse(throw new AnalysisException(s\"Unable to parse time delay '$delayThreshold'\")) EventTimeWatermark(UnresolvedAttribute(eventTime), parsedDelay, logicalPlan)&#125; actionshow123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990/** * Displays the Dataset in a tabular form. Strings more than 20 characters will be truncated, * and all cells will be aligned right. For example: * * ‰ª•Ë°®Ê†ºÂΩ¢ÂºèÊòæÁ§∫Êï∞ÊçÆÈõÜ„ÄÇ * Â≠óÁ¨¶‰∏≤Ë∂ÖËøá20‰∏™Â≠óÁ¨¶Â∞ÜË¢´Êà™Êñ≠Ôºå * ÊâÄÊúâÂçïÂÖÉÊ†ºÂ∞ÜË¢´ÂØπÈΩê„ÄÇ * &#123;&#123;&#123; * year month AVG('Adj Close) MAX('Adj Close) * 1980 12 0.503218 0.595103 * 1981 01 0.523289 0.570307 * 1982 02 0.436504 0.475256 * 1983 03 0.410516 0.442194 * 1984 04 0.450090 0.483521 * &#125;&#125;&#125; * * @param numRows Number of rows to show Ë¶ÅÊòæÁ§∫ÁöÑË°åÊï∞ * @group action * @since 1.6.0 */def show(numRows: Int): Unit = show(numRows, truncate = true) /** * Displays the top 20 rows of Dataset in a tabular form. Strings more than 20 characters * will be truncated, and all cells will be aligned right. * ÊòæÁ§∫Â§¥20Ë°å * * @group action * @since 1.6.0 */def show(): Unit = show(20)/** * Displays the top 20 rows of Dataset in a tabular form. * ÊòæÁ§∫Â§¥20Ë°å * * @param truncate Whether truncate long strings. If true, strings more than 20 characters will * be truncated and all cells will be aligned right * ÊòØÂê¶Êà™Êñ≠ÈïøÂ≠óÁ¨¶‰∏≤„ÄÇÂ¶ÇÊûú trueÔºöË∂ÖËøá20‰∏™Â≠óÁ¨¶Â∞±‰ºöË¢´Êà™Êñ≠ * @group action * @since 1.6.0 */def show(truncate: Boolean): Unit = show(20, truncate)/** * Displays the Dataset in a tabular form. For example: * &#123;&#123;&#123; * year month AVG('Adj Close) MAX('Adj Close) * 1980 12 0.503218 0.595103 * 1981 01 0.523289 0.570307 * 1982 02 0.436504 0.475256 * 1983 03 0.410516 0.442194 * 1984 04 0.450090 0.483521 * &#125;&#125;&#125; * * @param numRows Number of rows to show ÊòæÁ§∫ÁöÑË°åÊï∞ * @param truncate Whether truncate long strings. If true, strings more than 20 characters will * be truncated and all cells will be aligned right * ÊòØÂê¶Êà™Êñ≠ÈïøÂ≠óÁ¨¶‰∏≤ * @group action * @since 1.6.0 */// scalastyle:off printlndef show(numRows: Int, truncate: Boolean): Unit = if (truncate) &#123; println(showString(numRows, truncate = 20))&#125; else &#123; println(showString(numRows, truncate = 0))&#125;// scalastyle:on println/** * Displays the Dataset in a tabular form. For example: * &#123;&#123;&#123; * year month AVG('Adj Close) MAX('Adj Close) * 1980 12 0.503218 0.595103 * 1981 01 0.523289 0.570307 * 1982 02 0.436504 0.475256 * 1983 03 0.410516 0.442194 * 1984 04 0.450090 0.483521 * &#125;&#125;&#125; * * @param numRows Number of rows to show * @param truncate If set to more than 0, truncates strings to `truncate` characters and * all cells will be aligned right. * ËÆæÁΩÆ Ëß¶ÂèëÊà™Êñ≠Â≠óÁ¨¶‰∏≤ÁöÑÈòàÂÄº * @group action * @since 1.6.0 */// scalastyle:off printlndef show(numRows: Int, truncate: Int): Unit = println(showString(numRows, truncate)) reduce1234567891011121314151617181920212223242526272829/** * :: Experimental :: * (Scala-specific) * Reduces the elements of this Dataset using the specified binary function. The given `func` * must be commutative and associative or the result may be non-deterministic. * * ‰ΩøÁî®ÊåáÂÆöÁöÑ‰∫åËøõÂà∂ÂáΩÊï∞ÂáèÂ∞ëËøô‰∏™Êï∞ÊçÆÈõÜÁöÑÂÖÉÁ¥†„ÄÇÁªôÂÆöÁöÑ‚Äúfunc‚ÄùÂøÖÈ°ªÊòØÂèØ‰∫§Êç¢ÁöÑÂíåÂÖ≥ËÅîÁöÑÔºåÂê¶ÂàôÁªìÊûúÂèØËÉΩÊòØ‰∏çÁ°ÆÂÆöÊÄßÁöÑ„ÄÇ * * @group action * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef reduce(func: (T, T) =&gt; T): T = rdd.reduce(func)/** * :: Experimental :: * (Java-specific) * Reduces the elements of this Dataset using the specified binary function. The given `func` * must be commutative and associative or the result may be non-deterministic. * * ‰ΩøÁî®ÊåáÂÆöÁöÑ‰∫åËøõÂà∂ÂáΩÊï∞ÂáèÂ∞ëËøô‰∏™Êï∞ÊçÆÈõÜÁöÑÂÖÉÁ¥†„ÄÇÁªôÂÆöÁöÑ‚Äúfunc‚ÄùÂøÖÈ°ªÊòØÂèØ‰∫§Êç¢ÁöÑÂíåÂÖ≥ËÅîÁöÑÔºåÂê¶ÂàôÁªìÊûúÂèØËÉΩÊòØ‰∏çÁ°ÆÂÆöÊÄßÁöÑ„ÄÇ * * @group action * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef reduce(func: ReduceFunction[T]): T = reduce(func.call(_, _)) describe123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566/** * Computes statistics for numeric and string columns, including count, mean, stddev, min, and * max. If no columns are given, this function computes statistics for all numerical or string * columns. * * ËÆ°ÁÆóÊï∞Â≠óÂíåÂ≠óÁ¨¶‰∏≤ÂàóÁöÑÁªüËÆ°Êï∞ÊçÆÔºåÂåÖÊã¨count„ÄÅmean„ÄÅstddev„ÄÅminÂíåmax„ÄÇ * Â¶ÇÊûúÊ≤°ÊúâÁªôÂá∫‰ªª‰ΩïÂàóÔºåËØ•ÂáΩÊï∞ËÆ°ÁÆóÊâÄÊúâÊï∞ÂÄºÊàñÂ≠óÁ¨¶‰∏≤ÂàóÁöÑÁªüËÆ°‰ø°ÊÅØ„ÄÇ * * This function is meant for exploratory data analysis, as we make no guarantee about the * backward compatibility of the schema of the resulting Dataset. If you want to * programmatically compute summary statistics, use the `agg` function instead. * * Ëøô‰∏™ÂáΩÊï∞Áî®‰∫éÊé¢Á¥¢ÊÄßÁöÑÊï∞ÊçÆÂàÜÊûêÔºåÂõ†‰∏∫Êàë‰ª¨‰∏çËÉΩ‰øùËØÅÁîüÊàêÊï∞ÊçÆÈõÜÁöÑÊ®°ÂºèÁöÑÂêëÂêéÂÖºÂÆπÊÄß„ÄÇ * Â¶ÇÊûúÊÇ®ÊÉ≥ÈÄöËøáÁºñÁ®ãËÆ°ÁÆóÊ±áÊÄªÁªüËÆ°‰ø°ÊÅØÔºåÂèØ‰ª•‰ΩøÁî®‚Äúagg‚ÄùÂáΩÊï∞„ÄÇ * * &#123;&#123;&#123; * ds.describe(\"age\", \"height\").show() * * // output: * // summary age height * // count 10.0 10.0 * // mean 53.3 178.05 * // stddev 11.6 15.7 * // min 18.0 163.0 * // max 92.0 192.0 * &#125;&#125;&#125; * * @group action * @since 1.6.0 */ @scala.annotation.varargs def describe(cols: String*): DataFrame = withPlan &#123; // The list of summary statistics to compute, in the form of expressions. val statistics = List[(String, Expression =&gt; Expression)]( \"count\" -&gt; ((child: Expression) =&gt; Count(child).toAggregateExpression()), \"mean\" -&gt; ((child: Expression) =&gt; Average(child).toAggregateExpression()), \"stddev\" -&gt; ((child: Expression) =&gt; StddevSamp(child).toAggregateExpression()), \"min\" -&gt; ((child: Expression) =&gt; Min(child).toAggregateExpression()), \"max\" -&gt; ((child: Expression) =&gt; Max(child).toAggregateExpression())) val outputCols = (if (cols.isEmpty) aggregatableColumns.map(usePrettyExpression(_).sql) else cols).toList val ret: Seq[Row] = if (outputCols.nonEmpty) &#123; val aggExprs = statistics.flatMap &#123; case (_, colToAgg) =&gt; outputCols.map(c =&gt; Column(Cast(colToAgg(Column(c).expr), StringType)).as(c)) &#125; val row = groupBy().agg(aggExprs.head, aggExprs.tail: _*).head().toSeq // Pivot the data so each summary is one row row.grouped(outputCols.size).toSeq.zip(statistics).map &#123; case (aggregation, (statistic, _)) =&gt; Row(statistic :: aggregation.toList: _*) &#125; &#125; else &#123; // If there are no output columns, just output a single column that contains the stats. statistics.map &#123; case (name, _) =&gt; Row(name) &#125; &#125; // All columns are string type val schema = StructType( StructField(\"summary\", StringType) :: outputCols.map(StructField(_, StringType))).toAttributes // `toArray` forces materialization to make the seq serializable LocalRelation.fromExternalRows(schema, ret.toArray.toSeq) &#125; head123456789101112131415161718192021222324/** * Returns the first `n` rows. * * ËøîÂõûÂâçnË°å * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. * ‰ªÖÈÄÇÁî®‰∫éÁªìÊûúÂæàÂ∞ëÁöÑÊó∂ÂÄô‰ΩøÁî®ÔºåÂõ†‰∏∫‰ºöÂ∞ÜÁªìÊûúÂä†ËΩΩËøõÂÜÖÂ≠ò‰∏≠ * @group action * @since 1.6.0 */def head(n: Int): Array[T] = withTypedCallback(\"head\", limit(n)) &#123; df =&gt; df.collect(needCallback = false)&#125;/** * Returns the first row. * * ËøîÂõûÁ¨¨‰∏ÄË°åÔºàÈªòËÆ§1Ôºâ * * @group action * @since 1.6.0 */def head(): T = head(1).head first123456789/** * Returns the first row. Alias for head(). * * ËøîÂõûÁ¨¨‰∏ÄË°å Ôºå‰∏éhead()‰∏ÄÊ†∑ * * @group action * @since 1.6.0 */def first(): T = head() foreach12345678910111213141516171819202122/** * Applies a function `f` to all rows. * * ÂØπÊâÄÊúâË°åÂ∫îÁî®ÂáΩÊï∞f„ÄÇ * * @group action * @since 1.6.0 */def foreach(f: T =&gt; Unit): Unit = withNewExecutionId &#123; rdd.foreach(f)&#125;/** * (Java-specific) * Runs `func` on each element of this Dataset. * * Âú®Ëøô‰∏™Êï∞ÊçÆÈõÜÁöÑÊØè‰∏™ÂÖÉÁ¥†‰∏äËøêË°å‚Äúfunc‚Äù„ÄÇ * * @group action * @since 1.6.0 */def foreach(func: ForeachFunction[T]): Unit = foreach(func.call(_)) foreachPartition1234567891011121314151617181920212223/** * Applies a function `f` to each partition of this Dataset. * * ÂØπËøô‰∏™Êï∞ÊçÆÈõÜÁöÑÊØè‰∏™ÂàÜÂå∫Â∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞f„ÄÇ * * @group action * @since 1.6.0 */def foreachPartition(f: Iterator[T] =&gt; Unit): Unit = withNewExecutionId &#123; rdd.foreachPartition(f)&#125;/** * (Java-specific) * Runs `func` on each partition of this Dataset. * * ÂØπËøô‰∏™Êï∞ÊçÆÈõÜÁöÑÊØè‰∏™ÂàÜÂå∫Â∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞f„ÄÇ * * @group action * @since 1.6.0 */def foreachPartition(func: ForeachPartitionFunction[T]): Unit = foreachPartition(it =&gt; func.call(it.asJava)) take123456789101112131415/** * Returns the first `n` rows in the Dataset. * * ËøîÂõûÊï∞ÊçÆÈõÜ‰∏≠ÁöÑÂâç‚Äún‚ÄùË°å„ÄÇ * Âêåhead(n) * * Running take requires moving data into the application's driver process, and doing so with * a very large `n` can crash the driver process with OutOfMemoryError. * * takeÂú®driverÁ´ØÊâßË°åÔºånÂ§™Â§ß‰ºöÈÄ†Êàêoom * * @group action * @since 1.6.0 */def take(n: Int): Array[T] = head(n) takeAsList1234567891011121314/** * Returns the first `n` rows in the Dataset as a list. * * ‰ª•ListÂΩ¢ÂºèËøîÂõû ÂâçnË°å * * Running take requires moving data into the application's driver process, and doing so with * a very large `n` can crash the driver process with OutOfMemoryError. * * takeÂú®driverÁ´ØÊâßË°åÔºånÂ§™Â§ß‰ºöÈÄ†Êàêoom * * @group action * @since 1.6.0 */def takeAsList(n: Int): java.util.List[T] = java.util.Arrays.asList(take(n): _*) collect12345678910111213141516/** * Returns an array that contains all of [[Row]]s in this Dataset. * * ËøîÂõûÂåÖÂê´ÊâÄÊúâRowÁöÑ ‰∏Ä‰∏™Êï∞ÁªÑ * * Running collect requires moving all the data into the application's driver process, and * doing so on a very large dataset can crash the driver process with OutOfMemoryError. * * ‰ºöÂ∞ÜÊâÄÊúâÊï∞ÊçÆÁßªÂä®Âà∞driverÔºåÊâÄ‰ª•ÂèØËÉΩ‰ºöÈÄ†Êàêoom * * For Java API, use [[collectAsList]]. * * @group action * @since 1.6.0 */def collect(): Array[T] = collect(needCallback = true) collectAsList12345678910111213141516171819/** * Returns a Java list that contains all of [[Row]]s in this Dataset. * * ËøîÂõûÂåÖÂê´ÊâÄÊúâRowÁöÑ‰∏Ä‰∏™Java List * * Running collect requires moving all the data into the application's driver process, and * doing so on a very large dataset can crash the driver process with OutOfMemoryError. * * ‰ºöÂ∞ÜÊâÄÊúâÊï∞ÊçÆÁßªÂä®Âà∞driverÔºåÊâÄ‰ª•ÂèØËÉΩ‰ºöÈÄ†Êàêoom * * @group action * @since 1.6.0 */def collectAsList(): java.util.List[T] = withCallback(\"collectAsList\", toDF()) &#123; _ =&gt; withNewExecutionId &#123; val values = queryExecution.executedPlan.executeCollect().map(boundEnc.fromRow) java.util.Arrays.asList(values: _*) &#125;&#125; toLocalIterator12345678910111213141516171819202122/** * Return an iterator that contains all of [[Row]]s in this Dataset. * * ËøîÂõûÂåÖÂê´ÊâÄÊúâRowÁöÑ‰∏Ä‰∏™Ëø≠‰ª£Âô® * * The iterator will consume as much memory as the largest partition in this Dataset. * * Ëø≠‰ª£Âô®Â∞ÜÊ∂àËÄó‰∏éÊ≠§Êï∞ÊçÆÈõÜ‰∏≠ÊúÄÂ§ßÁöÑÂàÜÂå∫‰∏ÄÊ†∑Â§öÁöÑÂÜÖÂ≠ò„ÄÇ * * @note this results in multiple Spark jobs, and if the input Dataset is the result * of a wide transformation (e.g. join with different partitioners), to avoid * recomputing the input Dataset should be cached first. * ËøôÂ∞ÜÂØºËá¥Â§ö‰∏™Spark‰Ωú‰∏öÔºåÂ¶ÇÊûúËæìÂÖ•Êï∞ÊçÆÈõÜÊòØÂÆΩ‰æùËµñËΩ¨Êç¢ÁöÑÁªìÊûú(‰æãÂ¶ÇÔºå‰∏é‰∏çÂêåÁöÑÂàÜÂå∫ËøûÊé•)Ôºå * ÈÇ£‰πà‰∏∫‰∫ÜÈÅøÂÖçÈáçÊñ∞ËÆ°ÁÆóËæìÂÖ•Êï∞ÊçÆÔºåÂ∫îËØ•È¶ñÂÖàÁºìÂ≠òËæìÂÖ•Êï∞ÊçÆÈõÜ„ÄÇ * @group action * @since 2.0.0 */def toLocalIterator(): java.util.Iterator[T] = withCallback(\"toLocalIterator\", toDF()) &#123; _ =&gt; withNewExecutionId &#123; queryExecution.executedPlan.executeToIterator().map(boundEnc.fromRow).asJava &#125;&#125; count1234567891011/** * Returns the number of rows in the Dataset. * * ËøîÂõûÊÄªË°åÊï∞ * * @group action * @since 1.6.0 */def count(): Long = withCallback(\"count\", groupBy().count()) &#123; df =&gt; df.collect(needCallback = false).head.getLong(0)&#125; untypedrel-Êó†Á±ªÂûãËΩ¨Êç¢na123456789101112/** * Returns a [[DataFrameNaFunctions]] for working with missing data. * ËøîÂõû‰∏Ä‰∏™Áî®‰∫éÂ§ÑÁêÜ‰∏¢Â§±Êï∞ÊçÆÁöÑ[[DataFrameNaFunctions]]„ÄÇ * &#123;&#123;&#123; * // Dropping rows containing any null values. Âà†Èô§ÂåÖÂê´‰ªª‰Ωïnull ÂÄºÁöÑË°å * ds.na.drop() * &#125;&#125;&#125; * * @group untypedrel * @since 1.6.0 */def na: DataFrameNaFunctions = new DataFrameNaFunctions(toDF()) stat123456789101112/** * Returns a [[DataFrameStatFunctions]] for working statistic functions support. * ËøîÂõûÁî®‰∫éÊîØÊåÅÁªüËÆ°ÂäüËÉΩÁöÑ[[DataFrameStatFunctions]]„ÄÇ * &#123;&#123;&#123; * // Finding frequent items in column with name 'a'. Êü•ËØ¢ÂàóÂêç‰∏∫\"a\"‰∏≠ÁöÑÈ¢ëÁπÅÊï∞ÊçÆ„ÄÇ * ds.stat.freqItems(Seq(\"a\")) * &#125;&#125;&#125; * * @group untypedrel * @since 1.6.0 */def stat: DataFrameStatFunctions = new DataFrameStatFunctions(toDF()) join123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180/** * Join with another `DataFrame`. * Âíå Âè¶‰∏Ä‰∏™ `DataFrame` jion * * Behaves as an INNER JOIN and requires a subsequent join predicate. * ‰Ωú‰∏∫‰∏Ä‰∏™ÂÜÖÈÉ®ËøûÊé•ÔºåÂπ∂ÈúÄË¶Å‰∏Ä‰∏™ÂêéÁª≠ÁöÑËøûÊé•Ë∞ìËØç„ÄÇ * * @param right Right side of the join operation. joinÊìç‰ΩúÁöÑÂè≥‰æß * @group untypedrel * @since 2.0.0 */ def join(right: Dataset[_]): DataFrame = withPlan &#123; Join(logicalPlan, right.logicalPlan, joinType = Inner, None) &#125; /** * Inner equi-join with another `DataFrame` using the given column. * ÁªôÂÆöÂàóÂêçÁöÑÂÜÖÈÉ®Á≠âÂÄºËøûÊé• * * Different from other join functions, the join column will only appear once in the output, * i.e. similar to SQL's `JOIN USING` syntax. * * &#123;&#123;&#123; * // Joining df1 and df2 using the column \"user_id\" Áî®\"user_id\" ËøûÊé• df1 Âíådf2 * df1.join(df2, \"user_id\") * &#125;&#125;&#125; * * @param right Right side of the join operation. joinËøûÊé•Âè≥‰æß * @param usingColumn Name of the column to join on. This column must exist on both sides. * ÂàóÂêç„ÄÇÂøÖÈ°ªÂú®‰∏§ËæπÈÉΩÂ≠òÂú® * @note If you perform a self-join using this function without aliasing the input * `DataFrame`s, you will NOT be able to reference any columns after the join, since * there is no way to disambiguate which side of the join you would like to reference. * Ëá™ËøûÊé•ÁöÑÊó∂ÂÄôÔºåËØ∑ÊåáÂÆö Ë°®Âà´Âêç„ÄÇ‰∏çÁÑ∂Âπ≤‰∏ç‰∫Ü‰∫ã * @group untypedrel * @since 2.0.0 */ def join(right: Dataset[_], usingColumn: String): DataFrame = &#123; join(right, Seq(usingColumn)) &#125; /** * Inner equi-join with another `DataFrame` using the given columns. * Ê†πÊçÆÊåáÂÆöÂ§ö‰∏™ÂàóËøõË°åjoin * * Different from other join functions, the join columns will only appear once in the output, * i.e. similar to SQL's `JOIN USING` syntax. * * &#123;&#123;&#123; * // Joining df1 and df2 using the columns \"user_id\" and \"user_name\" * df1.join(df2, Seq(\"user_id\", \"user_name\")) * &#125;&#125;&#125; * * @param right Right side of the join operation. * @param usingColumns Names of the columns to join on. This columns must exist on both sides. * @note If you perform a self-join using this function without aliasing the input * `DataFrame`s, you will NOT be able to reference any columns after the join, since * there is no way to disambiguate which side of the join you would like to reference. * @group untypedrel * @since 2.0.0 */ def join(right: Dataset[_], usingColumns: Seq[String]): DataFrame = &#123; join(right, usingColumns, \"inner\") &#125; /** * Equi-join with another `DataFrame` using the given columns. * * Different from other join functions, the join columns will only appear once in the output, * i.e. similar to SQL's `JOIN USING` syntax. * * @param right Right side of the join operation. * @param usingColumns Names of the columns to join on. This columns must exist on both sides. * @param joinType One of: `inner`, `outer`, `left_outer`, `right_outer`, `leftsemi`. * ËøûÊé•Á±ªÂûãÔºöÂÜÖËøûÊé•ÔºåÂ§ñËøûÊé•ÔºåÂ∑¶Â§ñËøûÊé•ÔºåÂè≥Â§ñËøûÊé•ÔºåÂ∑¶ÂÜÖËøûÊé• * @note If you perform a self-join using this function without aliasing the input * `DataFrame`s, you will NOT be able to reference any columns after the join, since * there is no way to disambiguate which side of the join you would like to reference. * @group untypedrel * @since 2.0.0 */ def join(right: Dataset[_], usingColumns: Seq[String], joinType: String): DataFrame = &#123; // Analyze the self join. The assumption is that the analyzer will disambiguate left vs right // by creating a new instance for one of the branch. // Ëá™ËøûÊé•ÁöÑÊó∂ÂÄôÔºå‰∏∫ÂÖ∂‰∏≠‰∏Ä‰∏™ÂàÜÊîØÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂÆû‰æãÊù•Ê∂àÈô§Â∑¶vsÂè≥ÁöÑÊ≠ß‰πâ„ÄÇ val joined = sparkSession.sessionState.executePlan( Join(logicalPlan, right.logicalPlan, joinType = JoinType(joinType), None)) .analyzed.asInstanceOf[Join] withPlan &#123; Join( joined.left, joined.right, UsingJoin(JoinType(joinType), usingColumns), None) &#125; &#125; /** * Inner join with another `DataFrame`, using the given join expression. * Áî®ÁªôÂÆöÁöÑË°®ËææÂºèËøõË°åjoin * &#123;&#123;&#123; * // The following two are equivalent: * df1.join(df2, $\"df1Key\" === $\"df2Key\") * df1.join(df2).where($\"df1Key\" === $\"df2Key\") * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ def join(right: Dataset[_], joinExprs: Column): DataFrame = join(right, joinExprs, \"inner\") /** * Join with another `DataFrame`, using the given join expression. The following performs * a full outer join between `df1` and `df2`. * * &#123;&#123;&#123; * // Scala: * import org.apache.spark.sql.functions._ * df1.join(df2, $\"df1Key\" === $\"df2Key\", \"outer\") * * // Java: * import static org.apache.spark.sql.functions.*; * df1.join(df2, col(\"df1Key\").equalTo(col(\"df2Key\")), \"outer\"); * &#125;&#125;&#125; * * @param right Right side of the join. * @param joinExprs Join expression. * @param joinType One of: `inner`, `outer`, `left_outer`, `right_outer`, `leftsemi`. * @group untypedrel * @since 2.0.0 */ def join(right: Dataset[_], joinExprs: Column, joinType: String): DataFrame = &#123; // Note that in this function, we introduce a hack in the case of self-join to automatically // resolve ambiguous join conditions into ones that might make sense [SPARK-6231]. // Consider this case: df.join(df, df(\"key\") === df(\"key\")) // Since df(\"key\") === df(\"key\") is a trivially true condition, this actually becomes a // cartesian join. However, most likely users expect to perform a self join using \"key\". // With that assumption, this hack turns the trivially true condition into equality on join // keys that are resolved to both sides. // Trigger analysis so in the case of self-join, the analyzer will clone the plan. // After the cloning, left and right side will have distinct expression ids. // ÈíàÂØπËá™ËøûÊé•ÁöÑ‰ºòÂåñÔºöÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåËá™ËøûÊé•Â¶ÇÊûú‰ΩøÁî® df.join(df, df(\"key\") === df(\"key\")) // ‰ºöÈÄ†Êàê Á¨õÂç°Â∞îÁßØ // ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂàÜÊûêÂô®‰ºö ÂÖãÈöÜËÆ°ÂàíÔºåÂÖãÈöÜÂÆåÊàêÂêéÔºåÂ∑¶Âè≥‰∏§ËæπÂàôÊúâ‰∏çÂêåÁöÑ id val plan = withPlan( Join(logicalPlan, right.logicalPlan, JoinType(joinType), Some(joinExprs.expr))) .queryExecution.analyzed.asInstanceOf[Join] // If auto self join alias is disabled, return the plan. if (!sparkSession.sessionState.conf.dataFrameSelfJoinAutoResolveAmbiguity) &#123; return withPlan(plan) &#125; // If left/right have no output set intersection, return the plan. val lanalyzed = withPlan(this.logicalPlan).queryExecution.analyzed val ranalyzed = withPlan(right.logicalPlan).queryExecution.analyzed if (lanalyzed.outputSet.intersect(ranalyzed.outputSet).isEmpty) &#123; return withPlan(plan) &#125; // Otherwise, find the trivially true predicates and automatically resolves them to both sides. // By the time we get here, since we have already run analysis, all attributes should've been // resolved and become AttributeReference. val cond = plan.condition.map &#123; _.transform &#123; case catalyst.expressions.EqualTo(a: AttributeReference, b: AttributeReference) if a.sameRef(b) =&gt; catalyst.expressions.EqualTo( withPlan(plan.left).resolve(a.name), withPlan(plan.right).resolve(b.name)) &#125; &#125; withPlan &#123; plan.copy(condition = cond) &#125; &#125; crossJoin12345678910111213/** * Explicit cartesian join with another `DataFrame`. * ÊòæÂºèÁ¨õÂç°Â∞îÁßØjoin * * @param right Right side of the join operation. * @note Cartesian joins are very expensive without an extra filter that can be pushed down. * Â¶ÇÊûúÊ≤°ÊúâÈ¢ùÂ§ñÁöÑËøáÊª§Âô®ÔºåÁ¨õÂç°Â∞îËøûÊé•ÈùûÂ∏∏ÊòÇË¥µ„ÄÇ * @group untypedrel * @since 2.1.0 */def crossJoin(right: Dataset[_]): DataFrame = withPlan &#123; Join(logicalPlan, right.logicalPlan, joinType = Cross, None)&#125; apply123456789101112/** * Selects column based on the column name and return it as a [[Column]]. * * ÈÄâÊã©Âü∫‰∫éÂàóÂêçÁöÑÂàóÔºåÂπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫[[Column]]ËøîÂõû„ÄÇ * * @note The column name can also reference to a nested column like `a.b`. * * ÂàóÂêç‰πüÂèØ‰ª•ÂºïÁî®ÂÉè‚Äúa.b‚ÄùËøôÊ†∑ÁöÑÂµåÂ•óÂàó„ÄÇ * @group untypedrel * @since 2.0.0 */def apply(colName: String): Column = col(colName) col123456789101112131415161718/** * Selects column based on the column name and return it as a [[Column]]. * * ÈÄâÊã©Âü∫‰∫éÂàóÂêçÁöÑÂàóÔºåÂπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫[[Column]]ËøîÂõû„ÄÇ * * @note The column name can also reference to a nested column like `a.b`. * * ÂàóÂêç‰πüÂèØ‰ª•ÂºïÁî®ÂÉè‚Äúa.b‚ÄùËøôÊ†∑ÁöÑÂµåÂ•óÂàó„ÄÇ * @group untypedrel * @since 2.0.0 */def col(colName: String): Column = colName match &#123; case \"*\" =&gt; Column(ResolvedStar(queryExecution.analyzed.output)) case _ =&gt; val expr = resolve(colName) Column(expr)&#125; select12345678910111213141516171819202122232425262728293031/** * Selects a set of column based expressions. * &#123;&#123;&#123; * ds.select($\"colA\", $\"colB\" + 1) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */@scala.annotation.varargsdef select(cols: Column*): DataFrame = withPlan &#123; Project(cols.map(_.named), logicalPlan)&#125;/** * Selects a set of columns. This is a variant of `select` that can only select * existing columns using column names (i.e. cannot construct expressions). * * Âè™ËÉΩÊòØÂ∑≤ÁªèÂ≠òÂú®ÁöÑÂàóÂêç * * &#123;&#123;&#123; * // The following two are equivalent: * ds.select(\"colA\", \"colB\") * ds.select($\"colA\", $\"colB\") * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */@scala.annotation.varargsdef select(col: String, cols: String*): DataFrame = select((col +: cols).map(Column(_)): _*) selectExpr12345678910111213141516171819202122/** * Selects a set of SQL expressions. This is a variant of `select` that accepts * SQL expressions. * * Êé•ÂèóSQLË°®ËææÂºè * * &#123;&#123;&#123; * // The following are equivalent: * ‰ª•‰∏ãÊòØÁ≠â‰ª∑ÁöÑ: * ds.selectExpr(\"colA\", \"colB as newName\", \"abs(colC)\") * ds.select(expr(\"colA\"), expr(\"colB as newName\"), expr(\"abs(colC)\")) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */@scala.annotation.varargsdef selectExpr(exprs: String*): DataFrame = &#123; select(exprs.map &#123; expr =&gt; Column(sparkSession.sessionState.sqlParser.parseExpression(expr)) &#125;: _*)&#125; groupBy123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657/** * Groups the Dataset using the specified columns, so we can run aggregation on them. See * [[RelationalGroupedDataset]] for all the available aggregate functions. * * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàóÂØπÊï∞ÊçÆÈõÜËøõË°åÂàÜÁªÑÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ÂØπÂÆÉ‰ª¨ËøõË°åËÅöÂêà„ÄÇ * Êü•Áúã[[RelationalGroupedDataset]]‰∏∫ÊâÄÊúâÂèØÁî®ÁöÑËÅöÂêàÂáΩÊï∞„ÄÇ * * * &#123;&#123;&#123; * // Compute the average for all numeric columns grouped by department. * * ËÆ°ÁÆóÊåâÈÉ®Èó®ÂàÜÁªÑÁöÑÊâÄÊúâÊï∞Â≠óÂàóÁöÑÂπ≥ÂùáÂÄº„ÄÇ * * ds.groupBy($\"department\").avg() * * // Compute the max age and average salary, grouped by department and gender. * ds.groupBy($\"department\", $\"gender\").agg(Map( * \"salary\" -&gt; \"avg\", * \"age\" -&gt; \"max\" * )) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */@scala.annotation.varargsdef groupBy(cols: Column*): RelationalGroupedDataset = &#123; RelationalGroupedDataset(toDF(), cols.map(_.expr), RelationalGroupedDataset.GroupByType)&#125; /** * Groups the Dataset using the specified columns, so that we can run aggregation on them. * See [[RelationalGroupedDataset]] for all the available aggregate functions. * * This is a variant of groupBy that can only group by existing columns using column names * (i.e. cannot construct expressions). * * &#123;&#123;&#123; * // Compute the average for all numeric columns grouped by department. * ds.groupBy(\"department\").avg() * * // Compute the max age and average salary, grouped by department and gender. * ds.groupBy($\"department\", $\"gender\").agg(Map( * \"salary\" -&gt; \"avg\", * \"age\" -&gt; \"max\" * )) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */@scala.annotation.varargsdef groupBy(col1: String, cols: String*): RelationalGroupedDataset = &#123; val colNames: Seq[String] = col1 +: cols RelationalGroupedDataset( toDF(), colNames.map(colName =&gt; resolve(colName)), RelationalGroupedDataset.GroupByType)&#125; rollup1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/** * Create a multi-dimensional rollup for the current Dataset using the specified columns, * so we can run aggregation on them. * See [[RelationalGroupedDataset]] for all the available aggregate functions. * * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàó‰∏∫ÂΩìÂâçÊï∞ÊçÆÈõÜÂàõÂª∫Â§öÁª¥ÁöÑÊ±áÊÄªÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú®ÂÆÉ‰ª¨‰∏äËøêË°åËÅöÂêà„ÄÇ * * * &#123;&#123;&#123; * // Compute the average for all numeric columns rolluped by department and group. * * Ê±áÊÄªÂêé Ê±ÇÂπ≥ÂùáÂÄº * * ds.rollup($\"department\", $\"group\").avg() * * // Compute the max age and average salary, rolluped by department and gender. * ds.rollup($\"department\", $\"gender\").agg(Map( * \"salary\" -&gt; \"avg\", * \"age\" -&gt; \"max\" * )) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ @scala.annotation.varargs def rollup(cols: Column*): RelationalGroupedDataset = &#123; RelationalGroupedDataset(toDF(), cols.map(_.expr), RelationalGroupedDataset.RollupType) &#125; /** * Create a multi-dimensional rollup for the current Dataset using the specified columns, * so we can run aggregation on them. * See [[RelationalGroupedDataset]] for all the available aggregate functions. * * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàó‰∏∫ÂΩìÂâçÊï∞ÊçÆÈõÜÂàõÂª∫Â§öÁª¥ÁöÑrollupÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú®ÂÆÉ‰ª¨‰∏äËøêË°åËÅöÂêà„ÄÇ * rollupÂèØ‰ª•ÂÆûÁé∞ ‰ªéÂè≥Âà∞Â∑¶‰∏ÄÊ¨°ÈÄíÂáèÁöÑÂ§öÁ∫ßÁªüËÆ°ÔºåÊòæÁ§∫ÁªüËÆ°Êüê‰∏ÄÂ±ÇÊ¨°ÁªìÊûÑÁöÑËÅöÂêà * ‰æãÂ¶Ç rollup(a,b,c,d) =ÁªìÊûú=&gt; (a,b,c,d),(a,b,c),(a,b),a * * This is a variant of rollup that can only group by existing columns using column names * (i.e. cannot construct expressions). * * &#123;&#123;&#123; * // Compute the average for all numeric columns rolluped by department and group. * ds.rollup(\"department\", \"group\").avg() * * // Compute the max age and average salary, rolluped by department and gender. * ds.rollup($\"department\", $\"gender\").agg(Map( * \"salary\" -&gt; \"avg\", * \"age\" -&gt; \"max\" * )) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ @scala.annotation.varargs def rollup(col1: String, cols: String*): RelationalGroupedDataset = &#123; val colNames: Seq[String] = col1 +: cols RelationalGroupedDataset( toDF(), colNames.map(colName =&gt; resolve(colName)), RelationalGroupedDataset.RollupType) &#125; cube123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * Create a multi-dimensional cube for the current Dataset using the specified columns, * so we can run aggregation on them. * See [[RelationalGroupedDataset]] for all the available aggregate functions. * * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàó‰∏∫ÂΩìÂâçÊï∞ÊçÆÈõÜÂàõÂª∫Â§öÁª¥Êï∞ÊçÆÈõÜÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú®ÂÆÉ‰ª¨‰∏äËøêË°åËÅöÂêà„ÄÇ * * * &#123;&#123;&#123; * // Compute the average for all numeric columns cubed by department and group. * ds.cube($\"department\", $\"group\").avg() * * // Compute the max age and average salary, cubed by department and gender. * ds.cube($\"department\", $\"gender\").agg(Map( * \"salary\" -&gt; \"avg\", * \"age\" -&gt; \"max\" * )) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ @scala.annotation.varargs def cube(cols: Column*): RelationalGroupedDataset = &#123; RelationalGroupedDataset(toDF(), cols.map(_.expr), RelationalGroupedDataset.CubeType) &#125; /** * Create a multi-dimensional cube for the current Dataset using the specified columns, * so we can run aggregation on them. * See [[RelationalGroupedDataset]] for all the available aggregate functions. * * È≠îÊñπ ‰æãÂ¶ÇÔºöcube(a,b,c) =ÁªìÊûú=&gt; (a,b),(a,c),a,(b,c),b,c ÁªìÊûú‰∏∫ÊâÄÊúâÁöÑÁª¥Â∫¶ * ‰ΩøÁî®ÊåáÂÆöÁöÑÂàó‰∏∫ÂΩìÂâçÊï∞ÊçÆÈõÜÂàõÂª∫Â§öÁª¥Â§öÁª¥Êï∞ÊçÆÈõÜÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Âú®ÂÆÉ‰ª¨‰∏äËøêË°åËÅöÂêà„ÄÇ * * This is a variant of cube that can only group by existing columns using column names * (i.e. cannot construct expressions). * * ËøôÊòØ‰∏Ä‰∏™Â§öÁª¥Êï∞ÊçÆÈõÜÁöÑÂèò‰ΩìÔºåÂÆÉÂè™ËÉΩÈÄöËøá‰ΩøÁî®ÂàóÂêçÁöÑÁé∞ÊúâÂàóÊù•ÂàÜÁªÑ * * &#123;&#123;&#123; * // Compute the average for all numeric columns cubed by department and group. * ds.cube(\"department\", \"group\").avg() * * // Compute the max age and average salary, cubed by department and gender. * ds.cube($\"department\", $\"gender\").agg(Map( * \"salary\" -&gt; \"avg\", * \"age\" -&gt; \"max\" * )) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ @scala.annotation.varargs def cube(col1: String, cols: String*): RelationalGroupedDataset = &#123; val colNames: Seq[String] = col1 +: cols RelationalGroupedDataset( toDF(), colNames.map(colName =&gt; resolve(colName)), RelationalGroupedDataset.CubeType) &#125; agg123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/** * (Scala-specific) Aggregates on the entire Dataset without groups. * ÂØπÊï¥‰∏™Êï∞ÊçÆÈõÜËøõË°åËÅöÂêàÔºåÊó†ÈúÄÂàÜÁªÑ„ÄÇ * &#123;&#123;&#123; * // ds.agg(...) is a shorthand for ds.groupBy().agg(...) * ds.agg(\"age\" -&gt; \"max\", \"salary\" -&gt; \"avg\") * ds.groupBy().agg(\"age\" -&gt; \"max\", \"salary\" -&gt; \"avg\") * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ def agg(aggExpr: (String, String), aggExprs: (String, String)*): DataFrame = &#123; groupBy().agg(aggExpr, aggExprs: _*) &#125; /** * (Scala-specific) Aggregates on the entire Dataset without groups. * ÂØπÊï¥‰∏™Êï∞ÊçÆÈõÜËøõË°åËÅöÂêàÔºåÊó†ÈúÄÂàÜÁªÑ„ÄÇ * * &#123;&#123;&#123; * // ds.agg(...) is a shorthand for ds.groupBy().agg(...) * ds.agg(Map(\"age\" -&gt; \"max\", \"salary\" -&gt; \"avg\")) * ds.groupBy().agg(Map(\"age\" -&gt; \"max\", \"salary\" -&gt; \"avg\")) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ def agg(exprs: Map[String, String]): DataFrame = groupBy().agg(exprs) /** * (Java-specific) Aggregates on the entire Dataset without groups. * * ÂØπÊï¥‰∏™Êï∞ÊçÆÈõÜËøõË°åËÅöÂêàÔºåÊó†ÈúÄÂàÜÁªÑ„ÄÇ * * &#123;&#123;&#123; * // ds.agg(...) is a shorthand for ds.groupBy().agg(...) * ds.agg(Map(\"age\" -&gt; \"max\", \"salary\" -&gt; \"avg\")) * ds.groupBy().agg(Map(\"age\" -&gt; \"max\", \"salary\" -&gt; \"avg\")) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ def agg(exprs: java.util.Map[String, String]): DataFrame = groupBy().agg(exprs) /** * Aggregates on the entire Dataset without groups. * * ÂØπÊï¥‰∏™Êï∞ÊçÆÈõÜËøõË°åËÅöÂêàÔºåÊó†ÈúÄÂàÜÁªÑ„ÄÇ * * &#123;&#123;&#123; * // ds.agg(...) is a shorthand for ds.groupBy().agg(...) * ds.agg(max($\"age\"), avg($\"salary\")) * ds.groupBy().agg(max($\"age\"), avg($\"salary\")) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */ @scala.annotation.varargs def agg(expr: Column, exprs: Column*): DataFrame = groupBy().agg(expr, exprs: _*) explode12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091/** * (Scala-specific) Returns a new Dataset where each row has been expanded to zero or more * rows by the provided function. This is similar to a `LATERAL VIEW` in HiveQL. The columns of * the input row are implicitly joined with each row that is output by the function. * * Ê†πÊçÆÊèê‰æõÁöÑÊñπÊ≥ïÔºåËØ•Êï∞ÊçÆÈõÜÁöÑÊØè‰∏ÄË°åÈÉΩË¢´Êâ©Â±ï‰∏∫Èõ∂‰∏™ÊàñÊõ¥Â§öÁöÑË°åÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ * ËøôÁ±ª‰ºº‰∫éHiveQLÁöÑ‚ÄúLATERAL VIEW‚Äù„ÄÇ * ËæìÂÖ•Ë°åÁöÑÂàó ÈöêÂºèÂú∞Âä†ÂÖ•‰∫ÜÁî±ÂáΩÊï∞ËæìÂá∫ÁöÑÊØè‰∏ÄË°å„ÄÇ * * Given that this is deprecated, as an alternative, you can explode columns either using * `functions.explode()` or `flatMap()`. The following example uses these alternatives to count * the number of books that contain a given word: * * ËÄÉËôëÂà∞ËøôÂ∑≤ÁªèË¢´ÂºÉÁî®Ôºå‰Ωú‰∏∫Êõø‰ª£ÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî®‚Äúfunctions.explode()‚ÄùÊàñ‚ÄúflatMap()‚ÄùÊù•ÂºïÁàÜÂàó„ÄÇ * ‰∏ãÈù¢ÁöÑÁ§∫‰æã‰ΩøÁî®Ëøô‰∫õÊõø‰ª£ÊñπÊ≥ïÊù•ËÆ°ÁÆóÂåÖÂê´ÁªôÂÆöÂçïËØçÁöÑÂõæ‰π¶ÁöÑÊï∞Èáè: * * &#123;&#123;&#123; * case class Book(title: String, words: String) * val ds: Dataset[Book] * * val allWords = ds.select('title, explode(split('words, \" \")).as(\"word\")) * * val bookCountPerWord = allWords.groupBy(\"word\").agg(countDistinct(\"title\")) * &#125;&#125;&#125; * * Using `flatMap()` this can similarly be exploded as: * * &#123;&#123;&#123; * ds.flatMap(_.words.split(\" \")) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 Â∑≤ÁªèËøáÊó∂ÔºåÁî® flatMap() Êàñ functions.explode() ‰ª£Êõø */@deprecated(\"use flatMap() or select() with functions.explode() instead\", \"2.0.0\")def explode[A &lt;: Product : TypeTag](input: Column*)(f: Row =&gt; TraversableOnce[A]): DataFrame = &#123; val elementSchema = ScalaReflection.schemaFor[A].dataType.asInstanceOf[StructType] val convert = CatalystTypeConverters.createToCatalystConverter(elementSchema) val rowFunction = f.andThen(_.map(convert(_).asInstanceOf[InternalRow])) val generator = UserDefinedGenerator(elementSchema, rowFunction, input.map(_.expr)) withPlan &#123; Generate(generator, join = true, outer = false, qualifier = None, generatorOutput = Nil, logicalPlan) &#125;&#125;/** * (Scala-specific) Returns a new Dataset where a single column has been expanded to zero * or more rows by the provided function. This is similar to a `LATERAL VIEW` in HiveQL. All * columns of the input row are implicitly joined with each value that is output by the function. * * Given that this is deprecated, as an alternative, you can explode columns either using * `functions.explode()`: * * &#123;&#123;&#123; * ds.select(explode(split('words, \" \")).as(\"word\")) * &#125;&#125;&#125; * * or `flatMap()`: * * &#123;&#123;&#123; * ds.flatMap(_.words.split(\" \")) * &#125;&#125;&#125; * * @group untypedrel * @since 2.0.0 */@deprecated(\"use flatMap() or select() with functions.explode() instead\", \"2.0.0\")def explode[A, B: TypeTag](inputColumn: String, outputColumn: String)(f: A =&gt; TraversableOnce[B]): DataFrame = &#123; val dataType = ScalaReflection.schemaFor[B].dataType val attributes = AttributeReference(outputColumn, dataType)() :: Nil // TODO handle the metadata? val elementSchema = attributes.toStructType def rowFunction(row: Row): TraversableOnce[InternalRow] = &#123; val convert = CatalystTypeConverters.createToCatalystConverter(dataType) f(row(0).asInstanceOf[A]).map(o =&gt; InternalRow(convert(o))) &#125; val generator = UserDefinedGenerator(elementSchema, rowFunction, apply(inputColumn).expr :: Nil) withPlan &#123; Generate(generator, join = true, outer = false, qualifier = None, generatorOutput = Nil, logicalPlan) &#125;&#125; withColumn1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** * Returns a new Dataset by adding a column or replacing the existing column that has * the same name. * ÈÄöËøáÊ∑ªÂä†‰∏Ä‰∏™ÂàóÊàñÊõøÊç¢ÂÖ∑ÊúâÁõ∏ÂêåÂêçÁß∞ÁöÑÁé∞ÊúâÂàóËøîÂõûÊñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ * * @group untypedrel * @since 2.0.0 */def withColumn(colName: String, col: Column): DataFrame = &#123; val resolver = sparkSession.sessionState.analyzer.resolver val output = queryExecution.analyzed.output val shouldReplace = output.exists(f =&gt; resolver(f.name, colName)) if (shouldReplace) &#123; val columns = output.map &#123; field =&gt; if (resolver(field.name, colName)) &#123; col.as(colName) &#125; else &#123; Column(field) &#125; &#125; select(columns: _*) &#125; else &#123; select(Column(\"*\"), col.as(colName)) &#125;&#125;/** * Returns a new Dataset by adding a column with metadata. * ÈÄöËøáÊ∑ªÂä†Â∏¶ÊúâÂÖÉÊï∞ÊçÆÁöÑÂàóËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ */private[spark] def withColumn(colName: String, col: Column, metadata: Metadata): DataFrame = &#123; val resolver = sparkSession.sessionState.analyzer.resolver val output = queryExecution.analyzed.output val shouldReplace = output.exists(f =&gt; resolver(f.name, colName)) if (shouldReplace) &#123; val columns = output.map &#123; field =&gt; if (resolver(field.name, colName)) &#123; col.as(colName, metadata) &#125; else &#123; Column(field) &#125; &#125; select(columns: _*) &#125; else &#123; select(Column(\"*\"), col.as(colName, metadata)) &#125;&#125; withColumnRenamed1234567891011121314151617181920212223242526/** * Returns a new Dataset with a column renamed. * This is a no-op if schema doesn't contain existingName. * ËøîÂõû‰∏Ä‰∏™ÈáçÂëΩÂêçÁöÑÂàóÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ * Â¶ÇÊûúÊ®°Âºè‰∏çÂåÖÂê´Â≠òÂú®ÂêçÁß∞ÔºåÈÇ£‰πàËøôÊòØ‰∏çÊìç‰ΩúÁöÑ„ÄÇ * * @group untypedrel * @since 2.0.0 */def withColumnRenamed(existingName: String, newName: String): DataFrame = &#123; val resolver = sparkSession.sessionState.analyzer.resolver val output = queryExecution.analyzed.output val shouldRename = output.exists(f =&gt; resolver(f.name, existingName)) if (shouldRename) &#123; val columns = output.map &#123; col =&gt; if (resolver(col.name, existingName)) &#123; Column(col).as(newName) &#125; else &#123; Column(col) &#125; &#125; select(columns: _*) &#125; else &#123; toDF() &#125;&#125; drop1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768/** * Returns a new Dataset with a column dropped. This is a no-op if schema doesn't contain * column name. * * ËøîÂõûÂà†Èô§ÊåáÂÆöÂàó‰πãÂêéÁöÑÊñ∞Dataset * * This method can only be used to drop top level columns. the colName string is treated * literally without further interpretation. * * ‰ªÖÁî®‰∫éÂà†Èô§È°∂Â±ÇÁöÑÂàó * * @group untypedrel * @since 2.0.0 */def drop(colName: String): DataFrame = &#123; drop(Seq(colName): _*)&#125;/** * Returns a new Dataset with columns dropped. * This is a no-op if schema doesn't contain column name(s). * * Âà†Èô§ÊåáÂÆöÁöÑÂ§ö‰∏™ÂàóÔºåÂπ∂ËøîÂõûÊñ∞ÁöÑdataset * * This method can only be used to drop top level columns. the colName string is treated literally * without further interpretation. * * @group untypedrel * @since 2.0.0 */@scala.annotation.varargsdef drop(colNames: String*): DataFrame = &#123; val resolver = sparkSession.sessionState.analyzer.resolver val allColumns = queryExecution.analyzed.output val remainingCols = allColumns.filter &#123; attribute =&gt; colNames.forall(n =&gt; !resolver(attribute.name, n)) &#125;.map(attribute =&gt; Column(attribute)) if (remainingCols.size == allColumns.size) &#123; toDF() &#125; else &#123; this.select(remainingCols: _*) &#125;&#125;/** * Returns a new Dataset with a column dropped. * This version of drop accepts a [[Column]] rather than a name. * This is a no-op if the Dataset doesn't have a column * with an equivalent expression. * * Âà†Èô§ÊåáÂÆöÁöÑ ÂàóÔºàÊ†πÊçÆColumnÔºâ * * @group untypedrel * @since 2.0.0 */def drop(col: Column): DataFrame = &#123; val expression = col match &#123; case Column(u: UnresolvedAttribute) =&gt; queryExecution.analyzed.resolveQuoted( u.name, sparkSession.sessionState.analyzer.resolver).getOrElse(u) case Column(expr: Expression) =&gt; expr &#125; val attrs = this.logicalPlan.output val colsAfterDrop = attrs.filter &#123; attr =&gt; attr != expression &#125;.map(attr =&gt; Column(attr)) select(colsAfterDrop: _*)&#125; typedrel-ÊúâÁ±ªÂûãÁöÑËΩ¨Êç¢joinWith123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108/** * :: Experimental :: ÂÆûÈ™åÁöÑ * Joins this Dataset returning a `Tuple2` for each pair where `condition` evaluates to * true. * ËøûÊé•Ëøô‰∏™Êï∞ÊçÆÈõÜËøîÂõû‰∏Ä‰∏™‚ÄúTuple2‚ÄùÂØπÊØè‰∏ÄÂØπÁöÑ‚ÄúÊù°‰ª∂‚ÄùËÆ°ÁÆó‰∏∫true„ÄÇ * * This is similar to the relation `join` function with one important difference in the * result schema. Since `joinWith` preserves objects present on either side of the join, the * result schema is similarly nested into a tuple under the column names `_1` and `_2`. * ËøôÁ±ª‰ºº‰∫éÂÖ≥Á≥ª‚Äújoin‚ÄùÂáΩÊï∞ÔºåÂú®ÁªìÊûúÊ®°Âºè‰∏≠Êúâ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂå∫Âà´„ÄÇ * Áî±‰∫é‚ÄújoinWith‚Äù‰øùÂ≠ò‰∫ÜËøûÊé•ÁöÑ‰ªª‰Ωï‰∏ÄËæπÁöÑÂØπË±°ÔºåÂõ†Ê≠§ÁªìÊûúÊ®°ÂºèÁ±ª‰ººÂú∞ÂµåÂ•óÂú®ÂàóÂêçÁß∞‚Äú_1‚ÄùÂíå‚Äú_2‚Äù‰∏ãÈù¢ÁöÑtuple‰∏≠„ÄÇ * * This type of join can be useful both for preserving type-safety with the original object * types as well as working with relational data where either side of the join has column * names in common. * ËøôÁßçÁ±ªÂûãÁöÑËÅîÊé•Êó¢ÂèØ‰ª•Áî®‰∫é‰øùÂ≠ò‰∏éÂéüÂßãÂØπË±°Á±ªÂûãÁöÑÁ±ªÂûãÂÆâÂÖ®ÊÄßÔºå * ‰πüÂèØ‰ª•Áî®‰∫éÂ§ÑÁêÜËøûÊé•ÁöÑ‰ªª‰Ωï‰∏ÄÁ´ØÈÉΩÊúâÂàóÂêçÁöÑÂÖ≥Á≥ªÊï∞ÊçÆ„ÄÇ * * @param other Right side of the join. * @param condition Join expression. * @param joinType One of: `inner`, `outer`, `left_outer`, `right_outer`, `leftsemi`. * @group typedrel * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef joinWith[U](other: Dataset[U], condition: Column, joinType: String): Dataset[(T, U)] = &#123; // Creates a Join node and resolve it first, to get join condition resolved, self-join resolved, // ÂàõÂª∫‰∏Ä‰∏™ËÅîÊé•ËäÇÁÇπÂπ∂È¶ñÂÖàËß£ÊûêÂÆÉÔºå‰ΩøJoinÊù°‰ª∂ÂæóÂà∞Ëß£ÊûêÔºåself - JoinËß£ÊûêÔºå // etc. val joined = sparkSession.sessionState.executePlan( Join( this.logicalPlan, other.logicalPlan, JoinType(joinType), Some(condition.expr))).analyzed.asInstanceOf[Join] // For both join side, combine all outputs into a single column and alias it with \"_1\" or \"_2\", // to match the schema for the encoder of the join result. // ÂØπ‰∫éËøô‰∏§‰∏™ËøûÊé•ÔºåÂ∞ÜÊâÄÊúâËæìÂá∫ÂêàÂπ∂‰∏∫‰∏Ä‰∏™ÂàóÔºåÂπ∂Â∞ÜÂÖ∂Âà´Âêç‰∏∫‚Äú_1‚ÄùÊàñ‚Äú_2‚ÄùÔºå‰ª•ÂåπÈÖçËøûÊé•ÁªìÊûúÁöÑÁºñÁ†ÅÂô®ÁöÑÊ®°Âºè„ÄÇ // Note that we do this before joining them, to enable the join operator to return null for one // side, in cases like outer-join. // ËØ∑Ê≥®ÊÑèÔºåÂú®joinÂÆÉ‰ª¨‰πãÂâçÔºåÊàë‰ª¨ËøôÊ†∑ÂÅöÔºå‰ΩøjoinÊìç‰ΩúÁ¨¶Âú®ÂÉèouter - joinËøôÊ†∑ÁöÑÊÉÖÂÜµ‰∏ãËøîÂõûnull„ÄÇ val left = &#123; val combined = if (this.exprEnc.flat) &#123; assert(joined.left.output.length == 1) Alias(joined.left.output.head, \"_1\")() &#125; else &#123; Alias(CreateStruct(joined.left.output), \"_1\")() &#125; Project(combined :: Nil, joined.left) &#125; val right = &#123; val combined = if (other.exprEnc.flat) &#123; assert(joined.right.output.length == 1) Alias(joined.right.output.head, \"_2\")() &#125; else &#123; Alias(CreateStruct(joined.right.output), \"_2\")() &#125; Project(combined :: Nil, joined.right) &#125; // Rewrites the join condition to make the attribute point to correct column/field, after we // combine the outputs of each join side. // Âú®Â∞ÜÊØè‰∏™ËøûÊé•ÁöÑËæìÂá∫ÁªÑÂêàÂú®‰∏ÄËµ∑‰πãÂêé,ÈáçÂÜôËÅîÊé•Êù°‰ª∂Ôºå‰ΩøÂ±ûÊÄßÊåáÂêëÊ≠£Á°ÆÁöÑÂàó/Â≠óÊÆµ„ÄÇ val conditionExpr = joined.condition.get transformUp &#123; case a: Attribute if joined.left.outputSet.contains(a) =&gt; if (this.exprEnc.flat) &#123; left.output.head &#125; else &#123; val index = joined.left.output.indexWhere(_.exprId == a.exprId) GetStructField(left.output.head, index) &#125; case a: Attribute if joined.right.outputSet.contains(a) =&gt; if (other.exprEnc.flat) &#123; right.output.head &#125; else &#123; val index = joined.right.output.indexWhere(_.exprId == a.exprId) GetStructField(right.output.head, index) &#125; &#125; implicit val tuple2Encoder: Encoder[(T, U)] = ExpressionEncoder.tuple(this.exprEnc, other.exprEnc) withTypedPlan(Join(left, right, joined.joinType, Some(conditionExpr)))&#125;/** * :: Experimental :: * Using inner equi-join to join this Dataset returning a `Tuple2` for each pair * where `condition` evaluates to true. * * ‰ΩøÁî®ÂÜÖÈÉ®ÁöÑÁ≠âËøûÊé•Âä†ÂÖ•Ëøô‰∏™Êï∞ÊçÆÈõÜÔºå‰∏∫ÊØè‰∏ÄÂØπËøîÂõû‰∏Ä‰∏™‚ÄúTuple2‚ÄùÔºåÂÖ∂‰∏≠‚ÄúÊù°‰ª∂‚ÄùÁöÑËÆ°ÁÆóÁªìÊûú‰∏∫true„ÄÇ * * @param other Right side of the join. * @param condition Join expression. * @group typedrel * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef joinWith[U](other: Dataset[U], condition: Column): Dataset[(T, U)] = &#123; joinWith(other, condition, \"inner\")&#125; sortWithinPartitions123456789101112131415161718192021222324252627282930313233/** * Returns a new Dataset with each partition sorted by the given expressions. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÊØè‰∏™ÂàÜÂå∫ÊåâÁÖßÁªôÂÆöÁöÑË°®ËææÂºèÊéíÂ∫è„ÄÇ * * This is the same operation as \"SORT BY\" in SQL (Hive QL). * * Ëøô‰∏éSQL(Hive QL)‰∏≠‚ÄúSORT BY‚ÄùÁöÑÊìç‰ΩúÁõ∏Âêå„ÄÇ * * @group typedrel * @since 2.0.0 */@scala.annotation.varargsdef sortWithinPartitions(sortCol: String, sortCols: String*): Dataset[T] = &#123; sortWithinPartitions((sortCol +: sortCols).map(Column(_)): _*)&#125;/** * Returns a new Dataset with each partition sorted by the given expressions. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÊØè‰∏™ÂàÜÂå∫ÊåâÁÖßÁªôÂÆöÁöÑË°®ËææÂºèÊéíÂ∫è„ÄÇ * * This is the same operation as \"SORT BY\" in SQL (Hive QL). * * Ëøô‰∏éSQL(Hive QL)‰∏≠‚ÄúSORT BY‚ÄùÁöÑÊìç‰ΩúÁõ∏Âêå„ÄÇ * * @group typedrel * @since 2.0.0 */@scala.annotation.varargsdef sortWithinPartitions(sortExprs: Column*): Dataset[T] = &#123; sortInternal(global = false, sortExprs)&#125; sort1234567891011121314151617181920212223242526272829303132333435/** * Returns a new Dataset sorted by the specified column, all in ascending order. * ÊéíÂ∫è ÂçáÂ∫è * &#123;&#123;&#123; * // The following 3 are equivalent * ‰∏ãÈù¢3‰∏™ÊòØÁ≠â‰ª∑ÁöÑ * ds.sort(\"sortcol\") * ds.sort($\"sortcol\") * ds.sort($\"sortcol\".asc) * &#125;&#125;&#125; * * @group typedrel * @since 2.0.0 */ @scala.annotation.varargs def sort(sortCol: String, sortCols: String*): Dataset[T] = &#123; sort((sortCol +: sortCols).map(apply): _*) &#125; /** * Returns a new Dataset sorted by the given expressions. For example: * * ËøîÂõû‰∏Ä‰∏™Áî±ÁªôÂÆöË°®ËææÂºèÊéíÂ∫èÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ‰æãÂ¶Ç: * * &#123;&#123;&#123; * ds.sort($\"col1\", $\"col2\".desc) * &#125;&#125;&#125; * * @group typedrel * @since 2.0.0 */ @scala.annotation.varargs def sort(sortExprs: Column*): Dataset[T] = &#123; sortInternal(global = true, sortExprs) &#125; orderBy123456789101112131415161718192021/** * Returns a new Dataset sorted by the given expressions. * This is an alias of the `sort` function. * ËøôÊòØ‚Äúsort‚ÄùÂáΩÊï∞ÁöÑÂà´Âêç„ÄÇ * * @group typedrel * @since 2.0.0 */ @scala.annotation.varargs def orderBy(sortCol: String, sortCols: String*): Dataset[T] = sort(sortCol, sortCols: _*) /** * Returns a new Dataset sorted by the given expressions. * This is an alias of the `sort` function. * ËøôÊòØ‚Äúsort‚ÄùÂáΩÊï∞ÁöÑÂà´Âêç„ÄÇ * * @group typedrel * @since 2.0.0 */ @scala.annotation.varargs def orderBy(sortExprs: Column*): Dataset[T] = sort(sortExprs: _*) as12345678910111213141516171819/** * Returns a new Dataset with an alias set. * * ËøîÂõû‰∏Ä‰∏™ÂÖ∑ÊúâÂà´ÂêçÈõÜÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ * * @group typedrel * @since 1.6.0 */ def as(alias: String): Dataset[T] = withTypedPlan &#123; SubqueryAlias(alias, logicalPlan, None) &#125; /** * (Scala-specific) Returns a new Dataset with an alias set. * * @group typedrel * @since 2.0.0 */ def as(alias: Symbol): Dataset[T] = as(alias.name) alias12345678910111213141516/** * Returns a new Dataset with an alias set. Same as `as`. * ËøîÂõû‰∏Ä‰∏™ÂÖ∑ÊúâÂà´ÂêçÈõÜÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ‰∏é‚Äúas‚ÄùÁõ∏Âêå„ÄÇ * * @group typedrel * @since 2.0.0 */ def alias(alias: String): Dataset[T] = as(alias) /** * (Scala-specific) Returns a new Dataset with an alias set. Same as `as`. * * @group typedrel * @since 2.0.0 */ def alias(alias: Symbol): Dataset[T] = as(alias) select1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889/** * :: Experimental :: * Returns a new Dataset by computing the given [[Column]] expression for each element. * * ÈÄöËøáËÆ°ÁÆóÊØè‰∏™ÂÖÉÁ¥†ÁöÑÁªôÂÆö[[Âàó]]Ë°®ËææÂºèËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ * * &#123;&#123;&#123; * val ds = Seq(1, 2, 3).toDS() * val newDS = ds.select(expr(\"value + 1\").as[Int]) * &#125;&#125;&#125; * * @group typedrel * @since 1.6.0 */ @Experimental @InterfaceStability.Evolving def select[U1](c1: TypedColumn[T, U1]): Dataset[U1] = &#123; implicit val encoder = c1.encoder val project = Project(c1.withInputType(exprEnc, logicalPlan.output).named :: Nil, logicalPlan) if (encoder.flat) &#123; new Dataset[U1](sparkSession, project, encoder) &#125; else &#123; // Flattens inner fields of U1 // ‰ΩøU1ÁöÑÂÜÖÈÉ®Âå∫ÂüüÂèòÂπ≥ new Dataset[Tuple1[U1]](sparkSession, project, ExpressionEncoder.tuple(encoder)).map(_._1) &#125; &#125; /** * :: Experimental :: * Returns a new Dataset by computing the given [[Column]] expressions for each element. * * @group typedrel * @since 1.6.0 */ @Experimental @InterfaceStability.Evolving def select[U1, U2](c1: TypedColumn[T, U1], c2: TypedColumn[T, U2]): Dataset[(U1, U2)] = selectUntyped(c1, c2).asInstanceOf[Dataset[(U1, U2)]] /** * :: Experimental :: * Returns a new Dataset by computing the given [[Column]] expressions for each element. * * @group typedrel * @since 1.6.0 */ @Experimental @InterfaceStability.Evolving def select[U1, U2, U3]( c1: TypedColumn[T, U1], c2: TypedColumn[T, U2], c3: TypedColumn[T, U3]): Dataset[(U1, U2, U3)] = selectUntyped(c1, c2, c3).asInstanceOf[Dataset[(U1, U2, U3)]] /** * :: Experimental :: * Returns a new Dataset by computing the given [[Column]] expressions for each element. * * @group typedrel * @since 1.6.0 */ @Experimental @InterfaceStability.Evolving def select[U1, U2, U3, U4]( c1: TypedColumn[T, U1], c2: TypedColumn[T, U2], c3: TypedColumn[T, U3], c4: TypedColumn[T, U4]): Dataset[(U1, U2, U3, U4)] = selectUntyped(c1, c2, c3, c4).asInstanceOf[Dataset[(U1, U2, U3, U4)]] /** * :: Experimental :: * Returns a new Dataset by computing the given [[Column]] expressions for each element. * * @group typedrel * @since 1.6.0 */ @Experimental @InterfaceStability.Evolving def select[U1, U2, U3, U4, U5]( c1: TypedColumn[T, U1], c2: TypedColumn[T, U2], c3: TypedColumn[T, U3], c4: TypedColumn[T, U4], c5: TypedColumn[T, U5]): Dataset[(U1, U2, U3, U4, U5)] = selectUntyped(c1, c2, c3, c4, c5).asInstanceOf[Dataset[(U1, U2, U3, U4, U5)]] filter12345678910111213141516171819202122232425262728293031323334/** * Filters rows using the given condition. * * Áî®ÁªôÂÆöÁöÑÊù°‰ª∂ËøáÊª§rows * * &#123;&#123;&#123; * // The following are equivalent: * ‰ª•‰∏ãÊòØÁ≠â‰ª∑ÁöÑÔºö * peopleDs.filter($\"age\" &gt; 15) * peopleDs.where($\"age\" &gt; 15) * &#125;&#125;&#125; * * @group typedrel * @since 1.6.0 */ def filter(condition: Column): Dataset[T] = withTypedPlan &#123; Filter(condition.expr, logicalPlan) &#125; /** * Filters rows using the given SQL expression. * * Áî®ÁªôÂÆöÁöÑ SQL Ë°®ËææÂºè ËøáÊª§rows * * &#123;&#123;&#123; * peopleDs.filter(\"age &gt; 15\") * &#125;&#125;&#125; * * @group typedrel * @since 1.6.0 */ def filter(conditionExpr: String): Dataset[T] = &#123; filter(Column(sparkSession.sessionState.sqlParser.parseExpression(conditionExpr))) &#125; where1234567891011121314151617181920212223242526272829303132/** * Filters rows using the given condition. This is an alias for `filter`. * * ‰ΩøÁî®ÁªôÂÆöÊù°‰ª∂ËøáÊª§Ë°å„ÄÇ * ËøôÊòØ‚Äúfilter‚ÄùÁöÑÂà´Âêç„ÄÇ * * &#123;&#123;&#123; * // The following are equivalent: * peopleDs.filter($\"age\" &gt; 15) * peopleDs.where($\"age\" &gt; 15) * &#125;&#125;&#125; * * @group typedrel * @since 1.6.0 */ def where(condition: Column): Dataset[T] = filter(condition) /** * Filters rows using the given SQL expression. * * ‰ΩøÁî®ÁªôÂÆöÁöÑ SQL Ë°®ËææÂºè ËøáÊª§ rows * * &#123;&#123;&#123; * peopleDs.where(\"age &gt; 15\") * &#125;&#125;&#125; * * @group typedrel * @since 1.6.0 */ def where(conditionExpr: String): Dataset[T] = &#123; filter(Column(sparkSession.sessionState.sqlParser.parseExpression(conditionExpr))) &#125; groupByKey12345678910111213141516171819202122232425262728293031323334353637/** * :: Experimental :: * (Scala-specific) * Returns a [[KeyValueGroupedDataset]] where the data is grouped by the given key `func`. * ËøîÂõû‰∏Ä‰∏™[[KeyValueGroupedDataset]]ÔºåÊï∞ÊçÆÁî±ÁªôÂÆöÈîÆ' func 'ÂàÜÁªÑ„ÄÇ * * @group typedrel * @since 2.0.0 */@Experimental@InterfaceStability.Evolvingdef groupByKey[K: Encoder](func: T =&gt; K): KeyValueGroupedDataset[K, T] = &#123; val inputPlan = logicalPlan val withGroupingKey = AppendColumns(func, inputPlan) val executed = sparkSession.sessionState.executePlan(withGroupingKey) new KeyValueGroupedDataset( encoderFor[K], encoderFor[T], executed, inputPlan.output, withGroupingKey.newColumns)&#125;/** * :: Experimental :: * (Java-specific) * Returns a [[KeyValueGroupedDataset]] where the data is grouped by the given key `func`. * ËøîÂõû‰∏Ä‰∏™[[KeyValueGroupedDataset]]ÔºåÊï∞ÊçÆÁî±ÁªôÂÆöÈîÆ' func 'ÂàÜÁªÑ„ÄÇ * * @group typedrel * @since 2.0.0 */@Experimental@InterfaceStability.Evolvingdef groupByKey[K](func: MapFunction[T, K], encoder: Encoder[K]): KeyValueGroupedDataset[K, T] = groupByKey(func.call(_))(encoder) limit123456789101112131415/** * Returns a new Dataset by taking the first `n` rows. The difference between this function * and `head` is that `head` is an action and returns an array (by triggering query execution) * while `limit` returns a new Dataset. * * ÈÄöËøá‰ΩøÁî®Á¨¨‰∏Ä‰∏™‚Äún‚ÄùË°åËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ * Ëøô‰∏™ÂáΩÊï∞Âíå‚Äúhead‚ÄùÁöÑÂå∫Âà´Âú®‰∫é‚Äúhead‚ÄùÊòØ‰∏Ä‰∏™Âä®‰ΩúÔºå * Âπ∂ËøîÂõû‰∏Ä‰∏™Êï∞ÁªÑ(ÈÄöËøáËß¶ÂèëÊü•ËØ¢ÊâßË°å)ÔºåËÄå‚Äúlimit‚ÄùÂàôËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜ„ÄÇ * * @group typedrel * @since 2.0.0 */def limit(n: Int): Dataset[T] = withTypedPlan &#123; Limit(Literal(n), logicalPlan)&#125; unionAll-Â∑≤ËøáÊó∂1234567891011121314151617/** * Returns a new Dataset containing union of rows in this Dataset and another Dataset. * This is equivalent to `UNION ALL` in SQL. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ËØ•Êï∞ÊçÆÈõÜ‰∏≠ÁöÑË°åÂíåÂè¶‰∏Ä‰∏™Êï∞ÊçÆÈõÜ„ÄÇ * ËøôÁõ∏ÂΩì‰∫éSQL‰∏≠ÁöÑ‚ÄúUNION ALL‚Äù„ÄÇ * * To do a SQL-style set union (that does deduplication of elements), use this function followed * by a [[distinct]]. * * Â¶ÇÊûúÈúÄË¶ÅÂéªÈáçÁöÑËØùÔºåÂú®ËØ•ÊñπÊ≥ïÂêéÁªßÁª≠Áõ¥Êé• [[distinct]] * * @group typedrel * @since 2.0.0 Â∑≤ÁªèËøáÊó∂ */@deprecated(\"use union()\", \"2.0.0\")def unionAll(other: Dataset[T]): Dataset[T] = union(other) union123456789101112131415161718192021/** * Returns a new Dataset containing union of rows in this Dataset and another Dataset. * This is equivalent to `UNION ALL` in SQL. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ËØ•Êï∞ÊçÆÈõÜ‰∏≠ÁöÑË°åÂíåÂè¶‰∏Ä‰∏™Êï∞ÊçÆÈõÜ„ÄÇ * ËøôÁõ∏ÂΩì‰∫éSQL‰∏≠ÁöÑ‚ÄúUNION ALL‚Äù„ÄÇ * * To do a SQL-style set union (that does deduplication of elements), use this function followed * by a [[distinct]]. * * Â¶ÇÊûúÈúÄË¶ÅÂéªÈáçÁöÑËØùÔºåÂú®ËØ•ÊñπÊ≥ïÂêéÁªßÁª≠Áõ¥Êé• [[distinct]] * * @group typedrel * @since 2.0.0 */def union(other: Dataset[T]): Dataset[T] = withSetOperator &#123; // This breaks caching, but it's usually ok because it addresses a very specific use case: // using union to union many files or partitions. // ËøôÊâìÁ†¥‰∫ÜÁºìÂ≠òÔºå‰ΩÜÈÄöÂ∏∏ÊòØÂèØ‰ª•ÁöÑÔºåÂõ†‰∏∫ÂÆÉËß£ÂÜ≥‰∫Ü‰∏Ä‰∏™ÈùûÂ∏∏ÂÖ∑‰ΩìÁöÑÁî®‰æã:‰ΩøÁî®unionÊù•ËÅîÂêàËÆ∏Â§öÊñá‰ª∂ÊàñÂàÜÂå∫„ÄÇ CombineUnions(Union(logicalPlan, other.logicalPlan))&#125; intersect-‰∫§ÈõÜ123456789101112131415161718/** * Returns a new Dataset containing rows only in both this Dataset and another Dataset. * This is equivalent to `INTERSECT` in SQL. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÂè™ÂåÖÂê´ËØ•Êï∞ÊçÆÈõÜÂíåÂè¶‰∏Ä‰∏™Êï∞ÊçÆÈõÜÁõ∏ÂêåÁöÑË°å. * ËøôÁõ∏ÂΩì‰∫éÂú®SQL‰∏≠‚ÄúINTERSECT‚Äù„ÄÇ * ‰ºöÂéªÈáç. * * @note Equality checking is performed directly on the encoded representation of the data * and thus is not affected by a custom `equals` function defined on `T`. * * Á≠âÂºèÊ£ÄÊü•Áõ¥Êé•ÊâßË°åÊï∞ÊçÆÁöÑÁºñÁ†ÅË°®Á§∫ÔºåÂõ†Ê≠§‰∏çÂèóÂÆö‰πâ‰∏∫‚ÄúT‚ÄùÁöÑËá™ÂÆö‰πâ‚Äúequals‚ÄùÂáΩÊï∞ÁöÑÂΩ±Âìç„ÄÇ * @group typedrel * @since 1.6.0 */def intersect(other: Dataset[T]): Dataset[T] = withSetOperator &#123; Intersect(logicalPlan, other.logicalPlan)&#125; except-Âè™ÊòæÁ§∫Âè¶‰∏™Dataset‰∏≠Ê≤°ÊúâÁöÑÂÄº12345678910111213141516/** * Returns a new Dataset containing rows in this Dataset but not in another Dataset. * This is equivalent to `EXCEPT` in SQL. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ËØ•Êï∞ÊçÆÈõÜ‰∏≠ÁöÑË°åÔºåËÄå‰∏çÊòØÂú®Âè¶‰∏Ä‰∏™Êï∞ÊçÆÈõÜ„ÄÇ * ËøôÁ≠â‰ª∑‰∫éSQL‰∏≠ÁöÑ‚ÄúEXCEPT‚Äù„ÄÇ * ‰ºöÂéªÈáç. * * @note Equality checking is performed directly on the encoded representation of the data * and thus is not affected by a custom `equals` function defined on `T`. * @group typedrel * @since 2.0.0 */def except(other: Dataset[T]): Dataset[T] = withSetOperator &#123; Except(logicalPlan, other.logicalPlan)&#125; sample-ÈöèÊú∫ÊäΩÊ†∑1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * Returns a new [[Dataset]] by sampling a fraction of rows, using a user-supplied seed. * * ÈÄöËøá‰ΩøÁî®Áî®Êà∑Êèê‰æõÁöÑÁßçÂ≠êÔºåÈÄöËøáÊäΩÊ†∑ÁöÑÊñπÂºèËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑ[[Dataset]]„ÄÇ * * @param withReplacement Sample with replacement or not. * Ê†∑Êú¨Â∑≤ÁªèÂèñËøáÁöÑÂÄºÊòØÂê¶ÊîæÂõû * @param fraction Fraction of rows to generate. * ÊØè‰∏ÄË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá * @param seed Seed for sampling. * ÂèñÊ†∑ÁßçÂ≠êÔºà‰∏éÈöèÊú∫Êï∞ÁîüÊàêÊúâÂÖ≥Ôºâ * @note This is NOT guaranteed to provide exactly the fraction of the count * of the given [[Dataset]]. * ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ * @group typedrel * @since 1.6.0 */def sample(withReplacement: Boolean, fraction: Double, seed: Long): Dataset[T] = &#123; require(fraction &gt;= 0, s\"Fraction must be nonnegative, but got $&#123;fraction&#125;\") withTypedPlan &#123; Sample(0.0, fraction, withReplacement, seed, logicalPlan)() &#125;&#125;/** * Returns a new [[Dataset]] by sampling a fraction of rows, using a random seed. * * ÈÄöËøáÁ®ãÂ∫èÈöèÊú∫ÁöÑÁßçÂ≠êÔºåÊäΩÊ†∑ËøîÂõûÊñ∞ÁöÑDataSet * * @param withReplacement Sample with replacement or not. * ÂèñÊ†∑ÁªìÊûúÊòØÂê¶ÊîæÂõû * @param fraction Fraction of rows to generate. * ÊØèË°åÊï∞ÊçÆË¢´ÂèñÊ†∑ÁöÑÊ¶ÇÁéá * @note This is NOT guaranteed to provide exactly the fraction of the total count * of the given [[Dataset]]. * ‰∏çËÉΩ‰øùËØÅÂáÜÁ°ÆÁöÑÊåâÁÖßÁªôÂÆöÁöÑÂàÜÊï∞ÂèñÊ†∑„ÄÇÔºà‰∏ÄËà¨ÁªìÊûú‰ºöÂú®Ê¶ÇÁéáÂÄº*ÊÄªÊï∞Â∑¶Âè≥Ôºâ * @group typedrel * @since 1.6.0 */def sample(withReplacement: Boolean, fraction: Double): Dataset[T] = &#123; sample(withReplacement, fraction, Utils.random.nextLong)&#125; randomSplit-ÊåâÁÖßÊùÉÈáçÂàÜÂâ≤1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/** * Randomly splits this Dataset with the provided weights. * * ÈöèÊú∫Â∞ÜÊ≠§Êï∞ÊçÆÈõÜÊåâÁÖßÊâÄÊèê‰æõÁöÑÊùÉÈáçËøõË°åÂàÜÂâ≤„ÄÇ * * @param weights weights for splits, will be normalized if they don't sum to 1. * ÂàáÂàÜÁöÑÊùÉÈáç„ÄÇÂ¶ÇÊûúÂíå‰∏ç‰∏∫1Â∞±‰ºöË¢´Ê†áÂáÜÂåñ„ÄÇ * @param seed Seed for sampling. * ÂèñÊ†∑ÁöÑÁßçÂ≠êÔºàÂΩ±ÂìçÈöèÊú∫Êï∞ÁîüÊàêÂô®Ôºâ * * For Java API, use [[randomSplitAsList]]. * Java API ‰ΩøÁî® [[randomSplitAsList]]. * @group typedrel * @since 2.0.0 */ def randomSplit(weights: Array[Double], seed: Long): Array[Dataset[T]] = &#123; require(weights.forall(_ &gt;= 0), s\"Weights must be nonnegative, but got $&#123;weights.mkString(\"[\", \",\", \"]\")&#125;\") require(weights.sum &gt; 0, s\"Sum of weights must be positive, but got $&#123;weights.mkString(\"[\", \",\", \"]\")&#125;\") // It is possible that the underlying dataframe doesn't guarantee the ordering of rows in its // constituent partitions each time a split is materialized which could result in // overlapping splits. To prevent this, we explicitly sort each input partition to make the // ordering deterministic. // MapType cannot be sorted. val sorted = Sort(logicalPlan.output.filterNot(_.dataType.isInstanceOf[MapType]) .map(SortOrder(_, Ascending)), global = false, logicalPlan) val sum = weights.sum // scanLeft ‰ªéÂè≥Âà∞Âè≥‰æùÊ¨°Á¥ØËÆ°ÁÆó scanLeft(0.0d)(_+_): (0.0,(0.0+0.2),(0.0+0.2+0.8)) val normalizedCumWeights = weights.map(_ / sum).scanLeft(0.0d)(_ + _) // sliding(n) ÊØèÊ¨°Âèñn‰∏™ÂÄºÔºå‰ª•Ê≠•Èïø‰∏∫1ÂêëÂè≥ÊªëÂä®ÔºåÂ¶ÇÔºö(0.0,0.2,0.8).sliding(2)=(0.0,0.2),(0.2,0.8) normalizedCumWeights.sliding(2).map &#123; x =&gt; new Dataset[T]( sparkSession, Sample(x(0), x(1), withReplacement = false, seed, sorted)(), encoder) &#125;.toArray &#125; /** * Randomly splits this Dataset with the provided weights. * * Á®ãÂ∫èËá™Âä®ÁîüÊàêÈöèÊú∫Êï∞ÁßçÂ≠êÔºåÈöèÊú∫Â∞ÜÊ≠§Êï∞ÊçÆÈõÜÊåâÁÖßÊâÄÊèê‰æõÁöÑÊùÉÈáçËøõË°åÂàÜÂâ≤„ÄÇ * * @param weights weights for splits, will be normalized if they don't sum to 1. * ÂàáÂàÜÁöÑÊùÉÈáç„ÄÇÂ¶ÇÊûúÂíå‰∏ç‰∏∫1Â∞±‰ºöË¢´Ê†áÂáÜÂåñ„ÄÇ * @group typedrel * @since 2.0.0 */ def randomSplit(weights: Array[Double]): Array[Dataset[T]] = &#123; randomSplit(weights, Utils.random.nextLong) &#125; /** * Randomly splits this Dataset with the provided weights. Provided for the Python Api. * Python ‰ΩøÁî®ËØ•ÊñπÊ≥ï * * @param weights weights for splits, will be normalized if they don't sum to 1. * @param seed Seed for sampling. */ private[spark] def randomSplit(weights: List[Double], seed: Long): Array[Dataset[T]] = &#123; randomSplit(weights.toArray, seed) &#125; randomSplitAsList12345678910111213141516/** * Returns a Java list that contains randomly split Dataset with the provided weights. * * Ê†πÊçÆÊèê‰æõÁöÑÊùÉÈáçÂàÜÂâ≤DataFramesÔºåËøîÂõûJava list * * @param weights weights for splits, will be normalized if they don't sum to 1. * ÂàáÂàÜÁöÑÊùÉÈáç„ÄÇÂ¶ÇÊûúÂíå‰∏ç‰∏∫1Â∞±‰ºöË¢´Ê†áÂáÜÂåñ„ÄÇ * @param seed Seed for sampling. * ÂèñÊ†∑ÁöÑÁßçÂ≠êÔºàÂΩ±ÂìçÈöèÊú∫Êï∞ÁîüÊàêÂô®Ôºâ * @group typedrel * @since 2.0.0 */def randomSplitAsList(weights: Array[Double], seed: Long): java.util.List[Dataset[T]] = &#123; val values = randomSplit(weights, seed) java.util.Arrays.asList(values: _*)&#125; dropDuplicates-ÂéªÈáç123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475/** * Returns a new Dataset that contains only the unique rows from this Dataset. * This is an alias for `distinct`. * * Âà†Èô§ÈáçÂ§çÁöÑrowÊï∞ÊçÆÔºåÊòØdistinctÁöÑÂà´Âêç * * @group typedrel * @since 2.0.0 */def dropDuplicates(): Dataset[T] = dropDuplicates(this.columns)/** * (Scala-specific) Returns a new Dataset with duplicate rows removed, considering only * the subset of columns. * * Âè™Âà†Èô§ÊåáÂÆöÂàóÁöÑÈáçÂ§çÊï∞ÊçÆ * * @group typedrel * @since 2.0.0 */def dropDuplicates(colNames: Seq[String]): Dataset[T] = withTypedPlan &#123; val resolver = sparkSession.sessionState.analyzer.resolver val allColumns = queryExecution.analyzed.output val groupCols = colNames.flatMap &#123; colName =&gt; // It is possibly there are more than one columns with the same name, // so we call filter instead of find. val cols = allColumns.filter(col =&gt; resolver(col.name, colName)) if (cols.isEmpty) &#123; throw new AnalysisException( s\"\"\"Cannot resolve column name \"$colName\" among ($&#123;schema.fieldNames.mkString(\", \")&#125;)\"\"\") &#125; cols &#125; val groupColExprIds = groupCols.map(_.exprId) val aggCols = logicalPlan.output.map &#123; attr =&gt; if (groupColExprIds.contains(attr.exprId)) &#123; attr &#125; else &#123; // Removing duplicate rows should not change output attributes. We should keep // the original exprId of the attribute. Otherwise, to select a column in original // dataset will cause analysis exception due to unresolved attribute. // Âà†Èô§ÈáçÂ§çË°å‰∏çÂ∫îËØ•Êõ¥ÊîπËæìÂá∫Â±ûÊÄß„ÄÇ // Êàë‰ª¨Â∫îËØ•‰øùÁïôËøô‰∏™Â±ûÊÄßÁöÑÂéüÂßãÂ±ûÊÄß„ÄÇ // Âê¶ÂàôÔºåÂú®ÂéüÂßãÊï∞ÊçÆÈõÜ‰∏≠ÈÄâÊã©‰∏Ä‰∏™ÂàóÂ∞ÜÂØºËá¥ÂàÜÊûêÂºÇÂ∏∏ÔºåÂéüÂõ†ÊòØÊú™Ëß£ÊûêÁöÑÂ±ûÊÄß„ÄÇ Alias(new First(attr).toAggregateExpression(), attr.name)(exprId = attr.exprId) &#125; &#125; Aggregate(groupCols, aggCols, logicalPlan)&#125;/** * Returns a new Dataset with duplicate rows removed, considering only * the subset of columns. * * Âè™ÈíàÂØπÁâπÂÆöÂàóÂÅöÂéªÈáç * * @group typedrel * @since 2.0.0 */def dropDuplicates(colNames: Array[String]): Dataset[T] = dropDuplicates(colNames.toSeq)/** * Returns a new [[Dataset]] with duplicate rows removed, considering only * the subset of columns. * * Âè™ÈíàÂØπÁâπÂÆöÂ§öÂàóÂÅöÂéªÈáç * * @group typedrel * @since 2.0.0 */@scala.annotation.varargsdef dropDuplicates(col1: String, cols: String*): Dataset[T] = &#123; val colNames: Seq[String] = col1 +: cols dropDuplicates(colNames)&#125; transform-Ëá™ÂÆö‰πâËΩ¨Êç¢1234567891011121314151617/** * Concise syntax for chaining custom transformations. * * Áî®‰∫éÈìæÊé•Ëá™ÂÆö‰πâËΩ¨Êç¢ÁöÑÁÆÄÊòéËØ≠Ê≥ï„ÄÇ * * &#123;&#123;&#123; * def featurize(ds: Dataset[T]): Dataset[U] = ... * * ds * .transform(featurize) * .transform(...) * &#125;&#125;&#125; * * @group typedrel * @since 1.6.0 */def transform[U](t: Dataset[T] =&gt; Dataset[U]): Dataset[U] = t(this) filter-ËøáÊª§12345678910111213141516171819202122232425262728293031/** * :: Experimental :: * (Scala-specific) * Returns a new Dataset that only contains elements where `func` returns `true`. * * ËØ•Êï∞ÊçÆÈõÜÂè™ÂåÖÂê´‚Äúfunc‚ÄùËøîÂõû‚Äútrue‚ÄùÁöÑÂÖÉÁ¥†„ÄÇ * * @group typedrel * @since 1.6.0 */ @Experimental @InterfaceStability.Evolving def filter(func: T =&gt; Boolean): Dataset[T] = &#123; withTypedPlan(TypedFilter(func, logicalPlan)) &#125; /** * :: Experimental :: * (Java-specific) * Returns a new Dataset that only contains elements where `func` returns `true`. * * ËøîÂõû‰∏Ä‰∏™Êñ∞Êï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂè™ÂåÖÂê´‚Äúfunc‚ÄùËøîÂõû‚Äútrue‚ÄùÁöÑÂÖÉÁ¥†„ÄÇ * * @group typedrel * @since 1.6.0 */ @Experimental @InterfaceStability.Evolving def filter(func: FilterFunction[T]): Dataset[T] = &#123; withTypedPlan(TypedFilter(func, logicalPlan)) &#125; map1234567891011121314151617181920212223242526272829303132/** * :: Experimental :: * (Scala-specific) * Returns a new Dataset that contains the result of applying `func` to each element. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ÂØπÊØè‰∏™ÂÖÉÁ¥†Â∫îÁî®‚Äúfunc‚ÄùÁöÑÁªìÊûú„ÄÇ * * @group typedrel * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef map[U: Encoder](func: T =&gt; U): Dataset[U] = withTypedPlan &#123; MapElements[T, U](func, logicalPlan)&#125;/** * :: Experimental :: * (Java-specific) * Returns a new Dataset that contains the result of applying `func` to each element. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ÂØπÊØè‰∏™ÂÖÉÁ¥†Â∫îÁî®‚Äúfunc‚ÄùÁöÑÁªìÊûú„ÄÇ * * @group typedrel * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef map[U](func: MapFunction[T, U], encoder: Encoder[U]): Dataset[U] = &#123; implicit val uEnc = encoder withTypedPlan(MapElements[T, U](func, logicalPlan))&#125; mapPartitions1234567891011121314151617181920212223242526272829303132333435/** * :: Experimental :: * (Scala-specific) * Returns a new Dataset that contains the result of applying `func` to each partition. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ÂØπÊØè‰∏™ÂàÜÂå∫Â∫îÁî®‚Äúfunc‚ÄùÁöÑÁªìÊûú„ÄÇ * * @group typedrel * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef mapPartitions[U: Encoder](func: Iterator[T] =&gt; Iterator[U]): Dataset[U] = &#123; new Dataset[U]( sparkSession, MapPartitions[T, U](func, logicalPlan), implicitly[Encoder[U]])&#125;/** * :: Experimental :: * (Java-specific) * Returns a new Dataset that contains the result of applying `f` to each partition. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåËØ•Êï∞ÊçÆÈõÜÂåÖÂê´ÂØπÊØè‰∏™ÂàÜÂå∫Â∫îÁî®‚Äúf‚ÄùÁöÑÁªìÊûú„ÄÇ * * @group typedrel * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef mapPartitions[U](f: MapPartitionsFunction[T, U], encoder: Encoder[U]): Dataset[U] = &#123; val func: (Iterator[T]) =&gt; Iterator[U] = x =&gt; f.call(x.asJava).asScala mapPartitions(func)(encoder)&#125; flatMap-Â∞ÜmapÁªìÊûúflatÊâÅÂπ≥Âåñ123456789101112131415161718192021222324252627282930313233/** * :: Experimental :: * (Scala-specific) * Returns a new Dataset by first applying a function to all elements of this Dataset, * and then flattening the results. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÈ¶ñÂÖàÂØπËØ•Êï∞ÊçÆÈõÜÁöÑÊâÄÊúâÂÖÉÁ¥†Â∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ * * @group typedrel * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef flatMap[U: Encoder](func: T =&gt; TraversableOnce[U]): Dataset[U] = mapPartitions(_.flatMap(func))/** * :: Experimental :: * (Java-specific) * Returns a new Dataset by first applying a function to all elements of this Dataset, * and then flattening the results. * * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÈõÜÔºåÈ¶ñÂÖàÂØπËØ•Êï∞ÊçÆÈõÜÁöÑÊâÄÊúâÂÖÉÁ¥†Â∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ * * @group typedrel * @since 1.6.0 */@Experimental@InterfaceStability.Evolvingdef flatMap[U](f: FlatMapFunction[T, U], encoder: Encoder[U]): Dataset[U] = &#123; val func: (T) =&gt; Iterator[U] = x =&gt; f.call(x).asScala flatMap(func)(encoder)&#125; repartition-ÈáçÂàÜÂå∫123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * Returns a new Dataset that has exactly `numPartitions` partitions. * * ËøîÂõû‰∏Ä‰∏™ ÁªôÂÆöÂàÜÂå∫Êï∞ÈáèÁöÑÊñ∞DataSet * * @group typedrel * @since 1.6.0 */ def repartition(numPartitions: Int): Dataset[T] = withTypedPlan &#123; Repartition(numPartitions, shuffle = true, logicalPlan) &#125; /** * Returns a new Dataset partitioned by the given partitioning expressions into * `numPartitions`. The resulting Dataset is hash partitioned. * * ËøîÂõû‰∏Ä‰∏™Áî±ÁªôÂÆöÁöÑÂàÜÂå∫Ë°®ËææÂºèÂàíÂàÜ‰∏∫‚ÄúnumÂàÜÂå∫‚ÄùÁöÑÊñ∞Êï∞ÊçÆÈõÜ„ÄÇ * ÁîüÊàêÁöÑDatasetÊòØÂìàÂ∏åÂàÜÂå∫ÁöÑ„ÄÇ * * This is the same operation as \"DISTRIBUTE BY\" in SQL (Hive QL). * * Âíå SQL (Hive QL) ‰∏≠ÁöÑ \"DISTRIBUTE BY\" ‰ΩúÁî®Áõ∏Âêå * * @group typedrel * @since 2.0.0 */ @scala.annotation.varargs def repartition(numPartitions: Int, partitionExprs: Column*): Dataset[T] = withTypedPlan &#123; RepartitionByExpression(partitionExprs.map(_.expr), logicalPlan, Some(numPartitions)) &#125; /** * Returns a new Dataset partitioned by the given partitioning expressions, using * `spark.sql.shuffle.partitions` as number of partitions. * The resulting Dataset is hash partitioned. * * Ê†πÊçÆÊåáÂÆöÁöÑÂàÜÂå∫Ë°®ËææÂºèËøõË°åÈáçÂàÜÂå∫„ÄÇ * ÂàÜÂå∫Êï∞ÈáèÁî±`spark.sql.shuffle.partitions` Ëé∑Âæó„ÄÇ * ÁªìÊûúDataset ÊòØÂìàÂ∏åÂàÜÂå∫ÁöÑ„ÄÇ * * This is the same operation as \"DISTRIBUTE BY\" in SQL (Hive QL). * * Âíå SQL (Hive QL) ‰∏≠ÁöÑ \"DISTRIBUTE BY\" ‰ΩúÁî®Áõ∏Âêå * * @group typedrel * @since 2.0.0 */ @scala.annotation.varargs def repartition(partitionExprs: Column*): Dataset[T] = withTypedPlan &#123; RepartitionByExpression(partitionExprs.map(_.expr), logicalPlan, numPartitions = None) &#125; coalesce-ÂêàÂπ∂ÂàÜÂå∫1234567891011121314151617/** * Returns a new Dataset that has exactly `numPartitions` partitions. * Similar to coalesce defined on an `RDD`, this operation results in a narrow dependency, e.g. * if you go from 1000 partitions to 100 partitions, there will not be a shuffle, instead each of * the 100 new partitions will claim 10 of the current partitions. * * ÂêàÂπ∂„ÄÇ * ËøîÂõûÁ°ÆÂÆöÂàÜÂå∫Êï∞ÈáèÁöÑDataset„ÄÇ * ÂíåRDD‰∏≠ÁöÑÂêàÂπ∂ÊñπÊ≥ïÁ±ª‰ººÔºåËøô‰∏™Êìç‰ΩúÂØºËá¥‰∫Ü‰∏Ä‰∏™Á™Ñ‰æùËµñ„ÄÇ * ‰æãÂ¶ÇÔºöÂ∞Ü1000‰∏™ÂàÜÂå∫ÂêàÂπ∂‰∏∫100‰∏™ÂàÜÂå∫ÔºåËøô‰∏™ËøáÁ®ãÊ≤°ÊúâshuffleÔºåËÄåÊòØ100‰∏™Êñ∞ÂàÜÂå∫‰∏≠ÁöÑÊØè‰∏™ÂàÜÂå∫Â∞ÜÂ£∞ÊòéÂΩìÂâçÁöÑ10‰∏™ÂàÜÂå∫„ÄÇ * * @group typedrel * @since 1.6.0 */ def coalesce(numPartitions: Int): Dataset[T] = withTypedPlan &#123; Repartition(numPartitions, shuffle = false, logicalPlan) &#125; distinct-ÂéªÈáç1234567891011121314/** * Returns a new Dataset that contains only the unique rows from this Dataset. * This is an alias for `dropDuplicates`. * * ÂéªÈáç„ÄÇ * ËøîÂõûÂéªÈáçÂêéÁöÑDataset„ÄÇ * Âíå `dropDuplicates` ÊñπÊ≥ï‰∏ÄËá¥„ÄÇ * * @note Equality checking is performed directly on the encoded representation of the data * and thus is not affected by a custom `equals` function defined on `T`. * @group typedrel * @since 2.0.0 */ def distinct(): Dataset[T] = dropDuplicates()","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"},{"name":"Ê∫êÁ†Å","slug":"Ê∫êÁ†Å","permalink":"https://stanxia.github.io/tags/Ê∫êÁ†Å/"}]},{"title":"JavaRDDLike.scala","slug":"JavaRDDLike-scala","date":"2017-11-21T14:21:23.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/11/21/JavaRDDLike-scala/","link":"","permalink":"https://stanxia.github.io/2017/11/21/JavaRDDLike-scala/","excerpt":"‰ΩøÁî®JavaÂºÄÂèëSparkÁ®ãÂ∫èÔºåJavaRDDÁöÑÂäüËÉΩÁÆóÂ≠ê‰∏≠Ëã±ÊñáÊ≥®ÈáäJavaRDDLikeÁöÑÂÆûÁé∞Â∫îËØ•Êâ©Â±ïËøô‰∏™ËôöÊãüÊäΩË±°Á±ªÔºåËÄå‰∏çÊòØÁõ¥Êé•ÁªßÊâøËøô‰∏™ÁâπÊÄß„ÄÇ\n\nJavaRDD1234567891011121314151617181920package org.apache.spark.api.javaprivate[spark] abstract class AbstractJavaRDDLike[T, This &lt;: JavaRDDLike[T, This]]  extends JavaRDDLike[T, This]/**  * Defines operations common to several Java RDD implementations.  *  * ÂÆö‰πâÂá†‰∏™Java RDDÂÆûÁé∞ÁöÑÂ∏∏ËßÅÊìç‰Ωú„ÄÇ  *  * @note This trait is not intended to be implemented by user code.  *  *       ËØ•ÁâπÊÄß‰∏çÊâìÁÆóÁî±Áî®Êà∑‰ª£Á†ÅÂÆûÁé∞„ÄÇ  */trait JavaRDDLike[T, This &lt;: JavaRDDLike[T, This]] extends Serializable &#123;  def wrapRDD(rdd: RDD[T]): This  implicit val classTag: ClassTag[T]  def rdd: RDD[T]","text":"‰ΩøÁî®JavaÂºÄÂèëSparkÁ®ãÂ∫èÔºåJavaRDDÁöÑÂäüËÉΩÁÆóÂ≠ê‰∏≠Ëã±ÊñáÊ≥®ÈáäJavaRDDLikeÁöÑÂÆûÁé∞Â∫îËØ•Êâ©Â±ïËøô‰∏™ËôöÊãüÊäΩË±°Á±ªÔºåËÄå‰∏çÊòØÁõ¥Êé•ÁªßÊâøËøô‰∏™ÁâπÊÄß„ÄÇ JavaRDD1234567891011121314151617181920package org.apache.spark.api.javaprivate[spark] abstract class AbstractJavaRDDLike[T, This &lt;: JavaRDDLike[T, This]] extends JavaRDDLike[T, This]/** * Defines operations common to several Java RDD implementations. * * ÂÆö‰πâÂá†‰∏™Java RDDÂÆûÁé∞ÁöÑÂ∏∏ËßÅÊìç‰Ωú„ÄÇ * * @note This trait is not intended to be implemented by user code. * * ËØ•ÁâπÊÄß‰∏çÊâìÁÆóÁî±Áî®Êà∑‰ª£Á†ÅÂÆûÁé∞„ÄÇ */trait JavaRDDLike[T, This &lt;: JavaRDDLike[T, This]] extends Serializable &#123; def wrapRDD(rdd: RDD[T]): This implicit val classTag: ClassTag[T] def rdd: RDD[T] partitions1234/** Set of partitions in this RDD. * Âú®Ëøô‰∏™RDD‰∏≠ËÆæÁΩÆÁöÑÂàÜÂå∫„ÄÇ * */def partitions: JList[Partition] = rdd.partitions.toSeq.asJava getNumPartitions12345/** Return the number of partitions in this RDD. * ËøîÂõûËØ•RDD‰∏≠ÁöÑÂàÜÂå∫Êï∞„ÄÇ * */@Since(\"1.6.0\")def getNumPartitions: Int = rdd.getNumPartitions partitioner1234/** The partitioner of this RDD. * Ëøô‰∏™RDDÁöÑÂàÜÂå∫„ÄÇ * */def partitioner: Optional[Partitioner] = JavaUtils.optionToOptional(rdd.partitioner) context12345/** The [[org.apache.spark.SparkContext]] that this RDD was created on. * * Ëøô‰∏™RDDÊòØÂú®[[org.apache.spark.SparkContext]]‰∏äÈù¢ÂàõÂª∫ÁöÑ„ÄÇ * */def context: SparkContext = rdd.context id1234/** A unique ID for this RDD (within its SparkContext). * Ëøô‰∏™RDDÁöÑÊÉü‰∏ÄID(Âú®ÂÆÉÁöÑSparkContextÂÜÖ)„ÄÇ * */def id: Int = rdd.id name1def name(): String = rdd.name getStorageLevel1234/** Get the RDD's current storage level, or StorageLevel.NONE if none is set. * Ëé∑ÂèñRDDÁöÑÂΩìÂâçÂ≠òÂÇ®Á∫ßÂà´ÔºåÊàñStorageLevel„ÄÇÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆÂ∞±Ê≤°Êúâ„ÄÇ * */def getStorageLevel: StorageLevel = rdd.getStorageLevel iterator12345678910/** * Internal method to this RDD; will read from cache if applicable, or otherwise compute it. * This should ''not'' be called by users directly, but is available for implementors of custom * subclasses of RDD. * ÂÜÖÈÉ®ÊñπÊ≥ïÁöÑRDD;Â∞Ü‰ªéÁºìÂ≠òËØªÂèñÔºåÂ¶ÇÊûúÈÄÇÁî®ÁöÑËØùÔºåÊàñËÄÖËÆ°ÁÆóÂÆÉ„ÄÇ * ËøôÂ∫îËØ•‚Äú‰∏çÊòØ‚ÄùÁõ¥Êé•Áî±Áî®Êà∑Ë∞ÉÁî®ÔºåËÄåÊòØÁî®‰∫éRDDÁöÑËá™ÂÆö‰πâÂ≠êÁ±ªÁöÑÂÆûÁé∞ËÄÖ * */def iterator(split: Partition, taskContext: TaskContext): JIterator[T] = rdd.iterator(split, taskContext).asJavs Transformations (return a new RDD)map1234567/** * Return a new RDD by applying a function to all elements of this RDD. * Â∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ * */def map[R](f: JFunction[T, R]): JavaRDD[R] = new JavaRDD(rdd.map(f)(fakeClassTag))(fakeClassTag) mapPartitionsWithIndex1234567891011/** * Return a new RDD by applying a function to each partition of this RDD, while tracking the index * of the original partition. * ÈÄöËøáÂú®RDDÁöÑÊØè‰∏™ÂàÜÂå∫‰∏äÂ∫îÁî®‰∏Ä‰∏™ÂáΩÊï∞Êù•ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÔºåÂêåÊó∂Ë∑üË∏™ÂéüÂßãÂàÜÂå∫ÁöÑÁ¥¢Âºï„ÄÇ * */def mapPartitionsWithIndex[R]( f: JFunction2[jl.Integer, JIterator[T], JIterator[R]], preservesPartitioning: Boolean = false): JavaRDD[R] = new JavaRDD(rdd.mapPartitionsWithIndex((a, b) =&gt; f.call(a, b.asJava).asScala, preservesPartitioning)(fakeClassTag))(fakeClassTag) mapToDouble1234567/** * Return a new RDD by applying a function to all elements of this RDD. * Â∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ */def mapToDouble[R](f: DoubleFunction[T]): JavaDoubleRDD = &#123; new JavaDoubleRDD(rdd.map(f.call(_).doubleValue()))&#125; mapToPair123456789/** * Return a new RDD by applying a function to all elements of this RDD. * Â∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ * */def mapToPair[K2, V2](f: PairFunction[T, K2, V2]): JavaPairRDD[K2, V2] = &#123; def cm: ClassTag[(K2, V2)] = implicitly[ClassTag[(K2, V2)]] new JavaPairRDD(rdd.map[(K2, V2)](f)(cm))(fakeClassTag[K2], fakeClassTag[V2])&#125; flatMap12345678910/** * Return a new RDD by first applying a function to all elements of this * RDD, and then flattening the results. * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÔºåÈ¶ñÂÖàÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ * */def flatMap[U](f: FlatMapFunction[T, U]): JavaRDD[U] = &#123; def fn: (T) =&gt; Iterator[U] = (x: T) =&gt; f.call(x).asScala JavaRDD.fromRDD(rdd.flatMap(fn)(fakeClassTag[U]))(fakeClassTag[U])&#125; flatMapToDouble12345678910/** * Return a new RDD by first applying a function to all elements of this * RDD, and then flattening the results. * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÔºåÈ¶ñÂÖàÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ * */def flatMapToDouble(f: DoubleFlatMapFunction[T]): JavaDoubleRDD = &#123; def fn: (T) =&gt; Iterator[jl.Double] = (x: T) =&gt; f.call(x).asScala new JavaDoubleRDD(rdd.flatMap(fn).map(_.doubleValue()))&#125; flatMapToPair1234567891011/** * Return a new RDD by first applying a function to all elements of this * RDD, and then flattening the results. * ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÔºåÈ¶ñÂÖàÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúÊâÅÂπ≥Âåñ„ÄÇ * */def flatMapToPair[K2, V2](f: PairFlatMapFunction[T, K2, V2]): JavaPairRDD[K2, V2] = &#123; def fn: (T) =&gt; Iterator[(K2, V2)] = (x: T) =&gt; f.call(x).asScala def cm: ClassTag[(K2, V2)] = implicitly[ClassTag[(K2, V2)]] JavaPairRDD.fromRDD(rdd.flatMap(fn)(cm))(fakeClassTag[K2], fakeClassTag[V2])&#125; mapPartitions12345678910111213141516171819202122232425/** * Return a new RDD by applying a function to each partition of this RDD. * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ * */def mapPartitions[U](f: FlatMapFunction[JIterator[T], U]): JavaRDD[U] = &#123; def fn: (Iterator[T]) =&gt; Iterator[U] = &#123; (x: Iterator[T]) =&gt; f.call(x.asJava).asScala &#125; JavaRDD.fromRDD(rdd.mapPartitions(fn)(fakeClassTag[U]))(fakeClassTag[U])&#125;/** * Return a new RDD by applying a function to each partition of this RDD. * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ * */def mapPartitions[U](f: FlatMapFunction[JIterator[T], U], preservesPartitioning: Boolean): JavaRDD[U] = &#123; def fn: (Iterator[T]) =&gt; Iterator[U] = &#123; (x: Iterator[T]) =&gt; f.call(x.asJava).asScala &#125; JavaRDD.fromRDD( rdd.mapPartitions(fn, preservesPartitioning)(fakeClassTag[U]))(fakeClassTag[U])&#125; mapPartitionsToDouble12345678910111213141516171819202122232425/** * Return a new RDD by applying a function to each partition of this RDD. * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ * */def mapPartitionsToDouble(f: DoubleFlatMapFunction[JIterator[T]]): JavaDoubleRDD = &#123; def fn: (Iterator[T]) =&gt; Iterator[jl.Double] = &#123; (x: Iterator[T]) =&gt; f.call(x.asJava).asScala &#125; new JavaDoubleRDD(rdd.mapPartitions(fn).map(_.doubleValue()))&#125;/** * Return a new RDD by applying a function to each partition of this RDD. * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ * */def mapPartitionsToDouble(f: DoubleFlatMapFunction[JIterator[T]], preservesPartitioning: Boolean): JavaDoubleRDD = &#123; def fn: (Iterator[T]) =&gt; Iterator[jl.Double] = &#123; (x: Iterator[T]) =&gt; f.call(x.asJava).asScala &#125; new JavaDoubleRDD(rdd.mapPartitions(fn, preservesPartitioning) .map(_.doubleValue()))&#125; mapPartitionsToPair1234567891011121314151617181920212223242526/** * Return a new RDD by applying a function to each partition of this RDD. * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ * */def mapPartitionsToPair[K2, V2](f: PairFlatMapFunction[JIterator[T], K2, V2]):JavaPairRDD[K2, V2] = &#123; def fn: (Iterator[T]) =&gt; Iterator[(K2, V2)] = &#123; (x: Iterator[T]) =&gt; f.call(x.asJava).asScala &#125; JavaPairRDD.fromRDD(rdd.mapPartitions(fn))(fakeClassTag[K2], fakeClassTag[V2])&#125;/** * Return a new RDD by applying a function to each partition of this RDD. * ÈÄöËøáÂ∞Ü‰∏Ä‰∏™ÂáΩÊï∞Â∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊØè‰∏™ÂàÜÂå∫ÔºåËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDD„ÄÇ * */def mapPartitionsToPair[K2, V2](f: PairFlatMapFunction[JIterator[T], K2, V2], preservesPartitioning: Boolean): JavaPairRDD[K2, V2] = &#123; def fn: (Iterator[T]) =&gt; Iterator[(K2, V2)] = &#123; (x: Iterator[T]) =&gt; f.call(x.asJava).asScala &#125; JavaPairRDD.fromRDD( rdd.mapPartitions(fn, preservesPartitioning))(fakeClassTag[K2], fakeClassTag[V2])&#125; foreachPartition12345678/** * Applies a function f to each partition of this RDD. * Â∞ÜÂáΩÊï∞fÂ∫îÁî®‰∫éËØ•RDDÁöÑÊØè‰∏™ÂàÜÂå∫„ÄÇ * */def foreachPartition(f: VoidFunction[JIterator[T]]): Unit = &#123; rdd.foreachPartition(x =&gt; f.call(x.asJava))&#125; glom1234567/** * Return an RDD created by coalescing all elements within each partition into an array. * ËøîÂõû‰∏Ä‰∏™RDDÔºåÂÆÉÂ∞ÜÊØè‰∏™ÂàÜÂå∫‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÂêàÂπ∂Âà∞‰∏Ä‰∏™Êï∞ÁªÑ‰∏≠„ÄÇ * */def glom(): JavaRDD[JList[T]] = new JavaRDD(rdd.glom().map(_.toSeq.asJava)) cartesian12345678/** * Return the Cartesian product of this RDD and another one, that is, the RDD of all pairs of * elements (a, b) where a is in `this` and b is in `other`. * ËøîÂõûËøô‰∏™RDDÂíåÂè¶‰∏Ä‰∏™ÁöÑÁ¨õÂç°Â∞î‰πòÁßØÔºåÂç≥ÊâÄÊúâÂÖÉÁ¥†ÂØπÁöÑRDD(a,b) ÔºöaÂú®ËØ•RDD‰∏≠ÔºåbÂú®Âè¶‰∏Ä‰∏™RDD‰∏≠ * */def cartesian[U](other: JavaRDDLike[U, _]): JavaPairRDD[T, U] = JavaPairRDD.fromRDD(rdd.cartesian(other.rdd)(other.classTag))(classTag, other.classTag) groupBy123456789101112131415161718192021222324252627/** * Return an RDD of grouped elements. Each group consists of a key and a sequence of elements * mapping to that key. * ËøîÂõûÂàÜÁªÑÂÖÉÁ¥†ÁöÑRDD„ÄÇ * ÊØè‰∏™ÁªÑÁî±‰∏Ä‰∏™ÈîÆÂíå‰∏Ä‰∏™Êò†Â∞ÑÂà∞ËØ•ÈîÆÁöÑÂÖÉÁ¥†Â∫èÂàóÁªÑÊàê„ÄÇ * */def groupBy[U](f: JFunction[T, U]): JavaPairRDD[U, JIterable[T]] = &#123; // The type parameter is U instead of K in order to work around a compiler bug; see SPARK-4459 // Á±ªÂûãÂèÇÊï∞ÊòØUËÄå‰∏çÊòØKÔºåÊòØ‰∏∫‰∫ÜÁªïËøáÁºñËØëÂô®ÈîôËØØ implicit val ctagK: ClassTag[U] = fakeClassTag implicit val ctagV: ClassTag[JList[T]] = fakeClassTag JavaPairRDD.fromRDD(groupByResultToJava(rdd.groupBy(f)(fakeClassTag)))&#125;/** * Return an RDD of grouped elements. Each group consists of a key and a sequence of elements * mapping to that key. * ËøîÂõûÂàÜÁªÑÂÖÉÁ¥†ÁöÑRDD„ÄÇ * ÊØè‰∏™ÁªÑÁî±‰∏Ä‰∏™ÈîÆÂíå‰∏Ä‰∏™Êò†Â∞ÑÂà∞ËØ•ÈîÆÁöÑÂÖÉÁ¥†Â∫èÂàóÁªÑÊàê„ÄÇ */def groupBy[U](f: JFunction[T, U], numPartitions: Int): JavaPairRDD[U, JIterable[T]] = &#123; // The type parameter is U instead of K in order to work around a compiler bug; see SPARK-4459 implicit val ctagK: ClassTag[U] = fakeClassTag implicit val ctagV: ClassTag[JList[T]] = fakeClassTag JavaPairRDD.fromRDD(groupByResultToJava(rdd.groupBy(f, numPartitions)(fakeClassTag[U])))&#125; pipe123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/** * Return an RDD created by piping elements to a forked external process. * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD * */def pipe(command: String): JavaRDD[String] = &#123; rdd.pipe(command)&#125;/** * Return an RDD created by piping elements to a forked external process. * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD * */def pipe(command: JList[String]): JavaRDD[String] = &#123; rdd.pipe(command.asScala)&#125;/** * Return an RDD created by piping elements to a forked external process. * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD * */def pipe(command: JList[String], env: JMap[String, String]): JavaRDD[String] = &#123; rdd.pipe(command.asScala, env.asScala)&#125;/** * Return an RDD created by piping elements to a forked external process. * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD * */def pipe(command: JList[String], env: JMap[String, String], separateWorkingDir: Boolean, bufferSize: Int): JavaRDD[String] = &#123; rdd.pipe(command.asScala, env.asScala, null, null, separateWorkingDir, bufferSize)&#125;/** * Return an RDD created by piping elements to a forked external process. * ËøîÂõûÁî±ÁÆ°ÈÅìÂÖÉÁ¥†Ë∞ÉÁî®Â§ñÈÉ®Á®ãÂ∫èËøîÂõûÊñ∞ÁöÑRDD * */def pipe(command: JList[String], env: JMap[String, String], separateWorkingDir: Boolean, bufferSize: Int, encoding: String): JavaRDD[String] = &#123; rdd.pipe(command.asScala, env.asScala, null, null, separateWorkingDir, bufferSize, encoding)&#125; zip123456789101112/** * Zips this RDD with another one, returning key-value pairs with the first element in each RDD, * second element in each RDD, etc. Assumes that the two RDDs have the *same number of * partitions* and the *same number of elements in each partition* (e.g. one was made through * a map on the other). * Â∞ÜÊ≠§RDD‰∏éÂè¶‰∏Ä‰∏™RDDËøõË°åZipsÔºåËøîÂõûÈîÆÂÄºÂØπÔºåÊØè‰∏™RDD‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÊØè‰∏™RDD‰∏≠ÁöÑÁ¨¨‰∫å‰∏™ÂÖÉÁ¥†ÔºåÁ≠âÁ≠â„ÄÇ * ÂÅáËÆæ‰∏§‰∏™RDDsÊã•ÊúâÁõ∏ÂêåÊï∞ÈáèÁöÑÂàÜÂå∫ÂíåÊØè‰∏™ÂàÜÂå∫‰∏≠Áõ∏ÂêåÊï∞ÈáèÁöÑÂÖÉÁ¥† * (‰æãÂ¶ÇÔºå‰∏Ä‰∏™ÊòØÈÄöËøáÂè¶‰∏Ä‰∏™mapÁöÑ)„ÄÇ */def zip[U](other: JavaRDDLike[U, _]): JavaPairRDD[T, U] = &#123; JavaPairRDD.fromRDD(rdd.zip(other.rdd)(other.classTag))(classTag, other.classTag)&#125; zipPartitions1234567891011121314151617/** * Zip this RDD's partitions with one (or more) RDD(s) and return a new RDD by * applying a function to the zipped partitions. Assumes that all the RDDs have the * *same number of partitions*, but does *not* require them to have the same number * of elements in each partition. * Áî®‰∏Ä‰∏™(ÊàñÂ§ö‰∏™)RDD(ÊàñÂ§ö‰∏™)Êù•ÂéãÁº©Ëøô‰∏™RDDÁöÑÂàÜÂå∫ÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™Êñ∞ÁöÑRDDÂ∞ÜÂáΩÊï∞Â∫îÁî®‰∫éÂéãÁº©ÂàÜÂå∫„ÄÇ * ÂÅáËÆæÊâÄÊúâRDDsÊã•ÊúâÁõ∏ÂêåÊï∞ÈáèÁöÑÂàÜÂå∫Ôºå‰ΩÜ‰∏çË¶ÅÊ±ÇÂÆÉ‰ª¨Âú®ÊØè‰∏™ÂàÜÂå∫‰∏≠Êã•ÊúâÁõ∏ÂêåÊï∞ÈáèÁöÑÂÖÉÁ¥†„ÄÇ */def zipPartitions[U, V]( other: JavaRDDLike[U, _], f: FlatMapFunction2[JIterator[T], JIterator[U], V]): JavaRDD[V] = &#123; def fn: (Iterator[T], Iterator[U]) =&gt; Iterator[V] = &#123; (x: Iterator[T], y: Iterator[U]) =&gt; f.call(x.asJava, y.asJava).asScala &#125; JavaRDD.fromRDD( rdd.zipPartitions(other.rdd)(fn)(other.classTag, fakeClassTag[V]))(fakeClassTag[V])&#125; zipWithUniqueId1234567891011/** * Zips this RDD with generated unique Long ids. Items in the kth partition will get ids k, n+k, * 2*n+k, ..., where n is the number of partitions. So there may exist gaps, but this method * won't trigger a spark job, which is different from [[org.apache.spark.rdd.RDD#zipWithIndex]]. * Áî®ÁîüÊàêÁöÑÂîØ‰∏ÄÈïøÁöÑidÊù•ÂéãÁº©Ëøô‰∏™RDD„ÄÇ * Á¨¨k‰∏™ÂàÜÂå∫ÁöÑÈ°πÂ∞ÜÂæóÂà∞id k,n + k,2 *n+ kÔºå‚Ä¶ÔºåÂÖ∂‰∏≠nÊòØÂàÜÂå∫Êï∞„ÄÇ * Âõ†Ê≠§ÔºåÂèØËÉΩÂ≠òÂú®Â∑ÆË∑ùÔºå‰ΩÜËøôÁßçÊñπÊ≥ï‰∏ç‰ºöËß¶Âèëspark‰Ωú‰∏öÔºåÂÆÉ‰∏é[org .apache.spark. spark.rdd. rdd. rdd # zipWithIndex]‰∏çÂêå„ÄÇ */def zipWithUniqueId(): JavaPairRDD[T, jl.Long] = &#123; JavaPairRDD.fromRDD(rdd.zipWithUniqueId()).asInstanceOf[JavaPairRDD[T, jl.Long]]&#125; zipWithIndex12345678910111213141516/** * Zips this RDD with its element indices. The ordering is first based on the partition index * and then the ordering of items within each partition. So the first item in the first * partition gets index 0, and the last item in the last partition receives the largest index. * This is similar to Scala's zipWithIndex but it uses Long instead of Int as the index type. * This method needs to trigger a spark job when this RDD contains more than one partitions. * * Áî®ÂÆÉÁöÑÂÖÉÁ¥†Á¥¢ÂºïÊù•ÂéãÁº©Ëøô‰∏™RDD„ÄÇ * ÊéíÂ∫èÈ¶ñÂÖàÂü∫‰∫éÂàÜÂå∫Á¥¢ÂºïÔºåÁÑ∂ÂêéÊòØÊØè‰∏™ÂàÜÂå∫‰∏≠ÁöÑÊù°ÁõÆÁöÑÊéíÂ∫è„ÄÇ * Âõ†Ê≠§ÔºåÁ¨¨‰∏Ä‰∏™ÂàÜÂå∫‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™È°πÁöÑÁ¥¢ÂºïÂÄº‰∏∫0ÔºåÊúÄÂêé‰∏Ä‰∏™ÂàÜÂå∫‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™È°πÂæóÂà∞ÊúÄÂ§ßÁöÑÁ¥¢Âºï„ÄÇ * ËøôÁ±ª‰ºº‰∫éScalaÁöÑzipWithIndexÔºå‰ΩÜÂÆÉ‰ΩøÁî®ÁöÑÊòØLongËÄå‰∏çÊòØInt‰Ωú‰∏∫Á¥¢ÂºïÁ±ªÂûã„ÄÇ * ÂΩìËøô‰∏™RDDÂåÖÂê´Â§ö‰∏™ÂàÜÂå∫Êó∂ÔºåËøô‰∏™ÊñπÊ≥ïÈúÄË¶ÅËß¶Âèë‰∏Ä‰∏™spark‰Ωú‰∏ö„ÄÇ */def zipWithIndex(): JavaPairRDD[T, jl.Long] = &#123; JavaPairRDD.fromRDD(rdd.zipWithIndex()).asInstanceOf[JavaPairRDD[T, jl.Long]]&#125; Actions (launch a job to return a value to the user program)foreach1234567/** * Applies a function f to all elements of this RDD. * Â∞ÜÂáΩÊï∞fÂ∫îÁî®‰∫éËØ•RDDÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ */def foreach(f: VoidFunction[T]) &#123; rdd.foreach(x =&gt; f.call(x))&#125; collect12345678910/** * Return an array that contains all of the elements in this RDD. * ËøîÂõûÂåÖÂê´ËØ•RDD‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ„ÄÇ * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ */def collect(): JList[T] = rdd.collect().toSeq.asJava toLocalIterator123456789/** * Return an iterator that contains all of the elements in this RDD. * ËøîÂõûÂåÖÂê´ËØ•RDD‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑËø≠‰ª£Âô®„ÄÇ * * The iterator will consume as much memory as the largest partition in this RDD. * Ëø≠‰ª£Âô®Â∞ÜÊ∂àËÄó‰∏éÊ≠§RDD‰∏≠ÊúÄÂ§ßÁöÑÂàÜÂå∫‰∏ÄÊ†∑Â§öÁöÑÂÜÖÂ≠ò„ÄÇ */def toLocalIterator(): JIterator[T] = asJavaIteratorConverter(rdd.toLocalIterator).asJava collectPartitions1234567891011 /** * Return an array that contains all of the elements in a specific partition of this RDD. * ËøîÂõûÂåÖÂê´ËØ•RDDÁöÑÁâπÂÆöÂàÜÂå∫‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ„ÄÇ */def collectPartitions(partitionIds: Array[Int]): Array[JList[T]] = &#123; // This is useful for implementing `take` from other language frontends // like Python where the data is serialized. // ËøôÊúâÂä©‰∫é‰ªéÂÖ∂‰ªñËØ≠Ë®ÄÁöÑÂâçÊ≤øÂÆûÁé∞‚Äútake‚ÄùÔºåÂ¶ÇPythonÔºåÊï∞ÊçÆË¢´Â∫èÂàóÂåñ„ÄÇ val res = context.runJob(rdd, (it: Iterator[T]) =&gt; it.toArray, partitionIds) res.map(_.toSeq.asJava)&#125; reduce123456/** * Reduces the elements of this RDD using the specified commutative and associative binary * operator. * ‰ΩøÁî®ÊåáÂÆöÁöÑ‰∫§Êç¢ÂíåÂÖ≥ËÅî‰∫åÂÖÉËøêÁÆóÁ¨¶Êù•ÂáèÂ∞ëËØ•RDDÁöÑÂÖÉÁ¥†„ÄÇ */def reduce(f: JFunction2[T, T, T]): T = rdd.reduce(f) treeReduce12345678910111213/** * Reduces the elements of this RDD in a multi-level tree pattern. * Â∞ÜÊ≠§RDDÁöÑÂÖÉÁ¥†ÁÆÄÂåñ‰∏∫Â§öÂ±ÇÊ†ëÊ®°Âºè„ÄÇ * * @param depth suggested depth of the tree Âª∫ËÆÆÊ†ëÁöÑÊ∑±Â∫¶ * @see [[org.apache.spark.api.java.JavaRDDLike#reduce]] */def treeReduce(f: JFunction2[T, T, T], depth: Int): T = rdd.treeReduce(f, depth)/** * [[org.apache.spark.api.java.JavaRDDLike#treeReduce]] Âª∫ËÆÆÊ∑±Â∫¶ 2 . */def treeReduce(f: JFunction2[T, T, T]): T = treeReduce(f, 2) fold123456789101112131415161718192021 /** * Aggregate the elements of each partition, and then the results for all the partitions, using a * given associative function and a neutral \"zero value\". The function * op(t1, t2) is allowed to modify t1 and return it as its result value to avoid object * allocation; however, it should not modify t2. * ÂØπÊØè‰∏™ÂàÜÂå∫ÁöÑÂÖÉÁ¥†ËøõË°åËÅöÂêàÔºåÁÑ∂Âêé‰ΩøÁî®ÁªôÂÆöÁöÑÂÖ≥ËÅîÂáΩÊï∞Âíå‰∏≠Á´ãÁöÑ‚ÄúÈõ∂ÂÄº‚ÄùÔºåÂØπÊâÄÊúâÂàÜÂå∫ËøõË°åÁªìÊûú„ÄÇ * ÂáΩÊï∞op(t1,t2)Ë¢´ÂÖÅËÆ∏‰øÆÊîπt1ÔºåÂπ∂Â∞ÜÂÖ∂‰Ωú‰∏∫ÂÖ∂ÁªìÊûúÂÄºËøîÂõûÔºå‰ª•ÈÅøÂÖçÂØπË±°ÂàÜÈÖç;‰ΩÜÊòØÔºåÂÆÉ‰∏çÂ∫îËØ•‰øÆÊîπt2„ÄÇ * * This behaves somewhat differently from fold operations implemented for non-distributed * collections in functional languages like Scala. This fold operation may be applied to * partitions individually, and then fold those results into the final result, rather than * apply the fold to each element sequentially in some defined ordering. For functions * that are not commutative, the result may differ from that of a fold applied to a * non-distributed collection. * Ëøô‰∏éÂú®ScalaÁ≠âÂáΩÊï∞ÂºèËØ≠Ë®Ä‰∏≠ÂÆûÁé∞ÈùûÂàÜÂ∏ÉÂºèÈõÜÂêàÁöÑÊäòÂè†Êìç‰ΩúÊúâ‰∏ÄÂÆöÁöÑ‰∏çÂêå„ÄÇ * Ëøô‰∏™ÊäòÂè†Êìç‰ΩúÂèØ‰ª•ÂçïÁã¨Â∫îÁî®‰∫éÂàÜÂå∫ÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∫õÁªìÊûúÊäòÂè†Âà∞ÊúÄÁªàÁªìÊûú‰∏≠ÔºåËÄå‰∏çÊòØÂú®Êüê‰∫õÂÆö‰πâÁöÑÊéíÂ∫è‰∏≠È°∫Â∫èÂú∞ÂØπÊØè‰∏™ÂÖÉÁ¥†ËøõË°åÊäòÂè†„ÄÇ * ÂØπ‰∫éÈùû‰∫§Êç¢ÁöÑÂáΩÊï∞ÔºåÁªìÊûúÂèØËÉΩ‰∏éÂ∫îÁî®‰∫éÈùûÂàÜÂ∏ÉÂºèÈõÜÂêàÁöÑÂáΩÊï∞‰∏çÂêå„ÄÇ * */def fold(zeroValue: T)(f: JFunction2[T, T, T]): T = rdd.fold(zeroValue)(f) aggregate12345678910111213141516 /** * Aggregate the elements of each partition, and then the results for all the partitions, using * given combine functions and a neutral \"zero value\". This function can return a different result * type, U, than the type of this RDD, T. Thus, we need one operation for merging a T into an U * and one operation for merging two U's, as in scala.TraversableOnce. Both of these functions are * allowed to modify and return their first argument instead of creating a new U to avoid memory * allocation. * ÂØπÊØè‰∏™ÂàÜÂå∫ÁöÑÂÖÉÁ¥†ËøõË°åËÅöÂêàÔºåÁÑ∂Âêé‰ΩøÁî®ÁªôÂÆöÁöÑÁªÑÂêàÂáΩÊï∞Âíå‰∏Ä‰∏™‰∏≠Á´ãÁöÑ‚ÄúÈõ∂ÂÄº‚ÄùÔºåÂØπÊâÄÊúâÂàÜÂå∫ËøõË°åÁªìÊûú„ÄÇ * Ëøô‰∏™ÂáΩÊï∞ÂèØ‰ª•ËøîÂõû‰∏Ä‰∏™‰∏çÂêåÁöÑÁªìÊûúÁ±ªÂûãUÔºåËÄå‰∏çÊòØËøô‰∏™RDDÁöÑÁ±ªÂûã„ÄÇ * Âõ†Ê≠§ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™Êìç‰ΩúÊù•Â∞Ü‰∏Ä‰∏™TÂêàÂπ∂Âà∞‰∏Ä‰∏™UÂíå‰∏Ä‰∏™ÂêàÂπ∂‰∏§‰∏™UÁöÑÊìç‰ΩúÔºåÂ∞±ÂÉèÂú®scala . traversableonce‰∏≠ÈÇ£Ê†∑„ÄÇ * Ëøô‰∏§‰∏™ÂáΩÊï∞ÈÉΩÂèØ‰ª•‰øÆÊîπÂíåËøîÂõûÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºåËÄå‰∏çÊòØÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑUÔºå‰ª•ÈÅøÂÖçÂÜÖÂ≠òÂàÜÈÖç„ÄÇ * */def aggregate[U](zeroValue: U)(seqOp: JFunction2[U, T, U], combOp: JFunction2[U, U, U]): U = rdd.aggregate(zeroValue)(seqOp, combOp)(fakeClassTag[U]) treeAggregate12345678910111213141516171819202122232425 /** * Aggregates the elements of this RDD in a multi-level tree pattern. * Â∞ÜÊ≠§RDDÁöÑÂÖÉÁ¥†ËÅöÈõÜÂú®Â§öÂ±ÇÊ†ëÊ®°Âºè‰∏≠„ÄÇ * * @param depth suggested depth of the tree Âª∫ËÆÆÁöÑÊ†ëÁöÑÊ∑±Â∫¶ * @see [[org.apache.spark.api.java.JavaRDDLike#aggregate]] */def treeAggregate[U]( zeroValue: U, seqOp: JFunction2[U, T, U], combOp: JFunction2[U, U, U], depth: Int): U = &#123; rdd.treeAggregate(zeroValue)(seqOp, combOp, depth)(fakeClassTag[U])&#125;/** * [[org.apache.spark.api.java.JavaRDDLike#treeAggregate]] with suggested depth 2. * Âª∫ËÆÆÁöÑÊ†ëÁöÑÊ∑±Â∫¶‰∏∫ 2 */def treeAggregate[U]( zeroValue: U, seqOp: JFunction2[U, T, U], combOp: JFunction2[U, U, U]): U = &#123; treeAggregate(zeroValue, seqOp, combOp, 2)&#125; count123456/** * Return the number of elements in the RDD. * ËøîÂõûRDD‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞Èáè„ÄÇ * */def count(): Long = rdd.count() countApprox12345678910111213141516171819202122232425262728293031323334353637 /** * Approximate version of count() that returns a potentially incomplete result * within a timeout, even if not all tasks have finished. * Ëøë‰ººÁâàÊú¨ÁöÑcount()ÔºåÂç≥‰Ωø‰∏çÊòØÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩÂÆåÊàê‰∫ÜÔºå‰πü‰ºöÂú®‰∏Ä‰∏™Ë∂ÖÊó∂‰∏≠ËøîÂõû‰∏Ä‰∏™ÊΩúÂú®ÁöÑ‰∏çÂÆåÊï¥ÁöÑÁªìÊûú„ÄÇ * * * The confidence is the probability that the error bounds of the result will * contain the true value. That is, if countApprox were called repeatedly * with confidence 0.9, we would expect 90% of the results to contain the * true count. The confidence must be in the range [0,1] or an exception will * be thrown. * ÁΩÆ‰ø°ÂÄºÊòØÁªìÊûúÁöÑËØØÂ∑ÆËæπÁïåÂåÖÂê´ÁúüÂÆûÂÄºÁöÑÊ¶ÇÁéá„ÄÇ * ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúcountApproxË¢´ÂèçÂ§çË∞ÉÁî®Ôºåconfidence 0.9ÔºåÊàë‰ª¨Â∞ÜÊúüÊúõ90%ÁöÑÁªìÊûúÂåÖÂê´ÁúüÂÆûÁöÑËÆ°Êï∞„ÄÇ * confidenceÂøÖÈ°ªÂú®ËåÉÂõ¥[0,1]‰∏≠ÔºåÂê¶ÂàôÂ∞ÜÊäõÂá∫ÂºÇÂ∏∏„ÄÇ * * * @param timeout maximum time to wait for the job, in milliseconds * Á≠âÂæÖÂ∑•‰ΩúÁöÑÊúÄÂ§ßÊó∂Èó¥Ôºå‰ª•ÊØ´Áßí‰∏∫Âçï‰Ωç * @param confidence the desired statistical confidence in the result * ÂØπÁªìÊûúÁöÑÊúüÊúõÁöÑÁªüËÆ°‰ø°ÂøÉ * @return a potentially incomplete result, with error bounds * ‰∏Ä‰∏™ÂèØËÉΩ‰∏çÂÆåÊï¥ÁöÑÁªìÊûúÔºåÊúâÈîôËØØÁïåÈôê */def countApprox(timeout: Long, confidence: Double): PartialResult[BoundedDouble] = rdd.countApprox(timeout, confidence)/** * Approximate version of count() that returns a potentially incomplete result * within a timeout, even if not all tasks have finished. * Ëøë‰ººÁâàÊú¨ÁöÑcount()ÔºåÂç≥‰Ωø‰∏çÊòØÊâÄÊúâÁöÑ‰ªªÂä°ÈÉΩÂÆåÊàê‰∫ÜÔºå‰πü‰ºöÂú®‰∏Ä‰∏™Ë∂ÖÊó∂‰∏≠ËøîÂõû‰∏Ä‰∏™ÊΩúÂú®ÁöÑ‰∏çÂÆåÊï¥ÁöÑÁªìÊûú„ÄÇ * * * @param timeout maximum time to wait for the job, in milliseconds * Á≠âÂæÖÂ∑•‰ΩúÁöÑÊúÄÂ§ßÊó∂Èó¥Ôºå‰ª•ÊØ´Áßí‰∏∫Âçï‰Ωç */def countApprox(timeout: Long): PartialResult[BoundedDouble] = rdd.countApprox(timeout) countByValue123456789/** * Return the count of each unique value in this RDD as a map of (value, count) pairs. The final * combine step happens locally on the master, equivalent to running a single reduce task. * Â∞ÜÊ≠§RDD‰∏≠ÁöÑÊØè‰∏™ÊÉü‰∏ÄÂÄºÁöÑËÆ°Êï∞‰Ωú‰∏∫(ÂÄº„ÄÅËÆ°Êï∞)ÂØπÁöÑÊò†Â∞Ñ„ÄÇ * ÊúÄÂêéÁöÑËÅîÂêàÊ≠•È™§Âú®masterÁöÑÊú¨Âú∞ÂèëÁîüÔºåÁõ∏ÂΩì‰∫éËøêË°å‰∏Ä‰∏™reduce‰ªªÂä°„ÄÇ * */def countByValue(): JMap[T, jl.Long] = mapAsSerializableJavaMap(rdd.countByValue()).asInstanceOf[JMap[T, jl.Long]] countByValueApprox1234567891011121314151617181920212223242526272829303132333435363738 /** * Approximate version of countByValue(). * countByValue()Ëøë‰ººÁöÑÁâàÊú¨„ÄÇ * * The confidence is the probability that the error bounds of the result will * contain the true value. That is, if countApprox were called repeatedly * with confidence 0.9, we would expect 90% of the results to contain the * true count. The confidence must be in the range [0,1] or an exception will * be thrown. * ÁΩÆ‰ø°ÂÄºÊòØÁªìÊûúÁöÑËØØÂ∑ÆËæπÁïåÂåÖÂê´ÁúüÂÆûÂÄºÁöÑÊ¶ÇÁéá„ÄÇ * ‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúcountApproxË¢´ÂèçÂ§çË∞ÉÁî®Ôºåconfidence 0.9ÔºåÊàë‰ª¨Â∞ÜÊúüÊúõ90%ÁöÑÁªìÊûúÂåÖÂê´ÁúüÂÆûÁöÑËÆ°Êï∞„ÄÇ * confidenceÂøÖÈ°ªÂú®ËåÉÂõ¥[0,1]‰∏≠ÔºåÂê¶ÂàôÂ∞ÜÊäõÂá∫ÂºÇÂ∏∏„ÄÇ * * * @param timeout maximum time to wait for the job, in milliseconds * Á≠âÂæÖÂ∑•‰ΩúÁöÑÊúÄÂ§ßÊó∂Èó¥ÔºåÊØ´Áßí‰∏∫Âçï‰Ωç„ÄÇ * @param confidence the desired statistical confidence in the result * ÂØπÁªìÊûúÁöÑÊúüÊúõÁöÑÁªüËÆ°‰ø°ÂøÉ * @return a potentially incomplete result, with error bounds * ‰∏Ä‰∏™ÂèØËÉΩ‰∏çÂÆåÊï¥ÁöÑÁªìÊûúÔºåÊúâÈîôËØØÁïåÈôê */def countByValueApprox( timeout: Long, confidence: Double ): PartialResult[JMap[T, BoundedDouble]] = rdd.countByValueApprox(timeout, confidence).map(mapAsSerializableJavaMap)/** * Approximate version of countByValue(). * countByValue().ÁöÑËøë‰ººÁâàÊú¨. * * @param timeout maximum time to wait for the job, in milliseconds * Á≠âÂæÖÂ∑•‰ΩúÁöÑÊúÄÂ§ßÊó∂Èó¥ÔºåÊØ´Áßí‰∏∫Âçï‰Ωç„ÄÇ * @return a potentially incomplete result, with error bounds * ‰∏Ä‰∏™ÂèØËÉΩ‰∏çÂÆåÊï¥ÁöÑÁªìÊûúÔºåÊúâÈîôËØØÁïåÈôê */def countByValueApprox(timeout: Long): PartialResult[JMap[T, BoundedDouble]] = rdd.countByValueApprox(timeout).map(mapAsSerializableJavaMap) take12345678910111213141516 /** * Take the first num elements of the RDD. This currently scans the partitions *one by one*, so * it will be slow if a lot of partitions are required. In that case, use collect() to get the * whole RDD instead. * Ëé∑ÂèñRDDÁöÑÁ¨¨‰∏Ä‰∏™numÂÖÉÁ¥†„ÄÇ * ËøôÂ∞Ü‰ºö‰∏ÄÊ¨°‰∏Ä‰∏™Âú∞Êâ´ÊèèÂàÜÂå∫ÔºåÊâÄ‰ª•Â¶ÇÊûúÈúÄË¶ÅÂæàÂ§öÂàÜÂå∫ÔºåÂÆÉÂ∞Ü‰ºöÂæàÊÖ¢„ÄÇ * Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰ΩøÁî®collect()Êù•Ëé∑ÂæóÊï¥‰∏™RDD„ÄÇ * * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ * */def take(num: Int): JList[T] = rdd.take(num).toSeq.asJava takeSample12345def takeSample(withReplacement: Boolean, num: Int): JList[T] = takeSample(withReplacement, num, Utils.random.nextLong)def takeSample(withReplacement: Boolean, num: Int, seed: Long): JList[T] = rdd.takeSample(withReplacement, num, seed).toSeq.asJava first12345 /** * Return the first element in this RDD. * ËøîÂõûËøô‰∏™RDD‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇ */def first(): T = rdd.first() isEmpty1234567/** * @return true if and only if the RDD contains no elements at all. Note that an RDD * may be empty even when it has at least 1 partition. * ÂΩì‰∏î‰ªÖÂΩìRDD‰∏çÂåÖÂê´‰ªª‰ΩïÂÖÉÁ¥†ÔºåÂàô‰∏∫Áúü„ÄÇ * ËØ∑Ê≥®ÊÑèÔºåÂç≥‰ΩøÂú®Ëá≥Â∞ëÊúâ‰∏Ä‰∏™ÂàÜÂå∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåRDD‰πüÂèØËÉΩÊòØÁ©∫ÁöÑ„ÄÇ */def isEmpty(): Boolean = rdd.isEmpty() saveAsTextFile123456789101112131415/** * Save this RDD as a text file, using string representations of elements. * Â∞ÜÊ≠§RDD‰øùÂ≠ò‰∏∫ÊñáÊú¨Êñá‰ª∂Ôºå‰ΩøÁî®ÂÖÉÁ¥†ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÂΩ¢Âºè„ÄÇ */def saveAsTextFile(path: String): Unit = &#123; rdd.saveAsTextFile(path)&#125;/** * Save this RDD as a compressed text file, using string representations of elements. * Â∞ÜÊ≠§RDD‰øùÂ≠ò‰∏∫‰∏Ä‰∏™ÂéãÁº©ÊñáÊú¨Êñá‰ª∂Ôºå‰ΩøÁî®ÂÖÉÁ¥†ÁöÑÂ≠óÁ¨¶‰∏≤Ë°®Á§∫ÂΩ¢Âºè„ÄÇ */def saveAsTextFile(path: String, codec: Class[_ &lt;: CompressionCodec]): Unit = &#123; rdd.saveAsTextFile(path, codec)&#125; saveAsObjectFile1234567/** * Save this RDD as a SequenceFile of serialized objects. * Â∞ÜÊ≠§RDD‰øùÂ≠ò‰∏∫Â∫èÂàóÂåñÂØπË±°ÁöÑÂ∫èÂàóÊñá‰ª∂„ÄÇ */def saveAsObjectFile(path: String): Unit = &#123; rdd.saveAsObjectFile(path)&#125; keyBy12345678910/** * Creates tuples of the elements in this RDD by applying `f`. * ÈÄöËøáÂ∫îÁî®‚Äúf‚ÄùÂàõÂª∫Ëøô‰∏™RDD‰∏≠ÂÖÉÁ¥†ÁöÑÂÖÉÁªÑ„ÄÇ */def keyBy[U](f: JFunction[T, U]): JavaPairRDD[U, T] = &#123; // The type parameter is U instead of K in order to work around a compiler bug; see SPARK-4459 // Á±ªÂûãÂèÇÊï∞Áî®UÊõø‰ª£KÔºå‰∏∫‰∫ÜÁªïËøáÁºñËØëÂô®ÈîôËØØ; implicit val ctag: ClassTag[U] = fakeClassTag JavaPairRDD.fromRDD(rdd.keyBy(f))&#125; checkpoint12345678910111213141516/** * Mark this RDD for checkpointing. It will be saved to a file inside the checkpoint * directory set with SparkContext.setCheckpointDir() and all references to its parent * RDDs will be removed. This function must be called before any job has been * executed on this RDD. It is strongly recommended that this RDD is persisted in * memory, otherwise saving it on a file will require recomputation. * Â∞ÜÊ≠§RDDÊ†áËÆ∞‰∏∫Ê£ÄÊü•ÁÇπ„ÄÇ * ÂÆÉÂ∞ÜË¢´‰øùÂ≠òÂà∞Áî±SparkContext.setCheckpointDir()ËÆæÁΩÆÁöÑÊ£ÄÊü•ÁÇπÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂‰∏≠„ÄÇ * ÊâÄÊúâÂØπÂÖ∂Áà∂RDDsÁöÑÂºïÁî®Â∞ÜË¢´Âà†Èô§„ÄÇ * Âú®Ê≠§RDD‰∏äÊâßË°å‰ªª‰Ωï‰Ωú‰∏ö‰πãÂâçÔºåÂøÖÈ°ªË∞ÉÁî®Ê≠§ÂáΩÊï∞„ÄÇ * Âº∫ÁÉàÂª∫ËÆÆÂ∞ÜÊ≠§RDD‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂê¶ÂàôÂ∞ÜÂÖ∂‰øùÂ≠òÂú®Êñá‰ª∂‰∏≠ÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó„ÄÇ * */def checkpoint(): Unit = &#123; rdd.checkpoint()&#125; isCheckpointed12345/** * Return whether this RDD has been checkpointed or not * ËøîÂõû RDDÊòØÂê¶Â∑≤Ë¢´Ê£ÄÊü•Ëøá */def isCheckpointed: Boolean = rdd.isCheckpointed getCheckpointFile1234567/** * Gets the name of the file to which this RDD was checkpointed * Ëé∑ÂèñËØ•RDDÊâÄÊåáÂêëÁöÑcheckpointedÊñá‰ª∂ÁöÑÂêçÁß∞ */def getCheckpointFile(): Optional[String] = &#123; JavaUtils.optionToOptional(rdd.getCheckpointFile)&#125; toDebugString123456/** A description of this RDD and its recursive dependencies for debugging. * ÂØπËØ•RDDÂèäÂÖ∂ÂØπË∞ÉËØïÁöÑÈÄíÂΩí‰æùËµñÁöÑÊèèËø∞„ÄÇ * */def toDebugString(): String = &#123; rdd.toDebugString&#125; top12345678910111213141516171819202122232425262728293031323334/** * Returns the top k (largest) elements from this RDD as defined by * the specified Comparator[T] and maintains the order. * Ê†πÊçÆÊåáÂÆöÁöÑÊØîËæÉÂô®[T]Ôºå‰ªéËøô‰∏™RDD‰∏≠ËøîÂõûÊúÄÂ§ßÁöÑk(ÊúÄÂ§ß)ÂÖÉÁ¥†ÔºåÂπ∂Áª¥Êä§È°∫Â∫è„ÄÇ * * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ * * @param num k, the number of top elements to return ËøîÂõûÁöÑÂÖÉÁ¥†Êï∞Èáè * @param comp the comparator that defines the order ÂÆö‰πâÊéíÂ∫èÁöÑÊØîËæÉÂô® * @return an array of top elements ËøîÂõûÊúÄÂ§ßÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ */def top(num: Int, comp: Comparator[T]): JList[T] = &#123; rdd.top(num)(Ordering.comparatorToOrdering(comp)).toSeq.asJava&#125;/** * Returns the top k (largest) elements from this RDD using the * natural ordering for T and maintains the order. * ‰ΩøÁî®TÁöÑËá™ÁÑ∂È°∫Â∫èÔºå‰ªéËøô‰∏™RDD‰∏≠ËøîÂõûÊúÄÂ§ßÁöÑk(ÊúÄÂ§ß)ÂÖÉÁ¥†ÔºåÂπ∂Áª¥Êä§È°∫Â∫è„ÄÇ * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ * * @param num k, the number of top elements to return ËøîÂõûÁöÑÂÖÉÁ¥†Êï∞Èáè * @return an array of top elements ÊúÄÂ§ßÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ */def top(num: Int): JList[T] = &#123; val comp = com.google.common.collect.Ordering.natural().asInstanceOf[Comparator[T]] top(num, comp)&#125; takeOrdered123456789101112131415161718192021222324252627282930313233/** * Returns the first k (smallest) elements from this RDD as defined by * the specified Comparator[T] and maintains the order. * ‰ªéËøô‰∏™RDD‰∏≠ËøîÂõûÁ¨¨‰∏Ä‰∏™k(ÊúÄÂ∞è)ÂÖÉÁ¥†ÔºåÁî±ÊåáÂÆöÁöÑComparator[T]ÂÆö‰πâÔºåÂπ∂Áª¥Êä§ËØ•È°∫Â∫è„ÄÇ * * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. * ËØ•ÊñπÊ≥ïÂè™Âú®È¢ÑÊúüÁöÑÊï∞ÁªÑÂæàÂ∞èÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®ÔºåÂõ†‰∏∫ÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩË¢´Âä†ËΩΩÂà∞È©±Âä®Á®ãÂ∫èÁöÑÂÜÖÂ≠ò‰∏≠„ÄÇ * * @param num k, the number of elements to return ËøîÂõûÁöÑÂÖÉÁ¥†Êï∞Èáè * @param comp the comparator that defines the order ÊéíÂ∫èÊØîËæÉÂô® * @return an array of top elements ÂÖÉÁ¥†Êï∞ÁªÑ */def takeOrdered(num: Int, comp: Comparator[T]): JList[T] = &#123; rdd.takeOrdered(num)(Ordering.comparatorToOrdering(comp)).toSeq.asJava&#125;/** * Returns the first k (smallest) elements from this RDD using the * natural ordering for T while maintain the order. * ‰ΩøÁî®ÂéüÁîüÁöÑ TÊéíÂ∫èÊØîËæÉÂô®ÔºåËøîÂõû k‰∏™ ÊúÄÂ∞èÂÄºÔºåÂπ∂Áª¥Êä§Ëøô‰∏™È°∫Â∫è * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. * Â∞ΩÈáèÂ∫îÁî®‰∫éÂ∞èÁöÑÊï∞ÁªÑÔºåÂõ†‰∏∫‰ºöÂä†ËΩΩÂà∞driverÂÜÖÂ≠ò‰∏≠„ÄÇ * @param num k, the number of top elements to return * @return an array of top elements */def takeOrdered(num: Int): JList[T] = &#123; val comp = com.google.common.collect.Ordering.natural().asInstanceOf[Comparator[T]] takeOrdered(num, comp)&#125; max123456789101112/** * Returns the maximum element from this RDD as defined by the specified * Comparator[T]. * ÊåâÁÖßÊåáÂÆöÊØîËæÉÂô®[T]ÂÆö‰πâÁöÑRDDÔºå * ËøîÂõûÊúÄÂ§ßÂÖÉÁ¥†„ÄÇ * * @param comp the comparator that defines ordering ÊåáÂÆöÁöÑÊØîËæÉÂô® * @return the maximum of the RDD ÊúÄÂ§ßÂÄº */def max(comp: Comparator[T]): T = &#123; rdd.max()(Ordering.comparatorToOrdering(comp))&#125; min123456789101112/** * Returns the minimum element from this RDD as defined by the specified * Comparator[T]. * ÊåâÁÖßÊåáÂÆöÊØîËæÉÂô®[T]ÂÆö‰πâÁöÑRDDÔºå * ËøîÂõûÊúÄÂ∞èÂÖÉÁ¥†„ÄÇ * * @param comp the comparator that defines ordering ÊåáÂÆöÁöÑÊØîËæÉÂô® * @return the minimum of the RDD ÊúÄÂ∞èÂÄº */def min(comp: Comparator[T]): T = &#123; rdd.min()(Ordering.comparatorToOrdering(comp))&#125; countApproxDistinct123456789101112131415161718/*** Return approximate number of distinct elements in the RDD.* ËøîÂõûRDD‰∏≠‰∏çÈáçÂ§çÂÖÉÁ¥†ÁöÑÊï∞ÈáèËøë‰ººÊï∞„ÄÇ** The algorithm used is based on streamlib's implementation of \"HyperLogLog in Practice:* Algorithmic Engineering of a State of The Art Cardinality Estimation Algorithm\", available * &lt;a href=\"http://dx.doi.org/10.1145/2452376.2452456\"&gt;here&lt;/a&gt;. * ÊâÄ‰ΩøÁî®ÁöÑÁÆóÊ≥ïÊòØÂü∫‰∫éstreamlibÂú®ÂÆûË∑µ‰∏≠ÁöÑ‚ÄúHyperLogLog‚ÄùÁöÑÂÆûÁé∞: * ‚Äú‰∏ÄÁßçËâ∫ÊúØÂü∫Êï∞‰º∞ËÆ°ÁÆóÊ≥ïÁä∂ÊÄÅÁöÑÁÆóÊ≥ïÂ∑•Á®ã‚ÄùÔºå * * * @param relativeSD Relative accuracy. Smaller values create counters that require more space. * It must be greater than 0.000017. * Áõ∏ÂØπÁ≤æÂ∫¶„ÄÇ * ËæÉÂ∞èÁöÑÂÄºÂàõÂª∫ÈúÄË¶ÅÊõ¥Â§öÁ©∫Èó¥ÁöÑËÆ°Êï∞Âô®„ÄÇ * ÂÆÉÂøÖÈ°ªÂ§ß‰∫é0.000017„ÄÇ */ def countApproxDistinct(relativeSD: Double): Long = rdd.countApproxDistinct(relativeSD) countAsync12345678/** * The asynchronous version of `count`, which returns a * future for counting the number of elements in this RDD. * ‚Äúcount‚ÄùÁöÑÂºÇÊ≠•ÁâàÊú¨ÔºåÂÆÉ‰∏∫ËÆ°ÁÆóËøô‰∏™RDD‰∏≠ÂÖÉÁ¥†ÁöÑÊï∞ÈáèËøîÂõû‰∏Ä‰∏™Êú™Êù•„ÄÇ */def countAsync(): JavaFutureAction[jl.Long] = &#123;new JavaFutureActionWrapper[Long, jl.Long](rdd.countAsync(), jl.Long.valueOf)&#125; collectAsync12345678910111213/** * The asynchronous version of `collect`, which returns a future for * retrieving an array containing all of the elements in this RDD. * ‚Äúcollect‚ÄùÁöÑÂºÇÊ≠•ÁâàÊú¨Ôºå * ÂÆÉËøîÂõû‰∏Ä‰∏™Áî®‰∫éÊ£ÄÁ¥¢ÂåÖÂê´ËØ•RDD‰∏≠ÊâÄÊúâÂÖÉÁ¥†ÁöÑÊï∞ÁªÑÁöÑÊú™Êù•„ÄÇ * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. * Â∞ΩÈáèÂ∫îÁî®‰∫éÂ∞èÊï∞ÈáèÊï∞ÁªÑ„ÄÇ */def collectAsync(): JavaFutureAction[JList[T]] = &#123;new JavaFutureActionWrapper(rdd.collectAsync(), (x: Seq[T]) =&gt; x.asJava)&#125; takeAsync123456789101112/** * The asynchronous version of the `take` action, which returns a * future for retrieving the first `num` elements of this RDD. * ‚Äútake‚ÄùÊìç‰ΩúÁöÑÂºÇÊ≠•ÁâàÊú¨Ôºå * ÂÆÉÂ∞ÜËøîÂõûÁî®‰∫éÊ£ÄÁ¥¢Ê≠§RDDÁöÑÁ¨¨‰∏Ä‰∏™‚Äúnum‚ÄùÂÖÉÁ¥†ÁöÑÊú™Êù•„ÄÇ * * @note this method should only be used if the resulting array is expected to be small, as * all the data is loaded into the driver's memory. */def takeAsync(num: Int): JavaFutureAction[JList[T]] = &#123;new JavaFutureActionWrapper(rdd.takeAsync(num), (x: Seq[T]) =&gt; x.asJava)&#125; foreachAsync1234567891011/** * The asynchronous version of the `foreach` action, which * applies a function f to all the elements of this RDD. * ‚Äúforeach‚ÄùÊìç‰ΩúÁöÑÂºÇÊ≠•ÁâàÊú¨Ôºå * ÂÆÉÂ∞ÜÂáΩÊï∞fÂ∫îÁî®‰∫éËøô‰∏™RDDÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ * */def foreachAsync(f: VoidFunction[T]): JavaFutureAction[Void] = &#123;new JavaFutureActionWrapper[Unit, Void](rdd.foreachAsync(x =&gt; f.call(x)),&#123; x =&gt; null.asInstanceOf[Void] &#125;)&#125; foreachPartitionAsync1234567891011/** * The asynchronous version of the `foreachPartition` action, which * applies a function f to each partition of this RDD. * ‚ÄúforeachPartition‚ÄùÊìç‰ΩúÁöÑÂºÇÊ≠•ÁâàÊú¨Ôºå * ÂÆÉÂ∞ÜÂáΩÊï∞fÂ∫îÁî®‰∫éËØ•RDDÁöÑÊØè‰∏™ÂàÜÂå∫„ÄÇ */def foreachPartitionAsync(f: VoidFunction[JIterator[T]]): JavaFutureAction[Void] = &#123;new JavaFutureActionWrapper[Unit, Void](rdd.foreachPartitionAsync(x =&gt; f.call(x.asJava)),&#123; x =&gt; null.asInstanceOf[Void] &#125;)&#125;&#125;","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"},{"name":"Ê∫êÁ†Å","slug":"Ê∫êÁ†Å","permalink":"https://stanxia.github.io/tags/Ê∫êÁ†Å/"}]},{"title":"sparkÊ∫êÁ†ÅÊ≥®ÈáäÁøªËØë","slug":"sparkÊ∫êÁ†ÅÊ≥®ÈáäÁøªËØë","date":"2017-11-06T16:57:05.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/11/06/sparkÊ∫êÁ†ÅÊ≥®ÈáäÁøªËØë/","link":"","permalink":"https://stanxia.github.io/2017/11/06/sparkÊ∫êÁ†ÅÊ≥®ÈáäÁøªËØë/","excerpt":"ÁâàÊú¨Ôºöspark2.1.1ÁõÆÁöÑÔºöÊñπ‰æø‰∏≠ÊñáÁî®Êà∑ÈòÖËØªÊ∫êÁ†ÅÔºåÊääÊó∂Èó¥Ëä±Âú®ÁêÜËß£ËÄå‰∏çÊòØÁøªËØë‰∏ä\n\nÂàùË°∑ÂºÄÂßãÁ´ãÈ°πËøõË°åÁøªËØëÔºå‰∏ÄÊñπÈù¢Êñπ‰æøÊó•ÂêéÈòÖËØªÊ∫êÁ†ÅÔºåÂè¶‰∏ÄÊñπÈù¢ÂÖàÁ≤óÁ≤íÂ∫¶ÁöÑÁÜüÊÇâ‰∏ãsparkÊ°ÜÊû∂ÂíåÁªÑ‰ª∂„ÄÇ‰ºòÂåñÂÆå‰πãÂêéÂ∏åÊúõËÉΩÂ∏ÆÂä©Êõ¥Â§öÁöÑ‰∏≠ÊñáÁî®Êà∑ÔºåËäÇÁúÅÁøªËØëÊó∂Èó¥„ÄÇ","text":"ÁâàÊú¨Ôºöspark2.1.1ÁõÆÁöÑÔºöÊñπ‰æø‰∏≠ÊñáÁî®Êà∑ÈòÖËØªÊ∫êÁ†ÅÔºåÊääÊó∂Èó¥Ëä±Âú®ÁêÜËß£ËÄå‰∏çÊòØÁøªËØë‰∏ä ÂàùË°∑ÂºÄÂßãÁ´ãÈ°πËøõË°åÁøªËØëÔºå‰∏ÄÊñπÈù¢Êñπ‰æøÊó•ÂêéÈòÖËØªÊ∫êÁ†ÅÔºåÂè¶‰∏ÄÊñπÈù¢ÂÖàÁ≤óÁ≤íÂ∫¶ÁöÑÁÜüÊÇâ‰∏ãsparkÊ°ÜÊû∂ÂíåÁªÑ‰ª∂„ÄÇ‰ºòÂåñÂÆå‰πãÂêéÂ∏åÊúõËÉΩÂ∏ÆÂä©Êõ¥Â§öÁöÑ‰∏≠ÊñáÁî®Êà∑ÔºåËäÇÁúÅÁøªËØëÊó∂Èó¥„ÄÇ ËøõÂ∫¶Â∑≤ÂÆåÊàêÔºö Ê≠£Âú®‰ΩúÔºöspark coreÊ®°Âùó Ê®°ÂùóÂêç Ê®°Âùó‰ªãÁªç ÂÆåÊàêÂ∫¶ api broadcast deploy executor ÊâßË°åÂô®ÔºöÁî®‰∫éÂêØÂä®Á∫øÁ®ãÊ±†ÔºåÊòØÁúüÊ≠£Ë¥üË¥£ÊâßË°åtaskÁöÑÈÉ®‰ª∂ Â∑≤ÂÆåÊàê input internal io launcher mapred memory metrics network partial rdd rpc scheduler Ë∞ÉÂ∫¶Âô®ÔºösparkÂ∫îÁî®Á®ãÂ∫èÁöÑ‰ªªÂä°Ë∞ÉÂ∫¶Âô® Ê≠£Âú®‰Ωú security serializer shuffle status.api.v1 storage util","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"}]},{"title":"sparkÂÖ≥‰∫éparquetÁöÑ‰ºòÂåñ","slug":"sparkÂÖ≥‰∫éparquetÁöÑ‰ºòÂåñ","date":"2017-11-01T14:53:13.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/11/01/sparkÂÖ≥‰∫éparquetÁöÑ‰ºòÂåñ/","link":"","permalink":"https://stanxia.github.io/2017/11/01/sparkÂÖ≥‰∫éparquetÁöÑ‰ºòÂåñ/","excerpt":"parquetÊòØ‰∏ÄÁßçÂàóÂºèÂ≠òÂÇ®„ÄÇÂèØ‰ª•Êèê‰æõÈù¢ÂêëÂàóÁöÑÂ≠òÂÇ®ÂíåÊü•ËØ¢„ÄÇ\nParquetÁöÑ‰ºòÂäøÂú®sparkSQLÁ®ãÂ∫è‰∏≠‰ΩøÁî®parquetÊ†ºÂºèÂ≠òÂÇ®Êñá‰ª∂ÔºåÂú®Â≠òÂÇ®Á©∫Èó¥ÂíåÊü•ËØ¢ÊÄßËÉΩÊñπÈù¢ÈÉΩÊúâÂæàÈ´òÁöÑÊïàÁéá„ÄÇ\nÂ≠òÂÇ®ÊñπÈù¢Âõ†‰∏∫ÊòØÈù¢ÂêëÂàóÁöÑÂ≠òÂÇ®ÔºåÂêå‰∏ÄÂàóÁöÑÁ±ªÂûãÁõ∏ÂêåÔºåÂõ†ËÄåÂú®Â≠òÂÇ®ÁöÑËøáÁ®ã‰∏≠ÂèØ‰ª•‰ΩøÁî®Êõ¥È´òÊïàÁöÑÂéãÁº©ÊñπÊ°àÔºåÂèØ‰ª•ËäÇÁúÅÂ§ßÈáèÁöÑÂ≠òÂÇ®Á©∫Èó¥„ÄÇ\nÊü•ËØ¢ÊñπÈù¢Âú®ÊâßË°åÊü•ËØ¢‰ªªÂä°Êó∂ÔºåÂè™‰ºöÊâ´ÊèèÈúÄË¶ÅÁöÑÂàóÔºåËÄå‰∏çÊòØÂÖ®ÈÉ®ÔºåÈ´òÂ∫¶ÁÅµÊ¥ªÊÄß‰ΩøÊü•ËØ¢ÂèòÂæóÈùûÂ∏∏È´òÊïà„ÄÇ","text":"parquetÊòØ‰∏ÄÁßçÂàóÂºèÂ≠òÂÇ®„ÄÇÂèØ‰ª•Êèê‰æõÈù¢ÂêëÂàóÁöÑÂ≠òÂÇ®ÂíåÊü•ËØ¢„ÄÇ ParquetÁöÑ‰ºòÂäøÂú®sparkSQLÁ®ãÂ∫è‰∏≠‰ΩøÁî®parquetÊ†ºÂºèÂ≠òÂÇ®Êñá‰ª∂ÔºåÂú®Â≠òÂÇ®Á©∫Èó¥ÂíåÊü•ËØ¢ÊÄßËÉΩÊñπÈù¢ÈÉΩÊúâÂæàÈ´òÁöÑÊïàÁéá„ÄÇ Â≠òÂÇ®ÊñπÈù¢Âõ†‰∏∫ÊòØÈù¢ÂêëÂàóÁöÑÂ≠òÂÇ®ÔºåÂêå‰∏ÄÂàóÁöÑÁ±ªÂûãÁõ∏ÂêåÔºåÂõ†ËÄåÂú®Â≠òÂÇ®ÁöÑËøáÁ®ã‰∏≠ÂèØ‰ª•‰ΩøÁî®Êõ¥È´òÊïàÁöÑÂéãÁº©ÊñπÊ°àÔºåÂèØ‰ª•ËäÇÁúÅÂ§ßÈáèÁöÑÂ≠òÂÇ®Á©∫Èó¥„ÄÇ Êü•ËØ¢ÊñπÈù¢Âú®ÊâßË°åÊü•ËØ¢‰ªªÂä°Êó∂ÔºåÂè™‰ºöÊâ´ÊèèÈúÄË¶ÅÁöÑÂàóÔºåËÄå‰∏çÊòØÂÖ®ÈÉ®ÔºåÈ´òÂ∫¶ÁÅµÊ¥ªÊÄß‰ΩøÊü•ËØ¢ÂèòÂæóÈùûÂ∏∏È´òÊïà„ÄÇ ÂÆû‰æãÊµãËØï ÊµãËØïÊï∞ÊçÆÂ§ßÂ∞è Â≠òÂÇ®Á±ªÂûã Â≠òÂÇ®ÊâÄÂç†Á©∫Èó¥ Êü•ËØ¢ÊÄßËÉΩ 1T TEXTFILE 897.9G 698s 1T Parquet 231.4G 21s ParquetÁöÑ‰ΩøÁî®‰ΩøÁî®parquetÁöÑÁÆÄÂçïdemoÔºö 12345678910111213141516171819202122// Encoders for most common types are automatically provided by importing spark.implicits._import spark.implicits._val peopleDF = spark.read.json(\"examples/src/main/resources/people.json\")// DataFrames can be saved as Parquet files, maintaining the schema informationpeopleDF.write.parquet(\"people.parquet\")// Read in the parquet file created above// Parquet files are self-describing so the schema is preserved// The result of loading a Parquet file is also a DataFrameval parquetFileDF = spark.read.parquet(\"people.parquet\")// Parquet files can also be used to create a temporary view and then used in SQL statementsparquetFileDF.createOrReplaceTempView(\"parquetFile\")val namesDF = spark.sql(\"SELECT name FROM parquetFile WHERE age BETWEEN 13 AND 19\")namesDF.map(attributes =&gt; \"Name: \" + attributes(0)).show()// +------------+// | value|// +------------+// |Name: Justin|// +------------+ Parquet ÁöÑÈóÆÈ¢ò spark ÂÜôÂÖ•Êï∞ÊçÆÂà∞ hive ‰∏≠Ôºå‰ΩøÁî® Parquet Â≠òÂÇ®Ê†ºÂºèÔºåÊü•ËØ¢ËØ•Ë°®Êó∂Êä•ÈîôÂ¶Ç‰∏ãÔºö 1Error: java.io.IOException: org.apache.parquet.io.ParquetDecodingException: Can not read value at 0 in block -1 in file ÂΩìÊó∂ËÆæÁΩÆÁöÑÂ≠óÊÆµÂ±ûÊÄß‰∏∫Ôºö ÁªèËøáÊØîÂØπÔºåÂèëÁé∞ÊòØ decimal Á±ªÂûãÂá∫‰∫ÜÈóÆÈ¢òÔºåÊü•ËØ¢ decimal ÁöÑÂ≠óÊÆµÊó∂ÂÄôÂ∞±‰ºöÊä•ÈîôÔºåËÄåÊü•ËØ¢ÂÖ∂‰ªñÁöÑÂπ∂‰∏ç‰ºöÊä•Èîô„ÄÇÔºàËøôÂ∫îËØ•ÊòØ spark ÂºïËµ∑ÁöÑÔºåÂõ†‰∏∫Âú® hive ÂÆ¢Êà∑Á´ØÊâßË°å decimal Á±ªÂûãÁöÑÊìç‰ΩúÊó∂Âπ∂‰∏ç‰ºöÂá∫Èîô„ÄÇÔºâ Êü•ÈòÖÁΩë‰∏äÔºå‰πüÊúâ‰∫õÊúãÂèãÈÅáÂà∞‰∫ÜÁ±ª‰ººÁöÑ‰∫ãÊÉÖÔºåÂ∫îËØ•ÊòØÂÆòÊñπÁöÑ bug ÔºåÊöÇÊó∂ÁöÑËß£ÂÜ≥ÂäûÊ≥ïÊòØ: 121. Â∞Ü Parquet ÁöÑÂ≠òÂÇ®Ê†ºÂºèËΩ¨Êç¢‰∏∫ ORC 2. ÊàñÂ∞Ü decimal Êç¢‰∏∫ double Á±ªÂûãÂ≠òÂÇ®Â≠óÊÆµ","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"},{"name":"parquet","slug":"parquet","permalink":"https://stanxia.github.io/tags/parquet/"}]},{"title":"‰∏âÊ≠•Ëµ∞ÊàòÁï•","slug":"‰∏âÊ≠•Ëµ∞ÊàòÁï•","date":"2017-11-01T10:45:09.000Z","updated":"2020-02-05T15:12:18.123Z","comments":true,"path":"2017/11/01/‰∏âÊ≠•Ëµ∞ÊàòÁï•/","link":"","permalink":"https://stanxia.github.io/2017/11/01/‰∏âÊ≠•Ëµ∞ÊàòÁï•/","excerpt":"ËÆæÂÆö‰∏≠ÈïøÊúüËßÑÂàíÁ®≥ÊâéÁ®≥ÊâìÔºåÈÄê‰∏™ÂáªÁ†¥ÔºåÂÆûÁé∞ÊäÄÊúØ‰∏äÁöÑÈáçÂ§ßÁ™ÅÁ†¥","text":"ËÆæÂÆö‰∏≠ÈïøÊúüËßÑÂàíÁ®≥ÊâéÁ®≥ÊâìÔºåÈÄê‰∏™ÂáªÁ†¥ÔºåÂÆûÁé∞ÊäÄÊúØ‰∏äÁöÑÈáçÂ§ßÁ™ÅÁ†¥ Á¨¨‰∏ÄÊ≠•Ê∑±Âàª‰∫ÜËß£sparkËøêË°åÊú∫Âà∂Á¨¨‰∫åÊ≠•Ê∑±Â∫¶ÂâñÊûêsparkSQLÂíåsparkStreamingÁ¨¨‰∏âÊ≠•ÂÆûÁé∞ÂØπsparkÊú∫Âô®Â≠¶‰π†ÁöÑÊ∑±Â∫¶ÊéåÊè°","raw":null,"content":null,"categories":[{"name":"ËßÑÂàí","slug":"ËßÑÂàí","permalink":"https://stanxia.github.io/categories/ËßÑÂàí/"}],"tags":[{"name":"ËßÑÂàí","slug":"ËßÑÂàí","permalink":"https://stanxia.github.io/tags/ËßÑÂàí/"}]},{"title":"ÊâãÊääÊâãÊê≠Âª∫vpsÂíåshadowsocks","slug":"ÊâãÊääÊâãÊê≠Âª∫vpsÂíåshadowsocks","date":"2017-10-31T00:16:22.000Z","updated":"2020-02-05T15:12:18.123Z","comments":true,"path":"2017/10/31/ÊâãÊääÊâãÊê≠Âª∫vpsÂíåshadowsocks/","link":"","permalink":"https://stanxia.github.io/2017/10/31/ÊâãÊääÊâãÊê≠Âª∫vpsÂíåshadowsocks/","excerpt":"ËÆ∞ÊÄß‰∏çÂ•ΩÔºåÂÅö‰∏™ËÆ∞ÂΩïÔºåÊó•ÂêéÊúâÈúÄË¶ÅÊó∂ÈöæÂæóË¥πÁ•û„ÄÇ\nÂêçËØçËß£Èáä‰∫ÜËß£‰∏Ä‰∫õÂéüÁêÜÔºåÁÜüÊÇâ‰∏Ä‰∫õÂêçËØçÔºå‰πüÊñπ‰æøÁêÜËß£Êé•‰∏ãÊù•ÂÆâË£ÖËøáÁ®ã‰∏≠ÁöÑÊìç‰Ωú„ÄÇ\nvpsVPS(Virtual private server) ËØë‰ΩúËôöÊãü‰∏ìÁî®‰º∫ÊúçÂô®„ÄÇ‰Ω†ÂèØ‰ª•ÊääÂÆÉÁÆÄÂçïÂú∞ÁêÜËß£‰∏∫‰∏ÄÂè∞Âú®ËøúÁ´ØÁöÑÂº∫Âä≤ÁîµËÑë„ÄÇÂΩì‰Ω†ÁßüÁî®‰∫ÜÂÆÉ‰ª•ÂêéÔºåÂèØ‰ª•ÁªôÂÆÉÂÆâË£ÖÊìç‰ΩúÁ≥ªÁªü„ÄÅËΩØ‰ª∂ÔºåÂπ∂ÈÄöËøá‰∏Ä‰∫õÂ∑•ÂÖ∑ËøûÊé•ÂíåËøúÁ®ãÊìçÊéßÂÆÉ„ÄÇ\nvultrVultr ÊòØ‰∏ÄÂÆ∂ VPS ÊúçÂä°Âô®Êèê‰æõÂïÜÔºåÊúâÁæéÂõΩ„ÄÅ‰∫öÊ¥≤„ÄÅÊ¨ßÊ¥≤Á≠âÂ§öÂú∞ÁöÑ VPS„ÄÇÂÆÉÂÆ∂ÁöÑÊúçÂä°Âô®‰ª•ÊÄß‰ª∑ÊØîÈ´òÈóªÂêçÔºåÊåâÊó∂Èó¥ËÆ°Ë¥πÔºåÊúÄ‰ΩéÁöÑËµÑË¥π‰∏∫ÊØèÊúà $2.5„ÄÇ\nlinuxLinux ÊòØÂÖçË¥πÂºÄÊ∫êÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåÂ§ßÊ¶ÇË¢´‰∏ñÁïå‰∏äËøáÂçäÊúçÂä°Âô®ÊâÄÈááÁî®„ÄÇÊúâÂ§ßÈáè‰ºòÁßÄÁöÑÂºÄÊ∫êËΩØ‰ª∂ÂèØ‰ª•ÂÆâË£ÖÔºå‰∏äËø∞ Shadowsocks Â∞±ÊòØÂÖ∂‰∏Ä„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Ë°åÊù•Áõ¥Êé•Áªô Linux Êìç‰ΩúÁ≥ªÁªü„Äå‰∏ãÂëΩ‰ª§„ÄçÔºåÊØîÂ¶Ç $ cd ~/Desktop Â∞±ÊòØËøõÂÖ•‰Ω†Ê†πÁõÆÂΩï‰∏ãÁöÑ Desktop Êñá‰ª∂Â§π„ÄÇ\nssh SSH ÊòØ‰∏ÄÁßçÁΩëÁªúÂçèËÆÆÔºå‰Ωú‰∏∫ÊØè‰∏ÄÂè∞ Linux ÁîµËÑëÁöÑÊ†áÂáÜÈÖçÁΩÆÔºåÁî®‰∫éËÆ°ÁÆóÊú∫‰πãÈó¥ÁöÑÂä†ÂØÜÁôªÂΩï„ÄÇÂΩì‰Ω†‰∏∫ÁßüÁî®ÁöÑ VPS ÂÆâË£Ö Linux Á≥ªÁªüÂêéÔºåÂè™Ë¶ÅÂÄüÂä©‰∏Ä‰∫õÂ∑•ÂÖ∑ÔºåÂ∞±ÂèØ‰ª•Áî® SSH Âú®‰Ω†Ëá™Â∑±ÁöÑ Mac/PC ÁîµËÑë‰∏äËøúÁ®ãÁôªÂΩïËØ• VPS ‰∫Ü„ÄÇ\nshadowsocksShadowsocks(ss) ÊòØÁî± Clowwindy ÂºÄÂèëÁöÑ‰∏ÄÊ¨æËΩØ‰ª∂ÔºåÂÖ∂‰ΩúÁî®Êú¨Êù•ÊòØÂä†ÂØÜ‰º†ËæìËµÑÊñô„ÄÇÂΩìÁÑ∂Ôºå‰πüÊ≠£Âõ†‰∏∫ÂÆÉÂä†ÂØÜ‰º†ËæìËµÑÊñôÁöÑÁâπÊÄßÔºå‰ΩøÂæó GFW Ê≤°Ê≥ïÂ∞ÜÁî±ÂÆÉ‰º†ËæìÁöÑËµÑÊñôÂíåÂÖ∂‰ªñÊôÆÈÄöËµÑÊñôÂå∫ÂàÜÂºÄÊù•Ôºå‰πüÂ∞±‰∏çËÉΩÂπ≤Êâ∞Êàë‰ª¨ËÆøÈóÆÈÇ£‰∫õ„Äå‰∏çÂ≠òÂú®„ÄçÁöÑÁΩëÁ´ô‰∫Ü„ÄÇ","text":"ËÆ∞ÊÄß‰∏çÂ•ΩÔºåÂÅö‰∏™ËÆ∞ÂΩïÔºåÊó•ÂêéÊúâÈúÄË¶ÅÊó∂ÈöæÂæóË¥πÁ•û„ÄÇ ÂêçËØçËß£Èáä‰∫ÜËß£‰∏Ä‰∫õÂéüÁêÜÔºåÁÜüÊÇâ‰∏Ä‰∫õÂêçËØçÔºå‰πüÊñπ‰æøÁêÜËß£Êé•‰∏ãÊù•ÂÆâË£ÖËøáÁ®ã‰∏≠ÁöÑÊìç‰Ωú„ÄÇ vpsVPS(Virtual private server) ËØë‰ΩúËôöÊãü‰∏ìÁî®‰º∫ÊúçÂô®„ÄÇ‰Ω†ÂèØ‰ª•ÊääÂÆÉÁÆÄÂçïÂú∞ÁêÜËß£‰∏∫‰∏ÄÂè∞Âú®ËøúÁ´ØÁöÑÂº∫Âä≤ÁîµËÑë„ÄÇÂΩì‰Ω†ÁßüÁî®‰∫ÜÂÆÉ‰ª•ÂêéÔºåÂèØ‰ª•ÁªôÂÆÉÂÆâË£ÖÊìç‰ΩúÁ≥ªÁªü„ÄÅËΩØ‰ª∂ÔºåÂπ∂ÈÄöËøá‰∏Ä‰∫õÂ∑•ÂÖ∑ËøûÊé•ÂíåËøúÁ®ãÊìçÊéßÂÆÉ„ÄÇ vultrVultr ÊòØ‰∏ÄÂÆ∂ VPS ÊúçÂä°Âô®Êèê‰æõÂïÜÔºåÊúâÁæéÂõΩ„ÄÅ‰∫öÊ¥≤„ÄÅÊ¨ßÊ¥≤Á≠âÂ§öÂú∞ÁöÑ VPS„ÄÇÂÆÉÂÆ∂ÁöÑÊúçÂä°Âô®‰ª•ÊÄß‰ª∑ÊØîÈ´òÈóªÂêçÔºåÊåâÊó∂Èó¥ËÆ°Ë¥πÔºåÊúÄ‰ΩéÁöÑËµÑË¥π‰∏∫ÊØèÊúà $2.5„ÄÇ linuxLinux ÊòØÂÖçË¥πÂºÄÊ∫êÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåÂ§ßÊ¶ÇË¢´‰∏ñÁïå‰∏äËøáÂçäÊúçÂä°Âô®ÊâÄÈááÁî®„ÄÇÊúâÂ§ßÈáè‰ºòÁßÄÁöÑÂºÄÊ∫êËΩØ‰ª∂ÂèØ‰ª•ÂÆâË£ÖÔºå‰∏äËø∞ Shadowsocks Â∞±ÊòØÂÖ∂‰∏Ä„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Ë°åÊù•Áõ¥Êé•Áªô Linux Êìç‰ΩúÁ≥ªÁªü„Äå‰∏ãÂëΩ‰ª§„ÄçÔºåÊØîÂ¶Ç $ cd ~/Desktop Â∞±ÊòØËøõÂÖ•‰Ω†Ê†πÁõÆÂΩï‰∏ãÁöÑ Desktop Êñá‰ª∂Â§π„ÄÇ ssh SSH ÊòØ‰∏ÄÁßçÁΩëÁªúÂçèËÆÆÔºå‰Ωú‰∏∫ÊØè‰∏ÄÂè∞ Linux ÁîµËÑëÁöÑÊ†áÂáÜÈÖçÁΩÆÔºåÁî®‰∫éËÆ°ÁÆóÊú∫‰πãÈó¥ÁöÑÂä†ÂØÜÁôªÂΩï„ÄÇÂΩì‰Ω†‰∏∫ÁßüÁî®ÁöÑ VPS ÂÆâË£Ö Linux Á≥ªÁªüÂêéÔºåÂè™Ë¶ÅÂÄüÂä©‰∏Ä‰∫õÂ∑•ÂÖ∑ÔºåÂ∞±ÂèØ‰ª•Áî® SSH Âú®‰Ω†Ëá™Â∑±ÁöÑ Mac/PC ÁîµËÑë‰∏äËøúÁ®ãÁôªÂΩïËØ• VPS ‰∫Ü„ÄÇ shadowsocksShadowsocks(ss) ÊòØÁî± Clowwindy ÂºÄÂèëÁöÑ‰∏ÄÊ¨æËΩØ‰ª∂ÔºåÂÖ∂‰ΩúÁî®Êú¨Êù•ÊòØÂä†ÂØÜ‰º†ËæìËµÑÊñô„ÄÇÂΩìÁÑ∂Ôºå‰πüÊ≠£Âõ†‰∏∫ÂÆÉÂä†ÂØÜ‰º†ËæìËµÑÊñôÁöÑÁâπÊÄßÔºå‰ΩøÂæó GFW Ê≤°Ê≥ïÂ∞ÜÁî±ÂÆÉ‰º†ËæìÁöÑËµÑÊñôÂíåÂÖ∂‰ªñÊôÆÈÄöËµÑÊñôÂå∫ÂàÜÂºÄÊù•Ôºå‰πüÂ∞±‰∏çËÉΩÂπ≤Êâ∞Êàë‰ª¨ËÆøÈóÆÈÇ£‰∫õ„Äå‰∏çÂ≠òÂú®„ÄçÁöÑÁΩëÁ´ô‰∫Ü„ÄÇ Êê≠Âª∫vpsÁõÆÁöÑÂ∞±ÊòØÊê≠Âª∫Ê¢ØÂ≠ê„ÄÇÊó†Âª∫Á´ôÁöÑÈúÄÊ±Ç„ÄÇÊé®ËçêvultrÔºåÊúÄ‰æøÂÆúÁöÑÊúâ2.5ÁæéÂÖÉ‰∏Ä‰∏™Êúà„ÄÇ500gÊµÅÈáèÂÆåÂÖ®Â§üÁî®‰∫Ü„ÄÇ‰∏îÁé∞Âú®ÊîØÊåÅÊîØ‰ªòÂÆù‰ªòÊ¨æÔºåÈ¢á‰∏∫Êñπ‰æø„ÄÇÁé∞Èò∂ÊÆµÁöÑ‰ºòÊÉ†Ê¥ªÂä®ÊòØÊñ∞Ê≥®ÂÜåÁöÑÁî®Êà∑ÂÆåÊàêÊåáÂÆöÁöÑ‰ªªÂä°‰ºöËé∑Âæó3ÁæéÂÖÉÁöÑÂ•ñÂä±„ÄÇÔºàËØ¶ÁªÜÊÉÖÂÜµÂèØ‰æùÂèÇËßÅÂÆòÁΩë„ÄÇÔºâ Ê≥®ÂÜåÈ¶ñÂÖàÁÇπÂáªÂè≥‰æßÊ≥®ÂÜåÈìæÊé•Ôºöhttps://www.vultr.com/2017PromoÔºåÁÑ∂Âêé‰ºöÊù•Âà∞‰∏ãÂõæÊâÄÁ§∫ÁöÑÊ≥®ÂÜåÈ°µÈù¢„ÄÇ Á¨¨‰∏Ä‰∏™Ê°Ü‰∏≠Â°´ÂÜôÊ≥®ÂÜåÈÇÆÁÆ±ÔºåÁ¨¨‰∫å‰∏™Ê°Ü‰∏≠Â°´ÂÜôÊ≥®ÂÜåÂØÜÁ†ÅÔºàËá≥Â∞ëÂåÖÂê´1‰∏™Â∞èÂÜôÂ≠óÊØç„ÄÅ1‰∏™Â§ßÂÜôÂ≠óÊØçÂíå1‰∏™Êï∞Â≠óÔºâÔºåÊúÄÂêéÁÇπÂáªCreate AccountÂàõÂª∫Ë¥¶Êà∑„ÄÇ ÂàõÂª∫Ë¥¶Êà∑ÂêéÊ≥®ÂÜåÈÇÆÁÆ±‰ºöÊî∂Âà∞‰∏ÄÂ∞ÅÈ™åËØÅÈÇÆ‰ª∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÁÇπÂáªVerify Your E-mailÊù•È™åËØÅÈÇÆÁÆ±„ÄÇ Â¶ÇÊûúÊ≥®ÂÜåÈÇÆÁÆ±Êî∂‰∏çÂà∞È™åËØÅÈÇÆ‰ª∂ËØ∑Êõ¥Êç¢Ê≥®ÂÜåÈÇÆÁÆ±ÂêéÈáçÂ§çÁ¨¨‰∏ÄÊ≠•„ÄÇ È™åËØÅÈÇÆÁÆ±ÂêéÊàë‰ª¨‰ºöÊù•Âà∞‰∏ãÂõæÊâÄÁ§∫ÁöÑÁôªÂΩïÁïåÈù¢ÔºåÊåâ‰∏ãÂõæ‰∏≠ÊåáÁ§∫Â°´ÂÜô‰ø°ÊÅØÔºåÁÑ∂ÂêéÁÇπÂáªLoginÁôªÂΩï„ÄÇ ÁôªÈôÜÂêéÊàë‰ª¨‰ºöÊù•Âà∞ÂÖÖÂÄºÁïåÈù¢„ÄÇVultrË¶ÅÊ±ÇÊñ∞Ë¥¶Êà∑ÂÖÖÂÄºÂêéÊâçÂèØ‰ª•Ê≠£Â∏∏ÂàõÂª∫ÊúçÂä°Âô®„ÄÇVultrÂ∑≤ÁªèÊîØÊåÅÊîØ‰ªòÂÆù‰∫ÜÔºåÂú®ËøôÈáåÊé®ËçêÂ§ßÂÆ∂‰ΩøÁî®ÊîØ‰ªòÂÆùÂÖÖÂÄºÔºåÊúÄ‰ΩéÈáëÈ¢ù‰∏∫10ÁæéÂÖÉ„ÄÇ Ë¥≠‰π∞ÂÖÖÂÄºÂÆåÊØïÂêéÁÇπÂáªÂè≥‰∏äËßíÁöÑËìùËâ≤Âä†Âè∑ÊåâÈíÆËøõÂÖ•ÂàõÂª∫ÊúçÂä°Âô®ÁïåÈù¢„ÄÇ È¶ñÂÖàÈúÄË¶ÅÈÄâÊã©Server LocationÂç≥Êú∫Êàø‰ΩçÁΩÆÔºå‰ªéÂ∑¶Âà∞Âè≥„ÄÅ‰ªé‰∏äÂà∞‰∏ã‰æùÊ¨°‰∏∫‰∏ú‰∫¨„ÄÅÊñ∞Âä†Âù°„ÄÅ‰º¶Êï¶„ÄÅÊ≥ïÂÖ∞ÂÖãÁ¶è„ÄÅÂ∑¥Èªé„ÄÅÈòøÂßÜÊñØÁâπ‰∏π„ÄÅËøàÈòøÂØÜ„ÄÅ‰∫öÁâπÂÖ∞Â§ß„ÄÅËäùÂä†Âì•„ÄÅÁ°ÖË∞∑„ÄÅËææÊãâÊñØ„ÄÅÊ¥õÊùâÁü∂„ÄÅÁ∫ΩÁ∫¶„ÄÅË•øÈõÖÂõæ„ÄÅÊÇâÂ∞º„ÄÇ ÁÑ∂ÂêéÈúÄË¶ÅÈÄâÊã©Server TypeÂç≥ÊúçÂä°Á±ªÂûãÔºåËøôÈáåÂ§ßÂÆ∂ÈúÄË¶ÅÈÄâÊã©ÂÆâË£ÖDebian 7 x64Á≥ªÁªüÔºåÂõ†‰∏∫Ëøô‰∏™Á≥ªÁªüÊäòËÖæËµ∑Êù•ÊØîËæÉÂÆπÊòìÔºåÊê≠Âª∫‰∏úË•ø‰πüÁÆÄÂçï‰æøÊç∑„ÄÇ ÁÑ∂ÂêéÈúÄË¶ÅÈÄâÊã©Server SizeÂç≥ÊñπÊ°àÁ±ªÂûãÔºåËøôÈáåÂ§ßÂÆ∂ÂèØ‰ª•ÊåâÁÖßÈúÄË¶ÅËá™Ë°åÈÄâÊã©ÔºåÂ¶ÇÊûúÂè™ÊòØÊôÆÈÄö‰ΩøÁî®ÈÇ£‰πàÈÄâÊã©Á¨¨‰∫å‰∏™5ÁæéÂÖÉÊñπÊ°àÂç≥ÂèØ„ÄÇ ÁÑ∂ÂêéAdditional Features„ÄÅStartup Script„ÄÅSSH Keys‰ª•ÂèäServer Hostname &amp; LabelÁ≠âÂõõÈÉ®ÂàÜÂ§ßÂÆ∂‰øùÊåÅÈªòËÆ§Âç≥ÂèØÔºåÊúÄÂêéÁÇπÂáªÂè≥‰∏ãÊñπÁöÑËìùËâ≤Deploy NowÊåâÈíÆÁ°ÆËÆ§ÂàõÂª∫ÊúçÂä°Âô®„ÄÇ ÂàõÂª∫ÊúçÂä°Âô®ÂêéÊàë‰ª¨‰ºöÁúãÂà∞‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇ ‰∏äÂõæ‰∏≠Êàë‰ª¨ÈúÄË¶ÅËÄêÂøÉÁ≠âÂæÖ3~4ÂàÜÈíüÔºåÁ≠âÁ∫¢Ëâ≤InstallingÂ≠óÂèò‰∏∫ÁªøËâ≤RunningÂ≠óÂêéÔºåÁÇπÂáªCloud InstanceÂç≥ÂèØËøõÂÖ•ÊúçÂä°Âô®ËØ¶ÁªÜ‰ø°ÊÅØÁïåÈù¢ÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ Â∑¶‰æßÁ∫¢Ê°ÜÂÜÖÂõõË°å‰ø°ÊÅØ‰æùÊ¨°‰∏∫Êú∫Êàø‰ΩçÁΩÆ„ÄÅIPÂú∞ÂùÄ„ÄÅÁôªÂΩïÁî®Êà∑Âêç„ÄÅÁôªÂΩïÂØÜÁ†Å„ÄÇIPÂú∞ÂùÄÂêéÈù¢ÁöÑÊåâÈíÆ‰∏∫Â§çÂà∂IPÂú∞ÂùÄÔºåÁôªÂΩïÂØÜÁ†ÅÂêéÈù¢ÁöÑÊåâÈíÆ‰∏∫Â§çÂà∂ÂØÜÁ†ÅÂèäÊòæÁ§∫/ÈöêËóèÂØÜÁ†Å„ÄÇÂè≥‰∏äËßíÁ∫¢Ê°ÜÂÜÖÂêéÈù¢Âõõ‰∏™ÊåâÈíÆÂàÜÂà´ÊòØÂÖ≥Èó≠ÊúçÂä°Âô®„ÄÅÈáçÂêØÊúçÂä°Âô®„ÄÅÈáçË£ÖÁ≥ªÁªü„ÄÅÂà†Èô§ÊúçÂä°Âô®„ÄÇ ËøúÁ®ãÁôªÂΩïÂÆâË£ÖËøúÁ®ãÁôªÂΩïËΩØ‰ª∂„ÄÇËøôÈáå‰ª•windosÁ´ØÁöÑxshell‰∏∫‰æã„ÄÇ‰ΩøÁî®macÁöÑÂêåÂ≠¶ÂèØ‰ª•‰∏ãËΩΩiTerm„ÄÇ ‰∏ãËΩΩÂÆâË£ÖÂêéÊâìÂºÄËΩØ‰ª∂„ÄÇÊ†πÊçÆ‰∏ãÂõæ‰∏≠ÁöÑÊåáÁ§∫ÔºåÊàë‰ª¨ÁÇπÂáª‰ºöËØùÊ°Ü‰∏≠ÁöÑÊñ∞Âª∫ÊåâÈíÆ„ÄÇ ÁÇπÂáªÊñ∞Âª∫ÊåâÈíÆÂêé‰ºöÂºπÂá∫‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨È¶ñÂÖàÂ°´ÂÜôIPÂú∞ÂùÄÔºåÁÑ∂ÂêéÁÇπÂáªÁ°ÆÂÆöÊåâÈíÆ„ÄÇ ÁÇπÂáªÁ°ÆÂÆöÊåâÈíÆÂêéÊàë‰ª¨‰ºöÂõûÂà∞‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨ÂèåÂáªÊâìÂºÄÊñ∞Âª∫‰ºöËØùÊàñËÄÖÁÇπÂáª‰∏ãÊñπËøûÊé•ÊåâÈíÆÊâìÂºÄÊñ∞Âª∫‰ºöËØù„ÄÇ ÂºÄÊñ∞Âª∫‰ºöËØùÂêé‰ºöÂºπÂá∫‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨ÁÇπÂáªÊé•ÂèóÂπ∂‰øùÂ≠òÊåâÈíÆ„ÄÇ ÁÇπÂáªÊé•ÂèóÂπ∂‰øùÂ≠òÊåâÈíÆ‰ºöÂºπÂá∫‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨È¶ñÂÖàÂ°´ÂÜôSSHËøûÊé•ÂØÜÁ†ÅÔºåÁÑ∂ÂêéÊâìÈí©ËÆ∞‰ΩèÂØÜÁ†ÅÔºåÊúÄÂêéÁÇπÂáªÁ°ÆÂÆöÊåâÈíÆ„ÄÇ Â¶ÇÊûúÊèêÁ§∫ÈúÄË¶ÅËæìÂÖ•Áî®Êà∑ÂêçÔºàÁôªÂΩïÂêçÔºâÔºåÈÇ£‰πàËØ∑ËæìÂÖ•rootÔºÅ ÁÇπÂáªÁ°ÆÂÆöÊåâÈíÆÂêéÊúçÂä°Âô®‰ºöËá™Âä®ËøûÊé•ÔºåËøûÊé•ÂÆåÊØïÂêéÊàë‰ª¨‰ºöÊù•Âà∞‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢ ÈÉ®ÁΩ≤shadowsocksËøôÈáåÈááÁî®ÁΩë‰∏äÊï¥ÁêÜÁöÑ‰∏ÄÈîÆÈÉ®ÁΩ≤ÁöÑÊñπÊ°à„ÄÇÁÆÄÂçïÊñπ‰æøÊìç‰Ωú„ÄÇ È¶ñÂÖàÂ§çÂà∂‰ª•‰∏ãÂÜÖÂÆπÔºö 1wget -N --no-check-certificate https://0123.cool/download/55r.sh &amp;&amp; chmod +x 55r.sh &amp;&amp; ./55r.sh ÁÑ∂ÂêéÂõûÂà∞XshellËΩØ‰ª∂ÔºåÂè≥ÂáªÈÄâÊã©Á≤òË¥¥ÔºåÁ≤òË¥¥ÂÆåÊØïÂêéÂõûËΩ¶ÁªßÁª≠„ÄÇ ÂõûËΩ¶ÂêéÁ≥ªÁªü‰ºöËá™Ë°å‰∏ãËΩΩËÑöÊú¨Êñá‰ª∂Âπ∂ËøêË°å„ÄÇÊ†πÊçÆ‰∏ãÂõæÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨‰æùÊ¨°ËæìÂÖ•SSRÁöÑÂêÑÈ°πËøûÊé•‰ø°ÊÅØÔºåÊúÄÂêéÂõûËΩ¶ÁªßÁª≠„ÄÇ ÂÆâË£ÖÂÆåÊàêÂêé‰ºöÂá∫Áé∞‰∏ãÂõæÊâÄÁ§∫ÁïåÈù¢„ÄÇÊ†πÊçÆÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨Â∞ÜÁ∫¢Ê°ÜÂúà‰∏≠ÁöÑ‰ø°ÊÅØ‰øùÂ≠òÂà∞ËÆ∞‰∫ãÊú¨ÂÜÖ„ÄÇ ÈÖçÁΩÆÈîêÊÑèÂä†ÈÄüÊ†πÊçÆ‰∏ãÂõæÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨ÁªßÁª≠Â§çÂà∂‰∏ãÂàó‰ø°ÊÅØÔºö 1wget -N --no-check-certificate https://0123.cool/download/rs.sh &amp;&amp; bash rs.sh install ÁÑ∂ÂêéÂõûÂà∞XshellËΩØ‰ª∂ÔºåÂè≥ÂáªÈÄâÊã©Á≤òË¥¥ÔºåÁ≤òË¥¥ÂÆåÊØïÂêéÂõûËΩ¶ÁªßÁª≠„ÄÇ ÂõûËΩ¶ÂêéÁ≥ªÁªü‰ºöËá™Ë°å‰∏ãËΩΩËÑöÊú¨Êñá‰ª∂Âπ∂ËøêË°å„ÄÇÊ†πÊçÆ‰∏ãÂõæÂõæ‰∏≠ÊåáÁ§∫ÔºåÊàë‰ª¨‰æùÊ¨°ËæìÂÖ•ÈîêÈÄüÁöÑÂêÑÈ°πÈÖçÁΩÆ‰ø°ÊÅØÔºåÊúÄÂêéÂõûËΩ¶ÁªßÁª≠„ÄÇ ÂõûËΩ¶ÂêéÔºåÁ≥ªÁªüËá™Âä®ÊâßË°åÂëΩ‰ª§ÂÆåÊàêÁ†¥Ëß£ÁâàÈîêÈÄüÂÆâË£ÖÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ Êàë‰ª¨È¶ñÂÖàËæìÂÖ•Ôºö 1reboot ÁÑ∂ÂêéÂõûËΩ¶ÔºåXshell‰ºöÊñ≠ÂºÄËøûÊé•ÔºåÁ≥ªÁªü‰ºöÂú®1ÂàÜÈíüÂêéÈáçÂêØÂÆåÊØïÔºåÊ≠§Êó∂ÂèØ‰ª•ÂÖ≥Èó≠XshellËΩØ‰ª∂‰∫Ü„ÄÇ Êê≠Âª∫ÊïôÁ®ãÂà∞Ê≠§ÁªìÊùüÔºå‰∫≤ÊµãÊàêÂäü„ÄÇÂ¶ÇÊûú‰∏çËÉΩËøûÊé•ÁöÑÔºåËØ∑Ê£ÄÊü•Ëá™Â∑±ÁöÑÊØè‰∏ÄÊ≠•Êìç‰Ωú„ÄÇ","raw":null,"content":null,"categories":[{"name":"vps","slug":"vps","permalink":"https://stanxia.github.io/categories/vps/"}],"tags":[{"name":"vps","slug":"vps","permalink":"https://stanxia.github.io/tags/vps/"}]},{"title":"sparkÊä•ÈîôÈõÜ","slug":"sparkÊä•ÈîôÈõÜ","date":"2017-10-30T13:58:58.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/10/30/sparkÊä•ÈîôÈõÜ/","link":"","permalink":"https://stanxia.github.io/2017/10/30/sparkÊä•ÈîôÈõÜ/","excerpt":"ÊúâËØùË¶ÅËØ¥ÈíàÂØπ‰∏Ä‰∏™ËÄÅÊØõÁóÖÔºöÊúâ‰∫õÈîôËØØÂ±°ÁäØÂ±°ÊîπÔºåÂ±°ÊîπÂ±°ÁäØÔºåÊ≤°ÊúâÂºïËµ∑Ê†πÊú¨‰∏äÁöÑÊ≥®ÊÑèÔºåÊàñËÄÖÊ≤°Êúâ‰ªéÊ∫êÂ§¥ÁêÜËß£ÈîôËØØÂèëÁîüÁöÑÂ∫ïÂ±ÇÂéüÁêÜÔºåÂØºËá¥ÂÅöÂæàÂ§öÊó†Áî®Âäü„ÄÇ\nÊÄªÁªìÂéÜÂè≤ÔºåÂπ∂‰ªé‰∏≠Âê∏ÂèñÊïôËÆ≠ÔºåÂáèÂ∞ëÊó†Áî®ÂäüÈÄ†ÊàêÁöÑÊó∂Èó¥Êµ™Ë¥π„ÄÇÁâπÊ≠§Â∞Ü‰ªéÁõÆÂâçÈÅáÂà∞ÁöÑsparkÈóÆÈ¢òÂÖ®ÈÉ®ËÆ∞ÂΩïÂú®ËøôÈáåÔºåÊêûÊ∏ÖÊ•öÈóÆÈ¢òÔºåËá™‰ø°ÂêëÂâç„ÄÇ","text":"ÊúâËØùË¶ÅËØ¥ÈíàÂØπ‰∏Ä‰∏™ËÄÅÊØõÁóÖÔºöÊúâ‰∫õÈîôËØØÂ±°ÁäØÂ±°ÊîπÔºåÂ±°ÊîπÂ±°ÁäØÔºåÊ≤°ÊúâÂºïËµ∑Ê†πÊú¨‰∏äÁöÑÊ≥®ÊÑèÔºåÊàñËÄÖÊ≤°Êúâ‰ªéÊ∫êÂ§¥ÁêÜËß£ÈîôËØØÂèëÁîüÁöÑÂ∫ïÂ±ÇÂéüÁêÜÔºåÂØºËá¥ÂÅöÂæàÂ§öÊó†Áî®Âäü„ÄÇ ÊÄªÁªìÂéÜÂè≤ÔºåÂπ∂‰ªé‰∏≠Âê∏ÂèñÊïôËÆ≠ÔºåÂáèÂ∞ëÊó†Áî®ÂäüÈÄ†ÊàêÁöÑÊó∂Èó¥Êµ™Ë¥π„ÄÇÁâπÊ≠§Â∞Ü‰ªéÁõÆÂâçÈÅáÂà∞ÁöÑsparkÈóÆÈ¢òÂÖ®ÈÉ®ËÆ∞ÂΩïÂú®ËøôÈáåÔºåÊêûÊ∏ÖÊ•öÈóÆÈ¢òÔºåËá™‰ø°ÂêëÂâç„ÄÇ ÈóÆÈ¢òÊ±áÊÄªÈóÆÈ¢ò1Ôºöspark-hive classes are not foundÊ¶ÇËø∞Ôºö1Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Unable to instantiate SparkSession with Hive support because Hive classes are not found. Âú∫ÊôØÔºöÂú®Êú¨Âú∞Ë∞ÉËØïsparkÁ®ãÂ∫èÔºåËøûÊé•ËôöÊãüÊú∫‰∏äÁöÑÈõÜÁæ§ÔºåÂ∞ùËØïÊâßË°åsparkSQLÊó∂ÔºåÂêØÂä®‰ªªÂä°Â∞±Êä•Èîô„ÄÇ ÂéüÁêÜÔºöÁº∫Â∞ësparkSQLËøûÊé•hiveÁöÑÂøÖË¶ÅÂíå‰æùËµñjarÂåÖÔºåÊ∑ªÂä†Áõ∏Â∫îÁöÑ‰æùËµñÂåÖÂç≥ÂèØ„ÄÇ ÂäûÊ≥ïÔºö123456789Âú®È°πÁõÆÔºèÊ®°ÂùóÁöÑpom.xml‰∏≠Ê∑ªÂä†Áõ∏ÂÖ≥ÁöÑspark-hive‰æùËµñjarÂåÖ„ÄÇ&lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-hive_2.11 --&gt;&lt;dependency&gt; &lt;groupId&gt;org.apache.spark&lt;/groupId&gt; &lt;artifactId&gt;spark-hive_2.11&lt;/artifactId&gt; &lt;version&gt;2.1.1&lt;/version&gt; &lt;scope&gt;provided&lt;/scope&gt;&lt;/dependency&gt;ÈáçÊñ∞ÁºñËØëÈ°πÁõÆÔºèÊ®°ÂùóÂç≥ÂèØ„ÄÇ ÈóÆÈ¢ò2ÔºöSpark Local Ê®°ÂºèÂÜô HiveÔºåuser=xialinshengÊ¶ÇËø∞Ôºö1Caused by: org.apache.hadoop.security.AccessControlException: Permission denied: user=xialinsheng, access=WRITE, inode=&quot;/user/hive/warehouse/xls002&quot;:hadoop:supergroup:drwxr-xr-x Âú∫ÊôØÔºöSpark Local Ê®°ÂºèËøûÊé•ÈõÜÁæ§ÔºåÂØπ Hadoop Êó†Êìç‰ΩúÊùÉÈôê„ÄÇ ÂéüÁêÜÔºöSpark Âú® Local Ê®°ÂºèÊó∂ÔºåÂ¶ÇÊûúÂú®Êú¨Âú∞Êú∫Âô®Ê≤°ÊúâËÆæÂÆö HADOOP_USER_NAME ÔºåÁ®ãÂ∫è‰ºö‰ΩøÁî®Êú¨Âú∞ÁöÑÊú∫Âô®Âêç‰Ωú‰∏∫ HADOOP_USER_NAME ÔºåËøôÂ∞±ÂØºËá¥Âú® Hadoop ÈõÜÁæ§‰∏≠Êó†Ê≥ïËØÜÂà´ËØ•Áî®Êà∑ÂêçÔºå‰ªéËÄåÊ≤°ÊùÉÈôêÊìç‰Ωú Hadoop „ÄÇ Ëé∑Âèñ HADOOP_USER_NAME ÁöÑÊ†∏ÂøÉÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö 1234567if (!isSecurityEnabled() &amp;&amp; (user == null)) &#123; String envUser = System.getenv(HADOOP_USER_NAME); if (envUser == null) &#123; envUser = System.getProperty(HADOOP_USER_NAME); &#125; user = envUser == null ? null : new User(envUser);&#125; ‰ªéÊ∫êÁ†ÅÂèØÁü•ÔºåË¶ÅÊÉ≥Ëß£ÂÜ≥ËØ•ÈóÆÈ¢òÔºåÂè™Ë¶ÅÂú®Êú¨Êú∫ÁöÑÁéØÂ¢ÉÂèòÈáè‰∏≠Ê∑ªÂä† HADOOP_USER_NAME = Hadoop ÔºàÂØπ Hadoop ÈõÜÁæ§ÊúâÊìç‰ΩúÊùÉÈôêÁöÑÁî®Êà∑ÔºåÂÖ∑‰ΩìËßÜËá™Ë∫´ÊÉÖÂÜµËÄåÂÆö„ÄÇÔºâÂèÇËÄÉÂçöÂÆ¢ÔºöÁÇπÊàë‰∫ÜËß£Êõ¥Â§ö Ëß£ÂÜ≥ÔºöÂõ†‰∏∫ÊàëÁöÑÈúÄÊ±ÇÂè™ÊòØÂú®ÊµãËØïÁöÑÊó∂ÂÄô‰ºö‰ΩøÁî® Local Ê®°ÂºèËøûÊé•ÈõÜÁæ§‰∏äÁöÑ Hive Ë°®ÔºåÂõ†ËÄåÊàëÁöÑÂ§ÑÁêÜÊñπÂºèÂàôÊòØÂú®Á®ãÂ∫è‰ª£Á†Å‰∏≠ÊåáÂÆö Ôºö 1System.setProperty(\"HADOOP_USER_NAME\",\"HadoopÊúâÊùÉÈôêÁöÑÁî®Êà∑Âêç\"); ÈóÆÈ¢ò3Ôºöjavax.servlet.FilterRegistrationÊ¶ÇËø∞ÔºöÂú®idea‰∏äËøêË°åsparkÁ®ãÂ∫èÊó∂ÔºåÂá∫Áé∞‰ª•‰∏ã‰ø°ÊÅØÔºö 1Spark error class &quot;javax.servlet.FilterRegistration&quot;&apos;s signer information does not match signer information of other classes in the same package Â¶ÇÂõæÔºö ÂéüÁêÜÔºöÂåÖÂÜ≤Á™ÅÂØºËá¥„ÄÇ Ëß£ÂÜ≥ÔºöÊåâÁÖß‰ª•‰∏ãÊ≠•È™§Êìç‰ΩúÔºö Âè≥ÈîÆÊ®°ÂùóÈ°πÁõÆ Open Module Settings ÈÄâÊã©Dependencies ÊâæÂà∞ javax.servlet:servlet-api:xx ÁßªÂä®Âà∞ÂàóË°®ÁöÑÊúÄÊú´Á´Ø ApplyÔºåOk Â¶Ç‰∏ãÂõæÔºö","raw":null,"content":null,"categories":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/categories/spark/"}],"tags":[{"name":"spark","slug":"spark","permalink":"https://stanxia.github.io/tags/spark/"},{"name":"Êä•ÈîôÈõÜ","slug":"Êä•ÈîôÈõÜ","permalink":"https://stanxia.github.io/tags/Êä•ÈîôÈõÜ/"}]},{"title":"life","slug":"life","date":"2017-10-29T11:00:42.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/10/29/life/","link":"","permalink":"https://stanxia.github.io/2017/10/29/life/","excerpt":"\n\nvar dplayer0 = new DPlayer({\"element\":document.getElementById(\"dplayer0\"),\"autoplay\":0,\"theme\":\"#FADFA3\",\"loop\":1,\"video\":{\"url\":\"http://oliji9s3j.bkt.clouddn.com/Unbroken%20-%20Motivational%20Video.mp4\",\"pic\":\"/images/pic/life.jpeg\"}});\nLife is simple &amp;&amp; funny.","text":"var dplayer0 = new DPlayer({\"element\":document.getElementById(\"dplayer0\"),\"autoplay\":0,\"theme\":\"#FADFA3\",\"loop\":1,\"video\":{\"url\":\"http://oliji9s3j.bkt.clouddn.com/Unbroken%20-%20Motivational%20Video.mp4\",\"pic\":\"/images/pic/life.jpeg\"}}); Life is simple &amp;&amp; funny.","raw":null,"content":null,"categories":[{"name":"movie","slug":"movie","permalink":"https://stanxia.github.io/categories/movie/"}],"tags":[{"name":"movie","slug":"movie","permalink":"https://stanxia.github.io/tags/movie/"}]},{"title":"ÊùÇ‰π±Êó†Á´†","slug":"ÊùÇ‰π±Êó†Á´†","date":"2017-10-29T01:31:31.000Z","updated":"2020-02-05T15:12:18.123Z","comments":true,"path":"2017/10/29/ÊùÇ‰π±Êó†Á´†/","link":"","permalink":"https://stanxia.github.io/2017/10/29/ÊùÇ‰π±Êó†Á´†/","excerpt":"Êó∂ÂÖâÁöÑÊú∫Âô®ÔºåÂä†Ë∂≥È©¨ÂäõÂÜ≤ÂõûËøáÂéª\nÂéÜÂè≤ÁöÑÈïøÊ≤≥Ôºå‰∏ù‰∏ùÊ∂üÊº™Ê∂åÂêëÊú™Êù•","text":"Êó∂ÂÖâÁöÑÊú∫Âô®ÔºåÂä†Ë∂≥È©¨ÂäõÂÜ≤ÂõûËøáÂéª ÂéÜÂè≤ÁöÑÈïøÊ≤≥Ôºå‰∏ù‰∏ùÊ∂üÊº™Ê∂åÂêëÊú™Êù• ÈÅì‰∏çÊ∏ÖÊ•öÔºåËØ¥‰∏çÊòéÁôΩÔºåÂ§úÊ∑±‰∫∫ÈùôÁöÑÊó∂ÂÄôÔºåËØ¥‰∏Ä‰∫õÊÉ≥Âà∞ÁöÑÂ∫üËØù„ÄÇÁ™óÂ§ñÈöÜÈöÜ‰ΩúÂìçÔºå‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÊú∫Âô®‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÊâßË°åÁùÄ‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÂä®‰Ωú„ÄÇÁ™óÂÜÖÂ±èÂπïÊöóÊ∑°ÔºåÂèåÁúºÂπ≤Ê∂©ÔºåÊÄùÁ¥¢ÁùÄÂÆáÂÆôÂ§ñÁöÑÂõûÊÉ≥„ÄÇ Â∞èÊó∂ÂÄôÔºåÊúõÂêëÊòüÁ©∫ÔºåÈÇ£Êó∂ÁöÑÂ§©Á©∫Áæ§ÊòüÈó™ÁÉÅÔºåÂì™ÂÉèÁé∞Âú®ÔºåÂòøÔºå‰∫´Âèó‰∫ÜÂ§ßÂüéÂ∏ÇÁöÑÈúìËôπÔºåÂì™ÈáåÂÜçÁªô‰Ω†Êó†Âû†ÁöÑÊòüÁ©∫ÔºåË¥™„ÄÇ Ë∫∫Âú®ËçâÂú∞ÔºåÂæÆÈ£éËΩªÊãÇËÑ∏È¢äÔºåÂàùÁßãÁöÑÂ§úÊôöÔºåÊúâÁÇπÂæÆÂáâ„ÄÇ ‰ª∞ÊúõÊòüÊ≤≥Ôºå‰πüÊÉ≥ÁùÄÂ§ñÈù¢ÁöÑ‰∏ñÁïåÔºåÂ§öÁ≤æÂΩ©„ÄÇ Êè£Êë©ÁùÄÊó†Âû†ÁöÑÂÆáÂÆôÔºåÁøªËøáÂú∞ÁêÉÔºåË∂äËøáÈì∂Ê≤≥ÔºåÈ©∂ÂêëÊó†ÈôêÊãìÂ±ïÁöÑÊòüÈôÖÔºåË∫´‰∏äÁöÑÁÉ¶ÊÅºÔºåÂæÆÈ£é‰∏ÄÂêπÔºåÂÖ®Êï£‰∫Ü„ÄÇ È£éËΩªÊãÇÔºåÈùôÈùôÊúõÁùÄÂ§©Á©∫ÔºåÊÄùËÄÉÁùÄÂ§ñÈù¢ÁöÑÊúãÂèãÊàñËÆ∏‰πüÂú®Ê∏¥ÊúõÁùÄËøúÊñπÁöÑÊàëÔºå‰º∏ÊâãËß¶Êë∏ËøôÂ§©Á©∫ÔºåÊäì‰∏ÄÊääÊòüËæ∞Ë¥™Â©™ÁöÑÊîæÂÖ•Ê¢¶„ÄÇ Ê∑±ÈÇÉÁöÑÂ§úÁ©∫ÔºåÊúõ‰∏çÂ∞ΩÁöÑËøúÊñπÔºåÊòØÂÖâÊòé‰∏≠ÁöÑÊó†Â∞ΩÈªëÊöóÔºå‰πü‰ººÈªëÊöóÈÅìË∑ØÁöÑ‰∏ÄÊùü‰∫ÆÂÖâÔºåÊ¥íÂêëÊàëÔºåÊÄùÁª™Ë∑üÁùÄÈÅ®Ê∏∏ÔºåÂëµÔºå‰∏ñÁïå‰∏éÊàë‰∏áÂçÉÁæéÂ•ΩÔºåÊàë‰∏é‰∏ñÁïåÂç¥ÂøµÂøµÂè®Âè®ÔºåÁêêÁêêÁ¢éÁ¢éÔºåÈ∫ªÈ∫ªÁÉ¶ÁÉ¶„ÄÇÂøÉÈáåÊòØÊÉ≥ÊîæÈ£ûÁöÑ„ÄÇ Â§úÊ∑±ÔºåËΩ¶Ê∞¥ÂëºÂï∏ÔºåËØâËØ¥ÁùÄÂüéÂ∏ÇÁöÑ‰∏çÁú†ÔºåÂèØÊàëÂõ∞ÔºåÂÖ≥Á™óÔºåÈó∑„ÄÇÂºÄÁ™óÔºåÂòøÔºå‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÊú∫Âô®ÂèàÂºÄÂßã‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÊâßË°å‰∏çÁü•Áñ≤ÂÄ¶ÁöÑÂä®‰Ωú„ÄÇËøôÊ†∑ÁöÑÂ§úÊôöÔºåÁú†Èöæ„ÄÇ Ê∑±Â§úÊÄùËÄÉÔºåÂÜô‰Ωú„ÄÇÂ§ú‰ΩøÊàëÂÆÅÈùôÔºåÂÜÖÂøÉÁöÑÂÆÅÈùôÔºåËøôÁôΩÂ§©ÁöÑÂ§ßÂüéÂ∏ÇÁªô‰∫à‰∏ç‰∫Ü„ÄÇÊÑüË∞¢Â§úÁöÑÈ¶àËµ†ÔºåÊé•Êî∂ËøôÊó†‰∏äÁöÑÂä†ÂÜïÔºåÈ©∞È™ãÂú®ÊÄùÁª™ÁöÑÊòüÁ©∫ÔºåÁóõÂø´ÔºåÁ≤æÂΩ©ÔºåÁ≤æÂΩ©„ÄÇ ÊùÇ‰π±Êó†Á´†ÔºåÂëµÔºåÂèØ‰ª•„ÄÇ","raw":null,"content":null,"categories":[{"name":"think","slug":"think","permalink":"https://stanxia.github.io/categories/think/"}],"tags":[{"name":"think","slug":"think","permalink":"https://stanxia.github.io/tags/think/"}]},{"title":"Èó≤Ë∞à","slug":"Èó≤Ë∞à","date":"2017-10-28T11:07:14.000Z","updated":"2020-02-05T15:12:18.123Z","comments":true,"path":"2017/10/28/Èó≤Ë∞à/","link":"","permalink":"https://stanxia.github.io/2017/10/28/Èó≤Ë∞à/","excerpt":"Êò•ÂõûÂ§ßÂú∞","text":"Êò•ÂõûÂ§ßÂú∞","raw":null,"content":null,"categories":[{"name":"think","slug":"think","permalink":"https://stanxia.github.io/categories/think/"}],"tags":[{"name":"think","slug":"think","permalink":"https://stanxia.github.io/tags/think/"}]},{"title":"Ëøô‰∏™ÊùÄÊâã‰∏çÂ§™ÂÜ∑","slug":"Ëøô‰∏™ÊùÄÊâã‰∏çÂ§™ÂÜ∑","date":"2017-10-28T01:18:04.000Z","updated":"2020-02-05T15:12:18.123Z","comments":true,"path":"2017/10/28/Ëøô‰∏™ÊùÄÊâã‰∏çÂ§™ÂÜ∑/","link":"","permalink":"https://stanxia.github.io/2017/10/28/Ëøô‰∏™ÊùÄÊâã‰∏çÂ§™ÂÜ∑/","excerpt":"Is life always this hard,or is it just when you‚Äôre a kid?Always like this.\n","text":"Is life always this hard,or is it just when you‚Äôre a kid?Always like this.","raw":null,"content":null,"categories":[{"name":"movie","slug":"movie","permalink":"https://stanxia.github.io/categories/movie/"}],"tags":[{"name":"movie","slug":"movie","permalink":"https://stanxia.github.io/tags/movie/"}]},{"title":"mac‰ΩøÁî®Â∞èÊäÄÂ∑ß","slug":"mac‰ΩøÁî®Â∞èÊäÄÂ∑ß","date":"2017-10-28T01:13:44.000Z","updated":"2020-02-05T15:12:18.108Z","comments":true,"path":"2017/10/28/mac‰ΩøÁî®Â∞èÊäÄÂ∑ß/","link":"","permalink":"https://stanxia.github.io/2017/10/28/mac‰ΩøÁî®Â∞èÊäÄÂ∑ß/","excerpt":"ÂâçË®Ä\nËÆ∞ÂΩïmac‰ΩøÁî®ÁöÑÂ∞èÊäÄÂ∑ßÂíå‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇ‰∏çÂÆöÊúüÊõ¥Êñ∞ingÊñá‰ª∂ÊçüÂùèÁöÑËß£ÂÜ≥ÂäûÊ≥ïÂú®ÂÆâË£Ö‰∏Ä‰∫õÁΩë‰∏ä‰∏ãËΩΩÁöÑÂ∫îÁî®Êó∂ÔºåÂ¶ÇÊûúÊä•ÈîôÊòæÁ§∫ÔºöÊñá‰ª∂Â∑≤ÁªèÊçüÂùèÔºåËØ∑ÁßªËá≥Â∫üÁ∫∏ÁØì„ÄÇËØ∑‰∏çË¶ÅÊÉäÊÖåÔºåÂÖ∂ÂÆûÂà´‰∏çÊòØÊñá‰ª∂ÁúüÁöÑÊçüÂùè‰∫ÜÔºåÊ†πÊú¨ÂéüÂõ†ÊòØ mac Á≥ªÁªüÁöÑÂÆâÂÖ®È™åËØÅÊú∫Âà∂ÔºåÈªòËÆ§ÊòØ‰∏çÂÖÅËÆ∏Êüê‰∫õÂ∫îÁî®ÁöÑÂÆâË£Ö„ÄÇË¶ÅÊÉ≥ÈÅøÂºÄËØ•ÂÆâÂÖ®ËÆ§ËØÅÔºåÂÖ∂ÂÆûÊñπÊ≥ï‰πüÂæàÁÆÄÂçïÔºåÂ¶Ç‰∏ãÔºö\nÁ¨¨‰∏ÄÊ≠•ÔºöÊâìÂºÄÁ≥ªÁªüÂÅèÂ•ΩËÆæÁΩÆ‰∏≠ÁöÑ ÂÆâÂÖ®ÊÄß‰∏éÈöêÁßÅ ÔºåËß£ÂºÄÈîÅÔºåÈÄâÊã© ‰ªª‰ΩïÊù•Ê∫ê ÔºåÂÆåÊàê„ÄÇ\nÁ¨¨‰∫åÊ≠•ÔºöÂú®ËøôÈáåÂÖ≥ÈîÆÊòØÂæàÂ§öÊúãÂèãÊ≤°ÊâæÂà∞Ëøô‰∏™ ‰ªª‰ΩïÊù•Ê∫ê Ôºå‰∏çË¶ÅÁùÄÊÄ•ÔºåÂí±‰ª¨Êé•ÁùÄÂæÄÊù•‰∏ãÔºåÊâìÂºÄ ÁªàÁ´ØÔºåËæìÂÖ•Â¶Ç‰∏ãÂëΩ‰ª§Ôºö\n12cd ~sudo spctl --master-disable\nÊàêÂäüËæìÂÖ•‰ª•‰∏äÂëΩ‰ª§ÔºåÂÜçÂéªÊâßË°åÁ¨¨‰∏ÄÊ≠•Êìç‰ΩúÔºåÂÆåÊàêÔºåÁé∞Âú®ÂèØ‰ª•ÂéªÂºÄÂøÉÁöÑÂÆâË£ÖÂ∫îÁî®‰∫Ü„ÄÇ","text":"ÂâçË®Ä ËÆ∞ÂΩïmac‰ΩøÁî®ÁöÑÂ∞èÊäÄÂ∑ßÂíå‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇ‰∏çÂÆöÊúüÊõ¥Êñ∞ingÊñá‰ª∂ÊçüÂùèÁöÑËß£ÂÜ≥ÂäûÊ≥ïÂú®ÂÆâË£Ö‰∏Ä‰∫õÁΩë‰∏ä‰∏ãËΩΩÁöÑÂ∫îÁî®Êó∂ÔºåÂ¶ÇÊûúÊä•ÈîôÊòæÁ§∫ÔºöÊñá‰ª∂Â∑≤ÁªèÊçüÂùèÔºåËØ∑ÁßªËá≥Â∫üÁ∫∏ÁØì„ÄÇËØ∑‰∏çË¶ÅÊÉäÊÖåÔºåÂÖ∂ÂÆûÂà´‰∏çÊòØÊñá‰ª∂ÁúüÁöÑÊçüÂùè‰∫ÜÔºåÊ†πÊú¨ÂéüÂõ†ÊòØ mac Á≥ªÁªüÁöÑÂÆâÂÖ®È™åËØÅÊú∫Âà∂ÔºåÈªòËÆ§ÊòØ‰∏çÂÖÅËÆ∏Êüê‰∫õÂ∫îÁî®ÁöÑÂÆâË£Ö„ÄÇË¶ÅÊÉ≥ÈÅøÂºÄËØ•ÂÆâÂÖ®ËÆ§ËØÅÔºåÂÖ∂ÂÆûÊñπÊ≥ï‰πüÂæàÁÆÄÂçïÔºåÂ¶Ç‰∏ãÔºö Á¨¨‰∏ÄÊ≠•ÔºöÊâìÂºÄÁ≥ªÁªüÂÅèÂ•ΩËÆæÁΩÆ‰∏≠ÁöÑ ÂÆâÂÖ®ÊÄß‰∏éÈöêÁßÅ ÔºåËß£ÂºÄÈîÅÔºåÈÄâÊã© ‰ªª‰ΩïÊù•Ê∫ê ÔºåÂÆåÊàê„ÄÇ Á¨¨‰∫åÊ≠•ÔºöÂú®ËøôÈáåÂÖ≥ÈîÆÊòØÂæàÂ§öÊúãÂèãÊ≤°ÊâæÂà∞Ëøô‰∏™ ‰ªª‰ΩïÊù•Ê∫ê Ôºå‰∏çË¶ÅÁùÄÊÄ•ÔºåÂí±‰ª¨Êé•ÁùÄÂæÄÊù•‰∏ãÔºåÊâìÂºÄ ÁªàÁ´ØÔºåËæìÂÖ•Â¶Ç‰∏ãÂëΩ‰ª§Ôºö 12cd ~sudo spctl --master-disable ÊàêÂäüËæìÂÖ•‰ª•‰∏äÂëΩ‰ª§ÔºåÂÜçÂéªÊâßË°åÁ¨¨‰∏ÄÊ≠•Êìç‰ΩúÔºåÂÆåÊàêÔºåÁé∞Âú®ÂèØ‰ª•ÂéªÂºÄÂøÉÁöÑÂÆâË£ÖÂ∫îÁî®‰∫Ü„ÄÇÁªàÁ´Ø command not found ÈóÆÈ¢òÂú®ÂàùÊ¨°‰ΩøÁî® mac ÁªàÁ´ØÁöÑÊó∂ÂÄôÔºåÁªàÁ´ØÈô§‰∫ÜËÉΩÊâßË°å cd ÂëΩ‰ª§ÔºåÂÖ∂‰ΩôÁöÑË≤å‰ººÈÉΩ‰∏çÂæóË°åÔºå‰ºöÊä• command not found ÁöÑÈóÆÈ¢òÔºå‰∏ãÈù¢ÁªôÂá∫Ëß£ÂÜ≥ÊñπÊ°à„ÄÇ ÂéüÂõ†ÔºöÂá∫Áé∞ËØ•ÈóÆÈ¢òÁöÑÂéüÂõ†ÊòØÊ≤°ÊúâÂ∞ÜËøô‰∫õÂëΩ‰ª§Ê∑ªÂä†ËøõÁéØÂ¢ÉÂèòÈáè‰∏≠ÔºåÂØºËá¥Á≥ªÁªüÊó†Ê≥ïËØÜÂà´„ÄÇ Á¨¨‰∏ÄÊ≠•ÔºöÂÖàËÆæÁΩÆ‰∏¥Êó∂ÁöÑÁéØÂ¢ÉÂèòÈáèÔºå‰ª•‰ΩøÊàë‰ª¨ËÉΩÁªßÁª≠ËøõË°å‰∏ãÈù¢ÁöÑÊìç‰Ωú„ÄÇ 1export PATH=/usr/bin:/usr/sbin:/bin:/sbin Á¨¨‰∫åÊ≠•ÔºöËøõÂÖ•Âà∞Áî®Êà∑ÁöÑÁõÆÂΩïÔºåÂπ∂ÊâìÂºÄÂ≠òÂÇ®ÁéØÂ¢ÉÂèòÈáèÁöÑÊñá‰ª∂ .bash_profile , vi ÊòØÊìç‰ΩúÊñá‰ª∂ÁöÑÂà©Âô®ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊñá‰ª∂‰ºöÊñ∞Âª∫Êñá‰ª∂„ÄÇ 12cd ~vi .bash_profile Á¨¨‰∏âÊ≠•ÔºöÂú®ÊâìÂºÄÁöÑÊñá‰ª∂È°µÈù¢ÔºåËæìÂÖ• i ÊâßË°åÁºñËæëÊìç‰ΩúÔºåÂèØÁúãÂà∞È°µÈù¢ÁöÑÂ∑¶‰∏ãËßíÊúâ‰∏™ insert ÁöÑÂ≠óÊ†∑Âç≥ÂèØÔºåÁÑ∂ÂêéÊ∑ªÂä†ÁéØÂ¢ÉÂèòÈáè‰ø°ÊÅØÔºö 1export PATH=/usr/bin:/usr/sbin:/bin:/sbin Ê∑ªÂä†ÂÆå‰ª•‰∏ä‰ø°ÊÅØ‰πãÂêéÔºåÊåâ esc ÈîÆÈÄÄÂá∫ÁºñËæëÊ®°ÂºèÔºåÁÑ∂ÂêéËæìÂÖ• :wq ‰øùÂ≠òÂπ∂ÈÄÄÂá∫ÁºñËæëÈ°µÈù¢„ÄÇ Á¨¨ÂõõÊ≠•Ôºö‰ΩøÂàöÊâçÁºñËæëÁöÑÁéØÂ¢ÉÂèòÈáèÊñá‰ª∂ÁîüÊïà„ÄÇ source ÂëΩ‰ª§Âç≥ÂèØ„ÄÇ 1source .bash_profile ÂÆåÊàê‰πãÂêéÂàôÂèØ‰ª•ÈáçÂêØ ÁªàÁ´Ø ÔºåÂπ∂ÊâßË°åÂ¶Ç ls Á≠â Linux Êìç‰ΩúÔºåÈ™åËØÅÊòØÂê¶ÊàêÂäü„ÄÇÂºÄÂêØÂÖÖÁîµÊèêÁ§∫Èü≥ÔºàÁ±ª‰ºº‰∫éiphoneÂÖÖÁîµÊèêÁ§∫Èü≥ÔºåÈªòËÆ§ÂÖ≥Èó≠ÔºâÁªàÁ´ØËæìÂÖ•ÔºàÂºÄÂêØÔºâÔºö 1defaults write com.apple.PowerChime ChimeOnAllHardware -bool true; open /System/Library/CoreServices/PowerChime.app &amp; ÂÖ≥Èó≠Ôºö 1defaults write com.apple.PowerChime ChimeOnAllHardware -bool false;killall PowerChime ÈöêËóèÊñá‰ª∂Â§π Êõ¥Â•ΩÁöÑ‰øùÊä§Â≠¶‰π†ËµÑÊñôÔºåÊúâÊó∂ÂÄôÈúÄË¶ÅËÆæÁΩÆÈöêËóèÊñá‰ª∂Â§πÔºö 1mv foldername .foldername Êü•ÁúãÈöêËóèÊñá‰ª∂Â§π macÊúÄÊñ∞ÁâàÊú¨Ôºö 1‚åò‚áß.(Command + Shift + .) #ÈöêËóè ÂíåÊòæÁ§∫ Macbook Pro Áî®Â§ñÊé•ÊòæÁ§∫Âô®Êó∂ÔºåÂ¶Ç‰ΩïÂÖ≥Èó≠Á¨îËÆ∞Êú¨Â±èÂπïÔºåÂêåÊó∂ÂºÄÁõñ‰ΩøÁî® 12sudo nvram boot-args=\"iog=0x0\" #(10.10‰ª•ÂâçÁâàÊú¨)sudo nvram boot-args=\"niog=1\" #(10.10Âèä‰ª•ÂêéÁâàÊú¨)Ëøô‰∏™ÂëΩ‰ª§ÁöÑÊÑèÊÄùÂ∞±ÊòØÂ§ñÊé•ÊòæÁ§∫Âô®Êó∂ÂÖ≥Èó≠Ëá™Ë∫´Â±èÂπïÔºåÈáçÂêØÁîüÊïà ÂºÄÊú∫ÊµÅÁ®ãÔºöËøû‰∏äÁîµÊ∫êÂíåÂ§ñÊé•ÊòæÁ§∫Âô®ÔºåÊåâÂºÄÊú∫ÈîÆÔºåÁ´ãÂç≥ÂêàÁõñÔºåÁ≠âÂ§ñÊé•ÊòæÁ§∫Âô®Êúâ‰ø°Âè∑Êó∂ÂºÄÁõñÂç≥ÂèØÂ¶ÇÊûúÊä•Èîô (Â∑≤Áü• 10.11/10.12 ‰ºöÊä•Èîô)nvram: Error setting variable - ‚Äòboot-args‚Äô: (iokit/common) general error ÈáçÂêØÔºåÊåâ‰Ωècommand + r ËøõÂÖ•ÊÅ¢Â§çÁïåÈù¢ Â∑¶‰∏äËßíËèúÂçïÈáåÈù¢ÊâæÂà∞ÁªàÁ´ØÔºåËæìÂÖ•nvram boot-args=‚Äùniog=1‚ÄùÔºåÂõûËΩ¶ÈóÆÈ¢òËß£ÂÜ≥„ÄÇÈáçÂêØÁîüÊïà","raw":null,"content":null,"categories":[{"name":"mac","slug":"mac","permalink":"https://stanxia.github.io/categories/mac/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://stanxia.github.io/tags/mac/"}]},{"title":"photo","slug":"photo","date":"1999-10-27T00:54:07.000Z","updated":"2020-02-05T15:12:18.108Z","comments":false,"path":"1999/10/27/photo/","link":"","permalink":"https://stanxia.github.io/1999/10/27/photo/","excerpt":"","text":"","raw":null,"content":null,"categories":[{"name":"photo","slug":"photo","permalink":"https://stanxia.github.io/categories/photo/"}],"tags":[{"name":"photo","slug":"photo","permalink":"https://stanxia.github.io/tags/photo/"}]}]}