<!DOCTYPE html>
<html>
    <head>
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.2.6 -->

    <!-- Title -->
    
    <title>
        
            spark光速入门 | 
        
        小世界，大梦想
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="http://oliji9s3j.bkt.clouddn.com/favicon.ico">
    <link rel="icon" sizes="192x192" href="http://wx2.sinaimg.cn/mw1024/6aae3cf3gy1fcur6pcgo6j20lf0f2175.jpg">
    <link rel="apple-touch-icon" href="http://wx2.sinaimg.cn/mw1024/6aae3cf3gy1fcur6pcgo6j20lf0f2175.jpg">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="夏">
    <meta name="description" content="随便说说">
    <meta name="keywords" content="hive,hadoop,spark,hbase,hdfs,mapreduce,cluster">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="小世界，大梦想">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://stanxia.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="spark光速入门 | 小世界，大梦想">
    <meta property="og:description" content="随便说说">

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
    body, html {
        font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    }

    a {
        color: #00838F;
    }

    .mdl-card__media,
    #search-label,
    #search-form-label:after,
    #scheme-Paradox .hot_tags-count,
    #scheme-Paradox .sidebar_archives-count,
    #scheme-Paradox .sidebar-colored .sidebar-header,
    #scheme-Paradox .sidebar-colored .sidebar-badge{
        background-color: #0097A7 !important;
    }

    /* Sidebar User Drop Down Menu Text Color */
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
    #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
        color: #0097A7 !important;
    }

    #post_entry-right-info,
    .sidebar-colored .sidebar-nav li:hover > a,
    .sidebar-colored .sidebar-nav li:hover > a i,
    .sidebar-colored .sidebar-nav li > a:hover,
    .sidebar-colored .sidebar-nav li > a:hover i,
    .sidebar-colored .sidebar-nav li > a:focus i,
    .sidebar-colored .sidebar-nav > .open > a,
    .sidebar-colored .sidebar-nav > .open > a:hover,
    .sidebar-colored .sidebar-nav > .open > a:focus,
    #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
        color: #0097A7 !important;
    }

    .toTop {
        background: #757575 !important;
    }

    .material-layout .material-post>.material-nav,
    .material-layout .material-index>.material-nav,
    .material-nav a {
        color: #757575;
    }

    #scheme-Paradox .MD-burger-layer {
        background-color: #757575;
    }

    #scheme-Paradox #post-toc-trigger-btn {
        color: #757575;
    }

    .post-toc a:hover {
        color: #00838F;
        text-decoration: underline;
    }
</style>


<!-- Theme Background Related-->

    <style>
        body{
            background-color: #F5F5F5;
        }

        /* blog_info bottom background */
        #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
            background-color: #fff;
        }
    </style>




<!-- Fade Effect -->

    <style>
        .fade {
            transition: all 800ms linear;
            -webkit-transform: translate3d(0,0,0);
            -moz-transform: translate3d(0,0,0);
            -ms-transform: translate3d(0,0,0);
            -o-transform: translate3d(0,0,0);
            transform: translate3d(0,0,0);
            opacity: 1;
        }

        .fade.out{
            opacity: 0;
        }
    </style>


    <script src="/js/jquery.min.js"></script>

    <link rel="stylesheet" href="/css/highlight/solarized-white.css">

    <!-- UC Browser Compatible-->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write('<link rel="stylesheet" href="/css/uc.css">');
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                
    
                <!-- Main Container -->
                <main class="material-layout__content" id="main">
    
                    <!-- Top Anchor -->
                    <div id="top"></div>
    
                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    
    
                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#最全的Spark基础知识解答"><span class="post-toc-number">1.</span> <span class="post-toc-text">最全的Spark基础知识解答</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一-Spark基础知识"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">一. Spark基础知识</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-Spark是什么"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">1.Spark是什么?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-Spark与Hadoop的对比-Spark的优势"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">2.Spark与Hadoop的对比(Spark的优势)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-Spark有那些组件"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">3.Spark有那些组件</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#二-DataFrame相关知识点"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">二. DataFrame相关知识点</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-DataFrame是什么"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">1.DataFrame是什么?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-DataFrame与RDD的主要区别在于"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">2.DataFrame与RDD的主要区别在于?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-DataFrame-特性"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">3.DataFrame 特性</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#三-RDD相关知识点"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">三 .RDD相关知识点</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-RDD，全称为"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">1.RDD，全称为?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-RDD的特点"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">2.RDD的特点?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-RDD核心概念"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">3.RDD核心概念</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-RDD常见术语"><span class="post-toc-number">1.3.4.</span> <span class="post-toc-text">4.RDD常见术语</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-RDD提供了两种类型的操作："><span class="post-toc-number">1.3.5.</span> <span class="post-toc-text">5.RDD提供了两种类型的操作：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-RDD中关于转换-transformation-与动作-action-的区别"><span class="post-toc-number">1.3.6.</span> <span class="post-toc-text">6.RDD中关于转换(transformation)与动作(action)的区别</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-RDD-与-DSM的最大不同是"><span class="post-toc-number">1.3.7.</span> <span class="post-toc-text">7.RDD 与 DSM的最大不同是?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-RDD的优势"><span class="post-toc-number">1.3.8.</span> <span class="post-toc-text">8.RDD的优势?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#9-如何获取RDD"><span class="post-toc-number">1.3.9.</span> <span class="post-toc-text">9.如何获取RDD?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#10-RDD都需要包含以下四个部分"><span class="post-toc-number">1.3.10.</span> <span class="post-toc-text">10.RDD都需要包含以下四个部分</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#11-RDD中将依赖的两种类型"><span class="post-toc-number">1.3.11.</span> <span class="post-toc-text">11.RDD中将依赖的两种类型</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#四-Spark-Streaming相关知识点"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">四. Spark Streaming相关知识点</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-Spark-Streaming的基本原理"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">1.Spark Streaming的基本原理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#RDD-基本操作"><span class="post-toc-number">1.4.1.1.</span> <span class="post-toc-text">RDD 基本操作</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#常见的聚合操作："><span class="post-toc-number">1.4.1.1.1.</span> <span class="post-toc-text">常见的聚合操作：</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Join表连接"><span class="post-toc-number">1.4.1.1.2.</span> <span class="post-toc-text">Join表连接</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Transformation具体内容："><span class="post-toc-number">1.4.1.1.3.</span> <span class="post-toc-text">Transformation具体内容：</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Spark-Streaming优劣"><span class="post-toc-number">1.4.1.2.</span> <span class="post-toc-text">Spark Streaming优劣</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#优势："><span class="post-toc-number">1.4.1.2.1.</span> <span class="post-toc-text">优势：</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#劣势："><span class="post-toc-number">1.4.1.2.2.</span> <span class="post-toc-text">劣势：</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#DStream"><span class="post-toc-number">1.4.1.3.</span> <span class="post-toc-text">DStream</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#五-日志系统"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">五. 日志系统</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-Flume"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">1.Flume</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-Kafka"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">2.Kafka</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#六-分布式搜索"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">六. 分布式搜索</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#搜索引擎是什么"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">搜索引擎是什么?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Lucene是什么"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">Lucene是什么?</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Elasticsearch是什么"><span class="post-toc-number">1.6.3.</span> <span class="post-toc-text">Elasticsearch是什么?</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#七-分布式数据库"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">七. 分布式数据库</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Hive"><span class="post-toc-number">1.7.1.</span> <span class="post-toc-text">Hive</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1-Hive是什么"><span class="post-toc-number">1.7.1.1.</span> <span class="post-toc-text">1.Hive是什么?</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2-Hive的设计目标"><span class="post-toc-number">1.7.1.2.</span> <span class="post-toc-text">2.Hive的设计目标?</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3-Hive的内部表与外部表"><span class="post-toc-number">1.7.1.3.</span> <span class="post-toc-text">3.Hive的内部表与外部表</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4-Hive的调用方式"><span class="post-toc-number">1.7.1.4.</span> <span class="post-toc-text">4.Hive的调用方式</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5-Hive的运行机制"><span class="post-toc-number">1.7.1.5.</span> <span class="post-toc-text">5.Hive的运行机制</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#6-Hive的优势"><span class="post-toc-number">1.7.1.6.</span> <span class="post-toc-text">6.Hive的优势</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#7-Hive应用场景"><span class="post-toc-number">1.7.1.7.</span> <span class="post-toc-text">7.Hive应用场景</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#8-Hive不适用场景"><span class="post-toc-number">1.7.1.8.</span> <span class="post-toc-text">8.Hive不适用场景</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#9-Hive和数据库-RDBMS-的区别"><span class="post-toc-number">1.7.1.9.</span> <span class="post-toc-text">9.Hive和数据库(RDBMS)的区别</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#列式存储格式-Parquet"><span class="post-toc-number">1.7.1.10.</span> <span class="post-toc-text">列式存储格式 Parquet</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#列式存储和行式存储相比的优势"><span class="post-toc-number">1.7.1.10.1.</span> <span class="post-toc-text">列式存储和行式存储相比的优势 :</span></a></li></ol></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#八-基础问答题"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">八. 基础问答题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Q-你理解的Hive和传统数据库有什么不同-各有什么试用场景。"><span class="post-toc-number">1.8.1.</span> <span class="post-toc-text">Q:你理解的Hive和传统数据库有什么不同?各有什么试用场景。</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Q-Hive的实用场景"><span class="post-toc-number">1.8.2.</span> <span class="post-toc-text">Q:Hive的实用场景</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Q-大数据分析与挖掘方法论被称为CRISP-DM方法是以数据为中心迭代循环进行的六步活动"><span class="post-toc-number">1.8.3.</span> <span class="post-toc-text">Q:大数据分析与挖掘方法论被称为CRISP-DM方法是以数据为中心迭代循环进行的六步活动</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Q-数据分析挖掘方法大致包含-："><span class="post-toc-number">1.8.4.</span> <span class="post-toc-text">Q:数据分析挖掘方法大致包含 ( )：</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Q-在数据分析与挖掘中对数据的访问性要求包括"><span class="post-toc-number">1.8.5.</span> <span class="post-toc-text">Q:在数据分析与挖掘中对数据的访问性要求包括</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Q-Spark作为计算框架的优势是什么"><span class="post-toc-number">1.8.6.</span> <span class="post-toc-text">Q:Spark作为计算框架的优势是什么?</span></a></li></ol></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').css('background-image', 'url(' + '/img/random/material-' + randomNum + '.png' + ')');
</script>

        
    
            <p class="article-headline-p">
                spark光速入门
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>夏</strong>
        <span>8月 23, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
            <i class="material-icons" role="presentation">devices other</i>
            <span class="visuallyhidden">devices other</span>
        </button>
        <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
            <li class="mdl-menu__item">在其它设备中阅读本文章</li>
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAAC00lEQVR42u3aUY7bMAwFwNz/0u0JbL9HuUUijb6CIJA1NLBckvr8OXJ9sLGxsbGxsbGxsb+S/YnX5XYXv7nf5/7z1W4rZ8bGxsbem/3wp/+WFCWPC2Syf/L76MzY2NjYB7DzZJMkp6vD5Yntarf2zNjY2NjY99sl5cSssJmVJdjY2NjYbQOoLVGSwLWFDTY2Njb2SksoD00Lzkn/vJeGjY2N/fXsfGj6PZ//63wbGxsb+4vZ7cpbPOv7r++GjY2NfQK7HeKut5NmK98HGxsb+zR2O4ht2zrvJrMVPDY2Nvau7PwaZZtU7kPQNonygC710rCxsbF/kL2eQlpeG6xk5+hZ2NjY2Fuz8wMl3ydJJS8tVtpS2NjY2OewZylq1lrKg9gG7uHk2NjY2Fuz83ZSPlpIjrgyQq5fADY2NvYB7LzN9NaFnjyss3IFGxsb+xx2XiS0Lae8YGgTUn1mbGxs7K3ZszFqPWpdGDOsBxobGxt7V/bsokz+zUpKS3ZLXiE2NjY2dtJ+ml3fSUKQD30fTo6NjY29KXulfb9+UXI2eMhDjI2NjX0Cu23Ht0XCrGGUJKT66g82Njb2pux2mJp/n4SgvZQza1RhY2Nj781um0HtyHalVZQ/d2k8gI2Njf3j7FmR0KartuSYFUgP58TGxsbelD1r37RXZ9qkOCt7lsYD2NjY2D/OnqWE/MF5wZCnxrpEwcbGxj6A/daVmjasK0Pl4mzY2NjYB7Dv08PKwDUqFV4d8WJjY2Ofw25Xcu0mb1q1o4XXmkrY2NjYG7E/8SpGquXQ961wP6Q0bGxs7K3Zs0e2CaktJ2YJDBsbG/tkdlIY5Jdv1gfAbXJ9eBY2NjY29mgYnD9rlvDy14ONjY2N3V7BmaWcd0fF2NjY2Kex24JhVoS0TaX8as4wgWFjY2NvwW7/9W/Lhnwc+1ZJg42NjX0O+5yFjY2NjY2NjY2N/TXrLxPxKlzkHCWeAAAAAElFTkSuQmCC">
        </ul>
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/spark/">spark</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/2017/08/23/spark光速入门/" class="leancloud-views_num" data-flag-title="spark光速入门">
     &nbsp;浏览量
</span>

            </li>
        </a>
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=spark光速入门&url=https://stanxia.github.io//2017/08/23/spark光速入门/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=spark光速入门&url=https://stanxia.github.io//2017/08/23/spark光速入门/index.html&via=夏" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://stanxia.github.io//2017/08/23/spark光速入门/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://stanxia.github.io//2017/08/23/spark光速入门/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=小世界，大梦想&title=spark光速入门&summary=随便说说&pics=https://stanxia.github.iohttp://oliji9s3j.bkt.clouddn.com/favicon.ico&url=https://stanxia.github.io/2017/08/23/spark光速入门/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="markdown-Github mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <script src="/assets/js/DPlayer.min.js"> </script><h1 id="最全的Spark基础知识解答"><a href="#最全的Spark基础知识解答" class="headerlink" title="最全的Spark基础知识解答"></a>最全的Spark基础知识解答</h1><h2 id="一-Spark基础知识"><a href="#一-Spark基础知识" class="headerlink" title="一. Spark基础知识"></a>一. Spark基础知识</h2><h3 id="1-Spark是什么"><a href="#1-Spark是什么" class="headerlink" title="1.Spark是什么?"></a>1.Spark是什么?</h3><p>UCBerkeley AMPlab所开源的类HadoopMapReduce的通用的并行计算框架</p>
<p>dfsSpark基于mapreduce算法实现的分布式计算，拥有HadoopMapReduce所具有的优点;但不同于MapReduce的是Job中间输出和结果可以保存在内存中，从而不再需要读写HDFS，因此Spark能更好地适用于数据挖掘与机器学习等需要迭代的map reduce的算法。</p>
<h3 id="2-Spark与Hadoop的对比-Spark的优势"><a href="#2-Spark与Hadoop的对比-Spark的优势" class="headerlink" title="2.Spark与Hadoop的对比(Spark的优势)"></a>2.Spark与Hadoop的对比(Spark的优势)</h3><p>1、Spark的中间数据放到内存中，对于迭代运算效率更高</p>
<p>2、Spark比Hadoop更通用</p>
<p>3、Spark提供了统一的编程接口</p>
<p>4、容错性– 在分布式数据集计算时通过checkpoint来实现容错</p>
<p>5、可用性– Spark通过提供丰富的Scala, Java，Python API及交互式Shell来提高可用性</p>
<h3 id="3-Spark有那些组件"><a href="#3-Spark有那些组件" class="headerlink" title="3.Spark有那些组件"></a>3.Spark有那些组件</h3><p>1、Spark Streaming：支持高吞吐量、支持容错的实时流数据处理</p>
<p>2、Spark SQL， Data frames: 结构化数据查询</p>
<p>3、MLLib：Spark 生态系统里用来解决大数据机器学习问题的模块</p>
<p>4、GraphX是构建于Spark上的图计算模型</p>
<p>5、SparkR是一个R语言包，它提供了轻量级的方式使得可以在R语言中使用 Spark</p>
<h2 id="二-DataFrame相关知识点"><a href="#二-DataFrame相关知识点" class="headerlink" title="二. DataFrame相关知识点"></a>二. DataFrame相关知识点</h2><h3 id="1-DataFrame是什么"><a href="#1-DataFrame是什么" class="headerlink" title="1.DataFrame是什么?"></a>1.DataFrame是什么?</h3><p>DataFrame是一种以RDD为基础的分布式数据集，类似于传统数据库中的二维表格。</p>
<h3 id="2-DataFrame与RDD的主要区别在于"><a href="#2-DataFrame与RDD的主要区别在于" class="headerlink" title="2.DataFrame与RDD的主要区别在于?"></a>2.DataFrame与RDD的主要区别在于?</h3><p>DataFrame带有schema元信息，即DataFrame所表示的二维表数据集的每一列都带有名称和类型。这使得SparkSQL得以洞察更多的结构信息，从而对藏于DataFrame背后的数据源以及作用于DataFrame之上的变换进行了针对性的优化，最终达到大幅提升运行时效率的目标。反观RDD，由于无从得知所存数据元素的具体内部结构，Spark Core只能在stage层面进行简单、通用的流水线优化。</p>
<h3 id="3-DataFrame-特性"><a href="#3-DataFrame-特性" class="headerlink" title="3.DataFrame 特性"></a>3.DataFrame 特性</h3><p>1、支持从KB到PB级的数据量</p>
<p>2、支持多种数据格式和多种存储系统</p>
<p>3、通过Catalyst优化器进行先进的优化生成代码</p>
<p>4、通过Spark无缝集成主流大数据工具与基础设施</p>
<p>5、API支持Python、Java、Scala和R语言</p>
<h2 id="三-RDD相关知识点"><a href="#三-RDD相关知识点" class="headerlink" title="三 .RDD相关知识点"></a>三 .RDD相关知识点</h2><h3 id="1-RDD，全称为"><a href="#1-RDD，全称为" class="headerlink" title="1.RDD，全称为?"></a>1.RDD，全称为?</h3><p>Resilient Distributed Datasets，意为容错的、并行的数据结构，可以让用户显式地将数据存储到磁盘和内存中，并能控制数据的分区。同时，RDD还提供了一组丰富的操作来操作这些数据。</p>
<h3 id="2-RDD的特点"><a href="#2-RDD的特点" class="headerlink" title="2.RDD的特点?"></a>2.RDD的特点?</h3><p>它是在集群节点上的不可变的、已分区的集合对象。<br>通过并行转换的方式来创建如(map, filter, join, etc)。<br>失败自动重建。<br>可以控制存储级别(内存、磁盘等)来进行重用。<br>必须是可序列化的。<br>是静态类型的。</p>
<h3 id="3-RDD核心概念"><a href="#3-RDD核心概念" class="headerlink" title="3.RDD核心概念"></a>3.RDD核心概念</h3><p>Client：客户端进程，负责提交作业到Master。</p>
<p>Master:Standalone模式中主控节点，负责接收Client提交的作业，管理Worker，并命令Worker启动分配Driver的资源和启动Executor的资源。</p>
<p>Worker：Standalone模式中slave节点上的守护进程，负责管理本节点的资源，定期向Master汇报心跳，接收Master的命令，启动Driver和Executor。</p>
<p>Driver： 一个Spark作业运行时包括一个Driver进程，也是作业的主进程，负责作业的解析、生成Stage并调度Task到Executor上。包括DAGScheduler，TaskScheduler。</p>
<p>Executor：即真正执行作业的地方，一个集群一般包含多个Executor，每个Executor接收Driver的命令Launch Task，一个Executor可以执行一到多个Task。</p>
<h3 id="4-RDD常见术语"><a href="#4-RDD常见术语" class="headerlink" title="4.RDD常见术语"></a>4.RDD常见术语</h3><p>DAGScheduler： 实现将Spark作业分解成一到多个Stage，每个Stage根据RDD的Partition个数决定Task的个数，然后生成相应的Task set放到TaskScheduler中。</p>
<p>TaskScheduler：实现Task分配到Executor上执行。</p>
<p>Task：运行在Executor上的工作单元</p>
<p>Job：SparkContext提交的具体Action操作，常和Action对应</p>
<p>Stage：每个Job会被拆分很多组任务(task)，每组任务被称为Stage，也称TaskSet</p>
<p>RDD：Resilient Distributed Datasets的简称，弹性分布式数据集，是Spark最核心的模块和类</p>
<p>Transformation/Action：SparkAPI的两种类型;Transformation返回值还是一个RDD，Action返回值不少一个RDD，而是一个Scala的集合;所有的Transformation都是采用的懒策略，如果只是将Transformation提交是不会执行计算的，计算只有在Action被提交时才会被触发。</p>
<p>DataFrame： 带有Schema信息的RDD，主要是对结构化数据的高度抽象。</p>
<p>DataSet：结合了DataFrame和RDD两者的优势，既允许用户很方便的操作领域对象，又具有SQL执行引擎的高效表现。</p>
<h3 id="5-RDD提供了两种类型的操作："><a href="#5-RDD提供了两种类型的操作：" class="headerlink" title="5.RDD提供了两种类型的操作："></a>5.RDD提供了两种类型的操作：</h3><p>transformation和action</p>
<p>1，transformation是得到一个新的RDD，方式很多，比如从数据源生成一个新的RDD，从RDD生成一个新的RDD</p>
<p>2，action是得到一个值，或者一个结果(直接将RDD cache到内存中)</p>
<p>3，所有的transformation都是采用的懒策略，就是如果只是将transformation提交是不会执行计算的，计算只有在action被提交的时候才被触发</p>
<h3 id="6-RDD中关于转换-transformation-与动作-action-的区别"><a href="#6-RDD中关于转换-transformation-与动作-action-的区别" class="headerlink" title="6.RDD中关于转换(transformation)与动作(action)的区别"></a>6.RDD中关于转换(transformation)与动作(action)的区别</h3><p>transformation会生成新的RDD，而后者只是将RDD上某项操作的结果返回给程序，而不会生成新的RDD;无论执行了多少次transformation操作，RDD都不会真正执行运算(记录lineage)，只有当action操作被执行时，运算才会触发。</p>
<h3 id="7-RDD-与-DSM的最大不同是"><a href="#7-RDD-与-DSM的最大不同是" class="headerlink" title="7.RDD 与 DSM的最大不同是?"></a>7.RDD 与 DSM的最大不同是?</h3><p>DSM(distributed shared memory)</p>
<p>RDD只能通过粗粒度转换来创建，而DSM则允许对每个内存位置上数据的读和写。在这种定义下，DSM不仅包括了传统的共享内存系统，也包括了像提供了共享 DHT(distributed hash table) 的 Piccolo 以及分布式数据库等。</p>
<h3 id="8-RDD的优势"><a href="#8-RDD的优势" class="headerlink" title="8.RDD的优势?"></a>8.RDD的优势?</h3><p>1、高效的容错机制</p>
<p>2、结点落后问题的缓和 (mitigate straggler) ：</p>
<p>3、批量操作：</p>
<p>4、优雅降级 (degrade gracefully)</p>
<h3 id="9-如何获取RDD"><a href="#9-如何获取RDD" class="headerlink" title="9.如何获取RDD?"></a>9.如何获取RDD?</h3><p>1、从共享的文件系统获取，(如：HDFS)</p>
<p>2、通过已存在的RDD转换</p>
<p>3、将已存在scala集合(只要是Seq对象)并行化 ，通过调用SparkContext的parallelize方法实现</p>
<p>4、改变现有RDD的之久性;RDD是懒散，短暂的。</p>
<h3 id="10-RDD都需要包含以下四个部分"><a href="#10-RDD都需要包含以下四个部分" class="headerlink" title="10.RDD都需要包含以下四个部分"></a>10.RDD都需要包含以下四个部分</h3><p>a.源数据分割后的数据块，源代码中的splits变量</p>
<p>b.关于“血统”的信息，源码中的dependencies变量</p>
<p>c.一个计算函数(该RDD如何通过父RDD计算得到)，源码中的iterator(split)和compute函数</p>
<p>d.一些关于如何分块和数据存放位置的元信息，如源码中的partitioner和preferredLocations0</p>
<h3 id="11-RDD中将依赖的两种类型"><a href="#11-RDD中将依赖的两种类型" class="headerlink" title="11.RDD中将依赖的两种类型"></a>11.RDD中将依赖的两种类型</h3><p>窄依赖(narrowdependencies)和宽依赖(widedependencies)。</p>
<p>窄依赖是指父RDD的每个分区都只被子RDD的一个分区所使用。相应的，那么宽依赖就是指父RDD的分区被多个子RDD的分区所依赖。例如，map就是一种窄依赖，而join则会导致宽依赖</p>
<p>依赖关系分类的特性：</p>
<p>第一，窄依赖可以在某个计算节点上直接通过计算父RDD的某块数据计算得到子RDD对应的某块数据;</p>
<p>第二，数据丢失时，对于窄依赖只需要重新计算丢失的那一块数据来恢复;</p>
<h2 id="四-Spark-Streaming相关知识点"><a href="#四-Spark-Streaming相关知识点" class="headerlink" title="四. Spark Streaming相关知识点"></a>四. Spark Streaming相关知识点</h2><h3 id="1-Spark-Streaming的基本原理"><a href="#1-Spark-Streaming的基本原理" class="headerlink" title="1.Spark Streaming的基本原理"></a>1.Spark Streaming的基本原理</h3><p>Spark Streaming的基本原理是将输入数据流以时间片(秒级)为单位进行拆分，然后以类似批处理的方式处理每个时间片数据</p>
<h4 id="RDD-基本操作"><a href="#RDD-基本操作" class="headerlink" title="RDD 基本操作"></a>RDD 基本操作</h4><h5 id="常见的聚合操作："><a href="#常见的聚合操作：" class="headerlink" title="常见的聚合操作："></a>常见的聚合操作：</h5><p>count(*) 所有值不全为NULL时，加1操作<br>count(1) 不管有没有值，只要有这条记录，值就加1<br>count(col) col列里面的值为null，值不会加1，这个列里面的值不为NULL，才加1</p>
<p>sum求和</p>
<p>sum(可转成数字的值) 返回bigint<br>avg求平均值<br>avg(可转成数字的值)返回double<br>distinct不同值个数<br>count(distinct col)<br>按照某些字段排序</p>
<p>select col1,other… from table where conditio order by col1,col2 [asc|desc]</p>
<h5 id="Join表连接"><a href="#Join表连接" class="headerlink" title="Join表连接"></a>Join表连接</h5><p>join等值连接(内连接)，只有某个值在m和n中同时存在时。</p>
<p>left outer join 左外连接，左边表中的值无论是否在b中存在时，都输出;右边表中的值，只有在左边表中存在时才输出。</p>
<p>right outer join 和 left outer join 相反。</p>
<h5 id="Transformation具体内容："><a href="#Transformation具体内容：" class="headerlink" title="Transformation具体内容："></a>Transformation具体内容：</h5><p>reduceByKey(func, [numTasks]) : 在一个(K，V)对的数据集上使用，返回一个(K，V)对的数据集，key相同的值，都被使用指定的reduce函数聚合到一起。和groupbykey类似，任务的个数是可以通过第二个可选参数来配置的。</p>
<p>join(otherDataset, [numTasks]) :在类型为(K,V)和(K,W)类型的数据集上调用，返回一个(K,(V,W))对，每个key中的所有元素都在一起的数据集</p>
<p>groupWith(otherDataset, [numTasks]) : 在类型为(K,V)和(K,W)类型的数据集上调用，返回一个数据集，组成元素为(K, Seq[V], Seq[W]) Tuples。这个操作在其它框架，称为CoGroup</p>
<p>cartesian(otherDataset) : 笛卡尔积。但在数据集T和U上调用时，返回一个(T，U)对的数据集，所有元素交互进行笛卡尔积。</p>
<p>flatMap(func) :类似于map，但是每一个输入元素，会被映射为0到多个输出元素(因此，func函数的返回值是一个Seq，而不是单一元素)</p>
<p>Case 1将一个list乘方后输出</p>
<p>val input = sc.parallelize(List(1,2,3,4))</p>
<p>val result = input.map(x =&gt; x*x)</p>
<p>println(result.collect().mkString(“,”))</p>
<p>Case 2 wordcount</p>
<p>val textFile = sc.textFile(args(1))</p>
<p>val result = textFile.flatMap(line =&gt; line.split(“\s+”)).map(word =&gt; (word, 1)).reduceByKey(<em> + </em>)</p>
<p>println(result.collect().mkString(“,”))</p>
<p>result.saveAsTextFile(args(2))</p>
<p>Case 3 打印rdd的元素</p>
<p>rdd.foreach(println) 或者 rdd.map(println).</p>
<p>rdd.collect().foreach(println)</p>
<p>rdd.take(100).foreach(println)</p>
<p>spark SQL(待补充)</p>
<p>SQL</p>
<h4 id="Spark-Streaming优劣"><a href="#Spark-Streaming优劣" class="headerlink" title="Spark Streaming优劣"></a>Spark Streaming优劣</h4><h5 id="优势："><a href="#优势：" class="headerlink" title="优势："></a>优势：</h5><p>1、统一的开发接口</p>
<p>2、吞吐和容错</p>
<p>3、多种开发范式混用，Streaming + SQL, Streaming +MLlib</p>
<p>4、利用Spark内存pipeline计算</p>
<h5 id="劣势："><a href="#劣势：" class="headerlink" title="劣势："></a>劣势：</h5><p>微批处理模式，准实时</p>
<h4 id="DStream"><a href="#DStream" class="headerlink" title="DStream"></a>DStream</h4><p>1.将流式计算分解成一系列确定并且较小的批处理作业</p>
<p>2.将失败或者执行较慢的任务在其它节点上并行执行，执行的最小单元为RDD的partition</p>
<p>3.较强的容错能力</p>
<h2 id="五-日志系统"><a href="#五-日志系统" class="headerlink" title="五. 日志系统"></a>五. 日志系统</h2><h3 id="1-Flume"><a href="#1-Flume" class="headerlink" title="1.Flume"></a>1.Flume</h3><p>Flume是一个分布式的日志收集系统，具有高可靠、高可用、事务管理、失败重启等功能。数据处理速度快，完全可以用于生产环境。</p>
<p>Flume的核心是agent。</p>
<p>Agent是一个java进程，运行在日志收集端，通过agent接收日志，然后暂存起来，再发送到目的地。</p>
<p>Agent里面包含3个核心组件：source、channel、sink。</p>
<p>Source组件是专用于收集日志的，可以处理各种类型各种格式的日志数据,包括avro、thrift、exec、jms、spoolingdirectory、netcat、sequencegenerator、syslog、http、legacy、自定义。source组件把数据收集来以后，临时存放在channel中。</p>
<p>Channel组件是在agent中专用于临时存储数据的，可以存放在memory、jdbc、file、自定义。channel中的数据只有在sink发送成功之后才会被删除。</p>
<p>Sink组件是用于把数据发送到目的地的组件，目的地包括hdfs、logger、avro、thrift、ipc、file、null、hbase、solr、自定义。</p>
<h3 id="2-Kafka"><a href="#2-Kafka" class="headerlink" title="2.Kafka"></a>2.Kafka</h3><p>Apache Kafka是分布式发布-订阅消息系统。</p>
<p>它最初由LinkedIn公司开发，之后成为Apache项目的一部分。Kafka是一种快速、可扩展的、设计内在就是分布式的，分区的和可复制的提交日志服务。</p>
<p>Apache Kafka与传统消息系统相比，有以下不同：</p>
<p>1、它被设计为一个分布式系统，易于向外扩展;</p>
<p>2、它同时为发布和订阅提供高吞吐量;</p>
<p>3、它支持多订阅者，当失败时能自动平衡消费者;</p>
<p>4、它将消息持久化到磁盘，因此可用于批量消费</p>
<h2 id="六-分布式搜索"><a href="#六-分布式搜索" class="headerlink" title="六. 分布式搜索"></a>六. 分布式搜索</h2><h3 id="搜索引擎是什么"><a href="#搜索引擎是什么" class="headerlink" title="搜索引擎是什么?"></a>搜索引擎是什么?</h3><p>搜索引擎是指根据一定的策略、运用特定的计算机程序从互联网上搜集信息，在对信息进行组织和处理后，为用户提供检索服务，将用户检索相关的信息展示给用户的系统。搜索引擎包括全文索引、目录索引、元搜索引擎、垂直搜索引擎、集合式搜索引擎、门户搜索引擎与免费链接列表等。</p>
<h3 id="Lucene是什么"><a href="#Lucene是什么" class="headerlink" title="Lucene是什么?"></a>Lucene是什么?</h3><p>Lucene一个高性能、可伸缩的信息搜索库，即它不是一个完整的全文检索引擎，而是一个全检索引擎的架构，提供了完整的查询引擎和索引引擎，部分文本分析引擎。</p>
<h3 id="Elasticsearch是什么"><a href="#Elasticsearch是什么" class="headerlink" title="Elasticsearch是什么?"></a>Elasticsearch是什么?</h3><p>Elasticsearch一个高可扩展的开源的全文本搜索和分析工具。</p>
<p>它允许你以近实时的方式快速存储、搜索、分析大容量的数据。Elasticsearch是一个基于ApacheLucene(TM)的开源搜索引擎。无论在开源还是专有领域，Lucene可以被认为是迄今为止最先进、性能最好的、功能最全的搜索引擎库。</p>
<p>ElasticSearch 有4中方式来构建数据库</p>
<p>最简单的方法是使用indexAPI，将一个Document发送到特定的index，一般通过curltools实现。</p>
<p>第二第三种方法是通过bulkAPI和UDPbulkAPI。两者的区别仅在于连接方式。</p>
<p>第四种方式是通过一个插件-river。river运行在ElasticSearch上，并且可以从外部数据库导入数据到ES中。需要注意的是，数据构建仅在分片上进行，而不能在副本上进行。</p>
<p>ELK是一套常用的开源日志监控和分析系统</p>
<p>包括一个分布式索引与搜索服务Elasticsearch，一个管理日志和事件的工具logstash，和一个数据可视化服务Kibana，logstash 负责日志的收集，处理和储存，elasticsearch 负责日志检索和分析，Kibana 负责日志的可视化。</p>
<h2 id="七-分布式数据库"><a href="#七-分布式数据库" class="headerlink" title="七. 分布式数据库"></a>七. 分布式数据库</h2><h3 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h3><h4 id="1-Hive是什么"><a href="#1-Hive是什么" class="headerlink" title="1.Hive是什么?"></a>1.Hive是什么?</h4><p>Hive是基于Hadoop的一个数据仓库工具，可以将结构化的数据文件映射为一张数据库表，并提供类SQL查询功能。本质是将HQL转换为MapReduce程序</p>
<h4 id="2-Hive的设计目标"><a href="#2-Hive的设计目标" class="headerlink" title="2.Hive的设计目标?"></a>2.Hive的设计目标?</h4><p>1、Hive的设计目标是使Hadoop上的数据操作与传统SQL相结合，让熟悉SQL编程开发人员能够轻松向Hadoop平台迁移</p>
<p>2、Hive提供类似SQL的查询语言HQL，HQL在底层被转换为相应的MapReduce操作</p>
<p>3、Hive在HDFS上构建数据仓库来存储结构化的数据，这些数据一般来源与HDFS上的原始数据，使用Hive可以对这些数据执行查询、分析等操作。</p>
<h4 id="3-Hive的内部表与外部表"><a href="#3-Hive的内部表与外部表" class="headerlink" title="3.Hive的内部表与外部表"></a>3.Hive的内部表与外部表</h4><p>Hive在创建内部表时，会将数据移动到数据仓库指向的路径，若创建外部表，仅记录数据所在的路径，不对数据位置做任何改变，在删除表的时候，内部表的元数据和数据会被一起删除，外部表只会删除元数据，不删除数据。这样来说，外部表要比内部表安全，数据组织液更加灵活，方便共享源数据。</p>
<h4 id="4-Hive的调用方式"><a href="#4-Hive的调用方式" class="headerlink" title="4.Hive的调用方式"></a>4.Hive的调用方式</h4><p>1、Hive Shell</p>
<p>2、Thrift</p>
<p>3、JDBC</p>
<p>4、ODBC</p>
<h4 id="5-Hive的运行机制"><a href="#5-Hive的运行机制" class="headerlink" title="5.Hive的运行机制"></a>5.Hive的运行机制</h4><p>1、将sql转换成抽象语法树</p>
<p>2、将抽象语法树转化成查询块</p>
<p>3、将查询块转换成逻辑查询计划(操作符树)</p>
<p>4、将逻辑计划转换成物理计划(M\Rjobs)</p>
<h4 id="6-Hive的优势"><a href="#6-Hive的优势" class="headerlink" title="6.Hive的优势"></a>6.Hive的优势</h4><p>1、并行计算</p>
<p>2、充分利用集群的CPU计算资源、存储资源</p>
<p>3、处理大规模数据集</p>
<p>4、使用SQL，学习成本低</p>
<h4 id="7-Hive应用场景"><a href="#7-Hive应用场景" class="headerlink" title="7.Hive应用场景"></a>7.Hive应用场景</h4><p>1、海量数据处理</p>
<p>2、数据挖掘</p>
<p>3、数据分析</p>
<p>4、SQL是商务智能工具的通用语言，Hive有条件和这些BI产品进行集成</p>
<h4 id="8-Hive不适用场景"><a href="#8-Hive不适用场景" class="headerlink" title="8.Hive不适用场景"></a>8.Hive不适用场景</h4><p>1、复杂的科学计算</p>
<p>2、不能做到交互式的实时查询</p>
<h4 id="9-Hive和数据库-RDBMS-的区别"><a href="#9-Hive和数据库-RDBMS-的区别" class="headerlink" title="9.Hive和数据库(RDBMS)的区别"></a>9.Hive和数据库(RDBMS)的区别</h4><p>1、数据存储位置。Hive是建立在Hadoop之上的，所有的Hive的数据都是存储在HDFS中的。而数据库则可以将数据保存在块设备或本地文件系统中。</p>
<p>2、数据格式。Hive中没有定义专门的数据格式，由用户指定，需要指定三个属性：列分隔符，行分隔符，以及读取文件数据的方法。数据库中，存储引擎定义了自己的数据格式。所有数据都会按照一定的组织存储。</p>
<p>3、数据更新。Hive的内容是读多写少的，因此，不支持对数据的改写和删除，数据都在加载的时候中确定好的。数据库中的数据通常是需要经常进行修改。</p>
<p>4、执行延迟。Hive在查询数据的时候，需要扫描整个表(或分区)，因此延迟较高，只有在处理大数据是才有优势。数据库在处理小数据是执行延迟较低。</p>
<p>5、索引。Hive没有，数据库有</p>
<p>6、执行。Hive是MapReduce，数据库是Executor</p>
<p>7、可扩展性。Hive高，数据库低</p>
<p>8、数据规模。Hive大，数据库小</p>
<p>hive代码简单例子：</p>
<p>创建一个名为”test“的table</p>
<p>create table IF NOT EXISTS students (name string,age int,city string) comment”students-information-table”</p>
<p>partitioned by (class string) –分区字段</p>
<p>row format delimited fields terminated by ‘\001’ –字段分隔符</p>
<p>lines terminated by ‘\n’ –行分隔符</p>
<p>stored as orcfile; –存储格式（textfile,rcfile,orcfile）</p>
<p>load data (local) inpath “file_path” (overwrite) into table studentX partition (grade=’excellent’);–加载数据</p>
<p>show partitions studentX; –查看分区</p>
<p>select * from studentX where grade=’excellent’; –条件查询</p>
<p>drop table IF EXISTS  students;–表删除操作</p>
<p>create EXTERNAL table IF NOT EXISTS studentX (name string,age int,city string,class string) partitioned by (class string) ROW FORMAT DELIMITED FIELDS TERMINATED BY ‘,’;–创建外部表，指定数据存放位置</p>
<p>alter table test add partition (class=’one’) location ‘/testmore/one’;–添加分区</p>
<h4 id="列式存储格式-Parquet"><a href="#列式存储格式-Parquet" class="headerlink" title="列式存储格式 Parquet"></a>列式存储格式 Parquet</h4><p>Parquet 是面向分析型业务的列式存储格式，由 Twitter 和 Cloudera 合作开发， 2015 年 5 月从 Apache 的孵化器里毕业成为 Apache 顶级项目 。</p>
<h5 id="列式存储和行式存储相比的优势"><a href="#列式存储和行式存储相比的优势" class="headerlink" title="列式存储和行式存储相比的优势 :"></a>列式存储和行式存储相比的优势 :</h5><p>可以跳过不符合条件的数据，只读取需要的数据，降低 IO 数据量。<br>压缩编码可以降低磁盘存储空间。由于同一列的数据类型是一样的，可以使用更高效的压缩编码(例如 Run Length Encoding 和 DeltaEncoding )进一步节约存储空间。<br>只读取需要的列，支持向量运算，能够获取更好的扫描性能。</p>
<h2 id="八-基础问答题"><a href="#八-基础问答题" class="headerlink" title="八. 基础问答题"></a>八. 基础问答题</h2><h3 id="Q-你理解的Hive和传统数据库有什么不同-各有什么试用场景。"><a href="#Q-你理解的Hive和传统数据库有什么不同-各有什么试用场景。" class="headerlink" title="Q:你理解的Hive和传统数据库有什么不同?各有什么试用场景。"></a>Q:你理解的Hive和传统数据库有什么不同?各有什么试用场景。</h3><p>1、数据存储位置。Hive是建立在Hadoop之上的，所有的Hive的数据都是存储在HDFS中的。而数据库则可以将数据保存在块设备或本地文件系统中。</p>
<p>2、数据格式。Hive中没有定义专门的数据格式，由用户指定，需要指定三个属性：列分隔符，行分隔符，以及读取文件数据的方法。数据库中，存储引擎定义了自己的数据格式。所有数据都会按照一定的组织存储。</p>
<p>3、数据更新。Hive的内容是读多写少的，因此，不支持对数据的改写和删除，数据都在加载的时候中确定好的。数据库中的数据通常是需要经常进行修改。</p>
<p>4、执行延迟。Hive在查询数据的时候，需要扫描整个表(或分区)，因此延迟较高，只有在处理大数据是才有优势。数据库在处理小数据是执行延迟较低。</p>
<p>5、索引。Hive没有，数据库有</p>
<p>6、执行。Hive是MapReduce，数据库是Executor</p>
<p>7、可扩展性。Hive高，数据库低</p>
<p>8、数据规模。Hive大，数据库小</p>
<h3 id="Q-Hive的实用场景"><a href="#Q-Hive的实用场景" class="headerlink" title="Q:Hive的实用场景"></a>Q:Hive的实用场景</h3><p>1、Data Ingestion (数据摄取)</p>
<p>2、Data Discovery(数据发现)</p>
<p>3、Data analytics(数据分析)</p>
<p>4、Data Visualization &amp; Collaboration(数据可视化和协同开发)</p>
<h3 id="Q-大数据分析与挖掘方法论被称为CRISP-DM方法是以数据为中心迭代循环进行的六步活动"><a href="#Q-大数据分析与挖掘方法论被称为CRISP-DM方法是以数据为中心迭代循环进行的六步活动" class="headerlink" title="Q:大数据分析与挖掘方法论被称为CRISP-DM方法是以数据为中心迭代循环进行的六步活动"></a>Q:大数据分析与挖掘方法论被称为CRISP-DM方法是以数据为中心迭代循环进行的六步活动</h3><p>A:它们分别是：商业理解、数据理解、数据准备、建立模型<em>、模型评估、结果部署</em>。</p>
<h3 id="Q-数据分析挖掘方法大致包含-："><a href="#Q-数据分析挖掘方法大致包含-：" class="headerlink" title="Q:数据分析挖掘方法大致包含 ( )："></a>Q:数据分析挖掘方法大致包含 ( )：</h3><p>1.分类 Classification</p>
<p>2.估计Estimation</p>
<p>3.预测Prediction</p>
<p>4.关联规则Association Rules</p>
<p>5.聚类Cluster</p>
<p>6.描述与可视化Description and Visualization</p>
<h3 id="Q-在数据分析与挖掘中对数据的访问性要求包括"><a href="#Q-在数据分析与挖掘中对数据的访问性要求包括" class="headerlink" title="Q:在数据分析与挖掘中对数据的访问性要求包括"></a>Q:在数据分析与挖掘中对数据的访问性要求包括</h3><p>交互性访问、批处理访问_、迭代计算、数据查询，HADOOP仅仅支持了其中批处理访问，而Spark则支持所有4种方式。</p>
<h3 id="Q-Spark作为计算框架的优势是什么"><a href="#Q-Spark作为计算框架的优势是什么" class="headerlink" title="Q:Spark作为计算框架的优势是什么?"></a>Q:Spark作为计算框架的优势是什么?</h3><p>1、Spark的中间数据放到内存中，对于迭代运算效率更高</p>
<p>2、Spark比Hadoop更通用</p>
<p>3、Spark提供了统一的编程接口</p>
<p>4、容错性– 在分布式数据集计算时通过checkpoint来实现容错</p>
<p>5、可用性– Spark通过提供丰富的Scala, Java，Python API及交互式Shell来提高可用性</p>
<hr>

<p>转载自36大数据（36dsj.com)</p>
<p>==&gt;</p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    


    <!-- 使用 DISQUS -->
    <div id="disqus-comment">
        <div id="disqus_thread"></div>
<script>
    $('html').ready(function() {
        setTimeout(function() {
            var disqus_config = function () {
                this.page.url = 'https://stanxia.github.io/2017/08/23/spark光速入门/index.html';  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };

            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//astan.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        },1500);
    });
</script>

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>


                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/06/09/「动漫」全职高手11/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>


    
                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="夏's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        xooglexls@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    <li id="sidebar-first-li">
        <a href="/" target="_self">
            <i class="material-icons sidebar-material-icons">home</i>
            主页
        </a>
    </li>

    <!-- I'm Feeling Lucky -->
    <!--
    <li class="dropdown">
        <a href="" target="_self">
            <i class="material-icons sidebar-material-icons">explore</i>
             sidebar.imlucky
        </a>
    </li>
    -->

    <!-- Archives  -->
    <li class="dropdown">
        <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
            <i class="material-icons sidebar-material-icons">inbox</i>
             归档
            <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
            <li>
            <a class="sidebar_archives-link" href="/archives/2017/08/">八月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/05/">五月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">6</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/05/">五月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/03/">三月 2016<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/02/">二月 2016<span class="sidebar_archives-count">20</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/01/">一月 2016<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/03/">三月 2015<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/02/">二月 2015<span class="sidebar_archives-count">1</span></a>
        </ul>
    </li>

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/GEM/">GEM<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Spark/">Spark<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/java/">java<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/linux/">linux<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/mac/">mac<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/动漫/">动漫<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/大数据/">大数据<span class="sidebar_archives-count">31</span></a></li><li><a class="sidebar_archives-link" href="/categories/技术/">技术<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/数据库/">数据库<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/机器学习/">机器学习<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/测试功能/">测试功能<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/游戏/">游戏<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/版本控制/">版本控制<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/生活/">生活<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/电影/">电影<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/问题集锦/">问题集锦<span class="sidebar_archives-count">6</span></a>
            </ul>
        </li>
    

    <!-- Divider -->
    <li class="divider"></li>


    <!-- Pages  -->
  	
        <li>
            <a href="/aboutme/" title="Astan">
                
                Astan
            </a>
        </li>
  	
        <li>
            <a href="/tags/" title="标签索引">
                
                标签索引
            </a>
        </li>
  	
        <li>
            <a href="/galleries/" title="图库">
                
                图库
            </a>
        </li>
  	

    <!-- Article Numebr  -->
    <li>
        <a href="/archives">
            文章总数
            <span class="sidebar-badge">59</span>
        </a>
    </li>
</ul>


        <!-- Sidebar Divider -->
        <div class="sidebar-divider"></div>

        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Theme Material -->
<a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        主题 - Material
        <span class="sidebar-badge badge-circle">i</span>
    </div>
</a>

<!-- Help & Support -->
<!--
<a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
    sidebar.help
    <span class="mdl-button__ripple-container">
      <span class="mdl-ripple"></span>
    </span>
  </div>
</a>
-->

<!-- Feedback -->
<!--
<a href="https://github.com/viosey/hexo-theme-material/issues" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.feedback
                    <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>
-->

<!-- Abount Theme -->
<!--
<a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
    <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
         sidebar.about_theme
        <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
</a>-->

    </div>

    <!-- Sidebar Sponsor -->
    

</aside>

                    
    
                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    
    
                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.png);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/profile.php?id=100014686742374" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.png);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.png);">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    
        <a href="http://weibo.com/u/1789803763/home?leftnav=1" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-weibo.png);">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;小世界，大梦想
          <div>
		<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
		<div>
		本站总访问量 <span id="busuanzi_value_site_pv"></span> &nbsp&nbsp&nbsp
		你是第<span id="busuanzi_value_site_uv"></span>个来到的小伙伴
		</div>
	</div>
        </div>

        <!-- Paradox Footer Right Section -->
        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
         

	</div>
    
</footer>

    
                    <!-- Import File -->
<script src="/js/highlight.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();

    $('#nprogress .bar').css({
        'background': '#FF4081'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #FF4081, 0 0 15px #FF4081'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#FF4081',
        'border-left-color': '#FF4081'
    });

    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize("f8AHUn2FOKCWoFzJTLrnSt4A-gzGzoHsz", "dOlRTKgDWf3Ut87VDHex4Wks");
    </script>
    <script>
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>








    <!-- 使用 DISQUS js 代码 -->
    <script id="dsq-count-scr" src="//astan.disqus.com/count.js" async></script>



<!-- Swiftye -->


<!-- Local Search-->

    <script>
    var searchFunc = function(path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: 'xml',
            success: function( xmlResponse ) {
                // get the contents from search data
                var datas = $( 'entry', xmlResponse ).map(function() {
                    return {
                        title: $( 'title', this ).text(),
                        content: $('content',this).text(),
                        url: $( 'url' , this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function() {
                    var str='<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function(data) {
                        var isMatch = true;
                        var content_index = [];
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                        var data_url = data.url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if(data_title != '' && data_content != '') {
                            keywords.forEach(function(keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if( index_title < 0 && index_content < 0 ) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += '<li><a href="'+ data_url +'" class="search-result-title" target="_blank">'+ data_title;
                            var content = data.content.trim().replace(/<[^>]+>/g, '');
                            if (first_occur >= 0) {
                                // cut out characters
                                var start = first_occur - 6;
                                var end = first_occur + 6;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 10;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function(keyword) {
                                    var regS = new RegExp(keyword, 'gi');
                                    match_content = match_content.replace(regS, '<em class="search-keyword">'+keyword+'</em>');
                                })
                                str += '<p class="search-result">' + match_content +'...</p>' +'</a>';
                            }
                        }
                    });
                    $resultContent.innerHTML = str;
                });
            }
        });
    }
</script>


    <script>
        var inputArea = document.querySelector('#search');
        var getSearchFile = function() {
            var path = 'search.xml';
            searchFunc(path, 'search', 'local-search-result');
        }

        if(inputArea) {
            inputArea.onfocus = function() {
                getSearchFile();
            }
        }
    </script>


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
